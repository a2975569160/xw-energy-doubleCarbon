import{_ as tu,a as ou}from"./Table.db4db060.js";import{q as X,y as su}from"./systemManage.169b421f.js";import{d as nu,r,a as pu,b as _,e as d,f as A,g as i,j as u,k as e,u as C,aG as ru,aE as du,F as B,aD as y,s as cu,m as iu,t as Fu,h as j,l as v,q as L,x as m,E as _u}from"./index.3926de36.js";import{u as T,w as fu}from"./xlsx.86b9426e.js";import"./index.49c99800.js";const mu={class:"flex flex-col w-full p-10px box-border",style:{height:"calc(100% - 40px)"}},Eu={class:"flex-1 flex flex-col h-100%",style:{"box-shadow":"0px 1px 10px 0px rgba(153, 153, 153, 0.4)"}},Du=i("div",{class:"h-50px lh-50px pl-10px pr-40px bg-[#F8F8F8]"},[i("span",{class:"text-[#333] text-16px font-bold"},"\u56ED\u533A\u4FE1\u606F\u7BA1\u7406")],-1),bu={class:"w-full",style:{height:"calc(100% - 50px)"}},yu={class:"mt-2px float-right"},vu=m("\u67E5\u8BE2"),hu=m("\u91CD\u7F6E"),gu={class:"text-right mr-20px mb-10px"},xu=m("\u65B0\u589E"),Au=m("\u5BFC\u51FA"),Cu={class:"flex justify-center"},Bu=m("\u67E5\u770B"),wu=m("\u5220\u9664"),qu={class:"mt-20px text-right"},Vu=m("\u53D6\u6D88"),zu=m("\u4FDD\u5B58"),Tu=nu({__name:"index",setup(ku){const w=r(1),q=r(10);let $=r(0);const h=r(""),g=r(""),Y=()=>{h.value="",g.value="",w.value=1,q.value=10,D()},H=[{type:"index",label:"\u5E8F\u53F7",width:"80"},{prop:"yqmc",label:"\u56ED\u533A\u540D\u79F0",width:200},{slotName:"sfgnColumn",type:"slot",prop:"sfgn",label:"\u56FD\u5185/\u56FD\u5916"},{prop:"yqjj",label:"\u56ED\u533A\u7B80\u4ECB"},{prop:"qysl",label:"\u4F01\u4E1A\u6570\u91CF"},{prop:"cyjj",label:"\u4EA7\u4E1A\u7B80\u4ECB",width:240},{prop:"ndzcz",label:"\u5E74\u5EA6\u603B\u4EA7\u503C",width:200},{prop:"zhnhzl",label:"\u7EFC\u5408\u80FD\u8017\u603B\u91CF"},{prop:"dwcznh",label:"\u5355\u4F4D\u4EA7\u503C\u80FD\u8017"},{prop:"dwczdh",label:"\u5355\u4F4D\u4EA7\u503C\u7535\u8017"},{label:"\u64CD\u4F5C",width:"140",slotName:"actionColumn",type:"slot",align:"center"}],M=r([]);function D(){const l={yqmcVal:g.value,sfgn:h.value,pageNo:w.value,pageSize:q.value};X(l).then(t=>{M.value=t.records,w.value=t.current,q.value=t.size,$.value=t.total})}D();const J=l=>{console.log(`\u6BCF\u9875 ${l} \u6761`),q.value=l,D()},K=l=>{console.log(`\u5F53\u524D\u9875: ${l}`),w.value=l,D()},S=r(!1),U=r(!0),V=[{formLabelText:"",formLabelWidth:"160px",formList:[{prop:"yqmc",label:"\u56ED\u533A\u540D\u79F0",type:"input",value:""},{prop:"sfgn",label:"\u56FD\u5185/\u56FD\u5916",type:"input",value:""},{prop:"yqjj",label:"\u56ED\u533A\u7B80\u4ECB",type:"input",value:""},{prop:"qysl",label:"\u4F01\u4E1A\u6570\u91CF",type:"input",value:""},{prop:"cyjj",label:"\u4EA7\u4E1A\u7B80\u4ECB",type:"input",value:""},{prop:"ndzcz",label:"\u5E74\u5EA6\u603B\u4EA7\u503C",type:"input",value:""},{prop:"zhnhzl",label:"\u7EFC\u5408\u80FD\u8017\u603B\u91CF",type:"input",value:""},{prop:"dwcznh",label:"\u5355\u4F4D\u4EA7\u503C\u80FD\u8017",type:"input",value:""},{prop:"dwczdh",label:"\u5355\u4F4D\u4EA7\u503C\u7535\u8017",type:"input",value:""}]}],Q=pu({yqmc:[{required:!0,message:"\u56ED\u533A\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],sfgn:[{required:!0,message:"\u662F\u5426\u56FD\u5185\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],qysl:[{required:!0,message:"\u4F01\u4E1A\u6570\u91CF\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),b=r({}),R=l=>{b.value=l,U.value=!0,S.value=!0},Z=()=>{_u.confirm("\u6682\u65E0\u6743\u9650\u64CD\u4F5C!","\u63D0\u793A",{confirmButtonText:"\u786E\u8BA4",type:"warning",showCancelButton:!1}).then(()=>{})},W=()=>{V[0].formList.forEach(l=>{l.value=""}),f.value={},z.value=!1},z=r(!1),f=r({}),I=()=>{V[0].formList.forEach(l=>{l.value=""}),f.value={},z.value=!0},uu=()=>{let l=f.value;if(l.yqmc==null||l.yqmc===""){y({message:"\u65B0\u589E\u5931\u8D25\uFF01\u56ED\u533A\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",type:"warning"});return}if(l.sfgn==null||l.sfgn===""){y({message:"\u65B0\u589E\u5931\u8D25\uFF01\u662F\u5426\u56FD\u5185\u4E0D\u80FD\u4E3A\u7A7A",type:"warning"});return}if(l.qysl==null||l.qysl===""){y({message:"\u65B0\u589E\u5931\u8D25\uFF01\u4F01\u4E1A\u6570\u91CF\u4E0D\u80FD\u4E3A\u7A7A\u4E0D\u80FD\u4E3A\u7A7A",type:"warning"});return}su(l).then(t=>{t!=null&&(z.value=!1,D(),y({message:"\u65B0\u589E\u6210\u529F\uFF01",type:"success"}))}).catch(t=>{var F,n,p;y({message:"\u65B0\u589E\u5931\u8D25! "+((p=(n=(F=t==null?void 0:t.response)==null?void 0:F.data)==null?void 0:n.result)==null?void 0:p.resultMessage),type:"error"})})},eu=async()=>{let l=[];const t={yqmcVal:g.value,sfgn:h.value,pageNo:1,pageSize:5e3};await X(t).then(o=>{l=o.records});const F=[];l.forEach(function(o,c){const x={\u5E8F\u53F7:c+1,\u56ED\u533A\u540D\u79F0:o.yqmc,\u662F\u5426\u56FD\u5185:o.sfgn,\u56ED\u533A\u7B80\u4ECB:o.yqjj,\u4F01\u4E1A\u6570\u91CF:o.qysl,\u4EA7\u4E1A\u7B80\u4ECB:o.ndzcz,\u5E74\u5EA6\u603B\u4EA7\u503C:o.ndzcz,\u7EFC\u5408\u80FD\u8017\u603B\u91CF:o.ndzcz,\u5355\u4F4D\u4EA7\u503C\u80FD\u8017:o.dwczdh,\u5355\u4F4D\u4EA7\u503C\u7535\u8017:o.dwczdh};F.push(x)});const n=T.book_new(),p=T.json_to_sheet(F);T.book_append_sheet(n,p,"sheet"),fu(n,"\u56ED\u533A\u7BA1\u7406.xlsx"),y({message:"\u5BFC\u51FA\u6210\u529F\uFF01",type:"success"})};return(l,t)=>{const F=_("el-input"),n=_("el-form-item"),p=_("el-option"),o=_("el-select"),c=_("el-button"),x=_("el-form"),lu=tu,au=_("el-pagination"),G=_("el-col"),O=_("el-row"),P=ou;return d(),A(B,null,[i("div",mu,[i("div",Eu,[Du,i("div",bu,[u(x,{inline:!0,class:"m-20px pl-30px border-0 border-b border-solid border-#E0E0E0"},{default:e(()=>[u(n,{label:"\u56ED\u533A\u540D\u79F0"},{default:e(()=>[u(F,{modelValue:g.value,"onUpdate:modelValue":t[0]||(t[0]=s=>g.value=s),name:"yqmcVal",type:"input"},null,8,["modelValue"])]),_:1}),u(n,{label:"\u56FD\u5185/\u56FD\u5916"},{default:e(()=>[u(o,{modelValue:h.value,"onUpdate:modelValue":t[1]||(t[1]=s=>h.value=s),placeholder:"\u8BF7\u9009\u62E9\u662F\u5426\u56FD\u5185"},{default:e(()=>[u(p,{label:"\u56FD\u5185",value:"1"}),u(p,{label:"\u56FD\u5916",value:"0"})]),_:1},8,["modelValue"])]),_:1}),i("div",yu,[u(c,{type:"primary",class:"w-80px rounded-15px",icon:C(cu),onClick:D},{default:e(()=>[vu]),_:1},8,["icon"]),u(c,{class:"w-80px bg-[#dceeff] rounded-15px",icon:C(iu),onClick:Y},{default:e(()=>[hu]),_:1},8,["icon"])])]),_:1}),i("div",gu,[u(c,{type:"primary",class:"w-80px rounded-15px",icon:C(ru),onClick:I},{default:e(()=>[xu]),_:1},8,["icon"]),u(c,{type:"primary",class:"w-80px rounded-15px",icon:C(du),onClick:eu},{default:e(()=>[Au]),_:1},8,["icon"])]),u(lu,{class:"mt-20px",style:{height:"calc(100% - 200px)"},"table-columns":H,"table-data":M.value},{sfgnColumn:e(({row:s})=>[i("span",null,Fu(s.sfgn==1?"\u56FD\u5185":"\u56FD\u5916"),1)]),actionColumn:e(({row:s})=>[i("div",Cu,[u(c,{link:"",type:"primary",onClick:k=>R(s)},{default:e(()=>[Bu]),_:2},1032,["onClick"]),u(c,{link:"",type:"danger",onClick:Z},{default:e(()=>[wu]),_:1})])]),_:1},8,["table-data"]),u(au,{onSizeChange:J,onCurrentChange:K,class:"justify-end m-10px mt-15px",layout:"total, sizes, prev, pager, next",total:C($),background:""},null,8,["total"])])])]),u(P,{visible:S.value,title:"\u8BE6\u60C5\u67E5\u770B",width:"1000px",onClose:t[2]||(t[2]=s=>S.value=!1)},{default:e(()=>[(d(),A(B,null,j(V,(s,k)=>u(x,{key:k,"label-width":s.formLabelWidth,model:b.value},{default:e(()=>[u(O,{gutter:0},{default:e(()=>[(d(!0),A(B,null,j(s.formList,(a,N)=>(d(),v(G,{key:N,span:a.span||12},{default:e(()=>[a.prop!="sfgn"?(d(),v(n,{key:0,label:a.label},{default:e(()=>[u(F,{modelValue:b.value[a.prop],"onUpdate:modelValue":E=>b.value[a.prop]=E,type:a.type,disabled:U.value},null,8,["modelValue","onUpdate:modelValue","type","disabled"])]),_:2},1032,["label"])):L("",!0),a.prop=="sfgn"?(d(),v(n,{key:1,label:"\u662F\u5426\u56FD\u5185",required:"true"},{default:e(()=>[u(o,{modelValue:b.value[a.prop],"onUpdate:modelValue":E=>b.value[a.prop]=E,placeholder:"\u8BF7\u9009\u62E9\u662F\u5426\u56FD\u5185",disabled:U.value,required:"true"},{default:e(()=>[u(p,{label:"\u56FD\u5185",value:1}),u(p,{label:"\u56FD\u5916",value:0})]),_:2},1032,["modelValue","onUpdate:modelValue","disabled"])]),_:2},1024)):L("",!0)]),_:2},1032,["span"]))),128))]),_:2},1024)]),_:2},1032,["label-width","model"])),64))]),_:1},8,["visible"]),u(P,{visible:z.value,title:"\u56ED\u533A\u65B0\u589E",width:"1000px",onClose:W},{default:e(()=>[(d(),A(B,null,j(V,(s,k)=>u(x,{key:k,"label-width":s.formLabelWidth,model:f.value,rules:Q},{default:e(()=>[u(O,{gutter:0},{default:e(()=>[(d(!0),A(B,null,j(s.formList,(a,N)=>(d(),v(G,{key:N,span:a.span||12},{default:e(()=>[a.prop!="sfgn"?(d(),v(n,{key:0,label:a.label,prop:a.prop},{default:e(()=>[u(F,{modelValue:f.value[a.prop],"onUpdate:modelValue":E=>f.value[a.prop]=E,type:a.type},null,8,["modelValue","onUpdate:modelValue","type"])]),_:2},1032,["label","prop"])):L("",!0),a.prop=="sfgn"?(d(),v(n,{key:1,label:"\u56FD\u5185/\u56FD\u5916",prop:"sfgn"},{default:e(()=>[u(o,{modelValue:f.value[a.prop],"onUpdate:modelValue":E=>f.value[a.prop]=E,name:"sfgn",placeholder:"\u8BF7\u9009\u62E9\u56FD\u5185/\u56FD\u5916"},{default:e(()=>[u(p,{label:"\u56FD\u5185",value:1}),u(p,{label:"\u56FD\u5916",value:0})]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1024)):L("",!0)]),_:2},1032,["span"]))),128))]),_:2},1024)]),_:2},1032,["label-width","model","rules"])),64)),i("div",qu,[u(c,{class:"w-80px h-40px",onClick:W},{default:e(()=>[Vu]),_:1}),u(c,{type:"primary",class:"w-80px h-40px",onClick:uu},{default:e(()=>[zu]),_:1})])]),_:1},8,["visible"])],64)}}});export{Tu as default};
