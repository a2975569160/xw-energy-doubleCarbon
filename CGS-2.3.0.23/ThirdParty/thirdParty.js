(function(){var undefined,FUNC_ERROR_TEXT="Expected a function",PLACEHOLDER="__lodash_placeholder__",NAN=NaN,wrapFlags=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],argsTag="[object Arguments]",arrayTag="[object Array]",boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",funcTag="[object Function]",genTag="[object GeneratorFunction]",mapTag="[object Map]",numberTag="[object Number]",objectTag="[object Object]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",symbolTag="[object Symbol]",weakMapTag="[object WeakMap]",arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",reEmptyStringLeading=/\b__p \+= '';/g,reEmptyStringMiddle=/\b(__p \+=) '' \+/g,reEmptyStringTrailing=/(__e\(.*?\)|\b__t\)) \+\n'';/g,reEscapedHtml=/&(?:amp|lt|gt|quot|#39);/g,reUnescapedHtml=/[&<>"']/g,reHasEscapedHtml=RegExp(reEscapedHtml.source),reHasUnescapedHtml=RegExp(reUnescapedHtml.source),reEscape=/<%-([\s\S]+?)%>/g,reEvaluate=/<%([\s\S]+?)%>/g,reInterpolate=/<%=([\s\S]+?)%>/g,reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/,reLeadingDot=/^\./,rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reHasRegExpChar=RegExp(reRegExpChar.source),reTrim=/^\s+|\s+$/g,reTrimStart=/^\s+/,reTrimEnd=/\s+$/,reWrapComment=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,reWrapDetails=/\{\n\/\* \[wrapped with (.+)\] \*/,reSplitDetails=/,? & /,reAsciiWord=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,reEscapeChar=/\\(\\)?/g,reEsTemplate=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,reFlags=/\w*$/,reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsHostCtor=/^\[object .+?Constructor\]$/,reIsOctal=/^0o[0-7]+$/i,reIsUint=/^(?:0|[1-9]\d*)$/,reLatin=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,reNoMatch=/($^)/,reUnescapedString=/['\n\r\u2028\u2029\\]/g,rsComboRange="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",rsBreakRange="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",rsAstral="[\\ud800-\\udfff]",rsBreak="["+rsBreakRange+"]",rsCombo="["+rsComboRange+"]",rsDigits="\\d+",rsDingbat="[\\u2700-\\u27bf]",rsLower="[a-z\\xdf-\\xf6\\xf8-\\xff]",rsMisc="[^\\ud800-\\udfff"+rsBreakRange+rsDigits+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",rsFitz="\\ud83c[\\udffb-\\udfff]",rsNonAstral="[^\\ud800-\\udfff]",rsRegional="(?:\\ud83c[\\udde6-\\uddff]){2}",rsSurrPair="[\\ud800-\\udbff][\\udc00-\\udfff]",rsUpper="[A-Z\\xc0-\\xd6\\xd8-\\xde]",rsMiscLower="(?:"+rsLower+"|"+rsMisc+")",rsMiscUpper="(?:"+rsUpper+"|"+rsMisc+")",reOptMod="(?:"+rsCombo+"|"+rsFitz+")"+"?",rsSeq="[\\ufe0e\\ufe0f]?"+reOptMod+("(?:\\u200d(?:"+[rsNonAstral,rsRegional,rsSurrPair].join("|")+")[\\ufe0e\\ufe0f]?"+reOptMod+")*"),rsEmoji="(?:"+[rsDingbat,rsRegional,rsSurrPair].join("|")+")"+rsSeq,rsSymbol="(?:"+[rsNonAstral+rsCombo+"?",rsCombo,rsRegional,rsSurrPair,rsAstral].join("|")+")",reApos=RegExp("['’]","g"),reComboMark=RegExp(rsCombo,"g"),reUnicode=RegExp(rsFitz+"(?="+rsFitz+")|"+rsSymbol+rsSeq,"g"),reUnicodeWord=RegExp([rsUpper+"?"+rsLower+"+(?:['’](?:d|ll|m|re|s|t|ve))?(?="+[rsBreak,rsUpper,"$"].join("|")+")",rsMiscUpper+"+(?:['’](?:D|LL|M|RE|S|T|VE))?(?="+[rsBreak,rsUpper+rsMiscLower,"$"].join("|")+")",rsUpper+"?"+rsMiscLower+"+(?:['’](?:d|ll|m|re|s|t|ve))?",rsUpper+"+(?:['’](?:D|LL|M|RE|S|T|VE))?","\\d*(?:(?:1ST|2ND|3RD|(?![123])\\dTH)\\b)","\\d*(?:(?:1st|2nd|3rd|(?![123])\\dth)\\b)",rsDigits,rsEmoji].join("|"),"g"),reHasUnicode=RegExp("[\\u200d\\ud800-\\udfff"+rsComboRange+"\\ufe0e\\ufe0f]"),reHasUnicodeWord=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,contextProps=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],templateCounter=-1,typedArrayTags={};typedArrayTags[float32Tag]=typedArrayTags[float64Tag]=typedArrayTags[int8Tag]=typedArrayTags[int16Tag]=typedArrayTags[int32Tag]=typedArrayTags[uint8Tag]=typedArrayTags["[object Uint8ClampedArray]"]=typedArrayTags[uint16Tag]=typedArrayTags[uint32Tag]=!0,typedArrayTags[argsTag]=typedArrayTags[arrayTag]=typedArrayTags[arrayBufferTag]=typedArrayTags[boolTag]=typedArrayTags[dataViewTag]=typedArrayTags[dateTag]=typedArrayTags[errorTag]=typedArrayTags[funcTag]=typedArrayTags[mapTag]=typedArrayTags[numberTag]=typedArrayTags[objectTag]=typedArrayTags[regexpTag]=typedArrayTags[setTag]=typedArrayTags[stringTag]=typedArrayTags[weakMapTag]=!1;var cloneableTags={};cloneableTags[argsTag]=cloneableTags[arrayTag]=cloneableTags[arrayBufferTag]=cloneableTags[dataViewTag]=cloneableTags[boolTag]=cloneableTags[dateTag]=cloneableTags[float32Tag]=cloneableTags[float64Tag]=cloneableTags[int8Tag]=cloneableTags[int16Tag]=cloneableTags[int32Tag]=cloneableTags[mapTag]=cloneableTags[numberTag]=cloneableTags[objectTag]=cloneableTags[regexpTag]=cloneableTags[setTag]=cloneableTags[stringTag]=cloneableTags[symbolTag]=cloneableTags[uint8Tag]=cloneableTags["[object Uint8ClampedArray]"]=cloneableTags[uint16Tag]=cloneableTags[uint32Tag]=!0,cloneableTags[errorTag]=cloneableTags[funcTag]=cloneableTags[weakMapTag]=!1;var stringEscapes={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},freeParseFloat=parseFloat,freeParseInt=parseInt,freeGlobal="object"==typeof global&&global&&global.Object===Object&&global,freeSelf="object"==typeof self&&self&&self.Object===Object&&self,root=freeGlobal||freeSelf||Function("return this")(),freeExports="object"==typeof exports&&exports&&!exports.nodeType&&exports,freeModule=freeExports&&"object"==typeof module&&module&&!module.nodeType&&module,moduleExports=freeModule&&freeModule.exports===freeExports,freeProcess=moduleExports&&freeGlobal.process,nodeUtil=function(){try{return freeProcess&&freeProcess.binding&&freeProcess.binding("util")}catch(e){}}(),nodeIsArrayBuffer=nodeUtil&&nodeUtil.isArrayBuffer,nodeIsDate=nodeUtil&&nodeUtil.isDate,nodeIsMap=nodeUtil&&nodeUtil.isMap,nodeIsRegExp=nodeUtil&&nodeUtil.isRegExp,nodeIsSet=nodeUtil&&nodeUtil.isSet,nodeIsTypedArray=nodeUtil&&nodeUtil.isTypedArray;function addMapEntry(map,pair){return map.set(pair[0],pair[1]),map}function addSetEntry(set,value){return set.add(value),set}function apply(func,thisArg,args){switch(args.length){case 0:return func.call(thisArg);case 1:return func.call(thisArg,args[0]);case 2:return func.call(thisArg,args[0],args[1]);case 3:return func.call(thisArg,args[0],args[1],args[2])}return func.apply(thisArg,args)}function arrayAggregator(array,setter,iteratee,accumulator){for(var index=-1,length=null==array?0:array.length;++index<length;){var value=array[index];setter(accumulator,value,iteratee(value),array)}return accumulator}function arrayEach(array,iteratee){for(var index=-1,length=null==array?0:array.length;++index<length&&!1!==iteratee(array[index],index,array););return array}function arrayEachRight(array,iteratee){for(var length=null==array?0:array.length;length--&&!1!==iteratee(array[length],length,array););return array}function arrayEvery(array,predicate){for(var index=-1,length=null==array?0:array.length;++index<length;)if(!predicate(array[index],index,array))return!1;return!0}function arrayFilter(array,predicate){for(var index=-1,length=null==array?0:array.length,resIndex=0,result=[];++index<length;){var value=array[index];predicate(value,index,array)&&(result[resIndex++]=value)}return result}function arrayIncludes(array,value){return!!(null==array?0:array.length)&&-1<baseIndexOf(array,value,0)}function arrayIncludesWith(array,value,comparator){for(var index=-1,length=null==array?0:array.length;++index<length;)if(comparator(value,array[index]))return!0;return!1}function arrayMap(array,iteratee){for(var index=-1,length=null==array?0:array.length,result=Array(length);++index<length;)result[index]=iteratee(array[index],index,array);return result}function arrayPush(array,values){for(var index=-1,length=values.length,offset=array.length;++index<length;)array[offset+index]=values[index];return array}function arrayReduce(array,iteratee,accumulator,initAccum){var index=-1,length=null==array?0:array.length;for(initAccum&&length&&(accumulator=array[++index]);++index<length;)accumulator=iteratee(accumulator,array[index],index,array);return accumulator}function arrayReduceRight(array,iteratee,accumulator,initAccum){var length=null==array?0:array.length;for(initAccum&&length&&(accumulator=array[--length]);length--;)accumulator=iteratee(accumulator,array[length],length,array);return accumulator}function arraySome(array,predicate){for(var index=-1,length=null==array?0:array.length;++index<length;)if(predicate(array[index],index,array))return!0;return!1}var asciiSize=baseProperty("length");function baseFindKey(collection,predicate,eachFunc){var result;return eachFunc(collection,function(value,key,collection){if(predicate(value,key,collection))return result=key,!1}),result}function baseFindIndex(array,predicate,fromIndex,fromRight){for(var length=array.length,index=fromIndex+(fromRight?1:-1);fromRight?index--:++index<length;)if(predicate(array[index],index,array))return index;return-1}function baseIndexOf(array,value,fromIndex){return value==value?function(array,value,fromIndex){var index=fromIndex-1,length=array.length;for(;++index<length;)if(array[index]===value)return index;return-1}(array,value,fromIndex):baseFindIndex(array,baseIsNaN,fromIndex)}function baseIndexOfWith(array,value,fromIndex,comparator){for(var index=fromIndex-1,length=array.length;++index<length;)if(comparator(array[index],value))return index;return-1}function baseIsNaN(value){return value!=value}function baseMean(array,iteratee){var length=null==array?0:array.length;return length?baseSum(array,iteratee)/length:NAN}function baseProperty(key){return function(object){return null==object?undefined:object[key]}}function basePropertyOf(object){return function(key){return null==object?undefined:object[key]}}function baseReduce(collection,iteratee,accumulator,initAccum,eachFunc){return eachFunc(collection,function(value,index,collection){accumulator=initAccum?(initAccum=!1,value):iteratee(accumulator,value,index,collection)}),accumulator}function baseSum(array,iteratee){for(var result,index=-1,length=array.length;++index<length;){var current=iteratee(array[index]);current!==undefined&&(result=result===undefined?current:result+current)}return result}function baseTimes(n,iteratee){for(var index=-1,result=Array(n);++index<n;)result[index]=iteratee(index);return result}function baseUnary(func){return function(value){return func(value)}}function baseValues(object,props){return arrayMap(props,function(key){return object[key]})}function cacheHas(cache,key){return cache.has(key)}function charsStartIndex(strSymbols,chrSymbols){for(var index=-1,length=strSymbols.length;++index<length&&-1<baseIndexOf(chrSymbols,strSymbols[index],0););return index}function charsEndIndex(strSymbols,chrSymbols){for(var index=strSymbols.length;index--&&-1<baseIndexOf(chrSymbols,strSymbols[index],0););return index}var deburrLetter=basePropertyOf({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),escapeHtmlChar=basePropertyOf({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function escapeStringChar(chr){return"\\"+stringEscapes[chr]}function hasUnicode(string){return reHasUnicode.test(string)}function mapToArray(map){var index=-1,result=Array(map.size);return map.forEach(function(value,key){result[++index]=[key,value]}),result}function overArg(func,transform){return function(arg){return func(transform(arg))}}function replaceHolders(array,placeholder){for(var index=-1,length=array.length,resIndex=0,result=[];++index<length;){var value=array[index];value!==placeholder&&value!==PLACEHOLDER||(array[index]=PLACEHOLDER,result[resIndex++]=index)}return result}function setToArray(set){var index=-1,result=Array(set.size);return set.forEach(function(value){result[++index]=value}),result}function setToPairs(set){var index=-1,result=Array(set.size);return set.forEach(function(value){result[++index]=[value,value]}),result}function stringSize(string){return(hasUnicode(string)?function(string){var result=reUnicode.lastIndex=0;for(;reUnicode.test(string);)++result;return result}:asciiSize)(string)}function stringToArray(string){return hasUnicode(string)?function(string){return string.match(reUnicode)||[]}(string):string.split("")}var unescapeHtmlChar=basePropertyOf({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var _=function runInContext(context){var uid,Array=(context=null==context?root:_.defaults(root.Object(),context,_.pick(root,contextProps))).Array,Date=context.Date,Error=context.Error,Function=context.Function,Math=context.Math,Object=context.Object,RegExp=context.RegExp,String=context.String,TypeError=context.TypeError,arrayProto=Array.prototype,funcProto=Function.prototype,objectProto=Object.prototype,coreJsData=context["__core-js_shared__"],funcToString=funcProto.toString,hasOwnProperty=objectProto.hasOwnProperty,idCounter=0,maskSrcKey=(uid=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||""))?"Symbol(src)_1."+uid:"",nativeObjectToString=objectProto.toString,objectCtorString=funcToString.call(Object),oldDash=root._,reIsNative=RegExp("^"+funcToString.call(hasOwnProperty).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Buffer=moduleExports?context.Buffer:undefined,Symbol=context.Symbol,Uint8Array=context.Uint8Array,allocUnsafe=Buffer?Buffer.allocUnsafe:undefined,getPrototype=overArg(Object.getPrototypeOf,Object),objectCreate=Object.create,propertyIsEnumerable=objectProto.propertyIsEnumerable,splice=arrayProto.splice,spreadableSymbol=Symbol?Symbol.isConcatSpreadable:undefined,symIterator=Symbol?Symbol.iterator:undefined,symToStringTag=Symbol?Symbol.toStringTag:undefined,defineProperty=function(){try{var func=getNative(Object,"defineProperty");return func({},"",{}),func}catch(e){}}(),ctxClearTimeout=context.clearTimeout!==root.clearTimeout&&context.clearTimeout,ctxNow=Date&&Date.now!==root.Date.now&&Date.now,ctxSetTimeout=context.setTimeout!==root.setTimeout&&context.setTimeout,nativeCeil=Math.ceil,nativeFloor=Math.floor,nativeGetSymbols=Object.getOwnPropertySymbols,nativeIsBuffer=Buffer?Buffer.isBuffer:undefined,nativeIsFinite=context.isFinite,nativeJoin=arrayProto.join,nativeKeys=overArg(Object.keys,Object),nativeMax=Math.max,nativeMin=Math.min,nativeNow=Date.now,nativeParseInt=context.parseInt,nativeRandom=Math.random,nativeReverse=arrayProto.reverse,DataView=getNative(context,"DataView"),Map=getNative(context,"Map"),Promise=getNative(context,"Promise"),Set=getNative(context,"Set"),WeakMap=getNative(context,"WeakMap"),nativeCreate=getNative(Object,"create"),metaMap=WeakMap&&new WeakMap,realNames={},dataViewCtorString=toSource(DataView),mapCtorString=toSource(Map),promiseCtorString=toSource(Promise),setCtorString=toSource(Set),weakMapCtorString=toSource(WeakMap),symbolProto=Symbol?Symbol.prototype:undefined,symbolValueOf=symbolProto?symbolProto.valueOf:undefined,symbolToString=symbolProto?symbolProto.toString:undefined;function lodash(value){if(isObjectLike(value)&&!isArray(value)&&!(value instanceof LazyWrapper)){if(value instanceof LodashWrapper)return value;if(hasOwnProperty.call(value,"__wrapped__"))return wrapperClone(value)}return new LodashWrapper(value)}var baseCreate=function(proto){if(!isObject(proto))return{};if(objectCreate)return objectCreate(proto);object.prototype=proto;var result=new object;return object.prototype=undefined,result};function object(){}function baseLodash(){}function LodashWrapper(value,chainAll){this.__wrapped__=value,this.__actions__=[],this.__chain__=!!chainAll,this.__index__=0,this.__values__=undefined}function LazyWrapper(value){this.__wrapped__=value,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}function Hash(entries){var index=-1,length=null==entries?0:entries.length;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}function ListCache(entries){var index=-1,length=null==entries?0:entries.length;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}function MapCache(entries){var index=-1,length=null==entries?0:entries.length;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}function SetCache(values){var index=-1,length=null==values?0:values.length;for(this.__data__=new MapCache;++index<length;)this.add(values[index])}function Stack(entries){var data=this.__data__=new ListCache(entries);this.size=data.size}function arrayLikeKeys(value,inherited){var key,isArr=isArray(value),isArg=!isArr&&isArguments(value),isBuff=!isArr&&!isArg&&isBuffer(value),isType=!isArr&&!isArg&&!isBuff&&isTypedArray(value),skipIndexes=isArr||isArg||isBuff||isType,result=skipIndexes?baseTimes(value.length,String):[],length=result.length;for(key in value)!inherited&&!hasOwnProperty.call(value,key)||skipIndexes&&("length"==key||isBuff&&("offset"==key||"parent"==key)||isType&&("buffer"==key||"byteLength"==key||"byteOffset"==key)||isIndex(key,length))||result.push(key);return result}function arraySample(array){var length=array.length;return length?array[baseRandom(0,length-1)]:undefined}function arraySampleSize(array,n){return shuffleSelf(copyArray(array),baseClamp(n,0,array.length))}function arrayShuffle(array){return shuffleSelf(copyArray(array))}function assignMergeValue(object,key,value){(value===undefined||eq(object[key],value))&&(value!==undefined||key in object)||baseAssignValue(object,key,value)}function assignValue(object,key,value){var objValue=object[key];hasOwnProperty.call(object,key)&&eq(objValue,value)&&(value!==undefined||key in object)||baseAssignValue(object,key,value)}function assocIndexOf(array,key){for(var length=array.length;length--;)if(eq(array[length][0],key))return length;return-1}function baseAggregator(collection,setter,iteratee,accumulator){return baseEach(collection,function(value,key,collection){setter(accumulator,value,iteratee(value),collection)}),accumulator}function baseAssign(object,source){return object&&copyObject(source,keys(source),object)}function baseAssignValue(object,key,value){"__proto__"==key&&defineProperty?defineProperty(object,key,{configurable:!0,enumerable:!0,value:value,writable:!0}):object[key]=value}function baseAt(object,paths){for(var index=-1,length=paths.length,result=Array(length),skip=null==object;++index<length;)result[index]=skip?undefined:get(object,paths[index]);return result}function baseClamp(number,lower,upper){return number==number&&(upper!==undefined&&(number=number<=upper?number:upper),lower!==undefined&&(number=lower<=number?number:lower)),number}function baseClone(value,bitmask,customizer,key,object,stack){var result,isDeep=1&bitmask,isFlat=2&bitmask,isFull=4&bitmask;if(customizer&&(result=object?customizer(value,key,object,stack):customizer(value)),result!==undefined)return result;if(!isObject(value))return value;var isArr=isArray(value);if(isArr){if(result=function(array){var length=array.length,result=array.constructor(length);length&&"string"==typeof array[0]&&hasOwnProperty.call(array,"index")&&(result.index=array.index,result.input=array.input);return result}(value),!isDeep)return copyArray(value,result)}else{var tag=getTag(value),isFunc=tag==funcTag||tag==genTag;if(isBuffer(value))return cloneBuffer(value,isDeep);if(tag==objectTag||tag==argsTag||isFunc&&!object){if(result=isFlat||isFunc?{}:initCloneObject(value),!isDeep)return isFlat?function(source,object){return copyObject(source,getSymbolsIn(source),object)}(value,function(object,source){return object&&copyObject(source,keysIn(source),object)}(result,value)):function(source,object){return copyObject(source,getSymbols(source),object)}(value,baseAssign(result,value))}else{if(!cloneableTags[tag])return object?value:{};result=function(object,tag,cloneFunc,isDeep){var Ctor=object.constructor;switch(tag){case arrayBufferTag:return cloneArrayBuffer(object);case boolTag:case dateTag:return new Ctor(+object);case dataViewTag:return function(dataView,isDeep){var buffer=isDeep?cloneArrayBuffer(dataView.buffer):dataView.buffer;return new dataView.constructor(buffer,dataView.byteOffset,dataView.byteLength)}(object,isDeep);case float32Tag:case float64Tag:case int8Tag:case int16Tag:case int32Tag:case uint8Tag:case"[object Uint8ClampedArray]":case uint16Tag:case uint32Tag:return cloneTypedArray(object,isDeep);case mapTag:return function(map,isDeep,cloneFunc){return arrayReduce(isDeep?cloneFunc(mapToArray(map),1):mapToArray(map),addMapEntry,new map.constructor)}(object,isDeep,cloneFunc);case numberTag:case stringTag:return new Ctor(object);case regexpTag:return function(regexp){var result=new regexp.constructor(regexp.source,reFlags.exec(regexp));return result.lastIndex=regexp.lastIndex,result}(object);case setTag:return function(set,isDeep,cloneFunc){return arrayReduce(isDeep?cloneFunc(setToArray(set),1):setToArray(set),addSetEntry,new set.constructor)}(object,isDeep,cloneFunc);case symbolTag:return function(symbol){return symbolValueOf?Object(symbolValueOf.call(symbol)):{}}(object)}}(value,tag,baseClone,isDeep)}}var stacked=(stack=stack||new Stack).get(value);if(stacked)return stacked;stack.set(value,result);var props=isArr?undefined:(isFull?isFlat?getAllKeysIn:getAllKeys:isFlat?keysIn:keys)(value);return arrayEach(props||value,function(subValue,key){props&&(subValue=value[key=subValue]),assignValue(result,key,baseClone(subValue,bitmask,customizer,key,value,stack))}),result}function baseConformsTo(object,source,props){var length=props.length;if(null==object)return!length;for(object=Object(object);length--;){var key=props[length],predicate=source[key],value=object[key];if(value===undefined&&!(key in object)||!predicate(value))return!1}return!0}function baseDelay(func,wait,args){if("function"!=typeof func)throw new TypeError(FUNC_ERROR_TEXT);return setTimeout(function(){func.apply(undefined,args)},wait)}function baseDifference(array,values,iteratee,comparator){var index=-1,includes=arrayIncludes,isCommon=!0,length=array.length,result=[],valuesLength=values.length;if(!length)return result;iteratee&&(values=arrayMap(values,baseUnary(iteratee))),comparator?(includes=arrayIncludesWith,isCommon=!1):200<=values.length&&(includes=cacheHas,isCommon=!1,values=new SetCache(values));outer:for(;++index<length;){var value=array[index],computed=null==iteratee?value:iteratee(value),value=comparator||0!==value?value:0;if(isCommon&&computed==computed){for(var valuesIndex=valuesLength;valuesIndex--;)if(values[valuesIndex]===computed)continue outer;result.push(value)}else includes(values,computed,comparator)||result.push(value)}return result}lodash.templateSettings={escape:reEscape,evaluate:reEvaluate,interpolate:reInterpolate,variable:"",imports:{_:lodash}},(lodash.prototype=baseLodash.prototype).constructor=lodash,(LodashWrapper.prototype=baseCreate(baseLodash.prototype)).constructor=LodashWrapper,(LazyWrapper.prototype=baseCreate(baseLodash.prototype)).constructor=LazyWrapper,Hash.prototype.clear=function(){this.__data__=nativeCreate?nativeCreate(null):{},this.size=0},Hash.prototype.delete=function(key){var result=this.has(key)&&delete this.__data__[key];return this.size-=result?1:0,result},Hash.prototype.get=function(key){var data=this.__data__;if(nativeCreate){var result=data[key];return"__lodash_hash_undefined__"===result?undefined:result}return hasOwnProperty.call(data,key)?data[key]:undefined},Hash.prototype.has=function(key){var data=this.__data__;return nativeCreate?data[key]!==undefined:hasOwnProperty.call(data,key)},Hash.prototype.set=function(key,value){var data=this.__data__;return this.size+=this.has(key)?0:1,data[key]=nativeCreate&&value===undefined?"__lodash_hash_undefined__":value,this},ListCache.prototype.clear=function(){this.__data__=[],this.size=0},ListCache.prototype.delete=function(key){var data=this.__data__,index=assocIndexOf(data,key);return!(index<0)&&(index==data.length-1?data.pop():splice.call(data,index,1),--this.size,!0)},ListCache.prototype.get=function(key){var data=this.__data__,index=assocIndexOf(data,key);return index<0?undefined:data[index][1]},ListCache.prototype.has=function(key){return-1<assocIndexOf(this.__data__,key)},ListCache.prototype.set=function(key,value){var data=this.__data__,index=assocIndexOf(data,key);return index<0?(++this.size,data.push([key,value])):data[index][1]=value,this},MapCache.prototype.clear=function(){this.size=0,this.__data__={hash:new Hash,map:new(Map||ListCache),string:new Hash}},MapCache.prototype.delete=function(key){var result=getMapData(this,key).delete(key);return this.size-=result?1:0,result},MapCache.prototype.get=function(key){return getMapData(this,key).get(key)},MapCache.prototype.has=function(key){return getMapData(this,key).has(key)},MapCache.prototype.set=function(key,value){var data=getMapData(this,key),size=data.size;return data.set(key,value),this.size+=data.size==size?0:1,this},SetCache.prototype.add=SetCache.prototype.push=function(value){return this.__data__.set(value,"__lodash_hash_undefined__"),this},SetCache.prototype.has=function(value){return this.__data__.has(value)},Stack.prototype.clear=function(){this.__data__=new ListCache,this.size=0},Stack.prototype.delete=function(key){var data=this.__data__,result=data.delete(key);return this.size=data.size,result},Stack.prototype.get=function(key){return this.__data__.get(key)},Stack.prototype.has=function(key){return this.__data__.has(key)},Stack.prototype.set=function(key,value){var data=this.__data__;if(data instanceof ListCache){var pairs=data.__data__;if(!Map||pairs.length<199)return pairs.push([key,value]),this.size=++data.size,this;data=this.__data__=new MapCache(pairs)}return data.set(key,value),this.size=data.size,this};var baseEach=createBaseEach(baseForOwn),baseEachRight=createBaseEach(baseForOwnRight,!0);function baseEvery(collection,predicate){var result=!0;return baseEach(collection,function(value,index,collection){return result=!!predicate(value,index,collection)}),result}function baseExtremum(array,iteratee,comparator){for(var index=-1,length=array.length;++index<length;){var computed,result,value=array[index],current=iteratee(value);null!=current&&(computed===undefined?current==current&&!isSymbol(current):comparator(current,computed))&&(computed=current,result=value)}return result}function baseFilter(collection,predicate){var result=[];return baseEach(collection,function(value,index,collection){predicate(value,index,collection)&&result.push(value)}),result}function baseFlatten(array,depth,predicate,isStrict,result){var index=-1,length=array.length;for(predicate=predicate||isFlattenable,result=result||[];++index<length;){var value=array[index];0<depth&&predicate(value)?1<depth?baseFlatten(value,depth-1,predicate,isStrict,result):arrayPush(result,value):isStrict||(result[result.length]=value)}return result}var baseFor=createBaseFor(),baseForRight=createBaseFor(!0);function baseForOwn(object,iteratee){return object&&baseFor(object,iteratee,keys)}function baseForOwnRight(object,iteratee){return object&&baseForRight(object,iteratee,keys)}function baseFunctions(object,props){return arrayFilter(props,function(key){return isFunction(object[key])})}function baseGet(object,path){for(var index=0,length=(path=castPath(path,object)).length;null!=object&&index<length;)object=object[toKey(path[index++])];return index&&index==length?object:undefined}function baseGetAllKeys(object,keysFunc,symbolsFunc){var result=keysFunc(object);return isArray(object)?result:arrayPush(result,symbolsFunc(object))}function baseGetTag(value){return null==value?value===undefined?"[object Undefined]":"[object Null]":(symToStringTag&&symToStringTag in Object(value)?function(value){var isOwn=hasOwnProperty.call(value,symToStringTag),tag=value[symToStringTag];try{value[symToStringTag]=undefined;var unmasked=!0}catch(e){}var result=nativeObjectToString.call(value);unmasked&&(isOwn?value[symToStringTag]=tag:delete value[symToStringTag]);return result}:function(value){return nativeObjectToString.call(value)})(value)}function baseGt(value,other){return other<value}function baseHas(object,key){return null!=object&&hasOwnProperty.call(object,key)}function baseHasIn(object,key){return null!=object&&key in Object(object)}function baseIntersection(arrays,iteratee,comparator){for(var includes=comparator?arrayIncludesWith:arrayIncludes,length=arrays[0].length,othLength=arrays.length,othIndex=othLength,caches=Array(othLength),maxLength=1/0,result=[];othIndex--;){var array=arrays[othIndex];othIndex&&iteratee&&(array=arrayMap(array,baseUnary(iteratee))),maxLength=nativeMin(array.length,maxLength),caches[othIndex]=!comparator&&(iteratee||120<=length&&120<=array.length)?new SetCache(othIndex&&array):undefined}array=arrays[0];var index=-1,seen=caches[0];outer:for(;++index<length&&result.length<maxLength;){var value=array[index],computed=iteratee?iteratee(value):value,value=comparator||0!==value?value:0;if(!(seen?cacheHas(seen,computed):includes(result,computed,comparator))){for(othIndex=othLength;--othIndex;){var cache=caches[othIndex];if(!(cache?cacheHas(cache,computed):includes(arrays[othIndex],computed,comparator)))continue outer}seen&&seen.push(computed),result.push(value)}}return result}function baseInvoke(object,path,args){var func=null==(object=parent(object,path=castPath(path,object)))?object:object[toKey(last(path))];return null==func?undefined:apply(func,object,args)}function baseIsArguments(value){return isObjectLike(value)&&baseGetTag(value)==argsTag}function baseIsEqual(value,other,bitmask,customizer,stack){return value===other||(null==value||null==other||!isObjectLike(value)&&!isObjectLike(other)?value!=value&&other!=other:function(object,other,bitmask,customizer,equalFunc,stack){var objIsArr=isArray(object),othIsArr=isArray(other),objTag=objIsArr?arrayTag:getTag(object),othTag=othIsArr?arrayTag:getTag(other),objIsObj=(objTag=objTag==argsTag?objectTag:objTag)==objectTag,othIsObj=(othTag=othTag==argsTag?objectTag:othTag)==objectTag,isSameTag=objTag==othTag;if(isSameTag&&isBuffer(object)){if(!isBuffer(other))return!1;objIsObj=!(objIsArr=!0)}if(isSameTag&&!objIsObj)return stack=stack||new Stack,objIsArr||isTypedArray(object)?equalArrays(object,other,bitmask,customizer,equalFunc,stack):function(object,other,tag,bitmask,customizer,equalFunc,stack){switch(tag){case dataViewTag:if(object.byteLength!=other.byteLength||object.byteOffset!=other.byteOffset)return!1;object=object.buffer,other=other.buffer;case arrayBufferTag:return object.byteLength==other.byteLength&&equalFunc(new Uint8Array(object),new Uint8Array(other))?!0:!1;case boolTag:case dateTag:case numberTag:return eq(+object,+other);case errorTag:return object.name==other.name&&object.message==other.message;case regexpTag:case stringTag:return object==other+"";case mapTag:var convert=mapToArray;case setTag:var isPartial=1&bitmask;if(convert=convert||setToArray,object.size!=other.size&&!isPartial)return!1;var stacked=stack.get(object);if(stacked)return stacked==other;bitmask|=2,stack.set(object,other);var result=equalArrays(convert(object),convert(other),bitmask,customizer,equalFunc,stack);return stack.delete(object),result;case symbolTag:if(symbolValueOf)return symbolValueOf.call(object)==symbolValueOf.call(other)}return!1}(object,other,objTag,bitmask,customizer,equalFunc,stack);if(!(1&bitmask)){var objIsWrapped=objIsObj&&hasOwnProperty.call(object,"__wrapped__"),othIsWrapped=othIsObj&&hasOwnProperty.call(other,"__wrapped__");if(objIsWrapped||othIsWrapped){var objUnwrapped=objIsWrapped?object.value():object,othUnwrapped=othIsWrapped?other.value():other;return stack=stack||new Stack,equalFunc(objUnwrapped,othUnwrapped,bitmask,customizer,stack)}}return isSameTag&&(stack=stack||new Stack,function(object,other,bitmask,customizer,equalFunc,stack){var isPartial=1&bitmask,objProps=getAllKeys(object),objLength=objProps.length,othLength=getAllKeys(other).length;if(objLength!=othLength&&!isPartial)return!1;var index=objLength;for(;index--;){var key=objProps[index];if(!(isPartial?key in other:hasOwnProperty.call(other,key)))return!1}var stacked=stack.get(object);if(stacked&&stack.get(other))return stacked==other;var result=!0;stack.set(object,other),stack.set(other,object);var skipCtor=isPartial;for(;++index<objLength;){key=objProps[index];var compared,objValue=object[key],othValue=other[key];if(customizer&&(compared=isPartial?customizer(othValue,objValue,key,other,object,stack):customizer(objValue,othValue,key,object,other,stack)),!(compared===undefined?objValue===othValue||equalFunc(objValue,othValue,bitmask,customizer,stack):compared)){result=!1;break}skipCtor=skipCtor||"constructor"==key}{var objCtor,othCtor;result&&!skipCtor&&(objCtor=object.constructor,othCtor=other.constructor,objCtor!=othCtor&&"constructor"in object&&"constructor"in other&&!("function"==typeof objCtor&&objCtor instanceof objCtor&&"function"==typeof othCtor&&othCtor instanceof othCtor)&&(result=!1))}return stack.delete(object),stack.delete(other),result}(object,other,bitmask,customizer,equalFunc,stack))}(value,other,bitmask,customizer,baseIsEqual,stack))}function baseIsMatch(object,source,matchData,customizer){var index=matchData.length,length=index,noCustomizer=!customizer;if(null==object)return!length;for(object=Object(object);index--;){var data=matchData[index];if(noCustomizer&&data[2]?data[1]!==object[data[0]]:!(data[0]in object))return!1}for(;++index<length;){var key=(data=matchData[index])[0],objValue=object[key],srcValue=data[1];if(noCustomizer&&data[2]){if(objValue===undefined&&!(key in object))return!1}else{var result,stack=new Stack;if(customizer&&(result=customizer(objValue,srcValue,key,object,source,stack)),!(result===undefined?baseIsEqual(srcValue,objValue,3,customizer,stack):result))return!1}}return!0}function baseIsNative(value){return!(!isObject(value)||(func=value,maskSrcKey&&maskSrcKey in func))&&(isFunction(value)?reIsNative:reIsHostCtor).test(toSource(value));var func}function baseIteratee(value){return"function"==typeof value?value:null==value?identity:"object"==typeof value?isArray(value)?baseMatchesProperty(value[0],value[1]):baseMatches(value):property(value)}function baseKeys(object){if(!isPrototype(object))return nativeKeys(object);var key,result=[];for(key in Object(object))hasOwnProperty.call(object,key)&&"constructor"!=key&&result.push(key);return result}function baseKeysIn(object){if(!isObject(object))return function(object){var result=[];if(null!=object)for(var key in Object(object))result.push(key);return result}(object);var key,isProto=isPrototype(object),result=[];for(key in object)("constructor"!=key||!isProto&&hasOwnProperty.call(object,key))&&result.push(key);return result}function baseLt(value,other){return value<other}function baseMap(collection,iteratee){var index=-1,result=isArrayLike(collection)?Array(collection.length):[];return baseEach(collection,function(value,key,collection){result[++index]=iteratee(value,key,collection)}),result}function baseMatches(source){var matchData=getMatchData(source);return 1==matchData.length&&matchData[0][2]?matchesStrictComparable(matchData[0][0],matchData[0][1]):function(object){return object===source||baseIsMatch(object,source,matchData)}}function baseMatchesProperty(path,srcValue){return isKey(path)&&isStrictComparable(srcValue)?matchesStrictComparable(toKey(path),srcValue):function(object){var objValue=get(object,path);return objValue===undefined&&objValue===srcValue?hasIn(object,path):baseIsEqual(srcValue,objValue,3)}}function baseMerge(object,source,srcIndex,customizer,stack){object!==source&&baseFor(source,function(srcValue,key){var newValue;isObject(srcValue)?(stack=stack||new Stack,function(object,source,key,srcIndex,mergeFunc,customizer,stack){var objValue=object[key],srcValue=source[key],stacked=stack.get(srcValue);if(stacked)return assignMergeValue(object,key,stacked);var newValue=customizer?customizer(objValue,srcValue,key+"",object,source,stack):undefined,isCommon=newValue===undefined;{var isArr,isBuff,isTyped;isCommon&&(isArr=isArray(srcValue),isBuff=!isArr&&isBuffer(srcValue),isTyped=!isArr&&!isBuff&&isTypedArray(srcValue),newValue=srcValue,isArr||isBuff||isTyped?newValue=isArray(objValue)?objValue:isArrayLikeObject(objValue)?copyArray(objValue):isBuff?cloneBuffer(srcValue,!(isCommon=!1)):isTyped?cloneTypedArray(srcValue,!(isCommon=!1)):[]:isPlainObject(srcValue)||isArguments(srcValue)?isArguments(newValue=objValue)?newValue=toPlainObject(objValue):(!isObject(objValue)||srcIndex&&isFunction(objValue))&&(newValue=initCloneObject(srcValue)):isCommon=!1)}isCommon&&(stack.set(srcValue,newValue),mergeFunc(newValue,srcValue,srcIndex,customizer,stack),stack.delete(srcValue));assignMergeValue(object,key,newValue)}(object,source,key,srcIndex,baseMerge,customizer,stack)):((newValue=customizer?customizer(object[key],srcValue,key+"",object,source,stack):undefined)===undefined&&(newValue=srcValue),assignMergeValue(object,key,newValue))},keysIn)}function baseNth(array,n){var length=array.length;if(length)return isIndex(n+=n<0?length:0,length)?array[n]:undefined}function baseOrderBy(collection,iteratees,orders){var index=-1;return iteratees=arrayMap(iteratees.length?iteratees:[identity],baseUnary(getIteratee())),function(array,comparer){var length=array.length;for(array.sort(comparer);length--;)array[length]=array[length].value;return array}(baseMap(collection,function(value,key,collection){return{criteria:arrayMap(iteratees,function(iteratee){return iteratee(value)}),index:++index,value:value}}),function(object,other){return function(object,other,orders){var index=-1,objCriteria=object.criteria,othCriteria=other.criteria,length=objCriteria.length,ordersLength=orders.length;for(;++index<length;){var result=compareAscending(objCriteria[index],othCriteria[index]);if(result){if(ordersLength<=index)return result;var order=orders[index];return result*("desc"==order?-1:1)}}return object.index-other.index}(object,other,orders)})}function basePickBy(object,paths,predicate){for(var index=-1,length=paths.length,result={};++index<length;){var path=paths[index],value=baseGet(object,path);predicate(value,path)&&baseSet(result,castPath(path,object),value)}return result}function basePullAll(array,values,iteratee,comparator){var indexOf=comparator?baseIndexOfWith:baseIndexOf,index=-1,length=values.length,seen=array;for(array===values&&(values=copyArray(values)),iteratee&&(seen=arrayMap(array,baseUnary(iteratee)));++index<length;)for(var fromIndex=0,value=values[index],computed=iteratee?iteratee(value):value;-1<(fromIndex=indexOf(seen,computed,fromIndex,comparator));)seen!==array&&splice.call(seen,fromIndex,1),splice.call(array,fromIndex,1);return array}function basePullAt(array,indexes){for(var length=array?indexes.length:0,lastIndex=length-1;length--;){var previous,index=indexes[length];length!=lastIndex&&index===previous||(isIndex(previous=index)?splice.call(array,index,1):baseUnset(array,index))}return array}function baseRandom(lower,upper){return lower+nativeFloor(nativeRandom()*(upper-lower+1))}function baseRepeat(string,n){var result="";if(!string||n<1||9007199254740991<n)return result;for(;n%2&&(result+=string),(n=nativeFloor(n/2))&&(string+=string),n;);return result}function baseRest(func,start){return setToString(overRest(func,start,identity),func+"")}function baseSample(collection){return arraySample(values(collection))}function baseSampleSize(collection,n){var array=values(collection);return shuffleSelf(array,baseClamp(n,0,array.length))}function baseSet(object,path,value,customizer){if(!isObject(object))return object;for(var index=-1,length=(path=castPath(path,object)).length,lastIndex=length-1,nested=object;null!=nested&&++index<length;){var objValue,key=toKey(path[index]),newValue=value;index!=lastIndex&&(objValue=nested[key],(newValue=customizer?customizer(objValue,key,nested):undefined)===undefined&&(newValue=isObject(objValue)?objValue:isIndex(path[index+1])?[]:{})),assignValue(nested,key,newValue),nested=nested[key]}return object}var baseSetData=metaMap?function(func,data){return metaMap.set(func,data),func}:identity,baseSetToString=defineProperty?function(func,string){return defineProperty(func,"toString",{configurable:!0,enumerable:!1,value:constant(string),writable:!0})}:identity;function baseShuffle(collection){return shuffleSelf(values(collection))}function baseSlice(array,start,end){var index=-1,length=array.length;start<0&&(start=length<-start?0:length+start),(end=length<end?length:end)<0&&(end+=length),length=end<start?0:end-start>>>0,start>>>=0;for(var result=Array(length);++index<length;)result[index]=array[index+start];return result}function baseSome(collection,predicate){var result;return baseEach(collection,function(value,index,collection){return!(result=predicate(value,index,collection))}),!!result}function baseSortedIndex(array,value,retHighest){var low=0,high=null==array?low:array.length;if("number"==typeof value&&value==value&&high<=2147483647){for(;low<high;){var mid=low+high>>>1,computed=array[mid];null!==computed&&!isSymbol(computed)&&(retHighest?computed<=value:computed<value)?low=1+mid:high=mid}return high}return baseSortedIndexBy(array,value,identity,retHighest)}function baseSortedIndexBy(array,value,iteratee,retHighest){value=iteratee(value);for(var low=0,high=null==array?0:array.length,valIsNaN=value!=value,valIsNull=null===value,valIsSymbol=isSymbol(value),valIsUndefined=value===undefined;low<high;){var mid=nativeFloor((low+high)/2),computed=iteratee(array[mid]),othIsDefined=computed!==undefined,othIsNull=null===computed,othIsReflexive=computed==computed,othIsSymbol=isSymbol(computed),setLow=valIsNaN?retHighest||othIsReflexive:valIsUndefined?othIsReflexive&&(retHighest||othIsDefined):valIsNull?othIsReflexive&&othIsDefined&&(retHighest||!othIsNull):valIsSymbol?othIsReflexive&&othIsDefined&&!othIsNull&&(retHighest||!othIsSymbol):!othIsNull&&!othIsSymbol&&(retHighest?computed<=value:computed<value);setLow?low=mid+1:high=mid}return nativeMin(high,4294967294)}function baseSortedUniq(array,iteratee){for(var index=-1,length=array.length,resIndex=0,result=[];++index<length;){var seen,value=array[index],computed=iteratee?iteratee(value):value;index&&eq(computed,seen)||(seen=computed,result[resIndex++]=0===value?0:value)}return result}function baseToNumber(value){return"number"==typeof value?value:isSymbol(value)?NAN:+value}function baseToString(value){if("string"==typeof value)return value;if(isArray(value))return arrayMap(value,baseToString)+"";if(isSymbol(value))return symbolToString?symbolToString.call(value):"";var result=value+"";return"0"==result&&1/value==-1/0?"-0":result}function baseUniq(array,iteratee,comparator){var index=-1,includes=arrayIncludes,length=array.length,isCommon=!0,result=[],seen=result;if(comparator)isCommon=!1,includes=arrayIncludesWith;else if(200<=length){var set=iteratee?null:createSet(array);if(set)return setToArray(set);isCommon=!1,includes=cacheHas,seen=new SetCache}else seen=iteratee?[]:result;outer:for(;++index<length;){var value=array[index],computed=iteratee?iteratee(value):value,value=comparator||0!==value?value:0;if(isCommon&&computed==computed){for(var seenIndex=seen.length;seenIndex--;)if(seen[seenIndex]===computed)continue outer;iteratee&&seen.push(computed),result.push(value)}else includes(seen,computed,comparator)||(seen!==result&&seen.push(computed),result.push(value))}return result}function baseUnset(object,path){return null==(object=parent(object,path=castPath(path,object)))||delete object[toKey(last(path))]}function baseUpdate(object,path,updater,customizer){return baseSet(object,path,updater(baseGet(object,path)),customizer)}function baseWhile(array,predicate,isDrop,fromRight){for(var length=array.length,index=fromRight?length:-1;(fromRight?index--:++index<length)&&predicate(array[index],index,array););return isDrop?baseSlice(array,fromRight?0:index,fromRight?index+1:length):baseSlice(array,fromRight?index+1:0,fromRight?length:index)}function baseWrapperValue(value,actions){var result=value;return result instanceof LazyWrapper&&(result=result.value()),arrayReduce(actions,function(result,action){return action.func.apply(action.thisArg,arrayPush([result],action.args))},result)}function baseXor(arrays,iteratee,comparator){var length=arrays.length;if(length<2)return length?baseUniq(arrays[0]):[];for(var index=-1,result=Array(length);++index<length;)for(var array=arrays[index],othIndex=-1;++othIndex<length;)othIndex!=index&&(result[index]=baseDifference(result[index]||array,arrays[othIndex],iteratee,comparator));return baseUniq(baseFlatten(result,1),iteratee,comparator)}function baseZipObject(props,values,assignFunc){for(var index=-1,length=props.length,valsLength=values.length,result={};++index<length;){var value=index<valsLength?values[index]:undefined;assignFunc(result,props[index],value)}return result}function castArrayLikeObject(value){return isArrayLikeObject(value)?value:[]}function castFunction(value){return"function"==typeof value?value:identity}function castPath(value,object){return isArray(value)?value:isKey(value,object)?[value]:stringToPath(toString(value))}var castRest=baseRest;function castSlice(array,start,end){var length=array.length;return end=end===undefined?length:end,!start&&length<=end?array:baseSlice(array,start,end)}var clearTimeout=ctxClearTimeout||function(id){return root.clearTimeout(id)};function cloneBuffer(buffer,isDeep){if(isDeep)return buffer.slice();var length=buffer.length,result=allocUnsafe?allocUnsafe(length):new buffer.constructor(length);return buffer.copy(result),result}function cloneArrayBuffer(arrayBuffer){var result=new arrayBuffer.constructor(arrayBuffer.byteLength);return new Uint8Array(result).set(new Uint8Array(arrayBuffer)),result}function cloneTypedArray(typedArray,isDeep){var buffer=isDeep?cloneArrayBuffer(typedArray.buffer):typedArray.buffer;return new typedArray.constructor(buffer,typedArray.byteOffset,typedArray.length)}function compareAscending(value,other){if(value!==other){var valIsDefined=value!==undefined,valIsNull=null===value,valIsReflexive=value==value,valIsSymbol=isSymbol(value),othIsDefined=other!==undefined,othIsNull=null===other,othIsReflexive=other==other,othIsSymbol=isSymbol(other);if(!othIsNull&&!othIsSymbol&&!valIsSymbol&&other<value||valIsSymbol&&othIsDefined&&othIsReflexive&&!othIsNull&&!othIsSymbol||valIsNull&&othIsDefined&&othIsReflexive||!valIsDefined&&othIsReflexive||!valIsReflexive)return 1;if(!valIsNull&&!valIsSymbol&&!othIsSymbol&&value<other||othIsSymbol&&valIsDefined&&valIsReflexive&&!valIsNull&&!valIsSymbol||othIsNull&&valIsDefined&&valIsReflexive||!othIsDefined&&valIsReflexive||!othIsReflexive)return-1}return 0}function composeArgs(args,partials,holders,isCurried){for(var argsIndex=-1,argsLength=args.length,holdersLength=holders.length,leftIndex=-1,leftLength=partials.length,rangeLength=nativeMax(argsLength-holdersLength,0),result=Array(leftLength+rangeLength),isUncurried=!isCurried;++leftIndex<leftLength;)result[leftIndex]=partials[leftIndex];for(;++argsIndex<holdersLength;)(isUncurried||argsIndex<argsLength)&&(result[holders[argsIndex]]=args[argsIndex]);for(;rangeLength--;)result[leftIndex++]=args[argsIndex++];return result}function composeArgsRight(args,partials,holders,isCurried){for(var argsIndex=-1,argsLength=args.length,holdersIndex=-1,holdersLength=holders.length,rightIndex=-1,rightLength=partials.length,rangeLength=nativeMax(argsLength-holdersLength,0),result=Array(rangeLength+rightLength),isUncurried=!isCurried;++argsIndex<rangeLength;)result[argsIndex]=args[argsIndex];for(var offset=argsIndex;++rightIndex<rightLength;)result[offset+rightIndex]=partials[rightIndex];for(;++holdersIndex<holdersLength;)(isUncurried||argsIndex<argsLength)&&(result[offset+holders[holdersIndex]]=args[argsIndex++]);return result}function copyArray(source,array){var index=-1,length=source.length;for(array=array||Array(length);++index<length;)array[index]=source[index];return array}function copyObject(source,props,object,customizer){var isNew=!object;object=object||{};for(var index=-1,length=props.length;++index<length;){var key=props[index],newValue=customizer?customizer(object[key],source[key],key,object,source):undefined;newValue===undefined&&(newValue=source[key]),(isNew?baseAssignValue:assignValue)(object,key,newValue)}return object}function createAggregator(setter,initializer){return function(collection,iteratee){var func=isArray(collection)?arrayAggregator:baseAggregator,accumulator=initializer?initializer():{};return func(collection,setter,getIteratee(iteratee,2),accumulator)}}function createAssigner(assigner){return baseRest(function(object,sources){var index=-1,length=sources.length,customizer=1<length?sources[length-1]:undefined,guard=2<length?sources[2]:undefined,customizer=3<assigner.length&&"function"==typeof customizer?(length--,customizer):undefined;for(guard&&isIterateeCall(sources[0],sources[1],guard)&&(customizer=length<3?undefined:customizer,length=1),object=Object(object);++index<length;){var source=sources[index];source&&assigner(object,source,index,customizer)}return object})}function createBaseEach(eachFunc,fromRight){return function(collection,iteratee){if(null==collection)return collection;if(!isArrayLike(collection))return eachFunc(collection,iteratee);for(var length=collection.length,index=fromRight?length:-1,iterable=Object(collection);(fromRight?index--:++index<length)&&!1!==iteratee(iterable[index],index,iterable););return collection}}function createBaseFor(fromRight){return function(object,iteratee,keysFunc){for(var index=-1,iterable=Object(object),props=keysFunc(object),length=props.length;length--;){var key=props[fromRight?length:++index];if(!1===iteratee(iterable[key],key,iterable))break}return object}}function createCaseFirst(methodName){return function(string){var strSymbols=hasUnicode(string=toString(string))?stringToArray(string):undefined,chr=strSymbols?strSymbols[0]:string.charAt(0),trailing=strSymbols?castSlice(strSymbols,1).join(""):string.slice(1);return chr[methodName]()+trailing}}function createCompounder(callback){return function(string){return arrayReduce(words(deburr(string).replace(reApos,"")),callback,"")}}function createCtor(Ctor){return function(){var args=arguments;switch(args.length){case 0:return new Ctor;case 1:return new Ctor(args[0]);case 2:return new Ctor(args[0],args[1]);case 3:return new Ctor(args[0],args[1],args[2]);case 4:return new Ctor(args[0],args[1],args[2],args[3]);case 5:return new Ctor(args[0],args[1],args[2],args[3],args[4]);case 6:return new Ctor(args[0],args[1],args[2],args[3],args[4],args[5]);case 7:return new Ctor(args[0],args[1],args[2],args[3],args[4],args[5],args[6])}var thisBinding=baseCreate(Ctor.prototype),result=Ctor.apply(thisBinding,args);return isObject(result)?result:thisBinding}}function createCurry(func,bitmask,arity){var Ctor=createCtor(func);return function wrapper(){for(var length=arguments.length,args=Array(length),index=length,placeholder=getHolder(wrapper);index--;)args[index]=arguments[index];var holders=length<3&&args[0]!==placeholder&&args[length-1]!==placeholder?[]:replaceHolders(args,placeholder);return(length-=holders.length)<arity?createRecurry(func,bitmask,createHybrid,wrapper.placeholder,undefined,args,holders,undefined,undefined,arity-length):apply(this&&this!==root&&this instanceof wrapper?Ctor:func,this,args)}}function createFind(findIndexFunc){return function(collection,predicate,fromIndex){var iteratee,iterable=Object(collection);isArrayLike(collection)||(iteratee=getIteratee(predicate,3),collection=keys(collection),predicate=function(key){return iteratee(iterable[key],key,iterable)});var index=findIndexFunc(collection,predicate,fromIndex);return-1<index?iterable[iteratee?collection[index]:index]:undefined}}function createFlow(fromRight){return flatRest(function(funcs){var length=funcs.length,index=length,prereq=LodashWrapper.prototype.thru;for(fromRight&&funcs.reverse();index--;){var func=funcs[index];if("function"!=typeof func)throw new TypeError(FUNC_ERROR_TEXT);prereq&&!wrapper&&"wrapper"==getFuncName(func)&&(wrapper=new LodashWrapper([],!0))}for(index=wrapper?index:length;++index<length;)var funcName=getFuncName(func=funcs[index]),data="wrapper"==funcName?getData(func):undefined,wrapper=data&&isLaziable(data[0])&&424==data[1]&&!data[4].length&&1==data[9]?wrapper[getFuncName(data[0])].apply(wrapper,data[3]):1==func.length&&isLaziable(func)?wrapper[funcName]():wrapper.thru(func);return function(){var args=arguments,value=args[0];if(wrapper&&1==args.length&&isArray(value))return wrapper.plant(value).value();for(var index=0,result=length?funcs[index].apply(this,args):value;++index<length;)result=funcs[index].call(this,result);return result}})}function createHybrid(func,bitmask,thisArg,partials,holders,partialsRight,holdersRight,argPos,ary,arity){var isAry=128&bitmask,isBind=1&bitmask,isBindKey=2&bitmask,isCurried=24&bitmask,isFlip=512&bitmask,Ctor=isBindKey?undefined:createCtor(func);return function wrapper(){for(var placeholder,holdersCount,args=Array(length=arguments.length),index=length;index--;)args[index]=arguments[index];if(isCurried&&(holdersCount=function(array,placeholder){for(var length=array.length,result=0;length--;)array[length]===placeholder&&++result;return result}(args,placeholder=getHolder(wrapper))),partials&&(args=composeArgs(args,partials,holders,isCurried)),partialsRight&&(args=composeArgsRight(args,partialsRight,holdersRight,isCurried)),length-=holdersCount,isCurried&&length<arity){var newHolders=replaceHolders(args,placeholder);return createRecurry(func,bitmask,createHybrid,wrapper.placeholder,thisArg,args,newHolders,argPos,ary,arity-length)}var thisBinding=isBind?thisArg:this,fn=isBindKey?thisBinding[func]:func,length=args.length;return argPos?args=function(array,indexes){for(var arrLength=array.length,length=nativeMin(indexes.length,arrLength),oldArray=copyArray(array);length--;){var index=indexes[length];array[length]=isIndex(index,arrLength)?oldArray[index]:undefined}return array}(args,argPos):isFlip&&1<length&&args.reverse(),isAry&&ary<length&&(args.length=ary),this&&this!==root&&this instanceof wrapper&&(fn=Ctor||createCtor(fn)),fn.apply(thisBinding,args)}}function createInverter(setter,toIteratee){return function(object,iteratee){return function(object,setter,iteratee,accumulator){return baseForOwn(object,function(value,key,object){setter(accumulator,iteratee(value),key,object)}),accumulator}(object,setter,toIteratee(iteratee),{})}}function createMathOperation(operator,defaultValue){return function(value,other){var result;if(value===undefined&&other===undefined)return defaultValue;if(value!==undefined&&(result=value),other!==undefined){if(result===undefined)return other;other="string"==typeof value||"string"==typeof other?(value=baseToString(value),baseToString(other)):(value=baseToNumber(value),baseToNumber(other)),result=operator(value,other)}return result}}function createOver(arrayFunc){return flatRest(function(iteratees){return iteratees=arrayMap(iteratees,baseUnary(getIteratee())),baseRest(function(args){var thisArg=this;return arrayFunc(iteratees,function(iteratee){return apply(iteratee,thisArg,args)})})})}function createPadding(length,chars){var charsLength=(chars=chars===undefined?" ":baseToString(chars)).length;if(charsLength<2)return charsLength?baseRepeat(chars,length):chars;var result=baseRepeat(chars,nativeCeil(length/stringSize(chars)));return hasUnicode(chars)?castSlice(stringToArray(result),0,length).join(""):result.slice(0,length)}function createPartial(func,bitmask,thisArg,partials){var isBind=1&bitmask,Ctor=createCtor(func);return function wrapper(){for(var argsIndex=-1,argsLength=arguments.length,leftIndex=-1,leftLength=partials.length,args=Array(leftLength+argsLength),fn=this&&this!==root&&this instanceof wrapper?Ctor:func;++leftIndex<leftLength;)args[leftIndex]=partials[leftIndex];for(;argsLength--;)args[leftIndex++]=arguments[++argsIndex];return apply(fn,isBind?thisArg:this,args)}}function createRange(fromRight){return function(start,end,step){return step&&"number"!=typeof step&&isIterateeCall(start,end,step)&&(end=step=undefined),start=toFinite(start),end===undefined?(end=start,start=0):end=toFinite(end),function(start,end,step,fromRight){for(var index=-1,length=nativeMax(nativeCeil((end-start)/(step||1)),0),result=Array(length);length--;)result[fromRight?length:++index]=start,start+=step;return result}(start,end,step=step===undefined?start<end?1:-1:toFinite(step),fromRight)}}function createRelationalOperation(operator){return function(value,other){return"string"==typeof value&&"string"==typeof other||(value=toNumber(value),other=toNumber(other)),operator(value,other)}}function createRecurry(func,bitmask,wrapFunc,placeholder,thisArg,partials,holders,argPos,ary,arity){var isCurry=8&bitmask;bitmask|=isCurry?32:64,4&(bitmask&=~(isCurry?64:32))||(bitmask&=-4);var newData=[func,bitmask,thisArg,isCurry?partials:undefined,isCurry?holders:undefined,isCurry?undefined:partials,isCurry?undefined:holders,argPos,ary,arity],result=wrapFunc.apply(undefined,newData);return isLaziable(func)&&setData(result,newData),result.placeholder=placeholder,setWrapToString(result,func,bitmask)}function createRound(methodName){var func=Math[methodName];return function(number,precision){if(number=toNumber(number),precision=null==precision?0:nativeMin(toInteger(precision),292)){var pair=(toString(number)+"e").split("e");return+((pair=(toString(func(pair[0]+"e"+(+pair[1]+precision)))+"e").split("e"))[0]+"e"+(pair[1]-precision))}return func(number)}}var createSet=Set&&1/setToArray(new Set([,-0]))[1]==1/0?function(values){return new Set(values)}:noop;function createToPairs(keysFunc){return function(object){var tag=getTag(object);return tag==mapTag?mapToArray(object):tag==setTag?setToPairs(object):function(object,props){return arrayMap(props,function(key){return[key,object[key]]})}(object,keysFunc(object))}}function createWrap(func,bitmask,thisArg,partials,holders,argPos,ary,arity){var isBindKey=2&bitmask;if(!isBindKey&&"function"!=typeof func)throw new TypeError(FUNC_ERROR_TEXT);var partialsRight,holdersRight,length=partials?partials.length:0;length||(bitmask&=-97,partials=holders=undefined),ary=ary===undefined?ary:nativeMax(toInteger(ary),0),arity=arity===undefined?arity:toInteger(arity),length-=holders?holders.length:0,64&bitmask&&(partialsRight=partials,holdersRight=holders,partials=holders=undefined);var result,data=isBindKey?undefined:getData(func),newData=[func,bitmask,thisArg,partials,holders,partialsRight,holdersRight,argPos,ary,arity];return data&&function(data,source){var bitmask=data[1],srcBitmask=source[1],newBitmask=bitmask|srcBitmask,isCommon=newBitmask<131,isCombo=128==srcBitmask&&8==bitmask||128==srcBitmask&&256==bitmask&&data[7].length<=source[8]||384==srcBitmask&&source[7].length<=source[8]&&8==bitmask;if(!isCommon&&!isCombo)return;1&srcBitmask&&(data[2]=source[2],newBitmask|=1&bitmask?0:4);var value=source[3];{var partials;value&&(partials=data[3],data[3]=partials?composeArgs(partials,value,source[4]):value,data[4]=partials?replaceHolders(data[3],PLACEHOLDER):source[4])}(value=source[5])&&(partials=data[5],data[5]=partials?composeArgsRight(partials,value,source[6]):value,data[6]=partials?replaceHolders(data[5],PLACEHOLDER):source[6]);(value=source[7])&&(data[7]=value);128&srcBitmask&&(data[8]=null==data[8]?source[8]:nativeMin(data[8],source[8]));null==data[9]&&(data[9]=source[9]);data[0]=source[0],data[1]=newBitmask}(newData,data),func=newData[0],bitmask=newData[1],thisArg=newData[2],partials=newData[3],holders=newData[4],!(arity=newData[9]=newData[9]===undefined?isBindKey?0:func.length:nativeMax(newData[9]-length,0))&&24&bitmask&&(bitmask&=-25),result=bitmask&&1!=bitmask?8==bitmask||16==bitmask?createCurry(func,bitmask,arity):32!=bitmask&&33!=bitmask||holders.length?createHybrid.apply(undefined,newData):createPartial(func,bitmask,thisArg,partials):function(func,bitmask,thisArg){var isBind=1&bitmask,Ctor=createCtor(func);return function wrapper(){return(this&&this!==root&&this instanceof wrapper?Ctor:func).apply(isBind?thisArg:this,arguments)}}(func,bitmask,thisArg),setWrapToString((data?baseSetData:setData)(result,newData),func,bitmask)}function customDefaultsAssignIn(objValue,srcValue,key,object){return objValue===undefined||eq(objValue,objectProto[key])&&!hasOwnProperty.call(object,key)?srcValue:objValue}function customDefaultsMerge(objValue,srcValue,key,object,source,stack){return isObject(objValue)&&isObject(srcValue)&&(stack.set(srcValue,objValue),baseMerge(objValue,srcValue,undefined,customDefaultsMerge,stack),stack.delete(srcValue)),objValue}function customOmitClone(value){return isPlainObject(value)?undefined:value}function equalArrays(array,other,bitmask,customizer,equalFunc,stack){var isPartial=1&bitmask,arrLength=array.length,othLength=other.length;if(arrLength!=othLength&&!(isPartial&&arrLength<othLength))return!1;var stacked=stack.get(array);if(stacked&&stack.get(other))return stacked==other;var index=-1,result=!0,seen=2&bitmask?new SetCache:undefined;for(stack.set(array,other),stack.set(other,array);++index<arrLength;){var compared,arrValue=array[index],othValue=other[index];if(customizer&&(compared=isPartial?customizer(othValue,arrValue,index,other,array,stack):customizer(arrValue,othValue,index,array,other,stack)),compared!==undefined){if(compared)continue;result=!1;break}if(seen){if(!arraySome(other,function(othValue,othIndex){return!cacheHas(seen,othIndex)&&(arrValue===othValue||equalFunc(arrValue,othValue,bitmask,customizer,stack))&&seen.push(othIndex)})){result=!1;break}}else if(arrValue!==othValue&&!equalFunc(arrValue,othValue,bitmask,customizer,stack)){result=!1;break}}return stack.delete(array),stack.delete(other),result}function flatRest(func){return setToString(overRest(func,undefined,flatten),func+"")}function getAllKeys(object){return baseGetAllKeys(object,keys,getSymbols)}function getAllKeysIn(object){return baseGetAllKeys(object,keysIn,getSymbolsIn)}var getData=metaMap?function(func){return metaMap.get(func)}:noop;function getFuncName(func){for(var result=func.name+"",array=realNames[result],length=hasOwnProperty.call(realNames,result)?array.length:0;length--;){var data=array[length],otherFunc=data.func;if(null==otherFunc||otherFunc==func)return data.name}return result}function getHolder(func){return(hasOwnProperty.call(lodash,"placeholder")?lodash:func).placeholder}function getIteratee(){var result=(result=lodash.iteratee||iteratee)===iteratee?baseIteratee:result;return arguments.length?result(arguments[0],arguments[1]):result}function getMapData(map,key){var value,type,data=map.__data__;return("string"==(type=typeof(value=key))||"number"==type||"symbol"==type||"boolean"==type?"__proto__"!==value:null===value)?data["string"==typeof key?"string":"hash"]:data.map}function getMatchData(object){for(var result=keys(object),length=result.length;length--;){var key=result[length],value=object[key];result[length]=[key,value,isStrictComparable(value)]}return result}function getNative(object,key){var value=function(object,key){return null==object?undefined:object[key]}(object,key);return baseIsNative(value)?value:undefined}var getSymbols=nativeGetSymbols?function(object){return null==object?[]:(object=Object(object),arrayFilter(nativeGetSymbols(object),function(symbol){return propertyIsEnumerable.call(object,symbol)}))}:stubArray,getSymbolsIn=nativeGetSymbols?function(object){for(var result=[];object;)arrayPush(result,getSymbols(object)),object=getPrototype(object);return result}:stubArray,getTag=baseGetTag;function hasPath(object,path,hasFunc){for(var index=-1,length=(path=castPath(path,object)).length,result=!1;++index<length;){var key=toKey(path[index]);if(!(result=null!=object&&hasFunc(object,key)))break;object=object[key]}return result||++index!=length?result:!!(length=null==object?0:object.length)&&isLength(length)&&isIndex(key,length)&&(isArray(object)||isArguments(object))}function initCloneObject(object){return"function"!=typeof object.constructor||isPrototype(object)?{}:baseCreate(getPrototype(object))}function isFlattenable(value){return isArray(value)||isArguments(value)||!!(spreadableSymbol&&value&&value[spreadableSymbol])}function isIndex(value,length){return!!(length=null==length?9007199254740991:length)&&("number"==typeof value||reIsUint.test(value))&&-1<value&&value%1==0&&value<length}function isIterateeCall(value,index,object){if(isObject(object)){var type=typeof index;return("number"==type?isArrayLike(object)&&isIndex(index,object.length):"string"==type&&index in object)&&eq(object[index],value)}}function isKey(value,object){if(!isArray(value)){var type=typeof value;return"number"==type||"symbol"==type||"boolean"==type||null==value||isSymbol(value)||(reIsPlainProp.test(value)||!reIsDeepProp.test(value)||null!=object&&value in Object(object))}}function isLaziable(func){var funcName=getFuncName(func),other=lodash[funcName];if("function"==typeof other&&funcName in LazyWrapper.prototype){if(func===other)return 1;var data=getData(other);return data&&func===data[0]}}(DataView&&getTag(new DataView(new ArrayBuffer(1)))!=dataViewTag||Map&&getTag(new Map)!=mapTag||Promise&&"[object Promise]"!=getTag(Promise.resolve())||Set&&getTag(new Set)!=setTag||WeakMap&&getTag(new WeakMap)!=weakMapTag)&&(getTag=function(value){var result=baseGetTag(value),Ctor=result==objectTag?value.constructor:undefined,ctorString=Ctor?toSource(Ctor):"";if(ctorString)switch(ctorString){case dataViewCtorString:return dataViewTag;case mapCtorString:return mapTag;case promiseCtorString:return"[object Promise]";case setCtorString:return setTag;case weakMapCtorString:return weakMapTag}return result});var isMaskable=coreJsData?isFunction:stubFalse;function isPrototype(value){var Ctor=value&&value.constructor;return value===("function"==typeof Ctor&&Ctor.prototype||objectProto)}function isStrictComparable(value){return value==value&&!isObject(value)}function matchesStrictComparable(key,srcValue){return function(object){return null!=object&&(object[key]===srcValue&&(srcValue!==undefined||key in Object(object)))}}function overRest(func,start,transform){return start=nativeMax(start===undefined?func.length-1:start,0),function(){for(var args=arguments,index=-1,length=nativeMax(args.length-start,0),array=Array(length);++index<length;)array[index]=args[start+index];index=-1;for(var otherArgs=Array(start+1);++index<start;)otherArgs[index]=args[index];return otherArgs[start]=transform(array),apply(func,this,otherArgs)}}function parent(object,path){return path.length<2?object:baseGet(object,baseSlice(path,0,-1))}var setData=shortOut(baseSetData),setTimeout=ctxSetTimeout||function(func,wait){return root.setTimeout(func,wait)},setToString=shortOut(baseSetToString);function setWrapToString(wrapper,reference,bitmask){var source=reference+"";return setToString(wrapper,function(source,details){var length=details.length;if(!length)return source;var lastIndex=length-1;return details[lastIndex]=(1<length?"& ":"")+details[lastIndex],details=details.join(2<length?", ":" "),source.replace(reWrapComment,"{\n/* [wrapped with "+details+"] */\n")}(source,function(details,bitmask){return arrayEach(wrapFlags,function(pair){var value="_."+pair[0];bitmask&pair[1]&&!arrayIncludes(details,value)&&details.push(value)}),details.sort()}(function(source){var match=source.match(reWrapDetails);return match?match[1].split(reSplitDetails):[]}(source),bitmask)))}function shortOut(func){var count=0,lastCalled=0;return function(){var stamp=nativeNow(),remaining=16-(stamp-lastCalled);if(lastCalled=stamp,0<remaining){if(800<=++count)return arguments[0]}else count=0;return func.apply(undefined,arguments)}}function shuffleSelf(array,size){var index=-1,length=array.length,lastIndex=length-1;for(size=size===undefined?length:size;++index<size;){var rand=baseRandom(index,lastIndex),value=array[rand];array[rand]=array[index],array[index]=value}return array.length=size,array}var stringToPath=function(func){var result=memoize(func,function(key){return 500===cache.size&&cache.clear(),key}),cache=result.cache;return result}(function(string){var result=[];return reLeadingDot.test(string)&&result.push(""),string.replace(rePropName,function(match,number,quote,string){result.push(quote?string.replace(reEscapeChar,"$1"):number||match)}),result});function toKey(value){if("string"==typeof value||isSymbol(value))return value;var result=value+"";return"0"==result&&1/value==-1/0?"-0":result}function toSource(func){if(null!=func){try{return funcToString.call(func)}catch(e){}try{return func+""}catch(e){}}return""}function wrapperClone(wrapper){if(wrapper instanceof LazyWrapper)return wrapper.clone();var result=new LodashWrapper(wrapper.__wrapped__,wrapper.__chain__);return result.__actions__=copyArray(wrapper.__actions__),result.__index__=wrapper.__index__,result.__values__=wrapper.__values__,result}var difference=baseRest(function(array,values){return isArrayLikeObject(array)?baseDifference(array,baseFlatten(values,1,isArrayLikeObject,!0)):[]}),differenceBy=baseRest(function(array,values){var iteratee=last(values);return isArrayLikeObject(iteratee)&&(iteratee=undefined),isArrayLikeObject(array)?baseDifference(array,baseFlatten(values,1,isArrayLikeObject,!0),getIteratee(iteratee,2)):[]}),differenceWith=baseRest(function(array,values){var comparator=last(values);return isArrayLikeObject(comparator)&&(comparator=undefined),isArrayLikeObject(array)?baseDifference(array,baseFlatten(values,1,isArrayLikeObject,!0),undefined,comparator):[]});function findIndex(array,predicate,fromIndex){var length=null==array?0:array.length;if(!length)return-1;var index=null==fromIndex?0:toInteger(fromIndex);return index<0&&(index=nativeMax(length+index,0)),baseFindIndex(array,getIteratee(predicate,3),index)}function findLastIndex(array,predicate,fromIndex){var length=null==array?0:array.length;if(!length)return-1;var index=length-1;return fromIndex!==undefined&&(index=toInteger(fromIndex),index=fromIndex<0?nativeMax(length+index,0):nativeMin(index,length-1)),baseFindIndex(array,getIteratee(predicate,3),index,!0)}function flatten(array){return(null==array?0:array.length)?baseFlatten(array,1):[]}function head(array){return array&&array.length?array[0]:undefined}var intersection=baseRest(function(arrays){var mapped=arrayMap(arrays,castArrayLikeObject);return mapped.length&&mapped[0]===arrays[0]?baseIntersection(mapped):[]}),intersectionBy=baseRest(function(arrays){var iteratee=last(arrays),mapped=arrayMap(arrays,castArrayLikeObject);return iteratee===last(mapped)?iteratee=undefined:mapped.pop(),mapped.length&&mapped[0]===arrays[0]?baseIntersection(mapped,getIteratee(iteratee,2)):[]}),intersectionWith=baseRest(function(arrays){var comparator=last(arrays),mapped=arrayMap(arrays,castArrayLikeObject);return(comparator="function"==typeof comparator?comparator:undefined)&&mapped.pop(),mapped.length&&mapped[0]===arrays[0]?baseIntersection(mapped,undefined,comparator):[]});function last(array){var length=null==array?0:array.length;return length?array[length-1]:undefined}var pull=baseRest(pullAll);function pullAll(array,values){return array&&array.length&&values&&values.length?basePullAll(array,values):array}var pullAt=flatRest(function(array,indexes){var length=null==array?0:array.length,result=baseAt(array,indexes);return basePullAt(array,arrayMap(indexes,function(index){return isIndex(index,length)?+index:index}).sort(compareAscending)),result});function reverse(array){return null==array?array:nativeReverse.call(array)}var union=baseRest(function(arrays){return baseUniq(baseFlatten(arrays,1,isArrayLikeObject,!0))}),unionBy=baseRest(function(arrays){var iteratee=last(arrays);return isArrayLikeObject(iteratee)&&(iteratee=undefined),baseUniq(baseFlatten(arrays,1,isArrayLikeObject,!0),getIteratee(iteratee,2))}),unionWith=baseRest(function(arrays){var comparator="function"==typeof(comparator=last(arrays))?comparator:undefined;return baseUniq(baseFlatten(arrays,1,isArrayLikeObject,!0),undefined,comparator)});function unzip(array){if(!array||!array.length)return[];var length=0;return array=arrayFilter(array,function(group){return isArrayLikeObject(group)&&(length=nativeMax(group.length,length),1)}),baseTimes(length,function(index){return arrayMap(array,baseProperty(index))})}function unzipWith(array,iteratee){if(!array||!array.length)return[];var result=unzip(array);return null==iteratee?result:arrayMap(result,function(group){return apply(iteratee,undefined,group)})}var without=baseRest(function(array,values){return isArrayLikeObject(array)?baseDifference(array,values):[]}),xor=baseRest(function(arrays){return baseXor(arrayFilter(arrays,isArrayLikeObject))}),xorBy=baseRest(function(arrays){var iteratee=last(arrays);return isArrayLikeObject(iteratee)&&(iteratee=undefined),baseXor(arrayFilter(arrays,isArrayLikeObject),getIteratee(iteratee,2))}),xorWith=baseRest(function(arrays){var comparator="function"==typeof(comparator=last(arrays))?comparator:undefined;return baseXor(arrayFilter(arrays,isArrayLikeObject),undefined,comparator)}),zip=baseRest(unzip);var zipWith=baseRest(function(arrays){var length=arrays.length,iteratee="function"==typeof(iteratee=1<length?arrays[length-1]:undefined)?(arrays.pop(),iteratee):undefined;return unzipWith(arrays,iteratee)});function chain(value){var result=lodash(value);return result.__chain__=!0,result}function thru(value,interceptor){return interceptor(value)}var wrapperAt=flatRest(function(paths){function interceptor(object){return baseAt(object,paths)}var length=paths.length,start=length?paths[0]:0,value=this.__wrapped__;return!(1<length||this.__actions__.length)&&value instanceof LazyWrapper&&isIndex(start)?((value=value.slice(start,+start+(length?1:0))).__actions__.push({func:thru,args:[interceptor],thisArg:undefined}),new LodashWrapper(value,this.__chain__).thru(function(array){return length&&!array.length&&array.push(undefined),array})):this.thru(interceptor)});var countBy=createAggregator(function(result,value,key){hasOwnProperty.call(result,key)?++result[key]:baseAssignValue(result,key,1)});var find=createFind(findIndex),findLast=createFind(findLastIndex);function forEach(collection,iteratee){return(isArray(collection)?arrayEach:baseEach)(collection,getIteratee(iteratee,3))}function forEachRight(collection,iteratee){return(isArray(collection)?arrayEachRight:baseEachRight)(collection,getIteratee(iteratee,3))}var groupBy=createAggregator(function(result,value,key){hasOwnProperty.call(result,key)?result[key].push(value):baseAssignValue(result,key,[value])});var invokeMap=baseRest(function(collection,path,args){var index=-1,isFunc="function"==typeof path,result=isArrayLike(collection)?Array(collection.length):[];return baseEach(collection,function(value){result[++index]=isFunc?apply(path,value,args):baseInvoke(value,path,args)}),result}),keyBy=createAggregator(function(result,value,key){baseAssignValue(result,key,value)});function map(collection,iteratee){return(isArray(collection)?arrayMap:baseMap)(collection,getIteratee(iteratee,3))}var partition=createAggregator(function(result,value,key){result[key?0:1].push(value)},function(){return[[],[]]});var sortBy=baseRest(function(collection,iteratees){if(null==collection)return[];var length=iteratees.length;return 1<length&&isIterateeCall(collection,iteratees[0],iteratees[1])?iteratees=[]:2<length&&isIterateeCall(iteratees[0],iteratees[1],iteratees[2])&&(iteratees=[iteratees[0]]),baseOrderBy(collection,baseFlatten(iteratees,1),[])}),now=ctxNow||function(){return root.Date.now()};function ary(func,n,guard){return n=guard?undefined:n,n=func&&null==n?func.length:n,createWrap(func,128,undefined,undefined,undefined,undefined,n)}function before(n,func){var result;if("function"!=typeof func)throw new TypeError(FUNC_ERROR_TEXT);return n=toInteger(n),function(){return 0<--n&&(result=func.apply(this,arguments)),n<=1&&(func=undefined),result}}var bind=baseRest(function(func,thisArg,partials){var holders,bitmask=1;return partials.length&&(holders=replaceHolders(partials,getHolder(bind)),bitmask|=32),createWrap(func,bitmask,thisArg,partials,holders)}),bindKey=baseRest(function(object,key,partials){var holders,bitmask=3;return partials.length&&(holders=replaceHolders(partials,getHolder(bindKey)),bitmask|=32),createWrap(key,bitmask,object,partials,holders)});function debounce(func,wait,options){var lastArgs,lastThis,maxWait,result,timerId,lastCallTime,lastInvokeTime=0,leading=!1,maxing=!1,trailing=!0;if("function"!=typeof func)throw new TypeError(FUNC_ERROR_TEXT);function invokeFunc(time){var args=lastArgs,thisArg=lastThis;return lastArgs=lastThis=undefined,lastInvokeTime=time,result=func.apply(thisArg,args)}function shouldInvoke(time){var timeSinceLastCall=time-lastCallTime;return lastCallTime===undefined||wait<=timeSinceLastCall||timeSinceLastCall<0||maxing&&maxWait<=time-lastInvokeTime}function timerExpired(){var time=now();if(shouldInvoke(time))return trailingEdge(time);timerId=setTimeout(timerExpired,function(time){var result=wait-(time-lastCallTime);return maxing?nativeMin(result,maxWait-(time-lastInvokeTime)):result}(time))}function trailingEdge(time){return timerId=undefined,trailing&&lastArgs?invokeFunc(time):(lastArgs=lastThis=undefined,result)}function debounced(){var time=now(),isInvoking=shouldInvoke(time);if(lastArgs=arguments,lastThis=this,lastCallTime=time,isInvoking){if(timerId===undefined)return function(time){return lastInvokeTime=time,timerId=setTimeout(timerExpired,wait),leading?invokeFunc(time):result}(lastCallTime);if(maxing)return timerId=setTimeout(timerExpired,wait),invokeFunc(lastCallTime)}return timerId===undefined&&(timerId=setTimeout(timerExpired,wait)),result}return wait=toNumber(wait)||0,isObject(options)&&(leading=!!options.leading,maxing="maxWait"in options,maxWait=maxing?nativeMax(toNumber(options.maxWait)||0,wait):maxWait,trailing="trailing"in options?!!options.trailing:trailing),debounced.cancel=function(){timerId!==undefined&&clearTimeout(timerId),lastInvokeTime=0,lastArgs=lastCallTime=lastThis=timerId=undefined},debounced.flush=function(){return timerId===undefined?result:trailingEdge(now())},debounced}var defer=baseRest(function(func,args){return baseDelay(func,1,args)}),delay=baseRest(function(func,wait,args){return baseDelay(func,toNumber(wait)||0,args)});function memoize(func,resolver){if("function"!=typeof func||null!=resolver&&"function"!=typeof resolver)throw new TypeError(FUNC_ERROR_TEXT);var memoized=function(){var args=arguments,key=resolver?resolver.apply(this,args):args[0],cache=memoized.cache;if(cache.has(key))return cache.get(key);var result=func.apply(this,args);return memoized.cache=cache.set(key,result)||cache,result};return memoized.cache=new(memoize.Cache||MapCache),memoized}function negate(predicate){if("function"!=typeof predicate)throw new TypeError(FUNC_ERROR_TEXT);return function(){var args=arguments;switch(args.length){case 0:return!predicate.call(this);case 1:return!predicate.call(this,args[0]);case 2:return!predicate.call(this,args[0],args[1]);case 3:return!predicate.call(this,args[0],args[1],args[2])}return!predicate.apply(this,args)}}memoize.Cache=MapCache;var overArgs=castRest(function(func,transforms){var funcsLength=(transforms=1==transforms.length&&isArray(transforms[0])?arrayMap(transforms[0],baseUnary(getIteratee())):arrayMap(baseFlatten(transforms,1),baseUnary(getIteratee()))).length;return baseRest(function(args){for(var index=-1,length=nativeMin(args.length,funcsLength);++index<length;)args[index]=transforms[index].call(this,args[index]);return apply(func,this,args)})}),partial=baseRest(function(func,partials){var holders=replaceHolders(partials,getHolder(partial));return createWrap(func,32,undefined,partials,holders)}),partialRight=baseRest(function(func,partials){var holders=replaceHolders(partials,getHolder(partialRight));return createWrap(func,64,undefined,partials,holders)}),rearg=flatRest(function(func,indexes){return createWrap(func,256,undefined,undefined,undefined,indexes)});function eq(value,other){return value===other||value!=value&&other!=other}var gt=createRelationalOperation(baseGt),gte=createRelationalOperation(function(value,other){return other<=value}),isArguments=baseIsArguments(function(){return arguments}())?baseIsArguments:function(value){return isObjectLike(value)&&hasOwnProperty.call(value,"callee")&&!propertyIsEnumerable.call(value,"callee")},isArray=Array.isArray,isArrayBuffer=nodeIsArrayBuffer?baseUnary(nodeIsArrayBuffer):function(value){return isObjectLike(value)&&baseGetTag(value)==arrayBufferTag};function isArrayLike(value){return null!=value&&isLength(value.length)&&!isFunction(value)}function isArrayLikeObject(value){return isObjectLike(value)&&isArrayLike(value)}var isBuffer=nativeIsBuffer||stubFalse,isDate=nodeIsDate?baseUnary(nodeIsDate):function(value){return isObjectLike(value)&&baseGetTag(value)==dateTag};function isError(value){if(!isObjectLike(value))return!1;var tag=baseGetTag(value);return tag==errorTag||"[object DOMException]"==tag||"string"==typeof value.message&&"string"==typeof value.name&&!isPlainObject(value)}function isFunction(value){if(!isObject(value))return!1;var tag=baseGetTag(value);return tag==funcTag||tag==genTag||"[object AsyncFunction]"==tag||"[object Proxy]"==tag}function isInteger(value){return"number"==typeof value&&value==toInteger(value)}function isLength(value){return"number"==typeof value&&-1<value&&value%1==0&&value<=9007199254740991}function isObject(value){var type=typeof value;return null!=value&&("object"==type||"function"==type)}function isObjectLike(value){return null!=value&&"object"==typeof value}var isMap=nodeIsMap?baseUnary(nodeIsMap):function(value){return isObjectLike(value)&&getTag(value)==mapTag};function isNumber(value){return"number"==typeof value||isObjectLike(value)&&baseGetTag(value)==numberTag}function isPlainObject(value){if(!isObjectLike(value)||baseGetTag(value)!=objectTag)return!1;var proto=getPrototype(value);if(null===proto)return!0;var Ctor=hasOwnProperty.call(proto,"constructor")&&proto.constructor;return"function"==typeof Ctor&&Ctor instanceof Ctor&&funcToString.call(Ctor)==objectCtorString}var isRegExp=nodeIsRegExp?baseUnary(nodeIsRegExp):function(value){return isObjectLike(value)&&baseGetTag(value)==regexpTag};var isSet=nodeIsSet?baseUnary(nodeIsSet):function(value){return isObjectLike(value)&&getTag(value)==setTag};function isString(value){return"string"==typeof value||!isArray(value)&&isObjectLike(value)&&baseGetTag(value)==stringTag}function isSymbol(value){return"symbol"==typeof value||isObjectLike(value)&&baseGetTag(value)==symbolTag}var isTypedArray=nodeIsTypedArray?baseUnary(nodeIsTypedArray):function(value){return isObjectLike(value)&&isLength(value.length)&&!!typedArrayTags[baseGetTag(value)]};var lt=createRelationalOperation(baseLt),lte=createRelationalOperation(function(value,other){return value<=other});function toArray(value){if(!value)return[];if(isArrayLike(value))return(isString(value)?stringToArray:copyArray)(value);if(symIterator&&value[symIterator])return function(iterator){for(var data,result=[];!(data=iterator.next()).done;)result.push(data.value);return result}(value[symIterator]());var tag=getTag(value);return(tag==mapTag?mapToArray:tag==setTag?setToArray:values)(value)}function toFinite(value){return value?(value=toNumber(value))!==1/0&&value!==-1/0?value==value?value:0:17976931348623157e292*(value<0?-1:1):0===value?value:0}function toInteger(value){var result=toFinite(value),remainder=result%1;return result==result?remainder?result-remainder:result:0}function toLength(value){return value?baseClamp(toInteger(value),0,4294967295):0}function toNumber(value){if("number"==typeof value)return value;if(isSymbol(value))return NAN;var other;if(isObject(value)&&(value=isObject(other="function"==typeof value.valueOf?value.valueOf():value)?other+"":other),"string"!=typeof value)return 0===value?value:+value;value=value.replace(reTrim,"");var isBinary=reIsBinary.test(value);return isBinary||reIsOctal.test(value)?freeParseInt(value.slice(2),isBinary?2:8):reIsBadHex.test(value)?NAN:+value}function toPlainObject(value){return copyObject(value,keysIn(value))}function toString(value){return null==value?"":baseToString(value)}var assign=createAssigner(function(object,source){if(isPrototype(source)||isArrayLike(source))copyObject(source,keys(source),object);else for(var key in source)hasOwnProperty.call(source,key)&&assignValue(object,key,source[key])}),assignIn=createAssigner(function(object,source){copyObject(source,keysIn(source),object)}),assignInWith=createAssigner(function(object,source,srcIndex,customizer){copyObject(source,keysIn(source),object,customizer)}),assignWith=createAssigner(function(object,source,srcIndex,customizer){copyObject(source,keys(source),object,customizer)}),at=flatRest(baseAt);var defaults=baseRest(function(args){return args.push(undefined,customDefaultsAssignIn),apply(assignInWith,undefined,args)}),defaultsDeep=baseRest(function(args){return args.push(undefined,customDefaultsMerge),apply(mergeWith,undefined,args)});function get(object,path,defaultValue){var result=null==object?undefined:baseGet(object,path);return result===undefined?defaultValue:result}function hasIn(object,path){return null!=object&&hasPath(object,path,baseHasIn)}var invert=createInverter(function(result,value,key){result[value]=key},constant(identity)),invertBy=createInverter(function(result,value,key){hasOwnProperty.call(result,value)?result[value].push(key):result[value]=[key]},getIteratee),invoke=baseRest(baseInvoke);function keys(object){return(isArrayLike(object)?arrayLikeKeys:baseKeys)(object)}function keysIn(object){return isArrayLike(object)?arrayLikeKeys(object,!0):baseKeysIn(object)}var merge=createAssigner(function(object,source,srcIndex){baseMerge(object,source,srcIndex)}),mergeWith=createAssigner(function(object,source,srcIndex,customizer){baseMerge(object,source,srcIndex,customizer)}),omit=flatRest(function(object,paths){var result={};if(null==object)return result;var isDeep=!1;paths=arrayMap(paths,function(path){return path=castPath(path,object),isDeep=isDeep||1<path.length,path}),copyObject(object,getAllKeysIn(object),result),isDeep&&(result=baseClone(result,7,customOmitClone));for(var length=paths.length;length--;)baseUnset(result,paths[length]);return result});var pick=flatRest(function(object,paths){return null==object?{}:function(object,paths){return basePickBy(object,paths,function(value,path){return hasIn(object,path)})}(object,paths)});function pickBy(object,predicate){if(null==object)return{};var props=arrayMap(getAllKeysIn(object),function(prop){return[prop]});return predicate=getIteratee(predicate),basePickBy(object,props,function(value,path){return predicate(value,path[0])})}var toPairs=createToPairs(keys),toPairsIn=createToPairs(keysIn);function values(object){return null==object?[]:baseValues(object,keys(object))}var camelCase=createCompounder(function(result,word,index){return word=word.toLowerCase(),result+(index?capitalize(word):word)});function capitalize(string){return upperFirst(toString(string).toLowerCase())}function deburr(string){return(string=toString(string))&&string.replace(reLatin,deburrLetter).replace(reComboMark,"")}var kebabCase=createCompounder(function(result,word,index){return result+(index?"-":"")+word.toLowerCase()}),lowerCase=createCompounder(function(result,word,index){return result+(index?" ":"")+word.toLowerCase()}),lowerFirst=createCaseFirst("toLowerCase");var snakeCase=createCompounder(function(result,word,index){return result+(index?"_":"")+word.toLowerCase()});var startCase=createCompounder(function(result,word,index){return result+(index?" ":"")+upperFirst(word)});var upperCase=createCompounder(function(result,word,index){return result+(index?" ":"")+word.toUpperCase()}),upperFirst=createCaseFirst("toUpperCase");function words(string,pattern,guard){return string=toString(string),(pattern=guard?undefined:pattern)===undefined?(function(string){return reHasUnicodeWord.test(string)}(string)?function(string){return string.match(reUnicodeWord)||[]}:function(string){return string.match(reAsciiWord)||[]})(string):string.match(pattern)||[]}var attempt=baseRest(function(func,args){try{return apply(func,undefined,args)}catch(e){return isError(e)?e:new Error(e)}}),bindAll=flatRest(function(object,methodNames){return arrayEach(methodNames,function(key){key=toKey(key),baseAssignValue(object,key,bind(object[key],object))}),object});function constant(value){return function(){return value}}var flow=createFlow(),flowRight=createFlow(!0);function identity(value){return value}function iteratee(func){return baseIteratee("function"==typeof func?func:baseClone(func,1))}var method=baseRest(function(path,args){return function(object){return baseInvoke(object,path,args)}}),methodOf=baseRest(function(object,args){return function(path){return baseInvoke(object,path,args)}});function mixin(object,source,options){var props=keys(source),methodNames=baseFunctions(source,props);null!=options||isObject(source)&&(methodNames.length||!props.length)||(options=source,source=object,object=this,methodNames=baseFunctions(source,keys(source)));var chain=!(isObject(options)&&"chain"in options&&!options.chain),isFunc=isFunction(object);return arrayEach(methodNames,function(methodName){var func=source[methodName];object[methodName]=func,isFunc&&(object.prototype[methodName]=function(){var chainAll=this.__chain__;if(chain||chainAll){var result=object(this.__wrapped__);return(result.__actions__=copyArray(this.__actions__)).push({func:func,args:arguments,thisArg:object}),result.__chain__=chainAll,result}return func.apply(object,arrayPush([this.value()],arguments))})}),object}function noop(){}var over=createOver(arrayMap),overEvery=createOver(arrayEvery),overSome=createOver(arraySome);function property(path){return isKey(path)?baseProperty(toKey(path)):function(path){return function(object){return baseGet(object,path)}}(path)}var range=createRange(),rangeRight=createRange(!0);function stubArray(){return[]}function stubFalse(){return!1}var add=createMathOperation(function(augend,addend){return augend+addend},0),ceil=createRound("ceil"),divide=createMathOperation(function(dividend,divisor){return dividend/divisor},1),floor=createRound("floor");var source,multiply=createMathOperation(function(multiplier,multiplicand){return multiplier*multiplicand},1),round=createRound("round"),subtract=createMathOperation(function(minuend,subtrahend){return minuend-subtrahend},0);return lodash.after=function(n,func){if("function"!=typeof func)throw new TypeError(FUNC_ERROR_TEXT);return n=toInteger(n),function(){if(--n<1)return func.apply(this,arguments)}},lodash.ary=ary,lodash.assign=assign,lodash.assignIn=assignIn,lodash.assignInWith=assignInWith,lodash.assignWith=assignWith,lodash.at=at,lodash.before=before,lodash.bind=bind,lodash.bindAll=bindAll,lodash.bindKey=bindKey,lodash.castArray=function(){if(!arguments.length)return[];var value=arguments[0];return isArray(value)?value:[value]},lodash.chain=chain,lodash.chunk=function(array,size,guard){size=(guard?isIterateeCall(array,size,guard):size===undefined)?1:nativeMax(toInteger(size),0);var length=null==array?0:array.length;if(!length||size<1)return[];for(var index=0,resIndex=0,result=Array(nativeCeil(length/size));index<length;)result[resIndex++]=baseSlice(array,index,index+=size);return result},lodash.compact=function(array){for(var index=-1,length=null==array?0:array.length,resIndex=0,result=[];++index<length;){var value=array[index];value&&(result[resIndex++]=value)}return result},lodash.concat=function(){var length=arguments.length;if(!length)return[];for(var args=Array(length-1),array=arguments[0],index=length;index--;)args[index-1]=arguments[index];return arrayPush(isArray(array)?copyArray(array):[array],baseFlatten(args,1))},lodash.cond=function(pairs){var length=null==pairs?0:pairs.length,toIteratee=getIteratee();return pairs=length?arrayMap(pairs,function(pair){if("function"!=typeof pair[1])throw new TypeError(FUNC_ERROR_TEXT);return[toIteratee(pair[0]),pair[1]]}):[],baseRest(function(args){for(var index=-1;++index<length;){var pair=pairs[index];if(apply(pair[0],this,args))return apply(pair[1],this,args)}})},lodash.conforms=function(source){return function(source){var props=keys(source);return function(object){return baseConformsTo(object,source,props)}}(baseClone(source,1))},lodash.constant=constant,lodash.countBy=countBy,lodash.create=function(prototype,properties){var result=baseCreate(prototype);return null==properties?result:baseAssign(result,properties)},lodash.curry=function curry(func,arity,guard){var result=createWrap(func,8,undefined,undefined,undefined,undefined,undefined,arity=guard?undefined:arity);return result.placeholder=curry.placeholder,result},lodash.curryRight=function curryRight(func,arity,guard){var result=createWrap(func,16,undefined,undefined,undefined,undefined,undefined,arity=guard?undefined:arity);return result.placeholder=curryRight.placeholder,result},lodash.debounce=debounce,lodash.defaults=defaults,lodash.defaultsDeep=defaultsDeep,lodash.defer=defer,lodash.delay=delay,lodash.difference=difference,lodash.differenceBy=differenceBy,lodash.differenceWith=differenceWith,lodash.drop=function(array,n,guard){var length=null==array?0:array.length;return length?baseSlice(array,(n=guard||n===undefined?1:toInteger(n))<0?0:n,length):[]},lodash.dropRight=function(array,n,guard){var length=null==array?0:array.length;return length?baseSlice(array,0,(n=length-(n=guard||n===undefined?1:toInteger(n)))<0?0:n):[]},lodash.dropRightWhile=function(array,predicate){return array&&array.length?baseWhile(array,getIteratee(predicate,3),!0,!0):[]},lodash.dropWhile=function(array,predicate){return array&&array.length?baseWhile(array,getIteratee(predicate,3),!0):[]},lodash.fill=function(array,value,start,end){var length=null==array?0:array.length;return length?(start&&"number"!=typeof start&&isIterateeCall(array,value,start)&&(start=0,end=length),function(array,value,start,end){var length=array.length;for((start=toInteger(start))<0&&(start=length<-start?0:length+start),(end=end===undefined||length<end?length:toInteger(end))<0&&(end+=length),end=end<start?0:toLength(end);start<end;)array[start++]=value;return array}(array,value,start,end)):[]},lodash.filter=function(collection,predicate){return(isArray(collection)?arrayFilter:baseFilter)(collection,getIteratee(predicate,3))},lodash.flatMap=function(collection,iteratee){return baseFlatten(map(collection,iteratee),1)},lodash.flatMapDeep=function(collection,iteratee){return baseFlatten(map(collection,iteratee),1/0)},lodash.flatMapDepth=function(collection,iteratee,depth){return depth=depth===undefined?1:toInteger(depth),baseFlatten(map(collection,iteratee),depth)},lodash.flatten=flatten,lodash.flattenDeep=function(array){return(null==array?0:array.length)?baseFlatten(array,1/0):[]},lodash.flattenDepth=function(array,depth){return(null==array?0:array.length)?baseFlatten(array,depth=depth===undefined?1:toInteger(depth)):[]},lodash.flip=function(func){return createWrap(func,512)},lodash.flow=flow,lodash.flowRight=flowRight,lodash.fromPairs=function(pairs){for(var index=-1,length=null==pairs?0:pairs.length,result={};++index<length;){var pair=pairs[index];result[pair[0]]=pair[1]}return result},lodash.functions=function(object){return null==object?[]:baseFunctions(object,keys(object))},lodash.functionsIn=function(object){return null==object?[]:baseFunctions(object,keysIn(object))},lodash.groupBy=groupBy,lodash.initial=function(array){return(null==array?0:array.length)?baseSlice(array,0,-1):[]},lodash.intersection=intersection,lodash.intersectionBy=intersectionBy,lodash.intersectionWith=intersectionWith,lodash.invert=invert,lodash.invertBy=invertBy,lodash.invokeMap=invokeMap,lodash.iteratee=iteratee,lodash.keyBy=keyBy,lodash.keys=keys,lodash.keysIn=keysIn,lodash.map=map,lodash.mapKeys=function(object,iteratee){var result={};return iteratee=getIteratee(iteratee,3),baseForOwn(object,function(value,key,object){baseAssignValue(result,iteratee(value,key,object),value)}),result},lodash.mapValues=function(object,iteratee){var result={};return iteratee=getIteratee(iteratee,3),baseForOwn(object,function(value,key,object){baseAssignValue(result,key,iteratee(value,key,object))}),result},lodash.matches=function(source){return baseMatches(baseClone(source,1))},lodash.matchesProperty=function(path,srcValue){return baseMatchesProperty(path,baseClone(srcValue,1))},lodash.memoize=memoize,lodash.merge=merge,lodash.mergeWith=mergeWith,lodash.method=method,lodash.methodOf=methodOf,lodash.mixin=mixin,lodash.negate=negate,lodash.nthArg=function(n){return n=toInteger(n),baseRest(function(args){return baseNth(args,n)})},lodash.omit=omit,lodash.omitBy=function(object,predicate){return pickBy(object,negate(getIteratee(predicate)))},lodash.once=function(func){return before(2,func)},lodash.orderBy=function(collection,iteratees,orders,guard){return null==collection?[]:(isArray(iteratees)||(iteratees=null==iteratees?[]:[iteratees]),isArray(orders=guard?undefined:orders)||(orders=null==orders?[]:[orders]),baseOrderBy(collection,iteratees,orders))},lodash.over=over,lodash.overArgs=overArgs,lodash.overEvery=overEvery,lodash.overSome=overSome,lodash.partial=partial,lodash.partialRight=partialRight,lodash.partition=partition,lodash.pick=pick,lodash.pickBy=pickBy,lodash.property=property,lodash.propertyOf=function(object){return function(path){return null==object?undefined:baseGet(object,path)}},lodash.pull=pull,lodash.pullAll=pullAll,lodash.pullAllBy=function(array,values,iteratee){return array&&array.length&&values&&values.length?basePullAll(array,values,getIteratee(iteratee,2)):array},lodash.pullAllWith=function(array,values,comparator){return array&&array.length&&values&&values.length?basePullAll(array,values,undefined,comparator):array},lodash.pullAt=pullAt,lodash.range=range,lodash.rangeRight=rangeRight,lodash.rearg=rearg,lodash.reject=function(collection,predicate){return(isArray(collection)?arrayFilter:baseFilter)(collection,negate(getIteratee(predicate,3)))},lodash.remove=function(array,predicate){var result=[];if(!array||!array.length)return result;var index=-1,indexes=[],length=array.length;for(predicate=getIteratee(predicate,3);++index<length;){var value=array[index];predicate(value,index,array)&&(result.push(value),indexes.push(index))}return basePullAt(array,indexes),result},lodash.rest=function(func,start){if("function"!=typeof func)throw new TypeError(FUNC_ERROR_TEXT);return baseRest(func,start=start===undefined?start:toInteger(start))},lodash.reverse=reverse,lodash.sampleSize=function(collection,n,guard){return n=(guard?isIterateeCall(collection,n,guard):n===undefined)?1:toInteger(n),(isArray(collection)?arraySampleSize:baseSampleSize)(collection,n)},lodash.set=function(object,path,value){return null==object?object:baseSet(object,path,value)},lodash.setWith=function(object,path,value,customizer){return customizer="function"==typeof customizer?customizer:undefined,null==object?object:baseSet(object,path,value,customizer)},lodash.shuffle=function(collection){return(isArray(collection)?arrayShuffle:baseShuffle)(collection)},lodash.slice=function(array,start,end){var length=null==array?0:array.length;return length?(end=end&&"number"!=typeof end&&isIterateeCall(array,start,end)?(start=0,length):(start=null==start?0:toInteger(start),end===undefined?length:toInteger(end)),baseSlice(array,start,end)):[]},lodash.sortBy=sortBy,lodash.sortedUniq=function(array){return array&&array.length?baseSortedUniq(array):[]},lodash.sortedUniqBy=function(array,iteratee){return array&&array.length?baseSortedUniq(array,getIteratee(iteratee,2)):[]},lodash.split=function(string,separator,limit){return limit&&"number"!=typeof limit&&isIterateeCall(string,separator,limit)&&(separator=limit=undefined),(limit=limit===undefined?4294967295:limit>>>0)?(string=toString(string))&&("string"==typeof separator||null!=separator&&!isRegExp(separator))&&!(separator=baseToString(separator))&&hasUnicode(string)?castSlice(stringToArray(string),0,limit):string.split(separator,limit):[]},lodash.spread=function(func,start){if("function"!=typeof func)throw new TypeError(FUNC_ERROR_TEXT);return start=null==start?0:nativeMax(toInteger(start),0),baseRest(function(args){var array=args[start],otherArgs=castSlice(args,0,start);return array&&arrayPush(otherArgs,array),apply(func,this,otherArgs)})},lodash.tail=function(array){var length=null==array?0:array.length;return length?baseSlice(array,1,length):[]},lodash.take=function(array,n,guard){return array&&array.length?baseSlice(array,0,(n=guard||n===undefined?1:toInteger(n))<0?0:n):[]},lodash.takeRight=function(array,n,guard){var length=null==array?0:array.length;return length?baseSlice(array,(n=length-(n=guard||n===undefined?1:toInteger(n)))<0?0:n,length):[]},lodash.takeRightWhile=function(array,predicate){return array&&array.length?baseWhile(array,getIteratee(predicate,3),!1,!0):[]},lodash.takeWhile=function(array,predicate){return array&&array.length?baseWhile(array,getIteratee(predicate,3)):[]},lodash.tap=function(value,interceptor){return interceptor(value),value},lodash.throttle=function(func,wait,options){var leading=!0,trailing=!0;if("function"!=typeof func)throw new TypeError(FUNC_ERROR_TEXT);return isObject(options)&&(leading="leading"in options?!!options.leading:leading,trailing="trailing"in options?!!options.trailing:trailing),debounce(func,wait,{leading:leading,maxWait:wait,trailing:trailing})},lodash.thru=thru,lodash.toArray=toArray,lodash.toPairs=toPairs,lodash.toPairsIn=toPairsIn,lodash.toPath=function(value){return isArray(value)?arrayMap(value,toKey):isSymbol(value)?[value]:copyArray(stringToPath(toString(value)))},lodash.toPlainObject=toPlainObject,lodash.transform=function(object,iteratee,accumulator){var Ctor,isArr=isArray(object),isArrLike=isArr||isBuffer(object)||isTypedArray(object);return iteratee=getIteratee(iteratee,4),null==accumulator&&(Ctor=object&&object.constructor,accumulator=isArrLike?isArr?new Ctor:[]:isObject(object)&&isFunction(Ctor)?baseCreate(getPrototype(object)):{}),(isArrLike?arrayEach:baseForOwn)(object,function(value,index,object){return iteratee(accumulator,value,index,object)}),accumulator},lodash.unary=function(func){return ary(func,1)},lodash.union=union,lodash.unionBy=unionBy,lodash.unionWith=unionWith,lodash.uniq=function(array){return array&&array.length?baseUniq(array):[]},lodash.uniqBy=function(array,iteratee){return array&&array.length?baseUniq(array,getIteratee(iteratee,2)):[]},lodash.uniqWith=function(array,comparator){return comparator="function"==typeof comparator?comparator:undefined,array&&array.length?baseUniq(array,undefined,comparator):[]},lodash.unset=function(object,path){return null==object||baseUnset(object,path)},lodash.unzip=unzip,lodash.unzipWith=unzipWith,lodash.update=function(object,path,updater){return null==object?object:baseUpdate(object,path,castFunction(updater))},lodash.updateWith=function(object,path,updater,customizer){return customizer="function"==typeof customizer?customizer:undefined,null==object?object:baseUpdate(object,path,castFunction(updater),customizer)},lodash.values=values,lodash.valuesIn=function(object){return null==object?[]:baseValues(object,keysIn(object))},lodash.without=without,lodash.words=words,lodash.wrap=function(value,wrapper){return partial(castFunction(wrapper),value)},lodash.xor=xor,lodash.xorBy=xorBy,lodash.xorWith=xorWith,lodash.zip=zip,lodash.zipObject=function(props,values){return baseZipObject(props||[],values||[],assignValue)},lodash.zipObjectDeep=function(props,values){return baseZipObject(props||[],values||[],baseSet)},lodash.zipWith=zipWith,lodash.entries=toPairs,lodash.entriesIn=toPairsIn,lodash.extend=assignIn,lodash.extendWith=assignInWith,mixin(lodash,lodash),lodash.add=add,lodash.attempt=attempt,lodash.camelCase=camelCase,lodash.capitalize=capitalize,lodash.ceil=ceil,lodash.clamp=function(number,lower,upper){return upper===undefined&&(upper=lower,lower=undefined),upper!==undefined&&(upper=(upper=toNumber(upper))==upper?upper:0),lower!==undefined&&(lower=(lower=toNumber(lower))==lower?lower:0),baseClamp(toNumber(number),lower,upper)},lodash.clone=function(value){return baseClone(value,4)},lodash.cloneDeep=function(value){return baseClone(value,5)},lodash.cloneDeepWith=function(value,customizer){return baseClone(value,5,customizer="function"==typeof customizer?customizer:undefined)},lodash.cloneWith=function(value,customizer){return baseClone(value,4,customizer="function"==typeof customizer?customizer:undefined)},lodash.conformsTo=function(object,source){return null==source||baseConformsTo(object,source,keys(source))},lodash.deburr=deburr,lodash.defaultTo=function(value,defaultValue){return null==value||value!=value?defaultValue:value},lodash.divide=divide,lodash.endsWith=function(string,target,position){string=toString(string),target=baseToString(target);var length=string.length,end=position=position===undefined?length:baseClamp(toInteger(position),0,length);return 0<=(position-=target.length)&&string.slice(position,end)==target},lodash.eq=eq,lodash.escape=function(string){return(string=toString(string))&&reHasUnescapedHtml.test(string)?string.replace(reUnescapedHtml,escapeHtmlChar):string},lodash.escapeRegExp=function(string){return(string=toString(string))&&reHasRegExpChar.test(string)?string.replace(reRegExpChar,"\\$&"):string},lodash.every=function(collection,predicate,guard){var func=isArray(collection)?arrayEvery:baseEvery;return guard&&isIterateeCall(collection,predicate,guard)&&(predicate=undefined),func(collection,getIteratee(predicate,3))},lodash.find=find,lodash.findIndex=findIndex,lodash.findKey=function(object,predicate){return baseFindKey(object,getIteratee(predicate,3),baseForOwn)},lodash.findLast=findLast,lodash.findLastIndex=findLastIndex,lodash.findLastKey=function(object,predicate){return baseFindKey(object,getIteratee(predicate,3),baseForOwnRight)},lodash.floor=floor,lodash.forEach=forEach,lodash.forEachRight=forEachRight,lodash.forIn=function(object,iteratee){return null==object?object:baseFor(object,getIteratee(iteratee,3),keysIn)},lodash.forInRight=function(object,iteratee){return null==object?object:baseForRight(object,getIteratee(iteratee,3),keysIn)},lodash.forOwn=function(object,iteratee){return object&&baseForOwn(object,getIteratee(iteratee,3))},lodash.forOwnRight=function(object,iteratee){return object&&baseForOwnRight(object,getIteratee(iteratee,3))},lodash.get=get,lodash.gt=gt,lodash.gte=gte,lodash.has=function(object,path){return null!=object&&hasPath(object,path,baseHas)},lodash.hasIn=hasIn,lodash.head=head,lodash.identity=identity,lodash.includes=function(collection,value,fromIndex,guard){collection=isArrayLike(collection)?collection:values(collection),fromIndex=fromIndex&&!guard?toInteger(fromIndex):0;var length=collection.length;return fromIndex<0&&(fromIndex=nativeMax(length+fromIndex,0)),isString(collection)?fromIndex<=length&&-1<collection.indexOf(value,fromIndex):!!length&&-1<baseIndexOf(collection,value,fromIndex)},lodash.indexOf=function(array,value,fromIndex){var length=null==array?0:array.length;if(!length)return-1;var index=null==fromIndex?0:toInteger(fromIndex);return index<0&&(index=nativeMax(length+index,0)),baseIndexOf(array,value,index)},lodash.inRange=function(number,start,end){return start=toFinite(start),end===undefined?(end=start,start=0):end=toFinite(end),function(number,start,end){return number>=nativeMin(start,end)&&number<nativeMax(start,end)}(number=toNumber(number),start,end)},lodash.invoke=invoke,lodash.isArguments=isArguments,lodash.isArray=isArray,lodash.isArrayBuffer=isArrayBuffer,lodash.isArrayLike=isArrayLike,lodash.isArrayLikeObject=isArrayLikeObject,lodash.isBoolean=function(value){return!0===value||!1===value||isObjectLike(value)&&baseGetTag(value)==boolTag},lodash.isBuffer=isBuffer,lodash.isDate=isDate,lodash.isElement=function(value){return isObjectLike(value)&&1===value.nodeType&&!isPlainObject(value)},lodash.isEmpty=function(value){if(null==value)return!0;if(isArrayLike(value)&&(isArray(value)||"string"==typeof value||"function"==typeof value.splice||isBuffer(value)||isTypedArray(value)||isArguments(value)))return!value.length;var key,tag=getTag(value);if(tag==mapTag||tag==setTag)return!value.size;if(isPrototype(value))return!baseKeys(value).length;for(key in value)if(hasOwnProperty.call(value,key))return!1;return!0},lodash.isEqual=function(value,other){return baseIsEqual(value,other)},lodash.isEqualWith=function(value,other,customizer){var result=(customizer="function"==typeof customizer?customizer:undefined)?customizer(value,other):undefined;return result===undefined?baseIsEqual(value,other,undefined,customizer):!!result},lodash.isError=isError,lodash.isFinite=function(value){return"number"==typeof value&&nativeIsFinite(value)},lodash.isFunction=isFunction,lodash.isInteger=isInteger,lodash.isLength=isLength,lodash.isMap=isMap,lodash.isMatch=function(object,source){return object===source||baseIsMatch(object,source,getMatchData(source))},lodash.isMatchWith=function(object,source,customizer){return customizer="function"==typeof customizer?customizer:undefined,baseIsMatch(object,source,getMatchData(source),customizer)},lodash.isNaN=function(value){return isNumber(value)&&value!=+value},lodash.isNative=function(value){if(isMaskable(value))throw new Error("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return baseIsNative(value)},lodash.isNil=function(value){return null==value},lodash.isNull=function(value){return null===value},lodash.isNumber=isNumber,lodash.isObject=isObject,lodash.isObjectLike=isObjectLike,lodash.isPlainObject=isPlainObject,lodash.isRegExp=isRegExp,lodash.isSafeInteger=function(value){return isInteger(value)&&-9007199254740991<=value&&value<=9007199254740991},lodash.isSet=isSet,lodash.isString=isString,lodash.isSymbol=isSymbol,lodash.isTypedArray=isTypedArray,lodash.isUndefined=function(value){return value===undefined},lodash.isWeakMap=function(value){return isObjectLike(value)&&getTag(value)==weakMapTag},lodash.isWeakSet=function(value){return isObjectLike(value)&&"[object WeakSet]"==baseGetTag(value)},lodash.join=function(array,separator){return null==array?"":nativeJoin.call(array,separator)},lodash.kebabCase=kebabCase,lodash.last=last,lodash.lastIndexOf=function(array,value,fromIndex){var length=null==array?0:array.length;if(!length)return-1;var index=length;return fromIndex!==undefined&&(index=(index=toInteger(fromIndex))<0?nativeMax(length+index,0):nativeMin(index,length-1)),value==value?function(array,value,fromIndex){for(var index=fromIndex+1;index--;)if(array[index]===value)return index;return index}(array,value,index):baseFindIndex(array,baseIsNaN,index,!0)},lodash.lowerCase=lowerCase,lodash.lowerFirst=lowerFirst,lodash.lt=lt,lodash.lte=lte,lodash.max=function(array){return array&&array.length?baseExtremum(array,identity,baseGt):undefined},lodash.maxBy=function(array,iteratee){return array&&array.length?baseExtremum(array,getIteratee(iteratee,2),baseGt):undefined},lodash.mean=function(array){return baseMean(array,identity)},lodash.meanBy=function(array,iteratee){return baseMean(array,getIteratee(iteratee,2))},lodash.min=function(array){return array&&array.length?baseExtremum(array,identity,baseLt):undefined},lodash.minBy=function(array,iteratee){return array&&array.length?baseExtremum(array,getIteratee(iteratee,2),baseLt):undefined},lodash.stubArray=stubArray,lodash.stubFalse=stubFalse,lodash.stubObject=function(){return{}},lodash.stubString=function(){return""},lodash.stubTrue=function(){return!0},lodash.multiply=multiply,lodash.nth=function(array,n){return array&&array.length?baseNth(array,toInteger(n)):undefined},lodash.noConflict=function(){return root._===this&&(root._=oldDash),this},lodash.noop=noop,lodash.now=now,lodash.pad=function(string,length,chars){string=toString(string);var strLength=(length=toInteger(length))?stringSize(string):0;if(!length||length<=strLength)return string;var mid=(length-strLength)/2;return createPadding(nativeFloor(mid),chars)+string+createPadding(nativeCeil(mid),chars)},lodash.padEnd=function(string,length,chars){string=toString(string);var strLength=(length=toInteger(length))?stringSize(string):0;return length&&strLength<length?string+createPadding(length-strLength,chars):string},lodash.padStart=function(string,length,chars){string=toString(string);var strLength=(length=toInteger(length))?stringSize(string):0;return length&&strLength<length?createPadding(length-strLength,chars)+string:string},lodash.parseInt=function(string,radix,guard){return radix=guard||null==radix?0:radix&&+radix,nativeParseInt(toString(string).replace(reTrimStart,""),radix||0)},lodash.random=function(lower,upper,floating){var temp;if(floating&&"boolean"!=typeof floating&&isIterateeCall(lower,upper,floating)&&(upper=floating=undefined),floating===undefined&&("boolean"==typeof upper?(floating=upper,upper=undefined):"boolean"==typeof lower&&(floating=lower,lower=undefined)),lower===undefined&&upper===undefined?(lower=0,upper=1):(lower=toFinite(lower),upper===undefined?(upper=lower,lower=0):upper=toFinite(upper)),upper<lower&&(temp=lower,lower=upper,upper=temp),floating||lower%1||upper%1){var rand=nativeRandom();return nativeMin(lower+rand*(upper-lower+freeParseFloat("1e-"+((rand+"").length-1))),upper)}return baseRandom(lower,upper)},lodash.reduce=function(collection,iteratee,accumulator){var func=isArray(collection)?arrayReduce:baseReduce,initAccum=arguments.length<3;return func(collection,getIteratee(iteratee,4),accumulator,initAccum,baseEach)},lodash.reduceRight=function(collection,iteratee,accumulator){var func=isArray(collection)?arrayReduceRight:baseReduce,initAccum=arguments.length<3;return func(collection,getIteratee(iteratee,4),accumulator,initAccum,baseEachRight)},lodash.repeat=function(string,n,guard){return n=(guard?isIterateeCall(string,n,guard):n===undefined)?1:toInteger(n),baseRepeat(toString(string),n)},lodash.replace=function(){var args=arguments,string=toString(args[0]);return args.length<3?string:string.replace(args[1],args[2])},lodash.result=function(object,path,defaultValue){var index=-1,length=(path=castPath(path,object)).length;for(length||(length=1,object=undefined);++index<length;){var value=null==object?undefined:object[toKey(path[index])];value===undefined&&(index=length,value=defaultValue),object=isFunction(value)?value.call(object):value}return object},lodash.round=round,lodash.runInContext=runInContext,lodash.sample=function(collection){return(isArray(collection)?arraySample:baseSample)(collection)},lodash.size=function(collection){if(null==collection)return 0;if(isArrayLike(collection))return isString(collection)?stringSize(collection):collection.length;var tag=getTag(collection);return tag==mapTag||tag==setTag?collection.size:baseKeys(collection).length},lodash.snakeCase=snakeCase,lodash.some=function(collection,predicate,guard){var func=isArray(collection)?arraySome:baseSome;return guard&&isIterateeCall(collection,predicate,guard)&&(predicate=undefined),func(collection,getIteratee(predicate,3))},lodash.sortedIndex=function(array,value){return baseSortedIndex(array,value)},lodash.sortedIndexBy=function(array,value,iteratee){return baseSortedIndexBy(array,value,getIteratee(iteratee,2))},lodash.sortedIndexOf=function(array,value){var length=null==array?0:array.length;if(length){var index=baseSortedIndex(array,value);if(index<length&&eq(array[index],value))return index}return-1},lodash.sortedLastIndex=function(array,value){return baseSortedIndex(array,value,!0)},lodash.sortedLastIndexBy=function(array,value,iteratee){return baseSortedIndexBy(array,value,getIteratee(iteratee,2),!0)},lodash.sortedLastIndexOf=function(array,value){if(null==array?0:array.length){var index=baseSortedIndex(array,value,!0)-1;if(eq(array[index],value))return index}return-1},lodash.startCase=startCase,lodash.startsWith=function(string,target,position){return string=toString(string),position=null==position?0:baseClamp(toInteger(position),0,string.length),target=baseToString(target),string.slice(position,position+target.length)==target},lodash.subtract=subtract,lodash.sum=function(array){return array&&array.length?baseSum(array,identity):0},lodash.sumBy=function(array,iteratee){return array&&array.length?baseSum(array,getIteratee(iteratee,2)):0},lodash.template=function(string,options,guard){var settings=lodash.templateSettings;guard&&isIterateeCall(string,options,guard)&&(options=undefined),string=toString(string),options=assignInWith({},options,settings,customDefaultsAssignIn);var isEscaping,isEvaluating,imports=assignInWith({},options.imports,settings.imports,customDefaultsAssignIn),importsKeys=keys(imports),importsValues=baseValues(imports,importsKeys),index=0,interpolate=options.interpolate||reNoMatch,source="__p += '",reDelimiters=RegExp((options.escape||reNoMatch).source+"|"+interpolate.source+"|"+(interpolate===reInterpolate?reEsTemplate:reNoMatch).source+"|"+(options.evaluate||reNoMatch).source+"|$","g"),sourceURL="//# sourceURL="+("sourceURL"in options?options.sourceURL:"lodash.templateSources["+ ++templateCounter+"]")+"\n";string.replace(reDelimiters,function(match,escapeValue,interpolateValue,esTemplateValue,evaluateValue,offset){return interpolateValue=interpolateValue||esTemplateValue,source+=string.slice(index,offset).replace(reUnescapedString,escapeStringChar),escapeValue&&(isEscaping=!0,source+="' +\n__e("+escapeValue+") +\n'"),evaluateValue&&(isEvaluating=!0,source+="';\n"+evaluateValue+";\n__p += '"),interpolateValue&&(source+="' +\n((__t = ("+interpolateValue+")) == null ? '' : __t) +\n'"),index=offset+match.length,match}),source+="';\n";var variable=options.variable;variable||(source="with (obj) {\n"+source+"\n}\n"),source=(isEvaluating?source.replace(reEmptyStringLeading,""):source).replace(reEmptyStringMiddle,"$1").replace(reEmptyStringTrailing,"$1;"),source="function("+(variable||"obj")+") {\n"+(variable?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(isEscaping?", __e = _.escape":"")+(isEvaluating?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+source+"return __p\n}";var result=attempt(function(){return Function(importsKeys,sourceURL+"return "+source).apply(undefined,importsValues)});if(result.source=source,isError(result))throw result;return result},lodash.times=function(n,iteratee){if((n=toInteger(n))<1||9007199254740991<n)return[];var index=4294967295,length=nativeMin(n,4294967295);n-=4294967295;for(var result=baseTimes(length,iteratee=getIteratee(iteratee));++index<n;)iteratee(index);return result},lodash.toFinite=toFinite,lodash.toInteger=toInteger,lodash.toLength=toLength,lodash.toLower=function(value){return toString(value).toLowerCase()},lodash.toNumber=toNumber,lodash.toSafeInteger=function(value){return value?baseClamp(toInteger(value),-9007199254740991,9007199254740991):0===value?value:0},lodash.toString=toString,lodash.toUpper=function(value){return toString(value).toUpperCase()},lodash.trim=function(string,chars,guard){if((string=toString(string))&&(guard||chars===undefined))return string.replace(reTrim,"");if(!string||!(chars=baseToString(chars)))return string;var strSymbols=stringToArray(string),chrSymbols=stringToArray(chars);return castSlice(strSymbols,charsStartIndex(strSymbols,chrSymbols),charsEndIndex(strSymbols,chrSymbols)+1).join("")},lodash.trimEnd=function(string,chars,guard){if((string=toString(string))&&(guard||chars===undefined))return string.replace(reTrimEnd,"");if(!string||!(chars=baseToString(chars)))return string;var strSymbols=stringToArray(string);return castSlice(strSymbols,0,charsEndIndex(strSymbols,stringToArray(chars))+1).join("")},lodash.trimStart=function(string,chars,guard){if((string=toString(string))&&(guard||chars===undefined))return string.replace(reTrimStart,"");if(!string||!(chars=baseToString(chars)))return string;var strSymbols=stringToArray(string);return castSlice(strSymbols,charsStartIndex(strSymbols,stringToArray(chars))).join("")},lodash.truncate=function(string,options){var separator,length=30,omission="...";isObject(options)&&(separator="separator"in options?options.separator:separator,length="length"in options?toInteger(options.length):length,omission="omission"in options?baseToString(options.omission):omission);var strSymbols,strLength=(string=toString(string)).length;if(hasUnicode(string)&&(strLength=(strSymbols=stringToArray(string)).length),strLength<=length)return string;var end=length-stringSize(omission);if(end<1)return omission;var index,result=strSymbols?castSlice(strSymbols,0,end).join(""):string.slice(0,end);if(separator===undefined)return result+omission;if(strSymbols&&(end+=result.length-end),isRegExp(separator)){if(string.slice(end).search(separator)){var match,substring=result;for(separator.global||(separator=RegExp(separator.source,toString(reFlags.exec(separator))+"g")),separator.lastIndex=0;match=separator.exec(substring);)var newEnd=match.index;result=result.slice(0,newEnd===undefined?end:newEnd)}}else string.indexOf(baseToString(separator),end)==end||-1<(index=result.lastIndexOf(separator))&&(result=result.slice(0,index));return result+omission},lodash.unescape=function(string){return(string=toString(string))&&reHasEscapedHtml.test(string)?string.replace(reEscapedHtml,unescapeHtmlChar):string},lodash.uniqueId=function(prefix){var id=++idCounter;return toString(prefix)+id},lodash.upperCase=upperCase,lodash.upperFirst=upperFirst,lodash.each=forEach,lodash.eachRight=forEachRight,lodash.first=head,mixin(lodash,(source={},baseForOwn(lodash,function(func,methodName){hasOwnProperty.call(lodash.prototype,methodName)||(source[methodName]=func)}),source),{chain:!1}),lodash.VERSION="4.17.4",arrayEach(["bind","bindKey","curry","curryRight","partial","partialRight"],function(methodName){lodash[methodName].placeholder=lodash}),arrayEach(["drop","take"],function(methodName,index){LazyWrapper.prototype[methodName]=function(n){n=n===undefined?1:nativeMax(toInteger(n),0);var result=this.__filtered__&&!index?new LazyWrapper(this):this.clone();return result.__filtered__?result.__takeCount__=nativeMin(n,result.__takeCount__):result.__views__.push({size:nativeMin(n,4294967295),type:methodName+(result.__dir__<0?"Right":"")}),result},LazyWrapper.prototype[methodName+"Right"]=function(n){return this.reverse()[methodName](n).reverse()}}),arrayEach(["filter","map","takeWhile"],function(methodName,index){var type=index+1,isFilter=1==type||3==type;LazyWrapper.prototype[methodName]=function(iteratee){var result=this.clone();return result.__iteratees__.push({iteratee:getIteratee(iteratee,3),type:type}),result.__filtered__=result.__filtered__||isFilter,result}}),arrayEach(["head","last"],function(methodName,index){var takeName="take"+(index?"Right":"");LazyWrapper.prototype[methodName]=function(){return this[takeName](1).value()[0]}}),arrayEach(["initial","tail"],function(methodName,index){var dropName="drop"+(index?"":"Right");LazyWrapper.prototype[methodName]=function(){return this.__filtered__?new LazyWrapper(this):this[dropName](1)}}),LazyWrapper.prototype.compact=function(){return this.filter(identity)},LazyWrapper.prototype.find=function(predicate){return this.filter(predicate).head()},LazyWrapper.prototype.findLast=function(predicate){return this.reverse().find(predicate)},LazyWrapper.prototype.invokeMap=baseRest(function(path,args){return"function"==typeof path?new LazyWrapper(this):this.map(function(value){return baseInvoke(value,path,args)})}),LazyWrapper.prototype.reject=function(predicate){return this.filter(negate(getIteratee(predicate)))},LazyWrapper.prototype.slice=function(start,end){start=toInteger(start);var result=this;return result.__filtered__&&(0<start||end<0)?new LazyWrapper(result):(start<0?result=result.takeRight(-start):start&&(result=result.drop(start)),end!==undefined&&(result=(end=toInteger(end))<0?result.dropRight(-end):result.take(end-start)),result)},LazyWrapper.prototype.takeRightWhile=function(predicate){return this.reverse().takeWhile(predicate).reverse()},LazyWrapper.prototype.toArray=function(){return this.take(4294967295)},baseForOwn(LazyWrapper.prototype,function(func,methodName){var checkIteratee=/^(?:filter|find|map|reject)|While$/.test(methodName),isTaker=/^(?:head|last)$/.test(methodName),lodashFunc=lodash[isTaker?"take"+("last"==methodName?"Right":""):methodName],retUnwrapped=isTaker||/^find/.test(methodName);lodashFunc&&(lodash.prototype[methodName]=function(){function interceptor(value){var result=lodashFunc.apply(lodash,arrayPush([value],args));return isTaker&&chainAll?result[0]:result}var value=this.__wrapped__,args=isTaker?[1]:arguments,isLazy=value instanceof LazyWrapper,iteratee=args[0],useLazy=isLazy||isArray(value);useLazy&&checkIteratee&&"function"==typeof iteratee&&1!=iteratee.length&&(isLazy=useLazy=!1);var chainAll=this.__chain__,isHybrid=!!this.__actions__.length,isUnwrapped=retUnwrapped&&!chainAll,onlyLazy=isLazy&&!isHybrid;if(retUnwrapped||!useLazy)return isUnwrapped&&onlyLazy?func.apply(this,args):(result=this.thru(interceptor),isUnwrapped?isTaker?result.value()[0]:result.value():result);value=onlyLazy?value:new LazyWrapper(this);var result=func.apply(value,args);return result.__actions__.push({func:thru,args:[interceptor],thisArg:undefined}),new LodashWrapper(result,chainAll)})}),arrayEach(["pop","push","shift","sort","splice","unshift"],function(methodName){var func=arrayProto[methodName],chainName=/^(?:push|sort|unshift)$/.test(methodName)?"tap":"thru",retUnwrapped=/^(?:pop|shift)$/.test(methodName);lodash.prototype[methodName]=function(){var args=arguments;if(!retUnwrapped||this.__chain__)return this[chainName](function(value){return func.apply(isArray(value)?value:[],args)});var value=this.value();return func.apply(isArray(value)?value:[],args)}}),baseForOwn(LazyWrapper.prototype,function(func,methodName){var key,lodashFunc=lodash[methodName];lodashFunc&&(key=lodashFunc.name+"",(realNames[key]||(realNames[key]=[])).push({name:methodName,func:lodashFunc}))}),realNames[createHybrid(undefined,2).name]=[{name:"wrapper",func:undefined}],LazyWrapper.prototype.clone=function(){var result=new LazyWrapper(this.__wrapped__);return result.__actions__=copyArray(this.__actions__),result.__dir__=this.__dir__,result.__filtered__=this.__filtered__,result.__iteratees__=copyArray(this.__iteratees__),result.__takeCount__=this.__takeCount__,result.__views__=copyArray(this.__views__),result},LazyWrapper.prototype.reverse=function(){var result;return this.__filtered__?((result=new LazyWrapper(this)).__dir__=-1,result.__filtered__=!0):(result=this.clone()).__dir__*=-1,result},LazyWrapper.prototype.value=function(){var array=this.__wrapped__.value(),dir=this.__dir__,isArr=isArray(array),isRight=dir<0,arrLength=isArr?array.length:0,view=function(start,end,transforms){var index=-1,length=transforms.length;for(;++index<length;){var data=transforms[index],size=data.size;switch(data.type){case"drop":start+=size;break;case"dropRight":end-=size;break;case"take":end=nativeMin(end,start+size);break;case"takeRight":start=nativeMax(start,end-size)}}return{start:start,end:end}}(0,arrLength,this.__views__),start=view.start,end=view.end,length=end-start,index=isRight?end:start-1,iteratees=this.__iteratees__,iterLength=iteratees.length,resIndex=0,takeCount=nativeMin(length,this.__takeCount__);if(!isArr||!isRight&&arrLength==length&&takeCount==length)return baseWrapperValue(array,this.__actions__);var result=[];outer:for(;length--&&resIndex<takeCount;){for(var iterIndex=-1,value=array[index+=dir];++iterIndex<iterLength;){var data=iteratees[iterIndex],iteratee=data.iteratee,type=data.type,computed=iteratee(value);if(2==type)value=computed;else if(!computed){if(1==type)continue outer;break outer}}result[resIndex++]=value}return result},lodash.prototype.at=wrapperAt,lodash.prototype.chain=function(){return chain(this)},lodash.prototype.commit=function(){return new LodashWrapper(this.value(),this.__chain__)},lodash.prototype.next=function(){this.__values__===undefined&&(this.__values__=toArray(this.value()));var done=this.__index__>=this.__values__.length;return{done:done,value:done?undefined:this.__values__[this.__index__++]}},lodash.prototype.plant=function(value){for(var result,parent=this;parent instanceof baseLodash;){var clone=wrapperClone(parent);clone.__index__=0,clone.__values__=undefined,result?previous.__wrapped__=clone:result=clone;var previous=clone,parent=parent.__wrapped__}return previous.__wrapped__=value,result},lodash.prototype.reverse=function(){var value=this.__wrapped__;if(value instanceof LazyWrapper){var wrapped=value;return this.__actions__.length&&(wrapped=new LazyWrapper(this)),(wrapped=wrapped.reverse()).__actions__.push({func:thru,args:[reverse],thisArg:undefined}),new LodashWrapper(wrapped,this.__chain__)}return this.thru(reverse)},lodash.prototype.toJSON=lodash.prototype.valueOf=lodash.prototype.value=function(){return baseWrapperValue(this.__wrapped__,this.__actions__)},lodash.prototype.first=lodash.prototype.head,symIterator&&(lodash.prototype[symIterator]=function(){return this}),lodash}();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(root._=_,define(function(){return _})):freeModule?((freeModule.exports=_)._=_,freeExports._=_):root._=_}).call(this),function(global,factory){"object"==typeof module&&"object"==typeof module.exports?module.exports=global.document?factory(global,!0):function(w){if(!w.document)throw new Error("jQuery requires a window with a document");return factory(w)}:factory(global)}("undefined"!=typeof window?window:this,function(window,noGlobal){function fcamelCase(all,letter){return letter.toUpperCase()}var deletedIds=[],slice=deletedIds.slice,concat=deletedIds.concat,push=deletedIds.push,indexOf=deletedIds.indexOf,class2type={},toString=class2type.toString,hasOwn=class2type.hasOwnProperty,support={},jQuery=function(selector,context){return new jQuery.fn.init(selector,context)},rtrim=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,rmsPrefix=/^-ms-/,rdashAlpha=/-([\da-z])/gi;function isArraylike(obj){var length="length"in obj&&obj.length,type=jQuery.type(obj);return"function"!==type&&!jQuery.isWindow(obj)&&(!(1!==obj.nodeType||!length)||("array"===type||0===length||"number"==typeof length&&0<length&&length-1 in obj))}jQuery.fn=jQuery.prototype={jquery:"1.11.3",constructor:jQuery,selector:"",length:0,toArray:function(){return slice.call(this)},get:function(num){return null!=num?num<0?this[num+this.length]:this[num]:slice.call(this)},pushStack:function(elems){var ret=jQuery.merge(this.constructor(),elems);return ret.prevObject=this,ret.context=this.context,ret},each:function(callback,args){return jQuery.each(this,callback,args)},map:function(callback){return this.pushStack(jQuery.map(this,function(elem,i){return callback.call(elem,i,elem)}))},slice:function(){return this.pushStack(slice.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(i){var len=this.length,j=+i+(i<0?len:0);return this.pushStack(0<=j&&j<len?[this[j]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:push,sort:deletedIds.sort,splice:deletedIds.splice},jQuery.extend=jQuery.fn.extend=function(){var src,copyIsArray,copy,name,options,clone,target=arguments[0]||{},i=1,length=arguments.length,deep=!1;for("boolean"==typeof target&&(deep=target,target=arguments[i]||{},i++),"object"==typeof target||jQuery.isFunction(target)||(target={}),i===length&&(target=this,i--);i<length;i++)if(null!=(options=arguments[i]))for(name in options)src=target[name],target!==(copy=options[name])&&(deep&&copy&&(jQuery.isPlainObject(copy)||(copyIsArray=jQuery.isArray(copy)))?(clone=copyIsArray?(copyIsArray=!1,src&&jQuery.isArray(src)?src:[]):src&&jQuery.isPlainObject(src)?src:{},target[name]=jQuery.extend(deep,clone,copy)):void 0!==copy&&(target[name]=copy));return target},jQuery.extend({expando:"jQuery"+("1.11.3"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(msg){throw new Error(msg)},noop:function(){},isFunction:function(obj){return"function"===jQuery.type(obj)},isArray:Array.isArray||function(obj){return"array"===jQuery.type(obj)},isWindow:function(obj){return null!=obj&&obj==obj.window},isNumeric:function(obj){return!jQuery.isArray(obj)&&0<=obj-parseFloat(obj)+1},isEmptyObject:function(obj){for(var name in obj)return!1;return!0},isPlainObject:function(obj){if(!obj||"object"!==jQuery.type(obj)||obj.nodeType||jQuery.isWindow(obj))return!1;try{if(obj.constructor&&!hasOwn.call(obj,"constructor")&&!hasOwn.call(obj.constructor.prototype,"isPrototypeOf"))return!1}catch(e){return!1}if(support.ownLast)for(var key in obj)return hasOwn.call(obj,key);for(key in obj);return void 0===key||hasOwn.call(obj,key)},type:function(obj){return null==obj?obj+"":"object"==typeof obj||"function"==typeof obj?class2type[toString.call(obj)]||"object":typeof obj},globalEval:function(data){data&&jQuery.trim(data)&&(window.execScript||function(data){window.eval.call(window,data)})(data)},camelCase:function(string){return string.replace(rmsPrefix,"ms-").replace(rdashAlpha,fcamelCase)},nodeName:function(elem,name){return elem.nodeName&&elem.nodeName.toLowerCase()===name.toLowerCase()},each:function(obj,callback,args){var i=0,length=obj.length,isArray=isArraylike(obj);if(args){if(isArray)for(;i<length&&!1!==callback.apply(obj[i],args);i++);else for(i in obj)if(!1===callback.apply(obj[i],args))break}else if(isArray)for(;i<length&&!1!==callback.call(obj[i],i,obj[i]);i++);else for(i in obj)if(!1===callback.call(obj[i],i,obj[i]))break;return obj},trim:function(text){return null==text?"":(text+"").replace(rtrim,"")},makeArray:function(arr,results){var ret=results||[];return null!=arr&&(isArraylike(Object(arr))?jQuery.merge(ret,"string"==typeof arr?[arr]:arr):push.call(ret,arr)),ret},inArray:function(elem,arr,i){var len;if(arr){if(indexOf)return indexOf.call(arr,elem,i);for(len=arr.length,i=i?i<0?Math.max(0,len+i):i:0;i<len;i++)if(i in arr&&arr[i]===elem)return i}return-1},merge:function(first,second){for(var len=+second.length,j=0,i=first.length;j<len;)first[i++]=second[j++];if(len!=len)for(;void 0!==second[j];)first[i++]=second[j++];return first.length=i,first},grep:function(elems,callback,invert){for(var matches=[],i=0,length=elems.length,callbackExpect=!invert;i<length;i++)!callback(elems[i],i)!=callbackExpect&&matches.push(elems[i]);return matches},map:function(elems,callback,arg){var value,i=0,length=elems.length,ret=[];if(isArraylike(elems))for(;i<length;i++)null!=(value=callback(elems[i],i,arg))&&ret.push(value);else for(i in elems)null!=(value=callback(elems[i],i,arg))&&ret.push(value);return concat.apply([],ret)},guid:1,proxy:function(fn,context){var args,proxy,tmp;if("string"==typeof context&&(tmp=fn[context],context=fn,fn=tmp),jQuery.isFunction(fn))return args=slice.call(arguments,2),(proxy=function(){return fn.apply(context||this,args.concat(slice.call(arguments)))}).guid=fn.guid=fn.guid||jQuery.guid++,proxy},now:function(){return+new Date},support:support}),jQuery.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(i,name){class2type["[object "+name+"]"]=name.toLowerCase()});var Sizzle=function(window){function funescape(_,escaped,escapedWhitespace){var high="0x"+escaped-65536;return high!=high||escapedWhitespace?escaped:high<0?String.fromCharCode(65536+high):String.fromCharCode(high>>10|55296,1023&high|56320)}function unloadHandler(){setDocument()}var i,support,Expr,getText,isXML,tokenize,compile,select,outermostContext,sortInput,hasDuplicate,setDocument,document,docElem,documentIsHTML,rbuggyQSA,rbuggyMatches,matches,contains,expando="sizzle"+ +new Date,preferredDoc=window.document,dirruns=0,done=0,classCache=createCache(),tokenCache=createCache(),compilerCache=createCache(),sortOrder=function(a,b){return a===b&&(hasDuplicate=!0),0},hasOwn={}.hasOwnProperty,arr=[],pop=arr.pop,push_native=arr.push,push=arr.push,slice=arr.slice,indexOf=function(list,elem){for(var i=0,len=list.length;i<len;i++)if(list[i]===elem)return i;return-1},booleans="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",whitespace="[\\x20\\t\\r\\n\\f]",characterEncoding="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",identifier=characterEncoding.replace("w","w#"),attributes="\\["+whitespace+"*("+characterEncoding+")(?:"+whitespace+"*([*^$|!~]?=)"+whitespace+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+identifier+"))|)"+whitespace+"*\\]",pseudos=":("+characterEncoding+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+attributes+")*)|.*)\\)|)",rwhitespace=new RegExp(whitespace+"+","g"),rtrim=new RegExp("^"+whitespace+"+|((?:^|[^\\\\])(?:\\\\.)*)"+whitespace+"+$","g"),rcomma=new RegExp("^"+whitespace+"*,"+whitespace+"*"),rcombinators=new RegExp("^"+whitespace+"*([>+~]|"+whitespace+")"+whitespace+"*"),rattributeQuotes=new RegExp("="+whitespace+"*([^\\]'\"]*?)"+whitespace+"*\\]","g"),rpseudo=new RegExp(pseudos),ridentifier=new RegExp("^"+identifier+"$"),matchExpr={ID:new RegExp("^#("+characterEncoding+")"),CLASS:new RegExp("^\\.("+characterEncoding+")"),TAG:new RegExp("^("+characterEncoding.replace("w","w*")+")"),ATTR:new RegExp("^"+attributes),PSEUDO:new RegExp("^"+pseudos),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+whitespace+"*(even|odd|(([+-]|)(\\d*)n|)"+whitespace+"*(?:([+-]|)"+whitespace+"*(\\d+)|))"+whitespace+"*\\)|)","i"),bool:new RegExp("^(?:"+booleans+")$","i"),needsContext:new RegExp("^"+whitespace+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+whitespace+"*((?:-\\d)?\\d*)"+whitespace+"*\\)|)(?=[^-]|$)","i")},rinputs=/^(?:input|select|textarea|button)$/i,rheader=/^h\d$/i,rnative=/^[^{]+\{\s*\[native \w/,rquickExpr=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,rsibling=/[+~]/,rescape=/'|\\/g,runescape=new RegExp("\\\\([\\da-f]{1,6}"+whitespace+"?|("+whitespace+")|.)","ig");try{push.apply(arr=slice.call(preferredDoc.childNodes),preferredDoc.childNodes),arr[preferredDoc.childNodes.length].nodeType}catch(e){push={apply:arr.length?function(target,els){push_native.apply(target,slice.call(els))}:function(target,els){for(var j=target.length,i=0;target[j++]=els[i++];);target.length=j-1}}}function Sizzle(selector,context,results,seed){var match,elem,m,nodeType,i,groups,old,nid,newContext,newSelector;if((context?context.ownerDocument||context:preferredDoc)!==document&&setDocument(context),results=results||[],nodeType=(context=context||document).nodeType,"string"!=typeof selector||!selector||1!==nodeType&&9!==nodeType&&11!==nodeType)return results;if(!seed&&documentIsHTML){if(11!==nodeType&&(match=rquickExpr.exec(selector)))if(m=match[1]){if(9===nodeType){if(!(elem=context.getElementById(m))||!elem.parentNode)return results;if(elem.id===m)return results.push(elem),results}else if(context.ownerDocument&&(elem=context.ownerDocument.getElementById(m))&&contains(context,elem)&&elem.id===m)return results.push(elem),results}else{if(match[2])return push.apply(results,context.getElementsByTagName(selector)),results;if((m=match[3])&&support.getElementsByClassName)return push.apply(results,context.getElementsByClassName(m)),results}if(support.qsa&&(!rbuggyQSA||!rbuggyQSA.test(selector))){if(nid=old=expando,newContext=context,newSelector=1!==nodeType&&selector,1===nodeType&&"object"!==context.nodeName.toLowerCase()){for(groups=tokenize(selector),(old=context.getAttribute("id"))?nid=old.replace(rescape,"\\$&"):context.setAttribute("id",nid),nid="[id='"+nid+"'] ",i=groups.length;i--;)groups[i]=nid+toSelector(groups[i]);newContext=rsibling.test(selector)&&testContext(context.parentNode)||context,newSelector=groups.join(",")}if(newSelector)try{return push.apply(results,newContext.querySelectorAll(newSelector)),results}catch(qsaError){}finally{old||context.removeAttribute("id")}}}return select(selector.replace(rtrim,"$1"),context,results,seed)}function createCache(){var keys=[];function cache(key,value){return keys.push(key+" ")>Expr.cacheLength&&delete cache[keys.shift()],cache[key+" "]=value}return cache}function markFunction(fn){return fn[expando]=!0,fn}function assert(fn){var div=document.createElement("div");try{return!!fn(div)}catch(e){return!1}finally{div.parentNode&&div.parentNode.removeChild(div),div=null}}function addHandle(attrs,handler){for(var arr=attrs.split("|"),i=attrs.length;i--;)Expr.attrHandle[arr[i]]=handler}function siblingCheck(a,b){var cur=b&&a,diff=cur&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||1<<31)-(~a.sourceIndex||1<<31);if(diff)return diff;if(cur)for(;cur=cur.nextSibling;)if(cur===b)return-1;return a?1:-1}function createPositionalPseudo(fn){return markFunction(function(argument){return argument=+argument,markFunction(function(seed,matches){for(var j,matchIndexes=fn([],seed.length,argument),i=matchIndexes.length;i--;)seed[j=matchIndexes[i]]&&(seed[j]=!(matches[j]=seed[j]))})})}function testContext(context){return context&&void 0!==context.getElementsByTagName&&context}for(i in support=Sizzle.support={},isXML=Sizzle.isXML=function(elem){var documentElement=elem&&(elem.ownerDocument||elem).documentElement;return!!documentElement&&"HTML"!==documentElement.nodeName},setDocument=Sizzle.setDocument=function(node){var hasCompare,parent,doc=node?node.ownerDocument||node:preferredDoc;return doc!==document&&9===doc.nodeType&&doc.documentElement?(docElem=(document=doc).documentElement,(parent=doc.defaultView)&&parent!==parent.top&&(parent.addEventListener?parent.addEventListener("unload",unloadHandler,!1):parent.attachEvent&&parent.attachEvent("onunload",unloadHandler)),documentIsHTML=!isXML(doc),support.attributes=assert(function(div){return div.className="i",!div.getAttribute("className")}),support.getElementsByTagName=assert(function(div){return div.appendChild(doc.createComment("")),!div.getElementsByTagName("*").length}),support.getElementsByClassName=rnative.test(doc.getElementsByClassName),support.getById=assert(function(div){return docElem.appendChild(div).id=expando,!doc.getElementsByName||!doc.getElementsByName(expando).length}),support.getById?(Expr.find.ID=function(id,context){if(void 0!==context.getElementById&&documentIsHTML){var m=context.getElementById(id);return m&&m.parentNode?[m]:[]}},Expr.filter.ID=function(id){var attrId=id.replace(runescape,funescape);return function(elem){return elem.getAttribute("id")===attrId}}):(delete Expr.find.ID,Expr.filter.ID=function(id){var attrId=id.replace(runescape,funescape);return function(elem){var node=void 0!==elem.getAttributeNode&&elem.getAttributeNode("id");return node&&node.value===attrId}}),Expr.find.TAG=support.getElementsByTagName?function(tag,context){return void 0!==context.getElementsByTagName?context.getElementsByTagName(tag):support.qsa?context.querySelectorAll(tag):void 0}:function(tag,context){var elem,tmp=[],i=0,results=context.getElementsByTagName(tag);if("*"!==tag)return results;for(;elem=results[i++];)1===elem.nodeType&&tmp.push(elem);return tmp},Expr.find.CLASS=support.getElementsByClassName&&function(className,context){if(documentIsHTML)return context.getElementsByClassName(className)},rbuggyMatches=[],rbuggyQSA=[],(support.qsa=rnative.test(doc.querySelectorAll))&&(assert(function(div){docElem.appendChild(div).innerHTML="<a id='"+expando+"'></a><select id='"+expando+"-\f]' msallowcapture=''><option selected=''></option></select>",div.querySelectorAll("[msallowcapture^='']").length&&rbuggyQSA.push("[*^$]="+whitespace+"*(?:''|\"\")"),div.querySelectorAll("[selected]").length||rbuggyQSA.push("\\["+whitespace+"*(?:value|"+booleans+")"),div.querySelectorAll("[id~="+expando+"-]").length||rbuggyQSA.push("~="),div.querySelectorAll(":checked").length||rbuggyQSA.push(":checked"),div.querySelectorAll("a#"+expando+"+*").length||rbuggyQSA.push(".#.+[+~]")}),assert(function(div){var input=doc.createElement("input");input.setAttribute("type","hidden"),div.appendChild(input).setAttribute("name","D"),div.querySelectorAll("[name=d]").length&&rbuggyQSA.push("name"+whitespace+"*[*^$|!~]?="),div.querySelectorAll(":enabled").length||rbuggyQSA.push(":enabled",":disabled"),div.querySelectorAll("*,:x"),rbuggyQSA.push(",.*:")})),(support.matchesSelector=rnative.test(matches=docElem.matches||docElem.webkitMatchesSelector||docElem.mozMatchesSelector||docElem.oMatchesSelector||docElem.msMatchesSelector))&&assert(function(div){support.disconnectedMatch=matches.call(div,"div"),matches.call(div,"[s!='']:x"),rbuggyMatches.push("!=",pseudos)}),rbuggyQSA=rbuggyQSA.length&&new RegExp(rbuggyQSA.join("|")),rbuggyMatches=rbuggyMatches.length&&new RegExp(rbuggyMatches.join("|")),hasCompare=rnative.test(docElem.compareDocumentPosition),contains=hasCompare||rnative.test(docElem.contains)?function(a,b){var adown=9===a.nodeType?a.documentElement:a,bup=b&&b.parentNode;return a===bup||!(!bup||1!==bup.nodeType||!(adown.contains?adown.contains(bup):a.compareDocumentPosition&&16&a.compareDocumentPosition(bup)))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1},sortOrder=hasCompare?function(a,b){if(a===b)return hasDuplicate=!0,0;var compare=!a.compareDocumentPosition-!b.compareDocumentPosition;return compare||(1&(compare=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1)||!support.sortDetached&&b.compareDocumentPosition(a)===compare?a===doc||a.ownerDocument===preferredDoc&&contains(preferredDoc,a)?-1:b===doc||b.ownerDocument===preferredDoc&&contains(preferredDoc,b)?1:sortInput?indexOf(sortInput,a)-indexOf(sortInput,b):0:4&compare?-1:1)}:function(a,b){if(a===b)return hasDuplicate=!0,0;var cur,i=0,aup=a.parentNode,bup=b.parentNode,ap=[a],bp=[b];if(!aup||!bup)return a===doc?-1:b===doc?1:aup?-1:bup?1:sortInput?indexOf(sortInput,a)-indexOf(sortInput,b):0;if(aup===bup)return siblingCheck(a,b);for(cur=a;cur=cur.parentNode;)ap.unshift(cur);for(cur=b;cur=cur.parentNode;)bp.unshift(cur);for(;ap[i]===bp[i];)i++;return i?siblingCheck(ap[i],bp[i]):ap[i]===preferredDoc?-1:bp[i]===preferredDoc?1:0},doc):document},Sizzle.matches=function(expr,elements){return Sizzle(expr,null,null,elements)},Sizzle.matchesSelector=function(elem,expr){if((elem.ownerDocument||elem)!==document&&setDocument(elem),expr=expr.replace(rattributeQuotes,"='$1']"),support.matchesSelector&&documentIsHTML&&(!rbuggyMatches||!rbuggyMatches.test(expr))&&(!rbuggyQSA||!rbuggyQSA.test(expr)))try{var ret=matches.call(elem,expr);if(ret||support.disconnectedMatch||elem.document&&11!==elem.document.nodeType)return ret}catch(e){}return 0<Sizzle(expr,document,null,[elem]).length},Sizzle.contains=function(context,elem){return(context.ownerDocument||context)!==document&&setDocument(context),contains(context,elem)},Sizzle.attr=function(elem,name){(elem.ownerDocument||elem)!==document&&setDocument(elem);var fn=Expr.attrHandle[name.toLowerCase()],val=fn&&hasOwn.call(Expr.attrHandle,name.toLowerCase())?fn(elem,name,!documentIsHTML):void 0;return void 0!==val?val:support.attributes||!documentIsHTML?elem.getAttribute(name):(val=elem.getAttributeNode(name))&&val.specified?val.value:null},Sizzle.error=function(msg){throw new Error("Syntax error, unrecognized expression: "+msg)},Sizzle.uniqueSort=function(results){var elem,duplicates=[],j=0,i=0;if(hasDuplicate=!support.detectDuplicates,sortInput=!support.sortStable&&results.slice(0),results.sort(sortOrder),hasDuplicate){for(;elem=results[i++];)elem===results[i]&&(j=duplicates.push(i));for(;j--;)results.splice(duplicates[j],1)}return sortInput=null,results},getText=Sizzle.getText=function(elem){var node,ret="",i=0,nodeType=elem.nodeType;if(nodeType){if(1===nodeType||9===nodeType||11===nodeType){if("string"==typeof elem.textContent)return elem.textContent;for(elem=elem.firstChild;elem;elem=elem.nextSibling)ret+=getText(elem)}else if(3===nodeType||4===nodeType)return elem.nodeValue}else for(;node=elem[i++];)ret+=getText(node);return ret},(Expr=Sizzle.selectors={cacheLength:50,createPseudo:markFunction,match:matchExpr,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(match){return match[1]=match[1].replace(runescape,funescape),match[3]=(match[3]||match[4]||match[5]||"").replace(runescape,funescape),"~="===match[2]&&(match[3]=" "+match[3]+" "),match.slice(0,4)},CHILD:function(match){return match[1]=match[1].toLowerCase(),"nth"===match[1].slice(0,3)?(match[3]||Sizzle.error(match[0]),match[4]=+(match[4]?match[5]+(match[6]||1):2*("even"===match[3]||"odd"===match[3])),match[5]=+(match[7]+match[8]||"odd"===match[3])):match[3]&&Sizzle.error(match[0]),match},PSEUDO:function(match){var excess,unquoted=!match[6]&&match[2];return matchExpr.CHILD.test(match[0])?null:(match[3]?match[2]=match[4]||match[5]||"":unquoted&&rpseudo.test(unquoted)&&(excess=tokenize(unquoted,!0))&&(excess=unquoted.indexOf(")",unquoted.length-excess)-unquoted.length)&&(match[0]=match[0].slice(0,excess),match[2]=unquoted.slice(0,excess)),match.slice(0,3))}},filter:{TAG:function(nodeNameSelector){var nodeName=nodeNameSelector.replace(runescape,funescape).toLowerCase();return"*"===nodeNameSelector?function(){return!0}:function(elem){return elem.nodeName&&elem.nodeName.toLowerCase()===nodeName}},CLASS:function(className){var pattern=classCache[className+" "];return pattern||(pattern=new RegExp("(^|"+whitespace+")"+className+"("+whitespace+"|$)"))&&classCache(className,function(elem){return pattern.test("string"==typeof elem.className&&elem.className||void 0!==elem.getAttribute&&elem.getAttribute("class")||"")})},ATTR:function(name,operator,check){return function(elem){var result=Sizzle.attr(elem,name);return null==result?"!="===operator:!operator||(result+="","="===operator?result===check:"!="===operator?result!==check:"^="===operator?check&&0===result.indexOf(check):"*="===operator?check&&-1<result.indexOf(check):"$="===operator?check&&result.slice(-check.length)===check:"~="===operator?-1<(" "+result.replace(rwhitespace," ")+" ").indexOf(check):"|="===operator&&(result===check||result.slice(0,check.length+1)===check+"-"))}},CHILD:function(type,what,argument,first,last){var simple="nth"!==type.slice(0,3),forward="last"!==type.slice(-4),ofType="of-type"===what;return 1===first&&0===last?function(elem){return!!elem.parentNode}:function(elem,context,xml){var cache,outerCache,node,diff,nodeIndex,start,dir=simple!=forward?"nextSibling":"previousSibling",parent=elem.parentNode,name=ofType&&elem.nodeName.toLowerCase(),useCache=!xml&&!ofType;if(parent){if(simple){for(;dir;){for(node=elem;node=node[dir];)if(ofType?node.nodeName.toLowerCase()===name:1===node.nodeType)return!1;start=dir="only"===type&&!start&&"nextSibling"}return!0}if(start=[forward?parent.firstChild:parent.lastChild],forward&&useCache){for(nodeIndex=(cache=(outerCache=parent[expando]||(parent[expando]={}))[type]||[])[0]===dirruns&&cache[1],diff=cache[0]===dirruns&&cache[2],node=nodeIndex&&parent.childNodes[nodeIndex];node=++nodeIndex&&node&&node[dir]||(diff=nodeIndex=0)||start.pop();)if(1===node.nodeType&&++diff&&node===elem){outerCache[type]=[dirruns,nodeIndex,diff];break}}else if(useCache&&(cache=(elem[expando]||(elem[expando]={}))[type])&&cache[0]===dirruns)diff=cache[1];else for(;(node=++nodeIndex&&node&&node[dir]||(diff=nodeIndex=0)||start.pop())&&((ofType?node.nodeName.toLowerCase()!==name:1!==node.nodeType)||!++diff||(useCache&&((node[expando]||(node[expando]={}))[type]=[dirruns,diff]),node!==elem)););return(diff-=last)===first||diff%first==0&&0<=diff/first}}},PSEUDO:function(pseudo,argument){var args,fn=Expr.pseudos[pseudo]||Expr.setFilters[pseudo.toLowerCase()]||Sizzle.error("unsupported pseudo: "+pseudo);return fn[expando]?fn(argument):1<fn.length?(args=[pseudo,pseudo,"",argument],Expr.setFilters.hasOwnProperty(pseudo.toLowerCase())?markFunction(function(seed,matches){for(var idx,matched=fn(seed,argument),i=matched.length;i--;)seed[idx=indexOf(seed,matched[i])]=!(matches[idx]=matched[i])}):function(elem){return fn(elem,0,args)}):fn}},pseudos:{not:markFunction(function(selector){var input=[],results=[],matcher=compile(selector.replace(rtrim,"$1"));return matcher[expando]?markFunction(function(seed,matches,context,xml){for(var elem,unmatched=matcher(seed,null,xml,[]),i=seed.length;i--;)(elem=unmatched[i])&&(seed[i]=!(matches[i]=elem))}):function(elem,context,xml){return input[0]=elem,matcher(input,null,xml,results),input[0]=null,!results.pop()}}),has:markFunction(function(selector){return function(elem){return 0<Sizzle(selector,elem).length}}),contains:markFunction(function(text){return text=text.replace(runescape,funescape),function(elem){return-1<(elem.textContent||elem.innerText||getText(elem)).indexOf(text)}}),lang:markFunction(function(lang){return ridentifier.test(lang||"")||Sizzle.error("unsupported lang: "+lang),lang=lang.replace(runescape,funescape).toLowerCase(),function(elem){var elemLang;do{if(elemLang=documentIsHTML?elem.lang:elem.getAttribute("xml:lang")||elem.getAttribute("lang"))return(elemLang=elemLang.toLowerCase())===lang||0===elemLang.indexOf(lang+"-")}while((elem=elem.parentNode)&&1===elem.nodeType);return!1}}),target:function(elem){var hash=window.location&&window.location.hash;return hash&&hash.slice(1)===elem.id},root:function(elem){return elem===docElem},focus:function(elem){return elem===document.activeElement&&(!document.hasFocus||document.hasFocus())&&!!(elem.type||elem.href||~elem.tabIndex)},enabled:function(elem){return!1===elem.disabled},disabled:function(elem){return!0===elem.disabled},checked:function(elem){var nodeName=elem.nodeName.toLowerCase();return"input"===nodeName&&!!elem.checked||"option"===nodeName&&!!elem.selected},selected:function(elem){return elem.parentNode&&elem.parentNode.selectedIndex,!0===elem.selected},empty:function(elem){for(elem=elem.firstChild;elem;elem=elem.nextSibling)if(elem.nodeType<6)return!1;return!0},parent:function(elem){return!Expr.pseudos.empty(elem)},header:function(elem){return rheader.test(elem.nodeName)},input:function(elem){return rinputs.test(elem.nodeName)},button:function(elem){var name=elem.nodeName.toLowerCase();return"input"===name&&"button"===elem.type||"button"===name},text:function(elem){var attr;return"input"===elem.nodeName.toLowerCase()&&"text"===elem.type&&(null==(attr=elem.getAttribute("type"))||"text"===attr.toLowerCase())},first:createPositionalPseudo(function(){return[0]}),last:createPositionalPseudo(function(matchIndexes,length){return[length-1]}),eq:createPositionalPseudo(function(matchIndexes,length,argument){return[argument<0?argument+length:argument]}),even:createPositionalPseudo(function(matchIndexes,length){for(var i=0;i<length;i+=2)matchIndexes.push(i);return matchIndexes}),odd:createPositionalPseudo(function(matchIndexes,length){for(var i=1;i<length;i+=2)matchIndexes.push(i);return matchIndexes}),lt:createPositionalPseudo(function(matchIndexes,length,argument){for(var i=argument<0?argument+length:argument;0<=--i;)matchIndexes.push(i);return matchIndexes}),gt:createPositionalPseudo(function(matchIndexes,length,argument){for(var i=argument<0?argument+length:argument;++i<length;)matchIndexes.push(i);return matchIndexes})}}).pseudos.nth=Expr.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})Expr.pseudos[i]=function(type){return function(elem){return"input"===elem.nodeName.toLowerCase()&&elem.type===type}}(i);for(i in{submit:!0,reset:!0})Expr.pseudos[i]=function(type){return function(elem){var name=elem.nodeName.toLowerCase();return("input"===name||"button"===name)&&elem.type===type}}(i);function setFilters(){}function toSelector(tokens){for(var i=0,len=tokens.length,selector="";i<len;i++)selector+=tokens[i].value;return selector}function addCombinator(matcher,combinator,base){var dir=combinator.dir,checkNonElements=base&&"parentNode"===dir,doneName=done++;return combinator.first?function(elem,context,xml){for(;elem=elem[dir];)if(1===elem.nodeType||checkNonElements)return matcher(elem,context,xml)}:function(elem,context,xml){var oldCache,outerCache,newCache=[dirruns,doneName];if(xml){for(;elem=elem[dir];)if((1===elem.nodeType||checkNonElements)&&matcher(elem,context,xml))return!0}else for(;elem=elem[dir];)if(1===elem.nodeType||checkNonElements){if((oldCache=(outerCache=elem[expando]||(elem[expando]={}))[dir])&&oldCache[0]===dirruns&&oldCache[1]===doneName)return newCache[2]=oldCache[2];if((outerCache[dir]=newCache)[2]=matcher(elem,context,xml))return!0}}}function elementMatcher(matchers){return 1<matchers.length?function(elem,context,xml){for(var i=matchers.length;i--;)if(!matchers[i](elem,context,xml))return!1;return!0}:matchers[0]}function condense(unmatched,map,filter,context,xml){for(var elem,newUnmatched=[],i=0,len=unmatched.length,mapped=null!=map;i<len;i++)(elem=unmatched[i])&&(filter&&!filter(elem,context,xml)||(newUnmatched.push(elem),mapped&&map.push(i)));return newUnmatched}function setMatcher(preFilter,selector,matcher,postFilter,postFinder,postSelector){return postFilter&&!postFilter[expando]&&(postFilter=setMatcher(postFilter)),postFinder&&!postFinder[expando]&&(postFinder=setMatcher(postFinder,postSelector)),markFunction(function(seed,results,context,xml){var temp,i,elem,preMap=[],postMap=[],preexisting=results.length,elems=seed||function(selector,contexts,results){for(var i=0,len=contexts.length;i<len;i++)Sizzle(selector,contexts[i],results);return results}(selector||"*",context.nodeType?[context]:context,[]),matcherIn=!preFilter||!seed&&selector?elems:condense(elems,preMap,preFilter,context,xml),matcherOut=matcher?postFinder||(seed?preFilter:preexisting||postFilter)?[]:results:matcherIn;if(matcher&&matcher(matcherIn,matcherOut,context,xml),postFilter)for(temp=condense(matcherOut,postMap),postFilter(temp,[],context,xml),i=temp.length;i--;)(elem=temp[i])&&(matcherOut[postMap[i]]=!(matcherIn[postMap[i]]=elem));if(seed){if(postFinder||preFilter){if(postFinder){for(temp=[],i=matcherOut.length;i--;)(elem=matcherOut[i])&&temp.push(matcherIn[i]=elem);postFinder(null,matcherOut=[],temp,xml)}for(i=matcherOut.length;i--;)(elem=matcherOut[i])&&-1<(temp=postFinder?indexOf(seed,elem):preMap[i])&&(seed[temp]=!(results[temp]=elem))}}else matcherOut=condense(matcherOut===results?matcherOut.splice(preexisting,matcherOut.length):matcherOut),postFinder?postFinder(null,results,matcherOut,xml):push.apply(results,matcherOut)})}function matcherFromGroupMatchers(elementMatchers,setMatchers){function superMatcher(seed,context,xml,results,outermost){var elem,j,matcher,matchedCount=0,i="0",unmatched=seed&&[],setMatched=[],contextBackup=outermostContext,elems=seed||byElement&&Expr.find.TAG("*",outermost),dirrunsUnique=dirruns+=null==contextBackup?1:Math.random()||.1,len=elems.length;for(outermost&&(outermostContext=context!==document&&context);i!==len&&null!=(elem=elems[i]);i++){if(byElement&&elem){for(j=0;matcher=elementMatchers[j++];)if(matcher(elem,context,xml)){results.push(elem);break}outermost&&(dirruns=dirrunsUnique)}bySet&&((elem=!matcher&&elem)&&matchedCount--,seed&&unmatched.push(elem))}if(matchedCount+=i,bySet&&i!==matchedCount){for(j=0;matcher=setMatchers[j++];)matcher(unmatched,setMatched,context,xml);if(seed){if(0<matchedCount)for(;i--;)unmatched[i]||setMatched[i]||(setMatched[i]=pop.call(results));setMatched=condense(setMatched)}push.apply(results,setMatched),outermost&&!seed&&0<setMatched.length&&1<matchedCount+setMatchers.length&&Sizzle.uniqueSort(results)}return outermost&&(dirruns=dirrunsUnique,outermostContext=contextBackup),unmatched}var bySet=0<setMatchers.length,byElement=0<elementMatchers.length;return bySet?markFunction(superMatcher):superMatcher}return setFilters.prototype=Expr.filters=Expr.pseudos,Expr.setFilters=new setFilters,tokenize=Sizzle.tokenize=function(selector,parseOnly){var matched,match,tokens,type,soFar,groups,preFilters,cached=tokenCache[selector+" "];if(cached)return parseOnly?0:cached.slice(0);for(soFar=selector,groups=[],preFilters=Expr.preFilter;soFar;){for(type in matched&&!(match=rcomma.exec(soFar))||(match&&(soFar=soFar.slice(match[0].length)||soFar),groups.push(tokens=[])),matched=!1,(match=rcombinators.exec(soFar))&&(matched=match.shift(),tokens.push({value:matched,type:match[0].replace(rtrim," ")}),soFar=soFar.slice(matched.length)),Expr.filter)!(match=matchExpr[type].exec(soFar))||preFilters[type]&&!(match=preFilters[type](match))||(matched=match.shift(),tokens.push({value:matched,type:type,matches:match}),soFar=soFar.slice(matched.length));if(!matched)break}return parseOnly?soFar.length:soFar?Sizzle.error(selector):tokenCache(selector,groups).slice(0)},compile=Sizzle.compile=function(selector,match){var i,setMatchers=[],elementMatchers=[],cached=compilerCache[selector+" "];if(!cached){for(i=(match=match||tokenize(selector)).length;i--;)(cached=function matcherFromTokens(tokens){for(var checkContext,matcher,j,len=tokens.length,leadingRelative=Expr.relative[tokens[0].type],implicitRelative=leadingRelative||Expr.relative[" "],i=leadingRelative?1:0,matchContext=addCombinator(function(elem){return elem===checkContext},implicitRelative,!0),matchAnyContext=addCombinator(function(elem){return-1<indexOf(checkContext,elem)},implicitRelative,!0),matchers=[function(elem,context,xml){var ret=!leadingRelative&&(xml||context!==outermostContext)||((checkContext=context).nodeType?matchContext:matchAnyContext)(elem,context,xml);return checkContext=null,ret}];i<len;i++)if(matcher=Expr.relative[tokens[i].type])matchers=[addCombinator(elementMatcher(matchers),matcher)];else{if((matcher=Expr.filter[tokens[i].type].apply(null,tokens[i].matches))[expando]){for(j=++i;j<len&&!Expr.relative[tokens[j].type];j++);return setMatcher(1<i&&elementMatcher(matchers),1<i&&toSelector(tokens.slice(0,i-1).concat({value:" "===tokens[i-2].type?"*":""})).replace(rtrim,"$1"),matcher,i<j&&matcherFromTokens(tokens.slice(i,j)),j<len&&matcherFromTokens(tokens=tokens.slice(j)),j<len&&toSelector(tokens))}matchers.push(matcher)}return elementMatcher(matchers)}(match[i]))[expando]?setMatchers.push(cached):elementMatchers.push(cached);(cached=compilerCache(selector,matcherFromGroupMatchers(elementMatchers,setMatchers))).selector=selector}return cached},select=Sizzle.select=function(selector,context,results,seed){var i,tokens,token,type,find,compiled="function"==typeof selector&&selector,match=!seed&&tokenize(selector=compiled.selector||selector);if(results=results||[],1===match.length){if(2<(tokens=match[0]=match[0].slice(0)).length&&"ID"===(token=tokens[0]).type&&support.getById&&9===context.nodeType&&documentIsHTML&&Expr.relative[tokens[1].type]){if(!(context=(Expr.find.ID(token.matches[0].replace(runescape,funescape),context)||[])[0]))return results;compiled&&(context=context.parentNode),selector=selector.slice(tokens.shift().value.length)}for(i=matchExpr.needsContext.test(selector)?0:tokens.length;i--&&(token=tokens[i],!Expr.relative[type=token.type]);)if((find=Expr.find[type])&&(seed=find(token.matches[0].replace(runescape,funescape),rsibling.test(tokens[0].type)&&testContext(context.parentNode)||context))){if(tokens.splice(i,1),!(selector=seed.length&&toSelector(tokens)))return push.apply(results,seed),results;break}}return(compiled||compile(selector,match))(seed,context,!documentIsHTML,results,rsibling.test(selector)&&testContext(context.parentNode)||context),results},support.sortStable=expando.split("").sort(sortOrder).join("")===expando,support.detectDuplicates=!!hasDuplicate,setDocument(),support.sortDetached=assert(function(div1){return 1&div1.compareDocumentPosition(document.createElement("div"))}),assert(function(div){return div.innerHTML="<a href='#'></a>","#"===div.firstChild.getAttribute("href")})||addHandle("type|href|height|width",function(elem,name,isXML){if(!isXML)return elem.getAttribute(name,"type"===name.toLowerCase()?1:2)}),support.attributes&&assert(function(div){return div.innerHTML="<input/>",div.firstChild.setAttribute("value",""),""===div.firstChild.getAttribute("value")})||addHandle("value",function(elem,name,isXML){if(!isXML&&"input"===elem.nodeName.toLowerCase())return elem.defaultValue}),assert(function(div){return null==div.getAttribute("disabled")})||addHandle(booleans,function(elem,name,isXML){var val;if(!isXML)return!0===elem[name]?name.toLowerCase():(val=elem.getAttributeNode(name))&&val.specified?val.value:null}),Sizzle}(window);jQuery.find=Sizzle,jQuery.expr=Sizzle.selectors,jQuery.expr[":"]=jQuery.expr.pseudos,jQuery.unique=Sizzle.uniqueSort,jQuery.text=Sizzle.getText,jQuery.isXMLDoc=Sizzle.isXML,jQuery.contains=Sizzle.contains;var rneedsContext=jQuery.expr.match.needsContext,rsingleTag=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,risSimple=/^.[^:#\[\.,]*$/;function winnow(elements,qualifier,not){if(jQuery.isFunction(qualifier))return jQuery.grep(elements,function(elem,i){return!!qualifier.call(elem,i,elem)!==not});if(qualifier.nodeType)return jQuery.grep(elements,function(elem){return elem===qualifier!==not});if("string"==typeof qualifier){if(risSimple.test(qualifier))return jQuery.filter(qualifier,elements,not);qualifier=jQuery.filter(qualifier,elements)}return jQuery.grep(elements,function(elem){return 0<=jQuery.inArray(elem,qualifier)!==not})}jQuery.filter=function(expr,elems,not){var elem=elems[0];return not&&(expr=":not("+expr+")"),1===elems.length&&1===elem.nodeType?jQuery.find.matchesSelector(elem,expr)?[elem]:[]:jQuery.find.matches(expr,jQuery.grep(elems,function(elem){return 1===elem.nodeType}))},jQuery.fn.extend({find:function(selector){var i,ret=[],self=this,len=self.length;if("string"!=typeof selector)return this.pushStack(jQuery(selector).filter(function(){for(i=0;i<len;i++)if(jQuery.contains(self[i],this))return!0}));for(i=0;i<len;i++)jQuery.find(selector,self[i],ret);return(ret=this.pushStack(1<len?jQuery.unique(ret):ret)).selector=this.selector?this.selector+" "+selector:selector,ret},filter:function(selector){return this.pushStack(winnow(this,selector||[],!1))},not:function(selector){return this.pushStack(winnow(this,selector||[],!0))},is:function(selector){return!!winnow(this,"string"==typeof selector&&rneedsContext.test(selector)?jQuery(selector):selector||[],!1).length}});var rootjQuery,document=window.document,rquickExpr=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;(jQuery.fn.init=function(selector,context){var match,elem;if(!selector)return this;if("string"!=typeof selector)return selector.nodeType?(this.context=this[0]=selector,this.length=1,this):jQuery.isFunction(selector)?void 0!==rootjQuery.ready?rootjQuery.ready(selector):selector(jQuery):(void 0!==selector.selector&&(this.selector=selector.selector,this.context=selector.context),jQuery.makeArray(selector,this));if(!(match="<"===selector.charAt(0)&&">"===selector.charAt(selector.length-1)&&3<=selector.length?[null,selector,null]:rquickExpr.exec(selector))||!match[1]&&context)return!context||context.jquery?(context||rootjQuery).find(selector):this.constructor(context).find(selector);if(match[1]){if(context=context instanceof jQuery?context[0]:context,jQuery.merge(this,jQuery.parseHTML(match[1],context&&context.nodeType?context.ownerDocument||context:document,!0)),rsingleTag.test(match[1])&&jQuery.isPlainObject(context))for(match in context)jQuery.isFunction(this[match])?this[match](context[match]):this.attr(match,context[match]);return this}if((elem=document.getElementById(match[2]))&&elem.parentNode){if(elem.id!==match[2])return rootjQuery.find(selector);this.length=1,this[0]=elem}return this.context=document,this.selector=selector,this}).prototype=jQuery.fn,rootjQuery=jQuery(document);var rparentsprev=/^(?:parents|prev(?:Until|All))/,guaranteedUnique={children:!0,contents:!0,next:!0,prev:!0};function sibling(cur,dir){for(;(cur=cur[dir])&&1!==cur.nodeType;);return cur}jQuery.extend({dir:function(elem,dir,until){for(var matched=[],cur=elem[dir];cur&&9!==cur.nodeType&&(void 0===until||1!==cur.nodeType||!jQuery(cur).is(until));)1===cur.nodeType&&matched.push(cur),cur=cur[dir];return matched},sibling:function(n,elem){for(var r=[];n;n=n.nextSibling)1===n.nodeType&&n!==elem&&r.push(n);return r}}),jQuery.fn.extend({has:function(target){var i,targets=jQuery(target,this),len=targets.length;return this.filter(function(){for(i=0;i<len;i++)if(jQuery.contains(this,targets[i]))return!0})},closest:function(selectors,context){for(var cur,i=0,l=this.length,matched=[],pos=rneedsContext.test(selectors)||"string"!=typeof selectors?jQuery(selectors,context||this.context):0;i<l;i++)for(cur=this[i];cur&&cur!==context;cur=cur.parentNode)if(cur.nodeType<11&&(pos?-1<pos.index(cur):1===cur.nodeType&&jQuery.find.matchesSelector(cur,selectors))){matched.push(cur);break}return this.pushStack(1<matched.length?jQuery.unique(matched):matched)},index:function(elem){return elem?"string"==typeof elem?jQuery.inArray(this[0],jQuery(elem)):jQuery.inArray(elem.jquery?elem[0]:elem,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(selector,context){return this.pushStack(jQuery.unique(jQuery.merge(this.get(),jQuery(selector,context))))},addBack:function(selector){return this.add(null==selector?this.prevObject:this.prevObject.filter(selector))}}),jQuery.each({parent:function(elem){var parent=elem.parentNode;return parent&&11!==parent.nodeType?parent:null},parents:function(elem){return jQuery.dir(elem,"parentNode")},parentsUntil:function(elem,i,until){return jQuery.dir(elem,"parentNode",until)},next:function(elem){return sibling(elem,"nextSibling")},prev:function(elem){return sibling(elem,"previousSibling")},nextAll:function(elem){return jQuery.dir(elem,"nextSibling")},prevAll:function(elem){return jQuery.dir(elem,"previousSibling")},nextUntil:function(elem,i,until){return jQuery.dir(elem,"nextSibling",until)},prevUntil:function(elem,i,until){return jQuery.dir(elem,"previousSibling",until)},siblings:function(elem){return jQuery.sibling((elem.parentNode||{}).firstChild,elem)},children:function(elem){return jQuery.sibling(elem.firstChild)},contents:function(elem){return jQuery.nodeName(elem,"iframe")?elem.contentDocument||elem.contentWindow.document:jQuery.merge([],elem.childNodes)}},function(name,fn){jQuery.fn[name]=function(until,selector){var ret=jQuery.map(this,fn,until);return"Until"!==name.slice(-5)&&(selector=until),selector&&"string"==typeof selector&&(ret=jQuery.filter(selector,ret)),1<this.length&&(guaranteedUnique[name]||(ret=jQuery.unique(ret)),rparentsprev.test(name)&&(ret=ret.reverse())),this.pushStack(ret)}});var readyList,rnotwhite=/\S+/g,optionsCache={};function detach(){document.addEventListener?(document.removeEventListener("DOMContentLoaded",completed,!1),window.removeEventListener("load",completed,!1)):(document.detachEvent("onreadystatechange",completed),window.detachEvent("onload",completed))}function completed(){!document.addEventListener&&"load"!==event.type&&"complete"!==document.readyState||(detach(),jQuery.ready())}jQuery.Callbacks=function(options){options="string"==typeof options?optionsCache[options]||function(options){var object=optionsCache[options]={};return jQuery.each(options.match(rnotwhite)||[],function(_,flag){object[flag]=!0}),object}(options):jQuery.extend({},options);var firing,memory,fired,firingLength,firingIndex,firingStart,list=[],stack=!options.once&&[],fire=function(data){for(memory=options.memory&&data,fired=!0,firingIndex=firingStart||0,firingStart=0,firingLength=list.length,firing=!0;list&&firingIndex<firingLength;firingIndex++)if(!1===list[firingIndex].apply(data[0],data[1])&&options.stopOnFalse){memory=!1;break}firing=!1,list&&(stack?stack.length&&fire(stack.shift()):memory?list=[]:self.disable())},self={add:function(){var start;return list&&(start=list.length,function add(args){jQuery.each(args,function(_,arg){var type=jQuery.type(arg);"function"===type?options.unique&&self.has(arg)||list.push(arg):arg&&arg.length&&"string"!==type&&add(arg)})}(arguments),firing?firingLength=list.length:memory&&(firingStart=start,fire(memory))),this},remove:function(){return list&&jQuery.each(arguments,function(_,arg){for(var index;-1<(index=jQuery.inArray(arg,list,index));)list.splice(index,1),firing&&(index<=firingLength&&firingLength--,index<=firingIndex&&firingIndex--)}),this},has:function(fn){return fn?-1<jQuery.inArray(fn,list):!(!list||!list.length)},empty:function(){return list=[],firingLength=0,this},disable:function(){return list=stack=memory=void 0,this},disabled:function(){return!list},lock:function(){return stack=void 0,memory||self.disable(),this},locked:function(){return!stack},fireWith:function(context,args){return!list||fired&&!stack||(args=[context,(args=args||[]).slice?args.slice():args],firing?stack.push(args):fire(args)),this},fire:function(){return self.fireWith(this,arguments),this},fired:function(){return!!fired}};return self},jQuery.extend({Deferred:function(func){var tuples=[["resolve","done",jQuery.Callbacks("once memory"),"resolved"],["reject","fail",jQuery.Callbacks("once memory"),"rejected"],["notify","progress",jQuery.Callbacks("memory")]],state="pending",promise={state:function(){return state},always:function(){return deferred.done(arguments).fail(arguments),this},then:function(){var fns=arguments;return jQuery.Deferred(function(newDefer){jQuery.each(tuples,function(i,tuple){var fn=jQuery.isFunction(fns[i])&&fns[i];deferred[tuple[1]](function(){var returned=fn&&fn.apply(this,arguments);returned&&jQuery.isFunction(returned.promise)?returned.promise().done(newDefer.resolve).fail(newDefer.reject).progress(newDefer.notify):newDefer[tuple[0]+"With"](this===promise?newDefer.promise():this,fn?[returned]:arguments)})}),fns=null}).promise()},promise:function(obj){return null!=obj?jQuery.extend(obj,promise):promise}},deferred={};return promise.pipe=promise.then,jQuery.each(tuples,function(i,tuple){var list=tuple[2],stateString=tuple[3];promise[tuple[1]]=list.add,stateString&&list.add(function(){state=stateString},tuples[1^i][2].disable,tuples[2][2].lock),deferred[tuple[0]]=function(){return deferred[tuple[0]+"With"](this===deferred?promise:this,arguments),this},deferred[tuple[0]+"With"]=list.fireWith}),promise.promise(deferred),func&&func.call(deferred,deferred),deferred},when:function(subordinate){function updateFunc(i,contexts,values){return function(value){contexts[i]=this,values[i]=1<arguments.length?slice.call(arguments):value,values===progressValues?deferred.notifyWith(contexts,values):--remaining||deferred.resolveWith(contexts,values)}}var progressValues,progressContexts,resolveContexts,i=0,resolveValues=slice.call(arguments),length=resolveValues.length,remaining=1!==length||subordinate&&jQuery.isFunction(subordinate.promise)?length:0,deferred=1===remaining?subordinate:jQuery.Deferred();if(1<length)for(progressValues=new Array(length),progressContexts=new Array(length),resolveContexts=new Array(length);i<length;i++)resolveValues[i]&&jQuery.isFunction(resolveValues[i].promise)?resolveValues[i].promise().done(updateFunc(i,resolveContexts,resolveValues)).fail(deferred.reject).progress(updateFunc(i,progressContexts,progressValues)):--remaining;return remaining||deferred.resolveWith(resolveContexts,resolveValues),deferred.promise()}}),jQuery.fn.ready=function(fn){return jQuery.ready.promise().done(fn),this},jQuery.extend({isReady:!1,readyWait:1,holdReady:function(hold){hold?jQuery.readyWait++:jQuery.ready(!0)},ready:function(wait){if(!0===wait?!--jQuery.readyWait:!jQuery.isReady){if(!document.body)return setTimeout(jQuery.ready);(jQuery.isReady=!0)!==wait&&0<--jQuery.readyWait||(readyList.resolveWith(document,[jQuery]),jQuery.fn.triggerHandler&&(jQuery(document).triggerHandler("ready"),jQuery(document).off("ready")))}}}),jQuery.ready.promise=function(obj){if(!readyList)if(readyList=jQuery.Deferred(),"complete"===document.readyState)setTimeout(jQuery.ready);else if(document.addEventListener)document.addEventListener("DOMContentLoaded",completed,!1),window.addEventListener("load",completed,!1);else{document.attachEvent("onreadystatechange",completed),window.attachEvent("onload",completed);var top=!1;try{top=null==window.frameElement&&document.documentElement}catch(e){}top&&top.doScroll&&!function doScrollCheck(){if(!jQuery.isReady){try{top.doScroll("left")}catch(e){return setTimeout(doScrollCheck,50)}detach(),jQuery.ready()}}()}return readyList.promise(obj)};var i,strundefined="undefined";for(i in jQuery(support))break;support.ownLast="0"!==i,support.inlineBlockNeedsLayout=!1,jQuery(function(){var val,div,container,body=document.getElementsByTagName("body")[0];body&&body.style&&(div=document.createElement("div"),(container=document.createElement("div")).style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",body.appendChild(container).appendChild(div),typeof div.style.zoom!==strundefined&&(div.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",support.inlineBlockNeedsLayout=val=3===div.offsetWidth,val&&(body.style.zoom=1)),body.removeChild(container))}),function(){var div=document.createElement("div");if(null==support.deleteExpando){support.deleteExpando=!0;try{delete div.test}catch(e){support.deleteExpando=!1}}div=null}(),jQuery.acceptData=function(elem){var noData=jQuery.noData[(elem.nodeName+" ").toLowerCase()],nodeType=+elem.nodeType||1;return(1===nodeType||9===nodeType)&&(!noData||!0!==noData&&elem.getAttribute("classid")===noData)};var rbrace=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,rmultiDash=/([A-Z])/g;function dataAttr(elem,key,data){if(void 0===data&&1===elem.nodeType){var name="data-"+key.replace(rmultiDash,"-$1").toLowerCase();if("string"==typeof(data=elem.getAttribute(name))){try{data="true"===data||"false"!==data&&("null"===data?null:+data+""===data?+data:rbrace.test(data)?jQuery.parseJSON(data):data)}catch(e){}jQuery.data(elem,key,data)}else data=void 0}return data}function isEmptyDataObject(obj){for(var name in obj)if(("data"!==name||!jQuery.isEmptyObject(obj[name]))&&"toJSON"!==name)return;return 1}function internalData(elem,name,data,pvt){if(jQuery.acceptData(elem)){var ret,thisCache,internalKey=jQuery.expando,isNode=elem.nodeType,cache=isNode?jQuery.cache:elem,id=isNode?elem[internalKey]:elem[internalKey]&&internalKey;if(id&&cache[id]&&(pvt||cache[id].data)||void 0!==data||"string"!=typeof name)return cache[id=id||(isNode?elem[internalKey]=deletedIds.pop()||jQuery.guid++:internalKey)]||(cache[id]=isNode?{}:{toJSON:jQuery.noop}),"object"!=typeof name&&"function"!=typeof name||(pvt?cache[id]=jQuery.extend(cache[id],name):cache[id].data=jQuery.extend(cache[id].data,name)),thisCache=cache[id],pvt||(thisCache.data||(thisCache.data={}),thisCache=thisCache.data),void 0!==data&&(thisCache[jQuery.camelCase(name)]=data),"string"==typeof name?null==(ret=thisCache[name])&&(ret=thisCache[jQuery.camelCase(name)]):ret=thisCache,ret}}function internalRemoveData(elem,name,pvt){if(jQuery.acceptData(elem)){var thisCache,i,isNode=elem.nodeType,cache=isNode?jQuery.cache:elem,id=isNode?elem[jQuery.expando]:jQuery.expando;if(cache[id]){if(name&&(thisCache=pvt?cache[id]:cache[id].data)){i=(name=jQuery.isArray(name)?name.concat(jQuery.map(name,jQuery.camelCase)):name in thisCache||(name=jQuery.camelCase(name))in thisCache?[name]:name.split(" ")).length;for(;i--;)delete thisCache[name[i]];if(pvt?!isEmptyDataObject(thisCache):!jQuery.isEmptyObject(thisCache))return}(pvt||(delete cache[id].data,isEmptyDataObject(cache[id])))&&(isNode?jQuery.cleanData([elem],!0):support.deleteExpando||cache!=cache.window?delete cache[id]:cache[id]=null)}}}jQuery.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(elem){return!!(elem=elem.nodeType?jQuery.cache[elem[jQuery.expando]]:elem[jQuery.expando])&&!isEmptyDataObject(elem)},data:function(elem,name,data){return internalData(elem,name,data)},removeData:function(elem,name){return internalRemoveData(elem,name)},_data:function(elem,name,data){return internalData(elem,name,data,!0)},_removeData:function(elem,name){return internalRemoveData(elem,name,!0)}}),jQuery.fn.extend({data:function(key,value){var i,name,data,elem=this[0],attrs=elem&&elem.attributes;if(void 0!==key)return"object"==typeof key?this.each(function(){jQuery.data(this,key)}):1<arguments.length?this.each(function(){jQuery.data(this,key,value)}):elem?dataAttr(elem,key,jQuery.data(elem,key)):void 0;if(this.length&&(data=jQuery.data(elem),1===elem.nodeType&&!jQuery._data(elem,"parsedAttrs"))){for(i=attrs.length;i--;)attrs[i]&&0===(name=attrs[i].name).indexOf("data-")&&dataAttr(elem,name=jQuery.camelCase(name.slice(5)),data[name]);jQuery._data(elem,"parsedAttrs",!0)}return data},removeData:function(key){return this.each(function(){jQuery.removeData(this,key)})}}),jQuery.extend({queue:function(elem,type,data){var queue;if(elem)return type=(type||"fx")+"queue",queue=jQuery._data(elem,type),data&&(!queue||jQuery.isArray(data)?queue=jQuery._data(elem,type,jQuery.makeArray(data)):queue.push(data)),queue||[]},dequeue:function(elem,type){type=type||"fx";var queue=jQuery.queue(elem,type),startLength=queue.length,fn=queue.shift(),hooks=jQuery._queueHooks(elem,type);"inprogress"===fn&&(fn=queue.shift(),startLength--),fn&&("fx"===type&&queue.unshift("inprogress"),delete hooks.stop,fn.call(elem,function(){jQuery.dequeue(elem,type)},hooks)),!startLength&&hooks&&hooks.empty.fire()},_queueHooks:function(elem,type){var key=type+"queueHooks";return jQuery._data(elem,key)||jQuery._data(elem,key,{empty:jQuery.Callbacks("once memory").add(function(){jQuery._removeData(elem,type+"queue"),jQuery._removeData(elem,key)})})}}),jQuery.fn.extend({queue:function(type,data){var setter=2;return"string"!=typeof type&&(data=type,type="fx",setter--),arguments.length<setter?jQuery.queue(this[0],type):void 0===data?this:this.each(function(){var queue=jQuery.queue(this,type,data);jQuery._queueHooks(this,type),"fx"===type&&"inprogress"!==queue[0]&&jQuery.dequeue(this,type)})},dequeue:function(type){return this.each(function(){jQuery.dequeue(this,type)})},clearQueue:function(type){return this.queue(type||"fx",[])},promise:function(type,obj){function resolve(){--count||defer.resolveWith(elements,[elements])}var tmp,count=1,defer=jQuery.Deferred(),elements=this,i=this.length;for("string"!=typeof type&&(obj=type,type=void 0),type=type||"fx";i--;)(tmp=jQuery._data(elements[i],type+"queueHooks"))&&tmp.empty&&(count++,tmp.empty.add(resolve));return resolve(),defer.promise(obj)}});function isHidden(elem,el){return elem=el||elem,"none"===jQuery.css(elem,"display")||!jQuery.contains(elem.ownerDocument,elem)}var pnum=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,cssExpand=["Top","Right","Bottom","Left"],access=jQuery.access=function(elems,fn,key,value,chainable,emptyGet,raw){var i=0,length=elems.length,bulk=null==key;if("object"===jQuery.type(key))for(i in chainable=!0,key)jQuery.access(elems,fn,i,key[i],!0,emptyGet,raw);else if(void 0!==value&&(chainable=!0,jQuery.isFunction(value)||(raw=!0),bulk&&(fn=raw?(fn.call(elems,value),null):(bulk=fn,function(elem,key,value){return bulk.call(jQuery(elem),value)})),fn))for(;i<length;i++)fn(elems[i],key,raw?value:value.call(elems[i],i,fn(elems[i],key)));return chainable?elems:bulk?fn.call(elems):length?fn(elems[0],key):emptyGet},rcheckableType=/^(?:checkbox|radio)$/i;!function(){var input=document.createElement("input"),div=document.createElement("div"),fragment=document.createDocumentFragment();if(div.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",support.leadingWhitespace=3===div.firstChild.nodeType,support.tbody=!div.getElementsByTagName("tbody").length,support.htmlSerialize=!!div.getElementsByTagName("link").length,support.html5Clone="<:nav></:nav>"!==document.createElement("nav").cloneNode(!0).outerHTML,input.type="checkbox",input.checked=!0,fragment.appendChild(input),support.appendChecked=input.checked,div.innerHTML="<textarea>x</textarea>",support.noCloneChecked=!!div.cloneNode(!0).lastChild.defaultValue,fragment.appendChild(div),div.innerHTML="<input type='radio' checked='checked' name='t'/>",support.checkClone=div.cloneNode(!0).cloneNode(!0).lastChild.checked,support.noCloneEvent=!0,div.attachEvent&&(div.attachEvent("onclick",function(){support.noCloneEvent=!1}),div.cloneNode(!0).click()),null==support.deleteExpando){support.deleteExpando=!0;try{delete div.test}catch(e){support.deleteExpando=!1}}}(),function(){var i,eventName,div=document.createElement("div");for(i in{submit:!0,change:!0,focusin:!0})eventName="on"+i,(support[i+"Bubbles"]=eventName in window)||(div.setAttribute(eventName,"t"),support[i+"Bubbles"]=!1===div.attributes[eventName].expando);div=null}();var rformElems=/^(?:input|select|textarea)$/i,rkeyEvent=/^key/,rmouseEvent=/^(?:mouse|pointer|contextmenu)|click/,rfocusMorph=/^(?:focusinfocus|focusoutblur)$/,rtypenamespace=/^([^.]*)(?:\.(.+)|)$/;function returnTrue(){return!0}function returnFalse(){return!1}function safeActiveElement(){try{return document.activeElement}catch(err){}}function createSafeFragment(document){var list=nodeNames.split("|"),safeFrag=document.createDocumentFragment();if(safeFrag.createElement)for(;list.length;)safeFrag.createElement(list.pop());return safeFrag}jQuery.event={global:{},add:function(elem,types,handler,data,selector){var tmp,events,t,handleObjIn,special,eventHandle,handleObj,handlers,type,namespaces,origType,elemData=jQuery._data(elem);if(elemData){for(handler.handler&&(handler=(handleObjIn=handler).handler,selector=handleObjIn.selector),handler.guid||(handler.guid=jQuery.guid++),(events=elemData.events)||(events=elemData.events={}),(eventHandle=elemData.handle)||((eventHandle=elemData.handle=function(e){return typeof jQuery===strundefined||e&&jQuery.event.triggered===e.type?void 0:jQuery.event.dispatch.apply(eventHandle.elem,arguments)}).elem=elem),t=(types=(types||"").match(rnotwhite)||[""]).length;t--;)type=origType=(tmp=rtypenamespace.exec(types[t])||[])[1],namespaces=(tmp[2]||"").split(".").sort(),type&&(special=jQuery.event.special[type]||{},type=(selector?special.delegateType:special.bindType)||type,special=jQuery.event.special[type]||{},handleObj=jQuery.extend({type:type,origType:origType,data:data,handler:handler,guid:handler.guid,selector:selector,needsContext:selector&&jQuery.expr.match.needsContext.test(selector),namespace:namespaces.join(".")},handleObjIn),(handlers=events[type])||((handlers=events[type]=[]).delegateCount=0,special.setup&&!1!==special.setup.call(elem,data,namespaces,eventHandle)||(elem.addEventListener?elem.addEventListener(type,eventHandle,!1):elem.attachEvent&&elem.attachEvent("on"+type,eventHandle))),special.add&&(special.add.call(elem,handleObj),handleObj.handler.guid||(handleObj.handler.guid=handler.guid)),selector?handlers.splice(handlers.delegateCount++,0,handleObj):handlers.push(handleObj),jQuery.event.global[type]=!0);elem=null}},remove:function(elem,types,handler,selector,mappedTypes){var j,handleObj,tmp,origCount,t,events,special,handlers,type,namespaces,origType,elemData=jQuery.hasData(elem)&&jQuery._data(elem);if(elemData&&(events=elemData.events)){for(t=(types=(types||"").match(rnotwhite)||[""]).length;t--;)if(type=origType=(tmp=rtypenamespace.exec(types[t])||[])[1],namespaces=(tmp[2]||"").split(".").sort(),type){for(special=jQuery.event.special[type]||{},handlers=events[type=(selector?special.delegateType:special.bindType)||type]||[],tmp=tmp[2]&&new RegExp("(^|\\.)"+namespaces.join("\\.(?:.*\\.|)")+"(\\.|$)"),origCount=j=handlers.length;j--;)handleObj=handlers[j],!mappedTypes&&origType!==handleObj.origType||handler&&handler.guid!==handleObj.guid||tmp&&!tmp.test(handleObj.namespace)||selector&&selector!==handleObj.selector&&("**"!==selector||!handleObj.selector)||(handlers.splice(j,1),handleObj.selector&&handlers.delegateCount--,special.remove&&special.remove.call(elem,handleObj));origCount&&!handlers.length&&(special.teardown&&!1!==special.teardown.call(elem,namespaces,elemData.handle)||jQuery.removeEvent(elem,type,elemData.handle),delete events[type])}else for(type in events)jQuery.event.remove(elem,type+types[t],handler,selector,!0);jQuery.isEmptyObject(events)&&(delete elemData.handle,jQuery._removeData(elem,"events"))}},trigger:function(event,data,elem,onlyHandlers){var handle,ontype,bubbleType,special,tmp,i,eventPath=[elem||document],type=hasOwn.call(event,"type")?event.type:event,namespaces=hasOwn.call(event,"namespace")?event.namespace.split("."):[],cur=tmp=elem=elem||document;if(3!==elem.nodeType&&8!==elem.nodeType&&!rfocusMorph.test(type+jQuery.event.triggered)&&(0<=type.indexOf(".")&&(type=(namespaces=type.split(".")).shift(),namespaces.sort()),ontype=type.indexOf(":")<0&&"on"+type,(event=event[jQuery.expando]?event:new jQuery.Event(type,"object"==typeof event&&event)).isTrigger=onlyHandlers?2:3,event.namespace=namespaces.join("."),event.namespace_re=event.namespace?new RegExp("(^|\\.)"+namespaces.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,event.result=void 0,event.target||(event.target=elem),data=null==data?[event]:jQuery.makeArray(data,[event]),special=jQuery.event.special[type]||{},onlyHandlers||!special.trigger||!1!==special.trigger.apply(elem,data))){if(!onlyHandlers&&!special.noBubble&&!jQuery.isWindow(elem)){for(bubbleType=special.delegateType||type,rfocusMorph.test(bubbleType+type)||(cur=cur.parentNode);cur;cur=cur.parentNode)eventPath.push(cur),tmp=cur;tmp===(elem.ownerDocument||document)&&eventPath.push(tmp.defaultView||tmp.parentWindow||window)}for(i=0;(cur=eventPath[i++])&&!event.isPropagationStopped();)event.type=1<i?bubbleType:special.bindType||type,(handle=(jQuery._data(cur,"events")||{})[event.type]&&jQuery._data(cur,"handle"))&&handle.apply(cur,data),(handle=ontype&&cur[ontype])&&handle.apply&&jQuery.acceptData(cur)&&(event.result=handle.apply(cur,data),!1===event.result&&event.preventDefault());if(event.type=type,!onlyHandlers&&!event.isDefaultPrevented()&&(!special._default||!1===special._default.apply(eventPath.pop(),data))&&jQuery.acceptData(elem)&&ontype&&elem[type]&&!jQuery.isWindow(elem)){(tmp=elem[ontype])&&(elem[ontype]=null),jQuery.event.triggered=type;try{elem[type]()}catch(e){}jQuery.event.triggered=void 0,tmp&&(elem[ontype]=tmp)}return event.result}},dispatch:function(event){event=jQuery.event.fix(event);var i,ret,handleObj,matched,j,handlerQueue,args=slice.call(arguments),handlers=(jQuery._data(this,"events")||{})[event.type]||[],special=jQuery.event.special[event.type]||{};if((args[0]=event).delegateTarget=this,!special.preDispatch||!1!==special.preDispatch.call(this,event)){for(handlerQueue=jQuery.event.handlers.call(this,event,handlers),i=0;(matched=handlerQueue[i++])&&!event.isPropagationStopped();)for(event.currentTarget=matched.elem,j=0;(handleObj=matched.handlers[j++])&&!event.isImmediatePropagationStopped();)event.namespace_re&&!event.namespace_re.test(handleObj.namespace)||(event.handleObj=handleObj,event.data=handleObj.data,void 0!==(ret=((jQuery.event.special[handleObj.origType]||{}).handle||handleObj.handler).apply(matched.elem,args))&&!1===(event.result=ret)&&(event.preventDefault(),event.stopPropagation()));return special.postDispatch&&special.postDispatch.call(this,event),event.result}},handlers:function(event,handlers){var sel,handleObj,matches,i,handlerQueue=[],delegateCount=handlers.delegateCount,cur=event.target;if(delegateCount&&cur.nodeType&&(!event.button||"click"!==event.type))for(;cur!=this;cur=cur.parentNode||this)if(1===cur.nodeType&&(!0!==cur.disabled||"click"!==event.type)){for(matches=[],i=0;i<delegateCount;i++)void 0===matches[sel=(handleObj=handlers[i]).selector+" "]&&(matches[sel]=handleObj.needsContext?0<=jQuery(sel,this).index(cur):jQuery.find(sel,this,null,[cur]).length),matches[sel]&&matches.push(handleObj);matches.length&&handlerQueue.push({elem:cur,handlers:matches})}return delegateCount<handlers.length&&handlerQueue.push({elem:this,handlers:handlers.slice(delegateCount)}),handlerQueue},fix:function(event){if(event[jQuery.expando])return event;var i,prop,copy,type=event.type,originalEvent=event,fixHook=this.fixHooks[type];for(fixHook||(this.fixHooks[type]=fixHook=rmouseEvent.test(type)?this.mouseHooks:rkeyEvent.test(type)?this.keyHooks:{}),copy=fixHook.props?this.props.concat(fixHook.props):this.props,event=new jQuery.Event(originalEvent),i=copy.length;i--;)event[prop=copy[i]]=originalEvent[prop];return event.target||(event.target=originalEvent.srcElement||document),3===event.target.nodeType&&(event.target=event.target.parentNode),event.metaKey=!!event.metaKey,fixHook.filter?fixHook.filter(event,originalEvent):event},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(event,original){return null==event.which&&(event.which=null!=original.charCode?original.charCode:original.keyCode),event}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(event,original){var body,eventDoc,doc,button=original.button,fromElement=original.fromElement;return null==event.pageX&&null!=original.clientX&&(doc=(eventDoc=event.target.ownerDocument||document).documentElement,body=eventDoc.body,event.pageX=original.clientX+(doc&&doc.scrollLeft||body&&body.scrollLeft||0)-(doc&&doc.clientLeft||body&&body.clientLeft||0),event.pageY=original.clientY+(doc&&doc.scrollTop||body&&body.scrollTop||0)-(doc&&doc.clientTop||body&&body.clientTop||0)),!event.relatedTarget&&fromElement&&(event.relatedTarget=fromElement===event.target?original.toElement:fromElement),event.which||void 0===button||(event.which=1&button?1:2&button?3:4&button?2:0),event}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==safeActiveElement()&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){if(this===safeActiveElement()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if(jQuery.nodeName(this,"input")&&"checkbox"===this.type&&this.click)return this.click(),!1},_default:function(event){return jQuery.nodeName(event.target,"a")}},beforeunload:{postDispatch:function(event){void 0!==event.result&&event.originalEvent&&(event.originalEvent.returnValue=event.result)}}},simulate:function(type,elem,event,bubble){var e=jQuery.extend(new jQuery.Event,event,{type:type,isSimulated:!0,originalEvent:{}});bubble?jQuery.event.trigger(e,null,elem):jQuery.event.dispatch.call(elem,e),e.isDefaultPrevented()&&event.preventDefault()}},jQuery.removeEvent=document.removeEventListener?function(elem,type,handle){elem.removeEventListener&&elem.removeEventListener(type,handle,!1)}:function(elem,type,handle){var name="on"+type;elem.detachEvent&&(typeof elem[name]===strundefined&&(elem[name]=null),elem.detachEvent(name,handle))},jQuery.Event=function(src,props){if(!(this instanceof jQuery.Event))return new jQuery.Event(src,props);src&&src.type?(this.originalEvent=src,this.type=src.type,this.isDefaultPrevented=src.defaultPrevented||void 0===src.defaultPrevented&&!1===src.returnValue?returnTrue:returnFalse):this.type=src,props&&jQuery.extend(this,props),this.timeStamp=src&&src.timeStamp||jQuery.now(),this[jQuery.expando]=!0},jQuery.Event.prototype={isDefaultPrevented:returnFalse,isPropagationStopped:returnFalse,isImmediatePropagationStopped:returnFalse,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=returnTrue,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=returnTrue,e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=returnTrue,e&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),this.stopPropagation()}},jQuery.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(orig,fix){jQuery.event.special[orig]={delegateType:fix,bindType:fix,handle:function(event){var ret,related=event.relatedTarget,handleObj=event.handleObj;return related&&(related===this||jQuery.contains(this,related))||(event.type=handleObj.origType,ret=handleObj.handler.apply(this,arguments),event.type=fix),ret}}}),support.submitBubbles||(jQuery.event.special.submit={setup:function(){if(jQuery.nodeName(this,"form"))return!1;jQuery.event.add(this,"click._submit keypress._submit",function(e){var elem=e.target,form=jQuery.nodeName(elem,"input")||jQuery.nodeName(elem,"button")?elem.form:void 0;form&&!jQuery._data(form,"submitBubbles")&&(jQuery.event.add(form,"submit._submit",function(event){event._submit_bubble=!0}),jQuery._data(form,"submitBubbles",!0))})},postDispatch:function(event){event._submit_bubble&&(delete event._submit_bubble,this.parentNode&&!event.isTrigger&&jQuery.event.simulate("submit",this.parentNode,event,!0))},teardown:function(){if(jQuery.nodeName(this,"form"))return!1;jQuery.event.remove(this,"._submit")}}),support.changeBubbles||(jQuery.event.special.change={setup:function(){if(rformElems.test(this.nodeName))return"checkbox"!==this.type&&"radio"!==this.type||(jQuery.event.add(this,"propertychange._change",function(event){"checked"===event.originalEvent.propertyName&&(this._just_changed=!0)}),jQuery.event.add(this,"click._change",function(event){this._just_changed&&!event.isTrigger&&(this._just_changed=!1),jQuery.event.simulate("change",this,event,!0)})),!1;jQuery.event.add(this,"beforeactivate._change",function(e){var elem=e.target;rformElems.test(elem.nodeName)&&!jQuery._data(elem,"changeBubbles")&&(jQuery.event.add(elem,"change._change",function(event){!this.parentNode||event.isSimulated||event.isTrigger||jQuery.event.simulate("change",this.parentNode,event,!0)}),jQuery._data(elem,"changeBubbles",!0))})},handle:function(event){var elem=event.target;if(this!==elem||event.isSimulated||event.isTrigger||"radio"!==elem.type&&"checkbox"!==elem.type)return event.handleObj.handler.apply(this,arguments)},teardown:function(){return jQuery.event.remove(this,"._change"),!rformElems.test(this.nodeName)}}),support.focusinBubbles||jQuery.each({focus:"focusin",blur:"focusout"},function(orig,fix){function handler(event){jQuery.event.simulate(fix,event.target,jQuery.event.fix(event),!0)}jQuery.event.special[fix]={setup:function(){var doc=this.ownerDocument||this,attaches=jQuery._data(doc,fix);attaches||doc.addEventListener(orig,handler,!0),jQuery._data(doc,fix,(attaches||0)+1)},teardown:function(){var doc=this.ownerDocument||this,attaches=jQuery._data(doc,fix)-1;attaches?jQuery._data(doc,fix,attaches):(doc.removeEventListener(orig,handler,!0),jQuery._removeData(doc,fix))}}}),jQuery.fn.extend({on:function(types,selector,data,fn,one){var type,origFn;if("object"==typeof types){for(type in"string"!=typeof selector&&(data=data||selector,selector=void 0),types)this.on(type,selector,data,types[type],one);return this}if(null==data&&null==fn?(fn=selector,data=selector=void 0):null==fn&&("string"==typeof selector?(fn=data,data=void 0):(fn=data,data=selector,selector=void 0)),!1===fn)fn=returnFalse;else if(!fn)return this;return 1===one&&(origFn=fn,(fn=function(event){return jQuery().off(event),origFn.apply(this,arguments)}).guid=origFn.guid||(origFn.guid=jQuery.guid++)),this.each(function(){jQuery.event.add(this,types,fn,data,selector)})},one:function(types,selector,data,fn){return this.on(types,selector,data,fn,1)},off:function(types,selector,fn){var handleObj,type;if(types&&types.preventDefault&&types.handleObj)return handleObj=types.handleObj,jQuery(types.delegateTarget).off(handleObj.namespace?handleObj.origType+"."+handleObj.namespace:handleObj.origType,handleObj.selector,handleObj.handler),this;if("object"!=typeof types)return!1!==selector&&"function"!=typeof selector||(fn=selector,selector=void 0),!1===fn&&(fn=returnFalse),this.each(function(){jQuery.event.remove(this,types,fn,selector)});for(type in types)this.off(type,selector,types[type]);return this},trigger:function(type,data){return this.each(function(){jQuery.event.trigger(type,data,this)})},triggerHandler:function(type,data){var elem=this[0];if(elem)return jQuery.event.trigger(type,data,elem,!0)}});var nodeNames="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",rinlinejQuery=/ jQuery\d+="(?:null|\d+)"/g,rnoshimcache=new RegExp("<(?:"+nodeNames+")[\\s/>]","i"),rleadingWhitespace=/^\s+/,rxhtmlTag=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,rtagName=/<([\w:]+)/,rtbody=/<tbody/i,rhtml=/<|&#?\w+;/,rnoInnerhtml=/<(?:script|style|link)/i,rchecked=/checked\s*(?:[^=]|=\s*.checked.)/i,rscriptType=/^$|\/(?:java|ecma)script/i,rscriptTypeMasked=/^true\/(.*)/,rcleanScript=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,wrapMap={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},fragmentDiv=createSafeFragment(document).appendChild(document.createElement("div"));function getAll(context,tag){var elems,elem,i=0,found=typeof context.getElementsByTagName!==strundefined?context.getElementsByTagName(tag||"*"):typeof context.querySelectorAll!==strundefined?context.querySelectorAll(tag||"*"):void 0;if(!found)for(found=[],elems=context.childNodes||context;null!=(elem=elems[i]);i++)!tag||jQuery.nodeName(elem,tag)?found.push(elem):jQuery.merge(found,getAll(elem,tag));return void 0===tag||tag&&jQuery.nodeName(context,tag)?jQuery.merge([context],found):found}function fixDefaultChecked(elem){rcheckableType.test(elem.type)&&(elem.defaultChecked=elem.checked)}function manipulationTarget(elem,content){return jQuery.nodeName(elem,"table")&&jQuery.nodeName(11!==content.nodeType?content:content.firstChild,"tr")?elem.getElementsByTagName("tbody")[0]||elem.appendChild(elem.ownerDocument.createElement("tbody")):elem}function disableScript(elem){return elem.type=(null!==jQuery.find.attr(elem,"type"))+"/"+elem.type,elem}function restoreScript(elem){var match=rscriptTypeMasked.exec(elem.type);return match?elem.type=match[1]:elem.removeAttribute("type"),elem}function setGlobalEval(elems,refElements){for(var elem,i=0;null!=(elem=elems[i]);i++)jQuery._data(elem,"globalEval",!refElements||jQuery._data(refElements[i],"globalEval"))}function cloneCopyEvent(src,dest){if(1===dest.nodeType&&jQuery.hasData(src)){var type,i,l,oldData=jQuery._data(src),curData=jQuery._data(dest,oldData),events=oldData.events;if(events)for(type in delete curData.handle,curData.events={},events)for(i=0,l=events[type].length;i<l;i++)jQuery.event.add(dest,type,events[type][i]);curData.data&&(curData.data=jQuery.extend({},curData.data))}}wrapMap.optgroup=wrapMap.option,wrapMap.tbody=wrapMap.tfoot=wrapMap.colgroup=wrapMap.caption=wrapMap.thead,wrapMap.th=wrapMap.td,jQuery.extend({clone:function(elem,dataAndEvents,deepDataAndEvents){var destElements,node,clone,i,srcElements,inPage=jQuery.contains(elem.ownerDocument,elem);if(support.html5Clone||jQuery.isXMLDoc(elem)||!rnoshimcache.test("<"+elem.nodeName+">")?clone=elem.cloneNode(!0):(fragmentDiv.innerHTML=elem.outerHTML,fragmentDiv.removeChild(clone=fragmentDiv.firstChild)),!(support.noCloneEvent&&support.noCloneChecked||1!==elem.nodeType&&11!==elem.nodeType||jQuery.isXMLDoc(elem)))for(destElements=getAll(clone),srcElements=getAll(elem),i=0;null!=(node=srcElements[i]);++i)destElements[i]&&function(src,dest){var nodeName,e,data;if(1===dest.nodeType){if(nodeName=dest.nodeName.toLowerCase(),!support.noCloneEvent&&dest[jQuery.expando]){for(e in(data=jQuery._data(dest)).events)jQuery.removeEvent(dest,e,data.handle);dest.removeAttribute(jQuery.expando)}"script"===nodeName&&dest.text!==src.text?(disableScript(dest).text=src.text,restoreScript(dest)):"object"===nodeName?(dest.parentNode&&(dest.outerHTML=src.outerHTML),support.html5Clone&&src.innerHTML&&!jQuery.trim(dest.innerHTML)&&(dest.innerHTML=src.innerHTML)):"input"===nodeName&&rcheckableType.test(src.type)?(dest.defaultChecked=dest.checked=src.checked,dest.value!==src.value&&(dest.value=src.value)):"option"===nodeName?dest.defaultSelected=dest.selected=src.defaultSelected:"input"!==nodeName&&"textarea"!==nodeName||(dest.defaultValue=src.defaultValue)}}(node,destElements[i]);if(dataAndEvents)if(deepDataAndEvents)for(srcElements=srcElements||getAll(elem),destElements=destElements||getAll(clone),i=0;null!=(node=srcElements[i]);i++)cloneCopyEvent(node,destElements[i]);else cloneCopyEvent(elem,clone);return 0<(destElements=getAll(clone,"script")).length&&setGlobalEval(destElements,!inPage&&getAll(elem,"script")),destElements=srcElements=node=null,clone},buildFragment:function(elems,context,scripts,selection){for(var j,elem,contains,tmp,tag,tbody,wrap,l=elems.length,safe=createSafeFragment(context),nodes=[],i=0;i<l;i++)if((elem=elems[i])||0===elem)if("object"===jQuery.type(elem))jQuery.merge(nodes,elem.nodeType?[elem]:elem);else if(rhtml.test(elem)){for(tmp=tmp||safe.appendChild(context.createElement("div")),tag=(rtagName.exec(elem)||["",""])[1].toLowerCase(),wrap=wrapMap[tag]||wrapMap._default,tmp.innerHTML=wrap[1]+elem.replace(rxhtmlTag,"<$1></$2>")+wrap[2],j=wrap[0];j--;)tmp=tmp.lastChild;if(!support.leadingWhitespace&&rleadingWhitespace.test(elem)&&nodes.push(context.createTextNode(rleadingWhitespace.exec(elem)[0])),!support.tbody)for(j=(elem="table"!==tag||rtbody.test(elem)?"<table>"!==wrap[1]||rtbody.test(elem)?0:tmp:tmp.firstChild)&&elem.childNodes.length;j--;)jQuery.nodeName(tbody=elem.childNodes[j],"tbody")&&!tbody.childNodes.length&&elem.removeChild(tbody);for(jQuery.merge(nodes,tmp.childNodes),tmp.textContent="";tmp.firstChild;)tmp.removeChild(tmp.firstChild);tmp=safe.lastChild}else nodes.push(context.createTextNode(elem));for(tmp&&safe.removeChild(tmp),support.appendChecked||jQuery.grep(getAll(nodes,"input"),fixDefaultChecked),i=0;elem=nodes[i++];)if((!selection||-1===jQuery.inArray(elem,selection))&&(contains=jQuery.contains(elem.ownerDocument,elem),tmp=getAll(safe.appendChild(elem),"script"),contains&&setGlobalEval(tmp),scripts))for(j=0;elem=tmp[j++];)rscriptType.test(elem.type||"")&&scripts.push(elem);return tmp=null,safe},cleanData:function(elems,acceptData){for(var elem,type,id,data,i=0,internalKey=jQuery.expando,cache=jQuery.cache,deleteExpando=support.deleteExpando,special=jQuery.event.special;null!=(elem=elems[i]);i++)if((acceptData||jQuery.acceptData(elem))&&(data=(id=elem[internalKey])&&cache[id])){if(data.events)for(type in data.events)special[type]?jQuery.event.remove(elem,type):jQuery.removeEvent(elem,type,data.handle);cache[id]&&(delete cache[id],deleteExpando?delete elem[internalKey]:typeof elem.removeAttribute!==strundefined?elem.removeAttribute(internalKey):elem[internalKey]=null,deletedIds.push(id))}}}),jQuery.fn.extend({text:function(value){return access(this,function(value){return void 0===value?jQuery.text(this):this.empty().append((this[0]&&this[0].ownerDocument||document).createTextNode(value))},null,value,arguments.length)},append:function(){return this.domManip(arguments,function(elem){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||manipulationTarget(this,elem).appendChild(elem)})},prepend:function(){return this.domManip(arguments,function(elem){var target;1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(target=manipulationTarget(this,elem)).insertBefore(elem,target.firstChild)})},before:function(){return this.domManip(arguments,function(elem){this.parentNode&&this.parentNode.insertBefore(elem,this)})},after:function(){return this.domManip(arguments,function(elem){this.parentNode&&this.parentNode.insertBefore(elem,this.nextSibling)})},remove:function(selector,keepData){for(var elem,elems=selector?jQuery.filter(selector,this):this,i=0;null!=(elem=elems[i]);i++)keepData||1!==elem.nodeType||jQuery.cleanData(getAll(elem)),elem.parentNode&&(keepData&&jQuery.contains(elem.ownerDocument,elem)&&setGlobalEval(getAll(elem,"script")),elem.parentNode.removeChild(elem));return this},empty:function(){for(var elem,i=0;null!=(elem=this[i]);i++){for(1===elem.nodeType&&jQuery.cleanData(getAll(elem,!1));elem.firstChild;)elem.removeChild(elem.firstChild);elem.options&&jQuery.nodeName(elem,"select")&&(elem.options.length=0)}return this},clone:function(dataAndEvents,deepDataAndEvents){return dataAndEvents=null!=dataAndEvents&&dataAndEvents,deepDataAndEvents=null==deepDataAndEvents?dataAndEvents:deepDataAndEvents,this.map(function(){return jQuery.clone(this,dataAndEvents,deepDataAndEvents)})},html:function(value){return access(this,function(value){var elem=this[0]||{},i=0,l=this.length;if(void 0===value)return 1===elem.nodeType?elem.innerHTML.replace(rinlinejQuery,""):void 0;if("string"==typeof value&&!rnoInnerhtml.test(value)&&(support.htmlSerialize||!rnoshimcache.test(value))&&(support.leadingWhitespace||!rleadingWhitespace.test(value))&&!wrapMap[(rtagName.exec(value)||["",""])[1].toLowerCase()]){value=value.replace(rxhtmlTag,"<$1></$2>");try{for(;i<l;i++)1===(elem=this[i]||{}).nodeType&&(jQuery.cleanData(getAll(elem,!1)),elem.innerHTML=value);elem=0}catch(e){}}elem&&this.empty().append(value)},null,value,arguments.length)},replaceWith:function(){var arg=arguments[0];return this.domManip(arguments,function(elem){arg=this.parentNode,jQuery.cleanData(getAll(this)),arg&&arg.replaceChild(elem,this)}),arg&&(arg.length||arg.nodeType)?this:this.remove()},detach:function(selector){return this.remove(selector,!0)},domManip:function(args,callback){args=concat.apply([],args);var first,node,hasScripts,scripts,doc,fragment,i=0,l=this.length,set=this,iNoClone=l-1,value=args[0],isFunction=jQuery.isFunction(value);if(isFunction||1<l&&"string"==typeof value&&!support.checkClone&&rchecked.test(value))return this.each(function(index){var self=set.eq(index);isFunction&&(args[0]=value.call(this,index,self.html())),self.domManip(args,callback)});if(l&&(first=(fragment=jQuery.buildFragment(args,this[0].ownerDocument,!1,this)).firstChild,1===fragment.childNodes.length&&(fragment=first),first)){for(hasScripts=(scripts=jQuery.map(getAll(fragment,"script"),disableScript)).length;i<l;i++)node=fragment,i!==iNoClone&&(node=jQuery.clone(node,!0,!0),hasScripts&&jQuery.merge(scripts,getAll(node,"script"))),callback.call(this[i],node,i);if(hasScripts)for(doc=scripts[scripts.length-1].ownerDocument,jQuery.map(scripts,restoreScript),i=0;i<hasScripts;i++)node=scripts[i],rscriptType.test(node.type||"")&&!jQuery._data(node,"globalEval")&&jQuery.contains(doc,node)&&(node.src?jQuery._evalUrl&&jQuery._evalUrl(node.src):jQuery.globalEval((node.text||node.textContent||node.innerHTML||"").replace(rcleanScript,"")));fragment=first=null}return this}}),jQuery.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(name,original){jQuery.fn[name]=function(selector){for(var elems,i=0,ret=[],insert=jQuery(selector),last=insert.length-1;i<=last;i++)elems=i===last?this:this.clone(!0),jQuery(insert[i])[original](elems),push.apply(ret,elems.get());return this.pushStack(ret)}});var iframe,shrinkWrapBlocksVal,elemdisplay={};function actualDisplay(name,doc){var style,elem=jQuery(doc.createElement(name)).appendTo(doc.body),display=window.getDefaultComputedStyle&&(style=window.getDefaultComputedStyle(elem[0]))?style.display:jQuery.css(elem[0],"display");return elem.detach(),display}function defaultDisplay(nodeName){var doc=document,display=elemdisplay[nodeName];return display||("none"!==(display=actualDisplay(nodeName,doc))&&display||((doc=((iframe=(iframe||jQuery("<iframe frameborder='0' width='0' height='0'/>")).appendTo(doc.documentElement))[0].contentWindow||iframe[0].contentDocument).document).write(),doc.close(),display=actualDisplay(nodeName,doc),iframe.detach()),elemdisplay[nodeName]=display),display}support.shrinkWrapBlocks=function(){return null!=shrinkWrapBlocksVal?shrinkWrapBlocksVal:(shrinkWrapBlocksVal=!1,(body=document.getElementsByTagName("body")[0])&&body.style?(div=document.createElement("div"),(container=document.createElement("div")).style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",body.appendChild(container).appendChild(div),typeof div.style.zoom!==strundefined&&(div.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",div.appendChild(document.createElement("div")).style.width="5px",shrinkWrapBlocksVal=3!==div.offsetWidth),body.removeChild(container),shrinkWrapBlocksVal):void 0);var div,body,container};var getStyles,curCSS,div,style,a,pixelPositionVal,boxSizingReliableVal,reliableHiddenOffsetsVal,reliableMarginRightVal,rmargin=/^margin/,rnumnonpx=new RegExp("^("+pnum+")(?!px)[a-z%]+$","i"),rposition=/^(top|right|bottom|left)$/;function addGetHookIf(conditionFn,hookFn){return{get:function(){var condition=conditionFn();if(null!=condition){if(!condition)return(this.get=hookFn).apply(this,arguments);delete this.get}}}}function computeStyleTests(){var div,container,contents,body=document.getElementsByTagName("body")[0];body&&body.style&&(div=document.createElement("div"),(container=document.createElement("div")).style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",body.appendChild(container).appendChild(div),div.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",pixelPositionVal=boxSizingReliableVal=!1,reliableMarginRightVal=!0,window.getComputedStyle&&(pixelPositionVal="1%"!==(window.getComputedStyle(div,null)||{}).top,boxSizingReliableVal="4px"===(window.getComputedStyle(div,null)||{width:"4px"}).width,(contents=div.appendChild(document.createElement("div"))).style.cssText=div.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",contents.style.marginRight=contents.style.width="0",div.style.width="1px",reliableMarginRightVal=!parseFloat((window.getComputedStyle(contents,null)||{}).marginRight),div.removeChild(contents)),div.innerHTML="<table><tr><td></td><td>t</td></tr></table>",(contents=div.getElementsByTagName("td"))[0].style.cssText="margin:0;border:0;padding:0;display:none",(reliableHiddenOffsetsVal=0===contents[0].offsetHeight)&&(contents[0].style.display="",contents[1].style.display="none",reliableHiddenOffsetsVal=0===contents[0].offsetHeight),body.removeChild(container))}window.getComputedStyle?(getStyles=function(elem){return elem.ownerDocument.defaultView.opener?elem.ownerDocument.defaultView.getComputedStyle(elem,null):window.getComputedStyle(elem,null)},curCSS=function(elem,name,computed){var width,minWidth,maxWidth,style=elem.style,ret=(computed=computed||getStyles(elem))?computed.getPropertyValue(name)||computed[name]:void 0;return computed&&(""!==ret||jQuery.contains(elem.ownerDocument,elem)||(ret=jQuery.style(elem,name)),rnumnonpx.test(ret)&&rmargin.test(name)&&(width=style.width,minWidth=style.minWidth,maxWidth=style.maxWidth,style.minWidth=style.maxWidth=style.width=ret,ret=computed.width,style.width=width,style.minWidth=minWidth,style.maxWidth=maxWidth)),void 0===ret?ret:ret+""}):document.documentElement.currentStyle&&(getStyles=function(elem){return elem.currentStyle},curCSS=function(elem,name,computed){var left,rs,rsLeft,ret,style=elem.style;return null==(ret=(computed=computed||getStyles(elem))?computed[name]:void 0)&&style&&style[name]&&(ret=style[name]),rnumnonpx.test(ret)&&!rposition.test(name)&&(left=style.left,(rsLeft=(rs=elem.runtimeStyle)&&rs.left)&&(rs.left=elem.currentStyle.left),style.left="fontSize"===name?"1em":ret,ret=style.pixelLeft+"px",style.left=left,rsLeft&&(rs.left=rsLeft)),void 0===ret?ret:ret+""||"auto"}),(div=document.createElement("div")).innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",(style=(a=div.getElementsByTagName("a")[0])&&a.style)&&(style.cssText="float:left;opacity:.5",support.opacity="0.5"===style.opacity,support.cssFloat=!!style.cssFloat,div.style.backgroundClip="content-box",div.cloneNode(!0).style.backgroundClip="",support.clearCloneStyle="content-box"===div.style.backgroundClip,support.boxSizing=""===style.boxSizing||""===style.MozBoxSizing||""===style.WebkitBoxSizing,jQuery.extend(support,{reliableHiddenOffsets:function(){return null==reliableHiddenOffsetsVal&&computeStyleTests(),reliableHiddenOffsetsVal},boxSizingReliable:function(){return null==boxSizingReliableVal&&computeStyleTests(),boxSizingReliableVal},pixelPosition:function(){return null==pixelPositionVal&&computeStyleTests(),pixelPositionVal},reliableMarginRight:function(){return null==reliableMarginRightVal&&computeStyleTests(),reliableMarginRightVal}})),jQuery.swap=function(elem,options,callback,args){var ret,name,old={};for(name in options)old[name]=elem.style[name],elem.style[name]=options[name];for(name in ret=callback.apply(elem,args||[]),options)elem.style[name]=old[name];return ret};var ralpha=/alpha\([^)]*\)/i,ropacity=/opacity\s*=\s*([^)]*)/,rdisplayswap=/^(none|table(?!-c[ea]).+)/,rnumsplit=new RegExp("^("+pnum+")(.*)$","i"),rrelNum=new RegExp("^([+-])=("+pnum+")","i"),cssShow={position:"absolute",visibility:"hidden",display:"block"},cssNormalTransform={letterSpacing:"0",fontWeight:"400"},cssPrefixes=["Webkit","O","Moz","ms"];function vendorPropName(style,name){if(name in style)return name;for(var capName=name.charAt(0).toUpperCase()+name.slice(1),origName=name,i=cssPrefixes.length;i--;)if((name=cssPrefixes[i]+capName)in style)return name;return origName}function showHide(elements,show){for(var display,elem,hidden,values=[],index=0,length=elements.length;index<length;index++)(elem=elements[index]).style&&(values[index]=jQuery._data(elem,"olddisplay"),display=elem.style.display,show?(values[index]||"none"!==display||(elem.style.display=""),""===elem.style.display&&isHidden(elem)&&(values[index]=jQuery._data(elem,"olddisplay",defaultDisplay(elem.nodeName)))):(hidden=isHidden(elem),(display&&"none"!==display||!hidden)&&jQuery._data(elem,"olddisplay",hidden?display:jQuery.css(elem,"display"))));for(index=0;index<length;index++)(elem=elements[index]).style&&(show&&"none"!==elem.style.display&&""!==elem.style.display||(elem.style.display=show?values[index]||"":"none"));return elements}function setPositiveNumber(elem,value,subtract){var matches=rnumsplit.exec(value);return matches?Math.max(0,matches[1]-(subtract||0))+(matches[2]||"px"):value}function augmentWidthOrHeight(elem,name,extra,isBorderBox,styles){for(var i=extra===(isBorderBox?"border":"content")?4:"width"===name?1:0,val=0;i<4;i+=2)"margin"===extra&&(val+=jQuery.css(elem,extra+cssExpand[i],!0,styles)),isBorderBox?("content"===extra&&(val-=jQuery.css(elem,"padding"+cssExpand[i],!0,styles)),"margin"!==extra&&(val-=jQuery.css(elem,"border"+cssExpand[i]+"Width",!0,styles))):(val+=jQuery.css(elem,"padding"+cssExpand[i],!0,styles),"padding"!==extra&&(val+=jQuery.css(elem,"border"+cssExpand[i]+"Width",!0,styles)));return val}function getWidthOrHeight(elem,name,extra){var valueIsBorderBox=!0,val="width"===name?elem.offsetWidth:elem.offsetHeight,styles=getStyles(elem),isBorderBox=support.boxSizing&&"border-box"===jQuery.css(elem,"boxSizing",!1,styles);if(val<=0||null==val){if(((val=curCSS(elem,name,styles))<0||null==val)&&(val=elem.style[name]),rnumnonpx.test(val))return val;valueIsBorderBox=isBorderBox&&(support.boxSizingReliable()||val===elem.style[name]),val=parseFloat(val)||0}return val+augmentWidthOrHeight(elem,name,extra||(isBorderBox?"border":"content"),valueIsBorderBox,styles)+"px"}function Tween(elem,options,prop,end,easing){return new Tween.prototype.init(elem,options,prop,end,easing)}jQuery.extend({cssHooks:{opacity:{get:function(elem,computed){if(computed){var ret=curCSS(elem,"opacity");return""===ret?"1":ret}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:support.cssFloat?"cssFloat":"styleFloat"},style:function(elem,name,value,extra){if(elem&&3!==elem.nodeType&&8!==elem.nodeType&&elem.style){var ret,type,hooks,origName=jQuery.camelCase(name),style=elem.style;if(name=jQuery.cssProps[origName]||(jQuery.cssProps[origName]=vendorPropName(style,origName)),hooks=jQuery.cssHooks[name]||jQuery.cssHooks[origName],void 0===value)return hooks&&"get"in hooks&&void 0!==(ret=hooks.get(elem,!1,extra))?ret:style[name];if("string"===(type=typeof value)&&(ret=rrelNum.exec(value))&&(value=(ret[1]+1)*ret[2]+parseFloat(jQuery.css(elem,name)),type="number"),null!=value&&value==value&&("number"!==type||jQuery.cssNumber[origName]||(value+="px"),support.clearCloneStyle||""!==value||0!==name.indexOf("background")||(style[name]="inherit"),!(hooks&&"set"in hooks&&void 0===(value=hooks.set(elem,value,extra)))))try{style[name]=value}catch(e){}}},css:function(elem,name,extra,styles){var num,val,hooks,origName=jQuery.camelCase(name);return name=jQuery.cssProps[origName]||(jQuery.cssProps[origName]=vendorPropName(elem.style,origName)),(hooks=jQuery.cssHooks[name]||jQuery.cssHooks[origName])&&"get"in hooks&&(val=hooks.get(elem,!0,extra)),void 0===val&&(val=curCSS(elem,name,styles)),"normal"===val&&name in cssNormalTransform&&(val=cssNormalTransform[name]),""===extra||extra?(num=parseFloat(val),!0===extra||jQuery.isNumeric(num)?num||0:val):val}}),jQuery.each(["height","width"],function(i,name){jQuery.cssHooks[name]={get:function(elem,computed,extra){if(computed)return rdisplayswap.test(jQuery.css(elem,"display"))&&0===elem.offsetWidth?jQuery.swap(elem,cssShow,function(){return getWidthOrHeight(elem,name,extra)}):getWidthOrHeight(elem,name,extra)},set:function(elem,value,extra){var styles=extra&&getStyles(elem);return setPositiveNumber(0,value,extra?augmentWidthOrHeight(elem,name,extra,support.boxSizing&&"border-box"===jQuery.css(elem,"boxSizing",!1,styles),styles):0)}}}),support.opacity||(jQuery.cssHooks.opacity={get:function(elem,computed){return ropacity.test((computed&&elem.currentStyle?elem.currentStyle.filter:elem.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":computed?"1":""},set:function(elem,value){var style=elem.style,currentStyle=elem.currentStyle,opacity=jQuery.isNumeric(value)?"alpha(opacity="+100*value+")":"",filter=currentStyle&&currentStyle.filter||style.filter||"";((style.zoom=1)<=value||""===value)&&""===jQuery.trim(filter.replace(ralpha,""))&&style.removeAttribute&&(style.removeAttribute("filter"),""===value||currentStyle&&!currentStyle.filter)||(style.filter=ralpha.test(filter)?filter.replace(ralpha,opacity):filter+" "+opacity)}}),jQuery.cssHooks.marginRight=addGetHookIf(support.reliableMarginRight,function(elem,computed){if(computed)return jQuery.swap(elem,{display:"inline-block"},curCSS,[elem,"marginRight"])}),jQuery.each({margin:"",padding:"",border:"Width"},function(prefix,suffix){jQuery.cssHooks[prefix+suffix]={expand:function(value){for(var i=0,expanded={},parts="string"==typeof value?value.split(" "):[value];i<4;i++)expanded[prefix+cssExpand[i]+suffix]=parts[i]||parts[i-2]||parts[0];return expanded}},rmargin.test(prefix)||(jQuery.cssHooks[prefix+suffix].set=setPositiveNumber)}),jQuery.fn.extend({css:function(name,value){return access(this,function(elem,name,value){var styles,len,map={},i=0;if(jQuery.isArray(name)){for(styles=getStyles(elem),len=name.length;i<len;i++)map[name[i]]=jQuery.css(elem,name[i],!1,styles);return map}return void 0!==value?jQuery.style(elem,name,value):jQuery.css(elem,name)},name,value,1<arguments.length)},show:function(){return showHide(this,!0)},hide:function(){return showHide(this)},toggle:function(state){return"boolean"==typeof state?state?this.show():this.hide():this.each(function(){isHidden(this)?jQuery(this).show():jQuery(this).hide()})}}),(jQuery.Tween=Tween).prototype={constructor:Tween,init:function(elem,options,prop,end,easing,unit){this.elem=elem,this.prop=prop,this.easing=easing||"swing",this.options=options,this.start=this.now=this.cur(),this.end=end,this.unit=unit||(jQuery.cssNumber[prop]?"":"px")},cur:function(){var hooks=Tween.propHooks[this.prop];return hooks&&hooks.get?hooks.get(this):Tween.propHooks._default.get(this)},run:function(percent){var eased,hooks=Tween.propHooks[this.prop];return this.options.duration?this.pos=eased=jQuery.easing[this.easing](percent,this.options.duration*percent,0,1,this.options.duration):this.pos=eased=percent,this.now=(this.end-this.start)*eased+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),hooks&&hooks.set?hooks.set(this):Tween.propHooks._default.set(this),this}},Tween.prototype.init.prototype=Tween.prototype,Tween.propHooks={_default:{get:function(tween){var result;return null==tween.elem[tween.prop]||tween.elem.style&&null!=tween.elem.style[tween.prop]?(result=jQuery.css(tween.elem,tween.prop,""))&&"auto"!==result?result:0:tween.elem[tween.prop]},set:function(tween){jQuery.fx.step[tween.prop]?jQuery.fx.step[tween.prop](tween):tween.elem.style&&(null!=tween.elem.style[jQuery.cssProps[tween.prop]]||jQuery.cssHooks[tween.prop])?jQuery.style(tween.elem,tween.prop,tween.now+tween.unit):tween.elem[tween.prop]=tween.now}}},Tween.propHooks.scrollTop=Tween.propHooks.scrollLeft={set:function(tween){tween.elem.nodeType&&tween.elem.parentNode&&(tween.elem[tween.prop]=tween.now)}},jQuery.easing={linear:function(p){return p},swing:function(p){return.5-Math.cos(p*Math.PI)/2}},jQuery.fx=Tween.prototype.init,jQuery.fx.step={};var fxNow,timerId,rfxtypes=/^(?:toggle|show|hide)$/,rfxnum=new RegExp("^(?:([+-])=|)("+pnum+")([a-z%]*)$","i"),rrun=/queueHooks$/,animationPrefilters=[function(elem,props,opts){var prop,value,toggle,tween,hooks,oldfire,display,anim=this,orig={},style=elem.style,hidden=elem.nodeType&&isHidden(elem),dataShow=jQuery._data(elem,"fxshow");opts.queue||(null==(hooks=jQuery._queueHooks(elem,"fx")).unqueued&&(hooks.unqueued=0,oldfire=hooks.empty.fire,hooks.empty.fire=function(){hooks.unqueued||oldfire()}),hooks.unqueued++,anim.always(function(){anim.always(function(){hooks.unqueued--,jQuery.queue(elem,"fx").length||hooks.empty.fire()})}));1===elem.nodeType&&("height"in props||"width"in props)&&(opts.overflow=[style.overflow,style.overflowX,style.overflowY],display=jQuery.css(elem,"display"),"inline"===("none"===display?jQuery._data(elem,"olddisplay")||defaultDisplay(elem.nodeName):display)&&"none"===jQuery.css(elem,"float")&&(support.inlineBlockNeedsLayout&&"inline"!==defaultDisplay(elem.nodeName)?style.zoom=1:style.display="inline-block"));opts.overflow&&(style.overflow="hidden",support.shrinkWrapBlocks()||anim.always(function(){style.overflow=opts.overflow[0],style.overflowX=opts.overflow[1],style.overflowY=opts.overflow[2]}));for(prop in props)if(value=props[prop],rfxtypes.exec(value)){if(delete props[prop],toggle=toggle||"toggle"===value,value===(hidden?"hide":"show")){if("show"!==value||!dataShow||void 0===dataShow[prop])continue;hidden=!0}orig[prop]=dataShow&&dataShow[prop]||jQuery.style(elem,prop)}else display=void 0;if(jQuery.isEmptyObject(orig))"inline"===("none"===display?defaultDisplay(elem.nodeName):display)&&(style.display=display);else for(prop in dataShow?"hidden"in dataShow&&(hidden=dataShow.hidden):dataShow=jQuery._data(elem,"fxshow",{}),toggle&&(dataShow.hidden=!hidden),hidden?jQuery(elem).show():anim.done(function(){jQuery(elem).hide()}),anim.done(function(){for(var prop in jQuery._removeData(elem,"fxshow"),orig)jQuery.style(elem,prop,orig[prop])}),orig)tween=createTween(hidden?dataShow[prop]:0,prop,anim),prop in dataShow||(dataShow[prop]=tween.start,hidden&&(tween.end=tween.start,tween.start="width"===prop||"height"===prop?1:0))}],tweeners={"*":[function(prop,value){var tween=this.createTween(prop,value),target=tween.cur(),parts=rfxnum.exec(value),unit=parts&&parts[3]||(jQuery.cssNumber[prop]?"":"px"),start=(jQuery.cssNumber[prop]||"px"!==unit&&+target)&&rfxnum.exec(jQuery.css(tween.elem,prop)),scale=1,maxIterations=20;if(start&&start[3]!==unit)for(unit=unit||start[3],parts=parts||[],start=+target||1;start/=scale=scale||".5",jQuery.style(tween.elem,prop,start+unit),scale!==(scale=tween.cur()/target)&&1!==scale&&--maxIterations;);return parts&&(start=tween.start=+start||+target||0,tween.unit=unit,tween.end=parts[1]?start+(parts[1]+1)*parts[2]:+parts[2]),tween}]};function createFxNow(){return setTimeout(function(){fxNow=void 0}),fxNow=jQuery.now()}function genFx(type,includeWidth){var which,attrs={height:type},i=0;for(includeWidth=includeWidth?1:0;i<4;i+=2-includeWidth)attrs["margin"+(which=cssExpand[i])]=attrs["padding"+which]=type;return includeWidth&&(attrs.opacity=attrs.width=type),attrs}function createTween(value,prop,animation){for(var tween,collection=(tweeners[prop]||[]).concat(tweeners["*"]),index=0,length=collection.length;index<length;index++)if(tween=collection[index].call(animation,prop,value))return tween}function Animation(elem,properties,options){var result,stopped,index=0,length=animationPrefilters.length,deferred=jQuery.Deferred().always(function(){delete tick.elem}),tick=function(){if(stopped)return!1;for(var currentTime=fxNow||createFxNow(),remaining=Math.max(0,animation.startTime+animation.duration-currentTime),percent=1-(remaining/animation.duration||0),index=0,length=animation.tweens.length;index<length;index++)animation.tweens[index].run(percent);return deferred.notifyWith(elem,[animation,percent,remaining]),percent<1&&length?remaining:(deferred.resolveWith(elem,[animation]),!1)},animation=deferred.promise({elem:elem,props:jQuery.extend({},properties),opts:jQuery.extend(!0,{specialEasing:{}},options),originalProperties:properties,originalOptions:options,startTime:fxNow||createFxNow(),duration:options.duration,tweens:[],createTween:function(prop,end){var tween=jQuery.Tween(elem,animation.opts,prop,end,animation.opts.specialEasing[prop]||animation.opts.easing);return animation.tweens.push(tween),tween},stop:function(gotoEnd){var index=0,length=gotoEnd?animation.tweens.length:0;if(stopped)return this;for(stopped=!0;index<length;index++)animation.tweens[index].run(1);return gotoEnd?deferred.resolveWith(elem,[animation,gotoEnd]):deferred.rejectWith(elem,[animation,gotoEnd]),this}}),props=animation.props;for(!function(props,specialEasing){var index,name,easing,value,hooks;for(index in props)if(easing=specialEasing[name=jQuery.camelCase(index)],value=props[index],jQuery.isArray(value)&&(easing=value[1],value=props[index]=value[0]),index!==name&&(props[name]=value,delete props[index]),(hooks=jQuery.cssHooks[name])&&"expand"in hooks)for(index in value=hooks.expand(value),delete props[name],value)index in props||(props[index]=value[index],specialEasing[index]=easing);else specialEasing[name]=easing}(props,animation.opts.specialEasing);index<length;index++)if(result=animationPrefilters[index].call(animation,elem,props,animation.opts))return result;return jQuery.map(props,createTween,animation),jQuery.isFunction(animation.opts.start)&&animation.opts.start.call(elem,animation),jQuery.fx.timer(jQuery.extend(tick,{elem:elem,anim:animation,queue:animation.opts.queue})),animation.progress(animation.opts.progress).done(animation.opts.done,animation.opts.complete).fail(animation.opts.fail).always(animation.opts.always)}jQuery.Animation=jQuery.extend(Animation,{tweener:function(props,callback){for(var prop,index=0,length=(props=jQuery.isFunction(props)?(callback=props,["*"]):props.split(" ")).length;index<length;index++)prop=props[index],tweeners[prop]=tweeners[prop]||[],tweeners[prop].unshift(callback)},prefilter:function(callback,prepend){prepend?animationPrefilters.unshift(callback):animationPrefilters.push(callback)}}),jQuery.speed=function(speed,easing,fn){var opt=speed&&"object"==typeof speed?jQuery.extend({},speed):{complete:fn||!fn&&easing||jQuery.isFunction(speed)&&speed,duration:speed,easing:fn&&easing||easing&&!jQuery.isFunction(easing)&&easing};return opt.duration=jQuery.fx.off?0:"number"==typeof opt.duration?opt.duration:opt.duration in jQuery.fx.speeds?jQuery.fx.speeds[opt.duration]:jQuery.fx.speeds._default,null!=opt.queue&&!0!==opt.queue||(opt.queue="fx"),opt.old=opt.complete,opt.complete=function(){jQuery.isFunction(opt.old)&&opt.old.call(this),opt.queue&&jQuery.dequeue(this,opt.queue)},opt},jQuery.fn.extend({fadeTo:function(speed,to,easing,callback){return this.filter(isHidden).css("opacity",0).show().end().animate({opacity:to},speed,easing,callback)},animate:function(prop,speed,easing,callback){function doAnimation(){var anim=Animation(this,jQuery.extend({},prop),optall);(empty||jQuery._data(this,"finish"))&&anim.stop(!0)}var empty=jQuery.isEmptyObject(prop),optall=jQuery.speed(speed,easing,callback);return doAnimation.finish=doAnimation,empty||!1===optall.queue?this.each(doAnimation):this.queue(optall.queue,doAnimation)},stop:function(type,clearQueue,gotoEnd){function stopQueue(hooks){var stop=hooks.stop;delete hooks.stop,stop(gotoEnd)}return"string"!=typeof type&&(gotoEnd=clearQueue,clearQueue=type,type=void 0),clearQueue&&!1!==type&&this.queue(type||"fx",[]),this.each(function(){var dequeue=!0,index=null!=type&&type+"queueHooks",timers=jQuery.timers,data=jQuery._data(this);if(index)data[index]&&data[index].stop&&stopQueue(data[index]);else for(index in data)data[index]&&data[index].stop&&rrun.test(index)&&stopQueue(data[index]);for(index=timers.length;index--;)timers[index].elem!==this||null!=type&&timers[index].queue!==type||(timers[index].anim.stop(gotoEnd),dequeue=!1,timers.splice(index,1));!dequeue&&gotoEnd||jQuery.dequeue(this,type)})},finish:function(type){return!1!==type&&(type=type||"fx"),this.each(function(){var index,data=jQuery._data(this),queue=data[type+"queue"],hooks=data[type+"queueHooks"],timers=jQuery.timers,length=queue?queue.length:0;for(data.finish=!0,jQuery.queue(this,type,[]),hooks&&hooks.stop&&hooks.stop.call(this,!0),index=timers.length;index--;)timers[index].elem===this&&timers[index].queue===type&&(timers[index].anim.stop(!0),timers.splice(index,1));for(index=0;index<length;index++)queue[index]&&queue[index].finish&&queue[index].finish.call(this);delete data.finish})}}),jQuery.each(["toggle","show","hide"],function(i,name){var cssFn=jQuery.fn[name];jQuery.fn[name]=function(speed,easing,callback){return null==speed||"boolean"==typeof speed?cssFn.apply(this,arguments):this.animate(genFx(name,!0),speed,easing,callback)}}),jQuery.each({slideDown:genFx("show"),slideUp:genFx("hide"),slideToggle:genFx("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(name,props){jQuery.fn[name]=function(speed,easing,callback){return this.animate(props,speed,easing,callback)}}),jQuery.timers=[],jQuery.fx.tick=function(){var timer,timers=jQuery.timers,i=0;for(fxNow=jQuery.now();i<timers.length;i++)(timer=timers[i])()||timers[i]!==timer||timers.splice(i--,1);timers.length||jQuery.fx.stop(),fxNow=void 0},jQuery.fx.timer=function(timer){jQuery.timers.push(timer),timer()?jQuery.fx.start():jQuery.timers.pop()},jQuery.fx.interval=13,jQuery.fx.start=function(){timerId=timerId||setInterval(jQuery.fx.tick,jQuery.fx.interval)},jQuery.fx.stop=function(){clearInterval(timerId),timerId=null},jQuery.fx.speeds={slow:600,fast:200,_default:400},jQuery.fn.delay=function(time,type){return time=jQuery.fx&&jQuery.fx.speeds[time]||time,type=type||"fx",this.queue(type,function(next,hooks){var timeout=setTimeout(next,time);hooks.stop=function(){clearTimeout(timeout)}})},function(){var input,select,a,opt,div=document.createElement("div");div.setAttribute("className","t"),div.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",a=div.getElementsByTagName("a")[0],opt=(select=document.createElement("select")).appendChild(document.createElement("option")),input=div.getElementsByTagName("input")[0],a.style.cssText="top:1px",support.getSetAttribute="t"!==div.className,support.style=/top/.test(a.getAttribute("style")),support.hrefNormalized="/a"===a.getAttribute("href"),support.checkOn=!!input.value,support.optSelected=opt.selected,support.enctype=!!document.createElement("form").enctype,select.disabled=!0,support.optDisabled=!opt.disabled,(input=document.createElement("input")).setAttribute("value",""),support.input=""===input.getAttribute("value"),input.value="t",input.setAttribute("type","radio"),support.radioValue="t"===input.value}();var rreturn=/\r/g;jQuery.fn.extend({val:function(value){var hooks,ret,isFunction,elem=this[0];return arguments.length?(isFunction=jQuery.isFunction(value),this.each(function(i){var val;1===this.nodeType&&(null==(val=isFunction?value.call(this,i,jQuery(this).val()):value)?val="":"number"==typeof val?val+="":jQuery.isArray(val)&&(val=jQuery.map(val,function(value){return null==value?"":value+""})),(hooks=jQuery.valHooks[this.type]||jQuery.valHooks[this.nodeName.toLowerCase()])&&"set"in hooks&&void 0!==hooks.set(this,val,"value")||(this.value=val))})):elem?(hooks=jQuery.valHooks[elem.type]||jQuery.valHooks[elem.nodeName.toLowerCase()])&&"get"in hooks&&void 0!==(ret=hooks.get(elem,"value"))?ret:"string"==typeof(ret=elem.value)?ret.replace(rreturn,""):null==ret?"":ret:void 0}}),jQuery.extend({valHooks:{option:{get:function(elem){var val=jQuery.find.attr(elem,"value");return null!=val?val:jQuery.trim(jQuery.text(elem))}},select:{get:function(elem){for(var value,option,options=elem.options,index=elem.selectedIndex,one="select-one"===elem.type||index<0,values=one?null:[],max=one?index+1:options.length,i=index<0?max:one?index:0;i<max;i++)if(((option=options[i]).selected||i===index)&&(support.optDisabled?!option.disabled:null===option.getAttribute("disabled"))&&(!option.parentNode.disabled||!jQuery.nodeName(option.parentNode,"optgroup"))){if(value=jQuery(option).val(),one)return value;values.push(value)}return values},set:function(elem,value){for(var optionSet,option,options=elem.options,values=jQuery.makeArray(value),i=options.length;i--;)if(option=options[i],0<=jQuery.inArray(jQuery.valHooks.option.get(option),values))try{option.selected=optionSet=!0}catch(_){option.scrollHeight}else option.selected=!1;return optionSet||(elem.selectedIndex=-1),options}}}}),jQuery.each(["radio","checkbox"],function(){jQuery.valHooks[this]={set:function(elem,value){if(jQuery.isArray(value))return elem.checked=0<=jQuery.inArray(jQuery(elem).val(),value)}},support.checkOn||(jQuery.valHooks[this].get=function(elem){return null===elem.getAttribute("value")?"on":elem.value})});var nodeHook,boolHook,attrHandle=jQuery.expr.attrHandle,ruseDefault=/^(?:checked|selected)$/i,getSetAttribute=support.getSetAttribute,getSetInput=support.input;jQuery.fn.extend({attr:function(name,value){return access(this,jQuery.attr,name,value,1<arguments.length)},removeAttr:function(name){return this.each(function(){jQuery.removeAttr(this,name)})}}),jQuery.extend({attr:function(elem,name,value){var hooks,ret,nType=elem.nodeType;if(elem&&3!==nType&&8!==nType&&2!==nType)return typeof elem.getAttribute===strundefined?jQuery.prop(elem,name,value):(1===nType&&jQuery.isXMLDoc(elem)||(name=name.toLowerCase(),hooks=jQuery.attrHooks[name]||(jQuery.expr.match.bool.test(name)?boolHook:nodeHook)),void 0===value?!(hooks&&"get"in hooks&&null!==(ret=hooks.get(elem,name)))&&null==(ret=jQuery.find.attr(elem,name))?void 0:ret:null!==value?hooks&&"set"in hooks&&void 0!==(ret=hooks.set(elem,value,name))?ret:(elem.setAttribute(name,value+""),value):void jQuery.removeAttr(elem,name))},removeAttr:function(elem,value){var name,propName,i=0,attrNames=value&&value.match(rnotwhite);if(attrNames&&1===elem.nodeType)for(;name=attrNames[i++];)propName=jQuery.propFix[name]||name,jQuery.expr.match.bool.test(name)?getSetInput&&getSetAttribute||!ruseDefault.test(name)?elem[propName]=!1:elem[jQuery.camelCase("default-"+name)]=elem[propName]=!1:jQuery.attr(elem,name,""),elem.removeAttribute(getSetAttribute?name:propName)},attrHooks:{type:{set:function(elem,value){if(!support.radioValue&&"radio"===value&&jQuery.nodeName(elem,"input")){var val=elem.value;return elem.setAttribute("type",value),val&&(elem.value=val),value}}}}}),boolHook={set:function(elem,value,name){return!1===value?jQuery.removeAttr(elem,name):getSetInput&&getSetAttribute||!ruseDefault.test(name)?elem.setAttribute(!getSetAttribute&&jQuery.propFix[name]||name,name):elem[jQuery.camelCase("default-"+name)]=elem[name]=!0,name}},jQuery.each(jQuery.expr.match.bool.source.match(/\w+/g),function(i,name){var getter=attrHandle[name]||jQuery.find.attr;attrHandle[name]=getSetInput&&getSetAttribute||!ruseDefault.test(name)?function(elem,name,isXML){var ret,handle;return isXML||(handle=attrHandle[name],attrHandle[name]=ret,ret=null!=getter(elem,name,isXML)?name.toLowerCase():null,attrHandle[name]=handle),ret}:function(elem,name,isXML){if(!isXML)return elem[jQuery.camelCase("default-"+name)]?name.toLowerCase():null}}),getSetInput&&getSetAttribute||(jQuery.attrHooks.value={set:function(elem,value,name){if(!jQuery.nodeName(elem,"input"))return nodeHook&&nodeHook.set(elem,value,name);elem.defaultValue=value}}),getSetAttribute||(nodeHook={set:function(elem,value,name){var ret=elem.getAttributeNode(name);if(ret||elem.setAttributeNode(ret=elem.ownerDocument.createAttribute(name)),ret.value=value+="","value"===name||value===elem.getAttribute(name))return value}},attrHandle.id=attrHandle.name=attrHandle.coords=function(elem,name,isXML){var ret;if(!isXML)return(ret=elem.getAttributeNode(name))&&""!==ret.value?ret.value:null},jQuery.valHooks.button={get:function(elem,name){var ret=elem.getAttributeNode(name);if(ret&&ret.specified)return ret.value},set:nodeHook.set},jQuery.attrHooks.contenteditable={set:function(elem,value,name){nodeHook.set(elem,""!==value&&value,name)}},jQuery.each(["width","height"],function(i,name){jQuery.attrHooks[name]={set:function(elem,value){if(""===value)return elem.setAttribute(name,"auto"),value}}})),support.style||(jQuery.attrHooks.style={get:function(elem){return elem.style.cssText||void 0},set:function(elem,value){return elem.style.cssText=value+""}});var rfocusable=/^(?:input|select|textarea|button|object)$/i,rclickable=/^(?:a|area)$/i;jQuery.fn.extend({prop:function(name,value){return access(this,jQuery.prop,name,value,1<arguments.length)},removeProp:function(name){return name=jQuery.propFix[name]||name,this.each(function(){try{this[name]=void 0,delete this[name]}catch(e){}})}}),jQuery.extend({propFix:{for:"htmlFor",class:"className"},prop:function(elem,name,value){var ret,hooks,nType=elem.nodeType;if(elem&&3!==nType&&8!==nType&&2!==nType)return(1!==nType||!jQuery.isXMLDoc(elem))&&(name=jQuery.propFix[name]||name,hooks=jQuery.propHooks[name]),void 0!==value?hooks&&"set"in hooks&&void 0!==(ret=hooks.set(elem,value,name))?ret:elem[name]=value:hooks&&"get"in hooks&&null!==(ret=hooks.get(elem,name))?ret:elem[name]},propHooks:{tabIndex:{get:function(elem){var tabindex=jQuery.find.attr(elem,"tabindex");return tabindex?parseInt(tabindex,10):rfocusable.test(elem.nodeName)||rclickable.test(elem.nodeName)&&elem.href?0:-1}}}}),support.hrefNormalized||jQuery.each(["href","src"],function(i,name){jQuery.propHooks[name]={get:function(elem){return elem.getAttribute(name,4)}}}),support.optSelected||(jQuery.propHooks.selected={get:function(elem){var parent=elem.parentNode;return parent&&(parent.selectedIndex,parent.parentNode&&parent.parentNode.selectedIndex),null}}),jQuery.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){jQuery.propFix[this.toLowerCase()]=this}),support.enctype||(jQuery.propFix.enctype="encoding");var rclass=/[\t\r\n\f]/g;jQuery.fn.extend({addClass:function(value){var classes,elem,cur,clazz,j,finalValue,i=0,len=this.length,proceed="string"==typeof value&&value;if(jQuery.isFunction(value))return this.each(function(j){jQuery(this).addClass(value.call(this,j,this.className))});if(proceed)for(classes=(value||"").match(rnotwhite)||[];i<len;i++)if(cur=1===(elem=this[i]).nodeType&&(elem.className?(" "+elem.className+" ").replace(rclass," "):" ")){for(j=0;clazz=classes[j++];)cur.indexOf(" "+clazz+" ")<0&&(cur+=clazz+" ");finalValue=jQuery.trim(cur),elem.className!==finalValue&&(elem.className=finalValue)}return this},removeClass:function(value){var classes,elem,cur,clazz,j,finalValue,i=0,len=this.length,proceed=0===arguments.length||"string"==typeof value&&value;if(jQuery.isFunction(value))return this.each(function(j){jQuery(this).removeClass(value.call(this,j,this.className))});if(proceed)for(classes=(value||"").match(rnotwhite)||[];i<len;i++)if(cur=1===(elem=this[i]).nodeType&&(elem.className?(" "+elem.className+" ").replace(rclass," "):"")){for(j=0;clazz=classes[j++];)for(;0<=cur.indexOf(" "+clazz+" ");)cur=cur.replace(" "+clazz+" "," ");finalValue=value?jQuery.trim(cur):"",elem.className!==finalValue&&(elem.className=finalValue)}return this},toggleClass:function(value,stateVal){var type=typeof value;return"boolean"==typeof stateVal&&"string"==type?stateVal?this.addClass(value):this.removeClass(value):jQuery.isFunction(value)?this.each(function(i){jQuery(this).toggleClass(value.call(this,i,this.className,stateVal),stateVal)}):this.each(function(){if("string"==type)for(var className,i=0,self=jQuery(this),classNames=value.match(rnotwhite)||[];className=classNames[i++];)self.hasClass(className)?self.removeClass(className):self.addClass(className);else type!==strundefined&&"boolean"!=type||(this.className&&jQuery._data(this,"__className__",this.className),this.className=!this.className&&!1!==value&&jQuery._data(this,"__className__")||"")})},hasClass:function(selector){for(var className=" "+selector+" ",i=0,l=this.length;i<l;i++)if(1===this[i].nodeType&&0<=(" "+this[i].className+" ").replace(rclass," ").indexOf(className))return!0;return!1}}),jQuery.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(i,name){jQuery.fn[name]=function(data,fn){return 0<arguments.length?this.on(name,null,data,fn):this.trigger(name)}}),jQuery.fn.extend({hover:function(fnOver,fnOut){return this.mouseenter(fnOver).mouseleave(fnOut||fnOver)},bind:function(types,data,fn){return this.on(types,null,data,fn)},unbind:function(types,fn){return this.off(types,null,fn)},delegate:function(selector,types,data,fn){return this.on(types,selector,data,fn)},undelegate:function(selector,types,fn){return 1===arguments.length?this.off(selector,"**"):this.off(types,selector||"**",fn)}});var nonce=jQuery.now(),rquery=/\?/,rvalidtokens=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;jQuery.parseJSON=function(data){if(window.JSON&&window.JSON.parse)return window.JSON.parse(data+"");var requireNonComma,depth=null,str=jQuery.trim(data+"");return str&&!jQuery.trim(str.replace(rvalidtokens,function(token,comma,open,close){return requireNonComma&&comma&&(depth=0),0===depth?token:(requireNonComma=open||comma,depth+=!close-!open,"")}))?Function("return "+str)():jQuery.error("Invalid JSON: "+data)},jQuery.parseXML=function(data){var xml;if(!data||"string"!=typeof data)return null;try{window.DOMParser?xml=(new DOMParser).parseFromString(data,"text/xml"):((xml=new ActiveXObject("Microsoft.XMLDOM")).async="false",xml.loadXML(data))}catch(e){xml=void 0}return xml&&xml.documentElement&&!xml.getElementsByTagName("parsererror").length||jQuery.error("Invalid XML: "+data),xml};var ajaxLocParts,ajaxLocation,rhash=/#.*$/,rts=/([?&])_=[^&]*/,rheaders=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,rnoContent=/^(?:GET|HEAD)$/,rprotocol=/^\/\//,rurl=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,prefilters={},transports={},allTypes="*/".concat("*");try{ajaxLocation=location.href}catch(e){(ajaxLocation=document.createElement("a")).href="",ajaxLocation=ajaxLocation.href}function addToPrefiltersOrTransports(structure){return function(dataTypeExpression,func){"string"!=typeof dataTypeExpression&&(func=dataTypeExpression,dataTypeExpression="*");var dataType,i=0,dataTypes=dataTypeExpression.toLowerCase().match(rnotwhite)||[];if(jQuery.isFunction(func))for(;dataType=dataTypes[i++];)"+"===dataType.charAt(0)?(dataType=dataType.slice(1)||"*",(structure[dataType]=structure[dataType]||[]).unshift(func)):(structure[dataType]=structure[dataType]||[]).push(func)}}function inspectPrefiltersOrTransports(structure,options,originalOptions,jqXHR){var inspected={},seekingTransport=structure===transports;function inspect(dataType){var selected;return inspected[dataType]=!0,jQuery.each(structure[dataType]||[],function(_,prefilterOrFactory){var dataTypeOrTransport=prefilterOrFactory(options,originalOptions,jqXHR);return"string"!=typeof dataTypeOrTransport||seekingTransport||inspected[dataTypeOrTransport]?seekingTransport?!(selected=dataTypeOrTransport):void 0:(options.dataTypes.unshift(dataTypeOrTransport),inspect(dataTypeOrTransport),!1)}),selected}return inspect(options.dataTypes[0])||!inspected["*"]&&inspect("*")}function ajaxExtend(target,src){var deep,key,flatOptions=jQuery.ajaxSettings.flatOptions||{};for(key in src)void 0!==src[key]&&((flatOptions[key]?target:deep=deep||{})[key]=src[key]);return deep&&jQuery.extend(!0,target,deep),target}ajaxLocParts=rurl.exec(ajaxLocation.toLowerCase())||[],jQuery.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ajaxLocation,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(ajaxLocParts[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":allTypes,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":jQuery.parseJSON,"text xml":jQuery.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(target,settings){return settings?ajaxExtend(ajaxExtend(target,jQuery.ajaxSettings),settings):ajaxExtend(jQuery.ajaxSettings,target)},ajaxPrefilter:addToPrefiltersOrTransports(prefilters),ajaxTransport:addToPrefiltersOrTransports(transports),ajax:function(url,options){"object"==typeof url&&(options=url,url=void 0),options=options||{};var parts,i,cacheURL,responseHeadersString,timeoutTimer,fireGlobals,transport,responseHeaders,s=jQuery.ajaxSetup({},options),callbackContext=s.context||s,globalEventContext=s.context&&(callbackContext.nodeType||callbackContext.jquery)?jQuery(callbackContext):jQuery.event,deferred=jQuery.Deferred(),completeDeferred=jQuery.Callbacks("once memory"),statusCode=s.statusCode||{},requestHeaders={},requestHeadersNames={},state=0,strAbort="canceled",jqXHR={readyState:0,getResponseHeader:function(key){var match;if(2===state){if(!responseHeaders)for(responseHeaders={};match=rheaders.exec(responseHeadersString);)responseHeaders[match[1].toLowerCase()]=match[2];match=responseHeaders[key.toLowerCase()]}return null==match?null:match},getAllResponseHeaders:function(){return 2===state?responseHeadersString:null},setRequestHeader:function(name,value){var lname=name.toLowerCase();return state||(name=requestHeadersNames[lname]=requestHeadersNames[lname]||name,requestHeaders[name]=value),this},overrideMimeType:function(type){return state||(s.mimeType=type),this},statusCode:function(map){if(map)if(state<2)for(var code in map)statusCode[code]=[statusCode[code],map[code]];else jqXHR.always(map[jqXHR.status]);return this},abort:function(statusText){var finalText=statusText||strAbort;return transport&&transport.abort(finalText),done(0,finalText),this}};if(deferred.promise(jqXHR).complete=completeDeferred.add,jqXHR.success=jqXHR.done,jqXHR.error=jqXHR.fail,s.url=((url||s.url||ajaxLocation)+"").replace(rhash,"").replace(rprotocol,ajaxLocParts[1]+"//"),s.type=options.method||options.type||s.method||s.type,s.dataTypes=jQuery.trim(s.dataType||"*").toLowerCase().match(rnotwhite)||[""],null==s.crossDomain&&(parts=rurl.exec(s.url.toLowerCase()),s.crossDomain=!(!parts||parts[1]===ajaxLocParts[1]&&parts[2]===ajaxLocParts[2]&&(parts[3]||("http:"===parts[1]?"80":"443"))===(ajaxLocParts[3]||("http:"===ajaxLocParts[1]?"80":"443")))),s.data&&s.processData&&"string"!=typeof s.data&&(s.data=jQuery.param(s.data,s.traditional)),inspectPrefiltersOrTransports(prefilters,s,options,jqXHR),2===state)return jqXHR;for(i in(fireGlobals=jQuery.event&&s.global)&&0==jQuery.active++&&jQuery.event.trigger("ajaxStart"),s.type=s.type.toUpperCase(),s.hasContent=!rnoContent.test(s.type),cacheURL=s.url,s.hasContent||(s.data&&(cacheURL=s.url+=(rquery.test(cacheURL)?"&":"?")+s.data,delete s.data),!1===s.cache&&(s.url=rts.test(cacheURL)?cacheURL.replace(rts,"$1_="+nonce++):cacheURL+(rquery.test(cacheURL)?"&":"?")+"_="+nonce++)),s.ifModified&&(jQuery.lastModified[cacheURL]&&jqXHR.setRequestHeader("If-Modified-Since",jQuery.lastModified[cacheURL]),jQuery.etag[cacheURL]&&jqXHR.setRequestHeader("If-None-Match",jQuery.etag[cacheURL])),(s.data&&s.hasContent&&!1!==s.contentType||options.contentType)&&jqXHR.setRequestHeader("Content-Type",s.contentType),jqXHR.setRequestHeader("Accept",s.dataTypes[0]&&s.accepts[s.dataTypes[0]]?s.accepts[s.dataTypes[0]]+("*"!==s.dataTypes[0]?", "+allTypes+"; q=0.01":""):s.accepts["*"]),s.headers)jqXHR.setRequestHeader(i,s.headers[i]);if(s.beforeSend&&(!1===s.beforeSend.call(callbackContext,jqXHR,s)||2===state))return jqXHR.abort();for(i in strAbort="abort",{success:1,error:1,complete:1})jqXHR[i](s[i]);if(transport=inspectPrefiltersOrTransports(transports,s,options,jqXHR)){jqXHR.readyState=1,fireGlobals&&globalEventContext.trigger("ajaxSend",[jqXHR,s]),s.async&&0<s.timeout&&(timeoutTimer=setTimeout(function(){jqXHR.abort("timeout")},s.timeout));try{state=1,transport.send(requestHeaders,done)}catch(e){if(!(state<2))throw e;done(-1,e)}}else done(-1,"No Transport");function done(status,nativeStatusText,responses,headers){var isSuccess,success,error,response,modified,statusText=nativeStatusText;2!==state&&(state=2,timeoutTimer&&clearTimeout(timeoutTimer),transport=void 0,responseHeadersString=headers||"",jqXHR.readyState=0<status?4:0,isSuccess=200<=status&&status<300||304===status,responses&&(response=function(s,jqXHR,responses){for(var firstDataType,ct,finalDataType,type,contents=s.contents,dataTypes=s.dataTypes;"*"===dataTypes[0];)dataTypes.shift(),void 0===ct&&(ct=s.mimeType||jqXHR.getResponseHeader("Content-Type"));if(ct)for(type in contents)if(contents[type]&&contents[type].test(ct)){dataTypes.unshift(type);break}if(dataTypes[0]in responses)finalDataType=dataTypes[0];else{for(type in responses){if(!dataTypes[0]||s.converters[type+" "+dataTypes[0]]){finalDataType=type;break}firstDataType=firstDataType||type}finalDataType=finalDataType||firstDataType}if(finalDataType)return finalDataType!==dataTypes[0]&&dataTypes.unshift(finalDataType),responses[finalDataType]}(s,jqXHR,responses)),response=function(s,response,jqXHR,isSuccess){var conv2,current,conv,tmp,prev,converters={},dataTypes=s.dataTypes.slice();if(dataTypes[1])for(conv in s.converters)converters[conv.toLowerCase()]=s.converters[conv];for(current=dataTypes.shift();current;)if(s.responseFields[current]&&(jqXHR[s.responseFields[current]]=response),!prev&&isSuccess&&s.dataFilter&&(response=s.dataFilter(response,s.dataType)),prev=current,current=dataTypes.shift())if("*"===current)current=prev;else if("*"!==prev&&prev!==current){if(!(conv=converters[prev+" "+current]||converters["* "+current]))for(conv2 in converters)if((tmp=conv2.split(" "))[1]===current&&(conv=converters[prev+" "+tmp[0]]||converters["* "+tmp[0]])){!0===conv?conv=converters[conv2]:!0!==converters[conv2]&&(current=tmp[0],dataTypes.unshift(tmp[1]));break}if(!0!==conv)if(conv&&s.throws)response=conv(response);else try{response=conv(response)}catch(e){return{state:"parsererror",error:conv?e:"No conversion from "+prev+" to "+current}}}return{state:"success",data:response}}(s,response,jqXHR,isSuccess),isSuccess?(s.ifModified&&((modified=jqXHR.getResponseHeader("Last-Modified"))&&(jQuery.lastModified[cacheURL]=modified),(modified=jqXHR.getResponseHeader("etag"))&&(jQuery.etag[cacheURL]=modified)),204===status||"HEAD"===s.type?statusText="nocontent":304===status?statusText="notmodified":(statusText=response.state,success=response.data,isSuccess=!(error=response.error))):(error=statusText,!status&&statusText||(statusText="error",status<0&&(status=0))),jqXHR.status=status,jqXHR.statusText=(nativeStatusText||statusText)+"",isSuccess?deferred.resolveWith(callbackContext,[success,statusText,jqXHR]):deferred.rejectWith(callbackContext,[jqXHR,statusText,error]),jqXHR.statusCode(statusCode),statusCode=void 0,fireGlobals&&globalEventContext.trigger(isSuccess?"ajaxSuccess":"ajaxError",[jqXHR,s,isSuccess?success:error]),completeDeferred.fireWith(callbackContext,[jqXHR,statusText]),fireGlobals&&(globalEventContext.trigger("ajaxComplete",[jqXHR,s]),--jQuery.active||jQuery.event.trigger("ajaxStop")))}return jqXHR},getJSON:function(url,data,callback){return jQuery.get(url,data,callback,"json")},getScript:function(url,callback){return jQuery.get(url,void 0,callback,"script")}}),jQuery.each(["get","post"],function(i,method){jQuery[method]=function(url,data,callback,type){return jQuery.isFunction(data)&&(type=type||callback,callback=data,data=void 0),jQuery.ajax({url:url,type:method,dataType:type,data:data,success:callback})}}),jQuery._evalUrl=function(url){return jQuery.ajax({url:url,type:"GET",dataType:"script",async:!1,global:!1,throws:!0})},jQuery.fn.extend({wrapAll:function(html){return jQuery.isFunction(html)?this.each(function(i){jQuery(this).wrapAll(html.call(this,i))}):(this[0]&&(wrap=jQuery(html,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&wrap.insertBefore(this[0]),wrap.map(function(){for(var elem=this;elem.firstChild&&1===elem.firstChild.nodeType;)elem=elem.firstChild;return elem}).append(this)),this);var wrap},wrapInner:function(html){return jQuery.isFunction(html)?this.each(function(i){jQuery(this).wrapInner(html.call(this,i))}):this.each(function(){var self=jQuery(this),contents=self.contents();contents.length?contents.wrapAll(html):self.append(html)})},wrap:function(html){var isFunction=jQuery.isFunction(html);return this.each(function(i){jQuery(this).wrapAll(isFunction?html.call(this,i):html)})},unwrap:function(){return this.parent().each(function(){jQuery.nodeName(this,"body")||jQuery(this).replaceWith(this.childNodes)}).end()}}),jQuery.expr.filters.hidden=function(elem){return elem.offsetWidth<=0&&elem.offsetHeight<=0||!support.reliableHiddenOffsets()&&"none"===(elem.style&&elem.style.display||jQuery.css(elem,"display"))},jQuery.expr.filters.visible=function(elem){return!jQuery.expr.filters.hidden(elem)};var r20=/%20/g,rbracket=/\[\]$/,rCRLF=/\r?\n/g,rsubmitterTypes=/^(?:submit|button|image|reset|file)$/i,rsubmittable=/^(?:input|select|textarea|keygen)/i;jQuery.param=function(a,traditional){function add(key,value){value=jQuery.isFunction(value)?value():null==value?"":value,s[s.length]=encodeURIComponent(key)+"="+encodeURIComponent(value)}var prefix,s=[];if(void 0===traditional&&(traditional=jQuery.ajaxSettings&&jQuery.ajaxSettings.traditional),jQuery.isArray(a)||a.jquery&&!jQuery.isPlainObject(a))jQuery.each(a,function(){add(this.name,this.value)});else for(prefix in a)!function buildParams(prefix,obj,traditional,add){if(jQuery.isArray(obj))jQuery.each(obj,function(i,v){traditional||rbracket.test(prefix)?add(prefix,v):buildParams(prefix+"["+("object"==typeof v?i:"")+"]",v,traditional,add)});else if(traditional||"object"!==jQuery.type(obj))add(prefix,obj);else for(var name in obj)buildParams(prefix+"["+name+"]",obj[name],traditional,add)}(prefix,a[prefix],traditional,add);return s.join("&").replace(r20,"+")},jQuery.fn.extend({serialize:function(){return jQuery.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var elements=jQuery.prop(this,"elements");return elements?jQuery.makeArray(elements):this}).filter(function(){var type=this.type;return this.name&&!jQuery(this).is(":disabled")&&rsubmittable.test(this.nodeName)&&!rsubmitterTypes.test(type)&&(this.checked||!rcheckableType.test(type))}).map(function(i,elem){var val=jQuery(this).val();return null==val?null:jQuery.isArray(val)?jQuery.map(val,function(val){return{name:elem.name,value:val.replace(rCRLF,"\r\n")}}):{name:elem.name,value:val.replace(rCRLF,"\r\n")}}).get()}}),jQuery.ajaxSettings.xhr=void 0!==window.ActiveXObject?function(){return!this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&createStandardXHR()||function(){try{return new window.ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}()}:createStandardXHR;var xhrId=0,xhrCallbacks={},xhrSupported=jQuery.ajaxSettings.xhr();function createStandardXHR(){try{return new window.XMLHttpRequest}catch(e){}}window.attachEvent&&window.attachEvent("onunload",function(){for(var key in xhrCallbacks)xhrCallbacks[key](void 0,!0)}),support.cors=!!xhrSupported&&"withCredentials"in xhrSupported,(xhrSupported=support.ajax=!!xhrSupported)&&jQuery.ajaxTransport(function(options){var callback;if(!options.crossDomain||support.cors)return{send:function(headers,complete){var i,xhr=options.xhr(),id=++xhrId;if(xhr.open(options.type,options.url,options.async,options.username,options.password),options.xhrFields)for(i in options.xhrFields)xhr[i]=options.xhrFields[i];for(i in options.mimeType&&xhr.overrideMimeType&&xhr.overrideMimeType(options.mimeType),options.crossDomain||headers["X-Requested-With"]||(headers["X-Requested-With"]="XMLHttpRequest"),headers)void 0!==headers[i]&&xhr.setRequestHeader(i,headers[i]+"");xhr.send(options.hasContent&&options.data||null),callback=function(_,isAbort){var status,statusText,responses;if(callback&&(isAbort||4===xhr.readyState))if(delete xhrCallbacks[id],callback=void 0,xhr.onreadystatechange=jQuery.noop,isAbort)4!==xhr.readyState&&xhr.abort();else{responses={},status=xhr.status,"string"==typeof xhr.responseText&&(responses.text=xhr.responseText);try{statusText=xhr.statusText}catch(e){statusText=""}status||!options.isLocal||options.crossDomain?1223===status&&(status=204):status=responses.text?200:404}responses&&complete(status,statusText,responses,xhr.getAllResponseHeaders())},options.async?4===xhr.readyState?setTimeout(callback):xhr.onreadystatechange=xhrCallbacks[id]=callback:callback()},abort:function(){callback&&callback(void 0,!0)}}}),jQuery.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(text){return jQuery.globalEval(text),text}}}),jQuery.ajaxPrefilter("script",function(s){void 0===s.cache&&(s.cache=!1),s.crossDomain&&(s.type="GET",s.global=!1)}),jQuery.ajaxTransport("script",function(s){if(s.crossDomain){var script,head=document.head||jQuery("head")[0]||document.documentElement;return{send:function(_,callback){(script=document.createElement("script")).async=!0,s.scriptCharset&&(script.charset=s.scriptCharset),script.src=s.url,script.onload=script.onreadystatechange=function(_,isAbort){!isAbort&&script.readyState&&!/loaded|complete/.test(script.readyState)||(script.onload=script.onreadystatechange=null,script.parentNode&&script.parentNode.removeChild(script),script=null,isAbort||callback(200,"success"))},head.insertBefore(script,head.firstChild)},abort:function(){script&&script.onload(void 0,!0)}}}});var oldCallbacks=[],rjsonp=/(=)\?(?=&|$)|\?\?/;jQuery.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var callback=oldCallbacks.pop()||jQuery.expando+"_"+nonce++;return this[callback]=!0,callback}}),jQuery.ajaxPrefilter("json jsonp",function(s,originalSettings,jqXHR){var callbackName,overwritten,responseContainer,jsonProp=!1!==s.jsonp&&(rjsonp.test(s.url)?"url":"string"==typeof s.data&&!(s.contentType||"").indexOf("application/x-www-form-urlencoded")&&rjsonp.test(s.data)&&"data");if(jsonProp||"jsonp"===s.dataTypes[0])return callbackName=s.jsonpCallback=jQuery.isFunction(s.jsonpCallback)?s.jsonpCallback():s.jsonpCallback,jsonProp?s[jsonProp]=s[jsonProp].replace(rjsonp,"$1"+callbackName):!1!==s.jsonp&&(s.url+=(rquery.test(s.url)?"&":"?")+s.jsonp+"="+callbackName),s.converters["script json"]=function(){return responseContainer||jQuery.error(callbackName+" was not called"),responseContainer[0]},s.dataTypes[0]="json",overwritten=window[callbackName],window[callbackName]=function(){responseContainer=arguments},jqXHR.always(function(){window[callbackName]=overwritten,s[callbackName]&&(s.jsonpCallback=originalSettings.jsonpCallback,oldCallbacks.push(callbackName)),responseContainer&&jQuery.isFunction(overwritten)&&overwritten(responseContainer[0]),responseContainer=overwritten=void 0}),"script"}),jQuery.parseHTML=function(data,context,keepScripts){if(!data||"string"!=typeof data)return null;"boolean"==typeof context&&(keepScripts=context,context=!1),context=context||document;var parsed=rsingleTag.exec(data),scripts=!keepScripts&&[];return parsed?[context.createElement(parsed[1])]:(parsed=jQuery.buildFragment([data],context,scripts),scripts&&scripts.length&&jQuery(scripts).remove(),jQuery.merge([],parsed.childNodes))};var _load=jQuery.fn.load;jQuery.fn.load=function(url,params,callback){if("string"!=typeof url&&_load)return _load.apply(this,arguments);var selector,response,type,self=this,off=url.indexOf(" ");return 0<=off&&(selector=jQuery.trim(url.slice(off,url.length)),url=url.slice(0,off)),jQuery.isFunction(params)?(callback=params,params=void 0):params&&"object"==typeof params&&(type="POST"),0<self.length&&jQuery.ajax({url:url,type:type,dataType:"html",data:params}).done(function(responseText){response=arguments,self.html(selector?jQuery("<div>").append(jQuery.parseHTML(responseText)).find(selector):responseText)}).complete(callback&&function(jqXHR,status){self.each(callback,response||[jqXHR.responseText,status,jqXHR])}),this},jQuery.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(i,type){jQuery.fn[type]=function(fn){return this.on(type,fn)}}),jQuery.expr.filters.animated=function(elem){return jQuery.grep(jQuery.timers,function(fn){return elem===fn.elem}).length};var docElem=window.document.documentElement;function getWindow(elem){return jQuery.isWindow(elem)?elem:9===elem.nodeType&&(elem.defaultView||elem.parentWindow)}jQuery.offset={setOffset:function(elem,options,i){var curPosition,curLeft,curCSSTop,curTop,curOffset,curCSSLeft,position=jQuery.css(elem,"position"),curElem=jQuery(elem),props={};"static"===position&&(elem.style.position="relative"),curOffset=curElem.offset(),curCSSTop=jQuery.css(elem,"top"),curCSSLeft=jQuery.css(elem,"left"),curLeft=("absolute"===position||"fixed"===position)&&-1<jQuery.inArray("auto",[curCSSTop,curCSSLeft])?(curTop=(curPosition=curElem.position()).top,curPosition.left):(curTop=parseFloat(curCSSTop)||0,parseFloat(curCSSLeft)||0),jQuery.isFunction(options)&&(options=options.call(elem,i,curOffset)),null!=options.top&&(props.top=options.top-curOffset.top+curTop),null!=options.left&&(props.left=options.left-curOffset.left+curLeft),"using"in options?options.using.call(elem,props):curElem.css(props)}},jQuery.fn.extend({offset:function(options){if(arguments.length)return void 0===options?this:this.each(function(i){jQuery.offset.setOffset(this,options,i)});var docElem,win,box={top:0,left:0},elem=this[0],doc=elem&&elem.ownerDocument;return doc?(docElem=doc.documentElement,jQuery.contains(docElem,elem)?(typeof elem.getBoundingClientRect!==strundefined&&(box=elem.getBoundingClientRect()),win=getWindow(doc),{top:box.top+(win.pageYOffset||docElem.scrollTop)-(docElem.clientTop||0),left:box.left+(win.pageXOffset||docElem.scrollLeft)-(docElem.clientLeft||0)}):box):void 0},position:function(){if(this[0]){var offsetParent,offset,parentOffset={top:0,left:0},elem=this[0];return"fixed"===jQuery.css(elem,"position")?offset=elem.getBoundingClientRect():(offsetParent=this.offsetParent(),offset=this.offset(),jQuery.nodeName(offsetParent[0],"html")||(parentOffset=offsetParent.offset()),parentOffset.top+=jQuery.css(offsetParent[0],"borderTopWidth",!0),parentOffset.left+=jQuery.css(offsetParent[0],"borderLeftWidth",!0)),{top:offset.top-parentOffset.top-jQuery.css(elem,"marginTop",!0),left:offset.left-parentOffset.left-jQuery.css(elem,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var offsetParent=this.offsetParent||docElem;offsetParent&&!jQuery.nodeName(offsetParent,"html")&&"static"===jQuery.css(offsetParent,"position");)offsetParent=offsetParent.offsetParent;return offsetParent||docElem})}}),jQuery.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(method,prop){var top=/Y/.test(prop);jQuery.fn[method]=function(val){return access(this,function(elem,method,val){var win=getWindow(elem);if(void 0===val)return win?prop in win?win[prop]:win.document.documentElement[method]:elem[method];win?win.scrollTo(top?jQuery(win).scrollLeft():val,top?val:jQuery(win).scrollTop()):elem[method]=val},method,val,arguments.length,null)}}),jQuery.each(["top","left"],function(i,prop){jQuery.cssHooks[prop]=addGetHookIf(support.pixelPosition,function(elem,computed){if(computed)return computed=curCSS(elem,prop),rnumnonpx.test(computed)?jQuery(elem).position()[prop]+"px":computed})}),jQuery.each({Height:"height",Width:"width"},function(name,type){jQuery.each({padding:"inner"+name,content:type,"":"outer"+name},function(defaultExtra,funcName){jQuery.fn[funcName]=function(margin,value){var chainable=arguments.length&&(defaultExtra||"boolean"!=typeof margin),extra=defaultExtra||(!0===margin||!0===value?"margin":"border");return access(this,function(elem,type,value){var doc;return jQuery.isWindow(elem)?elem.document.documentElement["client"+name]:9===elem.nodeType?(doc=elem.documentElement,Math.max(elem.body["scroll"+name],doc["scroll"+name],elem.body["offset"+name],doc["offset"+name],doc["client"+name])):void 0===value?jQuery.css(elem,type,extra):jQuery.style(elem,type,value,extra)},type,chainable?margin:void 0,chainable,null)}})}),jQuery.fn.size=function(){return this.length},jQuery.fn.andSelf=jQuery.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return jQuery});var _jQuery=window.jQuery,_$=window.$;return jQuery.noConflict=function(deep){return window.$===jQuery&&(window.$=_$),deep&&window.jQuery===jQuery&&(window.jQuery=_jQuery),jQuery},typeof noGlobal===strundefined&&(window.$$=jQuery),jQuery}),function($){$.easyui={indexOfArray:function(a,o,id){for(var i=0,_1=a.length;i<_1;i++)if(null==id){if(a[i]==o)return i}else if(a[i][o]==id)return i;return-1},removeArrayItem:function(a,o,id){if("string"==typeof o){for(var i=0,_2=a.length;i<_2;i++)if(a[i][o]==id)return void a.splice(i,1)}else{var _3=this.indexOfArray(a,o);-1!=_3&&a.splice(_3,1)}},addArrayItem:function(a,o,r){var _4=this.indexOfArray(a,o,r?r[o]:void 0);-1==_4?a.push(r||o):a[_4]=r||o},getArrayItem:function(a,o,id){var _5=this.indexOfArray(a,o,id);return-1==_5?null:a[_5]},forEach:function(_6,_7,_8){for(var _9=[],i=0;i<_6.length;i++)_9.push(_6[i]);for(;_9.length;){var _a=_9.shift();if(0==_8(_a))return;if(_7&&_a.children)for(i=_a.children.length-1;0<=i;i--)_9.unshift(_a.children[i])}}},$.parser={auto:!0,onComplete:function(_b){},plugins:["draggable","droppable","resizable","pagination","tooltip","linkbutton","menu","menubutton","splitbutton","switchbutton","progressbar","tree","textbox","passwordbox","filebox","combo","combobox","combotree","combogrid","combotreegrid","tagbox","numberbox","validatebox","searchbox","spinner","numberspinner","timespinner","datetimespinner","calendar","datebox","datetimebox","slider","layout","panel","datagrid","propertygrid","treegrid","datalist","tabs","accordion","window","dialog","form"],parse:function(_c){for(var aa=[],i=0;i<$.parser.plugins.length;i++){var _d=$.parser.plugins[i],r=$(".easyui-"+_d,_c);r.length&&(r[_d]?r.each(function(){$(this)[_d]($.data(this,"options")||{})}):aa.push({name:_d,jq:r}))}if(aa.length&&window.easyloader){for(var _e=[],i=0;i<aa.length;i++)_e.push(aa[i].name);easyloader.load(_e,function(){for(var i=0;i<aa.length;i++){var _f=aa[i].name;aa[i].jq.each(function(){$(this)[_f]($.data(this,"options")||{})})}$.parser.onComplete.call($.parser,_c)})}else $.parser.onComplete.call($.parser,_c)},parseValue:function(_10,_11,_12,_13){_13=_13||0;var v=$.trim(String(_11||""));return v="%"==v.substr(v.length-1,1)?(v=parseFloat(v.substr(0,v.length-1)),0<=_10.toLowerCase().indexOf("width")?Math.floor((_12.width()-_13)*v/100):Math.floor((_12.height()-_13)*v/100)):parseInt(v)||void 0},parseOptions:function(_15,_16){var t=$(_15),_17={},s=$.trim(t.attr("data-options"));if(s&&("{"!=s.substring(0,1)&&(s="{"+s+"}"),_17=new Function("return "+s)()),$.map(["width","height","left","top","minWidth","maxWidth","minHeight","maxHeight"],function(p){var pv=$.trim(_15.style[p]||"");pv&&(-1==pv.indexOf("%")&&(pv=parseInt(pv),isNaN(pv)&&(pv=void 0)),_17[p]=pv)}),_16){for(var _18={},i=0;i<_16.length;i++){var pp=_16[i];if("string"==typeof pp)_18[pp]=t.attr(pp);else for(var _19 in pp){var _1a=pp[_19];"boolean"==_1a?_18[_19]=t.attr(_19)?"true"==t.attr(_19):void 0:"number"==_1a&&(_18[_19]="0"==t.attr(_19)?0:parseFloat(t.attr(_19))||void 0)}}$.extend(_17,_18)}return _17}},$(function(){var d=$('<div style="position:absolute;top:-1000px;width:100px;height:100px;padding:5px"></div>').appendTo("body");$._boxModel=100!=d.outerWidth(),d.remove(),d=$('<div style="position:fixed"></div>').appendTo("body"),$._positionFixed="fixed"==d.css("position"),d.remove(),!window.easyloader&&$.parser.auto&&$.parser.parse()}),$.fn._outerWidth=function(_1b){return null==_1b?this[0]==window?this.width()||document.body.clientWidth:this.outerWidth()||0:this._size("width",_1b)},$.fn._outerHeight=function(_1c){return null==_1c?this[0]==window?this.height()||document.body.clientHeight:this.outerHeight()||0:this._size("height",_1c)},$.fn._scrollLeft=function(_1d){return null==_1d?this.scrollLeft():this.each(function(){$(this).scrollLeft(_1d)})},$.fn._propAttr=$.fn.prop||$.fn.attr,$.fn._size=function(_1e,_1f){return"string"==typeof _1e?"clear"==_1e?this.each(function(){$(this).css({width:"",minWidth:"",maxWidth:"",height:"",minHeight:"",maxHeight:""})}):"fit"==_1e?this.each(function(){_20(this,"BODY"==this.tagName?$("body"):$(this).parent(),!0)}):"unfit"==_1e?this.each(function(){_20(this,$(this).parent(),!1)}):null==_1f?_21(this[0],_1e):this.each(function(){_21(this,_1e,_1f)}):this.each(function(){_1f=_1f||$(this).parent(),$.extend(_1e,_20(this,_1f,_1e.fit)||{});var r1=_22(this,"width",_1f,_1e),r2=_22(this,"height",_1f,_1e);r1||r2?$(this).addClass("easyui-fluid"):$(this).removeClass("easyui-fluid")});function _20(_23,_24,fit){if(!_24.length)return!1;var t=$(_23)[0],p=_24[0],_25=p.fcount||0;return fit?(t.fitted||(t.fitted=!0,p.fcount=_25+1,$(p).addClass("panel-noscroll"),"BODY"==p.tagName&&$("html").addClass("panel-fit")),{width:$(p).width()||1,height:$(p).height()||1}):(t.fitted&&(t.fitted=!1,p.fcount=_25-1,0==p.fcount&&($(p).removeClass("panel-noscroll"),"BODY"==p.tagName&&$("html").removeClass("panel-fit"))),!1)}function _22(_26,_27,_28,_29){var v,t=$(_26),p=_27,p1=p.substr(0,1).toUpperCase()+p.substr(1),min=$.parser.parseValue("min"+p1,_29["min"+p1],_28),max=$.parser.parseValue("max"+p1,_29["max"+p1],_28),val=$.parser.parseValue(p,_29[p],_28),_2a=0<=String(_29[p]||"").indexOf("%");return isNaN(val)?(t._size(p,""),t._size("min"+p1,min),t._size("max"+p1,max)):(v=Math.min(Math.max(val,min||0),max||99999),_2a||(_29[p]=v),t._size("min"+p1,""),t._size("max"+p1,""),t._size(p,v)),_2a||_29.fit}function _21(_2b,_2c,_2d){var t=$(_2b);if(null==_2d){if(_2d=parseInt(_2b.style[_2c]),isNaN(_2d))return;return $._boxModel&&(_2d+=_2e()),_2d}function _2e(){return 0<=_2c.toLowerCase().indexOf("width")?t.outerWidth()-t.width():t.outerHeight()-t.height()}""===_2d?t.css(_2c,""):($._boxModel&&(_2d-=_2e())<0&&(_2d=0),t.css(_2c,_2d+"px"))}}}($$),function($){var _2f=null,_31=!1;function _33(e,_36,_37){var _38=new $.Event(_36);_38.pageX=e.changedTouches[0].pageX,_38.pageY=e.changedTouches[0].pageY,_38.which=_37||1,$(e.target).trigger(_38)}document.addEventListener&&(document.addEventListener("touchstart",function(e){1==e.touches.length&&(_31?(clearTimeout(dblClickTimer),_31=!1,_33(e,"dblclick")):(_31=!0,dblClickTimer=setTimeout(function(){_31=!1},500)),_2f=setTimeout(function(){_33(e,"contextmenu",3)},1e3),_33(e,"mousedown"),($.fn.draggable.isDragging||$.fn.resizable.isResizing)&&e.preventDefault())},!0),document.addEventListener("touchmove",function(e){1==e.touches.length&&(_2f&&clearTimeout(_2f),_33(e,"mousemove"),($.fn.draggable.isDragging||$.fn.resizable.isResizing)&&e.preventDefault())},!0),document.addEventListener("touchend",function(e){_2f&&clearTimeout(_2f),_33(e,"mouseup"),($.fn.draggable.isDragging||$.fn.resizable.isResizing)&&e.preventDefault()},!0))}($$),function($){function _39(e){var _3a=$.data(e.data.target,"draggable"),_3b=_3a.options,_3c=_3a.proxy,_3d=e.data,_3e=_3d.startLeft+e.pageX-_3d.startX,top=_3d.startTop+e.pageY-_3d.startY;_3c&&(_3c.parent()[0]==document.body?(_3e=null!=_3b.deltaX&&null!=_3b.deltaX?e.pageX+_3b.deltaX:e.pageX-e.data.offsetWidth,top=null!=_3b.deltaY&&null!=_3b.deltaY?e.pageY+_3b.deltaY:e.pageY-e.data.offsetHeight):(null!=_3b.deltaX&&null!=_3b.deltaX&&(_3e+=e.data.offsetWidth+_3b.deltaX),null!=_3b.deltaY&&null!=_3b.deltaY&&(top+=e.data.offsetHeight+_3b.deltaY))),e.data.parent!=document.body&&(_3e+=$(e.data.parent).scrollLeft(),top+=$(e.data.parent).scrollTop()),"h"==_3b.axis?_3d.left=_3e:("v"==_3b.axis||(_3d.left=_3e),_3d.top=top)}function _3f(e){var _40=$.data(e.data.target,"draggable"),_41=_40.options;(_40.proxy||$(e.data.target)).css({left:e.data.left,top:e.data.top}),$("body").css("cursor",_41.cursor)}function _43(e){if(!$.fn.draggable.isDragging)return!1;var _44=$.data(e.data.target,"draggable"),_45=_44.options,_46=$(".droppable:visible").filter(function(){return e.data.target!=this}).filter(function(){var _47=$.data(this,"droppable").options.accept;return!_47||0<$(_47).filter(function(){return this==e.data.target}).length});_44.droppables=_46;var _48=_44.proxy;return _48||(_45.proxy?(_48="clone"==_45.proxy?$(e.data.target).clone().insertAfter(e.data.target):_45.proxy.call(e.data.target,e.data.target),_44.proxy=_48):_48=$(e.data.target)),_48.css("position","absolute"),_39(e),_3f(e),_45.onStartDrag.call(e.data.target,e),!1}function _49(e){if(!$.fn.draggable.isDragging)return!1;var _4a=$.data(e.data.target,"draggable");_39(e),0!=_4a.options.onDrag.call(e.data.target,e)&&_3f(e);var _4b=e.data.target;return _4a.droppables.each(function(){var p2,_4c=$(this);_4c.droppable("options").disabled||(p2=_4c.offset(),e.pageX>p2.left&&e.pageX<p2.left+_4c.outerWidth()&&e.pageY>p2.top&&e.pageY<p2.top+_4c.outerHeight()?(this.entered||($(this).trigger("_dragenter",[_4b]),this.entered=!0),$(this).trigger("_dragover",[_4b])):this.entered&&($(this).trigger("_dragleave",[_4b]),this.entered=!1))}),!1}function _4d(e){if(!$.fn.draggable.isDragging)return _4e(),!1;_49(e);var _53,top,_4f=$.data(e.data.target,"draggable"),_50=_4f.proxy,_51=_4f.options;function _54(){_50&&_50.remove(),_4f.proxy=null}function _52(){var _55=!1;return _4f.droppables.each(function(){var _56=$(this);if(!_56.droppable("options").disabled){var p2=_56.offset();return e.pageX>p2.left&&e.pageX<p2.left+_56.outerWidth()&&e.pageY>p2.top&&e.pageY<p2.top+_56.outerHeight()?(_51.revert&&$(e.data.target).css({position:e.data.startPosition,left:e.data.startLeft,top:e.data.startTop}),$(this).trigger("_drop",[e.data.target]),_54(),_55=!0,this.entered=!1):void 0}}),_55||_51.revert||_54(),_55}return _51.revert?1==_52()?$(e.data.target).css({position:e.data.startPosition,left:e.data.startLeft,top:e.data.startTop}):_50?(top=_50.parent()[0]==document.body?(_53=e.data.startX-e.data.offsetWidth,e.data.startY-e.data.offsetHeight):(_53=e.data.startLeft,e.data.startTop),_50.animate({left:_53,top:top},function(){_54()})):$(e.data.target).animate({left:e.data.startLeft,top:e.data.startTop},function(){$(e.data.target).css("position",e.data.startPosition)}):($(e.data.target).css({position:"absolute",left:e.data.left,top:e.data.top}),_52()),_51.onStopDrag.call(e.data.target,e),_4e(),!1}function _4e(){$.fn.draggable.timer&&(clearTimeout($.fn.draggable.timer),$.fn.draggable.timer=void 0),$(document).unbind(".draggable"),$.fn.draggable.isDragging=!1,setTimeout(function(){$("body").css("cursor","")},100)}$.fn.draggable=function(_57,_58){return"string"==typeof _57?$.fn.draggable.methods[_57](this,_58):this.each(function(){var _5a=$.data(this,"draggable"),_59=_5a?(_5a.handle.unbind(".draggable"),$.extend(_5a.options,_57)):$.extend({},$.fn.draggable.defaults,$.fn.draggable.parseOptions(this),_57||{}),_5b=_59.handle?"string"==typeof _59.handle?$(_59.handle,this):_59.handle:$(this);function _5d(e){var _62=$.data(e.data.target,"draggable"),_63=_62.handle,_64=$(_63).offset(),_65=$(_63).outerWidth(),_66=$(_63).outerHeight(),t=e.pageY-_64.top,r=_64.left+_65-e.pageX,b=_64.top+_66-e.pageY,l=e.pageX-_64.left;return Math.min(t,r,b,l)>_62.options.edge}$.data(this,"draggable",{options:_59,handle:_5b}),_59.disabled?$(this).css("cursor",""):_5b.unbind(".draggable").bind("mousemove.draggable",{target:this},function(e){var _5c;$.fn.draggable.isDragging||(_5c=$.data(e.data.target,"draggable").options,_5d(e)?$(this).css("cursor",_5c.cursor):$(this).css("cursor",""))}).bind("mouseleave.draggable",{target:this},function(e){$(this).css("cursor","")}).bind("mousedown.draggable",{target:this},function(e){if(0!=_5d(e)){$(this).css("cursor","");var _5e=$(e.data.target).position(),_5f=$(e.data.target).offset(),_60={startPosition:$(e.data.target).css("position"),startLeft:_5e.left,startTop:_5e.top,left:_5e.left,top:_5e.top,startX:e.pageX,startY:e.pageY,width:$(e.data.target).outerWidth(),height:$(e.data.target).outerHeight(),offsetWidth:e.pageX-_5f.left,offsetHeight:e.pageY-_5f.top,target:e.data.target,parent:$(e.data.target).parent()[0]};$.extend(e.data,_60);var _61=$.data(e.data.target,"draggable").options;if(0!=_61.onBeforeDrag.call(e.data.target,e))return $(document).bind("mousedown.draggable",e.data,_43),$(document).bind("mousemove.draggable",e.data,_49),$(document).bind("mouseup.draggable",e.data,_4d),$.fn.draggable.timer=setTimeout(function(){$.fn.draggable.isDragging=!0,_43(e)},_61.delay),!1}})})},$.fn.draggable.methods={options:function(jq){return $.data(jq[0],"draggable").options},proxy:function(jq){return $.data(jq[0],"draggable").proxy},enable:function(jq){return jq.each(function(){$(this).draggable({disabled:!1})})},disable:function(jq){return jq.each(function(){$(this).draggable({disabled:!0})})}},$.fn.draggable.parseOptions=function(_67){var t=$(_67);return $.extend({},$.parser.parseOptions(_67,["cursor","handle","axis",{revert:"boolean",deltaX:"number",deltaY:"number",edge:"number",delay:"number"}]),{disabled:!!t.attr("disabled")||void 0})},$.fn.draggable.defaults={proxy:null,revert:!1,cursor:"move",deltaX:null,deltaY:null,handle:null,disabled:!1,edge:0,axis:null,delay:100,onBeforeDrag:function(e){},onStartDrag:function(e){},onDrag:function(e){},onStopDrag:function(e){}},$.fn.draggable.isDragging=!1}($$),function($){$.fn.droppable=function(_6e,_6f){return"string"==typeof _6e?$.fn.droppable.methods[_6e](this,_6f):(_6e=_6e||{},this.each(function(){var _69,_70=$.data(this,"droppable");_70?$.extend(_70.options,_6e):($(_69=this).addClass("droppable"),$(_69).bind("_dragenter",function(e,_6a){$.data(_69,"droppable").options.onDragEnter.apply(_69,[e,_6a])}),$(_69).bind("_dragleave",function(e,_6b){$.data(_69,"droppable").options.onDragLeave.apply(_69,[e,_6b])}),$(_69).bind("_dragover",function(e,_6c){$.data(_69,"droppable").options.onDragOver.apply(_69,[e,_6c])}),$(_69).bind("_drop",function(e,_6d){$.data(_69,"droppable").options.onDrop.apply(_69,[e,_6d])}),$.data(this,"droppable",{options:$.extend({},$.fn.droppable.defaults,$.fn.droppable.parseOptions(this),_6e)}))}))},$.fn.droppable.methods={options:function(jq){return $.data(jq[0],"droppable").options},enable:function(jq){return jq.each(function(){$(this).droppable({disabled:!1})})},disable:function(jq){return jq.each(function(){$(this).droppable({disabled:!0})})}},$.fn.droppable.parseOptions=function(_71){var t=$(_71);return $.extend({},$.parser.parseOptions(_71,["accept"]),{disabled:!!t.attr("disabled")||void 0})},$.fn.droppable.defaults={accept:null,disabled:!1,onDragEnter:function(e,_72){},onDragOver:function(e,_73){},onDragLeave:function(e,_74){},onDrop:function(e,_75){}}}($$),function($){$.fn.resizable=function(_76,_77){if("string"==typeof _76)return $.fn.resizable.methods[_76](this,_77);function _78(e){var _7b,_7c,_79=e.data,_7a=$.data(_79.target,"resizable").options;-1!=_79.dir.indexOf("e")&&(_7b=_79.startWidth+e.pageX-_79.startX,_7b=Math.min(Math.max(_7b,_7a.minWidth),_7a.maxWidth),_79.width=_7b),-1!=_79.dir.indexOf("s")&&(_7c=_79.startHeight+e.pageY-_79.startY,_7c=Math.min(Math.max(_7c,_7a.minHeight),_7a.maxHeight),_79.height=_7c),-1!=_79.dir.indexOf("w")&&(_7b=_79.startWidth-e.pageX+_79.startX,_7b=Math.min(Math.max(_7b,_7a.minWidth),_7a.maxWidth),_79.width=_7b,_79.left=_79.startLeft+_79.startWidth-_79.width),-1!=_79.dir.indexOf("n")&&(_7c=_79.startHeight-e.pageY+_79.startY,_7c=Math.min(Math.max(_7c,_7a.minHeight),_7a.maxHeight),_79.height=_7c,_79.top=_79.startTop+_79.startHeight-_79.height)}function _7d(e){var _7e=e.data,t=$(_7e.target);t.css({left:_7e.left,top:_7e.top}),t.outerWidth()!=_7e.width&&t._outerWidth(_7e.width),t.outerHeight()!=_7e.height&&t._outerHeight(_7e.height)}function _7f(e){return $.fn.resizable.isResizing=!0,$.data(e.data.target,"resizable").options.onStartResize.call(e.data.target,e),!1}function _80(e){return _78(e),0!=$.data(e.data.target,"resizable").options.onResize.call(e.data.target,e)&&_7d(e),!1}function _81(e){return $.fn.resizable.isResizing=!1,_78(e),_7d(e),$.data(e.data.target,"resizable").options.onStopResize.call(e.data.target,e),$(document).unbind(".resizable"),$("body").css("cursor",""),!1}return this.each(function(){var _82=null,_83=$.data(this,"resizable");function _84(e){var tt=$(e.data.target),dir="",_87=tt.offset(),_88=tt.outerWidth(),_89=tt.outerHeight(),_8a=_82.edge;e.pageY>_87.top&&e.pageY<_87.top+_8a?dir+="n":e.pageY<_87.top+_89&&e.pageY>_87.top+_89-_8a&&(dir+="s"),e.pageX>_87.left&&e.pageX<_87.left+_8a?dir+="w":e.pageX<_87.left+_88&&e.pageX>_87.left+_88-_8a&&(dir+="e");for(var _8b=_82.handles.split(","),i=0;i<_8b.length;i++){var _8c=_8b[i].replace(/(^\s*)|(\s*$)/g,"");if("all"==_8c||_8c==dir)return dir}return""}_83?($(this).unbind(".resizable"),_82=$.extend(_83.options,_76||{})):(_82=$.extend({},$.fn.resizable.defaults,$.fn.resizable.parseOptions(this),_76||{}),$.data(this,"resizable",{options:_82})),1!=_82.disabled&&$(this).bind("mousemove.resizable",{target:this},function(e){var dir;$.fn.resizable.isResizing||(""==(dir=_84(e))?$(e.data.target).css("cursor",""):$(e.data.target).css("cursor",dir+"-resize"))}).bind("mouseleave.resizable",{target:this},function(e){$(e.data.target).css("cursor","")}).bind("mousedown.resizable",{target:this},function(e){var _86,dir=_84(e);function _85(css){var val=parseInt($(e.data.target).css(css));return isNaN(val)?0:val}""!=dir&&(_86={target:e.data.target,dir:dir,startLeft:_85("left"),startTop:_85("top"),left:_85("left"),top:_85("top"),startX:e.pageX,startY:e.pageY,startWidth:$(e.data.target).outerWidth(),startHeight:$(e.data.target).outerHeight(),width:$(e.data.target).outerWidth(),height:$(e.data.target).outerHeight(),deltaWidth:$(e.data.target).outerWidth()-$(e.data.target).width(),deltaHeight:$(e.data.target).outerHeight()-$(e.data.target).height()},$(document).bind("mousedown.resizable",_86,_7f),$(document).bind("mousemove.resizable",_86,_80),$(document).bind("mouseup.resizable",_86,_81),$("body").css("cursor",dir+"-resize"))})})},$.fn.resizable.methods={options:function(jq){return $.data(jq[0],"resizable").options},enable:function(jq){return jq.each(function(){$(this).resizable({disabled:!1})})},disable:function(jq){return jq.each(function(){$(this).resizable({disabled:!0})})}},$.fn.resizable.parseOptions=function(_8d){var t=$(_8d);return $.extend({},$.parser.parseOptions(_8d,["handles",{minWidth:"number",minHeight:"number",maxWidth:"number",maxHeight:"number",edge:"number"}]),{disabled:!!t.attr("disabled")||void 0})},$.fn.resizable.defaults={disabled:!1,handles:"n, e, s, w, ne, se, sw, nw, all",minWidth:10,minHeight:10,maxWidth:1e4,maxHeight:1e4,edge:5,onStartResize:function(e){},onResize:function(e){},onStopResize:function(e){}},$.fn.resizable.isResizing=!1}($$),function($){function _8e(_8f,_90){var btn,_92,_93,_94,_95,_96,_91=$.data(_8f,"linkbutton").options;_90&&$.extend(_91,_90),(_91.width||_91.height||_91.fit)&&(_92=(btn=$(_8f)).parent(),(_93=btn.is(":visible"))||(_94=$('<div style="display:none"></div>').insertBefore(_8f),_95={position:btn.css("position"),display:btn.css("display"),left:btn.css("left")},btn.appendTo("body"),btn.css({position:"absolute",display:"inline-block",left:-2e4})),btn._size(_91,_92),(_96=btn.find(".l-btn-left")).css("margin-top",0),_96.css("margin-top",parseInt((btn.height()-_96.height())/2)+"px"),_93||(btn.insertAfter(_94),btn.css(_95),_94.remove()))}function _9b(_9d,_9e){var _9f=$.data(_9d,"linkbutton").options;_9e?(_9f.group&&$('a.l-btn[group="'+_9f.group+'"]').each(function(){var o=$(this).linkbutton("options");o.toggle&&($(this).removeClass("l-btn-selected l-btn-plain-selected"),o.selected=!1)}),$(_9d).addClass(_9f.plain?"l-btn-selected l-btn-plain-selected":"l-btn-selected"),_9f.selected=!0):_9f.group||($(_9d).removeClass("l-btn-selected l-btn-plain-selected"),_9f.selected=!1)}function _9c(_a0,_a1){var _a4,_a2=$.data(_a0,"linkbutton"),_a3=_a2.options;$(_a0).removeClass("l-btn-disabled l-btn-plain-disabled"),_a1?(_a3.disabled=!0,(_a4=$(_a0).attr("href"))&&(_a2.href=_a4,$(_a0).attr("href","javascript:;")),_a0.onclick&&(_a2.onclick=_a0.onclick,_a0.onclick=null),_a3.plain?$(_a0).addClass("l-btn-disabled l-btn-plain-disabled"):$(_a0).addClass("l-btn-disabled")):(_a3.disabled=!1,_a2.href&&$(_a0).attr("href",_a2.href),_a2.onclick&&(_a0.onclick=_a2.onclick))}$.fn.linkbutton=function(_a5,_a6){return"string"==typeof _a5?$.fn.linkbutton.methods[_a5](this,_a6):(_a5=_a5||{},this.each(function(){var _a7=$.data(this,"linkbutton");_a7?$.extend(_a7.options,_a5):($.data(this,"linkbutton",{options:$.extend({},$.fn.linkbutton.defaults,$.fn.linkbutton.parseOptions(this),_a5)}),$(this).removeAttr("disabled"),$(this).bind("_resize",function(e,_a8){return($(this).hasClass("easyui-fluid")||_a8)&&_8e(this),!1})),function(_98){var _99=$.data(_98,"linkbutton").options,t=$(_98).empty();t.addClass("l-btn").removeClass("l-btn-plain l-btn-selected l-btn-plain-selected l-btn-outline"),t.removeClass("l-btn-small l-btn-medium l-btn-large").addClass("l-btn-"+_99.size),_99.plain&&t.addClass("l-btn-plain"),_99.outline&&t.addClass("l-btn-outline"),_99.selected&&t.addClass(_99.plain?"l-btn-selected l-btn-plain-selected":"l-btn-selected"),t.attr("group",_99.group||""),t.attr("id",_99.id||"");var _9a=$('<span class="l-btn-left"></span>').appendTo(t);_99.text?$('<span class="l-btn-text"></span>').html(_99.text).appendTo(_9a):$('<span class="l-btn-text l-btn-empty">&nbsp;</span>').appendTo(_9a),_99.iconCls&&($('<span class="l-btn-icon">&nbsp;</span>').addClass(_99.iconCls).appendTo(_9a),_9a.addClass("l-btn-icon-"+_99.iconAlign)),t.unbind(".linkbutton").bind("focus.linkbutton",function(){_99.disabled||$(this).addClass("l-btn-focus")}).bind("blur.linkbutton",function(){$(this).removeClass("l-btn-focus")}).bind("click.linkbutton",function(){_99.disabled||(_99.toggle&&(_99.selected?$(this).linkbutton("unselect"):$(this).linkbutton("select")),_99.onClick.call(this))}),_9b(_98,_99.selected),_9c(_98,_99.disabled)}(this),_8e(this)}))},$.fn.linkbutton.methods={options:function(jq){return $.data(jq[0],"linkbutton").options},resize:function(jq,_a9){return jq.each(function(){_8e(this,_a9)})},enable:function(jq){return jq.each(function(){_9c(this,!1)})},disable:function(jq){return jq.each(function(){_9c(this,!0)})},select:function(jq){return jq.each(function(){_9b(this,!0)})},unselect:function(jq){return jq.each(function(){_9b(this,!1)})}},$.fn.linkbutton.parseOptions=function(_aa){var t=$(_aa);return $.extend({},$.parser.parseOptions(_aa,["id","iconCls","iconAlign","group","size","text",{plain:"boolean",toggle:"boolean",selected:"boolean",outline:"boolean"}]),{disabled:!!t.attr("disabled")||void 0,text:$.trim(t.html())||void 0,iconCls:t.attr("icon")||t.attr("iconCls")})},$.fn.linkbutton.defaults={id:null,disabled:!1,toggle:!1,selected:!1,outline:!1,group:null,plain:!1,text:"",iconCls:null,iconAlign:"left",size:"small",onClick:function(){}}}($$),function($){function _ab(_ac){var _ad=$.data(_ac,"pagination"),_ae=_ad.options,bb=_ad.bb={},_af=$(_ac).addClass("pagination").html('<table cellspacing="0" cellpadding="0" border="0"><tr></tr></table>'),tr=_af.find("tr"),aa=$.extend([],_ae.layout);_ae.showPageList||_b0(aa,"list"),_ae.showPageInfo||_b0(aa,"info"),_ae.showRefresh||_b0(aa,"refresh"),"sep"==aa[0]&&aa.shift(),"sep"==aa[aa.length-1]&&aa.pop();for(var _b1=0;_b1<aa.length;_b1++){var _b2=aa[_b1];if("list"==_b2){var ps=$('<select class="pagination-page-list"></select>');ps.bind("change",function(){_ae.pageSize=parseInt($(this).val()),_ae.onChangePageSize.call(_ac,_ae.pageSize),_b8(_ac,_ae.pageNumber)});for(var i=0;i<_ae.pageList.length;i++)$("<option></option>").text(_ae.pageList[i]).appendTo(ps);$("<td></td>").append(ps).appendTo(tr)}else"sep"==_b2?$('<td><div class="pagination-btn-separator"></div></td>').appendTo(tr):"first"==_b2?bb.first=_b3("first"):"prev"==_b2?bb.prev=_b3("prev"):"next"==_b2?bb.next=_b3("next"):"last"==_b2?bb.last=_b3("last"):"manual"==_b2?($('<span style="padding-left:6px;"></span>').html(_ae.beforePageText).appendTo(tr).wrap("<td></td>"),bb.num=$('<input class="pagination-num" type="text" value="1" size="2">').appendTo(tr).wrap("<td></td>"),bb.num.unbind(".pagination").bind("keydown.pagination",function(e){if(13==e.keyCode){var _b4=parseInt($(this).val())||1;return _b8(_ac,_b4),!1}}),bb.after=$('<span style="padding-right:6px;"></span>').appendTo(tr).wrap("<td></td>")):"refresh"==_b2?bb.refresh=_b3("refresh"):"links"==_b2?$('<td class="pagination-links"></td>').appendTo(tr):"info"==_b2&&(_b1==aa.length-1?($('<div class="pagination-info"></div>').appendTo(_af),$('<div style="clear:both;"></div>').appendTo(_af)):$('<td><div class="pagination-info"></div></td>').appendTo(tr))}if(_ae.buttons)if($('<td><div class="pagination-btn-separator"></div></td>').appendTo(tr),$.isArray(_ae.buttons))for(var i=0;i<_ae.buttons.length;i++){var btn=_ae.buttons[i],td,a;"-"==btn?$('<td><div class="pagination-btn-separator"></div></td>').appendTo(tr):(td=$("<td></td>").appendTo(tr),a=$('<a href="javascript:;"></a>').appendTo(td),a[0].onclick=eval(btn.handler||function(){}),a.linkbutton($.extend({},btn,{plain:!0})))}else{var td=$("<td></td>").appendTo(tr);$(_ae.buttons).appendTo(td).show()}function _b3(_b5){var btn=_ae.nav[_b5],a=$('<a href="javascript:;"></a>').appendTo(tr);return a.wrap("<td></td>"),a.linkbutton({iconCls:btn.iconCls,plain:!0}).unbind(".pagination").bind("click.pagination",function(){btn.handler.call(_ac)}),a}function _b0(aa,_b6){var _b7=$.inArray(_b6,aa);return 0<=_b7&&aa.splice(_b7,1),aa}}function _b8(_b9,_ba){var _bb=$.data(_b9,"pagination").options;_bc(_b9,{pageNumber:_ba}),_bb.onSelectPage.call(_b9,_bb.pageNumber,_bb.pageSize)}function _bc(_bd,_be){var _bf=$.data(_bd,"pagination"),_c0=_bf.options,bb=_bf.bb;$.extend(_c0,_be||{});var ps=$(_bd).find("select.pagination-page-list");ps.length&&(ps.val(_c0.pageSize+""),_c0.pageSize=parseInt(ps.val()));var _c1=Math.ceil(_c0.total/_c0.pageSize)||1;_c0.pageNumber<1&&(_c0.pageNumber=1),_c0.pageNumber>_c1&&(_c0.pageNumber=_c1),0==_c0.total&&(_c1=_c0.pageNumber=0),bb.num&&bb.num.val(_c0.pageNumber),bb.after&&bb.after.html(_c0.afterPageText.replace(/{pages}/,_c1));var td=$(_bd).find("td.pagination-links");if(td.length){td.empty();var _c2=_c0.pageNumber-Math.floor(_c0.links/2);_c2<1&&(_c2=1);var _c3=_c2+_c0.links-1;_c1<_c3&&(_c3=_c1),(_c2=_c3-_c0.links+1)<1&&(_c2=1);for(var i=_c2;i<=_c3;i++){var a=$('<a class="pagination-link" href="javascript:;"></a>').appendTo(td);a.linkbutton({plain:!0,text:i}),i==_c0.pageNumber?a.linkbutton("select"):a.unbind(".pagination").bind("click.pagination",{pageNumber:i},function(e){_b8(_bd,e.data.pageNumber)})}}var _c4=_c0.displayMsg;_c4=(_c4=(_c4=_c4.replace(/{from}/,0==_c0.total?0:_c0.pageSize*(_c0.pageNumber-1)+1)).replace(/{to}/,Math.min(_c0.pageSize*_c0.pageNumber,_c0.total))).replace(/{total}/,_c0.total),$(_bd).find("div.pagination-info").html(_c4),bb.first&&bb.first.linkbutton({disabled:!_c0.total||1==_c0.pageNumber}),bb.prev&&bb.prev.linkbutton({disabled:!_c0.total||1==_c0.pageNumber}),bb.next&&bb.next.linkbutton({disabled:_c0.pageNumber==_c1}),bb.last&&bb.last.linkbutton({disabled:_c0.pageNumber==_c1}),_c5(_bd,_c0.loading)}function _c5(_c6,_c7){var _c8=$.data(_c6,"pagination"),_c9=_c8.options;_c9.loading=_c7,_c9.showRefresh&&_c8.bb.refresh&&_c8.bb.refresh.linkbutton({iconCls:_c9.loading?"pagination-loading":"pagination-load"})}$.fn.pagination=function(_ca,_cb){return"string"==typeof _ca?$.fn.pagination.methods[_ca](this,_cb):(_ca=_ca||{},this.each(function(){var _cc,_cd=$.data(this,"pagination");_cd?_cc=$.extend(_cd.options,_ca):(_cc=$.extend({},$.fn.pagination.defaults,$.fn.pagination.parseOptions(this),_ca),$.data(this,"pagination",{options:_cc})),_ab(this),_bc(this)}))},$.fn.pagination.methods={options:function(jq){return $.data(jq[0],"pagination").options},loading:function(jq){return jq.each(function(){_c5(this,!0)})},loaded:function(jq){return jq.each(function(){_c5(this,!1)})},refresh:function(jq,_ce){return jq.each(function(){_bc(this,_ce)})},select:function(jq,_cf){return jq.each(function(){_b8(this,_cf)})}},$.fn.pagination.parseOptions=function(_d0){var t=$(_d0);return $.extend({},$.parser.parseOptions(_d0,[{total:"number",pageSize:"number",pageNumber:"number",links:"number"},{loading:"boolean",showPageList:"boolean",showPageInfo:"boolean",showRefresh:"boolean"}]),{pageList:t.attr("pageList")?eval(t.attr("pageList")):void 0})},$.fn.pagination.defaults={total:1,pageSize:10,pageNumber:1,pageList:[10,20,30,50],loading:!1,buttons:null,showPageList:!0,showPageInfo:!0,showRefresh:!0,links:10,layout:["list","sep","first","prev","sep","manual","sep","next","last","sep","refresh","info"],onSelectPage:function(_d1,_d2){},onBeforeRefresh:function(_d3,_d4){},onRefresh:function(_d5,_d6){},onChangePageSize:function(_d7){},beforePageText:"Page",afterPageText:"of {pages}",displayMsg:"Displaying {from} to {to} of {total} items",nav:{first:{iconCls:"pagination-first",handler:function(){1<$(this).pagination("options").pageNumber&&$(this).pagination("select",1)}},prev:{iconCls:"pagination-prev",handler:function(){var _d9=$(this).pagination("options");1<_d9.pageNumber&&$(this).pagination("select",_d9.pageNumber-1)}},next:{iconCls:"pagination-next",handler:function(){var _da=$(this).pagination("options"),_db=Math.ceil(_da.total/_da.pageSize);_da.pageNumber<_db&&$(this).pagination("select",_da.pageNumber+1)}},last:{iconCls:"pagination-last",handler:function(){var _dc=$(this).pagination("options"),_dd=Math.ceil(_dc.total/_dc.pageSize);_dc.pageNumber<_dd&&$(this).pagination("select",_dd)}},refresh:{iconCls:"pagination-refresh",handler:function(){var _de=$(this).pagination("options");0!=_de.onBeforeRefresh.call(this,_de.pageNumber,_de.pageSize)&&($(this).pagination("select",_de.pageNumber),_de.onRefresh.call(this,_de.pageNumber,_de.pageSize))}}}}}($$),function($){function _ef(_f0){var _f1=$.data(_f0,"tree"),_f2=_f1.options,_f3=_f1.tree;function _f9(_104,pop){return $(_104).closest("ul.tree").tree(pop?"pop":"getData",_104)}function _fa(_105,_106){$(_105).draggable("proxy").find("span.tree-dnd-icon").removeClass("tree-dnd-yes tree-dnd-no").addClass(_106?"tree-dnd-yes":"tree-dnd-no")}function _102(_107,dest){function _108(){var node=_f9(_107,!0);$(_f0).tree("append",{parent:dest,data:[node]}),_f2.onDrop.call(_f0,dest,node,"append")}"closed"==_ea(_f0,dest).state?_13d(_f0,dest,function(){_108()}):_108()}function _103(_109,dest,_10a){var _10b={};"top"==_10a?_10b.before=dest:_10b.after=dest;var node=_f9(_109,!0);_10b.data=node,$(_f0).tree("insert",_10b),_f2.onDrop.call(_f0,dest,node,_10a)}_f1.disabledNodes=[],_f2.dnd=!0,_f3.find("div.tree-node").draggable({disabled:!1,revert:!0,cursor:"pointer",proxy:function(_f4){var p=$('<div class="tree-node-proxy"></div>').appendTo("body");return p.html('<span class="tree-dnd-icon tree-dnd-no">&nbsp;</span>'+$(_f4).find(".tree-title").html()),p.hide(),p},deltaX:15,deltaY:15,onBeforeDrag:function(e){if(0==_f2.onBeforeDrag.call(_f0,_ea(_f0,this)))return!1;if($(e.target).hasClass("tree-hit")||$(e.target).hasClass("tree-checkbox"))return!1;if(1!=e.which)return!1;var _f5=$(this).find("span.tree-indent");_f5.length&&(e.data.offsetWidth-=_f5.length*_f5.width())},onStartDrag:function(e){$(this).next("ul").find("div.tree-node").each(function(){$(this).droppable("disable"),_f1.disabledNodes.push(this)}),$(this).draggable("proxy").css({left:-1e4,top:-1e4}),_f2.onStartDrag.call(_f0,_ea(_f0,this));var _f6=_ea(_f0,this);null==_f6.id&&(_f6.id="easyui_tree_node_id_temp",_12c(_f0,_f6)),_f1.draggingNodeId=_f6.id},onDrag:function(e){var x1=e.pageX,y1=e.pageY,x2=e.data.startX,y2=e.data.startY;3<Math.sqrt((x1-x2)*(x1-x2)+(y1-y2)*(y1-y2))&&$(this).draggable("proxy").show(),this.pageY=e.pageY},onStopDrag:function(){for(var i=0;i<_f1.disabledNodes.length;i++)$(_f1.disabledNodes[i]).droppable("enable");_f1.disabledNodes=[];var _f7=_182(_f0,_f1.draggingNodeId);_f7&&"easyui_tree_node_id_temp"==_f7.id&&(_f7.id="",_12c(_f0,_f7)),_f2.onStopDrag.call(_f0,_f7)}}).droppable({accept:"div.tree-node",onDragEnter:function(e,_f8){0==_f2.onDragEnter.call(_f0,this,_f9(_f8))&&(_fa(_f8,!1),$(this).removeClass("tree-node-append tree-node-top tree-node-bottom"),$(this).droppable("disable"),_f1.disabledNodes.push(this))},onDragOver:function(e,_fb){var _fc,top,_fd;$(this).droppable("options").disabled||(_fc=_fb.pageY,_fd=(top=$(this).offset().top)+$(this).outerHeight(),_fa(_fb,!0),$(this).removeClass("tree-node-append tree-node-top tree-node-bottom"),top+(_fd-top)/2<_fc?_fd-_fc<5?$(this).addClass("tree-node-bottom"):$(this).addClass("tree-node-append"):_fc-top<5?$(this).addClass("tree-node-top"):$(this).addClass("tree-node-append"),0==_f2.onDragOver.call(_f0,this,_f9(_fb))&&(_fa(_fb,!1),$(this).removeClass("tree-node-append tree-node-top tree-node-bottom"),$(this).droppable("disable"),_f1.disabledNodes.push(this)))},onDragLeave:function(e,_fe){_fa(_fe,!1),$(this).removeClass("tree-node-append tree-node-top tree-node-bottom"),_f2.onDragLeave.call(_f0,this,_f9(_fe))},onDrop:function(e,_ff){var _100,_101=$(this).hasClass("tree-node-append")?(_100=_102,"append"):(_100=_103,$(this).hasClass("tree-node-top")?"top":"bottom");0!=_f2.onBeforeDrop.call(_f0,this,_f9(_ff),_101)&&_100(_ff,this,_101),$(this).removeClass("tree-node-append tree-node-top tree-node-bottom")}})}function _10c(_10d,_10e,_10f,_110){var opts=$.data(_10d,"tree").options;if(opts.checkbox){var _112=_ea(_10d,_10e);if(_112&&_112.checkState){var ck=$(_10e).find(".tree-checkbox");if(null==_10f&&(_10f=!ck.hasClass("tree-checkbox1")&&(!!ck.hasClass("tree-checkbox0")||(null==_112._checked&&(_112._checked=$(_10e).find(".tree-checkbox").hasClass("tree-checkbox1")),!_112._checked))),_112._checked=_10f){if(ck.hasClass("tree-checkbox1"))return}else if(ck.hasClass("tree-checkbox0"))return;!_110&&0==opts.onBeforeCheck.call(_10d,_112,_10f)||(opts.cascadeCheck?(function(_116,_117,_118){var opts=$.data(_116,"tree").options,flag=_118?1:0;if(_115(_116,_117,flag),opts.deepCheck)$.easyui.forEach(_117.children||[],!0,function(n){_115(_116,n,flag)});else{var _119=[];_117.children&&_117.children.length&&_119.push(_117),$.easyui.forEach(_117.children||[],!0,function(n){n.hidden||(_115(_116,n,flag),n.children&&n.children.length&&_119.push(n))});for(var i=_119.length-1;0<=i;i--){var node=_119[i];_115(_116,node,_11a(node))}}}(_10d,_112,_10f),_114(_10d,_112)):_115(_10d,_112,_10f?"1":"0"),_110||opts.onCheck.call(_10d,_112,_10f))}}}function _115(_11b,_11c,flag){var ck,opts=$.data(_11b,"tree").options;_11c.checkState&&null!=flag&&(_11c.hidden&&!opts.deepCheck||(ck=$("#"+_11c.domId).find(".tree-checkbox"),_11c.checkState=["unchecked","checked","indeterminate"][flag],_11c.checked="checked"==_11c.checkState,ck.removeClass("tree-checkbox0 tree-checkbox1 tree-checkbox2"),ck.addClass("tree-checkbox"+flag)))}function _114(_11d,_11e){var pd=_11f(_11d,$("#"+_11e.domId)[0]);pd&&(_115(_11d,pd,_11a(pd)),_114(_11d,pd))}function _11a(row){var c0=0,c1=0,len=0;if($.easyui.forEach(row.children||[],!1,function(r){r.checkState&&(len++,"checked"==r.checkState?c1++:"unchecked"==r.checkState&&c0++)}),0!=len){return c0==len?0:c1==len?1:2}}function _124(_125,ul,data,_126,_127){var _128=$.data(_125,"tree"),opts=_128.options,_129=$(ul).prevAll("div.tree-node:first");data=opts.loadFilter.call(_125,data,_129[0]);var _12a=_12b(_125,"domId",_129.attr("id"));_126?_12a?_12a.children?_12a.children=_12a.children.concat(data):_12a.children=data:_128.data=_128.data.concat(data):(_12a?_12a.children=data:_128.data=data,$(ul).empty()),opts.view.render.call(opts.view,_125,ul,data),opts.dnd&&_ef(_125),_12a&&_12c(_125,_12a);for(var i=0;i<_128.tmpIds.length;i++)_10c(_125,$("#"+_128.tmpIds[i])[0],!0,!0);_128.tmpIds=[],setTimeout(function(){_12d(_125,_125)},0),_127||opts.onLoadSuccess.call(_125,_12a,data)}function _12d(_12e,ul,_12f){var _130;$.data(_12e,"tree").options.lines?($(_12e).addClass("tree-lines"),_12f||(_12f=!0,$(_12e).find("span.tree-indent").removeClass("tree-line tree-join tree-joinbottom"),$(_12e).find("div.tree-node").removeClass("tree-node-last tree-root-first tree-root-one"),1<(_130=$(_12e).tree("getRoots")).length?$(_130[0].target).addClass("tree-root-first"):1==_130.length&&$(_130[0].target).addClass("tree-root-one")),$(ul).children("li").each(function(){var node=$(this).children("div.tree-node"),ul=node.next("ul");ul.length?($(this).next().length&&function(node){var _135=node.find("span.tree-indent, span.tree-hit").length;node.next().find("div.tree-node").each(function(){$(this).children("span:eq("+(_135-1)+")").addClass("tree-line")})}(node),_12d(_12e,ul,_12f)):function(node){node.find("span.tree-icon").prev("span.tree-indent").addClass("tree-join")}(node)}),$(ul).children("li:last").children("div.tree-node").addClass("tree-node-last").children("span.tree-join").removeClass("tree-join").addClass("tree-joinbottom")):$(_12e).removeClass("tree-lines")}function _136(_137,ul,_138,_139){var opts=$.data(_137,"tree").options;_138=$.extend({},opts.queryParams,_138||{});var node,_13b,_13a=null;_137!=ul&&(node=$(ul).prev(),_13a=_ea(_137,node[0])),0!=opts.onBeforeLoad.call(_137,_13a,_138)&&((_13b=$(ul).prev().children("span.tree-folder")).addClass("tree-loading"),0==opts.loader.call(_137,_138,function(data){_13b.removeClass("tree-loading"),_124(_137,ul,data),_139&&_139()},function(){_13b.removeClass("tree-loading"),opts.onLoadError.apply(_137,arguments),_139&&_139()})&&_13b.removeClass("tree-loading"))}function _13d(_13e,_13f,_140){var node,ul,_141,opts=$.data(_13e,"tree").options,hit=$(_13f).children("span.tree-hit");0!=hit.length&&(hit.hasClass("tree-expanded")||(node=_ea(_13e,_13f),0!=opts.onBeforeExpand.call(_13e,node)&&(hit.removeClass("tree-collapsed tree-collapsed-hover").addClass("tree-expanded"),hit.next().addClass("tree-folder-open"),(ul=$(_13f).next()).length?opts.animate?ul.slideDown("normal",function(){node.state="open",opts.onExpand.call(_13e,node),_140&&_140()}):(ul.css("display","block"),node.state="open",opts.onExpand.call(_13e,node),_140&&_140()):(_141=$('<ul style="display:none"></ul>').insertAfter(_13f),_136(_13e,_141[0],{id:node.id},function(){_141.is(":empty")&&_141.remove(),opts.animate?_141.slideDown("normal",function(){node.state="open",opts.onExpand.call(_13e,node),_140&&_140()}):(_141.css("display","block"),node.state="open",opts.onExpand.call(_13e,node),_140&&_140())})))))}function _142(_143,_144){var node,ul,opts=$.data(_143,"tree").options,hit=$(_144).children("span.tree-hit");0!=hit.length&&(hit.hasClass("tree-collapsed")||(node=_ea(_143,_144),0!=opts.onBeforeCollapse.call(_143,node)&&(hit.removeClass("tree-expanded tree-expanded-hover").addClass("tree-collapsed"),hit.next().removeClass("tree-folder-open"),ul=$(_144).next(),opts.animate?ul.slideUp("normal",function(){node.state="closed",opts.onCollapse.call(_143,node)}):(ul.css("display","none"),node.state="closed",opts.onCollapse.call(_143,node)))))}function _145(_146,_147){var hit=$(_147).children("span.tree-hit");0!=hit.length&&(hit.hasClass("tree-expanded")?_142:_13d)(_146,_147)}function _158(_159,_15a){var ul,_15c,hit,node=$(_15a.parent),data=_15a.data;data&&(data=$.isArray(data)?data:[data]).length&&(0==node.length?ul=$(_159):(_15b(0,node[0])&&((_15c=node.find("span.tree-icon")).removeClass("tree-file").addClass("tree-folder tree-folder-open"),(hit=$('<span class="tree-hit tree-expanded"></span>').insertBefore(_15c)).prev().length&&hit.prev().remove()),(ul=node.next()).length||(ul=$("<ul></ul>").insertAfter(node))),_124(_159,ul[0],data,!0,!0))}function _162(_163,_164){var node,_165=function(_166){for(var id=$(_166).attr("id"),_167=_11f(_163,_166),cc=_167?_167.children:$.data(_163,"tree").data,i=0;i<cc.length;i++)if(cc[i].domId==id){cc.splice(i,1);break}return _167}(_164);$(_164).parent().remove(),_165&&(_165.children&&_165.children.length||((node=$(_165.target)).find(".tree-icon").removeClass("tree-folder").addClass("tree-file"),node.find(".tree-hit").remove(),$('<span class="tree-indent"></span>').prependTo(node),node.next().remove()),_12c(_163,_165)),_12d(_163,_163)}function _12c(_168,_169){var opts=$.data(_168,"tree").options,node=$(_169.target),data=_ea(_168,_169.target);data.iconCls&&node.find(".tree-icon").removeClass(data.iconCls),$.extend(data,_169),node.find(".tree-title").html(opts.formatter.call(_168,data)),data.iconCls&&node.find(".tree-icon").addClass(data.iconCls),function(_121,_122){var node,ck,_123,flag,opts=$.data(_121,"tree").options;opts.checkbox&&(ck=(node=$(_122)).find(".tree-checkbox"),_123=_ea(_121,_122),opts.view.hasCheckbox(_121,_123)?(ck.length||(_123.checkState=_123.checkState||"unchecked",$('<span class="tree-checkbox"></span>').insertBefore(node.find(".tree-title"))),"checked"==_123.checkState?_10c(_121,_122,!0,!0):"unchecked"==_123.checkState||0===(flag=_11a(_123))?_10c(_121,_122,!1,!0):1===flag&&_10c(_121,_122,!0,!0)):(ck.remove(),_123.checkState=void 0,_123.checked=void 0,_114(_121,_123)))}(_168,_169.target)}function _16e(_16f){for(var _170=$.data(_16f,"tree").data,i=0;i<_170.length;i++)_171(_170[i]);return _170}function _14c(_172,_173){var _174=[],n=_ea(_172,_173),data=n?n.children||[]:$.data(_172,"tree").data;return $.easyui.forEach(data,!0,function(node){_174.push(_171(node))}),_174}function _11f(_175,_176){return _ea(_175,$(_176).closest("ul").prevAll("div.tree-node:first")[0])}function _ea(_180,_181){return _12b(_180,"domId",$(_181).attr("id"))}function _182(_183,id){return _12b(_183,"id",id)}function _12b(_184,_185,_186){var data=$.data(_184,"tree").data,_187=null;return $.easyui.forEach(data,!0,function(node){if(node[_185]==_186)return _187=_171(node),!1}),_187}function _171(node){return node.target=$("#"+node.domId)[0],node}function _188(_189,_18a){var opts=$.data(_189,"tree").options,node=_ea(_189,_18a);0!=opts.onBeforeSelect.call(_189,node)&&($(_189).find("div.tree-node-selected").removeClass("tree-node-selected"),$(_18a).addClass("tree-node-selected"),opts.onSelect.call(_189,node))}function _15b(_18b,_18c){return 0==$(_18c).children("span.tree-hit").length}function _192(_193,_194){var opts=$.data(_193,"tree").options;$(_194).css("position","");var _195=$(_194).find("input.tree-editor"),val=_195.val();_195.remove();var node=_ea(_193,_194);node.text=val,_12c(_193,node),opts.onAfterEdit.call(_193,node)}function _196(_197,_198){var opts=$.data(_197,"tree").options;$(_198).css("position",""),$(_198).find("input.tree-editor").remove();var node=_ea(_197,_198);_12c(_197,node),opts.onCancelEdit.call(_197,node)}function _199(_19a,q){var id,_19b=$.data(_19a,"tree"),opts=_19b.options,ids={};for(id in $.easyui.forEach(_19b.data,!0,function(node){opts.filter.call(_19a,q,node)?($("#"+node.domId).removeClass("tree-node-hidden"),ids[node.domId]=1,node.hidden=!1):($("#"+node.domId).addClass("tree-node-hidden"),node.hidden=!0)}),ids)!function(_19d){var p=$(_19a).tree("getParent",$("#"+_19d)[0]);for(;p;)$(p.target).removeClass("tree-node-hidden"),p.hidden=!1,p=$(_19a).tree("getParent",p.target)}(id)}$.fn.tree=function(_19e,_19f){if("string"==typeof _19e)return $.fn.tree.methods[_19e](this,_19f);_19e=_19e||{};return this.each(function(){var opts,data,_e1,_e3,_e4,_1a0=$.data(this,"tree");_1a0?(opts=$.extend(_1a0.options,_19e),_1a0.options=opts):(opts=$.extend({},$.fn.tree.defaults,$.fn.tree.parseOptions(this),_19e),$.data(this,"tree",{options:opts,tree:((_e1=$(this)).addClass("tree"),_e1),data:[],tmpIds:[]}),(data=$.fn.tree.parseData(this)).length&&_124(this,this,data)),_e3=this,_e4=$.data(_e3,"tree").options,$(_e3).unbind().bind("mouseover",function(e){var tt=$(e.target),_e5=tt.closest("div.tree-node");_e5.length&&(_e5.addClass("tree-node-hover"),tt.hasClass("tree-hit")&&(tt.hasClass("tree-expanded")?tt.addClass("tree-expanded-hover"):tt.addClass("tree-collapsed-hover")),e.stopPropagation())}).bind("mouseout",function(e){var tt=$(e.target),_e6=tt.closest("div.tree-node");_e6.length&&(_e6.removeClass("tree-node-hover"),tt.hasClass("tree-hit")&&(tt.hasClass("tree-expanded")?tt.removeClass("tree-expanded-hover"):tt.removeClass("tree-collapsed-hover")),e.stopPropagation())}).bind("click",function(e){var tt=$(e.target),_e7=tt.closest("div.tree-node");if(_e7.length){if(tt.hasClass("tree-hit"))return _145(_e3,_e7[0]),!1;if(tt.hasClass("tree-checkbox"))return _10c(_e3,_e7[0]),!1;_188(_e3,_e7[0]),_e4.onClick.call(_e3,_ea(_e3,_e7[0])),e.stopPropagation()}}).bind("dblclick",function(e){var _e8=$(e.target).closest("div.tree-node");_e8.length&&(_188(_e3,_e8[0]),_e4.onDblClick.call(_e3,_ea(_e3,_e8[0])),e.stopPropagation())}).bind("contextmenu",function(e){var _e9=$(e.target).closest("div.tree-node");_e9.length&&(_e4.onContextMenu.call(_e3,e,_ea(_e3,_e9[0])),e.stopPropagation())}),opts.data&&_124(this,this,$.extend(!0,[],opts.data)),_136(this,this)})},$.fn.tree.methods={options:function(jq){return $.data(jq[0],"tree").options},loadData:function(jq,data){return jq.each(function(){_124(this,this,data)})},getNode:function(jq,_1a1){return _ea(jq[0],_1a1)},getData:function(jq,_1a2){return _17e=jq[0],(data=_ea(_17e,_1a2))&&data.children&&$.easyui.forEach(data.children,!0,function(node){_171(node)}),data;var _17e,data},reload:function(jq,_1a3){return jq.each(function(){var node;_1a3?((node=$(_1a3)).children("span.tree-hit").removeClass("tree-expanded tree-expanded-hover").addClass("tree-collapsed"),node.next().remove(),_13d(this,_1a3)):($(this).empty(),_136(this,this))})},getRoot:function(jq,_1a4){return function(_16b,_16c){if(_16c){for(var p=_11f(_16b,_16c);p;)p=_11f(_16b,_16c=p.target);return _ea(_16b,_16c)}var _16d=_16e(_16b);return _16d.length?_16d[0]:null}(jq[0],_1a4)},getRoots:function(jq){return _16e(jq[0])},getParent:function(jq,_1a5){return _11f(jq[0],_1a5)},getChildren:function(jq,_1a6){return _14c(jq[0],_1a6)},getChecked:function(jq,_1a7){return function(_178,_179){_179=_179||"checked",$.isArray(_179)||(_179=[_179]);var _17a=[];return $.easyui.forEach($.data(_178,"tree").data,!0,function(n){n.checkState&&-1!=$.easyui.indexOfArray(_179,n.checkState)&&_17a.push(_171(n))}),_17a}(jq[0],_1a7)},getSelected:function(jq){return _17c=jq[0],(node=$(_17c).find("div.tree-node-selected")).length?_ea(_17c,node[0]):null;var _17c,node},isLeaf:function(jq,_1a8){return _15b(jq[0],_1a8)},find:function(jq,id){return _182(jq[0],id)},select:function(jq,_1a9){return jq.each(function(){_188(this,_1a9)})},check:function(jq,_1aa){return jq.each(function(){_10c(this,_1aa,!0)})},uncheck:function(jq,_1ab){return jq.each(function(){_10c(this,_1ab,!1)})},collapse:function(jq,_1ac){return jq.each(function(){_142(this,_1ac)})},expand:function(jq,_1ad){return jq.each(function(){_13d(this,_1ad)})},collapseAll:function(jq,_1ae){return jq.each(function(){!function(_155,_156){var _157=_14c(_155,_156);_156&&_157.unshift(_ea(_155,_156));for(var i=0;i<_157.length;i++)_142(_155,_157[i].target)}(this,_1ae)})},expandAll:function(jq,_1af){return jq.each(function(){!function(_149,_14a){var _14b=_14c(_149,_14a);_14a&&_14b.unshift(_ea(_149,_14a));for(var i=0;i<_14b.length;i++)_13d(_149,_14b[i].target)}(this,_1af)})},expandTo:function(jq,_1b0){return jq.each(function(){!function(_14e,_14f){for(var _150=[],p=_11f(_14e,_14f);p;)_150.unshift(p),p=_11f(_14e,p.target);for(var i=0;i<_150.length;i++)_13d(_14e,_150[i].target)}(this,_1b0)})},scrollTo:function(jq,_1b1){return jq.each(function(){!function(_152,_153){for(var c=$(_152).parent();"BODY"!=c[0].tagName&&"auto"!=c.css("overflow-y");)c=c.parent();var ctop,n=$(_153),ntop=n.offset().top;"BODY"!=c[0].tagName?ntop<(ctop=c.offset().top)?c.scrollTop(c.scrollTop()+ntop-ctop):ntop+n.outerHeight()>ctop+c.outerHeight()-18&&c.scrollTop(c.scrollTop()+ntop+n.outerHeight()-ctop-c.outerHeight()+18):c.scrollTop(ntop)}(this,_1b1)})},toggle:function(jq,_1b2){return jq.each(function(){_145(this,_1b2)})},append:function(jq,_1b3){return jq.each(function(){_158(this,_1b3)})},insert:function(jq,_1b4){return jq.each(function(){!function(_15e,_15f){var ref=_15f.before||_15f.after,_160=_11f(_15e,ref),data=_15f.data;if(data&&(data=$.isArray(data)?data:[data]).length){_158(_15e,{parent:_160?_160.target:null,data:data});for(var _161=_160?_160.children:$(_15e).tree("getRoots"),i=0;i<_161.length;i++)if(_161[i].domId==$(ref).attr("id")){for(var j=data.length-1;0<=j;j--)_161.splice(_15f.before?i:i+1,0,data[j]);_161.splice(_161.length-data.length,data.length);break}for(var li=$(),i=0;i<data.length;i++)li=li.add($("#"+data[i].domId).parent());_15f.before?li.insertBefore($(ref).parent()):li.insertAfter($(ref).parent())}}(this,_1b4)})},remove:function(jq,_1b5){return jq.each(function(){_162(this,_1b5)})},pop:function(jq,_1b6){var node=jq.tree("getData",_1b6);return jq.tree("remove",_1b6),node},update:function(jq,_1b7){return jq.each(function(){_12c(this,$.extend({},_1b7,{checkState:_1b7.checked?"checked":!1===_1b7.checked?"unchecked":void 0}))})},enableDnd:function(jq){return jq.each(function(){_ef(this)})},disableDnd:function(jq){return jq.each(function(){!function(_ec){$.data(_ec,"tree").options.dnd=!1;var _ee=$(_ec).find("div.tree-node");_ee.draggable("disable"),_ee.css("cursor","pointer")}(this)})},beginEdit:function(jq,_1b8){return jq.each(function(){var _18e,_18f,nt,_190,_191,opts,node;_18e=this,_18f=_1b8,opts=$.data(_18e,"tree").options,node=_ea(_18e,_18f),0!=opts.onBeforeEdit.call(_18e,node)&&($(_18f).css("position","relative"),_190=(nt=$(_18f).find(".tree-title")).outerWidth(),nt.empty(),(_191=$('<input class="tree-editor">').appendTo(nt)).val(node.text).focus(),_191.width(_190+20),_191._outerHeight(18),_191.bind("click",function(e){return!1}).bind("mousedown",function(e){e.stopPropagation()}).bind("mousemove",function(e){e.stopPropagation()}).bind("keydown",function(e){return 13==e.keyCode?(_192(_18e,_18f),!1):27==e.keyCode?(_196(_18e,_18f),!1):void 0}).bind("blur",function(e){e.stopPropagation(),_192(_18e,_18f)}))})},endEdit:function(jq,_1b9){return jq.each(function(){_192(this,_1b9)})},cancelEdit:function(jq,_1ba){return jq.each(function(){_196(this,_1ba)})},doFilter:function(jq,q){return jq.each(function(){_199(this,q)})}},$.fn.tree.parseOptions=function(_1bb){$(_1bb);return $.extend({},$.parser.parseOptions(_1bb,["url","method",{checkbox:"boolean",cascadeCheck:"boolean",onlyLeafCheck:"boolean"},{animate:"boolean",lines:"boolean",dnd:"boolean"}]))},$.fn.tree.parseData=function(_1bc){var data=[];return function _1bd(aa,tree){tree.children("li").each(function(){var node=$(this),item=$.extend({},$.parser.parseOptions(this,["id","iconCls","state"]),{checked:!!node.attr("checked")||void 0});item.text=node.children("span").html(),item.text||(item.text=node.html());var _1be=node.children("ul");_1be.length&&(item.children=[],_1bd(item.children,_1be)),aa.push(item)})}(data,$(_1bc)),data};var _1bf=1,_1c0={render:function(_1c1,ul,data){var _1c2=$.data(_1c1,"tree"),opts=_1c2.options,_1c3=$(ul).prev(".tree-node"),_1c4=_1c3.length?$(_1c1).tree("getNode",_1c3[0]):null,_1c5=_1c3.find("span.tree-indent, span.tree-hit").length,cc=_1c6.call(this,_1c5,data);function _1c6(_1c7,_1c8){for(var cc=[],i=0;i<_1c8.length;i++){var item=_1c8[i];"open"!=item.state&&"closed"!=item.state&&(item.state="open"),item.domId="_easyui_tree_"+_1bf++,cc.push("<li>"),cc.push('<div id="'+item.domId+'" class="tree-node">');for(var flag,tmp,j=0;j<_1c7;j++)cc.push('<span class="tree-indent"></span>');"closed"==item.state?(cc.push('<span class="tree-hit tree-collapsed"></span>'),cc.push('<span class="tree-icon tree-folder '+(item.iconCls?item.iconCls:"")+'"></span>')):item.children&&item.children.length?(cc.push('<span class="tree-hit tree-expanded"></span>'),cc.push('<span class="tree-icon tree-folder tree-folder-open '+(item.iconCls?item.iconCls:"")+'"></span>')):(cc.push('<span class="tree-indent"></span>'),cc.push('<span class="tree-icon tree-file '+(item.iconCls?item.iconCls:"")+'"></span>')),this.hasCheckbox(_1c1,item)?(flag=0,_1c4&&"checked"==_1c4.checkState&&opts.cascadeCheck?(flag=1,item.checked=!0):item.checked&&$.easyui.addArrayItem(_1c2.tmpIds,item.domId),item.checkState=flag?"checked":"unchecked",cc.push('<span class="tree-checkbox tree-checkbox'+flag+'"></span>')):(item.checkState=void 0,item.checked=void 0),cc.push('<span class="tree-title">'+opts.formatter.call(_1c1,item)+"</span>"),cc.push("</div>"),item.children&&item.children.length&&(tmp=_1c6.call(this,_1c7+1,item.children),cc.push('<ul style="display:'+("closed"==item.state?"none":"block")+'">'),(cc=cc.concat(tmp)).push("</ul>")),cc.push("</li>")}return cc}$(ul).append(cc.join(""))},hasCheckbox:function(_1c9,item){var opts=$.data(_1c9,"tree").options;if(opts.checkbox){if($.isFunction(opts.checkbox))return!!opts.checkbox.call(_1c9,item);if(!opts.onlyLeafCheck)return!0;if(!("open"!=item.state||item.children&&item.children.length))return!0}return!1}};$.fn.tree.defaults={url:null,method:"post",animate:!1,checkbox:!1,cascadeCheck:!0,onlyLeafCheck:!1,lines:!1,dnd:!1,data:null,queryParams:{},formatter:function(node){return node.text},filter:function(q,node){var qq=[];$.map($.isArray(q)?q:[q],function(q){(q=$.trim(q))&&qq.push(q)});for(var i=0;i<qq.length;i++){if(0<=node.text.toLowerCase().indexOf(qq[i].toLowerCase()))return!0}return!qq.length},loader:function(_1cc,_1cd,_1ce){var opts=$(this).tree("options");if(!opts.url)return!1;$.ajax({type:opts.method,url:opts.url,data:_1cc,dataType:"json",success:function(data){_1cd(data)},error:function(){_1ce.apply(this,arguments)}})},loadFilter:function(data,_1cf){return data},view:_1c0,onBeforeLoad:function(node,_1d0){},onLoadSuccess:function(node,data){},onLoadError:function(){},onClick:function(node){},onDblClick:function(node){},onBeforeExpand:function(node){},onExpand:function(node){},onBeforeCollapse:function(node){},onCollapse:function(node){},onBeforeCheck:function(node,_1d1){},onCheck:function(node,_1d2){},onBeforeSelect:function(node){},onSelect:function(node){},onContextMenu:function(e,node){},onBeforeDrag:function(node){},onStartDrag:function(node){},onStopDrag:function(node){},onDragEnter:function(_1d3,_1d4){},onDragOver:function(_1d5,_1d6){},onDragLeave:function(_1d7,_1d8){},onBeforeDrop:function(_1d9,_1da,_1db){},onDrop:function(_1dc,_1dd,_1de){},onBeforeEdit:function(node){},onAfterEdit:function(node){},onCancelEdit:function(node){}}}($$),function($){function _1e1(_1e2,_1e3){var opts=$.data(_1e2,"progressbar").options,bar=$.data(_1e2,"progressbar").bar;_1e3&&(opts.width=_1e3),bar._size(opts),bar.find("div.progressbar-text").css("width",bar.width()),bar.find("div.progressbar-text,div.progressbar-value").css({height:bar.height()+"px",lineHeight:bar.height()+"px"})}$.fn.progressbar=function(_1e4,_1e5){if("string"==typeof _1e4){var _1e6=$.fn.progressbar.methods[_1e4];if(_1e6)return _1e6(this,_1e5)}return _1e4=_1e4||{},this.each(function(){var _1df,_1e7=$.data(this,"progressbar");_1e7?$.extend(_1e7.options,_1e4):_1e7=$.data(this,"progressbar",{options:$.extend({},$.fn.progressbar.defaults,$.fn.progressbar.parseOptions(this),_1e4),bar:($(_1df=this).addClass("progressbar"),$(_1df).html('<div class="progressbar-text"></div><div class="progressbar-value"><div class="progressbar-text"></div></div>'),$(_1df).bind("_resize",function(e,_1e0){return($(this).hasClass("easyui-fluid")||_1e0)&&_1e1(_1df),!1}),$(_1df))}),$(this).progressbar("setValue",_1e7.options.value),_1e1(this)})},$.fn.progressbar.methods={options:function(jq){return $.data(jq[0],"progressbar").options},resize:function(jq,_1e8){return jq.each(function(){_1e1(this,_1e8)})},getValue:function(jq){return $.data(jq[0],"progressbar").options.value},setValue:function(jq,_1e9){return _1e9<0&&(_1e9=0),100<_1e9&&(_1e9=100),jq.each(function(){var opts=$.data(this,"progressbar").options,text=opts.text.replace(/{value}/,_1e9),_1ea=opts.value;opts.value=_1e9,$(this).find("div.progressbar-value").width(_1e9+"%"),$(this).find("div.progressbar-text").html(text),_1ea!=_1e9&&opts.onChange.call(this,_1e9,_1ea)})}},$.fn.progressbar.parseOptions=function(_1eb){return $.extend({},$.parser.parseOptions(_1eb,["width","height","text",{value:"number"}]))},$.fn.progressbar.defaults={width:"auto",height:22,value:0,text:"{value}%",onChange:function(_1ec,_1ed){}}}($$),function($){function _1f1(_1f2){var _1f3=$.data(_1f2,"tooltip");_1f3.showTimer&&(clearTimeout(_1f3.showTimer),_1f3.showTimer=null),_1f3.hideTimer&&(clearTimeout(_1f3.hideTimer),_1f3.hideTimer=null)}function _1fe(_204,_205){var cc,_206=$.data(_204,"tooltip"),opts=_206.options;_205&&(opts.content=_205),_206.tip&&(cc="function"==typeof opts.content?opts.content.call(_204):opts.content,_206.tip.children(".tooltip-content").html(cc),opts.onUpdate.call(_204,cc))}$.fn.tooltip=function(_20a,_20b){return"string"==typeof _20a?$.fn.tooltip.methods[_20a](this,_20b):(_20a=_20a||{},this.each(function(){var _1f0,opts,_20c=$.data(this,"tooltip");_20c?$.extend(_20c.options,_20a):($.data(this,"tooltip",{options:$.extend({},$.fn.tooltip.defaults,$.fn.tooltip.parseOptions(this),_20a)}),$(this).addClass("tooltip-f")),_1f0=this,opts=$.data(_1f0,"tooltip").options,$(_1f0).unbind(".tooltip").bind(opts.showEvent+".tooltip",function(e){$(_1f0).tooltip("show",e)}).bind(opts.hideEvent+".tooltip",function(e){$(_1f0).tooltip("hide",e)}).bind("mousemove.tooltip",function(e){opts.trackMouse&&(opts.trackMouseX=e.pageX,opts.trackMouseY=e.pageY,$(_1f0).tooltip("reposition"))}),_1fe(this)}))},$.fn.tooltip.methods={options:function(jq){return $.data(jq[0],"tooltip").options},tip:function(jq){return $.data(jq[0],"tooltip").tip},arrow:function(jq){return jq.tooltip("tip").children(".tooltip-arrow-outer,.tooltip-arrow")},show:function(jq,e){return jq.each(function(){!function(_1fc,e){var _1fd=$.data(_1fc,"tooltip"),opts=_1fd.options,tip=_1fd.tip;tip||(tip=$('<div tabindex="-1" class="tooltip"><div class="tooltip-content"></div><div class="tooltip-arrow-outer"></div><div class="tooltip-arrow"></div></div>').appendTo("body"),_1fd.tip=tip,_1fe(_1fc)),_1f1(_1fc),_1fd.showTimer=setTimeout(function(){$(_1fc).tooltip("reposition"),tip.show(),opts.onShow.call(_1fc,e);var _1ff=tip.children(".tooltip-arrow-outer"),_200=tip.children(".tooltip-arrow"),bc="border-"+opts.position+"-color";_1ff.add(_200).css({borderTopColor:"",borderBottomColor:"",borderLeftColor:"",borderRightColor:""}),_1ff.css(bc,tip.css(bc)),_200.css(bc,tip.css("backgroundColor"))},opts.showDelay)}(this,e)})},hide:function(jq,e){return jq.each(function(){!function(_202,e){var _203=$.data(_202,"tooltip");_203&&_203.tip&&(_1f1(_202),_203.hideTimer=setTimeout(function(){_203.tip.hide(),_203.options.onHide.call(_202,e)},_203.options.hideDelay))}(this,e)})},update:function(jq,_20d){return jq.each(function(){_1fe(this,_20d)})},reposition:function(jq){return jq.each(function(){function _1f7(_1f8){opts.position=_1f8||"bottom",tip.removeClass("tooltip-top tooltip-bottom tooltip-left tooltip-right").addClass("tooltip-"+opts.position);var t,left,top,_1f9=$.isFunction(opts.deltaX)?opts.deltaX.call(_1f5,opts.position):opts.deltaX,_1fa=$.isFunction(opts.deltaY)?opts.deltaY.call(_1f5,opts.position):opts.deltaY;switch(top=opts.trackMouse?(t=$(),left=opts.trackMouseX+_1f9,opts.trackMouseY+_1fa):(left=(t=$(_1f5)).offset().left+_1f9,t.offset().top+_1fa),opts.position){case"right":left+=t._outerWidth()+12+(opts.trackMouse?12:0),top-=(tip._outerHeight()-t._outerHeight())/2;break;case"left":left-=tip._outerWidth()+12+(opts.trackMouse?12:0),top-=(tip._outerHeight()-t._outerHeight())/2;break;case"top":left-=(tip._outerWidth()-t._outerWidth())/2,top-=tip._outerHeight()+12+(opts.trackMouse?12:0);break;case"bottom":left-=(tip._outerWidth()-t._outerWidth())/2,top+=t._outerHeight()+12+(opts.trackMouse?12:0)}return{left:left,top:top}}var _1f5,opts,tip,left,pos,_1f6;_1f5=this,(_1f6=$.data(_1f5,"tooltip"))&&_1f6.tip&&(opts=_1f6.options,tip=_1f6.tip,pos={left:-1e5,top:-1e5},$(_1f5).is(":visible")&&(pos=_1f7(opts.position),"top"==opts.position&&pos.top<0?pos=_1f7("bottom"):"bottom"==opts.position&&pos.top+tip._outerHeight()>$(window)._outerHeight()+$(document).scrollTop()&&(pos=_1f7("top")),pos.left<0?"left"==opts.position?pos=_1f7("right"):($(_1f5).tooltip("arrow").css("left",tip._outerWidth()/2+pos.left),pos.left=0):pos.left+tip._outerWidth()>$(window)._outerWidth()+$(document)._scrollLeft()&&("right"==opts.position?pos=_1f7("left"):(left=pos.left,pos.left=$(window)._outerWidth()+$(document)._scrollLeft()-tip._outerWidth(),$(_1f5).tooltip("arrow").css("left",tip._outerWidth()/2-(pos.left-left))))),tip.css({left:pos.left,top:pos.top,zIndex:null!=opts.zIndex?opts.zIndex:$.fn.window?$.fn.window.defaults.zIndex++:""}),opts.onPosition.call(_1f5,pos.left,pos.top))})},destroy:function(jq){return jq.each(function(){var _208,opts,_209;_208=this,(_209=$.data(_208,"tooltip"))&&(_1f1(_208),opts=_209.options,_209.tip&&_209.tip.remove(),opts._title&&$(_208).attr("title",opts._title),$.removeData(_208,"tooltip"),$(_208).unbind(".tooltip").removeClass("tooltip-f"),opts.onDestroy.call(_208))})}},$.fn.tooltip.parseOptions=function(_20e){var t=$(_20e),opts=$.extend({},$.parser.parseOptions(_20e,["position","showEvent","hideEvent","content",{trackMouse:"boolean",deltaX:"number",deltaY:"number",showDelay:"number",hideDelay:"number"}]),{_title:t.attr("title")});return t.attr("title",""),opts.content||(opts.content=opts._title),opts},$.fn.tooltip.defaults={position:"bottom",content:null,trackMouse:!1,deltaX:0,deltaY:0,showEvent:"mouseenter",hideEvent:"mouseleave",showDelay:200,hideDelay:100,onShow:function(e){},onHide:function(e){},onUpdate:function(_20f){},onPosition:function(left,top){},onDestroy:function(){}}}($$),function($){function _210(node){node._remove()}function _211(_212,_213){var min,max,_21d,_21a,_21b,_21c,_214=$.data(_212,"panel"),opts=_214.options,_215=_214.panel,_216=_215.children(".panel-header"),_217=_215.children(".panel-body"),_218=_215.children(".panel-footer"),_219="left"==opts.halign||"right"==opts.halign;_213&&$.extend(opts,{width:_213.width,height:_213.height,minWidth:_213.minWidth,maxWidth:_213.maxWidth,minHeight:_213.minHeight,maxHeight:_213.maxHeight,left:_213.left,top:_213.top}),_215._size(opts),_219||_216._outerWidth(_215.width()),_217._outerWidth(_215.width()),isNaN(parseInt(opts.height))?(_217.css("height",""),min=$.parser.parseValue("minHeight",opts.minHeight,_215.parent()),max=$.parser.parseValue("maxHeight",opts.maxHeight,_215.parent()),_21d=_216._outerHeight()+_218._outerHeight()+_215._outerHeight()-_215.height(),_217._size("minHeight",min?min-_21d:""),_217._size("maxHeight",max?max-_21d:"")):_219?(_21a=opts.header?$(opts.header)._outerWidth():(_216.css("width",""),_216._outerWidth()),_21b=_216.find(".panel-title"),_21a+=Math.min(_21b._outerWidth(),_21b._outerHeight()),_21c=_215.height(),_216._outerWidth(_21a)._outerHeight(_21c),_21b._outerWidth(_216.height()),_217._outerWidth(_215.width()-_21a-_218._outerWidth())._outerHeight(_21c),_218._outerHeight(_21c),_217.css({left:"",right:""}).css(opts.halign,_216.position()[opts.halign]+_21a+"px"),opts.panelCssWidth=_215.css("width"),opts.collapsed&&_215._outerWidth(_21a+_218._outerWidth())):_217._outerHeight(_215.height()-_216._outerHeight()-_218._outerHeight()),_215.css({height:_219?void 0:"",minHeight:"",maxHeight:"",left:opts.left,top:opts.top}),opts.onResize.apply(_212,[opts.width,opts.height]),$(_212).panel("doLayout")}function _21e(_21f,_220){var _221=$.data(_21f,"panel"),opts=_221.options,_222=_221.panel;_220&&(null!=_220.left&&(opts.left=_220.left),null!=_220.top&&(opts.top=_220.top)),_222.css({left:opts.left,top:opts.top}),_222.find(".tooltip-f").each(function(){$(this).tooltip("reposition")}),opts.onMove.apply(_21f,[opts.left,opts.top])}function _223(_224){$(_224).addClass("panel-body")._size("clear");var _225=$('<div class="panel"></div>').insertBefore(_224);return _225[0].appendChild(_224),_225.bind("_resize",function(e,_226){return($(this).hasClass("easyui-fluid")||_226)&&_211(_224),!1}),_225}function _227(_228){var _229=$.data(_228,"panel"),opts=_229.options,_22a=_229.panel;_22a.css(opts.style),_22a.addClass(opts.cls),_22a.removeClass("panel-hleft panel-hright").addClass("panel-h"+opts.halign),_22b(),_22c();var _22d=$(_228).panel("header"),body=$(_228).panel("body"),_22e=$(_228).siblings(".panel-footer");function _22b(){var _22f,_230,tool;opts.noheader||!opts.title&&!opts.header?(_210(_22a.children(".panel-header")),_22a.children(".panel-body").addClass("panel-body-noheader")):(opts.header?$(opts.header).addClass("panel-header").prependTo(_22a):(_22f=_22a.children(".panel-header"),_22f.length||(_22f=$('<div class="panel-header"></div>').prependTo(_22a)),$.isArray(opts.tools)||_22f.find("div.panel-tool .panel-tool-a").appendTo(opts.tools),_22f.empty(),_230=$('<div class="panel-title"></div>').html(opts.title).appendTo(_22f),opts.iconCls&&(_230.addClass("panel-with-icon"),$('<div class="panel-icon"></div>').addClass(opts.iconCls).appendTo(_22f)),"left"!=opts.halign&&"right"!=opts.halign||_230.addClass("panel-title-"+opts.titleDirection),tool=$('<div class="panel-tool"></div>').appendTo(_22f),tool.bind("click",function(e){e.stopPropagation()}),opts.tools&&($.isArray(opts.tools)?$.map(opts.tools,function(t){_231(tool,t.iconCls,eval(t.handler))}):$(opts.tools).children().each(function(){$(this).addClass($(this).attr("iconCls")).addClass("panel-tool-a").appendTo(tool)})),opts.collapsible&&_231(tool,"panel-tool-collapse",function(){(1==opts.collapsed?_251:_242)(_228,!0)}),opts.minimizable&&_231(tool,"panel-tool-min",function(){_257(_228)}),opts.maximizable&&_231(tool,"panel-tool-max",function(){(1==opts.maximized?_25a:_241)(_228)}),opts.closable&&_231(tool,"panel-tool-close",function(){_243(_228)})),_22a.children("div.panel-body").removeClass("panel-body-noheader"))}function _231(c,icon,_232){$('<a href="javascript:;"></a>').addClass(icon).appendTo(c).bind("click",_232)}function _22c(){opts.footer?($(opts.footer).addClass("panel-footer").appendTo(_22a),$(_228).addClass("panel-body-nobottom")):(_22a.children(".panel-footer").remove(),$(_228).removeClass("panel-body-nobottom"))}opts.border?(_22d.removeClass("panel-header-noborder"),body.removeClass("panel-body-noborder"),_22e.removeClass("panel-footer-noborder")):(_22d.addClass("panel-header-noborder"),body.addClass("panel-body-noborder"),_22e.addClass("panel-footer-noborder")),_22d.addClass(opts.headerCls),body.addClass(opts.bodyCls),$(_228).attr("id",opts.id||""),opts.content&&($(_228).panel("clear"),$(_228).html(opts.content),$.parser.parse($(_228)))}function _233(_234,_235){var _236=$.data(_234,"panel"),opts=_236.options;if(opts.href&&(!_236.isLoaded||!opts.cache)){var _237=$.extend({},opts.queryParams);if(0==opts.onBeforeLoad.call(_234,_237))return;_236.isLoaded=!1,opts.loadingMessage&&($(_234).panel("clear"),$(_234).html($('<div class="panel-loading"></div>').html(opts.loadingMessage))),opts.loader.call(_234,_237,function(data){var _238=opts.extractor.call(_234,data);$(_234).panel("clear"),$(_234).html(_238),$.parser.parse($(_234)),opts.onLoad.apply(_234,arguments),_236.isLoaded=!0},function(){opts.onLoadError.apply(_234,arguments)})}}function _239(_23a){var t=$(_23a);t.find(".combo-f").each(function(){$(this).combo("destroy")}),t.find(".m-btn").each(function(){$(this).menubutton("destroy")}),t.find(".s-btn").each(function(){$(this).splitbutton("destroy")}),t.find(".tooltip-f").each(function(){$(this).tooltip("destroy")}),t.children("div").each(function(){$(this)._size("unfit")}),t.empty()}function _23b(_23c){$(_23c).panel("doLayout",!0)}function _23d(_23e,_23f){var opts=$.data(_23e,"panel").options,_240=$.data(_23e,"panel").panel;if(1==_23f||0!=opts.onBeforeOpen.call(_23e))if(_240.stop(!0,!0),$.isFunction(opts.openAnimation))opts.openAnimation.call(_23e,cb);else switch(opts.openAnimation){case"slide":_240.slideDown(opts.openDuration,cb);break;case"fade":_240.fadeIn(opts.openDuration,cb);break;case"show":_240.show(opts.openDuration,cb);break;default:_240.show(),cb()}function cb(){opts.closed=!1,opts.minimized=!1,_240.children(".panel-header").find("a.panel-tool-restore").length&&(opts.maximized=!0),opts.onOpen.call(_23e),1==opts.maximized&&(opts.maximized=!1,_241(_23e)),1==opts.collapsed&&(opts.collapsed=!1,_242(_23e)),opts.collapsed||(_233(_23e),_23b(_23e))}}function _243(_244,_245){var _246=$.data(_244,"panel"),opts=_246.options,_247=_246.panel;if(1==_245||0!=opts.onBeforeClose.call(_244))if(_247.find(".tooltip-f").each(function(){$(this).tooltip("hide")}),_247.stop(!0,!0),_247._size("unfit"),$.isFunction(opts.closeAnimation))opts.closeAnimation.call(_244,cb);else switch(opts.closeAnimation){case"slide":_247.slideUp(opts.closeDuration,cb);break;case"fade":_247.fadeOut(opts.closeDuration,cb);break;case"hide":_247.hide(opts.closeDuration,cb);break;default:_247.hide(),cb()}function cb(){opts.closed=!0,opts.onClose.call(_244)}}function _248(_249,_24a){var _24b=$.data(_249,"panel"),opts=_24b.options,_24c=_24b.panel;1!=_24a&&0==opts.onBeforeDestroy.call(_249)||($(_249).panel("clear").panel("clear","footer"),_210(_24c),opts.onDestroy.call(_249))}function _242(_24d,_24e){var opts=$.data(_24d,"panel").options,_24f=$.data(_24d,"panel").panel,body=_24f.children(".panel-body"),_250=_24f.children(".panel-header"),tool=_250.find("a.panel-tool-collapse");function cb(){body.hide(),opts.collapsed=!0,opts.onCollapse.call(_24d)}1!=opts.collapsed&&(body.stop(!0,!0),0!=opts.onBeforeCollapse.call(_24d)&&(tool.addClass("panel-tool-expand"),1==_24e?"left"==opts.halign||"right"==opts.halign?_24f.animate({width:_250._outerWidth()+_24f.children(".panel-footer")._outerWidth()},function(){cb()}):body.slideUp("normal",function(){cb()}):("left"!=opts.halign&&"right"!=opts.halign||_24f._outerWidth(_250._outerWidth()+_24f.children(".panel-footer")._outerWidth()),cb())))}function _251(_252,_253){var opts=$.data(_252,"panel").options,_254=$.data(_252,"panel").panel,body=_254.children(".panel-body"),tool=_254.children(".panel-header").find("a.panel-tool-collapse");function cb(){body.show(),opts.collapsed=!1,opts.onExpand.call(_252),_233(_252),_23b(_252)}0!=opts.collapsed&&(body.stop(!0,!0),0!=opts.onBeforeExpand.call(_252)&&(tool.removeClass("panel-tool-expand"),1==_253?"left"==opts.halign||"right"==opts.halign?(body.show(),_254.animate({width:opts.panelCssWidth},function(){cb()})):body.slideDown("normal",function(){cb()}):("left"!=opts.halign&&"right"!=opts.halign||_254.css("width",opts.panelCssWidth),cb())))}function _241(_255){var opts=$.data(_255,"panel").options,tool=$.data(_255,"panel").panel.children(".panel-header").find("a.panel-tool-max");1!=opts.maximized&&(tool.addClass("panel-tool-restore"),$.data(_255,"panel").original||($.data(_255,"panel").original={width:opts.width,height:opts.height,left:opts.left,top:opts.top,fit:opts.fit}),opts.left=0,opts.top=0,opts.fit=!0,_211(_255),opts.minimized=!1,opts.maximized=!0,opts.onMaximize.call(_255))}function _257(_258){var opts=$.data(_258,"panel").options,_259=$.data(_258,"panel").panel;_259._size("unfit"),_259.hide(),opts.minimized=!0,opts.maximized=!1,opts.onMinimize.call(_258)}function _25a(_25b){var opts=$.data(_25b,"panel").options,_25c=$.data(_25b,"panel").panel,tool=_25c.children(".panel-header").find("a.panel-tool-max");0!=opts.maximized&&(_25c.show(),tool.removeClass("panel-tool-restore"),$.extend(opts,$.data(_25b,"panel").original),_211(_25b),opts.minimized=!1,opts.maximized=!1,$.data(_25b,"panel").original=null,opts.onRestore.call(_25b))}function _25d(_25e,_25f){$.data(_25e,"panel").options.title=_25f,$(_25e).panel("header").find("div.panel-title").html(_25f)}$.fn._remove=function(){return this.each(function(){$(this).remove();try{this.outerHTML=""}catch(err){}})};var _260=null;$(window).unbind(".panel").bind("resize.panel",function(){_260&&clearTimeout(_260),_260=setTimeout(function(){var _261=$("body.layout");_261.length?(_261.layout("resize"),$("body").children(".easyui-fluid:visible").each(function(){$(this).triggerHandler("_resize")})):$("body").panel("doLayout"),_260=null},100)}),$.fn.panel=function(_262,_263){return"string"==typeof _262?$.fn.panel.methods[_262](this,_263):(_262=_262||{},this.each(function(){var opts,_264=$.data(this,"panel");_264?(opts=$.extend(_264.options,_262),_264.isLoaded=!1):(opts=$.extend({},$.fn.panel.defaults,$.fn.panel.parseOptions(this),_262),$(this).attr("title",""),_264=$.data(this,"panel",{options:opts,panel:_223(this),isLoaded:!1})),_227(this),$(this).show(),1==opts.doSize&&(_264.panel.css("display","block"),_211(this)),1==opts.closed||1==opts.minimized?_264.panel.hide():_23d(this)}))},$.fn.panel.methods={options:function(jq){return $.data(jq[0],"panel").options},panel:function(jq){return $.data(jq[0],"panel").panel},header:function(jq){return $.data(jq[0],"panel").panel.children(".panel-header")},footer:function(jq){return jq.panel("panel").children(".panel-footer")},body:function(jq){return $.data(jq[0],"panel").panel.children(".panel-body")},setTitle:function(jq,_265){return jq.each(function(){_25d(this,_265)})},open:function(jq,_266){return jq.each(function(){_23d(this,_266)})},close:function(jq,_267){return jq.each(function(){_243(this,_267)})},destroy:function(jq,_268){return jq.each(function(){_248(this,_268)})},clear:function(jq,type){return jq.each(function(){_239("footer"==type?$(this).panel("footer"):this)})},refresh:function(jq,href){return jq.each(function(){var _269=$.data(this,"panel");_269.isLoaded=!1,href&&("string"==typeof href?_269.options.href=href:_269.options.queryParams=href),_233(this)})},resize:function(jq,_26a){return jq.each(function(){_211(this,_26a)})},doLayout:function(jq,all){return jq.each(function(){function _26b(_26c,type){var _26d;_26c&&(_26d=_26c==$("body")[0],$(_26c).find("div.panel:visible,div.accordion:visible,div.tabs-container:visible,div.layout:visible,.easyui-fluid:visible").filter(function(_26e,el){var p=$(el).parents(".panel-"+type+":first");return _26d?0==p.length:p[0]==_26c}).each(function(){$(this).triggerHandler("_resize",[all||!1])}))}_26b(this,"body"),_26b($(this).siblings(".panel-footer")[0],"footer")})},move:function(jq,_26f){return jq.each(function(){_21e(this,_26f)})},maximize:function(jq){return jq.each(function(){_241(this)})},minimize:function(jq){return jq.each(function(){_257(this)})},restore:function(jq){return jq.each(function(){_25a(this)})},collapse:function(jq,_270){return jq.each(function(){_242(this,_270)})},expand:function(jq,_271){return jq.each(function(){_251(this,_271)})}},$.fn.panel.parseOptions=function(_272){var t=$(_272),hh=t.children(".panel-header,header"),ff=t.children(".panel-footer,footer");return $.extend({},$.parser.parseOptions(_272,["id","width","height","left","top","title","iconCls","cls","headerCls","bodyCls","tools","href","method","header","footer","halign","titleDirection",{cache:"boolean",fit:"boolean",border:"boolean",noheader:"boolean"},{collapsible:"boolean",minimizable:"boolean",maximizable:"boolean"},{closable:"boolean",collapsed:"boolean",minimized:"boolean",maximized:"boolean",closed:"boolean"},"openAnimation","closeAnimation",{openDuration:"number",closeDuration:"number"}]),{loadingMessage:null!=t.attr("loadingMessage")?t.attr("loadingMessage"):void 0,header:hh.length?hh.removeClass("panel-header"):void 0,footer:ff.length?ff.removeClass("panel-footer"):void 0})},$.fn.panel.defaults={id:null,title:null,iconCls:null,width:"auto",height:"auto",left:null,top:null,cls:null,headerCls:null,bodyCls:null,style:{},href:null,cache:!0,fit:!1,border:!0,doSize:!0,noheader:!1,content:null,halign:"top",titleDirection:"down",collapsible:!1,minimizable:!1,maximizable:!1,closable:!1,collapsed:!1,minimized:!1,maximized:!1,closed:!1,openAnimation:!1,openDuration:400,closeAnimation:!1,closeDuration:400,tools:null,footer:null,header:null,queryParams:{},method:"get",loadingMessage:"Loading...",loader:function(_273,_274,_275){var opts=$(this).panel("options");if(!opts.href)return!1;$.ajax({type:opts.method,url:opts.href,cache:!1,data:_273,dataType:"html",success:function(data){_274(data)},error:function(){_275.apply(this,arguments)}})},extractor:function(data){var _277=/<body[^>]*>((.|[\n\r])*)<\/body>/im.exec(data);return _277?_277[1]:data},onBeforeLoad:function(_278){},onLoad:function(){},onLoadError:function(){},onBeforeOpen:function(){},onOpen:function(){},onBeforeClose:function(){},onClose:function(){},onBeforeDestroy:function(){},onDestroy:function(){},onResize:function(_279,_27a){},onMove:function(left,top){},onMaximize:function(){},onRestore:function(){},onMinimize:function(){},onBeforeCollapse:function(){},onBeforeExpand:function(){},onCollapse:function(){},onExpand:function(){}}}($$),function($){function _27b(_27c,_27d){var _27e=$.data(_27c,"window");_27d&&(null!=_27d.left&&(_27e.options.left=_27d.left),null!=_27d.top&&(_27e.options.top=_27d.top)),$(_27c).panel("move",_27e.options),_27e.shadow&&_27e.shadow.css({left:_27e.options.left,top:_27e.options.top})}function _27f(_280,_281){var _283,opts=$.data(_280,"window").options,pp=$(_280).window("panel"),_282=pp._outerWidth();opts.inline?(_283=pp.parent(),opts.left=Math.ceil((_283.width()-_282)/2+_283.scrollLeft())):opts.left=Math.ceil(($(window)._outerWidth()-_282)/2+$(document).scrollLeft()),_281&&_27b(_280)}function _284(_285,_286){var _288,opts=$.data(_285,"window").options,pp=$(_285).window("panel"),_287=pp._outerHeight();opts.inline?(_288=pp.parent(),opts.top=Math.ceil((_288.height()-_287)/2+_288.scrollTop())):opts.top=Math.ceil(($(window)._outerHeight()-_287)/2+$(document).scrollTop()),_286&&_27b(_285)}function _290(left,top,_291,_292){var opts=$.data(this,"window").options;if(!opts.constrain)return{};if($.isFunction(opts.constrain))return opts.constrain.call(this,left,top,_291,_292);var win=$(this).window("window"),_295=opts.inline?win.parent():$(window);return left<0&&(left=0),top<_295.scrollTop()&&(top=_295.scrollTop()),left+_291>_295.width()&&(_291==win.outerWidth()?left=_295.width()-_291:_291=_295.width()-left),top-_295.scrollTop()+_292>_295.height()&&(_292==win.outerHeight()?top=_295.height()-_292+_295.scrollTop():_292=_295.height()-top+_295.scrollTop()),{left:left,top:top,width:_291,height:_292}}$(function(){$._positionFixed||$(window).resize(function(){$("body>div.window-mask:visible").css({width:"",height:""}),setTimeout(function(){$("body>div.window-mask:visible").css($.fn.window.getMaskSize())},50)})}),$.fn.window=function(_29d,_29e){if("string"!=typeof _29d)return _29d=_29d||{},this.each(function(){var _297,_298,_2a0=$.data(this,"window");function _299(e){_298.pmask&&_298.pmask.remove(),_298.pmask=$('<div class="window-proxy-mask"></div>').insertAfter(_298.window),_298.pmask.css({display:"none",zIndex:$.fn.window.defaults.zIndex++,left:e.data.left,top:e.data.top,width:_298.window._outerWidth(),height:_298.window._outerHeight()}),_298.proxy&&_298.proxy.remove(),_298.proxy=$('<div class="window-proxy"></div>').insertAfter(_298.window),_298.proxy.css({display:"none",zIndex:$.fn.window.defaults.zIndex++,left:e.data.left,top:e.data.top}),_298.proxy._outerWidth(e.data.width)._outerHeight(e.data.height),_298.proxy.hide(),setTimeout(function(){_298.pmask&&_298.pmask.show(),_298.proxy&&_298.proxy.show()},500)}function _29a(e){$.extend(e.data,_290.call(_297,e.data.left,e.data.top,e.data.width,e.data.height)),_298.pmask.show(),_298.proxy.css({display:"block",left:e.data.left,top:e.data.top}),_298.proxy._outerWidth(e.data.width),_298.proxy._outerHeight(e.data.height)}function _29b(e,_29c){$.extend(e.data,_290.call(_297,e.data.left,e.data.top,e.data.width+.1,e.data.height+.1)),$(_297).window(_29c,e.data),_298.pmask.remove(),_298.pmask=null,_298.proxy.remove(),_298.proxy=null}_2a0?$.extend(_2a0.options,_29d):(_2a0=$.data(this,"window",{options:$.extend({},$.fn.window.defaults,$.fn.window.parseOptions(this),_29d)})).options.inline||document.body.appendChild(this),function(_28a){var _28b=$.data(_28a,"window"),opts=_28b.options,win=$(_28a).panel($.extend({},_28b.options,{border:!1,doSize:!0,closed:!0,cls:"window "+(opts.border?"thin"==opts.border?"window-thinborder ":"":"window-thinborder window-noborder ")+(opts.cls||""),headerCls:"window-header "+(opts.headerCls||""),bodyCls:"window-body "+(opts.noheader?"window-body-noheader ":" ")+(opts.bodyCls||""),onBeforeDestroy:function(){if(0==opts.onBeforeDestroy.call(_28a))return!1;_28b.shadow&&_28b.shadow.remove(),_28b.mask&&_28b.mask.remove()},onClose:function(){_28b.shadow&&_28b.shadow.hide(),_28b.mask&&_28b.mask.hide(),opts.onClose.call(_28a)},onOpen:function(){_28b.mask&&_28b.mask.css($.extend({display:"block",zIndex:$.fn.window.defaults.zIndex++},$.fn.window.getMaskSize(_28a))),_28b.shadow&&_28b.shadow.css({display:"block",zIndex:$.fn.window.defaults.zIndex++,left:opts.left,top:opts.top,width:_28b.window._outerWidth(),height:_28b.window._outerHeight()}),_28b.window.css("z-index",$.fn.window.defaults.zIndex++),opts.onOpen.call(_28a)},onResize:function(_28c,_28d){var _28e=$(this).panel("options");$.extend(opts,{width:_28e.width,height:_28e.height,left:_28e.left,top:_28e.top}),_28b.shadow&&_28b.shadow.css({left:opts.left,top:opts.top,width:_28b.window._outerWidth(),height:_28b.window._outerHeight()}),opts.onResize.call(_28a,_28c,_28d)},onMinimize:function(){_28b.shadow&&_28b.shadow.hide(),_28b.mask&&_28b.mask.hide(),_28b.options.onMinimize.call(_28a)},onBeforeCollapse:function(){if(0==opts.onBeforeCollapse.call(_28a))return!1;_28b.shadow&&_28b.shadow.hide()},onExpand:function(){_28b.shadow&&_28b.shadow.show(),opts.onExpand.call(_28a)}}));_28b.window=win.panel("panel"),_28b.mask&&_28b.mask.remove(),opts.modal&&(_28b.mask=$('<div class="window-mask" style="display:none"></div>').insertAfter(_28b.window)),_28b.shadow&&_28b.shadow.remove(),opts.shadow&&(_28b.shadow=$('<div class="window-shadow" style="display:none"></div>').insertAfter(_28b.window));var _28f=opts.closed;null==opts.left&&_27f(_28a),null==opts.top&&_284(_28a),_27b(_28a),_28f||win.window("open")}(this),_297=this,(_298=$.data(_297,"window")).window.draggable({handle:">div.panel-header>div.panel-title",disabled:0==_298.options.draggable,onBeforeDrag:function(e){_298.mask&&_298.mask.css("z-index",$.fn.window.defaults.zIndex++),_298.shadow&&_298.shadow.css("z-index",$.fn.window.defaults.zIndex++),_298.window.css("z-index",$.fn.window.defaults.zIndex++)},onStartDrag:function(e){_299(e)},onDrag:function(e){return _29a(e),!1},onStopDrag:function(e){_29b(e,"move")}}),_298.window.resizable({disabled:0==_298.options.resizable,onStartResize:function(e){_299(e)},onResize:function(e){return _29a(e),!1},onStopResize:function(e){_29b(e,"resize")}})});var _29f=$.fn.window.methods[_29d];return _29f?_29f(this,_29e):this.panel(_29d,_29e)},$.fn.window.methods={options:function(jq){var _2a1=jq.panel("options"),_2a2=$.data(jq[0],"window").options;return $.extend(_2a2,{closed:_2a1.closed,collapsed:_2a1.collapsed,minimized:_2a1.minimized,maximized:_2a1.maximized})},window:function(jq){return $.data(jq[0],"window").window},move:function(jq,_2a3){return jq.each(function(){_27b(this,_2a3)})},hcenter:function(jq){return jq.each(function(){_27f(this,!0)})},vcenter:function(jq){return jq.each(function(){_284(this,!0)})},center:function(jq){return jq.each(function(){_27f(this),_284(this),_27b(this)})}},$.fn.window.getMaskSize=function(_2a4){var _2a5=$(_2a4).data("window");return _2a5&&_2a5.options.inline?{}:$._positionFixed?{position:"fixed"}:{width:$(document).width(),height:$(document).height()}},$.fn.window.parseOptions=function(_2a6){return $.extend({},$.fn.panel.parseOptions(_2a6),$.parser.parseOptions(_2a6,[{draggable:"boolean",resizable:"boolean",shadow:"boolean",modal:"boolean",inline:"boolean"}]))},$.fn.window.defaults=$.extend({},$.fn.panel.defaults,{zIndex:9e3,draggable:!0,resizable:!0,shadow:!0,modal:!1,border:!0,inline:!1,title:"New Window",collapsible:!0,minimizable:!0,maximizable:!0,closable:!0,closed:!1,constrain:!1})}($$),function($){function _2a7(_2a8){var opts=$.data(_2a8,"dialog").options;opts.inited=!1,$(_2a8).window($.extend({},opts,{onResize:function(w,h){opts.inited&&(_2ad(this),opts.onResize.call(this,w,h))}}));var win=$(_2a8).window("window");if(opts.toolbar)if($.isArray(opts.toolbar)){$(_2a8).siblings("div.dialog-toolbar").remove();for(var _2a9=$('<div class="dialog-toolbar"><table cellspacing="0" cellpadding="0"><tr></tr></table></div>').appendTo(win),tr=_2a9.find("tr"),i=0;i<opts.toolbar.length;i++){var btn=opts.toolbar[i],td,tool;"-"==btn?$('<td><div class="dialog-tool-separator"></div></td>').appendTo(tr):(td=$("<td></td>").appendTo(tr),tool=$('<a href="javascript:;"></a>').appendTo(td),tool[0].onclick=eval(btn.handler||function(){}),tool.linkbutton($.extend({},btn,{plain:!0})))}}else $(opts.toolbar).addClass("dialog-toolbar").appendTo(win),$(opts.toolbar).show();else $(_2a8).siblings("div.dialog-toolbar").remove();if(opts.buttons)if($.isArray(opts.buttons)){$(_2a8).siblings("div.dialog-button").remove();for(var _2aa=$('<div class="dialog-button"></div>').appendTo(win),i=0;i<opts.buttons.length;i++){var p=opts.buttons[i],_2ab=$('<a href="javascript:;"></a>').appendTo(_2aa);p.handler&&(_2ab[0].onclick=p.handler),_2ab.linkbutton(p)}}else $(opts.buttons).addClass("dialog-button").appendTo(win),$(opts.buttons).show();else $(_2a8).siblings("div.dialog-button").remove();opts.inited=!0;var _2ac=opts.closed;win.show(),$(_2a8).window("resize"),_2ac&&win.hide()}function _2ad(_2ae,_2af){var t=$(_2ae),opts=t.dialog("options"),_2b0=opts.noheader,tb=t.siblings(".dialog-toolbar"),bb=t.siblings(".dialog-button");tb.insertBefore(_2ae).css({borderTopWidth:_2b0?1:0,top:_2b0?tb.length:0}),bb.insertAfter(_2ae),tb.add(bb)._outerWidth(t._outerWidth()).find(".easyui-fluid:visible").each(function(){$(this).triggerHandler("_resize")});var _2b2,_2b3,_2b1=tb._outerHeight()+bb._outerHeight();isNaN(parseInt(opts.height))?((_2b2=t._size("min-height"))&&t._size("min-height",_2b2-_2b1),(_2b3=t._size("max-height"))&&t._size("max-height",_2b3-_2b1)):t._outerHeight(t._outerHeight()-_2b1);var cc,_2b4=$.data(_2ae,"window").shadow;_2b4&&(cc=t.panel("panel"),_2b4.css({width:cc._outerWidth(),height:cc._outerHeight()}))}$.fn.dialog=function(_2b5,_2b6){if("string"!=typeof _2b5)return _2b5=_2b5||{},this.each(function(){var _2b8=$.data(this,"dialog");_2b8?$.extend(_2b8.options,_2b5):$.data(this,"dialog",{options:$.extend({},$.fn.dialog.defaults,$.fn.dialog.parseOptions(this),_2b5)}),_2a7(this)});var _2b7=$.fn.dialog.methods[_2b5];return _2b7?_2b7(this,_2b6):this.window(_2b5,_2b6)},$.fn.dialog.methods={options:function(jq){var _2b9=$.data(jq[0],"dialog").options,_2ba=jq.panel("options");return $.extend(_2b9,{width:_2ba.width,height:_2ba.height,left:_2ba.left,top:_2ba.top,closed:_2ba.closed,collapsed:_2ba.collapsed,minimized:_2ba.minimized,maximized:_2ba.maximized}),_2b9},dialog:function(jq){return jq.window("window")}},$.fn.dialog.parseOptions=function(_2bb){var t=$(_2bb);return $.extend({},$.fn.window.parseOptions(_2bb),$.parser.parseOptions(_2bb,["toolbar","buttons"]),{toolbar:t.children(".dialog-toolbar").length?t.children(".dialog-toolbar").removeClass("dialog-toolbar"):void 0,buttons:t.children(".dialog-button").length?t.children(".dialog-button").removeClass("dialog-button"):void 0})},$.fn.dialog.defaults=$.extend({},$.fn.window.defaults,{title:"New Dialog",collapsible:!1,minimizable:!1,maximizable:!1,resizable:!1,toolbar:null,buttons:null})}($$),function($){function _2c4(_2c5){$(document).unbind(".messager").bind("keydown.messager",function(e){if(27==e.keyCode)$("body").children("div.messager-window").children("div.messager-body").each(function(){$(this).dialog("close")});else if(9==e.keyCode){var win=$("body").children("div.messager-window");if(!win.length)return;for(var _2bd=win.find(".messager-input,.messager-button .l-btn"),i=0;i<_2bd.length;i++)if($(_2bd[i]).is(":focus"))return $(_2bd[i>=_2bd.length-1?0:i+1]).focus(),!1}else{var _2be;13!=e.keyCode||(_2be=$(e.target).closest("input.messager-input")).length&&_2bf(_2be.closest(".messager-body"),_2be.val())}});var dlg=$('<div class="messager-body"></div>').appendTo("body");return dlg.dialog($.extend({},_2c5,{noheader:!_2c5.title,onClose:function(){$(document).unbind(".messager"),_2c5.onClose&&_2c5.onClose.call(this),setTimeout(function(){dlg.dialog("destroy")},100)}})),dlg.dialog("dialog").addClass("messager-window").find(".dialog-button").addClass("messager-button").find("a:first").focus(),dlg}function _2bf(dlg,_2c6){dlg.dialog("close"),dlg.dialog("options").fn(_2c6)}$.messager={show:function(_2c7){return _2c2=_2c7,opts=$.extend({},$.messager.defaults,{modal:!1,shadow:!1,draggable:!1,resizable:!1,closed:!0,style:{left:"",top:"",right:0,zIndex:$.fn.window.defaults.zIndex++,bottom:-document.body.scrollTop-document.documentElement.scrollTop},title:"",width:250,height:100,minHeight:0,showType:"slide",showSpeed:600,content:_2c2.msg,timeout:4e3},_2c2),(dlg=$('<div class="messager-body"></div>').appendTo("body")).dialog($.extend({},opts,{noheader:!opts.title,openAnimation:opts.showType,closeAnimation:"show"==opts.showType?"hide":opts.showType,openDuration:opts.showSpeed,closeDuration:opts.showSpeed,onOpen:function(){function _2c3(){0<opts.timeout&&(opts.timer=setTimeout(function(){dlg.length&&dlg.data("dialog")&&dlg.dialog("close")},opts.timeout))}dlg.dialog("dialog").hover(function(){opts.timer&&clearTimeout(opts.timer)},function(){_2c3()}),_2c3(),_2c2.onOpen?_2c2.onOpen.call(this):opts.onOpen.call(this)},onClose:function(){opts.timer&&clearTimeout(opts.timer),_2c2.onClose?_2c2.onClose.call(this):opts.onClose.call(this),dlg.dialog("destroy")}})),dlg.dialog("dialog").css(opts.style),dlg.dialog("open"),dlg;var _2c2,opts,dlg},alert:function(_2c8,msg,icon,fn){var opts="object"==typeof _2c8?_2c8:{title:_2c8,msg:msg,icon:icon,fn:fn},cls=opts.icon?"messager-icon messager-"+opts.icon:"";(opts=$.extend({},$.messager.defaults,{content:'<div class="'+cls+'"></div><div>'+opts.msg+'</div><div style="clear:both;"/>'},opts)).buttons||(opts.buttons=[{text:opts.ok,onClick:function(){_2bf(dlg)}}]);var dlg=_2c4(opts);return dlg},confirm:function(_2c9,msg,fn){var opts="object"==typeof _2c9?_2c9:{title:_2c9,msg:msg,fn:fn};(opts=$.extend({},$.messager.defaults,{content:'<div class="messager-icon messager-question"></div><div>'+opts.msg+'</div><div style="clear:both;"/>'},opts)).buttons||(opts.buttons=[{text:opts.ok,onClick:function(){_2bf(dlg,!0)}},{text:opts.cancel,onClick:function(){_2bf(dlg,!1)}}]);var dlg=_2c4(opts);return dlg},prompt:function(_2ca,msg,fn){var opts="object"==typeof _2ca?_2ca:{title:_2ca,msg:msg,fn:fn};(opts=$.extend({},$.messager.defaults,{content:'<div class="messager-icon messager-question"></div><div>'+opts.msg+'</div><br/><div style="clear:both;"/><div><input class="messager-input" type="text"/></div>'},opts)).buttons||(opts.buttons=[{text:opts.ok,onClick:function(){_2bf(dlg,dlg.find(".messager-input").val())}},{text:opts.cancel,onClick:function(){_2bf(dlg)}}]);var dlg=_2c4(opts);return dlg.find(".messager-input").focus(),dlg},progress:function(_2cb){if("string"==typeof _2cb)return(0,{bar:function(){return $("body>div.messager-window").find("div.messager-p-bar")},close:function(){var dlg=$("body>div.messager-window>div.messager-body:has(div.messager-progress)");dlg.length&&dlg.dialog("close")}}[_2cb])();_2cb=_2cb||{};var opts=$.extend({},{title:"",minHeight:0,content:void 0,msg:"",text:void 0,interval:300},_2cb),dlg=_2c4($.extend({},$.messager.defaults,{content:'<div class="messager-progress"><div class="messager-p-msg">'+opts.msg+'</div><div class="messager-p-bar"></div></div>',closable:!1,doSize:!1},opts,{onClose:function(){this.timer&&clearInterval(this.timer),_2cb.onClose?_2cb.onClose.call(this):$.messager.defaults.onClose.call(this)}})),bar=dlg.find("div.messager-p-bar");return bar.progressbar({text:opts.text}),dlg.dialog("resize"),opts.interval&&(dlg[0].timer=setInterval(function(){var v=bar.progressbar("getValue");100<(v+=10)&&(v=0),bar.progressbar("setValue",v)},opts.interval)),dlg}},$.messager.defaults=$.extend({},$.fn.dialog.defaults,{ok:"Ok",cancel:"Cancel",width:300,height:"auto",minHeight:150,modal:!0,collapsible:!1,minimizable:!1,maximizable:!1,resizable:!1,fn:function(){}})}($$),function($){function _2ce(_2cf,_2d0){var _2d1=$.data(_2cf,"accordion"),opts=_2d1.options,_2d2=_2d1.panels,cc=$(_2cf),_2d3="left"==opts.halign||"right"==opts.halign;cc.children(".panel-last").removeClass("panel-last"),cc.children(".panel:last").addClass("panel-last"),_2d0&&$.extend(opts,{width:_2d0.width,height:_2d0.height}),cc._size(opts);var _2d4=0,_2d5="auto",_2d6=cc.find(">.panel>.accordion-header");function _2d7(_2d8,_2d9){for(var _2da=0,i=0;i<_2d2.length;i++){var h,_2db,p=_2d2[i];h=_2d3?p.panel("header")._outerWidth(_2d4):p.panel("header")._outerHeight(_2d4),p.panel("options").collapsible==_2d8&&(_2db=isNaN(_2d9)?void 0:_2d9+_2d4*h.length,_2d3?(p.panel("resize",{height:cc.height(),width:_2d8?_2db:void 0}),_2da+=p.panel("panel")._outerWidth()-_2d4*h.length):(p.panel("resize",{width:cc.width(),height:_2d8?_2db:void 0}),_2da+=p.panel("panel").outerHeight()-_2d4*h.length))}return _2da}_2d6.length&&(_2d4=_2d3?($(_2d2[0]).panel("resize",{width:cc.width(),height:cc.height()}),$(_2d6[0])._outerWidth()):$(_2d6[0]).css("height","")._outerHeight()),isNaN(parseInt(opts.height))||(_2d5=_2d3?cc.width()-_2d4*_2d6.length:cc.height()-_2d4*_2d6.length),_2d7(!0,_2d5-_2d7(!1))}function _2dc(_2dd,_2de,_2df,all){for(var _2e0=$.data(_2dd,"accordion").panels,pp=[],i=0;i<_2e0.length;i++){var p=_2e0[i];if(_2de)p.panel("options")[_2de]==_2df&&pp.push(p);else if(p[0]==$(_2df)[0])return i}return _2de?all?pp:pp.length?pp[0]:null:-1}function _2e1(_2e2){return _2dc(_2e2,"collapsed",!1,!0)}function _2e3(_2e4){var pp=_2e1(_2e4);return pp.length?pp[0]:null}function _2e5(_2e6,_2e7){return _2dc(_2e6,null,_2e7)}function _2e8(_2e9,_2ea){var _2eb=$.data(_2e9,"accordion").panels;return"number"==typeof _2ea?_2ea<0||_2ea>=_2eb.length?null:_2eb[_2ea]:_2dc(_2e9,"title",_2ea)}function _2f1(_2f2,pp,_2f3){var opts=$.data(_2f2,"accordion").options;pp.panel($.extend({},{collapsible:!0,minimizable:!1,maximizable:!1,closable:!1,doSize:!1,collapsed:!0,headerCls:"accordion-header",bodyCls:"accordion-body",halign:opts.halign},_2f3,{onBeforeExpand:function(){if(_2f3.onBeforeExpand&&0==_2f3.onBeforeExpand.call(this))return!1;if(!opts.multiple)for(var all=$.grep(_2e1(_2f2),function(p){return p.panel("options").collapsible}),i=0;i<all.length;i++)_2fb(_2f2,_2e5(_2f2,all[i]));var _2f4=$(this).panel("header");_2f4.addClass("accordion-header-selected"),_2f4.find(".accordion-collapse").removeClass("accordion-expand")},onExpand:function(){$(_2f2).find(">.panel-last>.accordion-header").removeClass("accordion-header-border"),_2f3.onExpand&&_2f3.onExpand.call(this),opts.onSelect.call(_2f2,$(this).panel("options").title,_2e5(_2f2,this))},onBeforeCollapse:function(){if(_2f3.onBeforeCollapse&&0==_2f3.onBeforeCollapse.call(this))return!1;$(_2f2).find(">.panel-last>.accordion-header").addClass("accordion-header-border");var _2f5=$(this).panel("header");_2f5.removeClass("accordion-header-selected"),_2f5.find(".accordion-collapse").addClass("accordion-expand")},onCollapse:function(){isNaN(parseInt(opts.height))&&$(_2f2).find(">.panel-last>.accordion-header").removeClass("accordion-header-border"),_2f3.onCollapse&&_2f3.onCollapse.call(this),opts.onUnselect.call(_2f2,$(this).panel("options").title,_2e5(_2f2,this))}}));var _2f6=pp.panel("header"),tool=_2f6.children("div.panel-tool");tool.children("a.panel-tool-collapse").hide();var t=$('<a href="javascript:;"></a>').addClass("accordion-collapse accordion-expand").appendTo(tool);function _2f7(p){var _2f9,_2f8=p.panel("options");_2f8.collapsible&&(_2f9=_2e5(_2f2,p),(_2f8.collapsed?_2fa:_2fb)(_2f2,_2f9))}t.bind("click",function(){return _2f7(pp),!1}),pp.panel("options").collapsible?t.show():t.hide(),"left"!=opts.halign&&"right"!=opts.halign||t.hide(),_2f6.click(function(){return _2f7(pp),!1})}function _2fa(_2fc,_2fd){var opts,p=_2e8(_2fc,_2fd);p&&(_2fe(_2fc),opts=$.data(_2fc,"accordion").options,p.panel("expand",opts.animate))}function _2fb(_2ff,_300){var opts,p=_2e8(_2ff,_300);p&&(_2fe(_2ff),opts=$.data(_2ff,"accordion").options,p.panel("collapse",opts.animate))}function _2fe(_306){for(var _307=$.data(_306,"accordion").panels,i=0;i<_307.length;i++)_307[i].stop(!0,!0)}$.fn.accordion=function(_314,_315){return"string"==typeof _314?$.fn.accordion.methods[_314](this,_315):(_314=_314||{},this.each(function(){var _2ee,_2ef,cc,_316=$.data(this,"accordion");_316?$.extend(_316.options,_314):($.data(this,"accordion",{options:$.extend({},$.fn.accordion.defaults,$.fn.accordion.parseOptions(this),_314),accordion:$(this).addClass("accordion"),panels:[]}),_2ee=this,_2ef=$.data(_2ee,"accordion"),(cc=$(_2ee)).addClass("accordion"),_2ef.panels=[],cc.children("div").each(function(){var opts=$.extend({},$.parser.parseOptions(this),{selected:!!$(this).attr("selected")||void 0}),pp=$(this);_2ef.panels.push(pp),_2f1(_2ee,pp,opts)}),cc.bind("_resize",function(e,_2f0){return($(this).hasClass("easyui-fluid")||_2f0)&&_2ce(_2ee),!1})),function(_2ed){var opts=$.data(_2ed,"accordion").options,cc=$(_2ed);opts.border?cc.removeClass("accordion-noborder"):cc.addClass("accordion-noborder")}(this),_2ce(this),function(_302){var opts=$.data(_302,"accordion").options;$(_302).find(">.panel-last>.accordion-header").addClass("accordion-header-border");var p=_2dc(_302,"selected",!0);function _303(_304){var _305=opts.animate;opts.animate=!1,_2fa(_302,_304),opts.animate=_305}_303(p?_2e5(_302,p):opts.selected)}(this)}))},$.fn.accordion.methods={options:function(jq){return $.data(jq[0],"accordion").options},panels:function(jq){return $.data(jq[0],"accordion").panels},resize:function(jq,_317){return jq.each(function(){_2ce(this,_317)})},getSelections:function(jq){return _2e1(jq[0])},getSelected:function(jq){return _2e3(jq[0])},getPanel:function(jq,_318){return _2e8(jq[0],_318)},getPanelIndex:function(jq,_319){return _2e5(jq[0],_319)},select:function(jq,_31a){return jq.each(function(){_2fa(this,_31a)})},unselect:function(jq,_31b){return jq.each(function(){_2fb(this,_31b)})},add:function(jq,_31c){return jq.each(function(){!function(_308,_309){var _30a=$.data(_308,"accordion"),opts=_30a.options,_30b=_30a.panels;null==_309.selected&&(_309.selected=!0),_2fe(_308);var pp=$("<div></div>").appendTo(_308);_30b.push(pp),_2f1(_308,pp,_309),_2ce(_308),opts.onAdd.call(_308,_309.title,_30b.length-1),_309.selected&&_2fa(_308,_30b.length-1)}(this,_31c)})},remove:function(jq,_31d){return jq.each(function(){!function(_30d,_30e){var _30f=$.data(_30d,"accordion"),opts=_30f.options,_310=_30f.panels;_2fe(_30d);var _311=_2e8(_30d,_30e),_312=_311.panel("options").title,_313=_2e5(_30d,_311);_311&&0!=opts.onBeforeRemove.call(_30d,_312,_313)&&(_310.splice(_313,1),_311.panel("destroy"),_310.length&&(_2ce(_30d),_2e3(_30d)||_2fa(_30d,0)),opts.onRemove.call(_30d,_312,_313))}(this,_31d)})}},$.fn.accordion.parseOptions=function(_31e){$(_31e);return $.extend({},$.parser.parseOptions(_31e,["width","height","halign",{fit:"boolean",border:"boolean",animate:"boolean",multiple:"boolean",selected:"number"}]))},$.fn.accordion.defaults={width:"auto",height:"auto",fit:!1,border:!0,animate:!0,multiple:!1,selected:0,halign:"top",onSelect:function(_31f,_320){},onUnselect:function(_321,_322){},onAdd:function(_323,_324){},onBeforeRemove:function(_325,_326){},onRemove:function(_327,_328){}}}($$),function($){function _329(c){var w=0;return $(c).children().each(function(){w+=$(this).outerWidth(!0)}),w}function _32a(_32b){var _32c,tool,_32d,_32e,wrap,_32f,_330,_331,opts=$.data(_32b,"tabs").options;"left"!=opts.tabPosition&&"right"!=opts.tabPosition&&opts.showHeader&&(tool=(_32c=$(_32b).children("div.tabs-header")).children("div.tabs-tool:not(.tabs-tool-hidden)"),_32d=_32c.children("div.tabs-scroller-left"),_32e=_32c.children("div.tabs-scroller-right"),wrap=_32c.children("div.tabs-wrap"),_32f=_32c.outerHeight(),opts.plain&&(_32f-=_32f-_32c.height()),tool._outerHeight(_32f),_330=_329(_32c.find("ul.tabs")),(_331=_32c.width()-tool._outerWidth())<_330?(_32d.add(_32e).show()._outerHeight(_32f),"left"==opts.toolPosition?(tool.css({left:_32d.outerWidth(),right:""}),wrap.css({marginLeft:_32d.outerWidth()+tool._outerWidth(),marginRight:_32e._outerWidth(),width:_331-_32d.outerWidth()-_32e.outerWidth()})):(tool.css({left:"",right:_32e.outerWidth()}),wrap.css({marginLeft:_32d.outerWidth(),marginRight:_32e.outerWidth()+tool._outerWidth(),width:_331-_32d.outerWidth()-_32e.outerWidth()}))):(_32d.add(_32e).hide(),"left"==opts.toolPosition?(tool.css({left:0,right:""}),wrap.css({marginLeft:tool._outerWidth(),marginRight:0,width:_331})):(tool.css({left:"",right:0}),wrap.css({marginLeft:0,marginRight:tool._outerWidth(),width:_331}))))}function _332(_333){var opts=$.data(_333,"tabs").options,_334=$(_333).children("div.tabs-header");if(opts.tools)if("string"==typeof opts.tools)$(opts.tools).addClass("tabs-tool").appendTo(_334),$(opts.tools).show();else{_334.children("div.tabs-tool").remove();for(var _335=$('<div class="tabs-tool"><table cellspacing="0" cellpadding="0" style="height:100%"><tr></tr></table></div>').appendTo(_334),tr=_335.find("tr"),i=0;i<opts.tools.length;i++){var td=$("<td></td>").appendTo(tr),tool=$('<a href="javascript:;"></a>').appendTo(td);tool[0].onclick=eval(opts.tools[i].handler||function(){}),tool.linkbutton($.extend({},opts.tools[i],{plain:!0}))}}else _334.children("div.tabs-tool").remove()}function _336(_337,_338){var _33a,_33b,wrap,ul,d1,li,d2,_33c,_33d,_33f,_339=$.data(_337,"tabs"),opts=_339.options,cc=$(_337);function _33e(p,_340){var _341=p.panel("options"),p_t=_341.tab.find("a.tabs-inner");(_340=_340||parseInt(_341.tabWidth||opts.tabWidth||void 0))?p_t._outerWidth(_340):p_t.css("width",""),p_t._outerHeight(opts.tabHeight),p_t.css("lineHeight",p_t.height()+"px"),p_t.find(".easyui-fluid:visible").triggerHandler("_resize")}opts.doSize&&(_338&&$.extend(opts,{width:_338.width,height:_338.height}),cc._size(opts),_33a=cc.children("div.tabs-header"),_33b=cc.children("div.tabs-panels"),(ul=(wrap=_33a.find("div.tabs-wrap")).find(".tabs")).children("li").removeClass("tabs-first tabs-last"),ul.children("li:first").addClass("tabs-first"),ul.children("li:last").addClass("tabs-last"),"left"==opts.tabPosition||"right"==opts.tabPosition?(_33a._outerWidth(opts.showHeader?opts.headerWidth:0),_33b._outerWidth(cc.width()-_33a.outerWidth()),_33a.add(_33b)._size("height",isNaN(parseInt(opts.height))?"":cc.height()),wrap._outerWidth(_33a.width()),ul._outerWidth(wrap.width()).css("height","")):(_33a.children("div.tabs-scroller-left,div.tabs-scroller-right,div.tabs-tool:not(.tabs-tool-hidden)").css("display",opts.showHeader?"block":"none"),_33a._outerWidth(cc.width()).css("height",""),opts.showHeader?(_33a.css("background-color",""),wrap.css("height","")):(_33a.css("background-color","transparent"),_33a._outerHeight(0),wrap._outerHeight(0)),ul._outerHeight(opts.tabHeight).css("width",""),ul._outerHeight(ul.outerHeight()-ul.height()-1+opts.tabHeight).css("width",""),_33b._size("height",isNaN(parseInt(opts.height))?"":cc.height()-_33a.outerHeight()),_33b._size("width",cc.width())),_339.tabs.length&&(d1=ul.outerWidth(!0)-ul.width(),d2=(li=ul.children("li:first")).outerWidth(!0)-li.width(),_33c=_33a.width()-_33a.children(".tabs-tool:not(.tabs-tool-hidden)")._outerWidth(),_33d=Math.floor((_33c-d1-d2*_339.tabs.length)/_339.tabs.length),$.map(_339.tabs,function(p){_33e(p,opts.justified&&0<=$.inArray(opts.tabPosition,["top","bottom"])?_33d:void 0)}),opts.justified&&0<=$.inArray(opts.tabPosition,["top","bottom"])&&(_33f=_33c-d1-_329(ul),_33e(_339.tabs[_339.tabs.length-1],_33d+_33f))),_32a(_337))}function _342(_343){var _345,_346,_347,opts=$.data(_343,"tabs").options,tab=_344(_343);tab&&(_345=$(_343).children("div.tabs-panels"),_346="auto"==opts.width?"auto":_345.width(),_347="auto"==opts.height?"auto":_345.height(),tab.panel("resize",{width:_346,height:_347}))}function _348(_349){$.data(_349,"tabs").tabs;var cc=$(_349).addClass("tabs-container"),_34a=$('<div class="tabs-panels"></div>').insertBefore(cc);cc.children("div").each(function(){_34a[0].appendChild(this)}),cc[0].appendChild(_34a[0]),$('<div class="tabs-header"><div class="tabs-scroller-left"></div><div class="tabs-scroller-right"></div><div class="tabs-wrap"><ul class="tabs"></ul></div></div>').prependTo(_349),cc.children("div.tabs-panels").children("div").each(function(i){var opts=$.extend({},$.parser.parseOptions(this),{disabled:!!$(this).attr("disabled")||void 0,selected:!!$(this).attr("selected")||void 0});_357(_349,opts,$(this))}),cc.children("div.tabs-header").find(".tabs-scroller-left, .tabs-scroller-right").hover(function(){$(this).addClass("tabs-scroller-over")},function(){$(this).removeClass("tabs-scroller-over")}),cc.bind("_resize",function(e,_34b){return($(this).hasClass("easyui-fluid")||_34b)&&(_336(_349),_342(_349)),!1})}function _34c(_34d){var _34e=$.data(_34d,"tabs"),opts=_34e.options;function _34f(li){var _352=0;return li.parent().children("li").each(function(i){if(li[0]==this)return _352=i,!1}),_352}$(_34d).children("div.tabs-header").unbind().bind("click",function(e){if($(e.target).hasClass("tabs-scroller-left"))$(_34d).tabs("scrollBy",-opts.scrollIncrement);else{if(!$(e.target).hasClass("tabs-scroller-right")){var _350,_351,li=$(e.target).closest("li");return li.hasClass("tabs-disabled")?!1:($(e.target).closest("a.tabs-close").length?_370(_34d,_34f(li)):li.length&&(_350=_34f(li),(!(_351=_34e.tabs[_350].panel("options")).collapsible||_351.closed?_367:_384)(_34d,_350)),!1)}$(_34d).tabs("scrollBy",opts.scrollIncrement)}}).bind("contextmenu",function(e){var li=$(e.target).closest("li");li.hasClass("tabs-disabled")||li.length&&opts.onContextMenu.call(_34d,e,li.find("span.tabs-title").html(),_34f(li))})}function _353(_354){var opts=$.data(_354,"tabs").options,_355=$(_354).children("div.tabs-header"),_356=$(_354).children("div.tabs-panels");_355.removeClass("tabs-header-top tabs-header-bottom tabs-header-left tabs-header-right"),_356.removeClass("tabs-panels-top tabs-panels-bottom tabs-panels-left tabs-panels-right"),"top"==opts.tabPosition?_355.insertBefore(_356):"bottom"==opts.tabPosition?(_355.insertAfter(_356),_355.addClass("tabs-header-bottom"),_356.addClass("tabs-panels-top")):"left"==opts.tabPosition?(_355.addClass("tabs-header-left"),_356.addClass("tabs-panels-right")):"right"==opts.tabPosition&&(_355.addClass("tabs-header-right"),_356.addClass("tabs-panels-left")),1==opts.plain?_355.addClass("tabs-header-plain"):_355.removeClass("tabs-header-plain"),_355.removeClass("tabs-header-narrow").addClass(opts.narrow?"tabs-header-narrow":"");var tabs=_355.find(".tabs");tabs.removeClass("tabs-pill").addClass(opts.pill?"tabs-pill":""),tabs.removeClass("tabs-narrow").addClass(opts.narrow?"tabs-narrow":""),tabs.removeClass("tabs-justified").addClass(opts.justified?"tabs-justified":""),1==opts.border?(_355.removeClass("tabs-header-noborder"),_356.removeClass("tabs-panels-noborder")):(_355.addClass("tabs-header-noborder"),_356.addClass("tabs-panels-noborder")),opts.doSize=!0}function _357(_358,_359,pp){_359=_359||{};var _35a=$.data(_358,"tabs"),tabs=_35a.tabs;(null==_359.index||_359.index>tabs.length)&&(_359.index=tabs.length),_359.index<0&&(_359.index=0);var ul=$(_358).children("div.tabs-header").find("ul.tabs"),_35b=$(_358).children("div.tabs-panels"),tab=$('<li><a href="javascript:;" class="tabs-inner"><span class="tabs-title"></span><span class="tabs-icon"></span></a></li>');pp=pp||$("<div></div>"),_359.index>=tabs.length?(tab.appendTo(ul),pp.appendTo(_35b),tabs.push(pp)):(tab.insertBefore(ul.children("li:eq("+_359.index+")")),pp.insertBefore(_35b.children("div.panel:eq("+_359.index+")")),tabs.splice(_359.index,0,pp)),pp.panel($.extend({},_359,{tab:tab,border:!1,noheader:!0,closed:!0,doSize:!1,iconCls:_359.icon?_359.icon:void 0,onLoad:function(){_359.onLoad&&_359.onLoad.call(this,arguments),_35a.options.onLoad.call(_358,$(this))},onBeforeOpen:function(){if(_359.onBeforeOpen&&0==_359.onBeforeOpen.call(this))return!1;var p=$(_358).tabs("getSelected");if(p){if(p[0]==this)return _342(_358),!1;if($(_358).tabs("unselect",_362(_358,p)),p=$(_358).tabs("getSelected"))return!1}var _35c=$(this).panel("options");_35c.tab.addClass("tabs-selected");var _35e,wrap=$(_358).find(">div.tabs-header>div.tabs-wrap"),left=_35c.tab.position().left,_35d=left+_35c.tab.outerWidth();left<0||_35d>wrap.width()?(_35e=left-(wrap.width()-_35c.tab.width())/2,$(_358).tabs("scrollBy",_35e)):$(_358).tabs("scrollBy",0);var _35f=$(this).panel("panel");_35f.css("display","block"),_342(_358),_35f.css("display","none")},onOpen:function(){_359.onOpen&&_359.onOpen.call(this);var _360=$(this).panel("options");_35a.selectHis.push(_360.title),_35a.options.onSelect.call(_358,_360.title,_362(_358,this))},onBeforeClose:function(){if(_359.onBeforeClose&&0==_359.onBeforeClose.call(this))return!1;$(this).panel("options").tab.removeClass("tabs-selected")},onClose:function(){_359.onClose&&_359.onClose.call(this);var _361=$(this).panel("options");_35a.options.onUnselect.call(_358,_361.title,_362(_358,this))}})),$(_358).tabs("update",{tab:pp,options:pp.panel("options"),type:"header"})}function _363(_364,_365){var opts=$.data(_364,"tabs").options;null==_365.selected&&(_365.selected=!0),_357(_364,_365),opts.onAdd.call(_364,_365.title,_365.index),_365.selected&&_367(_364,_365.index)}function _368(_369,_36a){_36a.type=_36a.type||"all";var _36b=$.data(_369,"tabs").selectHis,pp=_36a.tab,opts=pp.panel("options"),_36c=opts.title;if($.extend(opts,_36a.options,{iconCls:_36a.options.icon?_36a.options.icon:void 0}),"all"!=_36a.type&&"body"!=_36a.type||pp.panel(),"all"==_36a.type||"header"==_36a.type){var tab=opts.tab;if(opts.header)tab.find(".tabs-inner").html($(opts.header));else{var _36d=tab.find("span.tabs-title"),_36e=tab.find("span.tabs-icon");if(_36d.html(opts.title),_36e.attr("class","tabs-icon"),tab.find("a.tabs-close").remove(),opts.closable?(_36d.addClass("tabs-closable"),$('<a href="javascript:;" class="tabs-close"></a>').appendTo(tab)):_36d.removeClass("tabs-closable"),opts.iconCls?(_36d.addClass("tabs-with-icon"),_36e.addClass(opts.iconCls)):_36d.removeClass("tabs-with-icon"),opts.tools){var _36f=tab.find("span.tabs-p-tool");if(_36f.length||(_36f=$('<span class="tabs-p-tool"></span>').insertAfter(tab.find("a.tabs-inner"))),$.isArray(opts.tools)){_36f.empty();for(var i=0;i<opts.tools.length;i++){var t=$('<a href="javascript:;"></a>').appendTo(_36f);t.addClass(opts.tools[i].iconCls),opts.tools[i].handler&&t.bind("click",{handler:opts.tools[i].handler},function(e){$(this).parents("li").hasClass("tabs-disabled")||e.data.handler.call(this)})}}else $(opts.tools).children().appendTo(_36f);var pr=12*_36f.children().length;opts.closable?(pr+=8,_36f.css("right","")):(pr-=3,_36f.css("right","5px")),_36d.css("padding-right",pr+"px")}else tab.find("span.tabs-p-tool").remove(),_36d.css("padding-right","")}if(_36c!=opts.title)for(i=0;i<_36b.length;i++)_36b[i]==_36c&&(_36b[i]=opts.title)}opts.disabled?opts.tab.addClass("tabs-disabled"):opts.tab.removeClass("tabs-disabled"),_336(_369),$.data(_369,"tabs").options.onUpdate.call(_369,opts.title,_362(_369,pp))}function _370(_371,_372){var opts=$.data(_371,"tabs").options,tabs=$.data(_371,"tabs").tabs,_373=$.data(_371,"tabs").selectHis;if(_374(_371,_372)){var tab=_375(_371,_372),_376=tab.panel("options").title,_377=_362(_371,tab);if(0!=opts.onBeforeClose.call(_371,_376,_377)){(tab=_375(_371,_372,!0)).panel("options").tab.remove(),tab.panel("destroy"),opts.onClose.call(_371,_376,_377),_336(_371);for(var i=0;i<_373.length;i++)_373[i]==_376&&(_373.splice(i,1),i--);var _378=_373.pop();_378?_367(_371,_378):tabs.length&&_367(_371,0)}}}function _375(_379,_37a,_37b){var tabs=$.data(_379,"tabs").tabs,tab=null;if("number"==typeof _37a)0<=_37a&&_37a<tabs.length&&(tab=tabs[_37a],_37b&&tabs.splice(_37a,1));else{for(var tmp=$("<span></span>"),i=0;i<tabs.length;i++){var p=tabs[i];if(tmp.html(p.panel("options").title),tmp.text()==_37a){tab=p,_37b&&tabs.splice(i,1);break}}tmp.remove()}return tab}function _362(_37c,tab){for(var tabs=$.data(_37c,"tabs").tabs,i=0;i<tabs.length;i++)if(tabs[i][0]==$(tab)[0])return i;return-1}function _344(_37d){for(var tabs=$.data(_37d,"tabs").tabs,i=0;i<tabs.length;i++){var tab=tabs[i];if(tab.panel("options").tab.hasClass("tabs-selected"))return tab}return null}function _37e(_37f){for(var _380=$.data(_37f,"tabs"),tabs=_380.tabs,i=0;i<tabs.length;i++){var opts=tabs[i].panel("options");if(opts.selected&&!opts.disabled)return void _367(_37f,i)}_367(_37f,_380.options.selected)}function _367(_381,_382){var p=_375(_381,_382);p&&!p.is(":visible")&&(_383(_381),p.panel("options").disabled||p.panel("open"))}function _384(_385,_386){var p=_375(_385,_386);p&&p.is(":visible")&&(_383(_385),p.panel("close"))}function _383(_387){$(_387).children("div.tabs-panels").each(function(){$(this).stop(!0,!0)})}function _374(_388,_389){return null!=_375(_388,_389)}function _38a(_38b,_38c){$.data(_38b,"tabs").options.showHeader=_38c,$(_38b).tabs("resize")}function _38d(_38e,_38f){var tool=$(_38e).find(">.tabs-header>.tabs-tool");_38f?tool.removeClass("tabs-tool-hidden").show():tool.addClass("tabs-tool-hidden").hide(),$(_38e).tabs("resize").tabs("scrollBy",0)}$.fn.tabs=function(_390,_391){return"string"==typeof _390?$.fn.tabs.methods[_390](this,_391):(_390=_390||{},this.each(function(){var _392=$.data(this,"tabs");_392?$.extend(_392.options,_390):($.data(this,"tabs",{options:$.extend({},$.fn.tabs.defaults,$.fn.tabs.parseOptions(this),_390),tabs:[],selectHis:[]}),_348(this)),_332(this),_353(this),_336(this),_34c(this),_37e(this)}))},$.fn.tabs.methods={options:function(jq){var cc=jq[0],opts=$.data(cc,"tabs").options,s=_344(cc);return opts.selected=s?_362(cc,s):-1,opts},tabs:function(jq){return $.data(jq[0],"tabs").tabs},resize:function(jq,_393){return jq.each(function(){_336(this,_393),_342(this)})},add:function(jq,_394){return jq.each(function(){_363(this,_394)})},close:function(jq,_395){return jq.each(function(){_370(this,_395)})},getTab:function(jq,_396){return _375(jq[0],_396)},getTabIndex:function(jq,tab){return _362(jq[0],tab)},getSelected:function(jq){return _344(jq[0])},select:function(jq,_397){return jq.each(function(){_367(this,_397)})},unselect:function(jq,_398){return jq.each(function(){_384(this,_398)})},exists:function(jq,_399){return _374(jq[0],_399)},update:function(jq,_39a){return jq.each(function(){_368(this,_39a)})},enableTab:function(jq,_39b){return jq.each(function(){var opts=$(this).tabs("getTab",_39b).panel("options");opts.tab.removeClass("tabs-disabled"),opts.disabled=!1})},disableTab:function(jq,_39c){return jq.each(function(){var opts=$(this).tabs("getTab",_39c).panel("options");opts.tab.addClass("tabs-disabled"),opts.disabled=!0})},showHeader:function(jq){return jq.each(function(){_38a(this,!0)})},hideHeader:function(jq){return jq.each(function(){_38a(this,!1)})},showTool:function(jq){return jq.each(function(){_38d(this,!0)})},hideTool:function(jq){return jq.each(function(){_38d(this,!1)})},scrollBy:function(jq,_39d){return jq.each(function(){var w,ul,opts=$(this).tabs("options"),wrap=$(this).find(">div.tabs-header>div.tabs-wrap"),pos=Math.min(wrap._scrollLeft()+_39d,(w=0,(ul=wrap.children("ul")).children("li").each(function(){w+=$(this).outerWidth(!0)}),w-wrap.width()+(ul.outerWidth()-ul.width())));wrap.animate({scrollLeft:pos},opts.scrollDuration)})}},$.fn.tabs.parseOptions=function(_39f){return $.extend({},$.parser.parseOptions(_39f,["tools","toolPosition","tabPosition",{fit:"boolean",border:"boolean",plain:"boolean"},{headerWidth:"number",tabWidth:"number",tabHeight:"number",selected:"number"},{showHeader:"boolean",justified:"boolean",narrow:"boolean",pill:"boolean"}]))},$.fn.tabs.defaults={width:"auto",height:"auto",headerWidth:150,tabWidth:"auto",tabHeight:27,selected:0,showHeader:!0,plain:!1,fit:!1,border:!0,justified:!1,narrow:!1,pill:!1,tools:null,toolPosition:"right",tabPosition:"top",scrollIncrement:100,scrollDuration:400,onLoad:function(_3a0){},onSelect:function(_3a1,_3a2){},onUnselect:function(_3a3,_3a4){},onBeforeClose:function(_3a5,_3a6){},onClose:function(_3a7,_3a8){},onAdd:function(_3a9,_3aa){},onUpdate:function(_3ab,_3ac){},onContextMenu:function(e,_3ad,_3ae){}}}($$),function($){var _3af=!1;function _3b0(_3b1,_3b2){var _3b3=$.data(_3b1,"layout"),opts=_3b3.options,_3b4=_3b3.panels,cc=$(_3b1);_3b2&&$.extend(opts,{width:_3b2.width,height:_3b2.height}),"body"==_3b1.tagName.toLowerCase()?cc._size("fit"):cc._size(opts);var cpos={top:0,left:0,width:cc.width(),height:cc.height()};function _3b5(pp,type){var opts,_3b8;pp.length&&_3b6(pp)&&(opts=pp.panel("options"),pp.panel("resize",{width:cc.width(),height:opts.height}),_3b8=pp.panel("panel").outerHeight(),pp.panel("move",{left:0,top:"n"==type?0:cc.height()-_3b8}),cpos.height-=_3b8,"n"==type&&(cpos.top+=_3b8,!opts.split&&opts.border&&cpos.top--),!opts.split&&opts.border&&cpos.height++)}function _3b7(pp,type){var opts,_3b9;pp.length&&_3b6(pp)&&(opts=pp.panel("options"),pp.panel("resize",{width:opts.width,height:cpos.height}),_3b9=pp.panel("panel").outerWidth(),pp.panel("move",{left:"e"==type?cc.width()-_3b9:0,top:cpos.top}),cpos.width-=_3b9,"w"==type&&(cpos.left+=_3b9,!opts.split&&opts.border&&cpos.left--),!opts.split&&opts.border&&cpos.width++)}_3b5(_3b6(_3b4.expandNorth)?_3b4.expandNorth:_3b4.north,"n"),_3b5(_3b6(_3b4.expandSouth)?_3b4.expandSouth:_3b4.south,"s"),_3b7(_3b6(_3b4.expandEast)?_3b4.expandEast:_3b4.east,"e"),_3b7(_3b6(_3b4.expandWest)?_3b4.expandWest:_3b4.west,"w"),_3b4.center.panel("resize",cpos)}function init(_3ba){var cc=$(_3ba);cc.addClass("layout");var opts=cc.layout("options"),_3bd=opts.onAdd;opts.onAdd=function(){},cc.find(">div,>form>div").each(function(){var el,_3bc;el=this,_3bc=$.fn.layout.parsePanelOptions(el),0<="north,south,east,west,center".indexOf(_3bc.region)&&_3bf(_3ba,_3bc,el)}),opts.onAdd=_3bd,cc.append('<div class="layout-split-proxy-h"></div><div class="layout-split-proxy-v"></div>'),cc.bind("_resize",function(e,_3be){return($(this).hasClass("easyui-fluid")||_3be)&&_3b0(_3ba),!1})}function _3bf(_3c0,_3c1,el){_3c1.region=_3c1.region||"center";var pp,_3c3,_3c7,_3c2=$.data(_3c0,"layout").panels,cc=$(_3c0),dir=_3c1.region;function _3cc(p){var _3cf="expand"+dir.substring(0,1).toUpperCase()+dir.substring(1),_3d0=_3c2.center,_3d1="north"==dir||"south"==dir?"minHeight":"minWidth",_3d2="north"==dir||"south"==dir?"maxHeight":"maxWidth",_3d3="north"==dir||"south"==dir?"_outerHeight":"_outerWidth",_3d4=$.parser.parseValue(_3d2,_3c2[dir].panel("options")[_3d2],$(_3c0)),_3d5=$.parser.parseValue(_3d1,_3d0.panel("options")[_3d1],$(_3c0)),_3d6=_3d0.panel("panel")[_3d3]()-_3d5;return _3b6(_3c2[_3cf])?_3d6+=_3c2[_3cf][_3d3]()-1:_3d6+=$(p)[_3d3](),_3d4<_3d6&&(_3d6=_3d4),_3d6}_3c2[dir].length||((pp=$(el)).length||(pp=$("<div></div>").appendTo(cc)),_3c3=$.extend({},$.fn.layout.paneldefaults,{width:pp.length?parseInt(pp[0].style.width)||pp.outerWidth():"auto",height:pp.length?parseInt(pp[0].style.height)||pp.outerHeight():"auto",doSize:!1,collapsible:!0,onOpen:function(){var tool=$(this).panel("header").children("div.panel-tool");tool.children("a.panel-tool-collapse").hide();var _3c5,t,_3c4={north:"up",south:"down",east:"right",west:"left"};_3c4[dir]&&(_3c5="layout-button-"+_3c4[dir],(t=tool.children("a."+_3c5)).length||(t=$('<a href="javascript:;"></a>').addClass(_3c5).appendTo(tool)).bind("click",{dir:dir},function(e){return _3dc(_3c0,e.data.dir),!1}),$(this).panel("options").collapsible?t.show():t.hide())}},_3c1,{cls:(_3c1.cls||"")+" layout-panel layout-panel-"+dir,bodyCls:(_3c1.bodyCls||"")+" layout-body"}),pp.panel(_3c3),_3c7=(_3c2[dir]=pp).panel("panel"),pp.panel("options").split&&_3c7.addClass("layout-split-"+dir),_3c7.resizable($.extend({},{handles:{north:"s",south:"n",east:"w",west:"e"}[dir]||"",disabled:!pp.panel("options").split,onStartResize:function(e){var _3c8;_3af=!0,_3c8=$("north"==dir||"south"==dir?">div.layout-split-proxy-v":">div.layout-split-proxy-h",_3c0);var pos={display:"block"};"north"==dir?(pos.top=parseInt(_3c7.css("top"))+_3c7.outerHeight()-_3c8.height(),pos.left=parseInt(_3c7.css("left")),pos.width=_3c7.outerWidth(),pos.height=_3c8.height()):"south"==dir?(pos.top=parseInt(_3c7.css("top")),pos.left=parseInt(_3c7.css("left")),pos.width=_3c7.outerWidth(),pos.height=_3c8.height()):"east"==dir?(pos.top=parseInt(_3c7.css("top"))||0,pos.left=parseInt(_3c7.css("left"))||0,pos.width=_3c8.width(),pos.height=_3c7.outerHeight()):"west"==dir&&(pos.top=parseInt(_3c7.css("top"))||0,pos.left=_3c7.outerWidth()-_3c8.width(),pos.width=_3c8.width(),pos.height=_3c7.outerHeight()),_3c8.css(pos),$('<div class="layout-mask"></div>').css({left:0,top:0,width:cc.width(),height:cc.height()}).appendTo(cc)},onResize:function(e){var _3cb,top,_3ce,_3cd,left;return"north"==dir||"south"==dir?(_3cb=_3cc(this),$(this).resizable("options").maxHeight=_3cb,_3cd=$(">div.layout-split-proxy-v",_3c0),top="north"==dir?e.data.height-_3cd.height():$(_3c0).height()-e.data.height,_3cd.css("top",top)):(_3ce=_3cc(this),$(this).resizable("options").maxWidth=_3ce,_3cd=$(">div.layout-split-proxy-h",_3c0),left="west"==dir?e.data.width-_3cd.width():$(_3c0).width()-e.data.width,_3cd.css("left",left)),!1},onStopResize:function(e){cc.children("div.layout-split-proxy-v,div.layout-split-proxy-h").hide(),pp.panel("resize",e.data),_3b0(_3c0),_3af=!1,cc.find(">div.layout-mask").remove()}},_3c1)),cc.layout("options").onAdd.call(_3c0,dir))}function _3dc(_3dd,_3de,_3df){null==_3df&&(_3df="normal");var _3e2,ep,_3e6,_3e0=$.data(_3dd,"layout").panels,p=_3e0[_3de],_3e1=p.panel("options");function _3e5(){var cc=$(_3dd),_3ea=_3e0.center.panel("options"),_3eb=_3e1.collapsedSize;if("east"==_3de){var _3ec=p.panel("panel")._outerWidth(),_3ed=_3ea.width+_3ec-_3eb;return!_3e1.split&&_3e1.border||_3ed++,{resizeC:{width:_3ed},expand:{left:cc.width()-_3ec},expandP:{top:_3ea.top,left:cc.width()-_3eb,width:_3eb,height:_3ea.height},collapse:{left:cc.width(),top:_3ea.top,height:_3ea.height}}}if("west"==_3de){_3ec=p.panel("panel")._outerWidth(),_3ed=_3ea.width+_3ec-_3eb;return!_3e1.split&&_3e1.border||_3ed++,{resizeC:{width:_3ed,left:_3eb-1},expand:{left:0},expandP:{left:0,top:_3ea.top,width:_3eb,height:_3ea.height},collapse:{left:-_3ec,top:_3ea.top,height:_3ea.height}}}if("north"==_3de){var _3ee=p.panel("panel")._outerHeight(),hh=_3ea.height;return _3b6(_3e0.expandNorth)||(hh+=_3ee-_3eb+(_3e1.split||!_3e1.border?1:0)),_3e0.east.add(_3e0.west).add(_3e0.expandEast).add(_3e0.expandWest).panel("resize",{top:_3eb-1,height:hh}),{resizeC:{top:_3eb-1,height:hh},expand:{top:0},expandP:{top:0,left:0,width:cc.width(),height:_3eb},collapse:{top:-_3ee,width:cc.width()}}}if("south"==_3de){_3ee=p.panel("panel")._outerHeight(),hh=_3ea.height;return _3b6(_3e0.expandSouth)||(hh+=_3ee-_3eb+(_3e1.split||!_3e1.border?1:0)),_3e0.east.add(_3e0.west).add(_3e0.expandEast).add(_3e0.expandWest).panel("resize",{height:hh}),{resizeC:{height:hh},expand:{top:cc.height()-_3ee},expandP:{top:cc.height()-_3eb,left:0,width:cc.width(),height:_3eb},collapse:{top:cc.height(),width:cc.width()}}}}0!=_3e1.onBeforeCollapse.call(p)&&(_3e2="expand"+_3de.substring(0,1).toUpperCase()+_3de.substring(1),_3e0[_3e2]||(_3e0[_3e2]=function(dir){var isns="north"==_3e1.region||"south"==_3e1.region,icon="layout-button-"+{east:"left",west:"right",north:"down",south:"up"}[dir],p=$("<div></div>").appendTo(_3dd);{var _3e9;p.panel($.extend({},$.fn.layout.paneldefaults,{cls:"layout-expand layout-expand-"+dir,title:"&nbsp;",titleDirection:_3e1.titleDirection,iconCls:_3e1.hideCollapsedContent?null:_3e1.iconCls,closed:!0,minWidth:0,minHeight:0,doSize:!1,region:_3e1.region,collapsedSize:_3e1.collapsedSize,noheader:!isns&&_3e1.hideExpandTool,tools:isns&&_3e1.hideExpandTool?null:[{iconCls:icon,handler:function(){return _3ef(_3dd,_3de),!1}}],onResize:function(){var left,top,_3e8=$(this).children(".layout-expand-title");_3e8.length&&(_3e8._outerWidth($(this).height()),left=($(this).width()-Math.min(_3e8._outerWidth(),_3e8._outerHeight()))/2,top=Math.max(_3e8._outerWidth(),_3e8._outerHeight()),_3e8.hasClass("layout-expand-title-down")&&(left+=Math.min(_3e8._outerWidth(),_3e8._outerHeight()),top=0),_3e8.css({left:left+"px",top:top+"px"}))}})),_3e1.hideCollapsedContent||(_3e9="function"==typeof _3e1.collapsedContent?_3e1.collapsedContent.call(p[0],_3e1.title):_3e1.collapsedContent,isns?p.panel("setTitle",_3e9):p.html(_3e9))}return p.panel("panel").hover(function(){$(this).addClass("layout-expand-over")},function(){$(this).removeClass("layout-expand-over")}),p}(_3de),ep=_3e0[_3e2].panel("panel"),_3e1.expandMode?ep.bind("click",function(){var _3e4;return"dock"==_3e1.expandMode?_3ef(_3dd,_3de):(p.panel("expand",!1).panel("open"),_3e4=_3e5(),p.panel("resize",_3e4.collapse),p.panel("panel").animate(_3e4.expand,function(){$(this).unbind(".layout").bind("mouseleave.layout",{region:_3de},function(e){1!=_3af&&($("body>div.combo-p>div.combo-panel:visible").length||_3dc(_3dd,e.data.region))}),$(_3dd).layout("options").onExpand.call(_3dd,_3de)})),!1}):ep.css("cursor","default")),_3e6=_3e5(),_3b6(_3e0[_3e2])||_3e0.center.panel("resize",_3e6.resizeC),p.panel("panel").animate(_3e6.collapse,_3df,function(){p.panel("collapse",!1).panel("close"),_3e0[_3e2].panel("open").panel("resize",_3e6.expandP),$(this).unbind(".layout"),$(_3dd).layout("options").onCollapse.call(_3dd,_3de)}))}function _3ef(_3f0,_3f1){var _3f4,_3f5,_3f2=$.data(_3f0,"layout").panels,p=_3f2[_3f1];0!=p.panel("options").onBeforeExpand.call(p)&&(_3f4="expand"+_3f1.substring(0,1).toUpperCase()+_3f1.substring(1),_3f2[_3f4]&&(_3f2[_3f4].panel("close"),p.panel("panel").stop(!0,!0),p.panel("expand",!1).panel("open"),_3f5=function(){var cc=$(_3f0),_3f7=_3f2.center.panel("options");{if("east"==_3f1&&_3f2.expandEast)return{collapse:{left:cc.width(),top:_3f7.top,height:_3f7.height},expand:{left:cc.width()-p.panel("panel")._outerWidth()}};if("west"==_3f1&&_3f2.expandWest)return{collapse:{left:-p.panel("panel")._outerWidth(),top:_3f7.top,height:_3f7.height},expand:{left:0}};if("north"==_3f1&&_3f2.expandNorth)return{collapse:{top:-p.panel("panel")._outerHeight(),width:cc.width()},expand:{top:0}};if("south"==_3f1&&_3f2.expandSouth)return{collapse:{top:cc.height(),width:cc.width()},expand:{top:cc.height()-p.panel("panel")._outerHeight()}}}}(),p.panel("resize",_3f5.collapse),p.panel("panel").animate(_3f5.expand,function(){_3b0(_3f0),$(_3f0).layout("options").onExpand.call(_3f0,_3f1)})))}function _3b6(pp){return pp&&(pp.length&&pp.panel("panel").is(":visible"))}function _3ff(_400,_401,_402){var p=$(_400).layout("panel",_401);p.panel("options").split=_402;var cls="layout-split-"+_401,_403=p.panel("panel").removeClass(cls);_402&&_403.addClass(cls),_403.resizable({disabled:!_402}),_3b0(_400)}$.fn.layout=function(_404,_405){return"string"==typeof _404?$.fn.layout.methods[_404](this,_405):(_404=_404||{},this.each(function(){var opts,_406=$.data(this,"layout");_406?$.extend(_406.options,_404):(opts=$.extend({},$.fn.layout.defaults,$.fn.layout.parseOptions(this),_404),$.data(this,"layout",{options:opts,panels:{center:$(),north:$(),south:$(),east:$(),west:$()}}),init(this)),_3b0(this),function(_3f9){var _3fa=$.data(_3f9,"layout"),opts=_3fa.options,_3fb=_3fa.panels,_3fc=opts.onCollapse;function _3fd(_3fe){var p=_3fb[_3fe];p.length&&p.panel("options").collapsed&&_3dc(_3f9,_3fe,0)}opts.onCollapse=function(){},_3fd("east"),_3fd("west"),_3fd("north"),_3fd("south"),opts.onCollapse=_3fc}(this)}))},$.fn.layout.methods={options:function(jq){return $.data(jq[0],"layout").options},resize:function(jq,_407){return jq.each(function(){_3b0(this,_407)})},panel:function(jq,_408){return $.data(jq[0],"layout").panels[_408]},collapse:function(jq,_409){return jq.each(function(){_3dc(this,_409)})},expand:function(jq,_40a){return jq.each(function(){_3ef(this,_40a)})},add:function(jq,_40b){return jq.each(function(){_3bf(this,_40b),_3b0(this),$(this).layout("panel",_40b.region).panel("options").collapsed&&_3dc(this,_40b.region,0)})},remove:function(jq,_40c){return jq.each(function(){var _3d8,_3d9,_3db,_3da;_3d8=this,_3d9=_40c,(_3da=$.data(_3d8,"layout").panels)[_3d9].length&&(_3da[_3d9].panel("destroy"),_3da[_3d9]=$(),_3da[_3db="expand"+_3d9.substring(0,1).toUpperCase()+_3d9.substring(1)]&&(_3da[_3db].panel("destroy"),_3da[_3db]=void 0),$(_3d8).layout("options").onRemove.call(_3d8,_3d9)),_3b0(this)})},split:function(jq,_40d){return jq.each(function(){_3ff(this,_40d,!0)})},unsplit:function(jq,_40e){return jq.each(function(){_3ff(this,_40e,!1)})}},$.fn.layout.parseOptions=function(_40f){return $.extend({},$.parser.parseOptions(_40f,[{fit:"boolean"}]))},$.fn.layout.defaults={fit:!1,onExpand:function(_410){},onCollapse:function(_411){},onAdd:function(_412){},onRemove:function(_413){}},$.fn.layout.parsePanelOptions=function(_414){$(_414);return $.extend({},$.fn.panel.parseOptions(_414),$.parser.parseOptions(_414,["region",{split:"boolean",collpasedSize:"number",minWidth:"number",minHeight:"number",maxWidth:"number",maxHeight:"number"}]))},$.fn.layout.paneldefaults=$.extend({},$.fn.panel.defaults,{region:null,split:!1,collapsedSize:28,expandMode:"float",hideExpandTool:!1,hideCollapsedContent:!0,collapsedContent:function(_415){var opts=$(this).panel("options");if("north"==opts.region||"south"==opts.region)return _415;var cc=[];return opts.iconCls&&cc.push('<div class="panel-icon '+opts.iconCls+'"></div>'),cc.push('<div class="panel-title layout-expand-title'),cc.push(" layout-expand-title-"+opts.titleDirection),cc.push(opts.iconCls?" layout-expand-with-icon":""),cc.push('">'),cc.push(_415),cc.push("</div>"),cc.join("")},minWidth:10,minHeight:10,maxWidth:1e4,maxHeight:1e4})}($$),function($){function init(_417){var opts=$.data(_417,"menu").options;$(_417).addClass("menu-top"),opts.inline?$(_417).addClass("menu-inline"):$(_417).appendTo("body"),$(_417).bind("_resize",function(e,_418){return($(this).hasClass("easyui-fluid")||_418)&&$(_417).menu("resize",_417),!1});for(var _419=function _41a(menu){var _41b=[];menu.addClass("menu");_41b.push(menu);menu.hasClass("menu-content")||menu.children("div").each(function(){var mm,_41c=$(this).children("div");_41c.length&&(_41c.appendTo("body"),this.submenu=_41c,mm=_41a(_41c),_41b=_41b.concat(mm))});return _41b}($(_417)),i=0;i<_419.length;i++)_41d(_417,_419[i])}function _41d(_41e,div){var menu=$(div).addClass("menu");menu.data("menu")||menu.data("menu",{options:$.parser.parseOptions(menu[0],["width","height"])}),menu.hasClass("menu-content")||(menu.children("div").each(function(){_41f(_41e,this)}),$('<div class="menu-line"></div>').prependTo(menu)),_420(_41e,menu),menu.hasClass("menu-inline")||menu.hide(),_421(_41e,menu)}function _41f(_422,div,_423){var item=$(div),_424=$.extend({},$.parser.parseOptions(item[0],["id","name","iconCls","href",{separator:"boolean"}]),{disabled:!!item.attr("disabled")||void 0,text:$.trim(item.html()),onclick:item[0].onclick},_423||{});_424.onclick=_424.onclick||_424.handler||null,item.data("menuitem",{options:_424}),_424.separator&&item.addClass("menu-sep"),item.hasClass("menu-sep")||(item.addClass("menu-item"),item.empty().append($('<div class="menu-text"></div>').html(_424.text)),_424.iconCls&&$('<div class="menu-icon"></div>').addClass(_424.iconCls).appendTo(item),_424.id&&item.attr("id",_424.id),_424.onclick&&("string"==typeof _424.onclick?item.attr("onclick",_424.onclick):item[0].onclick=eval(_424.onclick)),_424.disabled&&_425(_422,item[0],!0),item[0].submenu&&$('<div class="menu-rightarrow"></div>').appendTo(item))}function _420(_426,menu){var opts=$.data(_426,"menu").options,_427=menu.attr("style")||"",_428=menu.is(":visible");menu.css({display:"block",left:-1e4,height:"auto",overflow:"hidden"}),menu.find(".menu-item").each(function(){$(this)._outerHeight(opts.itemHeight),$(this).find(".menu-text").css({height:opts.itemHeight-2+"px",lineHeight:opts.itemHeight-2+"px"})}),menu.removeClass("menu-noline").addClass(opts.noline?"menu-noline":"");var _429=menu.data("menu").options,_42a=_429.width,_42b=_429.height;isNaN(parseInt(_42a))&&(_42a=0,menu.find("div.menu-text").each(function(){_42a<$(this).outerWidth()&&(_42a=$(this).outerWidth())}),_42a=_42a?_42a+40:"");var at,h1,h2,_42c=menu.outerHeight();isNaN(parseInt(_42b))&&(_42b=_42c,menu.hasClass("menu-top")&&opts.alignTo?(h1=(at=$(opts.alignTo)).offset().top-$(document).scrollTop(),h2=$(window)._outerHeight()+$(document).scrollTop()-at.offset().top-at._outerHeight(),_42b=Math.min(_42b,Math.max(h1,h2))):_42b>$(window)._outerHeight()&&(_42b=$(window).height())),menu.attr("style",_427),menu.show(),menu._size($.extend({},_429,{width:_42a,height:_42b,minWidth:_429.minWidth||opts.minWidth,maxWidth:_429.maxWidth||opts.maxWidth})),menu.find(".easyui-fluid").triggerHandler("_resize",[!0]),menu.css("overflow",menu.outerHeight()<_42c?"auto":"hidden"),menu.children("div.menu-line")._outerHeight(_42c-2),_428||menu.hide()}function _421(_42d,menu){var _42f,opts=$.data(_42d,"menu").options;for(_42f in menu.unbind(".menu"),opts.events)menu.bind(_42f+".menu",{target:_42d},opts.events[_42f])}function _430(e){var _431=e.data.target,_432=$.data(_431,"menu");_432.timer&&(clearTimeout(_432.timer),_432.timer=null)}function _433(e){var _434=e.data.target,_435=$.data(_434,"menu");_435.options.hideOnUnhover&&(_435.timer=setTimeout(function(){_436(_434,$(_434).hasClass("menu-inline"))},_435.options.duration))}function _437(e){var _438=e.data.target,item=$(e.target).closest(".menu-item");if(item.length){if(item.siblings().each(function(){this.submenu&&_416(this.submenu),$(this).removeClass("menu-active")}),item.addClass("menu-active"),item.hasClass("menu-item-disabled"))return void item.addClass("menu-active-disabled");var _439=item[0].submenu;_439&&$(_438).menu("show",{menu:_439,parent:item})}}function _43a(e){var _43b,item=$(e.target).closest(".menu-item");item.length&&(item.removeClass("menu-active menu-active-disabled"),(_43b=item[0].submenu)?e.pageX>=parseInt(_43b.css("left"))?item.addClass("menu-active"):_416(_43b):item.removeClass("menu-active"))}function _43c(e){var _43d=e.data.target,item=$(e.target).closest(".menu-item");if(item.length){var opts=$(_43d).data("menu").options,_43e=item.data("menuitem").options;if(_43e.disabled)return;item[0].submenu||(_436(_43d,opts.inline),_43e.href&&(location.href=_43e.href)),item.trigger("mouseenter"),opts.onClick.call(_43d,$(_43d).menu("getItem",item[0]))}}function _436(_43f,_440){var _441=$.data(_43f,"menu");_441&&$(_43f).is(":visible")&&(_416($(_43f)),_440?$(_43f).show():_441.options.onHide.call(_43f))}function _442(_443,_444){_444=_444||{};var at,left,top,_446,opts=$.data(_443,"menu").options,menu=$(_444.menu||_443);function _445(top,_447){return top+menu.outerHeight()>$(window)._outerHeight()+$(document).scrollTop()&&(top=_447?$(_447).offset().top-menu._outerHeight():$(window)._outerHeight()+$(document).scrollTop()-menu.outerHeight()),top<0&&(top=0),top}$(_443).menu("resize",menu[0]),top=menu.hasClass("menu-top")?($.extend(opts,_444),left=opts.left,top=opts.top,opts.alignTo&&(left=(at=$(opts.alignTo)).offset().left,top=at.offset().top+at._outerHeight(),"right"==opts.align&&(left+=at.outerWidth()-menu.outerWidth())),left+menu.outerWidth()>$(window)._outerWidth()+$(document)._scrollLeft()&&(left=$(window)._outerWidth()+$(document).scrollLeft()-menu.outerWidth()-5),left<0&&(left=0),_445(top,opts.alignTo)):((left=(_446=_444.parent).offset().left+_446.outerWidth()-2)+menu.outerWidth()+5>$(window)._outerWidth()+$(document).scrollLeft()&&(left=_446.offset().left-menu.outerWidth()+2),_445(_446.offset().top-3)),menu.css(opts.position.call(_443,menu[0],left,top)),menu.show(0,function(){menu[0].shadow||(menu[0].shadow=$('<div class="menu-shadow"></div>').insertAfter(menu)),menu[0].shadow.css({display:menu.hasClass("menu-inline")?"none":"block",zIndex:$.fn.menu.defaults.zIndex++,left:menu.css("left"),top:menu.css("top"),width:menu.outerWidth(),height:menu.outerHeight()}),menu.css("z-index",$.fn.menu.defaults.zIndex++),menu.hasClass("menu-top")&&opts.onShow.call(_443)})}function _416(menu){menu&&menu.length&&(function(m){m.stop(!0,!0),m[0].shadow&&m[0].shadow.hide();m.hide()}(menu),menu.find("div.menu-item").each(function(){this.submenu&&_416(this.submenu),$(this).removeClass("menu-active")}))}function _449(_44a,text){var _44b=null,tmp=$("<div></div>");return function find(menu){menu.children("div.menu-item").each(function(){var item=$(_44a).menu("getItem",this),s=tmp.empty().html(item.text).text();text==$.trim(s)?_44b=item:this.submenu&&!_44b&&find(this.submenu)})}($(_44a)),tmp.remove(),_44b}function _425(_44c,_44d,_44e){var opts,t=$(_44d);t.hasClass("menu-item")&&(((opts=t.data("menuitem").options).disabled=_44e)?(t.addClass("menu-item-disabled"),t[0].onclick=null):(t.removeClass("menu-item-disabled"),t[0].onclick=opts.onclick))}function _44f(_450,_451){$.data(_450,"menu").options;var _452,menu=$(_450);_451.parent&&(_451.parent.submenu||(_452=$("<div></div>").appendTo("body"),_451.parent.submenu=_452,$('<div class="menu-rightarrow"></div>').appendTo(_451.parent),_41d(_450,_452)),menu=_451.parent.submenu),_41f(_450,$("<div></div>").appendTo(menu),_451)}function _453(_454,_455){!function _456(el){var _457;el.submenu&&(el.submenu.children("div.menu-item").each(function(){_456(this)}),(_457=el.submenu[0].shadow)&&_457.remove(),el.submenu.remove()),$(el).remove()}(_455)}function _458(_459,_45a,_45b){var menu=$(_45a).parent();_45b?$(_45a).show():$(_45a).hide(),_420(_459,menu)}function _45c(_45d){$(_45d).children("div.menu-item").each(function(){_453(_45d,this)}),_45d.shadow&&_45d.shadow.remove(),$(_45d).remove()}$(function(){$(document).unbind(".menu").bind("mousedown.menu",function(e){$(e.target).closest("div.menu,div.combo-p").length||($("body>div.menu-top:visible").not(".menu-inline").menu("hide"),_416($("body>div.menu:visible").not(".menu-inline")))})}),$.fn.menu=function(_45e,_45f){return"string"==typeof _45e?$.fn.menu.methods[_45e](this,_45f):(_45e=_45e||{},this.each(function(){var _460=$.data(this,"menu");_460?$.extend(_460.options,_45e):(_460=$.data(this,"menu",{options:$.extend({},$.fn.menu.defaults,$.fn.menu.parseOptions(this),_45e)}),init(this)),$(this).css({left:_460.options.left,top:_460.options.top})}))},$.fn.menu.methods={options:function(jq){return $.data(jq[0],"menu").options},show:function(jq,pos){return jq.each(function(){_442(this,pos)})},hide:function(jq){return jq.each(function(){_436(this)})},destroy:function(jq){return jq.each(function(){_45c(this)})},setText:function(jq,_461){return jq.each(function(){$(_461.target).data("menuitem").options.text=_461.text,$(_461.target).children("div.menu-text").html(_461.text)})},setIcon:function(jq,_462){return jq.each(function(){$(_462.target).data("menuitem").options.iconCls=_462.iconCls,$(_462.target).children("div.menu-icon").remove(),_462.iconCls&&$('<div class="menu-icon"></div>').addClass(_462.iconCls).appendTo(_462.target)})},getItem:function(jq,_463){var item=$(_463).data("menuitem").options;return $.extend({},item,{target:$(_463)[0]})},findItem:function(jq,text){return _449(jq[0],text)},appendItem:function(jq,_464){return jq.each(function(){_44f(this,_464)})},removeItem:function(jq,_465){return jq.each(function(){_453(this,_465)})},enableItem:function(jq,_466){return jq.each(function(){_425(this,_466,!1)})},disableItem:function(jq,_467){return jq.each(function(){_425(this,_467,!0)})},showItem:function(jq,_468){return jq.each(function(){_458(this,_468,!0)})},hideItem:function(jq,_469){return jq.each(function(){_458(this,_469,!1)})},resize:function(jq,_46a){return jq.each(function(){_420(this,$(_46a||this))})}},$.fn.menu.parseOptions=function(_46b){return $.extend({},$.parser.parseOptions(_46b,[{minWidth:"number",itemHeight:"number",duration:"number",hideOnUnhover:"boolean"},{fit:"boolean",inline:"boolean",noline:"boolean"}]))},$.fn.menu.defaults={zIndex:11e4,left:0,top:0,alignTo:null,align:"left",minWidth:120,itemHeight:22,duration:100,hideOnUnhover:!0,inline:!1,fit:!1,noline:!1,events:{mouseenter:_430,mouseleave:_433,mouseover:_437,mouseout:_43a,click:_43c},position:function(_46c,left,top){return{left:left,top:top}},onShow:function(){},onHide:function(){},onClick:function(item){}}}($$),function($){function _478(_479){var btn,mm,opts=$(_479).menubutton("options");!opts.disabled&&opts.menu&&($("body>div.menu-top").menu("hide"),btn=$(_479),(mm=$(opts.menu)).length&&(mm.menu("options").alignTo=btn,mm.menu("show",{alignTo:btn,align:opts.menuAlign})),btn.blur())}$.fn.menubutton=function(_47a,_47b){if("string"!=typeof _47a)return _47a=_47a||{},this.each(function(){var _46d,_46e,_46f,_470,_471,opts,btn,_47d=$.data(this,"menubutton");_47d?$.extend(_47d.options,_47a):($.data(this,"menubutton",{options:$.extend({},$.fn.menubutton.defaults,$.fn.menubutton.parseOptions(this),_47a)}),$(this).removeAttr("disabled")),_46d=this,opts=$.data(_46d,"menubutton").options,(btn=$(_46d)).linkbutton(opts),opts.hasDownArrow&&(btn.removeClass(opts.cls.btn1+" "+opts.cls.btn2).addClass("m-btn"),btn.removeClass("m-btn-small m-btn-medium m-btn-large").addClass("m-btn-"+opts.size),_46e=btn.find(".l-btn-left"),$("<span></span>").addClass(opts.cls.arrow).appendTo(_46e),$("<span></span>").addClass("m-btn-line").appendTo(_46e)),$(_46d).menubutton("resize"),opts.menu&&($(opts.menu).menu({duration:opts.duration}),_46f=$(opts.menu).menu("options"),_470=_46f.onShow,_471=_46f.onHide,$.extend(_46f,{onShow:function(){var _472=$(this).menu("options"),btn=$(_472.alignTo),opts=btn.menubutton("options");btn.addClass(1==opts.plain?opts.cls.btn2:opts.cls.btn1),_470.call(this)},onHide:function(){var _473=$(this).menu("options"),btn=$(_473.alignTo),opts=btn.menubutton("options");btn.removeClass(1==opts.plain?opts.cls.btn2:opts.cls.btn1),_471.call(this)}})),function(_475){var opts=$.data(_475,"menubutton").options,btn=$(_475),t=btn.find("."+opts.cls.trigger);t.length||(t=btn),t.unbind(".menubutton");var _476=null;function _477(){return $(_475).linkbutton("options").disabled}t.bind("click.menubutton",function(){if(!_477())return _478(_475),!1}).bind("mouseenter.menubutton",function(){if(!_477())return _476=setTimeout(function(){_478(_475)},opts.duration),!1}).bind("mouseleave.menubutton",function(){_476&&clearTimeout(_476),$(opts.menu).triggerHandler("mouseleave")})}(this)});var _47c=$.fn.menubutton.methods[_47a];return _47c?_47c(this,_47b):this.linkbutton(_47a,_47b)},$.fn.menubutton.methods={options:function(jq){var _47e=jq.linkbutton("options");return $.extend($.data(jq[0],"menubutton").options,{toggle:_47e.toggle,selected:_47e.selected,disabled:_47e.disabled})},destroy:function(jq){return jq.each(function(){var opts=$(this).menubutton("options");opts.menu&&$(opts.menu).menu("destroy"),$(this).remove()})}},$.fn.menubutton.parseOptions=function(_47f){$(_47f);return $.extend({},$.fn.linkbutton.parseOptions(_47f),$.parser.parseOptions(_47f,["menu",{plain:"boolean",hasDownArrow:"boolean",duration:"number"}]))},$.fn.menubutton.defaults=$.extend({},$.fn.linkbutton.defaults,{plain:!0,hasDownArrow:!0,menu:null,menuAlign:"left",duration:100,cls:{btn1:"m-btn-active",btn2:"m-btn-plain-active",arrow:"m-btn-downarrow",trigger:"m-btn"}})}($$),function($){$.fn.splitbutton=function(_481,_482){if("string"!=typeof _481)return _481=_481||{},this.each(function(){var _480,opts,_484=$.data(this,"splitbutton");_484?$.extend(_484.options,_481):($.data(this,"splitbutton",{options:$.extend({},$.fn.splitbutton.defaults,$.fn.splitbutton.parseOptions(this),_481)}),$(this).removeAttr("disabled")),_480=this,opts=$.data(_480,"splitbutton").options,$(_480).menubutton(opts),$(_480).addClass("s-btn")});var _483=$.fn.splitbutton.methods[_481];return _483?_483(this,_482):this.menubutton(_481,_482)},$.fn.splitbutton.methods={options:function(jq){var _485=jq.menubutton("options"),_486=$.data(jq[0],"splitbutton").options;return $.extend(_486,{disabled:_485.disabled,toggle:_485.toggle,selected:_485.selected}),_486}},$.fn.splitbutton.parseOptions=function(_487){$(_487);return $.extend({},$.fn.linkbutton.parseOptions(_487),$.parser.parseOptions(_487,["menu",{plain:"boolean",duration:"number"}]))},$.fn.splitbutton.defaults=$.extend({},$.fn.linkbutton.defaults,{plain:!0,menu:null,duration:100,cls:{btn1:"m-btn-active s-btn-active",btn2:"m-btn-plain-active s-btn-plain-active",arrow:"m-btn-downarrow",trigger:"m-btn-line"}})}($$),function($){function _48b(_48c,_48d){var _48e=$.data(_48c,"switchbutton"),opts=_48e.options,_48f=_48e.switchbutton;_48d&&$.extend(opts,_48d);var _490=_48f.is(":visible");_490||_48f.appendTo("body"),_48f._size(opts);var w=_48f.width(),h=_48f.height(),w=_48f.outerWidth(),h=_48f.outerHeight(),_491=parseInt(opts.handleWidth)||_48f.height(),_492=2*w-_491;_48f.find(".switchbutton-inner").css({width:_492+"px",height:h+"px",lineHeight:h+"px"}),_48f.find(".switchbutton-handle")._outerWidth(_491)._outerHeight(h).css({marginLeft:-_491/2+"px"}),_48f.find(".switchbutton-on").css({width:w-_491/2+"px",textIndent:(opts.reversed?"":"-")+_491/2+"px"}),_48f.find(".switchbutton-off").css({width:w-_491/2+"px",textIndent:(opts.reversed?"-":"")+_491/2+"px"}),opts.marginWidth=w-_491,_493(_48c,opts.checked,!1),_490||_48f.insertAfter(_48c)}function _493(_49b,_49c,_49d){var _49e=$.data(_49b,"switchbutton"),opts=_49e.options;opts.checked=_49c;var _49f=_49e.switchbutton.find(".switchbutton-inner"),_4a0=_49f.find(".switchbutton-on"),_4a1=opts.reversed?opts.checked?opts.marginWidth:0:opts.checked?0:opts.marginWidth,css={};css["margin-"+_4a0.css("float").toLowerCase()]=-_4a1+"px",_49d?_49f.animate(css,200):_49f.css(css);var _4a2=_49f.find(".switchbutton-value"),ck=_4a2.is(":checked");$(_49b).add(_4a2)._propAttr("checked",opts.checked),ck!=opts.checked&&opts.onChange.call(_49b,opts.checked)}function _4a3(_4a4,_4a5){var _4a6=$.data(_4a4,"switchbutton"),opts=_4a6.options,_4a7=_4a6.switchbutton,_4a8=_4a7.find(".switchbutton-value");_4a5?(opts.disabled=!0,$(_4a4).add(_4a8).attr("disabled","disabled"),_4a7.addClass("switchbutton-disabled")):(opts.disabled=!1,$(_4a4).add(_4a8).removeAttr("disabled"),_4a7.removeClass("switchbutton-disabled"))}function _49a(_4a9,mode){var _4aa=$.data(_4a9,"switchbutton"),opts=_4aa.options;opts.readonly=null==mode||mode,_4aa.switchbutton.removeClass("switchbutton-readonly").addClass(opts.readonly?"switchbutton-readonly":"")}$.fn.switchbutton=function(_4ae,_4af){return"string"==typeof _4ae?$.fn.switchbutton.methods[_4ae](this,_4af):(_4ae=_4ae||{},this.each(function(){var _495,_496,opts,_497,_498,on,off,_499,_4b0=$.data(this,"switchbutton");_4b0?$.extend(_4b0.options,_4ae):_4b0=$.data(this,"switchbutton",{options:$.extend({},$.fn.switchbutton.defaults,$.fn.switchbutton.parseOptions(this),_4ae),switchbutton:function(_488){var _489=$('<span class="switchbutton"><span class="switchbutton-inner"><span class="switchbutton-on"></span><span class="switchbutton-handle"></span><span class="switchbutton-off"></span><input class="switchbutton-value" type="checkbox"></span></span>').insertAfter(_488),t=$(_488);t.addClass("switchbutton-f").hide();var name=t.attr("name");return name&&(t.removeAttr("name").attr("switchbuttonName",name),_489.find(".switchbutton-value").attr("name",name)),_489.bind("_resize",function(e,_48a){return($(this).hasClass("easyui-fluid")||_48a)&&_48b(_488),!1}),_489}(this)}),_4b0.options.originalChecked=_4b0.options.checked,_495=this,_496=$.data(_495,"switchbutton"),opts=_496.options,_497=_496.switchbutton,_498=_497.find(".switchbutton-inner"),on=_498.find(".switchbutton-on").html(opts.onText),off=_498.find(".switchbutton-off").html(opts.offText),_499=_498.find(".switchbutton-handle").html(opts.handleText),opts.reversed?(off.prependTo(_498),on.insertAfter(_499)):(on.prependTo(_498),off.insertAfter(_499)),_497.find(".switchbutton-value")._propAttr("checked",opts.checked),_497.removeClass("switchbutton-disabled").addClass(opts.disabled?"switchbutton-disabled":""),_497.removeClass("switchbutton-reversed").addClass(opts.reversed?"switchbutton-reversed":""),_493(_495,opts.checked),_49a(_495,opts.readonly),$(_495).switchbutton("setValue",opts.value),_48b(this),function(_4ac){var _4ad=$.data(_4ac,"switchbutton"),opts=_4ad.options;_4ad.switchbutton.unbind(".switchbutton").bind("click.switchbutton",function(){opts.disabled||opts.readonly||_493(_4ac,!opts.checked,!0)})}(this)}))},$.fn.switchbutton.methods={options:function(jq){var _4b1=jq.data("switchbutton");return $.extend(_4b1.options,{value:_4b1.switchbutton.find(".switchbutton-value").val()})},resize:function(jq,_4b2){return jq.each(function(){_48b(this,_4b2)})},enable:function(jq){return jq.each(function(){_4a3(this,!1)})},disable:function(jq){return jq.each(function(){_4a3(this,!0)})},readonly:function(jq,mode){return jq.each(function(){_49a(this,mode)})},check:function(jq){return jq.each(function(){_493(this,!0)})},uncheck:function(jq){return jq.each(function(){_493(this,!1)})},clear:function(jq){return jq.each(function(){_493(this,!1)})},reset:function(jq){return jq.each(function(){_493(this,$(this).switchbutton("options").originalChecked)})},setValue:function(jq,_4b3){return jq.each(function(){$(this).val(_4b3),$.data(this,"switchbutton").switchbutton.find(".switchbutton-value").val(_4b3)})}},$.fn.switchbutton.parseOptions=function(_4b4){var t=$(_4b4);return $.extend({},$.parser.parseOptions(_4b4,["onText","offText","handleText",{handleWidth:"number",reversed:"boolean"}]),{value:t.val()||void 0,checked:!!t.attr("checked")||void 0,disabled:!!t.attr("disabled")||void 0,readonly:!!t.attr("readonly")||void 0})},$.fn.switchbutton.defaults={handleWidth:"auto",width:60,height:26,checked:!1,disabled:!1,readonly:!1,reversed:!1,onText:"ON",offText:"OFF",handleText:"",value:"on",onChange:function(_4b5){}}}($$),function($){function init(_4b6){$(_4b6).addClass("validatebox-text")}function _4b7(_4b8){var _4b9=$.data(_4b8,"validatebox");_4b9.validating=!1,_4b9.vtimer&&clearTimeout(_4b9.vtimer),_4b9.ftimer&&clearTimeout(_4b9.ftimer),$(_4b8).tooltip("destroy"),$(_4b8).unbind(),$(_4b8).remove()}function _4ba(_4bb){var opts=$.data(_4bb,"validatebox").options;if($(_4bb).unbind(".validatebox"),!opts.novalidate&&!opts.disabled)for(var _4bc in opts.events)$(_4bb).bind(_4bc+".validatebox",{target:_4bb},opts.events[_4bc])}function _4bd(e){var _4be=e.data.target,_4bf=$.data(_4be,"validatebox"),opts=_4bf.options;$(_4be).attr("readonly")||(_4bf.validating=!0,_4bf.value=opts.val(_4be),function(){var _4c0;$(_4be).is(":visible")||(_4bf.validating=!1),_4bf.validating&&(_4c0=opts.val(_4be),_4bf.value!=_4c0?(_4bf.value=_4c0,_4bf.vtimer&&clearTimeout(_4bf.vtimer),_4bf.vtimer=setTimeout(function(){$(_4be).validatebox("validate")},opts.delay)):_4bf.message&&opts.err(_4be,_4bf.message),_4bf.ftimer=setTimeout(arguments.callee,opts.interval))}())}function _4c1(e){var _4c2=e.data.target,_4c3=$.data(_4c2,"validatebox"),opts=_4c3.options;_4c3.validating=!1,_4c3.vtimer&&(clearTimeout(_4c3.vtimer),_4c3.vtimer=void 0),_4c3.ftimer&&(clearTimeout(_4c3.ftimer),_4c3.ftimer=void 0),opts.validateOnBlur&&setTimeout(function(){$(_4c2).validatebox("validate")},0),opts.err(_4c2,_4c3.message,"hide")}function _4c4(e){var _4c5=e.data.target,_4c6=$.data(_4c5,"validatebox");_4c6.options.err(_4c5,_4c6.message,"show")}function _4c7(e){var _4c8=e.data.target,_4c9=$.data(_4c8,"validatebox");_4c9.validating||_4c9.options.err(_4c8,_4c9.message,"hide")}function _4ca(_4cb,_4cc,_4cd){var _4ce=$.data(_4cb,"validatebox"),opts=_4ce.options,t=$(_4cb);"hide"!=_4cd&&_4cc?(t.is(":focus")&&_4ce.validating||"show"==_4cd)&&t.tooltip($.extend({},opts.tipOptions,{content:_4cc,position:opts.tipPosition,deltaX:opts.deltaX,deltaY:opts.deltaY})).tooltip("show"):t.tooltip("hide")}function _4cf(_4d0){var _4d1=$.data(_4d0,"validatebox"),opts=_4d1.options,box=$(_4d0);opts.onBeforeValidate.call(_4d0);var _4d2=_4d3();return _4d2?box.removeClass("validatebox-invalid"):box.addClass("validatebox-invalid"),opts.err(_4d0,_4d1.message),opts.onValidate.call(_4d0,_4d2),_4d2;function _4d4(msg){_4d1.message=msg}function _4d5(_4d6,_4d7){var _4d8=opts.val(_4d0),_4d9=/([a-zA-Z_]+)(.*)/.exec(_4d6),rule=opts.rules[_4d9[1]];if(rule&&_4d8){var _4da=_4d7||opts.validParams||eval(_4d9[2]);if(!rule.validator.call(_4d0,_4d8,_4da)){var _4db=rule.message;if(_4da)for(var i=0;i<_4da.length;i++)_4db=_4db.replace(new RegExp("\\{"+i+"\\}","g"),_4da[i]);return void _4d4(opts.invalidMessage||_4db)}}return 1}function _4d3(){if(_4d4(""),!opts._validateOnCreate)return setTimeout(function(){opts._validateOnCreate=!0},0),!0;if(opts.novalidate||opts.disabled)return!0;if(opts.required&&""==opts.val(_4d0))return _4d4(opts.missingMessage),!1;if(opts.validType)if($.isArray(opts.validType)){for(var i=0;i<opts.validType.length;i++)if(!_4d5(opts.validType[i]))return!1}else if("string"==typeof opts.validType){if(!_4d5(opts.validType))return!1}else for(var _4dc in opts.validType){if(!_4d5(_4dc,opts.validType[_4dc]))return!1}return!0}}function _4de(_4df,_4e0){var opts=$.data(_4df,"validatebox").options;null!=_4e0&&(opts.disabled=_4e0),opts.disabled?$(_4df).addClass("validatebox-disabled").attr("disabled","disabled"):$(_4df).removeClass("validatebox-disabled").removeAttr("disabled")}function _4e1(_4e2,mode){var opts=$.data(_4e2,"validatebox").options;opts.readonly=null==mode||mode,opts.readonly||!opts.editable?($(_4e2).triggerHandler("blur.validatebox"),$(_4e2).addClass("validatebox-readonly").attr("readonly","readonly")):$(_4e2).removeClass("validatebox-readonly").removeAttr("readonly")}$.fn.validatebox=function(_4e3,_4e4){return"string"==typeof _4e3?$.fn.validatebox.methods[_4e3](this,_4e4):(_4e3=_4e3||{},this.each(function(){var _4e5=$.data(this,"validatebox");_4e5?$.extend(_4e5.options,_4e3):(init(this),_4e5=$.data(this,"validatebox",{options:$.extend({},$.fn.validatebox.defaults,$.fn.validatebox.parseOptions(this),_4e3)})),_4e5.options._validateOnCreate=_4e5.options.validateOnCreate,_4de(this,_4e5.options.disabled),_4e1(this,_4e5.options.readonly),_4ba(this),_4cf(this)}))},$.fn.validatebox.methods={options:function(jq){return $.data(jq[0],"validatebox").options},destroy:function(jq){return jq.each(function(){_4b7(this)})},validate:function(jq){return jq.each(function(){_4cf(this)})},isValid:function(jq){return _4cf(jq[0])},enableValidation:function(jq){return jq.each(function(){$(this).validatebox("options").novalidate=!1,_4ba(this),_4cf(this)})},disableValidation:function(jq){return jq.each(function(){$(this).validatebox("options").novalidate=!0,_4ba(this),_4cf(this)})},resetValidation:function(jq){return jq.each(function(){var opts=$(this).validatebox("options");opts._validateOnCreate=opts.validateOnCreate,_4cf(this)})},enable:function(jq){return jq.each(function(){_4de(this,!1),_4ba(this),_4cf(this)})},disable:function(jq){return jq.each(function(){_4de(this,!0),_4ba(this),_4cf(this)})},readonly:function(jq,mode){return jq.each(function(){_4e1(this,mode),_4ba(this),_4cf(this)})}},$.fn.validatebox.parseOptions=function(_4e6){var t=$(_4e6);return $.extend({},$.parser.parseOptions(_4e6,["validType","missingMessage","invalidMessage","tipPosition",{delay:"number",interval:"number",deltaX:"number"},{editable:"boolean",validateOnCreate:"boolean",validateOnBlur:"boolean"}]),{required:!!t.attr("required")||void 0,disabled:!!t.attr("disabled")||void 0,readonly:!!t.attr("readonly")||void 0,novalidate:null!=t.attr("novalidate")||void 0})},$.fn.validatebox.defaults={required:!1,validType:null,validParams:null,delay:200,interval:200,missingMessage:"This field is required.",invalidMessage:null,tipPosition:"right",deltaX:0,deltaY:0,novalidate:!1,editable:!0,disabled:!1,readonly:!1,validateOnCreate:!0,validateOnBlur:!1,events:{focus:_4bd,blur:_4c1,mouseenter:_4c4,mouseleave:_4c7,click:function(e){var t=$(e.data.target);"checkbox"!=t.attr("type")&&"radio"!=t.attr("type")||t.focus().validatebox("validate")}},val:function(_4e7){return $(_4e7).val()},err:function(_4e8,_4e9,_4ea){_4ca(_4e8,_4e9,_4ea)},tipOptions:{showEvent:"none",hideEvent:"none",showDelay:0,hideDelay:0,zIndex:"",onShow:function(){$(this).tooltip("tip").css({color:"#000",borderColor:"#CC9933",backgroundColor:"#FFFFCC"})},onHide:function(){$(this).tooltip("destroy")}},rules:{email:{validator:function(_4eb){return/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i.test(_4eb)},message:"Please enter a valid email address."},url:{validator:function(_4ec){return/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(_4ec)},message:"Please enter a valid URL."},length:{validator:function(_4ed,_4ee){var len=$.trim(_4ed).length;return len>=_4ee[0]&&len<=_4ee[1]},message:"Please enter a value between {0} and {1}."},remote:{validator:function(_4ef,_4f0){var data={};return data[_4f0[1]]=_4ef,"true"==$.ajax({url:_4f0[0],dataType:"json",data:data,async:!1,cache:!1,type:"post"}).responseText},message:"Please fix this field."}},onBeforeValidate:function(){},onValidate:function(_4f2){}}}($$),function($){var _4f3=0;function _4ff(_500,_501){var c,_502=$.data(_500,"textbox"),opts=_502.options,tb=_502.textbox,_503=tb.parent();_501&&("object"==typeof _501?$.extend(opts,_501):opts.width=_501),isNaN(parseInt(opts.width))&&((c=$(_500).clone()).css("visibility","hidden"),c.insertAfter(_500),opts.width=c.outerWidth(),c.remove());var _504=tb.is(":visible");_504||tb.appendTo("body");var _505=tb.find(".textbox-text"),btn=tb.find(".textbox-button"),_506=tb.find(".textbox-addon"),_507=_506.find(".textbox-icon");"auto"==opts.height&&_505.css({margin:"",paddingTop:"",paddingBottom:"",height:"",lineHeight:""}),tb._size(opts,_503),opts.label&&opts.labelPosition&&("top"==opts.labelPosition?(_502.label._size({width:"auto"==opts.labelWidth?tb.outerWidth():opts.labelWidth},tb),"auto"!=opts.height&&tb._size("height",tb.outerHeight()-_502.label.outerHeight())):(_502.label._size({width:opts.labelWidth,height:tb.outerHeight()},tb),opts.multiline||_502.label.css("lineHeight",_502.label.height()+"px"),tb._size("width",tb.outerWidth()-_502.label.outerWidth()))),"left"==opts.buttonAlign||"right"==opts.buttonAlign?btn.linkbutton("resize",{height:tb.height()}):btn.linkbutton("resize",{width:"100%"});var _508=tb.width()-_507.length*opts.iconWidth-_509("left")-_509("right"),_50a="auto"==opts.height?_505.outerHeight():tb.height()-_509("top")-_509("bottom");function _50b(_50c){return(opts.iconAlign==_50c?_506._outerWidth():0)+_509(_50c)}function _509(_50d){var w=0;return btn.filter(".textbox-button-"+_50d).each(function(){w+="left"==_50d||"right"==_50d?$(this).outerWidth():$(this).outerHeight()}),w}_506.css(opts.iconAlign,_509(opts.iconAlign)+"px"),_506.css("top",_509("top")+"px"),_507.css({width:opts.iconWidth+"px",height:_50a+"px"}),_505.css({paddingLeft:_500.style.paddingLeft||"",paddingRight:_500.style.paddingRight||"",marginLeft:_50b("left"),marginRight:_50b("right"),marginTop:_509("top"),marginBottom:_509("bottom")}),opts.multiline?(_505.css({paddingTop:_500.style.paddingTop||"",paddingBottom:_500.style.paddingBottom||""}),_505._outerHeight(_50a)):_505.css({paddingTop:0,paddingBottom:0,height:_50a+"px",lineHeight:_50a+"px"}),_505._outerWidth(_508),opts.onResizing.call(_500,opts.width,opts.height),_504||tb.insertAfter(_500),opts.onResize.call(_500,opts.width,opts.height)}function _4f9(_50e){var opts=$(_50e).textbox("options");$(_50e).textbox("textbox").validatebox($.extend({},opts,{deltaX:function(_510){return $(_50e).textbox("getTipX",_510)},deltaY:function(_511){return $(_50e).textbox("getTipY",_511)},onBeforeValidate:function(){opts.onBeforeValidate.call(_50e);var box=$(this);box.is(":focus")||box.val()!==opts.value&&(opts.oldInputValue=box.val(),box.val(opts.value))},onValidate:function(_512){var box=$(this);null!=opts.oldInputValue&&(box.val(opts.oldInputValue),opts.oldInputValue=void 0);var tb=box.parent();_512?tb.removeClass("textbox-invalid"):tb.addClass("textbox-invalid"),opts.onValidate.call(_50e,_512)}}))}function _513(_514){var _515=$.data(_514,"textbox"),opts=_515.options,tb=_515.textbox,_516=tb.find(".textbox-text");if(_516.attr("placeholder",opts.prompt),_516.unbind(".textbox"),$(_515.label).unbind(".textbox"),!opts.disabled&&!opts.readonly)for(var _517 in _515.label&&$(_515.label).bind("click.textbox",function(e){opts.hasFocusMe||(_516.focus(),$(_514).textbox("setSelectionRange",{start:0,end:_516.val().length}))}),_516.bind("blur.textbox",function(e){tb.hasClass("textbox-focused")&&(opts.value=$(this).val(),""==opts.value?$(this).val(opts.prompt).addClass("textbox-prompt"):$(this).removeClass("textbox-prompt"),tb.removeClass("textbox-focused"))}).bind("focus.textbox",function(e){opts.hasFocusMe=!0,tb.hasClass("textbox-focused")||($(this).val()!=opts.value&&$(this).val(opts.value),$(this).removeClass("textbox-prompt"),tb.addClass("textbox-focused"))}),opts.inputEvents)_516.bind(_517+".textbox",{target:_514},opts.inputEvents[_517]);var _518=tb.find(".textbox-addon");_518.unbind().bind("click",{target:_514},function(e){var _519,conf,icon=$(e.target).closest("a.textbox-icon:not(.textbox-icon-disabled)");icon.length&&(_519=parseInt(icon.attr("icon-index")),(conf=opts.icons[_519])&&conf.handler&&conf.handler.call(icon[0],e),opts.onClickIcon.call(_514,_519))}),_518.find(".textbox-icon").each(function(_51a){var conf=opts.icons[_51a],icon=$(this);!conf||conf.disabled||opts.disabled||opts.readonly?icon.addClass("textbox-icon-disabled"):icon.removeClass("textbox-icon-disabled")}),tb.find(".textbox-button").linkbutton(opts.disabled||opts.readonly?"disable":"enable"),tb.unbind(".textbox").bind("_resize.textbox",function(e,_51b){return($(this).hasClass("easyui-fluid")||_51b)&&_4ff(_514),!1})}function _4fa(_51c,_51d){var _51e=$.data(_51c,"textbox"),opts=_51e.options,tb=_51e.textbox,_51f=tb.find(".textbox-text"),ss=$(_51c).add(tb.find(".textbox-value"));opts.disabled=_51d,opts.disabled?(_51f.blur(),_51f.validatebox("disable"),tb.addClass("textbox-disabled"),ss.attr("disabled","disabled"),$(_51e.label).addClass("textbox-label-disabled")):(_51f.validatebox("enable"),tb.removeClass("textbox-disabled"),ss.removeAttr("disabled"),$(_51e.label).removeClass("textbox-label-disabled"))}function _4fb(_520,mode){var _521=$.data(_520,"textbox"),opts=_521.options,tb=_521.textbox,_522=tb.find(".textbox-text");opts.readonly=null==mode||mode,opts.readonly&&_522.triggerHandler("blur.textbox"),_522.validatebox("readonly",opts.readonly),tb.removeClass("textbox-readonly").addClass(opts.readonly?"textbox-readonly":"")}$.fn.textbox=function(_523,_524){if("string"!=typeof _523)return _523=_523||{},this.each(function(){var _527=$.data(this,"textbox");_527?($.extend(_527.options,_523),null!=_523.value&&(_527.options.originalValue=_523.value)):(_527=$.data(this,"textbox",{options:$.extend({},$.fn.textbox.defaults,$.fn.textbox.parseOptions(this),_523),textbox:function(_4f4){$(_4f4).addClass("textbox-f").hide();var span=$('<span class="textbox"><input class="textbox-text" autocomplete="off"><input type="hidden" class="textbox-value"></span>').insertAfter(_4f4),name=$(_4f4).attr("name");return name&&(span.find("input.textbox-value").attr("name",name),$(_4f4).removeAttr("name").attr("textboxName",name)),span}(this)})).options.originalValue=_527.options.value,function(_4f6){var _4f7=$.data(_4f6,"textbox"),opts=_4f7.options,tb=_4f7.textbox,_4f8="_easyui_textbox_input"+ ++_4f3;tb.addClass(opts.cls),tb.find(".textbox-text").remove(),opts.multiline?$('<textarea id="'+_4f8+'" class="textbox-text" autocomplete="off"></textarea>').prependTo(tb):$('<input id="'+_4f8+'" type="'+opts.type+'" class="textbox-text" autocomplete="off">').prependTo(tb),$("#"+_4f8).attr("tabindex",$(_4f6).attr("tabindex")||"").css("text-align",_4f6.style.textAlign||""),tb.find(".textbox-addon").remove();var bb=opts.icons?$.extend(!0,[],opts.icons):[];if(opts.iconCls&&bb.push({iconCls:opts.iconCls,disabled:!0}),bb.length){var bc=$('<span class="textbox-addon"></span>').prependTo(tb);bc.addClass("textbox-addon-"+opts.iconAlign);for(var i=0;i<bb.length;i++)bc.append('<a href="javascript:;" class="textbox-icon '+bb[i].iconCls+'" icon-index="'+i+'" tabindex="-1"></a>')}tb.find(".textbox-button").remove(),(opts.buttonText||opts.buttonIcon)&&$('<a href="javascript:;" class="textbox-button"></a>').prependTo(tb).addClass("textbox-button-"+opts.buttonAlign).linkbutton({text:opts.buttonText,iconCls:opts.buttonIcon,onClick:function(){var t=$(this).parent().prev();t.textbox("options").onClickButton.call(t[0])}}),opts.label?"object"==typeof opts.label?(_4f7.label=$(opts.label),_4f7.label.attr("for",_4f8)):($(_4f7.label).remove(),_4f7.label=$('<label class="textbox-label"></label>').html(opts.label),_4f7.label.css("textAlign",opts.labelAlign).attr("for",_4f8),"after"==opts.labelPosition?_4f7.label.insertAfter(tb):_4f7.label.insertBefore(_4f6),_4f7.label.removeClass("textbox-label-left textbox-label-right textbox-label-top"),_4f7.label.addClass("textbox-label-"+opts.labelPosition)):$(_4f7.label).remove(),_4f9(_4f6),_4fa(_4f6,opts.disabled),_4fb(_4f6,opts.readonly)}(this),_513(this),_527.options.doSize&&_4ff(this);var _528=_527.options.value;_527.options.value="",$(this).textbox("initValue",_528)});var _525=$.fn.textbox.methods[_523];return _525?_525(this,_524):this.each(function(){$(this).textbox("textbox").validatebox(_523,_524)})},$.fn.textbox.methods={options:function(jq){return $.data(jq[0],"textbox").options},cloneFrom:function(jq,from){return jq.each(function(){var opts,name,span,_529,_52a,_52b,t=$(this);t.data("textbox")||($(from).data("textbox")||$(from).textbox(),opts=$.extend(!0,{},$(from).textbox("options")),name=t.attr("name")||"",t.addClass("textbox-f").hide(),t.removeAttr("name").attr("textboxName",name),span=$(from).next().clone().insertAfter(t),_529="_easyui_textbox_input"+ ++_4f3,span.find(".textbox-value").attr("name",name),span.find(".textbox-text").attr("id",_529),(_52a=$($(from).textbox("label")).clone()).length&&(_52a.attr("for",_529),"after"==opts.labelPosition?_52a.insertAfter(t.next()):_52a.insertBefore(t)),$.data(this,"textbox",{options:opts,textbox:span,label:_52a.length?_52a:void 0}),(_52b=$(from).textbox("button")).length&&t.textbox("button").linkbutton($.extend(!0,{},_52b.linkbutton("options"))),_513(this),_4f9(this))})},textbox:function(jq){return $.data(jq[0],"textbox").textbox.find(".textbox-text")},button:function(jq){return $.data(jq[0],"textbox").textbox.find(".textbox-button")},label:function(jq){return $.data(jq[0],"textbox").label},destroy:function(jq){return jq.each(function(){var _4fd,_4fe,tb;_4fd=this,_4fe=$.data(_4fd,"textbox"),(tb=_4fe.textbox).find(".textbox-text").validatebox("destroy"),tb.remove(),$(_4fe.label).remove(),$(_4fd).remove()})},resize:function(jq,_52c){return jq.each(function(){_4ff(this,_52c)})},disable:function(jq){return jq.each(function(){_4fa(this,!0),_513(this)})},enable:function(jq){return jq.each(function(){_4fa(this,!1),_513(this)})},readonly:function(jq,mode){return jq.each(function(){_4fb(this,mode),_513(this)})},isValid:function(jq){return jq.textbox("textbox").validatebox("isValid")},clear:function(jq){return jq.each(function(){$(this).textbox("setValue","")})},setText:function(jq,_52d){return jq.each(function(){var opts=$(this).textbox("options"),_52e=$(this).textbox("textbox");_52d=null==_52d?"":String(_52d),$(this).textbox("getText")!=_52d&&_52e.val(_52d),opts.value=_52d,_52e.is(":focus")||(_52d?_52e.removeClass("textbox-prompt"):_52e.val(opts.prompt).addClass("textbox-prompt")),$(this).textbox("validate")})},initValue:function(jq,_52f){return jq.each(function(){var _530=$.data(this,"textbox");$(this).textbox("setText",_52f),_530.textbox.find(".textbox-value").val(_52f),$(this).val(_52f)})},setValue:function(jq,_531){return jq.each(function(){var opts=$.data(this,"textbox").options,_532=$(this).textbox("getValue");$(this).textbox("initValue",_531),_532!=_531&&(opts.onChange.call(this,_531,_532),$(this).closest("form").trigger("_change",[this]))})},getText:function(jq){var _533=jq.textbox("textbox");return _533.is(":focus")?_533.val():jq.textbox("options").value},getValue:function(jq){return jq.data("textbox").textbox.find(".textbox-value").val()},reset:function(jq){return jq.each(function(){var opts=$(this).textbox("options");$(this).textbox("textbox").val(opts.originalValue),$(this).textbox("setValue",opts.originalValue)})},getIcon:function(jq,_534){return jq.data("textbox").textbox.find(".textbox-icon:eq("+_534+")")},getTipX:function(jq,_535){var _536=jq.data("textbox"),opts=_536.options,tb=_536.textbox,_537=tb.find(".textbox-text"),_535=_535||opts.tipPosition,p1=tb.offset(),p2=_537.offset(),w1=tb.outerWidth(),w2=_537.outerWidth();return"right"==_535?w1-w2-p2.left+p1.left:"left"==_535?p1.left-p2.left:(w1-w2-p2.left+p1.left)/2-(p2.left-p1.left)/2},getTipY:function(jq,_538){var _539=jq.data("textbox"),opts=_539.options,tb=_539.textbox,_53a=tb.find(".textbox-text"),_538=_538||opts.tipPosition,p1=tb.offset(),p2=_53a.offset(),h1=tb.outerHeight(),h2=_53a.outerHeight();return"left"==_538||"right"==_538?(h1-h2-p2.top+p1.top)/2-(p2.top-p1.top)/2:"bottom"==_538?h1-h2-p2.top+p1.top:p1.top-p2.top},getSelectionStart:function(jq){return jq.textbox("getSelectionRange").start},getSelectionRange:function(jq){var s,_53d,_53b=jq.textbox("textbox")[0],_53c=0,end=0;return"number"==typeof _53b.selectionStart?(_53c=_53b.selectionStart,end=_53b.selectionEnd):_53b.createTextRange&&(s=document.selection.createRange(),(_53d=_53b.createTextRange()).setEndPoint("EndToStart",s),end=(_53c=_53d.text.length)+s.text.length),{start:_53c,end:end}},setSelectionRange:function(jq,_53e){return jq.each(function(){var _541,_53f=$(this).textbox("textbox")[0],_540=_53e.start,end=_53e.end;_53f.setSelectionRange?_53f.setSelectionRange(_540,end):_53f.createTextRange&&((_541=_53f.createTextRange()).collapse(),_541.moveEnd("character",end),_541.moveStart("character",_540),_541.select())})}},$.fn.textbox.parseOptions=function(_542){var t=$(_542);return $.extend({},$.fn.validatebox.parseOptions(_542),$.parser.parseOptions(_542,["prompt","iconCls","iconAlign","buttonText","buttonIcon","buttonAlign","label","labelPosition","labelAlign",{multiline:"boolean",iconWidth:"number",labelWidth:"number"}]),{value:t.val()||void 0,type:t.attr("type")?t.attr("type"):void 0})},$.fn.textbox.defaults=$.extend({},$.fn.validatebox.defaults,{doSize:!0,width:"auto",height:"auto",cls:null,prompt:"",value:"",type:"text",multiline:!1,icons:[],iconCls:null,iconAlign:"right",iconWidth:18,buttonText:"",buttonIcon:null,buttonAlign:"right",label:null,labelWidth:"auto",labelPosition:"before",labelAlign:"left",inputEvents:{blur:function(e){var t=$(e.data.target),opts=t.textbox("options");t.textbox("getValue")!=opts.value&&t.textbox("setValue",opts.value)},keydown:function(e){var t;13==e.keyCode&&(t=$(e.data.target)).textbox("setValue",t.textbox("getText"))}},onChange:function(_543,_544){},onResizing:function(_545,_546){},onResize:function(_547,_548){},onClickButton:function(){},onClickIcon:function(_549){}})}($$),function($){function _54f(_550,_551,all){var t=$(_550),opts=t.passwordbox("options");if(opts.revealed)t.textbox("setValue",_551);else{for(var _552=unescape(opts.passwordChar),cc=_551.split(""),vv=t.passwordbox("getValue").split(""),i=0;i<cc.length;i++){var c=cc[i];c!=vv[i]&&c!=_552&&vv.splice(i,0,c)}var pos=t.passwordbox("getSelectionStart");cc.length<vv.length&&vv.splice(pos,vv.length-cc.length,"");for(i=0;i<cc.length;i++)!all&&i==pos-1||(cc[i]=_552);t.textbox("setValue",vv.join("")),t.textbox("setText",cc.join("")),t.textbox("setSelectionRange",{start:pos,end:pos})}}function _54e(_553,_554){var t=$(_553),opts=t.passwordbox("options"),icon=t.next().find(".passwordbox-open"),_555=unescape(opts.passwordChar);_554=null==_554?t.textbox("getValue"):_554,t.textbox("setValue",_554),t.textbox("setText",opts.revealed?_554:_554.replace(/./gi,_555)),opts.revealed?icon.addClass("passwordbox-close"):icon.removeClass("passwordbox-close")}$.fn.passwordbox=function(_55d,_55e){if("string"!=typeof _55d)return _55d=_55d||{},this.each(function(){var _54b,opts,_54d,_560=$.data(this,"passwordbox");_560?$.extend(_560.options,_55d):_560=$.data(this,"passwordbox",{options:$.extend({},$.fn.passwordbox.defaults,$.fn.passwordbox.parseOptions(this),_55d)}),_54b=this,opts=$.data(_54b,"passwordbox").options,_54d=$.extend(!0,[],opts.icons),opts.showEye&&_54d.push({iconCls:"passwordbox-open",handler:function(e){opts.revealed=!opts.revealed,_54e(_54b)}}),$(_54b).addClass("passwordbox-f").textbox($.extend({},opts,{icons:_54d})),_54e(_54b)});var _55f=$.fn.passwordbox.methods[_55d];return _55f?_55f(this,_55e):this.textbox(_55d,_55e)},$.fn.passwordbox.methods={options:function(jq){return $.data(jq[0],"passwordbox").options},setValue:function(jq,_561){return jq.each(function(){_54e(this,_561)})},clear:function(jq){return jq.each(function(){_54e(this,"")})},reset:function(jq){return jq.each(function(){$(this).textbox("reset"),_54e(this)})},showPassword:function(jq){return jq.each(function(){$(this).passwordbox("options").revealed=!0,_54e(this)})},hidePassword:function(jq){return jq.each(function(){$(this).passwordbox("options").revealed=!1,_54e(this)})}},$.fn.passwordbox.parseOptions=function(_562){return $.extend({},$.fn.textbox.parseOptions(_562),$.parser.parseOptions(_562,["passwordChar",{checkInterval:"number",lastDelay:"number",revealed:"boolean",showEye:"boolean"}]))},$.fn.passwordbox.defaults=$.extend({},$.fn.textbox.defaults,{passwordChar:"%u25CF",checkInterval:200,lastDelay:500,revealed:!1,showEye:!0,inputEvents:{focus:function(e){var _557=e.data.target,t=$(e.data.target),_558=t.data("passwordbox"),opts=t.data("passwordbox").options;_558.checking=!0,_558.value=t.passwordbox("getText"),function(){var _559;_558.checking&&(_559=t.passwordbox("getText"),_558.value!=_559&&(_558.value=_559,_558.lastTimer&&(clearTimeout(_558.lastTimer),_558.lastTimer=void 0),_54f(_557,_559),_558.lastTimer=setTimeout(function(){_54f(_557,t.passwordbox("getText"),!0),_558.lastTimer=void 0},opts.lastDelay)),setTimeout(arguments.callee,opts.checkInterval))}()},blur:function(e){var _55b=e.data.target,_55c=$(_55b).data("passwordbox");_55c.checking=!1,_55c.lastTimer&&(clearTimeout(_55c.lastTimer),_55c.lastTimer=void 0),_54e(_55b)}},val:function(_563){return $(_563).parent().prev().passwordbox("getValue")}})}($$),function($){var _564=0;function _568(_569){var _56a=$.data(_569,"filebox"),opts=_56a.options;_56a.filebox.find(".textbox-value").remove(),opts.oldValue="";var file=$('<input type="file" class="textbox-value">').appendTo(_56a.filebox);return file.attr("id",opts.fileboxId).attr("name",$(_569).attr("textboxName")||""),file.attr("accept",opts.accept),file.attr("capture",opts.capture),opts.multiple&&file.attr("multiple","multiple"),file.change(function(){var _56b=this.value;this.files&&(_56b=$.map(this.files,function(file){return file.name}).join(opts.separator)),$(_569).filebox("setText",_56b),opts.onChange.call(_569,_56b,opts.oldValue),opts.oldValue=_56b}),file}$.fn.filebox=function(_56c,_56d){if("string"!=typeof _56c)return _56c=_56c||{},this.each(function(){var _56f=$.data(this,"filebox");_56f?$.extend(_56f.options,_56c):$.data(this,"filebox",{options:$.extend({},$.fn.filebox.defaults,$.fn.filebox.parseOptions(this),_56c)}),function(_566){var _567=$.data(_566,"filebox"),opts=_567.options;opts.fileboxId="filebox_file_id_"+ ++_564,$(_566).addClass("filebox-f").textbox(opts),$(_566).textbox("textbox").attr("readonly","readonly"),_567.filebox=$(_566).next().addClass("filebox");var file=_568(_566),btn=$(_566).filebox("button");btn.length&&($('<label class="filebox-label" for="'+opts.fileboxId+'"></label>').appendTo(btn),btn.linkbutton("options").disabled?file.attr("disabled","disabled"):file.removeAttr("disabled"))}(this)});var _56e=$.fn.filebox.methods[_56c];return _56e?_56e(this,_56d):this.textbox(_56c,_56d)},$.fn.filebox.methods={options:function(jq){var opts=jq.textbox("options");return $.extend($.data(jq[0],"filebox").options,{width:opts.width,value:opts.value,originalValue:opts.originalValue,disabled:opts.disabled,readonly:opts.readonly})},clear:function(jq){return jq.each(function(){$(this).textbox("clear"),_568(this)})},reset:function(jq){return jq.each(function(){$(this).filebox("clear")})},setValue:function(jq){return jq},setValues:function(jq){return jq}},$.fn.filebox.parseOptions=function(_570){var t=$(_570);return $.extend({},$.fn.textbox.parseOptions(_570),$.parser.parseOptions(_570,["accept","capture","separator"]),{multiple:!!t.attr("multiple")||void 0})},$.fn.filebox.defaults=$.extend({},$.fn.textbox.defaults,{buttonIcon:null,buttonText:"Choose File",buttonAlign:"right",inputEvents:{},accept:"",capture:"",separator:",",multiple:!1})}($$),function($){function _571(_572){var _573=$.data(_572,"searchbox"),opts=_573.options,_574=$.extend(!0,[],opts.icons);_574.push({iconCls:"searchbox-button",handler:function(e){var t=$(e.data.target);t.searchbox("options").searcher.call(e.data.target,t.searchbox("getValue"),t.searchbox("getName"))}}),function(){{var _579,_57a;opts.menu?(_573.menu=$(opts.menu).menu(),_579=_573.menu.menu("options"),_57a=_579.onClick,_579.onClick=function(item){_578(item),_57a.call(this,item)}):(_573.menu&&_573.menu.menu("destroy"),_573.menu=null)}}();var _576=function(){{if(_573.menu){var item=_573.menu.children("div.menu-item:first");return _573.menu.children("div.menu-item").each(function(){if($.extend({},$.parser.parseOptions(this),{selected:!!$(this).attr("selected")||void 0}).selected)return item=$(this),!1}),_573.menu.menu("getItem",item[0])}return null}}();function _578(item){item&&($(_572).textbox("button").menubutton({text:item.text,iconCls:item.iconCls||null,menu:_573.menu,menuAlign:opts.buttonAlign,plain:!1}),_573.searchbox.find("input.textbox-value").attr("name",item.name||item.text),$(_572).searchbox("resize"))}$(_572).addClass("searchbox-f").textbox($.extend({},opts,{icons:_574,buttonText:_576?_576.text:""})),$(_572).attr("searchboxName",$(_572).attr("textboxName")),_573.searchbox=$(_572).next(),_573.searchbox.addClass("searchbox"),_578(_576)}$.fn.searchbox=function(_57c,_57d){if("string"!=typeof _57c)return _57c=_57c||{},this.each(function(){var _57f=$.data(this,"searchbox");_57f?$.extend(_57f.options,_57c):$.data(this,"searchbox",{options:$.extend({},$.fn.searchbox.defaults,$.fn.searchbox.parseOptions(this),_57c)}),_571(this)});var _57e=$.fn.searchbox.methods[_57c];return _57e?_57e(this,_57d):this.textbox(_57c,_57d)},$.fn.searchbox.methods={options:function(jq){var opts=jq.textbox("options");return $.extend($.data(jq[0],"searchbox").options,{width:opts.width,value:opts.value,originalValue:opts.originalValue,disabled:opts.disabled,readonly:opts.readonly})},menu:function(jq){return $.data(jq[0],"searchbox").menu},getName:function(jq){return $.data(jq[0],"searchbox").searchbox.find("input.textbox-value").attr("name")},selectName:function(jq,name){return jq.each(function(){var menu=$.data(this,"searchbox").menu;menu&&menu.children("div.menu-item").each(function(){if(menu.menu("getItem",this).name==name)return $(this).triggerHandler("click"),!1})})},destroy:function(jq){return jq.each(function(){var menu=$(this).searchbox("menu");menu&&menu.menu("destroy"),$(this).textbox("destroy")})}},$.fn.searchbox.parseOptions=function(_580){var t=$(_580);return $.extend({},$.fn.textbox.parseOptions(_580),$.parser.parseOptions(_580,["menu"]),{searcher:t.attr("searcher")?eval(t.attr("searcher")):void 0})},$.fn.searchbox.defaults=$.extend({},$.fn.textbox.defaults,{inputEvents:$.extend({},$.fn.textbox.defaults.inputEvents,{keydown:function(e){if(13==e.keyCode){e.preventDefault();var t=$(e.data.target),opts=t.searchbox("options");return t.searchbox("setValue",$(this).val()),opts.searcher.call(e.data.target,t.searchbox("getValue"),t.searchbox("getName")),!1}}}),buttonAlign:"left",menu:null,searcher:function(_581,name){}})}($$),function($){function _582(_583,_584){var opts=$.data(_583,"form").options;$.extend(opts,_584||{});var _586,_587,ff,_585=$.extend({},opts.queryParams);0!=opts.onSubmit.call(_583,_585)&&((_586=$(_583).find(".textbox-text:focus")).triggerHandler("blur"),_586.focus(),_587=null,opts.dirty&&(ff=[],$.map(opts.dirtyFields,function(f){$(f).hasClass("textbox-f")?$(f).next().find(".textbox-value").each(function(){ff.push(this)}):ff.push(f)}),(_587=$(_583).find("input[name]:enabled,textarea[name]:enabled,select[name]:enabled").filter(function(){return-1==$.inArray(this,ff)})).attr("disabled","disabled")),opts.ajax?(!opts.iframe&&void 0!==window.FormData?function(_594,_595){var name,opts=$.data(_594,"form").options,_596=new FormData($(_594)[0]);for(name in _595)_596.append(name,_595[name]);$.ajax({url:opts.url,type:"post",xhr:function(){var xhr=$.ajaxSettings.xhr();return xhr.upload&&xhr.upload.addEventListener("progress",function(e){var _597,_598,_599;e.lengthComputable&&(_597=e.total,_598=e.loaded||e.position,_599=Math.ceil(100*_598/_597),opts.onProgress.call(_594,_599))},!1),xhr},data:_596,dataType:"html",cache:!1,contentType:!1,processData:!1,complete:function(res){opts.success.call(_594,res.responseText)}})}:_588)(_583,_585):$(_583).submit(),opts.dirty&&_587.removeAttr("disabled"))}function _588(_58a,_58b){var opts=$.data(_58a,"form").options,_58c="easyui_frame_"+(new Date).getTime(),_58d=$("<iframe id="+_58c+" name="+_58c+"></iframe>").appendTo("body");function _592(){var f=$("#"+_58c);if(f.length)try{var s=f.contents()[0].readyState;s&&"uninitialized"==s.toLowerCase()&&setTimeout(_592,100)}catch(e){cb()}}_58d.attr("src",window.ActiveXObject?"javascript:false":"about:blank"),_58d.css({position:"absolute",top:-1e3,left:-1e3}),_58d.bind("load",cb),function(_58f){var form=$(_58a);opts.url&&form.attr("action",opts.url);var t=form.attr("target"),a=form.attr("action");form.attr("target",_58c);var _590=$();try{for(var n in _58f){var _591=$('<input type="hidden" name="'+n+'">').val(_58f[n]).appendTo(form);_590=_590.add(_591)}_592(),form[0].submit()}finally{form.attr("action",a),t?form.attr("target",t):form.removeAttr("target"),_590.remove()}}(_58b);var _593=10;function cb(){var f=$("#"+_58c);if(f.length){f.unbind();var data="";try{var body=f.contents().find("body");if(""==(data=body.html())&&--_593)return void setTimeout(cb,100);var pre,ta=body.find(">textarea");ta.length?data=ta.val():(pre=body.find(">pre")).length&&(data=pre.html())}catch(e){}opts.success.call(_58a,data),setTimeout(function(){f.unbind(),f.remove()},100)}}}function load(_59a,data){var opts=$.data(_59a,"form").options;if("string"==typeof data){var _59b={};if(0==opts.onBeforeLoad.call(_59a,_59b))return;$.ajax({url:data,data:_59b,dataType:"json",success:function(data){_59c(data)},error:function(){opts.onLoadError.apply(_59a,arguments)}})}else _59c(data);function _59c(data){var name,form=$(_59a);for(name in data){var val=data[name];(function(name,val){var cc=$(_59a).find('[switchbuttonName="'+name+'"]');if(cc.length)return cc.switchbutton("uncheck"),cc.each(function(){_59f($(this).switchbutton("options").value,val)&&$(this).switchbutton("check")}),!0;if((cc=$(_59a).find('input[name="'+name+'"][type=radio], input[name="'+name+'"][type=checkbox]')).length)return cc._propAttr("checked",!1),cc.each(function(){_59f($(this).val(),val)&&$(this)._propAttr("checked",!0)}),!0;return!1})(name,val)||!function(name,val){var _5a0=$(_59a).find('[textboxName="'+name+'"],[sliderName="'+name+'"]');if(_5a0.length)for(var i=0;i<opts.fieldTypes.length;i++){var type=opts.fieldTypes[i],_5a1=_5a0.data(type);if(_5a1)return _5a1.options.multiple||_5a1.options.range?_5a0[type]("setValues",val):_5a0[type]("setValue",val),!0}return!1}(name,val)&&(form.find('input[name="'+name+'"]').val(val),form.find('textarea[name="'+name+'"]').val(val),form.find('select[name="'+name+'"]').val(val))}opts.onLoadSuccess.call(_59a,data),form.form("validate")}function _59f(v,val){return v==String(val)||0<=$.inArray(v,$.isArray(val)?val:[val])}}function _5ad(_5ae,_5af){_5af=_5af||{};var _5b0=$.data(_5ae,"form");_5b0?$.extend(_5b0.options,_5af):$.data(_5ae,"form",{options:$.extend({},$.fn.form.defaults,$.fn.form.parseOptions(_5ae),_5af)})}function _5ac(_5b4,_5b5){$.data(_5b4,"form").options.novalidate=_5b5,$(_5b4).find(".validatebox-text:not(:disabled)").validatebox(_5b5?"disableValidation":"enableValidation")}$.fn.form=function(_5b6,_5b7){return"string"==typeof _5b6?(this.each(function(){_5ad(this)}),$.fn.form.methods[_5b6](this,_5b7)):this.each(function(){var _5aa,_5ab;_5ad(this,_5b6),_5aa=this,_5ab=$.data(_5aa,"form").options,$(_5aa).unbind(".form"),_5ab.ajax&&$(_5aa).bind("submit.form",function(){return setTimeout(function(){_582(_5aa,_5ab)},0),!1}),$(_5aa).bind("_change.form",function(e,t){-1==$.inArray(t,_5ab.dirtyFields)&&_5ab.dirtyFields.push(t),_5ab.onChange.call(this,t)}).bind("change.form",function(e){var t=e.target;$(t).hasClass("textbox-text")||(-1==$.inArray(t,_5ab.dirtyFields)&&_5ab.dirtyFields.push(t),_5ab.onChange.call(this,t))}),_5ac(_5aa,_5ab.novalidate)})},$.fn.form.methods={options:function(jq){return $.data(jq[0],"form").options},submit:function(jq,_5b8){return jq.each(function(){_582(this,_5b8)})},load:function(jq,data){return jq.each(function(){load(this,data)})},clear:function(jq){return jq.each(function(){!function(_5a3){$("input,select,textarea",_5a3).each(function(){var t,tag,file,_5a4;$(this).hasClass("textbox-value")||(t=this.type,tag=this.tagName.toLowerCase(),"text"==t||"hidden"==t||"password"==t||"textarea"==tag?this.value="":"file"==t?(file=$(this)).hasClass("textbox-value")||((_5a4=file.clone().val("")).insertAfter(file),file.data("validatebox")?(file.validatebox("destroy"),_5a4.validatebox()):file.remove()):"checkbox"==t||"radio"==t?this.checked=!1:"select"==tag&&(this.selectedIndex=-1))});for(var tmp=$(),form=$(_5a3),opts=$.data(_5a3,"form").options,i=0;i<opts.fieldTypes.length;i++){var type=opts.fieldTypes[i],_5a5=form.find("."+type+"-f").not(tmp);_5a5.length&&_5a5[type]&&(_5a5[type]("clear"),tmp=tmp.add(_5a5))}form.form("validate")}(this)})},reset:function(jq){return jq.each(function(){!function(_5a7){_5a7.reset();for(var form=$(_5a7),opts=$.data(_5a7,"form").options,i=opts.fieldTypes.length-1;0<=i;i--){var type=opts.fieldTypes[i],_5a8=form.find("."+type+"-f");_5a8.length&&_5a8[type]&&_5a8[type]("reset")}form.form("validate")}(this)})},validate:function(jq){return function(_5b2){if($.fn.validatebox){var t=$(_5b2);t.find(".validatebox-text:not(:disabled)").validatebox("validate");var _5b3=t.find(".validatebox-invalid");return _5b3.filter(":not(:disabled):first").focus(),0==_5b3.length}return!0}(jq[0])},disableValidation:function(jq){return jq.each(function(){_5ac(this,!0)})},enableValidation:function(jq){return jq.each(function(){_5ac(this,!1)})},resetValidation:function(jq){return jq.each(function(){$(this).find(".validatebox-text:not(:disabled)").validatebox("resetValidation")})},resetDirty:function(jq){return jq.each(function(){$(this).form("options").dirtyFields=[]})}},$.fn.form.parseOptions=function(_5b9){var t=$(_5b9);return $.extend({},$.parser.parseOptions(_5b9,[{ajax:"boolean",dirty:"boolean"}]),{url:t.attr("action")?t.attr("action"):void 0})},$.fn.form.defaults={fieldTypes:["combobox","combotree","combogrid","combotreegrid","datetimebox","datebox","combo","datetimespinner","timespinner","numberspinner","spinner","slider","searchbox","numberbox","passwordbox","filebox","textbox","switchbutton"],novalidate:!1,ajax:!0,iframe:!0,dirty:!1,dirtyFields:[],url:null,queryParams:{},onSubmit:function(_5ba){return $(this).form("validate")},onProgress:function(_5bb){},success:function(data){},onBeforeLoad:function(_5bc){},onLoadSuccess:function(data){},onLoadError:function(){},onChange:function(_5bd){}}}($$),function($){$.fn.numberbox=function(_5c7,_5c8){if("string"!=typeof _5c7)return _5c7=_5c7||{},this.each(function(){var _5ca=$.data(this,"numberbox");_5ca?$.extend(_5ca.options,_5c7):_5ca=$.data(this,"numberbox",{options:$.extend({},$.fn.numberbox.defaults,$.fn.numberbox.parseOptions(this),_5c7)}),function(_5bf){var _5c0=$.data(_5bf,"numberbox"),opts=_5c0.options;$(_5bf).addClass("numberbox-f").textbox(opts),$(_5bf).textbox("textbox").css({imeMode:"disabled"}),$(_5bf).attr("numberboxName",$(_5bf).attr("textboxName")),_5c0.numberbox=$(_5bf).next(),_5c0.numberbox.addClass("numberbox");var _5c1=opts.parser.call(_5bf,opts.value),_5c2=opts.formatter.call(_5bf,_5c1);$(_5bf).numberbox("initValue",_5c1).numberbox("setText",_5c2)}(this)});var _5c9=$.fn.numberbox.methods[_5c7];return _5c9?_5c9(this,_5c8):this.textbox(_5c7,_5c8)},$.fn.numberbox.methods={options:function(jq){var opts=jq.data("textbox")?jq.textbox("options"):{};return $.extend($.data(jq[0],"numberbox").options,{width:opts.width,originalValue:opts.originalValue,disabled:opts.disabled,readonly:opts.readonly})},fix:function(jq){return jq.each(function(){var opts=$(this).numberbox("options");opts.value=null;var _5cb=opts.parser.call(this,$(this).numberbox("getText"));$(this).numberbox("setValue",_5cb)})},setValue:function(jq,_5cc){return jq.each(function(){!function(_5c4,_5c5){var opts=$.data(_5c4,"numberbox").options;opts.value=parseFloat(_5c5);var _5c5=opts.parser.call(_5c4,_5c5),text=opts.formatter.call(_5c4,_5c5);opts.value=_5c5,$(_5c4).textbox("setText",text).textbox("setValue",_5c5),text=opts.formatter.call(_5c4,$(_5c4).textbox("getValue")),$(_5c4).textbox("setText",text)}(this,_5cc)})},clear:function(jq){return jq.each(function(){$(this).textbox("clear"),$(this).numberbox("options").value=""})},reset:function(jq){return jq.each(function(){$(this).textbox("reset"),$(this).numberbox("setValue",$(this).numberbox("getValue"))})}},$.fn.numberbox.parseOptions=function(_5cd){var t=$(_5cd);return $.extend({},$.fn.textbox.parseOptions(_5cd),$.parser.parseOptions(_5cd,["decimalSeparator","groupSeparator","suffix",{min:"number",max:"number",precision:"number"}]),{prefix:t.attr("prefix")?t.attr("prefix"):void 0})},$.fn.numberbox.defaults=$.extend({},$.fn.textbox.defaults,{inputEvents:{keypress:function(e){var _5ce=e.data.target;return $(_5ce).numberbox("options").filter.call(_5ce,e)},blur:function(e){$(e.data.target).numberbox("fix")},keydown:function(e){13==e.keyCode&&$(e.data.target).numberbox("fix")}},min:null,max:null,precision:0,decimalSeparator:".",groupSeparator:"",prefix:"",suffix:"",filter:function(e){var opts=$(this).numberbox("options"),s=$(this).numberbox("getText");if(e.metaKey||e.ctrlKey)return!0;if(0<=$.inArray(String(e.which),["46","8","13","0"]))return!0;var tmp=$("<span></span>");tmp.html(String.fromCharCode(e.which));var c=tmp.text();return tmp.remove(),!c||("-"==c||c==opts.decimalSeparator?-1==s.indexOf(c):c==opts.groupSeparator||0<="0123456789".indexOf(c))},formatter:function(_5cf){if(!_5cf)return _5cf;_5cf+="";var opts=$(this).numberbox("options"),s1=_5cf,s2="",dpos=_5cf.indexOf(".");if(0<=dpos&&(s1=_5cf.substring(0,dpos),s2=_5cf.substring(dpos+1,_5cf.length)),opts.groupSeparator)for(var p=/(\d+)(\d{3})/;p.test(s1);)s1=s1.replace(p,"$1"+opts.groupSeparator+"$2");return s2?opts.prefix+s1+opts.decimalSeparator+s2+opts.suffix:opts.prefix+s1+opts.suffix},parser:function(s){s+="";var opts=$(this).numberbox("options");opts.prefix&&(s=$.trim(s.replace(new RegExp("\\"+$.trim(opts.prefix),"g"),""))),opts.suffix&&(s=$.trim(s.replace(new RegExp("\\"+$.trim(opts.suffix),"g"),""))),parseFloat(s)!=opts.value&&(opts.groupSeparator&&(s=$.trim(s.replace(new RegExp("\\"+opts.groupSeparator,"g"),""))),opts.decimalSeparator&&(s=$.trim(s.replace(new RegExp("\\"+opts.decimalSeparator,"g"),"."))),s=s.replace(/\s/g,""));var val=parseFloat(s).toFixed(opts.precision);return isNaN(val)?val="":"number"==typeof opts.min&&val<opts.min?val=opts.min.toFixed(opts.precision):"number"==typeof opts.max&&val>opts.max&&(val=opts.max.toFixed(opts.precision)),val}})}($$),function($){function _5d0(_5d1,_5d2){var opts=$.data(_5d1,"calendar").options,t=$(_5d1);_5d2&&$.extend(opts,{width:_5d2.width,height:_5d2.height}),t._size(opts,t.parent()),t.find(".calendar-body")._outerHeight(t.height()-t.find(".calendar-header")._outerHeight()),t.find(".calendar-menu").is(":visible")&&_5d3(_5d1)}function _5d3(_5e2){var opts=$.data(_5e2,"calendar").options;if($(_5e2).find(".calendar-menu").show(),$(_5e2).find(".calendar-menu-month-inner").is(":empty")){$(_5e2).find(".calendar-menu-month-inner").empty();for(var t=$('<table class="calendar-mtable"></table>').appendTo($(_5e2).find(".calendar-menu-month-inner")),idx=0,i=0;i<3;i++)for(var tr=$("<tr></tr>").appendTo(t),j=0;j<4;j++)$('<td class="calendar-nav calendar-menu-month"></td>').html(opts.months[idx++]).attr("abbr",idx).appendTo(tr)}var body=$(_5e2).find(".calendar-body"),sele=$(_5e2).find(".calendar-menu"),_5e3=sele.find(".calendar-menu-year-inner"),_5e4=sele.find(".calendar-menu-month-inner");_5e3.find("input").val(opts.year).focus(),_5e4.find("td.calendar-selected").removeClass("calendar-selected"),_5e4.find("td:eq("+(opts.month-1)+")").addClass("calendar-selected"),sele._outerWidth(body._outerWidth()),sele._outerHeight(body._outerHeight()),_5e4._outerHeight(sele.height()-_5e3._outerHeight())}function show(_5f0){var opts=$.data(_5f0,"calendar").options;opts.current&&!opts.validator.call(_5f0,opts.current)&&(opts.current=null);var now=new Date,_5f1=now.getFullYear()+","+(now.getMonth()+1)+","+now.getDate(),_5f2=opts.current?opts.current.getFullYear()+","+(opts.current.getMonth()+1)+","+opts.current.getDate():"",_5f3=6-opts.firstDay,_5f4=_5f3+1;7<=_5f3&&(_5f3-=7),7<=_5f4&&(_5f4-=7),$(_5f0).find(".calendar-title span").html(opts.months[opts.month-1]+" "+opts.year);var body=$(_5f0).find("div.calendar-body");body.children("table").remove();var data=['<table class="calendar-dtable" cellspacing="0" cellpadding="0" border="0">'];data.push("<thead><tr>"),opts.showWeek&&data.push('<th class="calendar-week">'+opts.weekNumberHeader+"</th>");for(var i=opts.firstDay;i<opts.weeks.length;i++)data.push("<th>"+opts.weeks[i]+"</th>");for(i=0;i<opts.firstDay;i++)data.push("<th>"+opts.weeks[i]+"</th>");data.push("</tr></thead>"),data.push("<tbody>");for(var _5f5=function(_5e6,year,_5e7){for(var opts=$.data(_5e6,"calendar").options,_5e8=[],_5e9=new Date(year,_5e7,0).getDate(),i=1;i<=_5e9;i++)_5e8.push([year,_5e7,i]);for(var _5ea=[],week=[],_5eb=-1;0<_5e8.length;){var date=_5e8.shift();week.push(date);var day=new Date(date[0],date[1]-1,date[2]).getDay();_5eb==day?day=0:day==(0==opts.firstDay?7:opts.firstDay)-1&&(_5ea.push(week),week=[]),_5eb=day}week.length&&_5ea.push(week);var _5ec=_5ea[0];if(_5ec.length<7)for(;_5ec.length<7;){var _5ed=_5ec[0],date=new Date(_5ed[0],_5ed[1]-1,_5ed[2]-1);_5ec.unshift([date.getFullYear(),date.getMonth()+1,date.getDate()])}else{for(_5ed=_5ec[0],week=[],i=1;i<=7;i++){date=new Date(_5ed[0],_5ed[1]-1,_5ed[2]-i);week.unshift([date.getFullYear(),date.getMonth()+1,date.getDate()])}_5ea.unshift(week)}for(var _5ee=_5ea[_5ea.length-1];_5ee.length<7;){var _5ef=_5ee[_5ee.length-1],date=new Date(_5ef[0],_5ef[1]-1,_5ef[2]+1);_5ee.push([date.getFullYear(),date.getMonth()+1,date.getDate()])}if(_5ea.length<6){for(_5ef=_5ee[_5ee.length-1],week=[],i=1;i<=7;i++){date=new Date(_5ef[0],_5ef[1]-1,_5ef[2]+i);week.push([date.getFullYear(),date.getMonth()+1,date.getDate()])}_5ea.push(week)}return _5ea}(_5f0,opts.year,opts.month),i=0;i<_5f5.length;i++){var _5f6,week=_5f5[i],cls="";0==i?cls="calendar-first":i==_5f5.length-1&&(cls="calendar-last"),data.push('<tr class="'+cls+'">'),opts.showWeek&&(_5f6=opts.getWeekNumber(new Date(week[0][0],parseInt(week[0][1])-1,week[0][2])),data.push('<td class="calendar-week">'+_5f6+"</td>"));for(var j=0;j<week.length;j++){var day=week[j],s=day[0]+","+day[1]+","+day[2],_5f7=new Date(day[0],parseInt(day[1])-1,day[2]),d=opts.formatter.call(_5f0,_5f7),css=opts.styler.call(_5f0,_5f7),_5f8="",_5f9="";"string"==typeof css?_5f9=css:css&&(_5f8=css.class||"",_5f9=css.style||"");cls="calendar-day";opts.year==day[0]&&opts.month==day[1]||(cls+=" calendar-other-month"),s==_5f1&&(cls+=" calendar-today"),s==_5f2&&(cls+=" calendar-selected"),j==_5f3?cls+=" calendar-saturday":j==_5f4&&(cls+=" calendar-sunday"),0==j?cls+=" calendar-first":j==week.length-1&&(cls+=" calendar-last"),cls+=" "+_5f8,opts.validator.call(_5f0,_5f7)||(cls+=" calendar-disabled"),data.push('<td class="'+cls+'" abbr="'+s+'" style="'+_5f9+'">'+d+"</td>")}data.push("</tr>")}data.push("</tbody>"),data.push("</table>"),body.append(data.join("")),body.children("table.calendar-dtable").prependTo(body),opts.onNavigate.call(_5f0,opts.year,opts.month)}var d;$.fn.calendar=function(_5fa,_5fb){return"string"==typeof _5fa?$.fn.calendar.methods[_5fa](this,_5fb):(_5fa=_5fa||{},this.each(function(){var _5d4,_5d7,opts,menu,_5fc=$.data(this,"calendar");function _5d9(t){var day=$(t).closest(".calendar-day");return day.length?day:$(t)}function _5d8(_5de){var menu=$(_5d7).find(".calendar-menu"),year=menu.find(".calendar-menu-year").val(),_5df=menu.find(".calendar-selected").attr("abbr");isNaN(year)||(opts.year=parseInt(year),opts.month=parseInt(_5df),show(_5d7)),_5de&&menu.hide()}function _5da(_5e0){opts.year+=_5e0,show(_5d7),menu.find(".calendar-menu-year").val(opts.year)}function _5db(_5e1){opts.month+=_5e1,12<opts.month?(opts.year++,opts.month=1):opts.month<1&&(opts.year--,opts.month=12),show(_5d7),menu.find("td.calendar-selected").removeClass("calendar-selected"),menu.find("td:eq("+(opts.month-1)+")").addClass("calendar-selected")}_5fc?$.extend(_5fc.options,_5fa):(_5fc=$.data(this,"calendar",{options:$.extend({},$.fn.calendar.defaults,$.fn.calendar.parseOptions(this),_5fa)}),$(_5d4=this).addClass("calendar").html('<div class="calendar-header"><div class="calendar-nav calendar-prevmonth"></div><div class="calendar-nav calendar-nextmonth"></div><div class="calendar-nav calendar-prevyear"></div><div class="calendar-nav calendar-nextyear"></div><div class="calendar-title"><span class="calendar-text"></span></div></div><div class="calendar-body"><div class="calendar-menu"><div class="calendar-menu-year-inner"><span class="calendar-nav calendar-menu-prev"></span><span><input class="calendar-menu-year" type="text"></input></span><span class="calendar-nav calendar-menu-next"></span></div><div class="calendar-menu-month-inner"></div></div></div>'),$(_5d4).bind("_resize",function(e,_5d5){return($(this).hasClass("easyui-fluid")||_5d5)&&_5d0(_5d4),!1})),0==_5fc.options.border&&$(this).addClass("calendar-noborder"),_5d0(this),_5d7=this,opts=$.data(_5d7,"calendar").options,(menu=$(_5d7).find(".calendar-menu")).find(".calendar-menu-year").unbind(".calendar").bind("keypress.calendar",function(e){13==e.keyCode&&_5d8(!0)}),$(_5d7).unbind(".calendar").bind("mouseover.calendar",function(e){var t=_5d9(e.target);(t.hasClass("calendar-nav")||t.hasClass("calendar-text")||t.hasClass("calendar-day")&&!t.hasClass("calendar-disabled"))&&t.addClass("calendar-nav-hover")}).bind("mouseout.calendar",function(e){var t=_5d9(e.target);(t.hasClass("calendar-nav")||t.hasClass("calendar-text")||t.hasClass("calendar-day")&&!t.hasClass("calendar-disabled"))&&t.removeClass("calendar-nav-hover")}).bind("click.calendar",function(e){var t=_5d9(e.target);if(t.hasClass("calendar-menu-next")||t.hasClass("calendar-nextyear"))_5da(1);else if(t.hasClass("calendar-menu-prev")||t.hasClass("calendar-prevyear"))_5da(-1);else if(t.hasClass("calendar-menu-month"))menu.find(".calendar-selected").removeClass("calendar-selected"),t.addClass("calendar-selected"),_5d8(!0);else if(t.hasClass("calendar-prevmonth"))_5db(-1);else if(t.hasClass("calendar-nextmonth"))_5db(1);else if(t.hasClass("calendar-text"))menu.is(":visible")?menu.hide():_5d3(_5d7);else if(t.hasClass("calendar-day")){if(t.hasClass("calendar-disabled"))return;var _5dc=opts.current;t.closest("div.calendar-body").find(".calendar-selected").removeClass("calendar-selected"),t.addClass("calendar-selected");var _5dd=t.attr("abbr").split(","),y=parseInt(_5dd[0]),m=parseInt(_5dd[1]),d=parseInt(_5dd[2]);opts.current=new Date(y,m-1,d),opts.onSelect.call(_5d7,opts.current),_5dc&&_5dc.getTime()==opts.current.getTime()||opts.onChange.call(_5d7,opts.current,_5dc),opts.year==y&&opts.month==m||(opts.year=y,opts.month=m,show(_5d7))}}),show(this),$(this).find("div.calendar-menu").hide()}))},$.fn.calendar.methods={options:function(jq){return $.data(jq[0],"calendar").options},resize:function(jq,_5fd){return jq.each(function(){_5d0(this,_5fd)})},moveTo:function(jq,date){return jq.each(function(){var opts,_5fe,now;date?(opts=$(this).calendar("options")).validator.call(this,date)&&(_5fe=opts.current,$(this).calendar({year:date.getFullYear(),month:date.getMonth()+1,current:date}),_5fe&&_5fe.getTime()==date.getTime()||opts.onChange.call(this,opts.current,_5fe)):(now=new Date,$(this).calendar({year:now.getFullYear(),month:now.getMonth()+1,current:date}))})}},$.fn.calendar.parseOptions=function(_5ff){$(_5ff);return $.extend({},$.parser.parseOptions(_5ff,["weekNumberHeader",{firstDay:"number",fit:"boolean",border:"boolean",showWeek:"boolean"}]))},$.fn.calendar.defaults={width:180,height:180,fit:!1,border:!0,showWeek:!1,firstDay:0,weeks:["S","M","T","W","T","F","S"],months:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],year:(new Date).getFullYear(),month:(new Date).getMonth()+1,current:(d=new Date,new Date(d.getFullYear(),d.getMonth(),d.getDate())),weekNumberHeader:"",getWeekNumber:function(date){var _600=new Date(date.getTime());_600.setDate(_600.getDate()+4-(_600.getDay()||7));var time=_600.getTime();return _600.setMonth(0),_600.setDate(1),Math.floor(Math.round((time-_600)/864e5)/7)+1},formatter:function(date){return date.getDate()},styler:function(date){return""},validator:function(date){return!0},onSelect:function(date){},onChange:function(_601,_602){},onNavigate:function(year,_603){}}}($$),function($){function _612(_613,down){var opts=$(_613).spinner("options");opts.spin.call(_613,down),opts[down?"onSpinDown":"onSpinUp"].call(_613),$(_613).spinner("validate")}$.fn.spinner=function(_614,_615){if("string"!=typeof _614)return _614=_614||{},this.each(function(){var _605,_608,_60f,_610,_611,_606,opts,_607,_617=$.data(this,"spinner");_617?$.extend(_617.options,_614):_617=$.data(this,"spinner",{options:$.extend({},$.fn.spinner.defaults,$.fn.spinner.parseOptions(this),_614)}),_605=this,_606=$.data(_605,"spinner"),opts=_606.options,_607=$.extend(!0,[],opts.icons),"left"==opts.spinAlign||"right"==opts.spinAlign?(opts.spinArrow=!0,opts.iconAlign=opts.spinAlign,_608={iconCls:"spinner-arrow",handler:function(e){var spin=$(e.target).closest(".spinner-arrow-up,.spinner-arrow-down");_612(e.data.target,spin.hasClass("spinner-arrow-down"))}},"left"==opts.spinAlign?_607.unshift(_608):_607.push(_608)):(opts.spinArrow=!1,"vertical"==opts.spinAlign?("top"!=opts.buttonAlign&&(opts.buttonAlign="bottom"),opts.clsLeft="textbox-button-bottom",opts.clsRight="textbox-button-top"):(opts.clsLeft="textbox-button-left",opts.clsRight="textbox-button-right")),$(_605).addClass("spinner-f").textbox($.extend({},opts,{icons:_607,doSize:!1,onResize:function(_609,_60a){var span,btn,_60b,_60c,_60d,_60e;opts.spinArrow||(btn=(span=$(this).next()).find(".textbox-button:not(.spinner-button)")).length&&(_60b=btn.outerWidth(),_60c=btn.outerHeight(),_60d=span.find(".spinner-button."+opts.clsLeft),_60e=span.find(".spinner-button."+opts.clsRight),"right"==opts.buttonAlign?_60e.css("marginRight",_60b+"px"):"left"==opts.buttonAlign?_60d.css("marginLeft",_60b+"px"):"top"==opts.buttonAlign?_60e.css("marginTop",_60c+"px"):_60d.css("marginBottom",_60c+"px")),opts.onResize.call(this,_609,_60a)}})),$(_605).attr("spinnerName",$(_605).attr("textboxName")),_606.spinner=$(_605).next(),_606.spinner.addClass("spinner"),opts.spinArrow?((_60f=_606.spinner.find(".spinner-arrow")).append('<a href="javascript:;" class="spinner-arrow-up" tabindex="-1"></a>'),_60f.append('<a href="javascript:;" class="spinner-arrow-down" tabindex="-1"></a>')):(_610=$('<a href="javascript:;" class="textbox-button spinner-button"></a>').addClass(opts.clsLeft).appendTo(_606.spinner),_611=$('<a href="javascript:;" class="textbox-button spinner-button"></a>').addClass(opts.clsRight).appendTo(_606.spinner),_610.linkbutton({iconCls:opts.reversed?"spinner-button-up":"spinner-button-down",onClick:function(){_612(_605,!opts.reversed)}}),_611.linkbutton({iconCls:opts.reversed?"spinner-button-down":"spinner-button-up",onClick:function(){_612(_605,opts.reversed)}}),opts.disabled&&$(_605).spinner("disable"),opts.readonly&&$(_605).spinner("readonly")),$(_605).spinner("resize")});var _616=$.fn.spinner.methods[_614];return _616?_616(this,_615):this.textbox(_614,_615)},$.fn.spinner.methods={options:function(jq){var opts=jq.textbox("options");return $.extend($.data(jq[0],"spinner").options,{width:opts.width,value:opts.value,originalValue:opts.originalValue,disabled:opts.disabled,readonly:opts.readonly})}},$.fn.spinner.parseOptions=function(_618){return $.extend({},$.fn.textbox.parseOptions(_618),$.parser.parseOptions(_618,["min","max","spinAlign",{increment:"number",reversed:"boolean"}]))},$.fn.spinner.defaults=$.extend({},$.fn.textbox.defaults,{min:null,max:null,increment:1,spinAlign:"right",reversed:!1,spin:function(down){},onSpinUp:function(){},onSpinDown:function(){}})}($$),function($){$.fn.numberspinner=function(_61d,_61e){if("string"!=typeof _61d)return _61d=_61d||{},this.each(function(){var _620=$.data(this,"numberspinner");_620?$.extend(_620.options,_61d):$.data(this,"numberspinner",{options:$.extend({},$.fn.numberspinner.defaults,$.fn.numberspinner.parseOptions(this),_61d)}),function(_61a){$(_61a).addClass("numberspinner-f");var opts=$.data(_61a,"numberspinner").options;$(_61a).numberbox($.extend({},opts,{doSize:!1})).spinner(opts),$(_61a).numberbox("setValue",opts.value)}(this)});var _61f=$.fn.numberspinner.methods[_61d];return _61f?_61f(this,_61e):this.numberbox(_61d,_61e)},$.fn.numberspinner.methods={options:function(jq){var opts=jq.numberbox("options");return $.extend($.data(jq[0],"numberspinner").options,{width:opts.width,value:opts.value,originalValue:opts.originalValue,disabled:opts.disabled,readonly:opts.readonly})}},$.fn.numberspinner.parseOptions=function(_621){return $.extend({},$.fn.spinner.parseOptions(_621),$.fn.numberbox.parseOptions(_621),{})},$.fn.numberspinner.defaults=$.extend({},$.fn.spinner.defaults,$.fn.numberbox.defaults,{spin:function(down){!function(_61c,down){var opts=$.data(_61c,"numberspinner").options,v=parseFloat($(_61c).numberbox("getValue")||opts.value)||0;down?v-=opts.increment:v+=opts.increment,$(_61c).numberbox("setValue",v)}(this,down)}})}($$),function($){function _629(_62a,_62b){var opts=$.data(_62a,"timespinner").options;null!=_62b&&(opts.highlight=_62b);var tb,_62c=opts.selections[opts.highlight];_62c&&(tb=$(_62a).timespinner("textbox"),$(_62a).timespinner("setSelectionRange",{start:_62c[0],end:_62c[1]}),tb.focus())}$.fn.timespinner=function(_633,_634){if("string"!=typeof _633)return _633=_633||{},this.each(function(){var _636=$.data(this,"timespinner");_636?$.extend(_636.options,_633):$.data(this,"timespinner",{options:$.extend({},$.fn.timespinner.defaults,$.fn.timespinner.parseOptions(this),_633)}),function(_623){var opts=$.data(_623,"timespinner").options;$(_623).addClass("timespinner-f").spinner(opts);var _624=opts.formatter.call(_623,opts.parser.call(_623,opts.value));$(_623).timespinner("initValue",_624)}(this)});var _635=$.fn.timespinner.methods[_633];return _635?_635(this,_634):this.spinner(_633,_634)},$.fn.timespinner.methods={options:function(jq){var opts=jq.data("spinner")?jq.spinner("options"):{};return $.extend($.data(jq[0],"timespinner").options,{width:opts.width,value:opts.value,originalValue:opts.originalValue,disabled:opts.disabled,readonly:opts.readonly})},setValue:function(jq,_637){return jq.each(function(){var _62e,_62f,opts,text;_62e=this,_62f=_637,opts=$.data(_62e,"timespinner").options,_62f=opts.parser.call(_62e,_62f),text=opts.formatter.call(_62e,_62f),$(_62e).spinner("setValue",text)})},getHours:function(jq){var opts=$.data(jq[0],"timespinner").options,vv=jq.timespinner("getValue").split(opts.separator);return parseInt(vv[0],10)},getMinutes:function(jq){var opts=$.data(jq[0],"timespinner").options,vv=jq.timespinner("getValue").split(opts.separator);return parseInt(vv[1],10)},getSeconds:function(jq){var opts=$.data(jq[0],"timespinner").options,vv=jq.timespinner("getValue").split(opts.separator);return parseInt(vv[2],10)||0}},$.fn.timespinner.parseOptions=function(_638){return $.extend({},$.fn.spinner.parseOptions(_638),$.parser.parseOptions(_638,["separator",{showSeconds:"boolean",highlight:"number"}]))},$.fn.timespinner.defaults=$.extend({},$.fn.spinner.defaults,{inputEvents:$.extend({},$.fn.spinner.defaults.inputEvents,{click:function(e){(function(e){for(var _626=e.data.target,opts=$.data(_626,"timespinner").options,_627=$(_626).timespinner("getSelectionStart"),i=0;i<opts.selections.length;i++){var _628=opts.selections[i];if(_627>=_628[0]&&_627<=_628[1])return void _629(_626,i)}}).call(this,e)},blur:function(e){var t=$(e.data.target);t.timespinner("setValue",t.timespinner("getText"))},keydown:function(e){var t;13==e.keyCode&&(t=$(e.data.target)).timespinner("setValue",t.timespinner("getText"))}}),formatter:function(date){if(!date)return"";var opts=$(this).timespinner("options"),tt=[_639(date.getHours()),_639(date.getMinutes())];return opts.showSeconds&&tt.push(_639(date.getSeconds())),tt.join(opts.separator);function _639(_63a){return(_63a<10?"0":"")+_63a}},parser:function(s){var min,max,opts=$(this).timespinner("options"),date=_63b(s);return date&&((min=_63b(opts.min))&&date<min&&(date=min),(max=_63b(opts.max))&&max<date&&(date=max)),date;function _63b(s){if(!s)return null;var tt=s.split(opts.separator);return new Date(1900,0,0,parseInt(tt[0],10)||0,parseInt(tt[1],10)||0,parseInt(tt[2],10)||0)}},selections:[[0,2],[3,5],[6,8]],separator:":",showSeconds:!1,highlight:0,spin:function(down){!function(_631,down){var opts=$.data(_631,"timespinner").options,s=$(_631).timespinner("getValue"),_632=opts.selections[opts.highlight],s1=s.substring(0,_632[0]),s2=s.substring(_632[0],_632[1]),s3=s.substring(_632[1]),v=s1+((parseInt(s2,10)||0)+opts.increment*(down?-1:1))+s3;$(_631).timespinner("setValue",v),_629(_631)}(this,down)}})}($$),function($){$.fn.datetimespinner=function(_63e,_63f){if("string"!=typeof _63e)return _63e=_63e||{},this.each(function(){var _63d,opts,_641=$.data(this,"datetimespinner");_641?$.extend(_641.options,_63e):$.data(this,"datetimespinner",{options:$.extend({},$.fn.datetimespinner.defaults,$.fn.datetimespinner.parseOptions(this),_63e)}),_63d=this,opts=$.data(_63d,"datetimespinner").options,$(_63d).addClass("datetimespinner-f").timespinner(opts)});var _640=$.fn.datetimespinner.methods[_63e];return _640?_640(this,_63f):this.timespinner(_63e,_63f)},$.fn.datetimespinner.methods={options:function(jq){var opts=jq.timespinner("options");return $.extend($.data(jq[0],"datetimespinner").options,{width:opts.width,value:opts.value,originalValue:opts.originalValue,disabled:opts.disabled,readonly:opts.readonly})}},$.fn.datetimespinner.parseOptions=function(_642){return $.extend({},$.fn.timespinner.parseOptions(_642),$.parser.parseOptions(_642,[]))},$.fn.datetimespinner.defaults=$.extend({},$.fn.timespinner.defaults,{formatter:function(date){return date?$.fn.datebox.defaults.formatter.call(this,date)+" "+$.fn.timespinner.defaults.formatter.call(this,date):""},parser:function(s){if(!(s=$.trim(s)))return null;var dt=s.split(" "),_643=$.fn.datebox.defaults.parser.call(this,dt[0]);if(dt.length<2)return _643;var _644=$.fn.timespinner.defaults.parser.call(this,dt[1]);return new Date(_643.getFullYear(),_643.getMonth(),_643.getDate(),_644.getHours(),_644.getMinutes(),_644.getSeconds())},selections:[[0,2],[3,5],[6,10],[11,13],[14,16],[17,19]]})}($$),function($){var _645=0;function _646(a,o){return $.easyui.indexOfArray(a,o)}function _647(a,o,id){$.easyui.removeArrayItem(a,o,id)}function _648(a,o,r){$.easyui.addArrayItem(a,o,r)}function _649(_64a,aa){return $.data(_64a,"treegrid")?aa.slice(1):aa}function _64b(_64c){var _64d=$.data(_64c,"datagrid"),opts=_64d.options,_64e=_64d.panel,dc=_64d.dc,ss=null;opts.sharedStyleSheet?ss="boolean"==typeof opts.sharedStyleSheet?"head":opts.sharedStyleSheet:(ss=_64e.closest("div.datagrid-view")).length||(ss=dc.view);var cc=$(ss),_64f=(_64f=$.data(cc[0],"ss"))||$.data(cc[0],"ss",{cache:{},dirty:[]});return{add:function(_650){for(var ss=['<style type="text/css" easyui="true">'],i=0;i<_650.length;i++)_64f.cache[_650[i][0]]={width:_650[i][1]};var s,_651=0;for(s in _64f.cache){var item=_64f.cache[s];item.index=_651++,ss.push(s+"{width:"+item.width+"}")}ss.push("</style>"),$(ss.join("\n")).appendTo(cc),cc.children("style[easyui]:not(:last)").remove()},getRule:function(_652){var _653=cc.children("style[easyui]:last")[0],_654=_653.styleSheet?_653.styleSheet:_653.sheet||document.styleSheets[document.styleSheets.length-1];return(_654.cssRules||_654.rules)[_652]},set:function(_656,_657){var rule,item=_64f.cache[_656];item&&(item.width=_657,(rule=this.getRule(item.index))&&(rule.style.width=_657))},remove:function(_658){var s,tmp=[];for(s in _64f.cache)-1==s.indexOf(_658)&&tmp.push([s,_64f.cache[s].width]);_64f.cache={},this.add(tmp)},dirty:function(_659){_659&&_64f.dirty.push(_659)},clean:function(){for(var i=0;i<_64f.dirty.length;i++)this.remove(_64f.dirty[i]);_64f.dirty=[]}}}function _65a(_65b,_65c){var p,_65d=$.data(_65b,"datagrid"),opts=_65d.options,_65e=_65d.panel;_65c&&$.extend(opts,_65c),1==opts.fit&&(p=_65e.panel("panel").parent(),opts.width=p.width(),opts.height=p.height()),_65e.panel("resize",opts)}function _65f(_660){var _661=$.data(_660,"datagrid"),opts=_661.options,dc=_661.dc,wrap=_661.panel,_662=wrap.width(),_663=wrap.height(),view=dc.view,_664=dc.view1,_665=dc.view2,_666=_664.children("div.datagrid-header"),_667=_665.children("div.datagrid-header"),_668=_666.find("table"),_669=_667.find("table");view.width(_662);var _66a=_666.children("div.datagrid-header-inner").show();_664.width(_66a.find("table").width()),opts.showHeader||_66a.hide(),_665.width(_662-_664._outerWidth()),_664.children()._outerWidth(_664.width()),_665.children()._outerWidth(_665.width());var all=_666.add(_667).add(_668).add(_669);all.css("height","");var hh=Math.max(_668.height(),_669.height());all._outerHeight(hh),view.children(".datagrid-empty").css("top",hh+"px"),dc.body1.add(dc.body2).children("table.datagrid-btable-frozen").css({position:"absolute",top:dc.header2._outerHeight()});var _66b=dc.body2.children("table.datagrid-btable-frozen")._outerHeight(),_66c=_66b+_667._outerHeight()+_665.children(".datagrid-footer")._outerHeight();wrap.children(":not(.datagrid-view,.datagrid-mask,.datagrid-mask-msg)").each(function(){_66c+=$(this)._outerHeight()});var _66d=wrap.outerHeight()-wrap.height(),_66e=wrap._size("minHeight")||"",_66f=wrap._size("maxHeight")||"";_664.add(_665).children("div.datagrid-body").css({marginTop:_66b,height:isNaN(parseInt(opts.height))?"":_663-_66c,minHeight:_66e?_66e-_66d-_66c:"",maxHeight:_66f?_66f-_66d-_66c:""}),view.height(_665.height())}function _670(_671,_672,_673){$.data(_671,"datagrid").data.rows;var _675,_676,_677,_679,_67b,_67c,opts=$.data(_671,"datagrid").options,dc=$.data(_671,"datagrid").dc;function _674(trs1,trs2){for(var i=0;i<trs2.length;i++){var tr1=$(trs1[i]),tr2=$(trs2[i]);tr1.css("height",""),tr2.css("height","");var _67a=Math.max(tr1.height(),tr2.height());tr1.css("height",_67a),tr2.css("height",_67a)}}dc.body1.is(":empty")||opts.nowrap&&!opts.autoRowHeight&&!_673||(null!=_672?_674(opts.finder.getTr(_671,_672,"body",1),opts.finder.getTr(_671,_672,"body",2)):(_674(opts.finder.getTr(_671,0,"allbody",1),opts.finder.getTr(_671,0,"allbody",2)),opts.showFooter&&_674(opts.finder.getTr(_671,0,"allfooter",1),opts.finder.getTr(_671,0,"allfooter",2)))),_65f(_671),"auto"==opts.height&&(_675=dc.body1.parent(),_676=dc.body2,_67c=_67b=0,$(_676).children().each(function(){var c=$(this);c.is(":visible")&&(_67c+=c._outerHeight(),_67b<c._outerWidth()&&(_67b=c._outerWidth()))}),_679=(_677={width:_67b,height:_67c}).height,_677.width>_676.width()&&(_679+=18),_679-=parseInt(_676.css("marginTop"))||0,_675.height(_679),_676.height(_679),dc.view.height(dc.view2.height())),dc.body2.triggerHandler("scroll")}function _67d(_67e,_67f){var _680=$.data(_67e,"datagrid"),opts=_680.options,dc=_680.dc;function _681(_682){var _683=_682?1:2,tr=opts.finder.getTr(_67e,_67f,"body",_683);(_682?dc.body1:dc.body2).children("table.datagrid-btable-frozen").append(tr)}dc.body2.children("table.datagrid-btable-frozen").length||dc.body1.add(dc.body2).prepend('<table class="datagrid-btable datagrid-btable-frozen" cellspacing="0" cellpadding="0"></table>'),_681(!0),_681(!1),_65f(_67e)}function _684(_685,_686){function _687(){var _688=[],_689=[];return $(_685).children("thead").each(function(){var opt=$.parser.parseOptions(this,[{frozen:"boolean"}]);$(this).find("tr").each(function(){var cols=[];$(this).find("th").each(function(){var th=$(this),col=$.extend({},$.parser.parseOptions(this,["id","field","align","halign","order","width",{sortable:"boolean",checkbox:"boolean",resizable:"boolean",fixed:"boolean"},{rowspan:"number",colspan:"number"}]),{title:th.html()||void 0,hidden:!!th.attr("hidden")||void 0,formatter:th.attr("formatter")?eval(th.attr("formatter")):void 0,styler:th.attr("styler")?eval(th.attr("styler")):void 0,sorter:th.attr("sorter")?eval(th.attr("sorter")):void 0}),s;col.width&&-1==String(col.width).indexOf("%")&&(col.width=parseInt(col.width)),th.attr("editor")&&(s=$.trim(th.attr("editor")),"{"==s.substr(0,1)?col.editor=eval("("+s+")"):col.editor=s),cols.push(col)}),opt.frozen?_688.push(cols):_689.push(cols)})}),[_688,_689]}var _68a=$('<div class="datagrid-wrap"><div class="datagrid-view"><div class="datagrid-view1"><div class="datagrid-header"><div class="datagrid-header-inner"></div></div><div class="datagrid-body"><div class="datagrid-body-inner"></div></div><div class="datagrid-footer"><div class="datagrid-footer-inner"></div></div></div><div class="datagrid-view2"><div class="datagrid-header"><div class="datagrid-header-inner"></div></div><div class="datagrid-body"></div><div class="datagrid-footer"><div class="datagrid-footer-inner"></div></div></div></div></div>').insertAfter(_685);_68a.panel({doSize:!1,cls:"datagrid"}),$(_685).addClass("datagrid-f").hide().appendTo(_68a.children("div.datagrid-view"));var cc=_687(),view=_68a.children("div.datagrid-view"),_68b=view.children("div.datagrid-view1"),_68c=view.children("div.datagrid-view2");return{panel:_68a,frozenColumns:cc[0],columns:cc[1],dc:{view:view,view1:_68b,view2:_68c,header1:_68b.children("div.datagrid-header").children("div.datagrid-header-inner"),header2:_68c.children("div.datagrid-header").children("div.datagrid-header-inner"),body1:_68b.children("div.datagrid-body").children("div.datagrid-body-inner"),body2:_68c.children("div.datagrid-body"),footer1:_68b.children("div.datagrid-footer").children("div.datagrid-footer-inner"),footer2:_68c.children("div.datagrid-footer").children("div.datagrid-footer-inner")}}}function _68d(_68e){var _68f=$.data(_68e,"datagrid"),opts=_68f.options,dc=_68f.dc,_690=_68f.panel,_695,ptop;if(_68f.ss=$(_68e).datagrid("createStyleSheet"),_690.panel($.extend({},opts,{id:null,doSize:!1,onResize:function(_691,_692){$.data(_68e,"datagrid")&&(_65f(_68e),$(_68e).datagrid("fitColumns"),opts.onResize.call(_690,_691,_692))},onExpand:function(){$.data(_68e,"datagrid")&&($(_68e).datagrid("fixRowHeight").datagrid("fitColumns"),opts.onExpand.call(_690))}})),_68f.rowIdPrefix="datagrid-row-r"+ ++_645,_68f.cellClassPrefix="datagrid-cell-c"+_645,_693(dc.header1,opts.frozenColumns,!0),_693(dc.header2,opts.columns,!1),_694(),dc.header1.add(dc.header2).css("display",opts.showHeader?"block":"none"),dc.footer1.add(dc.footer2).css("display",opts.showFooter?"block":"none"),opts.toolbar)if($.isArray(opts.toolbar)){$("div.datagrid-toolbar",_690).remove();for(var tb=$('<div class="datagrid-toolbar"><table cellspacing="0" cellpadding="0"><tr></tr></table></div>').prependTo(_690),tr=tb.find("tr"),i=0;i<opts.toolbar.length;i++){var btn=opts.toolbar[i],td,tool;"-"==btn?$('<td><div class="datagrid-btn-separator"></div></td>').appendTo(tr):(td=$("<td></td>").appendTo(tr),tool=$('<a href="javascript:;"></a>').appendTo(td),tool[0].onclick=eval(btn.handler||function(){}),tool.linkbutton($.extend({},btn,{plain:!0})))}}else $(opts.toolbar).addClass("datagrid-toolbar").prependTo(_690),$(opts.toolbar).show();else $("div.datagrid-toolbar",_690).remove();function _693(_698,_699,_69a){if(_699){$(_698).show(),$(_698).empty();var tmp=$('<div class="datagrid-cell" style="position:absolute;left:-99999px"></div>').appendTo("body");tmp._outerWidth(99);var _69b=100-parseInt(tmp[0].style.width);tmp.remove();var _69c=[],_69d=[],_69e=[];opts.sortName&&(_69c=opts.sortName.split(","),_69d=opts.sortOrder.split(","));for(var t=$('<table class="datagrid-htable" border="0" cellspacing="0" cellpadding="0"><tbody></tbody></table>').appendTo(_698),i=0;i<_699.length;i++)for(var tr=$('<tr class="datagrid-header-row"></tr>').appendTo($("tbody",t)),cols=_699[i],j=0;j<cols.length;j++){var col=cols[j],attr="";col.rowspan&&(attr+='rowspan="'+col.rowspan+'" '),col.colspan&&(attr+='colspan="'+col.colspan+'" ',col.id||(col.id=["datagrid-td-group"+_645,i,j].join("-"))),col.id&&(attr+='id="'+col.id+'"');var cell,pos,_69f,td=$("<td "+attr+"></td>").appendTo(tr);col.checkbox?(td.attr("field",col.field),$('<div class="datagrid-header-check"></div>').html('<input type="checkbox"/>').appendTo(td)):col.field?(td.attr("field",col.field),td.append('<div class="datagrid-cell"><span></span><span class="datagrid-sort-icon"></span></div>'),td.find("span:first").html(col.title),cell=td.find("div.datagrid-cell"),0<=(pos=_646(_69c,col.field))&&cell.addClass("datagrid-sort-"+_69d[pos]),col.sortable&&cell.addClass("datagrid-sort"),0==col.resizable&&cell.attr("resizable","false"),col.width?(_69f=$.parser.parseValue("width",col.width,dc.view,opts.scrollbarSize+(opts.rownumbers?opts.rownumberWidth:0)),col.deltaWidth=_69b,col.boxWidth=_69f-_69b):col.auto=!0,cell.css("text-align",col.halign||col.align||""),col.cellClass=_68f.cellClassPrefix+"-"+col.field.replace(/[\.|\s]/g,"-"),cell.addClass(col.cellClass)):$('<div class="datagrid-cell-group"></div>').html(col.title).appendTo(td),col.hidden&&(td.hide(),_69e.push(col.field))}_69a&&opts.rownumbers&&(td=$('<td rowspan="'+opts.frozenColumns.length+'"><div class="datagrid-header-rownumber"></div></td>'),0==$("tr",t).length?td.wrap('<tr class="datagrid-header-row"></tr>').parent().appendTo($("tbody",t)):td.prependTo($("tr:first",t)));for(i=0;i<_69e.length;i++)_6e1(_68e,_69e[i],-1)}}function _694(){for(var _6a0=[[".datagrid-header-rownumber",opts.rownumberWidth-1+"px"],[".datagrid-cell-rownumber",opts.rownumberWidth-1+"px"]],_6a1=_6a2(_68e,!0).concat(_6a2(_68e)),i=0;i<_6a1.length;i++){var col=_6a3(_68e,_6a1[i]);col&&!col.checkbox&&_6a0.push(["."+col.cellClass,col.boxWidth?col.boxWidth+"px":"auto"])}_68f.ss.add(_6a0),_68f.ss.dirty(_68f.cellSelectorPrefix),_68f.cellSelectorPrefix="."+_68f.cellClassPrefix}$("div.datagrid-pager",_690).remove(),opts.pagination&&(_695=$('<div class="datagrid-pager"></div>'),"bottom"==opts.pagePosition?_695.appendTo(_690):"top"==opts.pagePosition?_695.addClass("datagrid-pager-top").prependTo(_690):(ptop=$('<div class="datagrid-pager datagrid-pager-top"></div>').prependTo(_690),_695.appendTo(_690),_695=_695.add(ptop)),_695.pagination({total:0,pageNumber:opts.pageNumber,pageSize:opts.pageSize,pageList:opts.pageList,onSelectPage:function(_696,_697){opts.pageNumber=_696||1,opts.pageSize=_697,_695.pagination("refresh",{pageNumber:_696,pageSize:_697}),_6df(_68e)}}),opts.pageSize=_695.pagination("options").pageSize)}function _6a4(_6a5){var _6a6=$.data(_6a5,"datagrid"),_6a7=_6a6.panel,opts=_6a6.options,dc=_6a6.dc,_6a8=dc.header1.add(dc.header2);for(_6a9 in _6a8.unbind(".datagrid"),opts.headerEvents)_6a8.bind(_6a9+".datagrid",opts.headerEvents[_6a9]);var _6aa=_6a8.find("div.datagrid-cell"),_6ab="right"==opts.resizeHandle?"e":"left"==opts.resizeHandle?"w":"e,w";_6aa.each(function(){$(this).resizable({handles:_6ab,disabled:!!$(this).attr("resizable")&&"false"==$(this).attr("resizable"),minWidth:25,onStartResize:function(e){_6a6.resizing=!0,_6a8.css("cursor",$("body").css("cursor")),_6a6.proxy||(_6a6.proxy=$('<div class="datagrid-resize-proxy"></div>').appendTo(dc.view)),_6a6.proxy.css({left:e.pageX-$(_6a7).offset().left-1,display:"none"}),setTimeout(function(){_6a6.proxy&&_6a6.proxy.show()},500)},onResize:function(e){return _6a6.proxy.css({left:e.pageX-$(_6a7).offset().left-1,display:"block"}),!1},onStopResize:function(e){_6a8.css("cursor",""),$(this).css("height","");var _6ac=$(this).parent().attr("field"),col=_6a3(_6a5,_6ac);col.width=$(this)._outerWidth(),col.boxWidth=col.width-col.deltaWidth,col.auto=void 0,$(this).css("width",""),$(_6a5).datagrid("fixColumnSize",_6ac),_6a6.proxy.remove(),_6a6.proxy=null,$(this).parents("div:first.datagrid-header").parent().hasClass("datagrid-view1")&&_65f(_6a5),$(_6a5).datagrid("fitColumns"),opts.onResizeColumn.call(_6a5,_6ac,col.width),setTimeout(function(){_6a6.resizing=!1},0)}})});var _6a9,bb=dc.body1.add(dc.body2);for(_6a9 in bb.unbind(),opts.rowEvents)bb.bind(_6a9,opts.rowEvents[_6a9]);dc.body1.bind("mousewheel DOMMouseScroll",function(e){e.preventDefault();var e1=e.originalEvent||window.event,_6ad=e1.wheelDelta||-1*e1.detail;"deltaY"in e1&&(_6ad=-1*e1.deltaY);var dc=$(e.target).closest("div.datagrid-view").children(".datagrid-f").data("datagrid").dc;dc.body2.scrollTop(dc.body2.scrollTop()-_6ad)}),dc.body2.bind("scroll",function(){var b1=dc.view1.children("div.datagrid-body");b1.scrollTop($(this).scrollTop());var top1,top2,c1=dc.body1.children(":first"),c2=dc.body2.children(":first");c1.length&&c2.length&&((top1=c1.offset().top)!=(top2=c2.offset().top)&&b1.scrollTop(b1.scrollTop()+top1-top2)),dc.view2.children("div.datagrid-header,div.datagrid-footer")._scrollLeft($(this)._scrollLeft()),dc.body2.children("table.datagrid-btable-frozen").css("left",-$(this)._scrollLeft())})}function _6ae(_6af){return function(e){var _6b0,td=$(e.target).closest("td[field]");td.length&&(_6b0=_6b1(td),!$(_6b0).data("datagrid").resizing&&_6af?td.addClass("datagrid-header-over"):td.removeClass("datagrid-header-over"))}}function _6b2(e){var _6b3=_6b1(e.target),opts=$(_6b3).datagrid("options"),ck=$(e.target).closest("input[type=checkbox]");if(ck.length){if(opts.singleSelect&&opts.selectOnCheck)return!1;(ck.is(":checked")?_6b4:_6b5)(_6b3),e.stopPropagation()}else{var p1,p2,cell=$(e.target).closest(".datagrid-cell");cell.length&&(p1=cell.offset().left+5,p2=cell.offset().left+cell._outerWidth()-5,e.pageX<p2&&e.pageX>p1&&_6b6(_6b3,cell.parent().attr("field")))}}function _6b7(e){var _6b8=_6b1(e.target),opts=$(_6b8).datagrid("options"),cell=$(e.target).closest(".datagrid-cell");if(cell.length){var p1=cell.offset().left+5,p2=cell.offset().left+cell._outerWidth()-5;if("right"==opts.resizeHandle?e.pageX>p2:"left"==opts.resizeHandle?e.pageX<p1:e.pageX<p1||e.pageX>p2){var _6b9=cell.parent().attr("field"),col=_6a3(_6b8,_6b9);if(0==col.resizable)return;$(_6b8).datagrid("autoSizeColumn",_6b9),col.auto=!1}}}function _6ba(e){var _6bb=_6b1(e.target),opts=$(_6bb).datagrid("options"),td=$(e.target).closest("td[field]");opts.onHeaderContextMenu.call(_6bb,e,td.attr("field"))}function _6bc(_6bd){return function(e){var _6bf,_6c0,tr=_6be(e.target);tr&&(_6bf=_6b1(tr),$.data(_6bf,"datagrid").resizing||(_6c0=_6c1(tr),_6bd?_6c2(_6bf,_6c0):$.data(_6bf,"datagrid").options.finder.getTr(_6bf,_6c0).removeClass("datagrid-row-over")))}}function _6c3(e){var tr=_6be(e.target);if(tr){var _6c4=_6b1(tr),opts=$.data(_6c4,"datagrid").options,_6c5=_6c1(tr),tt=$(e.target);if(tt.parent().hasClass("datagrid-cell-check"))opts.singleSelect&&opts.selectOnCheck?(tt._propAttr("checked",!tt.is(":checked")),_6c6(_6c4,_6c5)):tt.is(":checked")?(tt._propAttr("checked",!1),_6c6(_6c4,_6c5)):(tt._propAttr("checked",!0),_6c7(_6c4,_6c5));else{var _6c8,row=opts.finder.getRow(_6c4,_6c5),td=tt.closest("td[field]",tr);if(td.length&&(_6c8=td.attr("field"),opts.onClickCell.call(_6c4,_6c5,_6c8,row[_6c8])),1==opts.singleSelect)_6c9(_6c4,_6c5);else if(opts.ctrlSelect)if(e.metaKey||e.ctrlKey)(tr.hasClass("datagrid-row-selected")?_6ca:_6c9)(_6c4,_6c5);else if(e.shiftKey){$(_6c4).datagrid("clearSelections");for(var _6cb=Math.min(opts.lastSelectedIndex||0,_6c5),_6cc=Math.max(opts.lastSelectedIndex||0,_6c5),i=_6cb;i<=_6cc;i++)_6c9(_6c4,i)}else $(_6c4).datagrid("clearSelections"),_6c9(_6c4,_6c5),opts.lastSelectedIndex=_6c5;else(tr.hasClass("datagrid-row-selected")?_6ca:_6c9)(_6c4,_6c5);opts.onClickRow.apply(_6c4,_649(_6c4,[_6c5,row]))}}}function _6cd(e){var _6ce,opts,_6cf,row,td,_6d0,tr=_6be(e.target);tr&&(_6ce=_6b1(tr),opts=$.data(_6ce,"datagrid").options,_6cf=_6c1(tr),row=opts.finder.getRow(_6ce,_6cf),(td=$(e.target).closest("td[field]",tr)).length&&(_6d0=td.attr("field"),opts.onDblClickCell.call(_6ce,_6cf,_6d0,row[_6d0])),opts.onDblClickRow.apply(_6ce,_649(_6ce,[_6cf,row])))}function _6d1(e){var _6d3,row,body,_6d2,opts,tr=_6be(e.target);tr?(_6d2=_6b1(tr),opts=$.data(_6d2,"datagrid").options,_6d3=_6c1(tr),row=opts.finder.getRow(_6d2,_6d3),opts.onRowContextMenu.call(_6d2,e,_6d3,row)):(body=_6be(e.target,".datagrid-body"))&&(_6d2=_6b1(body),(opts=$.data(_6d2,"datagrid").options).onRowContextMenu.call(_6d2,e,-1,null))}function _6b1(t){return $(t).closest("div.datagrid-view").children(".datagrid-f")[0]}function _6be(t,_6d4){var tr=$(t).closest(_6d4||"tr.datagrid-row");return tr.length&&tr.parent().length?tr:void 0}function _6c1(tr){return tr.attr("datagrid-row-index")?parseInt(tr.attr("datagrid-row-index")):tr.attr("node-id")}function _6b6(_6d5,_6d6){var _6d7=$.data(_6d5,"datagrid"),opts=_6d7.options;_6d6=_6d6||{};var _6d8={sortName:opts.sortName,sortOrder:opts.sortOrder};"object"==typeof _6d6&&$.extend(_6d8,_6d6);var _6d9=[],_6da=[];if(_6d8.sortName&&(_6d9=_6d8.sortName.split(","),_6da=_6d8.sortOrder.split(",")),"string"==typeof _6d6){var _6db=_6d6;if(!(col=_6a3(_6d5,_6db)).sortable||_6d7.resizing)return;var _6dd,_6dc=col.order||"asc",pos=_646(_6d9,_6db);0<=pos?(_6dd="asc"==_6da[pos]?"desc":"asc",opts.multiSort&&_6dd==_6dc?(_6d9.splice(pos,1),_6da.splice(pos,1)):_6da[pos]=_6dd):opts.multiSort?(_6d9.push(_6db),_6da.push(_6dc)):(_6d9=[_6db],_6da=[_6dc]),_6d8.sortName=_6d9.join(","),_6d8.sortOrder=_6da.join(",")}if(0!=opts.onBeforeSortColumn.call(_6d5,_6d8.sortName,_6d8.sortOrder)){$.extend(opts,_6d8);var dc=_6d7.dc,_6de=dc.header1.add(dc.header2);_6de.find("div.datagrid-cell").removeClass("datagrid-sort-asc datagrid-sort-desc");for(var i=0;i<_6d9.length;i++){var col=_6a3(_6d5,_6d9[i]);_6de.find("div."+col.cellClass).addClass("datagrid-sort-"+_6da[i])}opts.remoteSort?_6df(_6d5):_6e0(_6d5,$(_6d5).datagrid("getData")),opts.onSortColumn.call(_6d5,opts.sortName,opts.sortOrder)}}function _6e1(_6e2,_6e3,_6e4){function _6e5(_6e6){var aa=_6e7(_6e2,_6e6);if(aa.length){var _6e9=_646(aa[aa.length-1],_6e3);if(0<=_6e9)for(var _6ea=0;_6ea<aa.length-1;_6ea++){var td=$("#"+aa[_6ea][_6e9]),_6eb=parseInt(td.attr("colspan")||1)+(_6e4||0);td.attr("colspan",_6eb),_6eb?td.show():td.hide()}}}_6e5(!0),_6e5(!1)}function _6ec(_6ed){var _6f9,_6fa,_6ee=$.data(_6ed,"datagrid"),opts=_6ee.options,dc=_6ee.dc,_6ef=dc.view2.children("div.datagrid-header");function _6f0(fit){var _6fd=dc.header1.add(dc.header2).find(".datagrid-cell-group");_6fd.length&&(_6fd.each(function(){$(this)._outerWidth(fit?$(this).parent().width():10)}),fit&&_65f(_6ed))}dc.body2.css("overflow-x",""),_6f0(),_6fa=_6a2(_6ed,!(_6f9=!1)).concat(_6a2(_6ed,!1)),$.map(_6fa,function(_6fb){var _6fc,col=_6a3(_6ed,_6fb);0<=String(col.width||"").indexOf("%")&&(0<(_6fc=$.parser.parseValue("width",col.width,dc.view,opts.scrollbarSize+(opts.rownumbers?opts.rownumberWidth:0))-col.deltaWidth)&&(col.boxWidth=_6fc,_6f9=!0))}),_6f9&&$(_6ed).datagrid("fixColumnSize"),function(){if(!opts.fitColumns)return;_6ee.leftWidth||(_6ee.leftWidth=0);for(var _6f3=0,cc=[],_6f4=_6a2(_6ed,!1),i=0;i<_6f4.length;i++){var col=_6a3(_6ed,_6f4[i]);!function(col){if(0<=String(col.width||"").indexOf("%"))return!1;if(!(col.hidden||col.checkbox||col.auto||col.fixed))return!0}(col)||(_6f3+=col.width,cc.push({field:col.field,col:col,addingWidth:0}))}if(!_6f3)return;cc[cc.length-1].addingWidth-=_6ee.leftWidth;var _6f6=_6ef.children("div.datagrid-header-inner").show(),_6f7=_6ef.width()-_6ef.find("table").width()-opts.scrollbarSize+_6ee.leftWidth,rate=_6f7/_6f3;opts.showHeader||_6f6.hide();for(i=0;i<cc.length;i++){var c=cc[i],_6f8=parseInt(c.col.width*rate);c.addingWidth+=_6f8,_6f7-=_6f8}cc[cc.length-1].addingWidth+=_6f7;for(i=0;i<cc.length;i++){0<(c=cc[i]).col.boxWidth+c.addingWidth&&(c.col.boxWidth+=c.addingWidth,c.col.width+=c.addingWidth)}_6ee.leftWidth=_6f7,$(_6ed).datagrid("fixColumnSize")}(),_6f0(!0),_6ef.width()>=_6ef.find("table").width()&&dc.body2.css("overflow-x","hidden")}function _6fe(_6ff,_700){var _701=$.data(_6ff,"datagrid"),opts=_701.options,dc=_701.dc,tmp=$('<div class="datagrid-cell" style="position:absolute;left:-9999px"></div>').appendTo("body");if(_700)_65a(_700),$(_6ff).datagrid("fitColumns");else{for(var _702=!1,_703=_6a2(_6ff,!0).concat(_6a2(_6ff,!1)),i=0;i<_703.length;i++){_700=_703[i];_6a3(_6ff,_700).auto&&(_65a(_700),_702=!0)}_702&&$(_6ff).datagrid("fitColumns")}function _65a(_704){var _705=dc.view.find('div.datagrid-header td[field="'+_704+'"] div.datagrid-cell');_705.css("width","");var col=$(_6ff).datagrid("getColumnOption",_704);col.width=void 0,col.boxWidth=void 0,col.auto=!0,$(_6ff).datagrid("fixColumnSize",_704);var _706=Math.max(_707("header"),_707("allbody"),_707("allfooter"))+1;function _707(type){var _708=0;return"header"==type?_708=_709(_705):opts.finder.getTr(_6ff,0,type).find('td[field="'+_704+'"] div.datagrid-cell').each(function(){var w=_709($(this));_708<w&&(_708=w)}),_708;function _709(cell){return cell.is(":visible")?cell._outerWidth():tmp.html(cell.html())._outerWidth()}}_705._outerWidth(_706-1),col.width=_706,col.boxWidth=parseInt(_705[0].style.width),col.deltaWidth=_706-col.boxWidth,_705.css("width",""),$(_6ff).datagrid("fixColumnSize",_704),opts.onResizeColumn.call(_6ff,_704,col.width)}tmp.remove()}function _70a(_70b,_70c){var _70d=$.data(_70b,"datagrid"),_70e=(_70d.options,_70d.dc.view.find("table.datagrid-btable,table.datagrid-ftable"));if(_70e.css("table-layout","fixed"),_70c)fix(_70c);else for(var ff=_6a2(_70b,!0).concat(_6a2(_70b,!1)),i=0;i<ff.length;i++)fix(ff[i]);function fix(_711){var col=_6a3(_70b,_711);col.cellClass&&_70d.ss.set("."+col.cellClass,col.boxWidth?col.boxWidth+"px":"auto")}_70e.css("table-layout",""),_70f(_70b),_670(_70b),_710(_70b)}function _70f(_712,tds){var dc=$.data(_712,"datagrid").dc;(tds=tds||dc.view.find("td.datagrid-td-merged")).each(function(){var td=$(this),_713=td.attr("colspan")||1;if(1<_713){for(var col=_6a3(_712,td.attr("field")),_714=col.boxWidth+col.deltaWidth-1,i=1;i<_713;i++)td=td.next(),_714+=(col=_6a3(_712,td.attr("field"))).boxWidth+col.deltaWidth;$(this).children("div.datagrid-cell")._outerWidth(_714)}})}function _710(_715){$.data(_715,"datagrid").dc.view.find("div.datagrid-editable").each(function(){var cell=$(this),_716=cell.parent().attr("field"),col=$(_715).datagrid("getColumnOption",_716);cell._outerWidth(col.boxWidth+col.deltaWidth-1);var ed=$.data(this,"datagrid.editor");ed.actions.resize&&ed.actions.resize(ed.target,cell.width())})}function _6a3(_717,_718){function find(_719){if(_719)for(var i=0;i<_719.length;i++)for(var cc=_719[i],j=0;j<cc.length;j++){var c=cc[j];if(c.field==_718)return c}return null}var opts=$.data(_717,"datagrid").options;return find(opts.columns)||find(opts.frozenColumns)}function _6e7(_71a,_71b){for(var _723,opts=$.data(_71a,"datagrid").options,_71c=_71b?opts.frozenColumns:opts.columns,aa=[],_71d=(_723=0,$.map(_71c[0]||[],function(col){_723+=col.colspan||1}),_723),i=0;i<_71c.length;i++)aa[i]=new Array(_71d);for(var _71f=0;_71f<_71c.length;_71f++)$.map(_71c[_71f],function(col){var _720=function(a){for(var i=0;i<a.length;i++)if(null==a[i])return i;return-1}(aa[_71f]);if(0<=_720)for(var _722=col.field||col.id||"",c=0;c<(col.colspan||1);c++){for(var r=0;r<(col.rowspan||1);r++)aa[_71f+r][_720]=_722;_720++}});return aa}function _6a2(_724,_725){var aa=_6e7(_724,_725);return aa.length?aa[aa.length-1]:aa}function _6e0(_726,data){var _728,_729,_727=$.data(_726,"datagrid"),opts=_727.options,dc=_727.dc;data=opts.loadFilter.call(_726,data),$.isArray(data)&&(data={total:data.length,rows:data}),data.total=parseInt(data.total),(_727.data=data).footer&&(_727.footer=data.footer),!opts.remoteSort&&opts.sortName&&(_728=opts.sortName.split(","),_729=opts.sortOrder.split(","),data.rows.sort(function(r1,r2){for(var r=0,i=0;i<_728.length;i++){var sn=_728[i],so=_729[i];if(0!=(r=(_6a3(_726,sn).sorter||function(a,b){return a==b?0:b<a?1:-1})(r1[sn],r2[sn])*("asc"==so?1:-1)))return r}return r})),opts.view.onBeforeRender&&opts.view.onBeforeRender.call(opts.view,_726,data.rows),opts.view.render.call(opts.view,_726,dc.body2,!1),opts.view.render.call(opts.view,_726,dc.body1,!0),opts.showFooter&&(opts.view.renderFooter.call(opts.view,_726,dc.footer2,!1),opts.view.renderFooter.call(opts.view,_726,dc.footer1,!0)),opts.view.onAfterRender&&opts.view.onAfterRender.call(opts.view,_726),_727.ss.clean();var _72c,_72b=$(_726).datagrid("getPager");!_72b.length||(_72c=_72b.pagination("options")).total!=data.total&&(_72b.pagination("refresh",{total:data.total}),opts.pageNumber!=_72c.pageNumber&&0<_72c.pageNumber&&(opts.pageNumber=_72c.pageNumber,_6df(_726))),_670(_726),dc.body2.triggerHandler("scroll"),$(_726).datagrid("setSelectionState"),$(_726).datagrid("autoSizeColumn"),opts.onLoadSuccess.call(_726,data)}function _72d(_72e){var _72f=$.data(_72e,"datagrid"),opts=_72f.options,dc=_72f.dc;if(dc.header1.add(dc.header2).find("input[type=checkbox]")._propAttr("checked",!1),opts.idField){var _730=!!$.data(_72e,"treegrid"),_731=opts.onSelect,_732=opts.onCheck;opts.onSelect=opts.onCheck=function(){};for(var rows=opts.finder.getRows(_72e),i=0;i<rows.length;i++){var row=rows[i],_733=_730?row[opts.idField]:$(_72e).datagrid("getRowIndex",row[opts.idField]);_734(_72f.selectedRows,row)&&_6c9(_72e,_733,!0,!0),_734(_72f.checkedRows,row)&&_6c6(_72e,_733,!0)}opts.onSelect=_731,opts.onCheck=_732}function _734(a,r){for(var i=0;i<a.length;i++)if(a[i][opts.idField]==r[opts.idField])return a[i]=r,1}}function _735(_736,row){var _737=$.data(_736,"datagrid"),opts=_737.options,rows=_737.data.rows;if("object"==typeof row)return _646(rows,row);for(var i=0;i<rows.length;i++)if(rows[i][opts.idField]==row)return i;return-1}function _738(_739){var _73a=$.data(_739,"datagrid"),opts=_73a.options;_73a.data;if(opts.idField)return _73a.selectedRows;var rows=[];return opts.finder.getTr(_739,"","selected",2).each(function(){rows.push(opts.finder.getRow(_739,$(this)))}),rows}function _73b(_73c){var _73d=$.data(_73c,"datagrid"),opts=_73d.options;if(opts.idField)return _73d.checkedRows;var rows=[];return opts.finder.getTr(_73c,"","checked",2).each(function(){rows.push(opts.finder.getRow(_73c,$(this)))}),rows}function _73e(_73f,_740){var _741=$.data(_73f,"datagrid"),dc=_741.dc,opts=_741.options,tr=opts.finder.getTr(_73f,_740);if(tr.length){if(tr.closest("table").hasClass("datagrid-btable-frozen"))return;var _742=dc.view2.children("div.datagrid-header")._outerHeight(),_743=dc.body2,_744=opts.scrollbarSize;_743[0].offsetHeight&&_743[0].clientHeight&&_743[0].offsetHeight<=_743[0].clientHeight&&(_744=0);var _745=_743.outerHeight(!0)-_743.outerHeight(),top=tr.position().top-_742-_745;top<0?_743.scrollTop(_743.scrollTop()+top):top+tr._outerHeight()>_743.height()-_744&&_743.scrollTop(_743.scrollTop()+top+tr._outerHeight()-_743.height()+_744)}}function _6c2(_746,_747){var _748=$.data(_746,"datagrid"),opts=_748.options;opts.finder.getTr(_746,_748.highlightIndex).removeClass("datagrid-row-over"),opts.finder.getTr(_746,_747).addClass("datagrid-row-over"),_748.highlightIndex=_747}function _6c9(_749,_74a,_74b,_74c){var _74d=$.data(_749,"datagrid"),opts=_74d.options,row=opts.finder.getRow(_749,_74a);row&&0!=opts.onBeforeSelect.apply(_749,_649(_749,[_74a,row]))&&(opts.singleSelect&&(_74e(_749,!0),_74d.selectedRows=[]),!_74b&&opts.checkOnSelect&&_6c6(_749,_74a,!0),opts.idField&&_648(_74d.selectedRows,opts.idField,row),opts.finder.getTr(_749,_74a).addClass("datagrid-row-selected"),opts.onSelect.apply(_749,_649(_749,[_74a,row])),!_74c&&opts.scrollOnSelect&&_73e(_749,_74a))}function _6ca(_74f,_750,_751){var _752=$.data(_74f,"datagrid"),opts=(_752.dc,_752.options),row=opts.finder.getRow(_74f,_750);row&&0!=opts.onBeforeUnselect.apply(_74f,_649(_74f,[_750,row]))&&(!_751&&opts.checkOnSelect&&_6c7(_74f,_750,!0),opts.finder.getTr(_74f,_750).removeClass("datagrid-row-selected"),opts.idField&&_647(_752.selectedRows,opts.idField,row[opts.idField]),opts.onUnselect.apply(_74f,_649(_74f,[_750,row])))}function _753(_754,_755){var opts=$.data(_754,"datagrid").options,rows=opts.finder.getRows(_754),_757=$.data(_754,"datagrid").selectedRows;if(!_755&&opts.checkOnSelect&&_6b4(_754,!0),opts.finder.getTr(_754,"","allbody").addClass("datagrid-row-selected"),opts.idField)for(var _758=0;_758<rows.length;_758++)_648(_757,opts.idField,rows[_758]);opts.onSelectAll.call(_754,rows)}function _74e(_759,_75a){var opts=$.data(_759,"datagrid").options,rows=opts.finder.getRows(_759),_75c=$.data(_759,"datagrid").selectedRows;if(!_75a&&opts.checkOnSelect&&_6b5(_759,!0),opts.finder.getTr(_759,"","selected").removeClass("datagrid-row-selected"),opts.idField)for(var _75d=0;_75d<rows.length;_75d++)_647(_75c,opts.idField,rows[_75d][opts.idField]);opts.onUnselectAll.call(_759,rows)}function _6c6(_75e,_75f,_760){var dc,_761=$.data(_75e,"datagrid"),opts=_761.options,row=opts.finder.getRow(_75e,_75f);row&&0!=opts.onBeforeCheck.apply(_75e,_649(_75e,[_75f,row]))&&(opts.singleSelect&&opts.selectOnCheck&&(_6b5(_75e,!0),_761.checkedRows=[]),!_760&&opts.selectOnCheck&&_6c9(_75e,_75f,!0),opts.finder.getTr(_75e,_75f).addClass("datagrid-row-checked").find("div.datagrid-cell-check input[type=checkbox]")._propAttr("checked",!0),opts.finder.getTr(_75e,"","checked",2).length==opts.finder.getRows(_75e).length&&(dc=_761.dc).header1.add(dc.header2).find("input[type=checkbox]")._propAttr("checked",!0),opts.idField&&_648(_761.checkedRows,opts.idField,row),opts.onCheck.apply(_75e,_649(_75e,[_75f,row])))}function _6c7(_762,_763,_764){var dc,_765=$.data(_762,"datagrid"),opts=_765.options,row=opts.finder.getRow(_762,_763);row&&0!=opts.onBeforeUncheck.apply(_762,_649(_762,[_763,row]))&&(!_764&&opts.selectOnCheck&&_6ca(_762,_763,!0),opts.finder.getTr(_762,_763).removeClass("datagrid-row-checked").find("div.datagrid-cell-check input[type=checkbox]")._propAttr("checked",!1),(dc=_765.dc).header1.add(dc.header2).find("input[type=checkbox]")._propAttr("checked",!1),opts.idField&&_647(_765.checkedRows,opts.idField,row[opts.idField]),opts.onUncheck.apply(_762,_649(_762,[_763,row])))}function _6b4(_767,_768){var _769=$.data(_767,"datagrid"),opts=_769.options,rows=opts.finder.getRows(_767);!_768&&opts.selectOnCheck&&_753(_767,!0);var dc=_769.dc,hck=dc.header1.add(dc.header2).find("input[type=checkbox]"),bck=opts.finder.getTr(_767,"","allbody").addClass("datagrid-row-checked").find("div.datagrid-cell-check input[type=checkbox]");if(hck.add(bck)._propAttr("checked",!0),opts.idField)for(var i=0;i<rows.length;i++)_648(_769.checkedRows,opts.idField,rows[i]);opts.onCheckAll.call(_767,rows)}function _6b5(_76a,_76b){var _76c=$.data(_76a,"datagrid"),opts=_76c.options,rows=opts.finder.getRows(_76a);!_76b&&opts.selectOnCheck&&_74e(_76a,!0);var dc=_76c.dc,hck=dc.header1.add(dc.header2).find("input[type=checkbox]"),bck=opts.finder.getTr(_76a,"","checked").removeClass("datagrid-row-checked").find("div.datagrid-cell-check input[type=checkbox]");if(hck.add(bck)._propAttr("checked",!1),opts.idField)for(var i=0;i<rows.length;i++)_647(_76c.checkedRows,opts.idField,rows[i][opts.idField]);opts.onUncheckAll.call(_76a,rows)}function _76d(_76e,_76f){var opts=$.data(_76e,"datagrid").options,tr=opts.finder.getTr(_76e,_76f),row=opts.finder.getRow(_76e,_76f);tr.hasClass("datagrid-row-editing")||0!=opts.onBeforeEdit.apply(_76e,_649(_76e,[_76f,row]))&&(tr.addClass("datagrid-row-editing"),_770(_76e,_76f),_710(_76e),tr.find("div.datagrid-editable").each(function(){var _771=$(this).parent().attr("field"),ed=$.data(this,"datagrid.editor");ed.actions.setValue(ed.target,row[_771])}),_772(_76e,_76f),opts.onBeginEdit.apply(_76e,_649(_76e,[_76f,row])))}function _773(_774,_775,_776){var _777=$.data(_774,"datagrid"),opts=_777.options,_778=_777.updatedRows,_779=_777.insertedRows,tr=opts.finder.getTr(_774,_775),row=opts.finder.getRow(_774,_775);if(tr.hasClass("datagrid-row-editing")){if(!_776){if(!_772(_774,_775))return;var _77a=!1,_77b={};tr.find("div.datagrid-editable").each(function(){var _77c=$(this).parent().attr("field"),ed=$.data(this,"datagrid.editor"),t=$(ed.target),_77d=t.data("textbox")?t.textbox("textbox"):t;_77d.is(":focus")&&_77d.triggerHandler("blur");var _77e=ed.actions.getValue(ed.target);row[_77c]!==_77e&&(row[_77c]=_77e,_77a=!0,_77b[_77c]=_77e)}),_77a&&-1==_646(_779,row)&&-1==_646(_778,row)&&_778.push(row),opts.onEndEdit.apply(_774,_649(_774,[_775,row,_77b]))}tr.removeClass("datagrid-row-editing"),_77f(_774,_775),$(_774).datagrid("refreshRow",_775),_776?opts.onCancelEdit.apply(_774,_649(_774,[_775,row])):opts.onAfterEdit.apply(_774,_649(_774,[_775,row,_77b]))}}function _780(_781,_782){var tr=$.data(_781,"datagrid").options.finder.getTr(_781,_782),_783=[];return tr.children("td").each(function(){var ed,cell=$(this).find("div.datagrid-editable");cell.length&&(ed=$.data(cell[0],"datagrid.editor"),_783.push(ed))}),_783}function _784(_785,_786){for(var _787=_780(_785,null!=_786.index?_786.index:_786.id),i=0;i<_787.length;i++)if(_787[i].field==_786.field)return _787[i];return null}function _770(_788,_789){var opts=$.data(_788,"datagrid").options;opts.finder.getTr(_788,_789).children("td").each(function(){var _78b,_78c,_78d,_78e,_78f,cell=$(this).find("div.datagrid-cell"),_78a=$(this).attr("field"),col=_6a3(_788,_78a);col&&col.editor&&("string"==typeof col.editor?_78b=col.editor:(_78b=col.editor.type,_78c=col.editor.options),(_78d=opts.editors[_78b])&&(_78e=cell.html(),_78f=cell._outerWidth(),cell.addClass("datagrid-editable"),cell._outerWidth(_78f),cell.html('<table border="0" cellspacing="0" cellpadding="1"><tr><td></td></tr></table>'),cell.children("table").bind("click dblclick contextmenu",function(e){e.stopPropagation()}),$.data(cell[0],"datagrid.editor",{actions:_78d,target:_78d.init(cell.find("td"),$.extend({height:opts.editorHeight},_78c)),field:_78a,type:_78b,oldHtml:_78e})))}),_670(_788,_789,!0)}function _77f(_790,_791){$.data(_790,"datagrid").options.finder.getTr(_790,_791).children("td").each(function(){var ed,cell=$(this).find("div.datagrid-editable");cell.length&&((ed=$.data(cell[0],"datagrid.editor")).actions.destroy&&ed.actions.destroy(ed.target),cell.html(ed.oldHtml),$.removeData(cell[0],"datagrid.editor"),cell.removeClass("datagrid-editable"),cell.css("width",""))})}function _772(_792,_793){var tr=$.data(_792,"datagrid").options.finder.getTr(_792,_793);if(!tr.hasClass("datagrid-row-editing"))return!0;var vbox=tr.find(".validatebox-text");return vbox.validatebox("validate"),vbox.trigger("mouseleave"),0==tr.find(".validatebox-invalid").length}function _795(_796,_797){var _798=$.data(_796,"datagrid").insertedRows,_799=$.data(_796,"datagrid").deletedRows,_79a=$.data(_796,"datagrid").updatedRows;if(_797)return"inserted"==_797?_798:"deleted"==_797?_799:"updated"==_797?_79a:[];var rows=[];return rows=(rows=(rows=rows.concat(_798)).concat(_799)).concat(_79a)}function _79b(_79c,_79d){var _79e=$.data(_79c,"datagrid"),opts=_79e.options,data=_79e.data,_79f=_79e.insertedRows,_7a0=_79e.deletedRows;$(_79c).datagrid("cancelEdit",_79d);var row=opts.finder.getRow(_79c,_79d);0<=_646(_79f,row)?_647(_79f,row):_7a0.push(row),_647(_79e.selectedRows,opts.idField,row[opts.idField]),_647(_79e.checkedRows,opts.idField,row[opts.idField]),opts.view.deleteRow.call(opts.view,_79c,_79d),"auto"==opts.height&&_670(_79c),$(_79c).datagrid("getPager").pagination("refresh",{total:data.total})}function _7a1(_7a2,_7a3){var data=$.data(_7a2,"datagrid").data,view=$.data(_7a2,"datagrid").options.view,_7a4=$.data(_7a2,"datagrid").insertedRows;view.insertRow.call(view,_7a2,_7a3.index,_7a3.row),_7a4.push(_7a3.row),$(_7a2).datagrid("getPager").pagination("refresh",{total:data.total})}function _7a5(_7a6,row){var data=$.data(_7a6,"datagrid").data,view=$.data(_7a6,"datagrid").options.view,_7a7=$.data(_7a6,"datagrid").insertedRows;view.insertRow.call(view,_7a6,null,row),_7a7.push(row),$(_7a6).datagrid("getPager").pagination("refresh",{total:data.total})}function _7a8(_7a9,_7aa){var _7ad,_7ab=$.data(_7a9,"datagrid"),opts=_7ab.options,row=opts.finder.getRow(_7a9,_7aa.index),_7ac=!1;for(_7ad in _7aa.row=_7aa.row||{},_7aa.row)if(row[_7ad]!==_7aa.row[_7ad]){_7ac=!0;break}_7ac&&(-1==_646(_7ab.insertedRows,row)&&-1==_646(_7ab.updatedRows,row)&&_7ab.updatedRows.push(row),opts.view.updateRow.call(opts.view,_7a9,_7aa.index,_7aa.row))}function _7ae(_7af){for(var _7b0=$.data(_7af,"datagrid"),rows=_7b0.data.rows,_7b1=[],i=0;i<rows.length;i++)_7b1.push($.extend({},rows[i]));_7b0.originalRows=_7b1,_7b0.updatedRows=[],_7b0.insertedRows=[],_7b0.deletedRows=[]}function _7b2(_7b3){for(var ok=!0,i=0,len=$.data(_7b3,"datagrid").data.rows.length;i<len;i++)_772(_7b3,i)?$(_7b3).datagrid("endEdit",i):ok=!1;ok&&_7ae(_7b3)}function _7b4(_7b5){var _7b6=$.data(_7b5,"datagrid"),opts=_7b6.options,_7b7=_7b6.originalRows,_7b8=_7b6.insertedRows,_7b9=_7b6.deletedRows,_7ba=_7b6.selectedRows,_7bb=_7b6.checkedRows,data=_7b6.data;function _7bc(a){for(var ids=[],i=0;i<a.length;i++)ids.push(a[i][opts.idField]);return ids}function _7bd(ids,_7be){for(var i=0;i<ids.length;i++){var _7bf=_735(_7b5,ids[i]);0<=_7bf&&("s"==_7be?_6c9:_6c6)(_7b5,_7bf,!0)}}for(var i=0;i<data.rows.length;i++)$(_7b5).datagrid("cancelEdit",i);var _7c0=_7bc(_7ba),_7c1=_7bc(_7bb);_7ba.splice(0,_7ba.length),_7bb.splice(0,_7bb.length),data.total+=_7b9.length-_7b8.length,data.rows=_7b7,_6e0(_7b5,data),_7bd(_7c0,"s"),_7bd(_7c1,"c"),_7ae(_7b5)}function _6df(_7c2,_7c3,cb){var opts=$.data(_7c2,"datagrid").options;_7c3&&(opts.queryParams=_7c3);var _7c4=$.extend({},opts.queryParams);opts.pagination&&$.extend(_7c4,{page:opts.pageNumber||1,rows:opts.pageSize}),opts.sortName&&$.extend(_7c4,{sort:opts.sortName,order:opts.sortOrder}),0!=opts.onBeforeLoad.call(_7c2,_7c4)&&($(_7c2).datagrid("loading"),0==opts.loader.call(_7c2,_7c4,function(data){$(_7c2).datagrid("loaded"),$(_7c2).datagrid("loadData",data),cb&&cb()},function(){$(_7c2).datagrid("loaded"),opts.onLoadError.apply(_7c2,arguments)})&&$(_7c2).datagrid("loaded"))}function _7c6(_7c7,_7c8){var opts=$.data(_7c7,"datagrid").options;if(_7c8.type=_7c8.type||"body",_7c8.rowspan=_7c8.rowspan||1,_7c8.colspan=_7c8.colspan||1,1!=_7c8.rowspan||1!=_7c8.colspan){var tr=opts.finder.getTr(_7c7,null!=_7c8.index?_7c8.index:_7c8.id,_7c8.type);if(tr.length){var td=tr.find('td[field="'+_7c8.field+'"]');td.attr("rowspan",_7c8.rowspan).attr("colspan",_7c8.colspan),td.addClass("datagrid-td-merged"),_7c9(td.next(),_7c8.colspan-1);for(var i=1;i<_7c8.rowspan&&(tr=tr.next()).length;i++)_7c9(tr.find('td[field="'+_7c8.field+'"]'),_7c8.colspan);_70f(_7c7,td)}}function _7c9(td,_7ca){for(var i=0;i<_7ca;i++)td.hide(),td=td.next()}}function _7cf(_7d0){var _7d1={};return $.map(_7d0,function(name){_7d1[name]=function(name){function isA(_7d3){return null!=$.data($(_7d3)[0],name)}return{init:function(_7d4,_7d5){var _7d6=$('<input type="text" class="datagrid-editable-input">').appendTo(_7d4);return _7d6[name]&&"text"!=name?_7d6[name](_7d5):_7d6},destroy:function(_7d7){isA(_7d7)&&$(_7d7)[name]("destroy")},getValue:function(_7d8){if(isA(_7d8)){var opts=$(_7d8)[name]("options");return opts.multiple?$(_7d8)[name]("getValues").join(opts.separator):$(_7d8)[name]("getValue")}return $(_7d8).val()},setValue:function(_7d9,_7da){var opts;isA(_7d9)?(opts=$(_7d9)[name]("options")).multiple?_7da?$(_7d9)[name]("setValues",_7da.split(opts.separator)):$(_7d9)[name]("clear"):$(_7d9)[name]("setValue",_7da):$(_7d9).val(_7da)},resize:function(_7db,_7dc){isA(_7db)?$(_7db)[name]("resize",_7dc):$(_7db)._size({width:_7dc,height:$.fn.datagrid.defaults.editorHeight})}}}(name)}),_7d1}$.fn.datagrid=function(_7cb,_7cc){return"string"==typeof _7cb?$.fn.datagrid.methods[_7cb](this,_7cc):(_7cb=_7cb||{},this.each(function(){var opts,_7ce,data,_7cd=$.data(this,"datagrid");_7cd?(opts=$.extend(_7cd.options,_7cb),_7cd.options=opts):(opts=$.extend({},$.extend({},$.fn.datagrid.defaults,{queryParams:{}}),$.fn.datagrid.parseOptions(this),_7cb),$(this).css("width","").css("height",""),_7ce=_684(this,opts.rownumbers),opts.columns||(opts.columns=_7ce.columns),opts.frozenColumns||(opts.frozenColumns=_7ce.frozenColumns),opts.columns=$.extend(!0,[],opts.columns),opts.frozenColumns=$.extend(!0,[],opts.frozenColumns),opts.view=$.extend({},opts.view),$.data(this,"datagrid",{options:opts,panel:_7ce.panel,dc:_7ce.dc,ss:null,selectedRows:[],checkedRows:[],data:{total:0,rows:[]},originalRows:[],updatedRows:[],insertedRows:[],deletedRows:[]})),_68d(this),_6a4(this),_65a(this),opts.data?$(this).datagrid("loadData",opts.data):0<(data=$.fn.datagrid.parseData(this)).total?$(this).datagrid("loadData",data):(opts.view.setEmptyMsg(this),$(this).datagrid("autoSizeColumn")),_6df(this)}))};var _7dd=$.extend({},_7cf(["text","textbox","passwordbox","filebox","numberbox","numberspinner","combobox","combotree","combogrid","combotreegrid","datebox","datetimebox","timespinner","datetimespinner"]),{textarea:{init:function(_7de,_7df){var _7e0=$('<textarea class="datagrid-editable-input"></textarea>').appendTo(_7de);return _7e0.css("vertical-align","middle")._outerHeight(_7df.height),_7e0},getValue:function(_7e1){return $(_7e1).val()},setValue:function(_7e2,_7e3){$(_7e2).val(_7e3)},resize:function(_7e4,_7e5){$(_7e4)._outerWidth(_7e5)}},checkbox:{init:function(_7e6,_7e7){var _7e8=$('<input type="checkbox">').appendTo(_7e6);return _7e8.val(_7e7.on),_7e8.attr("offval",_7e7.off),_7e8},getValue:function(_7e9){return $(_7e9).is(":checked")?$(_7e9).val():$(_7e9).attr("offval")},setValue:function(_7ea,_7eb){var _7ec=!1;$(_7ea).val()==_7eb&&(_7ec=!0),$(_7ea)._propAttr("checked",_7ec)}},validatebox:{init:function(_7ed,_7ee){var _7ef=$('<input type="text" class="datagrid-editable-input">').appendTo(_7ed);return _7ef.validatebox(_7ee),_7ef},destroy:function(_7f0){$(_7f0).validatebox("destroy")},getValue:function(_7f1){return $(_7f1).val()},setValue:function(_7f2,_7f3){$(_7f2).val(_7f3)},resize:function(_7f4,_7f5){$(_7f4)._outerWidth(_7f5)._outerHeight($.fn.datagrid.defaults.editorHeight)}}});$.fn.datagrid.methods={options:function(jq){var _7f6=$.data(jq[0],"datagrid").options,_7f7=$.data(jq[0],"datagrid").panel.panel("options");return $.extend(_7f6,{width:_7f7.width,height:_7f7.height,closed:_7f7.closed,collapsed:_7f7.collapsed,minimized:_7f7.minimized,maximized:_7f7.maximized})},setSelectionState:function(jq){return jq.each(function(){_72d(this)})},createStyleSheet:function(jq){return _64b(jq[0])},getPanel:function(jq){return $.data(jq[0],"datagrid").panel},getPager:function(jq){return $.data(jq[0],"datagrid").panel.children("div.datagrid-pager")},getColumnFields:function(jq,_7f8){return _6a2(jq[0],_7f8)},getColumnOption:function(jq,_7f9){return _6a3(jq[0],_7f9)},resize:function(jq,_7fa){return jq.each(function(){_65a(this,_7fa)})},load:function(jq,_7fb){return jq.each(function(){var opts=$(this).datagrid("options");"string"==typeof _7fb&&(opts.url=_7fb,_7fb=null),opts.pageNumber=1,$(this).datagrid("getPager").pagination("refresh",{pageNumber:1}),_6df(this,_7fb)})},reload:function(jq,_7fd){return jq.each(function(){var opts=$(this).datagrid("options");"string"==typeof _7fd&&(opts.url=_7fd,_7fd=null),_6df(this,_7fd)})},reloadFooter:function(jq,_7fe){return jq.each(function(){var opts=$.data(this,"datagrid").options,dc=$.data(this,"datagrid").dc;_7fe&&($.data(this,"datagrid").footer=_7fe),opts.showFooter&&(opts.view.renderFooter.call(opts.view,this,dc.footer2,!1),opts.view.renderFooter.call(opts.view,this,dc.footer1,!0),opts.view.onAfterRender&&opts.view.onAfterRender.call(opts.view,this),$(this).datagrid("fixRowHeight"))})},loading:function(jq){return jq.each(function(){var _7ff,msg,opts=$.data(this,"datagrid").options;$(this).datagrid("getPager").pagination("loading"),opts.loadMsg&&((_7ff=$(this).datagrid("getPanel")).children("div.datagrid-mask").length||($('<div class="datagrid-mask" style="display:block"></div>').appendTo(_7ff),(msg=$('<div class="datagrid-mask-msg" style="display:block;left:50%"></div>').html(opts.loadMsg).appendTo(_7ff))._outerHeight(40),msg.css({marginLeft:-msg.outerWidth()/2,lineHeight:msg.height()+"px"})))})},loaded:function(jq){return jq.each(function(){$(this).datagrid("getPager").pagination("loaded");var _800=$(this).datagrid("getPanel");_800.children("div.datagrid-mask-msg").remove(),_800.children("div.datagrid-mask").remove()})},fitColumns:function(jq){return jq.each(function(){_6ec(this)})},fixColumnSize:function(jq,_801){return jq.each(function(){_70a(this,_801)})},fixRowHeight:function(jq,_802){return jq.each(function(){_670(this,_802)})},freezeRow:function(jq,_803){return jq.each(function(){_67d(this,_803)})},autoSizeColumn:function(jq,_804){return jq.each(function(){_6fe(this,_804)})},loadData:function(jq,data){return jq.each(function(){_6e0(this,data),_7ae(this)})},getData:function(jq){return $.data(jq[0],"datagrid").data},getRows:function(jq){return $.data(jq[0],"datagrid").data.rows},getFooterRows:function(jq){return $.data(jq[0],"datagrid").footer},getRowIndex:function(jq,id){return _735(jq[0],id)},getChecked:function(jq){return _73b(jq[0])},getSelected:function(jq){var rows=_738(jq[0]);return 0<rows.length?rows[0]:null},getSelections:function(jq){return _738(jq[0])},clearSelections:function(jq){return jq.each(function(){var _805=$.data(this,"datagrid"),_806=_805.selectedRows,_807=_805.checkedRows;_806.splice(0,_806.length),_74e(this),_805.options.checkOnSelect&&_807.splice(0,_807.length)})},clearChecked:function(jq){return jq.each(function(){var _808=$.data(this,"datagrid"),_809=_808.selectedRows,_80a=_808.checkedRows;_80a.splice(0,_80a.length),_6b5(this),_808.options.selectOnCheck&&_809.splice(0,_809.length)})},scrollTo:function(jq,_80b){return jq.each(function(){_73e(this,_80b)})},highlightRow:function(jq,_80c){return jq.each(function(){_6c2(this,_80c),_73e(this,_80c)})},selectAll:function(jq){return jq.each(function(){_753(this)})},unselectAll:function(jq){return jq.each(function(){_74e(this)})},selectRow:function(jq,_80d){return jq.each(function(){_6c9(this,_80d)})},selectRecord:function(jq,id){return jq.each(function(){var _80e;!$.data(this,"datagrid").options.idField||0<=(_80e=_735(this,id))&&$(this).datagrid("selectRow",_80e)})},unselectRow:function(jq,_80f){return jq.each(function(){_6ca(this,_80f)})},checkRow:function(jq,_810){return jq.each(function(){_6c6(this,_810)})},uncheckRow:function(jq,_811){return jq.each(function(){_6c7(this,_811)})},checkAll:function(jq){return jq.each(function(){_6b4(this)})},uncheckAll:function(jq){return jq.each(function(){_6b5(this)})},beginEdit:function(jq,_812){return jq.each(function(){_76d(this,_812)})},endEdit:function(jq,_813){return jq.each(function(){_773(this,_813,!1)})},cancelEdit:function(jq,_814){return jq.each(function(){_773(this,_814,!0)})},getEditors:function(jq,_815){return _780(jq[0],_815)},getEditor:function(jq,_816){return _784(jq[0],_816)},refreshRow:function(jq,_817){return jq.each(function(){var opts=$.data(this,"datagrid").options;opts.view.refreshRow.call(opts.view,this,_817)})},validateRow:function(jq,_818){return _772(jq[0],_818)},updateRow:function(jq,_819){return jq.each(function(){_7a8(this,_819)})},appendRow:function(jq,row){return jq.each(function(){_7a5(this,row)})},insertRow:function(jq,_81a){return jq.each(function(){_7a1(this,_81a)})},deleteRow:function(jq,_81b){return jq.each(function(){_79b(this,_81b)})},getChanges:function(jq,_81c){return _795(jq[0],_81c)},acceptChanges:function(jq){return jq.each(function(){_7b2(this)})},rejectChanges:function(jq){return jq.each(function(){_7b4(this)})},mergeCells:function(jq,_81d){return jq.each(function(){_7c6(this,_81d)})},showColumn:function(jq,_81e){return jq.each(function(){var col=$(this).datagrid("getColumnOption",_81e);col.hidden&&(col.hidden=!1,$(this).datagrid("getPanel").find('td[field="'+_81e+'"]').show(),_6e1(this,_81e,1),$(this).datagrid("fitColumns"))})},hideColumn:function(jq,_81f){return jq.each(function(){var col=$(this).datagrid("getColumnOption",_81f);col.hidden||(col.hidden=!0,$(this).datagrid("getPanel").find('td[field="'+_81f+'"]').hide(),_6e1(this,_81f,-1),$(this).datagrid("fitColumns"))})},sort:function(jq,_820){return jq.each(function(){_6b6(this,_820)})},gotoPage:function(jq,_821){return jq.each(function(){var page,cb,_822=this;"object"==typeof _821?(page=_821.page,cb=_821.callback):page=_821,$(_822).datagrid("options").pageNumber=page,$(_822).datagrid("getPager").pagination("refresh",{pageNumber:page}),_6df(_822,null,function(){cb&&cb.call(_822,page)})})}},$.fn.datagrid.parseOptions=function(_823){var t=$(_823);return $.extend({},$.fn.panel.parseOptions(_823),$.parser.parseOptions(_823,["url","toolbar","idField","sortName","sortOrder","pagePosition","resizeHandle",{sharedStyleSheet:"boolean",fitColumns:"boolean",autoRowHeight:"boolean",striped:"boolean",nowrap:"boolean"},{rownumbers:"boolean",singleSelect:"boolean",ctrlSelect:"boolean",checkOnSelect:"boolean",selectOnCheck:"boolean"},{pagination:"boolean",pageSize:"number",pageNumber:"number"},{multiSort:"boolean",remoteSort:"boolean",showHeader:"boolean",showFooter:"boolean"},{scrollbarSize:"number",scrollOnSelect:"boolean"}]),{pageList:t.attr("pageList")?eval(t.attr("pageList")):void 0,loadMsg:null!=t.attr("loadMsg")?t.attr("loadMsg"):void 0,rowStyler:t.attr("rowStyler")?eval(t.attr("rowStyler")):void 0})},$.fn.datagrid.parseData=function(_824){var t=$(_824),data={total:0,rows:[]},_825=t.datagrid("getColumnFields",!0).concat(t.datagrid("getColumnFields",!1));return t.find("tbody tr").each(function(){data.total++;var row={};$.extend(row,$.parser.parseOptions(this,["iconCls","state"]));for(var i=0;i<_825.length;i++)row[_825[i]]=$(this).find("td:eq("+i+")").html();data.rows.push(row)}),data};var _826={render:function(_827,_828,_829){var rows=$(_827).datagrid("getRows");$(_828).html(this.renderTable(_827,0,rows,_829))},renderFooter:function(_82a,_82b,_82c){$.data(_82a,"datagrid").options;for(var rows=$.data(_82a,"datagrid").footer||[],_82d=$(_82a).datagrid("getColumnFields",_82c),_82e=['<table class="datagrid-ftable" cellspacing="0" cellpadding="0" border="0"><tbody>'],i=0;i<rows.length;i++)_82e.push('<tr class="datagrid-row" datagrid-row-index="'+i+'">'),_82e.push(this.renderRow.call(this,_82a,_82d,_82c,i,rows[i])),_82e.push("</tr>");_82e.push("</tbody></table>"),$(_82b).html(_82e.join(""))},renderTable:function(_82f,_830,rows,_831){var _832=$.data(_82f,"datagrid"),opts=_832.options;if(_831&&!(opts.rownumbers||opts.frozenColumns&&opts.frozenColumns.length))return"";for(var _833=$(_82f).datagrid("getColumnFields",_831),_834=['<table class="datagrid-btable" cellspacing="0" cellpadding="0" border="0"><tbody>'],i=0;i<rows.length;i++){var row=rows[i],css=opts.rowStyler?opts.rowStyler.call(_82f,_830,row):"",cs=this.getStyleValue(css),cls='class="datagrid-row '+(_830%2&&opts.striped?"datagrid-row-alt ":" ")+cs.c+'"',_835=cs.s?'style="'+cs.s+'"':"",_836=_832.rowIdPrefix+"-"+(_831?1:2)+"-"+_830;_834.push('<tr id="'+_836+'" datagrid-row-index="'+_830+'" '+cls+" "+_835+">"),_834.push(this.renderRow.call(this,_82f,_833,_831,_830,row)),_834.push("</tr>"),_830++}return _834.push("</tbody></table>"),_834.join("")},renderRow:function(_837,_838,_839,_83a,_83b){var _83c,opts=$.data(_837,"datagrid").options,cc=[];_839&&opts.rownumbers&&(_83c=_83a+1,opts.pagination&&(_83c+=(opts.pageNumber-1)*opts.pageSize),cc.push('<td class="datagrid-td-rownumber"><div class="datagrid-cell-rownumber">'+_83c+"</div></td>"));for(var i=0;i<_838.length;i++){var _83e,css,cs,cls,_83f,_83d=_838[i],col=$(_837).datagrid("getColumnOption",_83d);col&&(_83e=_83b[_83d],css=col.styler&&col.styler.call(_837,_83e,_83b,_83a)||"",cls=(cs=this.getStyleValue(css)).c?'class="'+cs.c+'"':"",_83f=col.hidden?'style="display:none;'+cs.s+'"':cs.s?'style="'+cs.s+'"':"",cc.push('<td field="'+_83d+'" '+cls+" "+_83f+">"),_83f="",col.checkbox||(col.align&&(_83f+="text-align:"+col.align+";"),opts.nowrap?opts.autoRowHeight&&(_83f+="height:auto;"):_83f+="white-space:normal;height:auto;"),cc.push('<div style="'+_83f+'" '),cc.push(col.checkbox?'class="datagrid-cell-check"':'class="datagrid-cell '+col.cellClass+'"'),cc.push(">"),col.checkbox?(cc.push('<input type="checkbox" '+(_83b.checked?'checked="checked"':"")),cc.push(' name="'+_83d+'" value="'+(null!=_83e?_83e:"")+'">')):col.formatter?cc.push(col.formatter(_83e,_83b,_83a)):cc.push(_83e),cc.push("</div>"),cc.push("</td>"))}return cc.join("")},getStyleValue:function(css){var _840="",_841="";return"string"==typeof css?_841=css:css&&(_840=css.class||"",_841=css.style||""),{c:_840,s:_841}},refreshRow:function(_842,_843){this.updateRow.call(this,_842,_843,{})},updateRow:function(_844,_845,row){var opts=$.data(_844,"datagrid").options,_846=opts.finder.getRow(_844,_845);$.extend(_846,row);var cs=function(_849){var css=opts.rowStyler?opts.rowStyler.call(_844,_849,_846):"";return this.getStyleValue(css)}.call(this,_845),_848=cs.s,cls="datagrid-row "+(_845%2&&opts.striped?"datagrid-row-alt ":" ")+cs.c;function _84a(_84b){var _84c,_84d,_84e,tr=opts.finder.getTr(_844,_845,"body",_84b?1:2);tr.length&&(_84c=$(_844).datagrid("getColumnFields",_84b),_84d=tr.find("div.datagrid-cell-check input[type=checkbox]").is(":checked"),tr.html(this.renderRow.call(this,_844,_84c,_84b,_845,_846)),_84e=(tr.hasClass("datagrid-row-checked")?" datagrid-row-checked":"")+(tr.hasClass("datagrid-row-selected")?" datagrid-row-selected":""),tr.attr("style",_848).attr("class",cls+_84e),_84d&&tr.find("div.datagrid-cell-check input[type=checkbox]")._propAttr("checked",!0))}_84a.call(this,!0),_84a.call(this,!1),$(_844).datagrid("fixRowHeight",_845)},insertRow:function(_84f,_850,row){var _851=$.data(_84f,"datagrid"),opts=_851.options,dc=_851.dc,data=_851.data;function _852(_853){for(var _854=_853?1:2,i=data.rows.length-1;_850<=i;i--){var _855,tr=opts.finder.getTr(_84f,i,"body",_854);tr.attr("datagrid-row-index",i+1),tr.attr("id",_851.rowIdPrefix+"-"+_854+"-"+(i+1)),_853&&opts.rownumbers&&(_855=i+2,opts.pagination&&(_855+=(opts.pageNumber-1)*opts.pageSize),tr.find("div.datagrid-cell-rownumber").html(_855)),opts.striped&&tr.removeClass("datagrid-row-alt").addClass((i+1)%2?"datagrid-row-alt":"")}}function _856(_857){var _858=_857?1:2,tr=($(_84f).datagrid("getColumnFields",_857),'<tr id="'+(_851.rowIdPrefix+"-"+_858+"-"+_850)+'" class="datagrid-row" datagrid-row-index="'+_850+'"></tr>');_850>=data.rows.length?data.rows.length?opts.finder.getTr(_84f,"","last",_858).after(tr):(_857?dc.body1:dc.body2).html('<table class="datagrid-btable" cellspacing="0" cellpadding="0" border="0"><tbody>'+tr+"</tbody></table>"):opts.finder.getTr(_84f,_850+1,"body",_858).before(tr)}null!=_850&&null!=_850||(_850=data.rows.length),_850>data.rows.length&&(_850=data.rows.length),_852.call(this,!0),_852.call(this,!1),_856.call(this,!0),_856.call(this,!1),data.total+=1,data.rows.splice(_850,0,row),this.setEmptyMsg(_84f),this.refreshRow.call(this,_84f,_850)},deleteRow:function(_85b,_85c){var _85d=$.data(_85b,"datagrid"),opts=_85d.options,data=_85d.data;function _85e(_85f){for(var _860=_85f?1:2,i=_85c+1;i<data.rows.length;i++){var _861,tr=opts.finder.getTr(_85b,i,"body",_860);tr.attr("datagrid-row-index",i-1),tr.attr("id",_85d.rowIdPrefix+"-"+_860+"-"+(i-1)),_85f&&opts.rownumbers&&(_861=i,opts.pagination&&(_861+=(opts.pageNumber-1)*opts.pageSize),tr.find("div.datagrid-cell-rownumber").html(_861)),opts.striped&&tr.removeClass("datagrid-row-alt").addClass((i-1)%2?"datagrid-row-alt":"")}}opts.finder.getTr(_85b,_85c).remove(),_85e.call(this,!0),_85e.call(this,!1),--data.total,data.rows.splice(_85c,1),this.setEmptyMsg(_85b)},onBeforeRender:function(_862,rows){},onAfterRender:function(_863){$.data(_863,"datagrid").options.showFooter&&$(_863).datagrid("getPanel").find("div.datagrid-footer").find("div.datagrid-cell-rownumber,div.datagrid-cell-check").css("visibility","hidden"),this.setEmptyMsg(_863)},setEmptyMsg:function(_866){var h,_867=$.data(_866,"datagrid"),opts=_867.options,_868=0==opts.finder.getRows(_866).length;_868&&this.renderEmptyRow(_866),opts.emptyMsg&&(_867.dc.view.children(".datagrid-empty").remove(),_868&&(h=_867.dc.header2.parent().outerHeight(),$('<div class="datagrid-empty"></div>').appendTo(_867.dc.view).html(opts.emptyMsg).css("top",h+"px")))},renderEmptyRow:function(_869){var cols=$.map($(_869).datagrid("getColumnFields"),function(_86a){return $(_869).datagrid("getColumnOption",_86a)});$.map(cols,function(col){col.formatter1=col.formatter,col.styler1=col.styler,col.formatter=col.styler=void 0});var _86b=$.data(_869,"datagrid").dc.body2;_86b.html(this.renderTable(_869,0,[{}],!1)),_86b.find("tbody *").css({height:1,borderColor:"transparent",background:"transparent"});var tr=_86b.find(".datagrid-row");tr.removeClass("datagrid-row").removeAttr("datagrid-row-index"),tr.find(".datagrid-cell,.datagrid-cell-check").empty(),$.map(cols,function(col){col.formatter=col.formatter1,col.styler=col.styler1,col.formatter1=col.styler1=void 0})}};$.fn.datagrid.defaults=$.extend({},$.fn.panel.defaults,{sharedStyleSheet:!1,frozenColumns:void 0,columns:void 0,fitColumns:!1,resizeHandle:"right",autoRowHeight:!0,toolbar:null,striped:!1,method:"post",nowrap:!0,idField:null,url:null,data:null,loadMsg:"Processing, please wait ...",emptyMsg:"",rownumbers:!1,singleSelect:!1,ctrlSelect:!1,selectOnCheck:!0,checkOnSelect:!0,pagination:!1,pagePosition:"bottom",pageNumber:1,pageSize:10,pageList:[10,20,30,40,50],queryParams:{},sortName:null,sortOrder:"asc",multiSort:!1,remoteSort:!0,showHeader:!0,showFooter:!1,scrollOnSelect:!0,scrollbarSize:18,rownumberWidth:30,editorHeight:24,headerEvents:{mouseover:_6ae(!0),mouseout:_6ae(!1),click:_6b2,dblclick:_6b7,contextmenu:_6ba},rowEvents:{mouseover:_6bc(!0),mouseout:_6bc(!1),click:_6c3,dblclick:_6cd,contextmenu:_6d1},rowStyler:function(_86c,_86d){},loader:function(_86e,_86f,_870){var opts=$(this).datagrid("options");if(!opts.url)return!1;$.ajax({type:opts.method,url:opts.url,data:_86e,dataType:"json",success:function(data){_86f(data)},error:function(){_870.apply(this,arguments)}})},loadFilter:function(data){return data},editors:_7dd,finder:{getTr:function(_871,_872,type,_873){type=type||"body",_873=_873||0;var _874=$.data(_871,"datagrid"),dc=_874.dc,opts=_874.options;if(0==_873){var tr1=opts.finder.getTr(_871,_872,type,1),tr2=opts.finder.getTr(_871,_872,type,2);return tr1.add(tr2)}if("body"!=type)return"footer"==type?(1==_873?dc.footer1:dc.footer2).find(">table>tbody>tr[datagrid-row-index="+_872+"]"):"selected"==type?(1==_873?dc.body1:dc.body2).find(">table>tbody>tr.datagrid-row-selected"):"highlight"==type?(1==_873?dc.body1:dc.body2).find(">table>tbody>tr.datagrid-row-over"):"checked"==type?(1==_873?dc.body1:dc.body2).find(">table>tbody>tr.datagrid-row-checked"):"editing"==type?(1==_873?dc.body1:dc.body2).find(">table>tbody>tr.datagrid-row-editing"):"last"==type?(1==_873?dc.body1:dc.body2).find(">table>tbody>tr[datagrid-row-index]:last"):"allbody"==type?(1==_873?dc.body1:dc.body2).find(">table>tbody>tr[datagrid-row-index]"):"allfooter"==type?(1==_873?dc.footer1:dc.footer2).find(">table>tbody>tr[datagrid-row-index]"):void 0;var tr=$("#"+_874.rowIdPrefix+"-"+_873+"-"+_872);return tr.length||(tr=(1==_873?dc.body1:dc.body2).find(">table>tbody>tr[datagrid-row-index="+_872+"]")),tr},getRow:function(_875,p){var _876="object"==typeof p?p.attr("datagrid-row-index"):p;return $.data(_875,"datagrid").data.rows[parseInt(_876)]},getRows:function(_877){return $(_877).datagrid("getRows")}},view:_826,onBeforeLoad:function(_878){},onLoadSuccess:function(){},onLoadError:function(){},onClickRow:function(_879,_87a){},onDblClickRow:function(_87b,_87c){},onClickCell:function(_87d,_87e,_87f){},onDblClickCell:function(_880,_881,_882){},onBeforeSortColumn:function(sort,_883){},onSortColumn:function(sort,_884){},onResizeColumn:function(_885,_886){},onBeforeSelect:function(_887,_888){},onSelect:function(_889,_88a){},onBeforeUnselect:function(_88b,_88c){},onUnselect:function(_88d,_88e){},onSelectAll:function(rows){},onUnselectAll:function(rows){},onBeforeCheck:function(_88f,_890){},onCheck:function(_891,_892){},onBeforeUncheck:function(_893,_894){},onUncheck:function(_895,_896){},onCheckAll:function(rows){},onUncheckAll:function(rows){},onBeforeEdit:function(_897,_898){},onBeginEdit:function(_899,_89a){},onEndEdit:function(_89b,_89c,_89d){},onAfterEdit:function(_89e,_89f,_8a0){},onCancelEdit:function(_8a1,_8a2){},onHeaderContextMenu:function(e,_8a3){},onRowContextMenu:function(e,_8a4,_8a5){}})}($$),function($){var _8a6;function _8a7(_8b0){var opts,t=$(_8b0);t.length&&((opts=$.data(_8b0,"propertygrid").options).finder.getTr(_8b0,null,"editing").each(function(){var _8b1=parseInt($(this).attr("datagrid-row-index"));t.datagrid("validateRow",_8b1)?t.datagrid("endEdit",_8b1):t.datagrid("cancelEdit",_8b1)}),opts.editIndex=void 0)}$(document).unbind(".propertygrid").bind("mousedown.propertygrid",function(e){$(e.target).closest("div.datagrid-view,div.combo-panel").length||(_8a7(_8a6),_8a6=void 0)}),$.fn.propertygrid=function(_8b2,_8b3){if("string"!=typeof _8b2)return _8b2=_8b2||{},this.each(function(){var opts,_8b5=$.data(this,"propertygrid");_8b5?$.extend(_8b5.options,_8b2):((opts=$.extend({},$.fn.propertygrid.defaults,$.fn.propertygrid.parseOptions(this),_8b2)).frozenColumns=$.extend(!0,[],opts.frozenColumns),opts.columns=$.extend(!0,[],opts.columns),$.data(this,"propertygrid",{options:opts})),function(_8a9){$.data(_8a9,"propertygrid");var opts=$.data(_8a9,"propertygrid").options;$(_8a9).datagrid($.extend({},opts,{cls:"propertygrid",view:opts.showGroup?opts.groupView:opts.view,onBeforeEdit:function(_8ab,row){if(0==opts.onBeforeEdit.call(_8a9,_8ab,row))return!1;var dg=$(this),row=dg.datagrid("getRows")[_8ab];dg.datagrid("getColumnOption","value").editor=row.editor},onClickCell:function(_8ac,_8ad,_8ae){var t,ed;_8a6!=this&&(_8a7(_8a6),_8a6=this),opts.editIndex!=_8ac&&(_8a7(_8a6),$(this).datagrid("beginEdit",_8ac),(ed=(ed=$(this).datagrid("getEditor",{index:_8ac,field:_8ad}))||$(this).datagrid("getEditor",{index:_8ac,field:"value"}))&&(((t=$(ed.target)).data("textbox")?t.textbox("textbox"):t).focus(),opts.editIndex=_8ac)),opts.onClickCell.call(_8a9,_8ac,_8ad,_8ae)},loadFilter:function(data){return _8a7(this),opts.loadFilter.call(this,data)}}))}(this)});var _8b4=$.fn.propertygrid.methods[_8b2];return _8b4?_8b4(this,_8b3):this.datagrid(_8b2,_8b3)},$.fn.propertygrid.methods={options:function(jq){return $.data(jq[0],"propertygrid").options}},$.fn.propertygrid.parseOptions=function(_8b6){return $.extend({},$.fn.datagrid.parseOptions(_8b6),$.parser.parseOptions(_8b6,[{showGroup:"boolean"}]))};var _8b7=$.extend({},$.fn.datagrid.defaults.view,{render:function(_8b8,_8b9,_8ba){for(var _8bb=[],_8bc=this.groups,i=0;i<_8bc.length;i++)_8bb.push(this.renderGroup.call(this,_8b8,i,_8bc[i],_8ba));$(_8b9).html(_8bb.join(""))},renderGroup:function(_8bd,_8be,_8bf,_8c0){var _8c1=$.data(_8bd,"datagrid"),opts=_8c1.options,_8c2=$(_8bd).datagrid("getColumnFields",_8c0),_8c3=[];_8c3.push('<div class="datagrid-group" group-index='+_8be+">"),(_8c0&&(opts.rownumbers||opts.frozenColumns.length)||!_8c0&&!opts.rownumbers&&!opts.frozenColumns.length)&&(_8c3.push('<span class="datagrid-group-expander">'),_8c3.push('<span class="datagrid-row-expander datagrid-row-collapse">&nbsp;</span>'),_8c3.push("</span>")),_8c0||(_8c3.push('<span class="datagrid-group-title">'),_8c3.push(opts.groupFormatter.call(_8bd,_8bf.value,_8bf.rows)),_8c3.push("</span>")),_8c3.push("</div>"),_8c3.push('<table class="datagrid-btable" cellspacing="0" cellpadding="0" border="0"><tbody>');for(var _8c4=_8bf.startIndex,j=0;j<_8bf.rows.length;j++){var css=opts.rowStyler?opts.rowStyler.call(_8bd,_8c4,_8bf.rows[j]):"",_8c5="",_8c6="";"string"==typeof css?_8c6=css:css&&(_8c5=css.class||"",_8c6=css.style||"");var cls='class="datagrid-row '+(_8c4%2&&opts.striped?"datagrid-row-alt ":" ")+_8c5+'"',_8c7=_8c6?'style="'+_8c6+'"':"",_8c8=_8c1.rowIdPrefix+"-"+(_8c0?1:2)+"-"+_8c4;_8c3.push('<tr id="'+_8c8+'" datagrid-row-index="'+_8c4+'" '+cls+" "+_8c7+">"),_8c3.push(this.renderRow.call(this,_8bd,_8c2,_8c0,_8c4,_8bf.rows[j])),_8c3.push("</tr>"),_8c4++}return _8c3.push("</tbody></table>"),_8c3.join("")},bindEvents:function(_8c9){var dc=$.data(_8c9,"datagrid").dc,body=dc.body1.add(dc.body2),_8cb=($.data(body[0],"events")||$._data(body[0],"events")).click[0].handler;body.unbind("click").bind("click",function(e){var _8cd,_8cc=$(e.target).closest("span.datagrid-row-expander");_8cc.length?(_8cd=_8cc.closest("div.datagrid-group").attr("group-index"),_8cc.hasClass("datagrid-row-collapse")?$(_8c9).datagrid("collapseGroup",_8cd):$(_8c9).datagrid("expandGroup",_8cd)):_8cb(e),e.stopPropagation()})},onBeforeRender:function(_8ce,rows){var _8cf=$.data(_8ce,"datagrid"),opts=_8cf.options;$("#datagrid-group-style").length||$("head").append('<style id="datagrid-group-style">.datagrid-group{height:'+opts.groupHeight+"px;overflow:hidden;font-weight:bold;border-bottom:1px solid #ccc;}.datagrid-group-title,.datagrid-group-expander{display:inline-block;vertical-align:bottom;height:100%;line-height:"+opts.groupHeight+"px;padding:0 4px;}.datagrid-group-expander{width:"+opts.expanderWidth+"px;text-align:center;padding:0}.datagrid-row-expander{margin:"+Math.floor((opts.groupHeight-16)/2)+"px 0;display:inline-block;width:16px;height:16px;cursor:pointer}</style>");for(var _8d1=[],i=0;i<rows.length;i++){var row=rows[i];(_8d2=function(_8d6){for(var i=0;i<_8d1.length;i++){var _8d7=_8d1[i];if(_8d7.value==_8d6)return _8d7}return null}(row[opts.groupField]))?_8d2.rows.push(row):(_8d2={value:row[opts.groupField],rows:[row]},_8d1.push(_8d2))}for(var _8d2,_8d4=0,_8d5=[],i=0;i<_8d1.length;i++){(_8d2=_8d1[i]).startIndex=_8d4,_8d4+=_8d2.rows.length,_8d5=_8d5.concat(_8d2.rows)}_8cf.data.rows=_8d5,this.groups=_8d1;var that=this;setTimeout(function(){that.bindEvents(_8ce)},0)}});$.extend($.fn.datagrid.methods,{groups:function(jq){return jq.datagrid("options").view.groups},expandGroup:function(jq,_8d8){return jq.each(function(){var _8d9=$.data(this,"datagrid").dc.view.find(null!=_8d8?'div.datagrid-group[group-index="'+_8d8+'"]':"div.datagrid-group"),_8da=_8d9.find("span.datagrid-row-expander");_8da.hasClass("datagrid-row-expand")&&(_8da.removeClass("datagrid-row-expand").addClass("datagrid-row-collapse"),_8d9.next("table").show()),$(this).datagrid("fixRowHeight")})},collapseGroup:function(jq,_8db){return jq.each(function(){var _8dc=$.data(this,"datagrid").dc.view.find(null!=_8db?'div.datagrid-group[group-index="'+_8db+'"]':"div.datagrid-group"),_8dd=_8dc.find("span.datagrid-row-expander");_8dd.hasClass("datagrid-row-collapse")&&(_8dd.removeClass("datagrid-row-collapse").addClass("datagrid-row-expand"),_8dc.next("table").hide()),$(this).datagrid("fixRowHeight")})}}),$.extend(_8b7,{refreshGroupTitle:function(_8de,_8df){var _8e0=$.data(_8de,"datagrid"),opts=_8e0.options,dc=_8e0.dc,_8e1=this.groups[_8df];dc.body2.children("div.datagrid-group[group-index="+_8df+"]").find("span.datagrid-group-title").html(opts.groupFormatter.call(_8de,_8e1.value,_8e1.rows))},insertRow:function(_8e2,_8e3,row){var _8e6,_8e4=$.data(_8e2,"datagrid"),opts=_8e4.options,dc=_8e4.dc,_8e5=null;if(_8e4.data.rows.length){for(var i=0;i<this.groups.length;i++)if(this.groups[i].value==row[opts.groupField]){_8e5=this.groups[i],_8e6=i;break}_8e5?(null!=_8e3&&null!=_8e3||(_8e3=_8e4.data.rows.length),_8e3<_8e5.startIndex?_8e3=_8e5.startIndex:_8e3>_8e5.startIndex+_8e5.rows.length&&(_8e3=_8e5.startIndex+_8e5.rows.length),$.fn.datagrid.defaults.view.insertRow.call(this,_8e2,_8e3,row),_8e3>=_8e5.startIndex+_8e5.rows.length&&(_8e7(_8e3,!0),_8e7(_8e3,!1)),_8e5.rows.splice(_8e3-_8e5.startIndex,0,row)):(_8e5={value:row[opts.groupField],rows:[row],startIndex:_8e4.data.rows.length},_8e6=this.groups.length,dc.body1.append(this.renderGroup.call(this,_8e2,_8e6,_8e5,!0)),dc.body2.append(this.renderGroup.call(this,_8e2,_8e6,_8e5,!1)),this.groups.push(_8e5),_8e4.data.rows.push(row)),this.refreshGroupTitle(_8e2,_8e6)}else $(_8e2).datagrid("loadData",[row]);function _8e7(_8e8,_8e9){var _8ea=_8e9?1:2,_8eb=opts.finder.getTr(_8e2,_8e8-1,"body",_8ea);opts.finder.getTr(_8e2,_8e8,"body",_8ea).insertAfter(_8eb)}},updateRow:function(_8ec,_8ed,row){var opts=$.data(_8ec,"datagrid").options;$.fn.datagrid.defaults.view.updateRow.call(this,_8ec,_8ed,row);var tb=opts.finder.getTr(_8ec,_8ed,"body",2).closest("table.datagrid-btable"),_8ee=parseInt(tb.prev().attr("group-index"));this.refreshGroupTitle(_8ec,_8ee)},deleteRow:function(_8ef,_8f0){var _8f1=$.data(_8ef,"datagrid"),opts=_8f1.options,dc=_8f1.dc,body=dc.body1.add(dc.body2),tb=opts.finder.getTr(_8ef,_8f0,"body",2).closest("table.datagrid-btable"),_8f2=parseInt(tb.prev().attr("group-index"));$.fn.datagrid.defaults.view.deleteRow.call(this,_8ef,_8f0);var _8f3=this.groups[_8f2];if(1<_8f3.rows.length)_8f3.rows.splice(_8f0-_8f3.startIndex,1),this.refreshGroupTitle(_8ef,_8f2);else{body.children("div.datagrid-group[group-index="+_8f2+"]").remove();for(var i=_8f2+1;i<this.groups.length;i++)body.children("div.datagrid-group[group-index="+i+"]").attr("group-index",i-1);this.groups.splice(_8f2,1)}for(_8f0=0,i=0;i<this.groups.length;i++){(_8f3=this.groups[i]).startIndex=_8f0,_8f0+=_8f3.rows.length}}}),$.fn.propertygrid.defaults=$.extend({},$.fn.datagrid.defaults,{groupHeight:21,expanderWidth:16,singleSelect:!0,remoteSort:!1,fitColumns:!0,loadMsg:"",frozenColumns:[[{field:"f",width:16,resizable:!1}]],columns:[[{field:"name",title:"Name",width:100,sortable:!0},{field:"value",title:"Value",width:100,resizable:!1}]],showGroup:!1,groupView:_8b7,groupField:"group",groupFormatter:function(_8f4,rows){return _8f4}})}($$),function($){function _906(_907,_908){var opts=$.data(_907,"datagrid").options;if(!$.data(_907,"datagrid").dc.body1.is(":empty")&&(!opts.nowrap||opts.autoRowHeight)&&null!=_908)for(var _909=_90a(_907,_908),i=0;i<_909.length;i++)!function(_90c){var tr1=opts.finder.getTr(_907,_90c,"body",1),tr2=opts.finder.getTr(_907,_90c,"body",2);tr1.css("height",""),tr2.css("height","");var _90d=Math.max(tr1.height(),tr2.height());tr1.css("height",_90d),tr2.css("height",_90d)}(_909[i][opts.idField]);$(_907).datagrid("fixRowHeight",_908)}function _90e(_90f){var dc=$.data(_90f,"datagrid").dc;$.data(_90f,"treegrid").options.rownumbers&&dc.body1.find("div.datagrid-cell-rownumber").each(function(i){$(this).html(i+1)})}function _910(_911){return function(e){$.fn.datagrid.defaults.rowEvents[_911?"mouseover":"mouseout"](e);var tt=$(e.target),fn=_911?"addClass":"removeClass";tt.hasClass("tree-hit")&&(tt.hasClass("tree-expanded")?tt[fn]("tree-expanded-hover"):tt[fn]("tree-collapsed-hover"))}}function _917(_919,_91a,_91b,_91c){var _91d=$.data(_919,"treegrid"),opts=(_91d.checkedRows,_91d.options);if(opts.checkbox){var row=find(_919,_91a);if(row.checkState){var ck=opts.finder.getTr(_919,_91a).find(".tree-checkbox");if(null==_91b&&(_91b=!ck.hasClass("tree-checkbox1")&&(!!ck.hasClass("tree-checkbox0")||(null==row._checked&&(row._checked=ck.hasClass("tree-checkbox1")),!row._checked))),row._checked=_91b){if(ck.hasClass("tree-checkbox1"))return}else if(ck.hasClass("tree-checkbox0"))return;!_91c&&0==opts.onBeforeCheckNode.call(_919,row,_91b)||(opts.cascadeCheck?(function(_925,row,_926){var flag=_926?1:0;_921(_925,row,flag),$.easyui.forEach(row.children||[],!0,function(r){_921(_925,r,flag)})}(_919,row,_91b),_920(_919,row)):_921(_919,row,_91b?"1":"0"),_91c||opts.onCheckNode.call(_919,row,_91b))}}}function _921(_922,row,flag){var ck,_923=$.data(_922,"treegrid"),_924=_923.checkedRows,opts=_923.options;!row.checkState||null==flag||(ck=opts.finder.getTr(_922,row[opts.idField]).find(".tree-checkbox")).length&&(row.checkState=["unchecked","checked","indeterminate"][flag],row.checked="checked"==row.checkState,ck.removeClass("tree-checkbox0 tree-checkbox1 tree-checkbox2"),ck.addClass("tree-checkbox"+flag),0==flag?$.easyui.removeArrayItem(_924,opts.idField,row[opts.idField]):$.easyui.addArrayItem(_924,opts.idField,row))}function _920(_927,row){var prow=_928(_927,row[$.data(_927,"treegrid").options.idField]);prow&&(_921(_927,prow,_929(prow)),_920(_927,prow))}function _929(row){var len=0,c0=0,c1=0;if($.easyui.forEach(row.children||[],!1,function(r){r.checkState&&(len++,"checked"==r.checkState?c1++:"unchecked"==r.checkState&&c0++)}),0!=len){return c0==len?0:c1==len?1:2}}function _92a(_92b,_92c){var row,tr,ck,flag,opts=$.data(_92b,"treegrid").options;opts.checkbox&&(row=find(_92b,_92c),ck=(tr=opts.finder.getTr(_92b,_92c)).find(".tree-checkbox"),opts.view.hasCheckbox(_92b,row)?(ck.length||(row.checkState=row.checkState||"unchecked",$('<span class="tree-checkbox"></span>').insertBefore(tr.find(".tree-title"))),"checked"==row.checkState?_917(_92b,_92c,!0,!0):"unchecked"==row.checkState||0===(flag=_929(row))?_917(_92b,_92c,!1,!0):1===flag&&_917(_92b,_92c,!0,!0)):(ck.remove(),row.checkState=void 0,row.checked=void 0,_920(_92b,row)))}function _92d(_92e,_92f){var opts=$.data(_92e,"treegrid").options,tr1=opts.finder.getTr(_92e,_92f,"body",1),tr2=opts.finder.getTr(_92e,_92f,"body",2),_930=$(_92e).datagrid("getColumnFields",!0).length+(opts.rownumbers?1:0),_931=$(_92e).datagrid("getColumnFields",!1).length;function _932(tr,_933){$('<tr class="treegrid-tr-tree"><td style="border:0px" colspan="'+_933+'"><div></div></td></tr>').insertAfter(tr)}_932(tr1,_930),_932(tr2,_931)}function _934(_935,_936,data,_937,_938){var _939=$.data(_935,"treegrid"),opts=_939.options,dc=_939.dc;data=opts.loadFilter.call(_935,data,_936);var _93a,_93b,cc1,cc2,_93c,_93d,node=find(_935,_936);node?(_93a=opts.finder.getTr(_935,_936,"body",1),_93b=opts.finder.getTr(_935,_936,"body",2),cc1=_93a.next("tr.treegrid-tr-tree").children("td").children("div"),cc2=_93b.next("tr.treegrid-tr-tree").children("td").children("div"),_937||(node.children=[])):(cc1=dc.body1,cc2=dc.body2,_937||(_939.data=[])),_937||(cc1.empty(),cc2.empty()),opts.view.onBeforeRender&&opts.view.onBeforeRender.call(opts.view,_935,_936,data),opts.view.render.call(opts.view,_935,cc1,!0),opts.view.render.call(opts.view,_935,cc2,!1),opts.showFooter&&(opts.view.renderFooter.call(opts.view,_935,dc.footer1,!0),opts.view.renderFooter.call(opts.view,_935,dc.footer2,!1)),opts.view.onAfterRender&&opts.view.onAfterRender.call(opts.view,_935),!_936&&opts.pagination&&(_93c=$.data(_935,"treegrid").total,(_93d=$(_935).datagrid("getPager")).pagination("options").total!=_93c&&_93d.pagination({total:_93c})),_906(_935),_90e(_935),$(_935).treegrid("showLines"),$(_935).treegrid("setSelectionState"),$(_935).treegrid("autoSizeColumn"),_938||opts.onLoadSuccess.call(_935,node,data)}function _905(_93e,_93f,_940,_941,_942){var opts=$.data(_93e,"treegrid").options,body=$(_93e).datagrid("getPanel").find("div.datagrid-body");null==_93f&&opts.queryParams&&(opts.queryParams.id=void 0),_940&&(opts.queryParams=_940);var _943=$.extend({},opts.queryParams);opts.pagination&&$.extend(_943,{page:opts.pageNumber,rows:opts.pageSize}),opts.sortName&&$.extend(_943,{sort:opts.sortName,order:opts.sortOrder});var _944,row=find(_93e,_93f);0!=opts.onBeforeLoad.call(_93e,row,_943)&&((_944=body.find('tr[node-id="'+_93f+'"] span.tree-folder')).addClass("tree-loading"),$(_93e).treegrid("loading"),0==opts.loader.call(_93e,_943,function(data){_944.removeClass("tree-loading"),$(_93e).treegrid("loaded"),_934(_93e,_93f,data,_941),_942&&_942()},function(){_944.removeClass("tree-loading"),$(_93e).treegrid("loaded"),opts.onLoadError.apply(_93e,arguments),_942&&_942()})&&(_944.removeClass("tree-loading"),$(_93e).treegrid("loaded")))}function _949(_94a){return $.data(_94a,"treegrid").data}function _928(_94b,_94c){var row=find(_94b,_94c);return row._parentId?find(_94b,row._parentId):null}function _90a(_94d,_94e){var _94f,data=$.data(_94d,"treegrid").data;_94e&&(data=(_94f=find(_94d,_94e))&&_94f.children||[]);var _950=[];return $.easyui.forEach(data,!0,function(node){_950.push(node)}),_950}function find(_954,_955){var _956=$.data(_954,"treegrid"),opts=_956.options,_957=null;return $.easyui.forEach(_956.data,!0,function(node){if(node[opts.idField]==_955)return _957=node,!1}),_957}function _958(_959,_95a){var cc,opts=$.data(_959,"treegrid").options,row=find(_959,_95a),tr=opts.finder.getTr(_959,_95a),hit=tr.find("span.tree-hit");0!=hit.length&&(hit.hasClass("tree-collapsed")||0!=opts.onBeforeCollapse.call(_959,row)&&(hit.removeClass("tree-expanded tree-expanded-hover").addClass("tree-collapsed"),hit.next().removeClass("tree-folder-open"),row.state="closed",cc=(tr=tr.next("tr.treegrid-tr-tree")).children("td").children("div"),opts.animate?cc.slideUp("normal",function(){$(_959).treegrid("autoSizeColumn"),_906(_959,_95a),opts.onCollapse.call(_959,row)}):(cc.hide(),$(_959).treegrid("autoSizeColumn"),_906(_959,_95a),opts.onCollapse.call(_959,row))))}function _95b(_95c,_95d){var _95e,cc,_960,opts=$.data(_95c,"treegrid").options,tr=opts.finder.getTr(_95c,_95d),hit=tr.find("span.tree-hit"),row=find(_95c,_95d);function _95f(cc){row.state="open",opts.animate?cc.slideDown("normal",function(){$(_95c).treegrid("autoSizeColumn"),_906(_95c,_95d),opts.onExpand.call(_95c,row)}):(cc.show(),$(_95c).treegrid("autoSizeColumn"),_906(_95c,_95d),opts.onExpand.call(_95c,row))}0!=hit.length&&(hit.hasClass("tree-expanded")||0!=opts.onBeforeExpand.call(_95c,row)&&(hit.removeClass("tree-collapsed tree-collapsed-hover").addClass("tree-expanded"),hit.next().addClass("tree-folder-open"),(_95e=tr.next("tr.treegrid-tr-tree")).length?_95f(cc=_95e.children("td").children("div")):(_92d(_95c,row[opts.idField]),_95e=tr.next("tr.treegrid-tr-tree"),(cc=_95e.children("td").children("div")).hide(),(_960=$.extend({},opts.queryParams||{})).id=row[opts.idField],_905(_95c,row[opts.idField],_960,!0,function(){cc.is(":empty")?_95e.remove():_95f(cc)}))))}function _916(_961,_962){($.data(_961,"treegrid").options.finder.getTr(_961,_962).find("span.tree-hit").hasClass("tree-expanded")?_958:_95b)(_961,_962)}function _96e(_96f,_970){var tr,_972,hit,_971=$.data(_96f,"treegrid"),opts=_971.options;_970.parent&&(0==(tr=opts.finder.getTr(_96f,_970.parent)).next("tr.treegrid-tr-tree").length&&_92d(_96f,_970.parent),(_972=tr.children('td[field="'+opts.treeField+'"]').children("div.datagrid-cell").children("span.tree-icon")).hasClass("tree-file")&&(_972.removeClass("tree-file").addClass("tree-folder tree-folder-open"),(hit=$('<span class="tree-hit tree-expanded"></span>').insertBefore(_972)).prev().length&&hit.prev().remove())),_934(_96f,_970.parent,_970.data,0<_971.data.length,!0)}function _981(_982){var _983,t=$(_982),opts=t.treegrid("options");function _984(node){return opts.finder.getTr(_982,node[opts.idField]).find('td[field="'+opts.treeField+'"] div.datagrid-cell')}opts.lines?(t.treegrid("getPanel").addClass("tree-lines"),t.treegrid("getPanel").find("span.tree-indent").removeClass("tree-line tree-join tree-joinbottom"),t.treegrid("getPanel").find("div.datagrid-cell").removeClass("tree-node-last tree-root-first tree-root-one"),1<(_983=t.treegrid("getRoots")).length?_984(_983[0]).addClass("tree-root-first"):1==_983.length&&_984(_983[0]).addClass("tree-root-one"),function _985(_987){$.map(_987,function(node){node.children&&node.children.length?_985(node.children):_984(node).find(".tree-icon").prev().addClass("tree-join")});{var cell;_987.length&&((cell=_984(_987[_987.length-1])).addClass("tree-node-last"),cell.find(".tree-join").removeClass("tree-join").addClass("tree-joinbottom"))}}(_983),function _986(_988){$.map(_988,function(node){node.children&&node.children.length&&_986(node.children)});for(var i=0;i<_988.length-1;i++){var node=_988[i],_989=t.treegrid("getLevel",node[opts.idField]),tr=opts.finder.getTr(_982,node[opts.idField]),cc=tr.next().find('tr.datagrid-row td[field="'+opts.treeField+'"] div.datagrid-cell');cc.find("span:eq("+(_989-1)+")").addClass("tree-line")}}(_983)):t.treegrid("getPanel").removeClass("tree-lines")}$.fn.treegrid=function(_98a,_98b){if("string"!=typeof _98a)return _98a=_98a||{},this.each(function(){var _98d=$.data(this,"treegrid");_98d?$.extend(_98d.options,_98a):_98d=$.data(this,"treegrid",{options:$.extend({},$.fn.treegrid.defaults,$.fn.treegrid.parseOptions(this),_98a),data:[],checkedRows:[],tmpIds:[]}),function(_8f6){var _8f7=$.data(_8f6,"treegrid"),opts=_8f7.options;$(_8f6).datagrid($.extend({},opts,{url:null,data:null,loader:function(){return!1},onBeforeLoad:function(){return!1},onLoadSuccess:function(){},onResizeColumn:function(_8f8,_8f9){_906(_8f6),opts.onResizeColumn.call(_8f6,_8f8,_8f9)},onBeforeSortColumn:function(sort,_8fa){if(0==opts.onBeforeSortColumn.call(_8f6,sort,_8fa))return!1},onSortColumn:function(sort,_8fb){var data;opts.sortName=sort,opts.sortOrder=_8fb,opts.remoteSort?_905(_8f6):(data=$(_8f6).treegrid("getData"),_934(_8f6,null,data)),opts.onSortColumn.call(_8f6,sort,_8fb)},onClickCell:function(_8fc,_8fd){opts.onClickCell.call(_8f6,_8fd,find(_8f6,_8fc))},onDblClickCell:function(_8fe,_8ff){opts.onDblClickCell.call(_8f6,_8ff,find(_8f6,_8fe))},onRowContextMenu:function(e,_900){opts.onContextMenu.call(_8f6,e,find(_8f6,_900))}}));var _902,_901=$.data(_8f6,"datagrid").options;opts.columns=_901.columns,opts.frozenColumns=_901.frozenColumns,_8f7.dc=$.data(_8f6,"datagrid").dc,opts.pagination&&((_902=$(_8f6).datagrid("getPager")).pagination({pageNumber:opts.pageNumber,pageSize:opts.pageSize,pageList:opts.pageList,onSelectPage:function(_903,_904){opts.pageNumber=_903,opts.pageSize=_904,_905(_8f6)}}),opts.pageSize=_902.pagination("options").pageSize)}(this),_98d.options.data&&$(this).treegrid("loadData",_98d.options.data),_905(this)});var _98c=$.fn.treegrid.methods[_98a];return _98c?_98c(this,_98b):this.datagrid(_98a,_98b)},$.fn.treegrid.methods={options:function(jq){return $.data(jq[0],"treegrid").options},resize:function(jq,_98e){return jq.each(function(){$(this).datagrid("resize",_98e)})},fixRowHeight:function(jq,_98f){return jq.each(function(){_906(this,_98f)})},loadData:function(jq,data){return jq.each(function(){_934(this,data.parent,data)})},load:function(jq,_990){return jq.each(function(){$(this).treegrid("options").pageNumber=1,$(this).treegrid("getPager").pagination({pageNumber:1}),$(this).treegrid("reload",_990)})},reload:function(jq,id){return jq.each(function(){var node,tr,opts=$(this).treegrid("options"),_991={};"object"==typeof id?_991=id:(_991=$.extend({},opts.queryParams)).id=id,_991.id?((node=$(this).treegrid("find",_991.id)).children&&node.children.splice(0,node.children.length),opts.queryParams=_991,(tr=opts.finder.getTr(this,_991.id)).next("tr.treegrid-tr-tree").remove(),tr.find("span.tree-hit").removeClass("tree-expanded tree-expanded-hover").addClass("tree-collapsed"),_95b(this,_991.id)):_905(this,null,_991)})},reloadFooter:function(jq,_992){return jq.each(function(){var opts=$.data(this,"treegrid").options,dc=$.data(this,"datagrid").dc;_992&&($.data(this,"treegrid").footer=_992),opts.showFooter&&(opts.view.renderFooter.call(opts.view,this,dc.footer1,!0),opts.view.renderFooter.call(opts.view,this,dc.footer2,!1),opts.view.onAfterRender&&opts.view.onAfterRender.call(opts.view,this),$(this).treegrid("fixRowHeight"))})},getData:function(jq){return $.data(jq[0],"treegrid").data},getFooterRows:function(jq){return $.data(jq[0],"treegrid").footer},getRoot:function(jq){return _947=jq[0],(_948=_949(_947)).length?_948[0]:null;var _947,_948},getRoots:function(jq){return _949(jq[0])},getParent:function(jq,id){return _928(jq[0],id)},getChildren:function(jq,id){return _90a(jq[0],id)},getLevel:function(jq,id){return _952=jq[0],_953=id,(opts=$.data(_952,"treegrid").options).finder.getTr(_952,_953).children('td[field="'+opts.treeField+'"]').find("span.tree-indent,span.tree-hit").length;var _952,_953,opts},find:function(jq,id){return find(jq[0],id)},isLeaf:function(jq,id){return 0==$.data(jq[0],"treegrid").options.finder.getTr(jq[0],id).find("span.tree-hit").length},select:function(jq,id){return jq.each(function(){$(this).datagrid("selectRow",id)})},unselect:function(jq,id){return jq.each(function(){$(this).datagrid("unselectRow",id)})},collapse:function(jq,id){return jq.each(function(){_958(this,id)})},expand:function(jq,id){return jq.each(function(){_95b(this,id)})},toggle:function(jq,id){return jq.each(function(){_916(this,id)})},collapseAll:function(jq,id){return jq.each(function(){!function(_964,_965){var opts=$.data(_964,"treegrid").options,_966=_90a(_964,_965);_965&&_966.unshift(find(_964,_965));for(var i=0;i<_966.length;i++)_958(_964,_966[i][opts.idField])}(this,id)})},expandAll:function(jq,id){return jq.each(function(){!function(_968,_969){var opts=$.data(_968,"treegrid").options,_96a=_90a(_968,_969);_969&&_96a.unshift(find(_968,_969));for(var i=0;i<_96a.length;i++)_95b(_968,_96a[i][opts.idField])}(this,id)})},expandTo:function(jq,id){return jq.each(function(){!function(_96c,_96d){for(var opts=$.data(_96c,"treegrid").options,ids=[],p=_928(_96c,_96d);p;){var id=p[opts.idField];ids.unshift(id),p=_928(_96c,id)}for(var i=0;i<ids.length;i++)_95b(_96c,ids[i])}(this,id)})},append:function(jq,_993){return jq.each(function(){_96e(this,_993)})},insert:function(jq,_994){return jq.each(function(){!function(_974,_975){var ref=_975.before||_975.after,opts=$.data(_974,"treegrid").options,_976=_928(_974,ref);_96e(_974,{parent:_976?_976[opts.idField]:null,data:[_975.data]});for(var _977=_976?_976.children:$(_974).treegrid("getRoots"),i=0;i<_977.length;i++)if(_977[i][opts.idField]==ref){var _978=_977[_977.length-1];_977.splice(_975.before?i:i+1,0,_978),_977.splice(_977.length-1,1);break}function _979(_97a){var sub,_97b=_97a?1:2,_97c=(tr=opts.finder.getTr(_974,_975.data[opts.idField],"body",_97b)).closest("table.datagrid-btable"),tr=tr.parent().children(),dest=opts.finder.getTr(_974,ref,"body",_97b);_975.before?tr.insertBefore(dest):(sub=dest.next("tr.treegrid-tr-tree"),tr.insertAfter(sub.length?sub:dest)),_97c.remove()}_979(!0),_979(!1),_90e(_974),$(_974).treegrid("showLines")}(this,_994)})},remove:function(jq,id){return jq.each(function(){var _97e,_97f,_980,opts,prow;_97e=this,_97f=id,_980=$.data(_97e,"treegrid"),opts=_980.options,prow=_928(_97e,_97f),$(_97e).datagrid("deleteRow",_97f),$.easyui.removeArrayItem(_980.checkedRows,opts.idField,_97f),_90e(_97e),prow&&_92a(_97e,prow[opts.idField]),--_980.total,$(_97e).datagrid("getPager").pagination("refresh",{total:_980.total}),$(_97e).treegrid("showLines")})},pop:function(jq,id){var row=jq.treegrid("find",id);return jq.treegrid("remove",id),row},refresh:function(jq,id){return jq.each(function(){var opts=$.data(this,"treegrid").options;opts.view.refreshRow.call(opts.view,this,id)})},update:function(jq,_995){return jq.each(function(){var opts=$.data(this,"treegrid").options,row=_995.row;opts.view.updateRow.call(opts.view,this,_995.id,row),null!=row.checked&&(row=find(this,_995.id),$.extend(row,{checkState:row.checked?"checked":!1===row.checked?"unchecked":void 0}),_92a(this,_995.id))})},beginEdit:function(jq,id){return jq.each(function(){$(this).datagrid("beginEdit",id),$(this).treegrid("fixRowHeight",id)})},endEdit:function(jq,id){return jq.each(function(){$(this).datagrid("endEdit",id)})},cancelEdit:function(jq,id){return jq.each(function(){$(this).datagrid("cancelEdit",id)})},showLines:function(jq){return jq.each(function(){_981(this)})},setSelectionState:function(jq){return jq.each(function(){$(this).datagrid("setSelectionState");for(var _996=$(this).data("treegrid"),i=0;i<_996.tmpIds.length;i++)_917(this,_996.tmpIds[i],!0,!0);_996.tmpIds=[]})},getCheckedNodes:function(jq,_997){_997=_997||"checked";var rows=[];return $.easyui.forEach(jq.data("treegrid").checkedRows,!1,function(row){row.checkState==_997&&rows.push(row)}),rows},checkNode:function(jq,id){return jq.each(function(){_917(this,id,!0)})},uncheckNode:function(jq,id){return jq.each(function(){_917(this,id,!1)})},clearChecked:function(jq){return jq.each(function(){var _998=this,opts=$(_998).treegrid("options");$(_998).datagrid("clearChecked"),$.map($(_998).treegrid("getCheckedNodes"),function(row){_917(_998,row[opts.idField],!1,!0)})})}},$.fn.treegrid.parseOptions=function(_999){return $.extend({},$.fn.datagrid.parseOptions(_999),$.parser.parseOptions(_999,["treeField",{checkbox:"boolean",cascadeCheck:"boolean",onlyLeafCheck:"boolean"},{animate:"boolean"}]))};var _99a=$.extend({},$.fn.datagrid.defaults.view,{render:function(_99b,_99c,_99d){var view,_9a0,opts=$.data(_99b,"treegrid").options,_99e=$(_99b).datagrid("getColumnFields",_99d),_99f=$.data(_99b,"datagrid").rowIdPrefix;function _9a1(_9a2,_9a3,_9a4){for(var _9a5=$(_99b).treegrid("getParent",_9a4[0][opts.idField]),_9a6=(_9a5?_9a5.children.length:$(_99b).treegrid("getRoots").length)-_9a4.length,_9a7=['<table class="datagrid-btable" cellspacing="0" cellpadding="0" border="0"><tbody>'],i=0;i<_9a4.length;i++){var row=_9a4[i];"open"!=row.state&&"closed"!=row.state&&(row.state="open");var tt,v,css=opts.rowStyler?opts.rowStyler.call(_99b,row):"",cs=this.getStyleValue(css),cls='class="datagrid-row '+(_9a6++%2&&opts.striped?"datagrid-row-alt ":" ")+cs.c+'"',_9a8=cs.s?'style="'+cs.s+'"':"",_9a9=_99f+"-"+(_9a2?1:2)+"-"+row[opts.idField];_9a7.push('<tr id="'+_9a9+'" node-id="'+row[opts.idField]+'" '+cls+" "+_9a8+">"),(_9a7=_9a7.concat(view.renderRow.call(view,_99b,_99e,_9a2,_9a3,row))).push("</tr>"),row.children&&row.children.length&&(tt=_9a1.call(this,_9a2,_9a3+1,row.children),v="closed"==row.state?"none":"block",_9a7.push('<tr class="treegrid-tr-tree"><td style="border:0px" colspan='+(_99e.length+(opts.rownumbers?1:0))+'><div style="display:'+v+'">'),(_9a7=_9a7.concat(tt)).push("</div></td></tr>"))}return _9a7.push("</tbody></table>"),_9a7}!(!_99d||opts.rownumbers||opts.frozenColumns&&opts.frozenColumns.length)||(view=this).treeNodes&&this.treeNodes.length&&(_9a0=_9a1.call(this,_99d,this.treeLevel,this.treeNodes),$(_99c).append(_9a0.join("")))},renderFooter:function(_9aa,_9ab,_9ac){for(var opts=$.data(_9aa,"treegrid").options,rows=$.data(_9aa,"treegrid").footer||[],_9ad=$(_9aa).datagrid("getColumnFields",_9ac),_9ae=['<table class="datagrid-ftable" cellspacing="0" cellpadding="0" border="0"><tbody>'],i=0;i<rows.length;i++){var row=rows[i];row[opts.idField]=row[opts.idField]||"foot-row-id"+i,_9ae.push('<tr class="datagrid-row" node-id="'+row[opts.idField]+'">'),_9ae.push(this.renderRow.call(this,_9aa,_9ad,_9ac,0,row)),_9ae.push("</tr>")}_9ae.push("</tbody></table>"),$(_9ab).html(_9ae.join(""))},renderRow:function(_9af,_9b0,_9b1,_9b2,row){var _9b3=$.data(_9af,"treegrid"),opts=_9b3.options,cc=[];_9b1&&opts.rownumbers&&cc.push('<td class="datagrid-td-rownumber"><div class="datagrid-cell-rownumber">0</div></td>');for(var i=0;i<_9b0.length;i++){var _9b4=_9b0[i],col=$(_9af).datagrid("getColumnOption",_9b4);if(col){var css=col.styler&&col.styler(row[_9b4],row)||"",cs=this.getStyleValue(css),cls=cs.c?'class="'+cs.c+'"':"",_9b5=col.hidden?'style="display:none;'+cs.s+'"':cs.s?'style="'+cs.s+'"':"";cc.push('<td field="'+_9b4+'" '+cls+" "+_9b5+">");_9b5="";if(col.checkbox||(col.align&&(_9b5+="text-align:"+col.align+";"),opts.nowrap?opts.autoRowHeight&&(_9b5+="height:auto;"):_9b5+="white-space:normal;height:auto;"),cc.push('<div style="'+_9b5+'" '),col.checkbox?cc.push('class="datagrid-cell-check '):cc.push('class="datagrid-cell '+col.cellClass),cc.push('">'),col.checkbox)row.checked?cc.push('<input type="checkbox" checked="checked"'):cc.push('<input type="checkbox"'),cc.push(' name="'+_9b4+'" value="'+(null!=row[_9b4]?row[_9b4]:"")+'">');else{var val=null,val=col.formatter?col.formatter(row[_9b4],row):row[_9b4];if(_9b4==opts.treeField){for(var flag,crow,prow,j=0;j<_9b2;j++)cc.push('<span class="tree-indent"></span>');"closed"==row.state?(cc.push('<span class="tree-hit tree-collapsed"></span>'),cc.push('<span class="tree-icon tree-folder '+(row.iconCls?row.iconCls:"")+'"></span>')):row.children&&row.children.length?(cc.push('<span class="tree-hit tree-expanded"></span>'),cc.push('<span class="tree-icon tree-folder tree-folder-open '+(row.iconCls?row.iconCls:"")+'"></span>')):(cc.push('<span class="tree-indent"></span>'),cc.push('<span class="tree-icon tree-file '+(row.iconCls?row.iconCls:"")+'"></span>')),this.hasCheckbox(_9af,row)?(flag=0,(crow=$.easyui.getArrayItem(_9b3.checkedRows,opts.idField,row[opts.idField]))?(flag="checked"==crow.checkState?1:2,row.checkState=crow.checkState,row.checked=crow.checked,$.easyui.addArrayItem(_9b3.checkedRows,opts.idField,row)):((prow=$.easyui.getArrayItem(_9b3.checkedRows,opts.idField,row._parentId))&&"checked"==prow.checkState&&opts.cascadeCheck?(flag=1,row.checked=!0,$.easyui.addArrayItem(_9b3.checkedRows,opts.idField,row)):row.checked&&$.easyui.addArrayItem(_9b3.tmpIds,row[opts.idField]),row.checkState=flag?"checked":"unchecked"),cc.push('<span class="tree-checkbox tree-checkbox'+flag+'"></span>')):(row.checkState=void 0,row.checked=void 0),cc.push('<span class="tree-title">'+val+"</span>")}else cc.push(val)}cc.push("</div>"),cc.push("</td>")}}return cc.join("")},hasCheckbox:function(_9b6,row){var opts=$.data(_9b6,"treegrid").options;if(opts.checkbox){if($.isFunction(opts.checkbox))return!!opts.checkbox.call(_9b6,row);if(!opts.onlyLeafCheck)return!0;if(!("open"!=row.state||row.children&&row.children.length))return!0}return!1},refreshRow:function(_9b7,id){this.updateRow.call(this,_9b7,id,{})},updateRow:function(_9b8,id,row){var opts=$.data(_9b8,"treegrid").options,_9b9=$(_9b8).treegrid("find",id);$.extend(_9b9,row);var _9ba=$(_9b8).treegrid("getLevel",id)-1,_9bb=opts.rowStyler?opts.rowStyler.call(_9b8,_9b9):"",_9bc=$.data(_9b8,"datagrid").rowIdPrefix,_9bd=_9b9[opts.idField];function _9be(_9bf){var _9c0=$(_9b8).treegrid("getColumnFields",_9bf),tr=opts.finder.getTr(_9b8,id,"body",_9bf?1:2),_9c1=tr.find("div.datagrid-cell-rownumber").html(),_9c2=tr.find("div.datagrid-cell-check input[type=checkbox]").is(":checked");tr.html(this.renderRow(_9b8,_9c0,_9bf,_9ba,_9b9)),tr.attr("style",_9bb||""),tr.find("div.datagrid-cell-rownumber").html(_9c1),_9c2&&tr.find("div.datagrid-cell-check input[type=checkbox]")._propAttr("checked",!0),_9bd!=id&&(tr.attr("id",_9bc+"-"+(_9bf?1:2)+"-"+_9bd),tr.attr("node-id",_9bd))}_9be.call(this,!0),_9be.call(this,!1),$(_9b8).treegrid("fixRowHeight",id)},deleteRow:function(_9c3,id){var opts=$.data(_9c3,"treegrid").options,tr=opts.finder.getTr(_9c3,id);tr.next("tr.treegrid-tr-tree").remove(),tr.remove();var cell,_9c4=function(id){var cc,_9c5=$(_9c3).treegrid("getParent",id);cc=_9c5?_9c5.children:$(_9c3).treegrid("getData");for(var i=0;i<cc.length;i++)if(cc[i][opts.idField]==id){cc.splice(i,1);break}return _9c5}(id);_9c4&&0==_9c4.children.length&&((tr=opts.finder.getTr(_9c3,_9c4[opts.idField])).next("tr.treegrid-tr-tree").remove(),(cell=tr.children('td[field="'+opts.treeField+'"]').children("div.datagrid-cell")).find(".tree-icon").removeClass("tree-folder").addClass("tree-file"),cell.find(".tree-hit").remove(),$('<span class="tree-indent"></span>').prependTo(cell)),this.setEmptyMsg(_9c3)},onBeforeRender:function(_9c6,_9c7,data){if($.isArray(_9c7)&&(data={total:_9c7.length,rows:_9c7},_9c7=null),!data)return!1;var _9c8=$.data(_9c6,"treegrid"),opts=_9c8.options;null==data.length?(data.footer&&(_9c8.footer=data.footer),data.total&&(_9c8.total=data.total),data=this.transfer(_9c6,_9c7,data.rows)):function _9c9(_9ca,_9cb){for(var i=0;i<_9ca.length;i++){var row=_9ca[i];row._parentId=_9cb,row.children&&row.children.length&&_9c9(row.children,row[opts.idField])}}(data,_9c7),this.sort(_9c6,data),this.treeNodes=data,this.treeLevel=$(_9c6).treegrid("getLevel",_9c7);var node=find(_9c6,_9c7);node?node.children?node.children=node.children.concat(data):node.children=data:_9c8.data=_9c8.data.concat(data)},sort:function(_9cc,data){var _9cd,_9ce,opts=$.data(_9cc,"treegrid").options;!opts.remoteSort&&opts.sortName&&(_9cd=opts.sortName.split(","),_9ce=opts.sortOrder.split(","),function _9cf(rows){rows.sort(function(r1,r2){for(var r=0,i=0;i<_9cd.length;i++){var sn=_9cd[i],so=_9ce[i],col=$(_9cc).treegrid("getColumnOption",sn),_9d0=col.sorter||function(a,b){return a==b?0:b<a?1:-1};if(0!=(r=_9d0(r1[sn],r2[sn])*("asc"==so?1:-1)))return r}return r});for(var i=0;i<rows.length;i++){var _9d1=rows[i].children;_9d1&&_9d1.length&&_9cf(_9d1)}}(data))},transfer:function(_9d2,_9d3,data){for(var opts=$.data(_9d2,"treegrid").options,rows=$.extend([],data),_9d4=_9d5(_9d3,rows),toDo=$.extend([],_9d4);toDo.length;){var node=toDo.shift(),_9d6=_9d5(node[opts.idField],rows);_9d6.length&&(node.children?node.children=node.children.concat(_9d6):node.children=_9d6,toDo=toDo.concat(_9d6))}return _9d4;function _9d5(_9d7,rows){for(var rr=[],i=0;i<rows.length;i++){var row=rows[i];row._parentId==_9d7&&(rr.push(row),rows.splice(i,1),i--)}return rr}}});$.fn.treegrid.defaults=$.extend({},$.fn.datagrid.defaults,{treeField:null,checkbox:!1,cascadeCheck:!0,onlyLeafCheck:!1,lines:!1,animate:!1,singleSelect:!0,view:_99a,rowEvents:$.extend({},$.fn.datagrid.defaults.rowEvents,{mouseover:_910(!0),mouseout:_910(!1),click:function(e){var tt=$(e.target),tr=tt.closest("tr.datagrid-row");if(tr.length&&tr.parent().length){var _913=tr.attr("node-id"),_914=$(tr).closest("div.datagrid-view").children(".datagrid-f")[0];if(tt.hasClass("tree-hit"))_916(_914,_913);else if(tt.hasClass("tree-checkbox"))_917(_914,_913);else{var opts=$(_914).datagrid("options");if(tt.parent().hasClass("datagrid-cell-check")||opts.singleSelect||!e.shiftKey)$.fn.datagrid.defaults.rowEvents.click(e);else{var _918,rows=$(_914).treegrid("getChildren"),idx1=$.easyui.indexOfArray(rows,opts.idField,opts.lastSelectedIndex),idx2=$.easyui.indexOfArray(rows,opts.idField,_913),from=Math.min(Math.max(idx1,0),idx2),to=Math.max(idx1,idx2),row=rows[idx2],td=tt.closest("td[field]",tr);td.length&&(_918=td.attr("field"),opts.onClickCell.call(_914,_913,_918,row[_918])),$(_914).treegrid("clearSelections");for(var i=from;i<=to;i++)$(_914).treegrid("selectRow",rows[i][opts.idField]);opts.onClickRow.call(_914,row)}}}}}),loader:function(_9d8,_9d9,_9da){var opts=$(this).treegrid("options");if(!opts.url)return!1;$.ajax({type:opts.method,url:opts.url,data:_9d8,dataType:"json",success:function(data){_9d9(data)},error:function(){_9da.apply(this,arguments)}})},loadFilter:function(data,_9db){return data},finder:{getTr:function(_9dc,id,type,_9dd){type=type||"body",_9dd=_9dd||0;var dc=$.data(_9dc,"datagrid").dc;if(0==_9dd){var opts=$.data(_9dc,"treegrid").options,tr1=opts.finder.getTr(_9dc,id,type,1),tr2=opts.finder.getTr(_9dc,id,type,2);return tr1.add(tr2)}if("body"!=type)return"footer"==type?(1==_9dd?dc.footer1:dc.footer2).find('tr[node-id="'+id+'"]'):"selected"==type?(1==_9dd?dc.body1:dc.body2).find("tr.datagrid-row-selected"):"highlight"==type?(1==_9dd?dc.body1:dc.body2).find("tr.datagrid-row-over"):"checked"==type?(1==_9dd?dc.body1:dc.body2).find("tr.datagrid-row-checked"):"last"==type?(1==_9dd?dc.body1:dc.body2).find("tr:last[node-id]"):"allbody"==type?(1==_9dd?dc.body1:dc.body2).find("tr[node-id]"):"allfooter"==type?(1==_9dd?dc.footer1:dc.footer2).find("tr[node-id]"):void 0;var tr=$("#"+$.data(_9dc,"datagrid").rowIdPrefix+"-"+_9dd+"-"+id);return tr.length||(tr=(1==_9dd?dc.body1:dc.body2).find('tr[node-id="'+id+'"]')),tr},getRow:function(_9de,p){var id="object"==typeof p?p.attr("node-id"):p;return $(_9de).treegrid("find",id)},getRows:function(_9df){return $(_9df).treegrid("getChildren")}},onBeforeLoad:function(row,_9e0){},onLoadSuccess:function(row,data){},onLoadError:function(){},onBeforeCollapse:function(row){},onCollapse:function(row){},onBeforeExpand:function(row){},onExpand:function(row){},onClickRow:function(row){},onDblClickRow:function(row){},onClickCell:function(_9e1,row){},onDblClickCell:function(_9e2,row){},onContextMenu:function(e,row){},onBeforeEdit:function(row){},onAfterEdit:function(row,_9e3){},onCancelEdit:function(row){},onBeforeCheckNode:function(row,_9e4){},onCheckNode:function(row,_9e5){}})}($$),function($){var _9ea=$.extend({},$.fn.datagrid.defaults.view,{render:function(_9eb,_9ec,_9ed){var _9ee=$.data(_9eb,"datagrid");if(_9ee.options.groupField){var g=this.groupRows(_9eb,_9ee.data.rows);this.groups=g.groups,_9ee.data.rows=g.rows;for(var _9ef=[],i=0;i<g.groups.length;i++)_9ef.push(this.renderGroup.call(this,_9eb,i,g.groups[i],_9ed));$(_9ec).html(_9ef.join(""))}else $(_9ec).html(this.renderTable(_9eb,0,_9ee.data.rows,_9ed))},renderGroup:function(_9f0,_9f1,_9f2,_9f3){var opts=$.data(_9f0,"datagrid").options,_9f6=($(_9f0).datagrid("getColumnFields",_9f3),[]);return _9f6.push('<div class="datagrid-group" group-index='+_9f1+">"),_9f3||(_9f6.push('<span class="datagrid-group-title">'),_9f6.push(opts.groupFormatter.call(_9f0,_9f2.value,_9f2.rows)),_9f6.push("</span>")),_9f6.push("</div>"),_9f6.push(this.renderTable(_9f0,_9f2.startIndex,_9f2.rows,_9f3)),_9f6.join("")},groupRows:function(_9f7,rows){for(var opts=$.data(_9f7,"datagrid").options,_9f9=[],i=0;i<rows.length;i++){var row=rows[i];(_9fa=function(_9fd){for(var i=0;i<_9f9.length;i++){var _9fe=_9f9[i];if(_9fe.value==_9fd)return _9fe}return null}(row[opts.groupField]))?_9fa.rows.push(row):(_9fa={value:row[opts.groupField],rows:[row]},_9f9.push(_9fa))}for(var _9fa,_9fc=0,rows=[],i=0;i<_9f9.length;i++){(_9fa=_9f9[i]).startIndex=_9fc,_9fc+=_9fa.rows.length,rows=rows.concat(_9fa.rows)}return{groups:_9f9,rows:rows}}});$.fn.datalist=function(_9ff,_a00){if("string"!=typeof _9ff)return _9ff=_9ff||{},this.each(function(){var opts,data,_a02=$.data(this,"datalist");_a02?$.extend(_a02.options,_9ff):((opts=$.extend({},$.fn.datalist.defaults,$.fn.datalist.parseOptions(this),_9ff)).columns=$.extend(!0,[],opts.columns),_a02=$.data(this,"datalist",{options:opts})),function(_9e7){var opts=$.data(_9e7,"datalist").options;$(_9e7).datagrid($.extend({},opts,{cls:"datalist"+(opts.lines?" datalist-lines":""),frozenColumns:opts.frozenColumns&&opts.frozenColumns.length?opts.frozenColumns:opts.checkbox?[[{field:"_ck",checkbox:!0}]]:void 0,columns:opts.columns&&opts.columns.length?opts.columns:[[{field:opts.textField,width:"100%",formatter:function(_9e8,row,_9e9){return opts.textFormatter?opts.textFormatter(_9e8,row,_9e9):_9e8}}]]}))}(this),_a02.options.data||(data=$.fn.datalist.parseData(this)).total&&$(this).datalist("loadData",data)});var _a01=$.fn.datalist.methods[_9ff];return _a01?_a01(this,_a00):this.datagrid(_9ff,_a00)},$.fn.datalist.methods={options:function(jq){return $.data(jq[0],"datalist").options}},$.fn.datalist.parseOptions=function(_a03){return $.extend({},$.fn.datagrid.parseOptions(_a03),$.parser.parseOptions(_a03,["valueField","textField","groupField",{checkbox:"boolean",lines:"boolean"}]))},$.fn.datalist.parseData=function(_a04){var opts=$.data(_a04,"datalist").options,data={total:0,rows:[]};return $(_a04).children().each(function(){var _a05=$.parser.parseOptions(this,["value","group"]),row={},html=$(this).html();row[opts.valueField]=null!=_a05.value?_a05.value:html,row[opts.textField]=html,opts.groupField&&(row[opts.groupField]=_a05.group),data.total++,data.rows.push(row)}),data},$.fn.datalist.defaults=$.extend({},$.fn.datagrid.defaults,{fitColumns:!0,singleSelect:!0,showHeader:!1,checkbox:!1,lines:!1,valueField:"value",textField:"text",groupField:"",view:_9ea,textFormatter:function(_a06,row){return _a06},groupFormatter:function(_a07,rows){return _a07}})}($$),function($){function _a14(_a15){var _a17,p,_a16=$.data(_a15,"combo").panel;_a16.is(":visible")?(_a18(_a17=_a16.combo("combo")),_a17!=_a15&&$(_a15).combo("showPanel")):(p=$(_a15).closest("div.combo-p").children(".combo-panel"),$("div.combo-panel:visible").not(_a16).not(p).panel("close"),$(_a15).combo("showPanel")),$(_a15).combo("textbox").focus()}function _a08(_a19){$(_a19).find(".combo-f").each(function(){var p=$(this).combo("panel");p.is(":visible")&&p.panel("close")})}function _a1e(e){var _a1f=e.data.target,t=$(_a1f),_a20=t.data("combo"),opts=t.combo("options");switch(_a20.panel.panel("options").comboTarget=_a1f,e.keyCode){case 38:opts.keyHandler.up.call(_a1f,e);break;case 40:opts.keyHandler.down.call(_a1f,e);break;case 37:opts.keyHandler.left.call(_a1f,e);break;case 39:opts.keyHandler.right.call(_a1f,e);break;case 13:return e.preventDefault(),opts.keyHandler.enter.call(_a1f,e),!1;case 9:case 27:_a18(_a1f);break;default:opts.editable&&(_a20.timer&&clearTimeout(_a20.timer),_a20.timer=setTimeout(function(){var q=t.combo("getText");_a20.previousText!=q&&(_a20.previousText=q,t.combo("showPanel"),opts.keyHandler.query.call(_a1f,q,e),t.combo("validate"))},opts.delay))}}function _a21(_a22){var _a23=$.data(_a22,"combo"),_a24=_a23.combo,_a25=_a23.panel,opts=$(_a22).combo("options"),_a26=_a25.panel("options");_a26.comboTarget=_a22,_a26.closed&&(_a25.panel("panel").show().css({zIndex:$.fn.menu?$.fn.menu.defaults.zIndex++:$.fn.window?$.fn.window.defaults.zIndex++:99,left:-999999}),_a25.panel("resize",{width:opts.panelWidth?opts.panelWidth:_a24._outerWidth(),height:opts.panelHeight}),_a25.panel("panel").hide(),_a25.panel("open")),function(){_a26.comboTarget==_a22&&_a25.is(":visible")&&(_a25.panel("move",{left:function(){var left=_a24.offset().left;"right"==opts.panelAlign&&(left+=_a24._outerWidth()-_a25._outerWidth());left+_a25._outerWidth()>$(window)._outerWidth()+$(document).scrollLeft()&&(left=$(window)._outerWidth()+$(document).scrollLeft()-_a25._outerWidth());left<0&&(left=0);return left}(),top:function(){var top=_a24.offset().top+_a24._outerHeight();top+_a25._outerHeight()>$(window)._outerHeight()+$(document).scrollTop()&&(top=_a24.offset().top-_a25._outerHeight());top<$(document).scrollTop()&&(top=_a24.offset().top+_a24._outerHeight());return top}()}),setTimeout(arguments.callee,200))}()}function _a18(_a29){$.data(_a29,"combo").panel.panel("close")}function _a2f(_a30){var opts=$.data(_a30,"combo").options,_a32=$(_a30).next(),_a33=[];return _a32.find(".textbox-value").each(function(){_a33.push($(this).val())}),!opts.multivalue&&_a33.length?_a33[0].split(opts.separator):_a33}function _a34(_a35,_a36){var _a38=$.data(_a35,"combo").combo,opts=$(_a35).combo("options");$.isArray(_a36)||(_a36=_a36.split(opts.separator));var _a39=_a2f(_a35);if(_a38.find(".textbox-value").remove(),_a36.length)if(opts.multivalue)for(var i=0;i<_a36.length;i++)_a3a(_a36[i]);else _a3a(_a36.join(opts.separator));function _a3a(_a3b){var name=$(_a35).attr("textboxName")||"",_a3c=$('<input type="hidden" class="textbox-value">').appendTo(_a38);_a3c.attr("name",name),opts.disabled&&_a3c.attr("disabled","disabled"),_a3c.val(_a3b)}!function(){if(_a39.length!=_a36.length)return!0;for(var i=0;i<_a36.length;i++)if(_a36[i]!=_a39[i])return!0;return!1}()||($(_a35).val(_a36.join(opts.separator)),opts.multiple?opts.onChange.call(_a35,_a36,_a39):opts.onChange.call(_a35,_a36[0],_a39[0]),$(_a35).closest("form").trigger("_change",[_a35]))}function _a41(_a42,_a43){_a34(_a42,[_a43])}$(function(){$(document).unbind(".combo").bind("mousedown.combo mousewheel.combo",function(e){var p=$(e.target).closest("span.combo,div.combo-p,div.menu");p.length?_a08(p):$("body>div.combo-p>div.combo-panel:visible").panel("close")})}),$.fn.combo=function(_a47,_a48){if("string"!=typeof _a47)return _a47=_a47||{},this.each(function(){var _a45,opts,_a46,_a4a=$.data(this,"combo");_a4a?($.extend(_a4a.options,_a47),null!=_a47.value&&(_a4a.options.originalValue=_a47.value)):(_a4a=$.data(this,"combo",{options:$.extend({},$.fn.combo.defaults,$.fn.combo.parseOptions(this),_a47),previousText:""})).options.originalValue=_a4a.options.value,function(_a0a){var _a0b=$.data(_a0a,"combo"),opts=_a0b.options;_a0b.panel||(_a0b.panel=$('<div class="combo-panel"></div>').appendTo("body"),_a0b.panel.panel({minWidth:opts.panelMinWidth,maxWidth:opts.panelMaxWidth,minHeight:opts.panelMinHeight,maxHeight:opts.panelMaxHeight,doSize:!1,closed:!0,cls:"combo-p",style:{position:"absolute",zIndex:10},onOpen:function(){var _a0c=$(this).panel("options").comboTarget,_a0d=$.data(_a0c,"combo");_a0d&&_a0d.options.onShowPanel.call(_a0c)},onBeforeClose:function(){_a08($(this).parent())},onClose:function(){var _a0e=$(this).panel("options").comboTarget,_a0f=$(_a0e).data("combo");_a0f&&_a0f.options.onHidePanel.call(_a0e)}}));var _a10=$.extend(!0,[],opts.icons);opts.hasDownArrow&&_a10.push({iconCls:"combo-arrow",handler:function(e){_a14(e.data.target)}}),$(_a0a).addClass("combo-f").textbox($.extend({},opts,{icons:_a10,onChange:function(){}})),$(_a0a).attr("comboName",$(_a0a).attr("textboxName")),_a0b.combo=$(_a0a).next(),_a0b.combo.addClass("combo")}(this),_a45=this,opts=$.data(_a45,"combo").options,_a46=opts.onChange,opts.onChange=function(){},opts.multiple?_a34(_a45,opts.value?opts.value:[]):_a41(_a45,opts.value),opts.onChange=_a46});var _a49=$.fn.combo.methods[_a47];return _a49?_a49(this,_a48):this.textbox(_a47,_a48)},$.fn.combo.methods={options:function(jq){var opts=jq.textbox("options");return $.extend($.data(jq[0],"combo").options,{width:opts.width,height:opts.height,disabled:opts.disabled,readonly:opts.readonly})},cloneFrom:function(jq,from){return jq.each(function(){$(this).textbox("cloneFrom",from),$.data(this,"combo",{options:$.extend(!0,{cloned:!0},$(from).combo("options")),combo:$(this).next(),panel:$(from).combo("panel")}),$(this).addClass("combo-f").attr("comboName",$(this).attr("textboxName"))})},combo:function(jq){return jq.closest(".combo-panel").panel("options").comboTarget},panel:function(jq){return $.data(jq[0],"combo").panel},destroy:function(jq){return jq.each(function(){var _a12,_a13,opts,p;_a12=this,_a13=$.data(_a12,"combo"),opts=_a13.options,(p=_a13.panel).is(":visible")&&p.panel("close"),opts.cloned||p.panel("destroy"),$(_a12).textbox("destroy")})},showPanel:function(jq){return jq.each(function(){_a21(this)})},hidePanel:function(jq){return jq.each(function(){_a18(this)})},clear:function(jq){return jq.each(function(){$(this).textbox("setText",""),$.data(this,"combo").options.multiple?$(this).combo("setValues",[]):$(this).combo("setValue","")})},reset:function(jq){return jq.each(function(){var opts=$.data(this,"combo").options;opts.multiple?$(this).combo("setValues",opts.originalValue):$(this).combo("setValue",opts.originalValue)})},setText:function(jq,text){return jq.each(function(){!function(_a2c,text){var _a2d=$.data(_a2c,"combo");$(_a2c).textbox("getText")!=text&&$(_a2c).textbox("setText",text),_a2d.previousText=text}(this,text)})},getValues:function(jq){return _a2f(jq[0])},setValues:function(jq,_a4b){return jq.each(function(){_a34(this,_a4b)})},getValue:function(jq){return _a2f(jq[0])[0]},setValue:function(jq,_a4c){return jq.each(function(){_a41(this,_a4c)})}},$.fn.combo.parseOptions=function(_a4d){var t=$(_a4d);return $.extend({},$.fn.textbox.parseOptions(_a4d),$.parser.parseOptions(_a4d,["separator","panelAlign",{panelWidth:"number",hasDownArrow:"boolean",delay:"number",reversed:"boolean",multivalue:"boolean",selectOnNavigation:"boolean"},{panelMinWidth:"number",panelMaxWidth:"number",panelMinHeight:"number",panelMaxHeight:"number"}]),{panelHeight:"auto"==t.attr("panelHeight")?"auto":parseInt(t.attr("panelHeight"))||void 0,multiple:!!t.attr("multiple")||void 0})},$.fn.combo.defaults=$.extend({},$.fn.textbox.defaults,{inputEvents:{click:function(e){var p,_a1b=e.data.target;$.data(_a1b,"combo").options.editable?(p=$(_a1b).closest("div.combo-p").children(".combo-panel"),$("div.combo-panel:visible").not(p).each(function(){var _a1d=$(this).combo("combo");_a1d!=_a1b&&_a18(_a1d)})):_a14(_a1b)},keydown:_a1e,paste:_a1e,drop:_a1e},panelWidth:null,panelHeight:200,panelMinWidth:null,panelMaxWidth:null,panelMinHeight:null,panelMaxHeight:null,panelAlign:"left",reversed:!1,multiple:!1,multivalue:!0,selectOnNavigation:!0,separator:",",hasDownArrow:!0,delay:200,keyHandler:{up:function(e){},down:function(e){},left:function(e){},right:function(e){},enter:function(e){},query:function(q,e){}},onShowPanel:function(){},onHidePanel:function(){},onChange:function(_a4e,_a4f){}})}($$),function($){function _a50(_a51,_a52){var _a53=$.data(_a51,"combobox");return $.easyui.indexOfArray(_a53.data,_a53.options.valueField,_a52)}function nav(_a58,dir){var opts=$.data(_a58,"combobox").options,_a59=$(_a58).combobox("panel"),item=_a59.children("div.combobox-item-hover");item.length||(item=_a59.children("div.combobox-item-selected")),item.removeClass("combobox-item-hover");var row,_a5a="div.combobox-item:visible:not(.combobox-item-disabled):first",_a5b="div.combobox-item:visible:not(.combobox-item-disabled):last";item.length?"next"==dir?(item=item.nextAll(_a5a)).length||(item=_a59.children(_a5a)):(item=item.prevAll(_a5a)).length||(item=_a59.children(_a5b)):item=_a59.children("next"==dir?_a5a:_a5b),item.length&&(item.addClass("combobox-item-hover"),(row=opts.finder.getRow(_a58,item))&&($(_a58).combobox("scrollTo",row[opts.valueField]),opts.selectOnNavigation&&_a5c(_a58,row[opts.valueField])))}function _a5c(_a5d,_a5e,_a5f){var opts=$.data(_a5d,"combobox").options,_a60=$(_a5d).combo("getValues");-1==$.inArray(_a5e+"",_a60)&&(opts.multiple?_a60.push(_a5e):_a60=[_a5e],_a61(_a5d,_a60,_a5f))}function _a62(_a63,_a64){$.data(_a63,"combobox").options;var _a65=$(_a63).combo("getValues"),_a66=$.inArray(_a64+"",_a65);0<=_a66&&(_a65.splice(_a66,1),_a61(_a63,_a65))}function _a61(_a67,_a68,_a69){var opts=$.data(_a67,"combobox").options,_a6a=$(_a67).combo("panel");$.isArray(_a68)||(_a68=_a68.split(opts.separator)),opts.multiple||(_a68=_a68.length?[_a68[0]]:[""]);var _a6b=$(_a67).combo("getValues");_a6a.is(":visible")&&_a6a.find(".combobox-item-selected").each(function(){var row=opts.finder.getRow(_a67,$(this));row&&-1==$.easyui.indexOfArray(_a6b,row[opts.valueField])&&$(this).removeClass("combobox-item-selected")}),$.map(_a6b,function(v){var el;-1!=$.easyui.indexOfArray(_a68,v)||(el=opts.finder.getEl(_a67,v)).hasClass("combobox-item-selected")&&(el.removeClass("combobox-item-selected"),opts.onUnselect.call(_a67,opts.finder.getRow(_a67,v)))});for(var tb,_a6c=null,vv=[],ss=[],i=0;i<_a68.length;i++){var el,v=_a68[i],s=v,row=opts.finder.getRow(_a67,v);row&&(s=row[opts.textField],_a6c=row,(el=opts.finder.getEl(_a67,v)).hasClass("combobox-item-selected")||(el.addClass("combobox-item-selected"),opts.onSelect.call(_a67,row))),vv.push(v),ss.push(s)}_a69||$(_a67).combo("setText",ss.join(opts.separator)),opts.showItemIcon&&((tb=$(_a67).combobox("textbox")).removeClass("textbox-bgicon "+opts.textboxIconCls),_a6c&&_a6c.iconCls&&(tb.addClass("textbox-bgicon "+_a6c.iconCls),opts.textboxIconCls=_a6c.iconCls)),$(_a67).combo("setValues",vv),_a6a.triggerHandler("scroll")}function _a6d(_a6e,data,_a6f){var _a70=$.data(_a6e,"combobox"),opts=_a70.options;_a70.data=opts.loadFilter.call(_a6e,data),opts.view.render.call(opts.view,_a6e,$(_a6e).combo("panel"),_a70.data);var vv=$(_a6e).combobox("getValues");$.easyui.forEach(_a70.data,!1,function(row){row.selected&&$.easyui.addArrayItem(vv,row[opts.valueField]+"")}),opts.multiple?_a61(_a6e,vv,_a6f):_a61(_a6e,vv.length?[vv[vv.length-1]]:[],_a6f),opts.onLoadSuccess.call(_a6e,data)}function _a71(_a72,url,_a73,_a74){var opts=$.data(_a72,"combobox").options;url&&(opts.url=url),_a73=$.extend({},opts.queryParams,_a73||{}),0!=opts.onBeforeLoad.call(_a72,_a73)&&opts.loader.call(_a72,_a73,function(data){_a6d(_a72,data,_a74)},function(){opts.onLoadError.apply(this,arguments)})}function _a7d(_a7e){var _a80,t=$(_a7e),opts=t.combobox("options"),item=t.combobox("panel").children("div.combobox-item-hover");item.length&&(item.removeClass("combobox-item-hover"),_a80=opts.finder.getRow(_a7e,item)[opts.valueField],opts.multiple&&item.hasClass("combobox-item-selected")?t.combobox("unselect",_a80):t.combobox("select",_a80));var vv=[];$.map(t.combobox("getValues"),function(v){0<=_a50(_a7e,v)&&vv.push(v)}),t.combobox("setValues",vv),opts.multiple||t.combobox("hidePanel")}$.fn.combobox=function(_a90,_a91){if("string"!=typeof _a90)return _a90=_a90||{},this.each(function(){var data,_a93=$.data(this,"combobox");_a93?$.extend(_a93.options,_a90):_a93=$.data(this,"combobox",{options:$.extend({},$.fn.combobox.defaults,$.fn.combobox.parseOptions(this),_a90),data:[]}),function(_a82){var opts=$.data(_a82,"combobox").options;$(_a82).addClass("combobox-f"),$(_a82).combo($.extend({},opts,{onShowPanel:function(){$(this).combo("panel").find("div.combobox-item:hidden,div.combobox-group:hidden").show(),_a61(this,$(this).combobox("getValues"),!0),$(this).combobox("scrollTo",$(this).combobox("getValue")),opts.onShowPanel.call(this)}}));var _a84,p=$(_a82).combo("panel");for(_a84 in p.unbind(".combobox"),opts.panelEvents)p.bind(_a84+".combobox",{target:_a82},opts.panelEvents[_a84])}(this),_a93.options.data?_a6d(this,_a93.options.data):(data=$.fn.combobox.parseData(this)).length&&_a6d(this,data),_a71(this)});var _a92=$.fn.combobox.methods[_a90];return _a92?_a92(this,_a91):this.combo(_a90,_a91)},$.fn.combobox.methods={options:function(jq){var _a94=jq.combo("options");return $.extend($.data(jq[0],"combobox").options,{width:_a94.width,height:_a94.height,originalValue:_a94.originalValue,disabled:_a94.disabled,readonly:_a94.readonly})},cloneFrom:function(jq,from){return jq.each(function(){$(this).combo("cloneFrom",from),$.data(this,"combobox",$(from).data("combobox")),$(this).addClass("combobox-f").attr("comboboxName",$(this).attr("textboxName"))})},getData:function(jq){return $.data(jq[0],"combobox").data},setValues:function(jq,_a95){return jq.each(function(){_a61(this,_a95)})},setValue:function(jq,_a96){return jq.each(function(){_a61(this,$.isArray(_a96)?_a96:[_a96])})},clear:function(jq){return jq.each(function(){_a61(this,[])})},reset:function(jq){return jq.each(function(){var opts=$(this).combobox("options");opts.multiple?$(this).combobox("setValues",opts.originalValue):$(this).combobox("setValue",opts.originalValue)})},loadData:function(jq,data){return jq.each(function(){_a6d(this,data)})},reload:function(jq,url){return jq.each(function(){"string"==typeof url?_a71(this,url):(url&&($(this).combobox("options").queryParams=url),_a71(this))})},select:function(jq,_a97){return jq.each(function(){_a5c(this,_a97)})},unselect:function(jq,_a98){return jq.each(function(){_a62(this,_a98)})},scrollTo:function(jq,_a99){return jq.each(function(){var _a55,_a56,h,opts,_a57,item;_a55=this,_a56=_a99,opts=$.data(_a55,"combobox").options,_a57=$(_a55).combo("panel"),(item=opts.finder.getEl(_a55,_a56)).length&&(item.position().top<=0?(h=_a57.scrollTop()+item.position().top,_a57.scrollTop(h)):item.position().top+item.outerHeight()>_a57.height()&&(h=_a57.scrollTop()+item.position().top+item.outerHeight()-_a57.height(),_a57.scrollTop(h))),_a57.triggerHandler("scroll")})}},$.fn.combobox.parseOptions=function(_a9a){$(_a9a);return $.extend({},$.fn.combo.parseOptions(_a9a),$.parser.parseOptions(_a9a,["valueField","textField","groupField","groupPosition","mode","method","url",{showItemIcon:"boolean",limitToList:"boolean"}]))},$.fn.combobox.parseData=function(_a9b){var data=[],opts=$(_a9b).combobox("options");return $(_a9b).children().each(function(){var _a9c;"optgroup"==this.tagName.toLowerCase()?(_a9c=$(this).attr("label"),$(this).children().each(function(){_a9d(this,_a9c)})):_a9d(this)}),data;function _a9d(el,_a9e){var t=$(el),row={};row[opts.valueField]=null!=t.attr("value")?t.attr("value"):t.text(),row[opts.textField]=t.text(),row.selected=t.is(":selected"),row.disabled=t.is(":disabled"),_a9e&&(opts.groupField=opts.groupField||"group",row[opts.groupField]=_a9e),data.push(row)}};var _a9f=0,_aa0={render:function(_aa1,_aa2,data){var _aa3=$.data(_aa1,"combobox"),opts=_aa3.options;_a9f++,_aa3.itemIdPrefix="_easyui_combobox_i"+_a9f,_aa3.groupIdPrefix="_easyui_combobox_g"+_a9f,_aa3.groups=[];for(var dd=[],_aa4=void 0,i=0;i<data.length;i++){var row=data[i],s=(row[opts.valueField],row[opts.textField]),g=row[opts.groupField];g?_aa4!=g?(_aa4=g,_aa3.groups.push({value:g,startIndex:i,count:1}),dd.push('<div id="'+_aa3.groupIdPrefix+"_"+(_aa3.groups.length-1)+'" class="combobox-group">'),dd.push(opts.groupFormatter?opts.groupFormatter.call(_aa1,g):g),dd.push("</div>")):_aa3.groups[_aa3.groups.length-1].count++:_aa4=void 0;var cls="combobox-item"+(row.disabled?" combobox-item-disabled":"")+(g?" combobox-gitem":"");dd.push('<div id="'+_aa3.itemIdPrefix+"_"+i+'" class="'+cls+'">'),opts.showItemIcon&&row.iconCls&&dd.push('<span class="combobox-icon '+row.iconCls+'"></span>'),dd.push(opts.formatter?opts.formatter.call(_aa1,row):s),dd.push("</div>")}$(_aa2).html(dd.join(""))}};$.fn.combobox.defaults=$.extend({},$.fn.combo.defaults,{valueField:"value",textField:"text",groupPosition:"static",groupField:null,groupFormatter:function(_aa5){return _aa5},mode:"local",method:"post",url:null,data:null,queryParams:{},showItemIcon:!1,limitToList:!1,view:_aa0,keyHandler:{up:function(e){nav(this,"prev"),e.preventDefault()},down:function(e){nav(this,"next"),e.preventDefault()},left:function(e){},right:function(e){},enter:function(e){_a7d(this)},query:function(q,e){!function(_a76,q){var _a7a,data,vv,_a77=$.data(_a76,"combobox"),opts=_a77.options,_a78=$(),qq=opts.multiple?q.split(opts.separator):[q];function _a79(vv){opts.reversed?_a78.addClass("combobox-item-hover"):_a61(_a76,!opts.multiple||q?vv:[],!0)}"remote"==opts.mode?(_a79(qq),_a71(_a76,null,{q:q},!0)):((_a7a=$(_a76).combo("panel")).find(".combobox-item-hover").removeClass("combobox-item-hover"),_a7a.find(".combobox-item,.combobox-group").hide(),data=_a77.data,vv=[],$.map(qq,function(q){var _a7b=q=$.trim(q),_a7c=void 0;_a78=$();for(var i=0;i<data.length;i++){var v,s,g,item,row=data[i];opts.filter.call(_a76,q,row)&&(v=row[opts.valueField],s=row[opts.textField],g=row[opts.groupField],item=opts.finder.getEl(_a76,v).show(),s.toLowerCase()==q.toLowerCase()&&(_a7b=v,opts.reversed?_a78=item:_a5c(_a76,v,!0)),opts.groupField&&_a7c!=g&&(opts.finder.getGroupEl(_a76,g).show(),_a7c=g))}vv.push(_a7b)}),_a79(vv))}(this,q)}},inputEvents:$.extend({},$.fn.combo.defaults.inputEvents,{blur:function(e){var _aa6=e.data.target,opts=$(_aa6).combobox("options");(opts.reversed||opts.limitToList)&&(opts.blurTimer&&clearTimeout(opts.blurTimer),opts.blurTimer=setTimeout(function(){$(_aa6).parent().length&&(opts.reversed?$(_aa6).combobox("setValues",$(_aa6).combobox("getValues")):opts.limitToList&&_a7d(_aa6),opts.blurTimer=null)},50))}}),panelEvents:{mouseover:function(e){$(this).children("div.combobox-item-hover").removeClass("combobox-item-hover");var item=$(e.target).closest("div.combobox-item");item.hasClass("combobox-item-disabled")||item.addClass("combobox-item-hover"),e.stopPropagation()},mouseout:function(e){$(e.target).closest("div.combobox-item").removeClass("combobox-item-hover"),e.stopPropagation()},click:function(e){var opts,item,row,_a89,_a88=$(this).panel("options").comboTarget;_a88&&(opts=$(_a88).combobox("options"),!(item=$(e.target).closest("div.combobox-item")).length||item.hasClass("combobox-item-disabled")||(row=opts.finder.getRow(_a88,item))&&(opts.blurTimer&&(clearTimeout(opts.blurTimer),opts.blurTimer=null),opts.onClick.call(_a88,row),_a89=row[opts.valueField],opts.multiple?(item.hasClass("combobox-item-selected")?_a62:_a5c)(_a88,_a89):$(_a88).combobox("setValue",_a89).combobox("hidePanel"),e.stopPropagation()))},scroll:function(e){var opts,_a8c,_a8d,_a8b=$(this).panel("options").comboTarget;!_a8b||"sticky"==(opts=$(_a8b).combobox("options")).groupPosition&&((_a8c=$(this).children(".combobox-stick")).length||(_a8c=$('<div class="combobox-stick"></div>').appendTo(this)),_a8c.hide(),_a8d=$(_a8b).data("combobox"),$(this).children(".combobox-group:visible").each(function(){var g=$(this),_a8e=opts.finder.getGroup(_a8b,g),_a8f=_a8d.data[_a8e.startIndex+_a8e.count-1],last=opts.finder.getEl(_a8b,_a8f[opts.valueField]);if(g.position().top<0&&0<last.position().top)return _a8c.show().html(g.html()),!1}))}},filter:function(q,row){return 0<=row[$(this).combobox("options").textField].toLowerCase().indexOf(q.toLowerCase())},formatter:function(row){return row[$(this).combobox("options").textField]},loader:function(_aa8,_aa9,_aaa){var opts=$(this).combobox("options");if(!opts.url)return!1;$.ajax({type:opts.method,url:opts.url,data:_aa8,dataType:"json",success:function(data){_aa9(data)},error:function(){_aaa.apply(this,arguments)}})},loadFilter:function(data){return data},finder:{getEl:function(_aab,_aac){var _aad=_a50(_aab,_aac),id=$.data(_aab,"combobox").itemIdPrefix+"_"+_aad;return $("#"+id)},getGroupEl:function(_aae,_aaf){var _ab0=$.data(_aae,"combobox"),_ab1=$.easyui.indexOfArray(_ab0.groups,"value",_aaf),id=_ab0.groupIdPrefix+"_"+_ab1;return $("#"+id)},getGroup:function(_ab2,p){var _ab3=$.data(_ab2,"combobox"),_ab4=p.attr("id").substr(_ab3.groupIdPrefix.length+1);return _ab3.groups[parseInt(_ab4)]},getRow:function(_ab5,p){var _ab6=$.data(_ab5,"combobox"),_ab7=p instanceof $?p.attr("id").substr(_ab6.itemIdPrefix.length+1):_a50(_ab5,p);return _ab6.data[parseInt(_ab7)]}},onBeforeLoad:function(_ab8){},onLoadSuccess:function(data){},onLoadError:function(){},onSelect:function(_ab9){},onUnselect:function(_aba){},onClick:function(_abb){}})}($$),function($){function _ac2(_ac3){var node,_ac4=$.data(_ac3,"combotree"),opts=_ac4.options,tree=_ac4.tree,vv=[];opts.multiple?vv=$.map(tree.tree("getChecked"),function(node){return node.id}):(node=tree.tree("getSelected"))&&vv.push(node.id),_ac5(_ac3,vv=vv.concat(opts.unselectedValues),_ac4.remainText)}function _ac5(_ac6,_ac7,_ac8){var _ac9=$.data(_ac6,"combotree"),opts=_ac9.options,tree=_ac9.tree,_aca=tree.tree("options"),_acb=_aca.onBeforeCheck,_acc=_aca.onCheck,_acd=_aca.onSelect;_aca.onBeforeCheck=_aca.onCheck=_aca.onSelect=function(){},$.isArray(_ac7)||(_ac7=_ac7.split(opts.separator)),opts.multiple||(_ac7=_ac7.length?[_ac7[0]]:[""]);var vv=$.map(_ac7,function(_ace){return String(_ace)});tree.find("div.tree-node-selected").removeClass("tree-node-selected"),$.map(tree.tree("getChecked"),function(node){-1==$.inArray(String(node.id),vv)&&tree.tree("uncheck",node.target)});var s,ss=[];function _acf(node){return node[opts.textField||""]||node.text}opts.unselectedValues=[],$.map(vv,function(v){var _ad1,a,item,node=tree.tree("find",v);node?(tree.tree("check",node.target).tree("select",node.target),ss.push(_acf(node))):(ss.push((_ad1=v,a=opts.mappingRows,((item=$.easyui.getArrayItem(a,"id",_ad1))?_acf(item):void 0)||v)),opts.unselectedValues.push(v))}),opts.multiple&&$.map(tree.tree("getChecked"),function(node){var id=String(node.id);-1==$.inArray(id,vv)&&(vv.push(id),ss.push(_acf(node)))}),_aca.onBeforeCheck=_acb,_aca.onCheck=_acc,_aca.onSelect=_acd,_ac8||(s=ss.join(opts.separator),$(_ac6).combo("getText")!=s&&$(_ac6).combo("setText",s)),$(_ac6).combo("setValues",vv)}$.fn.combotree=function(_ad8,_ad9){if("string"!=typeof _ad8)return _ad8=_ad8||{},this.each(function(){var _adb=$.data(this,"combotree");_adb?$.extend(_adb.options,_ad8):$.data(this,"combotree",{options:$.extend({},$.fn.combotree.defaults,$.fn.combotree.parseOptions(this),_ad8)}),function(_abd){var _abe=$.data(_abd,"combotree"),opts=_abe.options,tree=_abe.tree;$(_abd).addClass("combotree-f"),$(_abd).combo($.extend({},opts,{onShowPanel:function(){opts.editable&&tree.tree("doFilter",""),opts.onShowPanel.call(this)}}));var _abf=$(_abd).combo("panel");tree||(tree=$("<ul></ul>").appendTo(_abf),_abe.tree=tree),tree.tree($.extend({},opts,{checkbox:opts.multiple,onLoadSuccess:function(node,data){var _ac0=$(_abd).combotree("getValues");opts.multiple&&$.map(tree.tree("getChecked"),function(node){$.easyui.addArrayItem(_ac0,node.id)}),_ac5(_abd,_ac0,_abe.remainText),opts.onLoadSuccess.call(this,node,data)},onClick:function(node){opts.multiple?$(this).tree(node.checked?"uncheck":"check",node.target):$(_abd).combo("hidePanel"),_abe.remainText=!1,_ac2(_abd),opts.onClick.call(this,node)},onCheck:function(node,_ac1){_abe.remainText=!1,_ac2(_abd),opts.onCheck.call(this,node,_ac1)}}))}(this)});var _ada=$.fn.combotree.methods[_ad8];return _ada?_ada(this,_ad9):this.combo(_ad8,_ad9)},$.fn.combotree.methods={options:function(jq){var _adc=jq.combo("options");return $.extend($.data(jq[0],"combotree").options,{width:_adc.width,height:_adc.height,originalValue:_adc.originalValue,disabled:_adc.disabled,readonly:_adc.readonly})},clone:function(jq,_add){var t=jq.combo("clone",_add);return t.data("combotree",{options:$.extend(!0,{},jq.combotree("options")),tree:jq.combotree("tree")}),t},tree:function(jq){return $.data(jq[0],"combotree").tree},loadData:function(jq,data){return jq.each(function(){$.data(this,"combotree").options.data=data,$.data(this,"combotree").tree.tree("loadData",data)})},reload:function(jq,url){return jq.each(function(){var opts=$.data(this,"combotree").options,tree=$.data(this,"combotree").tree;url&&(opts.url=url),tree.tree({url:opts.url})})},setValues:function(jq,_ade){return jq.each(function(){var opts=$(this).combotree("options");$.isArray(_ade)&&(_ade=$.map(_ade,function(_adf){return _adf&&"object"==typeof _adf?($.easyui.addArrayItem(opts.mappingRows,"id",_adf),_adf.id):_adf})),_ac5(this,_ade)})},setValue:function(jq,_ae0){return jq.each(function(){$(this).combotree("setValues",$.isArray(_ae0)?_ae0:[_ae0])})},clear:function(jq){return jq.each(function(){$(this).combotree("setValues",[])})},reset:function(jq){return jq.each(function(){var opts=$(this).combotree("options");opts.multiple?$(this).combotree("setValues",opts.originalValue):$(this).combotree("setValue",opts.originalValue)})}},$.fn.combotree.parseOptions=function(_ae1){return $.extend({},$.fn.combo.parseOptions(_ae1),$.fn.tree.parseOptions(_ae1))},$.fn.combotree.defaults=$.extend({},$.fn.combo.defaults,$.fn.tree.defaults,{editable:!1,textField:null,unselectedValues:[],mappingRows:[],keyHandler:{up:function(e){},down:function(e){},left:function(e){},right:function(e){},enter:function(e){var _ad6;_ad6=this,$.data(_ad6,"combotree").remainText=!1,$(_ad6).combotree("setValues",$(_ad6).combotree("getValues")),$(_ad6).combotree("hidePanel")},query:function(q,e){!function(_ad3,q){var _ad4=$.data(_ad3,"combotree"),opts=_ad4.options,tree=_ad4.tree;_ad4.remainText=!0,tree.tree("doFilter",opts.multiple?q.split(opts.separator):q)}(this,q)}}})}($$),function($){function _ae2(_ae3){var _ae4=$.data(_ae3,"combogrid"),opts=_ae4.options,grid=_ae4.grid;$(_ae3).addClass("combogrid-f").combo($.extend({},opts,{onShowPanel:function(){_af9(this,$(this).combogrid("getValues"),!0);var p=$(this).combogrid("panel"),_ae5=p.outerHeight()-p.height(),_ae6=p._size("minHeight"),_ae7=p._size("maxHeight"),dg=$(this).combogrid("grid");dg.datagrid("resize",{width:"100%",height:isNaN(parseInt(opts.panelHeight))?"auto":"100%",minHeight:_ae6?_ae6-_ae5:"",maxHeight:_ae7?_ae7-_ae5:""});var row=dg.datagrid("getSelected");row&&dg.datagrid("scrollTo",dg.datagrid("getRowIndex",row)),opts.onShowPanel.call(this)}}));var _ae8=$(_ae3).combo("panel");function _aec(dg){return $(dg).closest(".combo-panel").panel("options").comboTarget||_ae3}function _aeb(_af4){return function(_af5,row){var _af6=_aec(this),opts=$(_af6).combogrid("options");"onUnselectAll"==_af4&&!opts.multiple||_af3.call(this),opts[_af4].call(this,_af5,row)}}function _af3(){var dg=$(this),_af7=_aec(dg),_af8=$(_af7).data("combogrid"),opts=_af8.options;_af9(_af7,$.map(dg.datagrid("getSelections"),function(row){return row[opts.idField]}).concat(opts.unselectedValues),_af8.remainText)}grid||(grid=$("<table></table>").appendTo(_ae8),_ae4.grid=grid),grid.datagrid($.extend({},opts,{border:!1,singleSelect:!opts.multiple,onLoadSuccess:function(data){var _aed=_aec(this),_aee=$(_aed).data("combogrid"),opts=_aee.options,_aef=$(_aed).combo("getValues");_af9(_aed,_aef,_aee.remainText),opts.onLoadSuccess.call(this,data)},onClickRow:function(_af0,row){var _af1=_aec(this),_af2=$(_af1).data("combogrid"),opts=_af2.options;_af2.remainText=!1,_af3.call(this),opts.multiple||$(_af1).combo("hidePanel");opts.onClickRow.call(this,_af0,row)},onSelect:_aeb("onSelect"),onUnselect:_aeb("onUnselect"),onSelectAll:_aeb("onSelectAll"),onUnselectAll:_aeb("onUnselectAll")}))}function nav(_afa,dir){var tr,_afd,_afb=$.data(_afa,"combogrid"),opts=_afb.options,grid=_afb.grid,_afc=grid.datagrid("getRows").length;_afc&&((tr=opts.finder.getTr(grid[0],null,"highlight")).length||(tr=opts.finder.getTr(grid[0],null,"selected")),tr.length?(_afd=parseInt(tr.attr("datagrid-row-index")),(_afd+="next"==dir?1:-1)<0&&(_afd=_afc-1),_afc<=_afd&&(_afd=0)):_afd="next"==dir?0:_afc-1,grid.datagrid("highlightRow",_afd),opts.selectOnNavigation&&(_afb.remainText=!1,grid.datagrid("selectRow",_afd)))}function _af9(_afe,_aff,_b00){var _b01=$.data(_afe,"combogrid"),opts=_b01.options,grid=_b01.grid,_b02=$(_afe).combo("getValues"),_b03=$(_afe).combo("options"),_b04=_b03.onChange;_b03.onChange=function(){};var _b05=grid.datagrid("options"),_b06=_b05.onSelect,_b07=_b05.onUnselectAll;_b05.onSelect=_b05.onUnselectAll=function(){},$.isArray(_aff)||(_aff=_aff.split(opts.separator)),opts.multiple||(_aff=_aff.length?[_aff[0]]:[""]);var vv=$.map(_aff,function(_b08){return String(_b08)}),vv=$.grep(vv,function(v,_b09){return _b09===$.inArray(v,vv)}),_b0a=$.grep(grid.datagrid("getSelections"),function(row,_b0b){return 0<=$.inArray(String(row[opts.idField]),vv)});grid.datagrid("clearSelections"),grid.data("datagrid").selectedRows=_b0a;var s,ss=[];function _b0d(_b0e,a){var item=$.easyui.getArrayItem(a,opts.idField,_b0e);return item?item[opts.textField]:void 0}opts.unselectedValues=[],$.map(vv,function(v){var _b0c=grid.datagrid("getRowIndex",v);0<=_b0c?grid.datagrid("selectRow",_b0c):opts.unselectedValues.push(v),ss.push(_b0d(v,grid.datagrid("getRows"))||_b0d(v,_b0a)||_b0d(v,opts.mappingRows)||v)}),$(_afe).combo("setValues",_b02),_b03.onChange=_b04,_b05.onSelect=_b06,_b05.onUnselectAll=_b07,_b00||(s=ss.join(opts.separator),$(_afe).combo("getText")!=s&&$(_afe).combo("setText",s)),$(_afe).combo("setValues",_aff)}$.fn.combogrid=function(_b1a,_b1b){if("string"!=typeof _b1a)return _b1a=_b1a||{},this.each(function(){var _b1d=$.data(this,"combogrid");_b1d?$.extend(_b1d.options,_b1a):_b1d=$.data(this,"combogrid",{options:$.extend({},$.fn.combogrid.defaults,$.fn.combogrid.parseOptions(this),_b1a)}),_ae2(this)});var _b1c=$.fn.combogrid.methods[_b1a];return _b1c?_b1c(this,_b1b):this.combo(_b1a,_b1b)},$.fn.combogrid.methods={options:function(jq){var _b1e=jq.combo("options");return $.extend($.data(jq[0],"combogrid").options,{width:_b1e.width,height:_b1e.height,originalValue:_b1e.originalValue,disabled:_b1e.disabled,readonly:_b1e.readonly})},cloneFrom:function(jq,from){return jq.each(function(){$(this).combo("cloneFrom",from),$.data(this,"combogrid",{options:$.extend(!0,{cloned:!0},$(from).combogrid("options")),combo:$(this).next(),panel:$(from).combo("panel"),grid:$(from).combogrid("grid")})})},grid:function(jq){return $.data(jq[0],"combogrid").grid},setValues:function(jq,_b1f){return jq.each(function(){var opts=$(this).combogrid("options");$.isArray(_b1f)&&(_b1f=$.map(_b1f,function(_b20){return _b20&&"object"==typeof _b20?($.easyui.addArrayItem(opts.mappingRows,opts.idField,_b20),_b20[opts.idField]):_b20})),_af9(this,_b1f)})},setValue:function(jq,_b21){return jq.each(function(){$(this).combogrid("setValues",$.isArray(_b21)?_b21:[_b21])})},clear:function(jq){return jq.each(function(){$(this).combogrid("setValues",[])})},reset:function(jq){return jq.each(function(){var opts=$(this).combogrid("options");opts.multiple?$(this).combogrid("setValues",opts.originalValue):$(this).combogrid("setValue",opts.originalValue)})}},$.fn.combogrid.parseOptions=function(_b22){$(_b22);return $.extend({},$.fn.combo.parseOptions(_b22),$.fn.datagrid.parseOptions(_b22),$.parser.parseOptions(_b22,["idField","textField","mode"]))},$.fn.combogrid.defaults=$.extend({},$.fn.combo.defaults,$.fn.datagrid.defaults,{loadMsg:null,idField:null,textField:null,unselectedValues:[],mappingRows:[],mode:"local",keyHandler:{up:function(e){nav(this,"prev"),e.preventDefault()},down:function(e){nav(this,"next"),e.preventDefault()},left:function(e){},right:function(e){},enter:function(e){!function(_b17){var _b19,_b18=$.data(_b17,"combogrid"),opts=_b18.options,grid=_b18.grid,tr=opts.finder.getTr(grid[0],null,"highlight");_b18.remainText=!1,tr.length&&(_b19=parseInt(tr.attr("datagrid-row-index")),opts.multiple&&tr.hasClass("datagrid-row-selected")?grid.datagrid("unselectRow",_b19):grid.datagrid("selectRow",_b19));var vv=[];$.map(grid.datagrid("getSelections"),function(row){vv.push(row[opts.idField])}),$.map(opts.unselectedValues,function(v){0<=$.easyui.indexOfArray(opts.mappingRows,opts.idField,v)&&$.easyui.addArrayItem(vv,v)}),$(_b17).combogrid("setValues",vv),opts.multiple||$(_b17).combogrid("hidePanel")}(this)},query:function(q,e){!function(_b10,q){var _b11=$.data(_b10,"combogrid"),opts=_b11.options,grid=_b11.grid;_b11.remainText=!0;var rows,vv,qq=opts.multiple?q.split(opts.separator):[q];function _b14(rows,q){for(var i=0;i<rows.length;i++){var row=rows[i];if((row[opts.textField]||"").toLowerCase()==q.toLowerCase())return vv.push(row[opts.idField]),i}return-1}function _b12(vv){opts.reversed||_af9(_b10,vv,!0)}qq=$.grep(qq,function(q){return""!=$.trim(q)}),"remote"==opts.mode?(_b12(qq),grid.datagrid("load",$.extend({},opts.queryParams,{q:q}))):(grid.datagrid("highlightRow",-1),rows=grid.datagrid("getRows"),vv=[],$.map(qq,function(q){q=$.trim(q);_b14(opts.mappingRows,q),_b14(grid.datagrid("getSelections"),q);var _b15=_b14(rows,q);0<=_b15?opts.reversed&&grid.datagrid("highlightRow",_b15):$.map(rows,function(row,i){opts.filter.call(_b10,q,row)&&grid.datagrid("highlightRow",i)})}),_b12(vv))}(this,q)}},inputEvents:$.extend({},$.fn.combo.defaults.inputEvents,{blur:function(e){var _b23=e.data.target;$(_b23).combogrid("options").reversed&&$(_b23).combogrid("setValues",$(_b23).combogrid("getValues"))}}),filter:function(q,row){return 0<=(row[$(this).combogrid("options").textField]||"").toLowerCase().indexOf(q.toLowerCase())}})}($$),function($){function _b2d(_b2e){var row,_b2f=$.data(_b2e,"combotreegrid"),opts=_b2f.options,grid=_b2f.grid,vv=[];opts.multiple?vv=$.map(grid.treegrid("getCheckedNodes"),function(row){return row[opts.idField]}):(row=grid.treegrid("getSelected"))&&vv.push(row[opts.idField]),_b30(_b2e,vv=vv.concat(opts.unselectedValues))}function _b30(_b31,_b32){var _b33=$.data(_b31,"combotreegrid"),opts=_b33.options,grid=_b33.grid;$.isArray(_b32)||(_b32=_b32.split(opts.separator)),opts.multiple||(_b32=_b32.length?[_b32[0]]:[""]);var vv=$.map(_b32,function(_b34){return String(_b34)}),vv=$.grep(vv,function(v,_b35){return _b35===$.inArray(v,vv)}),_b36=grid.treegrid("getSelected");_b36&&grid.treegrid("unselect",_b36[opts.idField]),$.map(grid.treegrid("getCheckedNodes"),function(row){-1==$.inArray(String(row[opts.idField]),vv)&&grid.treegrid("uncheckNode",row[opts.idField])});var s,ss=[];function _b37(row){return row[opts.textField||""]||row[opts.treeField]}opts.unselectedValues=[],$.map(vv,function(v){var _b39,a,item,row=grid.treegrid("find",v);row?(opts.multiple?grid.treegrid("checkNode",v):grid.treegrid("select",v),ss.push(_b37(row))):(ss.push((_b39=v,a=opts.mappingRows,((item=$.easyui.getArrayItem(a,opts.idField,_b39))?_b37(item):void 0)||v)),opts.unselectedValues.push(v))}),opts.multiple&&$.map(grid.treegrid("getCheckedNodes"),function(row){var id=String(row[opts.idField]);-1==$.inArray(id,vv)&&(vv.push(id),ss.push(_b37(row)))}),_b33.remainText||(s=ss.join(opts.separator),$(_b31).combo("getText")!=s&&$(_b31).combo("setText",s)),$(_b31).combo("setValues",vv)}function _b3d(_b3e){_b2d(_b3e)}$.fn.combotreegrid=function(_b3f,_b40){if("string"!=typeof _b3f)return _b3f=_b3f||{},this.each(function(){var _b25,_b2a,_b26,opts,_b42=$.data(this,"combotreegrid");_b42?$.extend(_b42.options,_b3f):_b42=$.data(this,"combotreegrid",{options:$.extend({},$.fn.combotreegrid.defaults,$.fn.combotreegrid.parseOptions(this),_b3f)}),_b25=this,_b26=$.data(_b25,"combotreegrid"),opts=_b26.options,$(_b25).addClass("combotreegrid-f").combo($.extend({},opts,{onShowPanel:function(){var p=$(this).combotreegrid("panel"),_b27=p.outerHeight()-p.height(),_b28=p._size("minHeight"),_b29=p._size("maxHeight"),dg=$(this).combotreegrid("grid");dg.treegrid("resize",{width:"100%",height:isNaN(parseInt(opts.panelHeight))?"auto":"100%",minHeight:_b28?_b28-_b27:"",maxHeight:_b29?_b29-_b27:""});var row=dg.treegrid("getSelected");row&&dg.treegrid("scrollTo",row[opts.idField]),opts.onShowPanel.call(this)}})),_b26.grid||(_b2a=$(_b25).combo("panel"),_b26.grid=$("<table></table>").appendTo(_b2a)),_b26.grid.treegrid($.extend({},opts,{border:!1,checkbox:opts.multiple,onLoadSuccess:function(row,data){var _b2b=$(_b25).combotreegrid("getValues");opts.multiple&&$.map($(this).treegrid("getCheckedNodes"),function(row){$.easyui.addArrayItem(_b2b,row[opts.idField])}),_b30(_b25,_b2b),opts.onLoadSuccess.call(this,row,data),_b26.remainText=!1},onClickRow:function(row){opts.multiple?($(this).treegrid(row.checked?"uncheckNode":"checkNode",row[opts.idField]),$(this).treegrid("unselect",row[opts.idField])):$(_b25).combo("hidePanel"),_b2d(_b25),opts.onClickRow.call(this,row)},onCheckNode:function(row,_b2c){_b2d(_b25),opts.onCheckNode.call(this,row,_b2c)}}))});var _b41=$.fn.combotreegrid.methods[_b3f];return _b41?_b41(this,_b40):this.combo(_b3f,_b40)},$.fn.combotreegrid.methods={options:function(jq){var _b43=jq.combo("options");return $.extend($.data(jq[0],"combotreegrid").options,{width:_b43.width,height:_b43.height,originalValue:_b43.originalValue,disabled:_b43.disabled,readonly:_b43.readonly})},grid:function(jq){return $.data(jq[0],"combotreegrid").grid},setValues:function(jq,_b44){return jq.each(function(){var opts=$(this).combotreegrid("options");$.isArray(_b44)&&(_b44=$.map(_b44,function(_b45){return _b45&&"object"==typeof _b45?($.easyui.addArrayItem(opts.mappingRows,opts.idField,_b45),_b45[opts.idField]):_b45})),_b30(this,_b44)})},setValue:function(jq,_b46){return jq.each(function(){$(this).combotreegrid("setValues",$.isArray(_b46)?_b46:[_b46])})},clear:function(jq){return jq.each(function(){$(this).combotreegrid("setValues",[])})},reset:function(jq){return jq.each(function(){var opts=$(this).combotreegrid("options");opts.multiple?$(this).combotreegrid("setValues",opts.originalValue):$(this).combotreegrid("setValue",opts.originalValue)})}},$.fn.combotreegrid.parseOptions=function(_b47){$(_b47);return $.extend({},$.fn.combo.parseOptions(_b47),$.fn.treegrid.parseOptions(_b47),$.parser.parseOptions(_b47,["mode",{limitToGrid:"boolean"}]))},$.fn.combotreegrid.defaults=$.extend({},$.fn.combo.defaults,$.fn.treegrid.defaults,{editable:!1,singleSelect:!0,limitToGrid:!1,unselectedValues:[],mappingRows:[],mode:"local",textField:null,keyHandler:{up:function(e){},down:function(e){},left:function(e){},right:function(e){},enter:function(e){_b3d(this)},query:function(q,e){!function(_b3b,q){var data,vv,qq,_b3c=$.data(_b3b,"combotreegrid"),opts=_b3c.options,grid=_b3c.grid;_b3c.remainText=!0,grid.treegrid("clearSelections").treegrid("clearChecked").treegrid("highlightRow",-1),"remote"==opts.mode?($(_b3b).combotreegrid("clear"),grid.treegrid("load",$.extend({},opts.queryParams,{q:q}))):q&&(data=grid.treegrid("getData"),vv=[],qq=opts.multiple?q.split(opts.separator):[q],$.map(qq,function(q){var v;(q=$.trim(q))&&(v=void 0,$.easyui.forEach(data,!0,function(row){return q.toLowerCase()==String(row[opts.treeField]).toLowerCase()?(v=row[opts.idField],!1):opts.filter.call(_b3b,q,row)?(grid.treegrid("expandTo",row[opts.idField]),grid.treegrid("highlightRow",row[opts.idField]),!1):void 0}),null==v&&$.easyui.forEach(opts.mappingRows,!1,function(row){if(q.toLowerCase()==String(row[opts.treeField]))return v=row[opts.idField],!1}),null!=v&&vv.push(v))}),_b30(_b3b,vv),_b3c.remainText=!1)}(this,q)}},inputEvents:$.extend({},$.fn.combo.defaults.inputEvents,{blur:function(e){var _b48=e.data.target;$(_b48).combotreegrid("options").limitToGrid&&_b3d(_b48)}}),filter:function(q,row){return 0<=(row[$(this).combotreegrid("options").treeField]||"").toLowerCase().indexOf(q.toLowerCase())}})}($$),function($){function _b56(_b57,_b58){var _b5a,_b5b,_b5c,_b5d,span=$(_b57).next(),_b59=_b58?$(_b58):span.find(".tagbox-label");_b59.length&&(_b5a=$(_b57).tagbox("textbox"),_b5c=(_b5b=$(_b59[0])).outerHeight(!0)-_b5b.outerHeight(),_b5d=_b5a.outerHeight()-2*_b5c,_b59.css({height:_b5d+"px",lineHeight:_b5d+"px"}),span.find(".textbox-addon").css("height","100%").find(".textbox-icon").css("height","100%"),span.find(".textbox-button").linkbutton("resize",{height:"100%"}))}function _b64(_b65){var opts=$(_b65).tagbox("options"),_b66=$(_b65).tagbox("textbox"),span=$(_b65).next(),tmp=$("<span></span>").appendTo("body");tmp.attr("style",_b66.attr("style")),tmp.css({position:"absolute",top:-9999,left:-9999,width:"auto",fontFamily:_b66.css("fontFamily"),fontSize:_b66.css("fontSize"),fontWeight:_b66.css("fontWeight"),whiteSpace:"nowrap"});var _b67=_b68(_b66.val()),_b69=_b68(opts.prompt||"");tmp.remove();var _b6a=Math.min(Math.max(_b67,_b69)+20,span.width());function _b68(val){var s=val.replace(/&/g,"&amp;").replace(/\s/g," ").replace(/</g,"&lt;").replace(/>/g,"&gt;");return tmp.html(s),tmp.outerWidth()}_b66._outerWidth(_b6a),span.find(".textbox-button").linkbutton("resize",{height:"100%"})}function _b6b(_b6c){var item,_b6e,v,_b6f,t=$(_b6c),opts=t.tagbox("options");opts.limitToList?((item=t.tagbox("panel").children("div.combobox-item-hover")).length&&(item.removeClass("combobox-item-hover"),_b6e=opts.finder.getRow(_b6c,item)[opts.valueField],$(_b6c).tagbox(item.hasClass("combobox-item-selected")?"unselect":"select",_b6e)),$(_b6c).tagbox("hidePanel")):""!==(v=$.trim($(_b6c).tagbox("getText")))&&((_b6f=$(_b6c).tagbox("getValues")).push(v),$(_b6c).tagbox("setValues",_b6f))}$.fn.tagbox=function(_b73,_b74){if("string"!=typeof _b73)return _b73=_b73||{},this.each(function(){var _b4a,opts,_b60,_b76=$.data(this,"tagbox");function _b4e(){$(_b4a).next().find(".tagbox-label").remove();var _b52=$(_b4a).tagbox("textbox");$.map($(_b4a).tagbox("getValues"),function(_b53,_b54){var row=opts.finder.getRow(_b4a,_b53),text=opts.tagFormatter.call(_b4a,_b53,row),cs={},css=opts.tagStyler.call(_b4a,_b53,row)||"",cs="string"==typeof css?{s:css}:{c:css.class||"",s:css.style||""},_b55=$('<span class="tagbox-label"></span>').insertBefore(_b52).html(text);_b55.attr("tagbox-index",_b54),_b55.attr("style",cs.s).addClass(cs.c),$('<a href="javascript:;" class="tagbox-remove"></a>').appendTo(_b55)}),_b56(_b4a),$(_b4a).combobox("setText","")}_b76?$.extend(_b76.options,_b73):$.data(this,"tagbox",{options:$.extend({},$.fn.tagbox.defaults,$.fn.tagbox.parseOptions(this),_b73)}),_b4a=this,opts=$.data(_b4a,"tagbox").options,$(_b4a).addClass("tagbox-f").combobox($.extend({},opts,{cls:"tagbox",reversed:!0,onChange:function(_b4c,_b4d){_b4e(),$(this).combobox("hidePanel"),opts.onChange.call(_b4a,_b4c,_b4d)},onResizing:function(_b4f,_b50){var _b51=$(this).combobox("textbox"),tb=$(this).data("textbox").textbox;tb.css({height:"",paddingLeft:_b51.css("marginLeft"),paddingRight:_b51.css("marginRight")}),_b51.css("margin",0),tb._size({width:opts.width},$(this).parent()),_b64(_b4a),_b56(this),opts.onResizing.call(_b4a,_b4f,_b50)},onLoadSuccess:function(data){_b4e(),opts.onLoadSuccess.call(_b4a,data)}})),_b4e(),_b64(_b4a),$(_b60=this).next().unbind(".tagbox").bind("click.tagbox",function(e){var opts=$(_b60).tagbox("options");if(!opts.disabled&&!opts.readonly){if($(e.target).hasClass("tagbox-remove")){var _b61=parseInt($(e.target).parent().attr("tagbox-index")),_b62=$(_b60).tagbox("getValues");if(0==opts.onBeforeRemoveTag.call(_b60,_b62[_b61]))return;opts.onRemoveTag.call(_b60,_b62[_b61]),_b62.splice(_b61,1),$(_b60).tagbox("setValues",_b62)}else{var _b63=$(e.target).closest(".tagbox-label");_b63.length&&(_b61=parseInt(_b63.attr("tagbox-index")),_b62=$(_b60).tagbox("getValues"),opts.onClickTag.call(_b60,_b62[_b61]))}$(this).find(".textbox-text").focus()}}).bind("keyup.tagbox",function(e){_b64(_b60)}).bind("mouseover.tagbox",function(e){$(e.target).closest(".textbox-button,.textbox-addon,.tagbox-label").length?$(this).triggerHandler("mouseleave"):$(this).find(".textbox-text").triggerHandler("mouseenter")}).bind("mouseleave.tagbox",function(e){$(this).find(".textbox-text").triggerHandler("mouseleave")})});var _b75=$.fn.tagbox.methods[_b73];return _b75?_b75(this,_b74):this.combobox(_b73,_b74)},$.fn.tagbox.methods={options:function(jq){var _b77=jq.combobox("options");return $.extend($.data(jq[0],"tagbox").options,{width:_b77.width,height:_b77.height,originalValue:_b77.originalValue,disabled:_b77.disabled,readonly:_b77.readonly})},setValues:function(jq,_b78){return jq.each(function(){var _b71,_b72;_b72=_b78,$(_b71=this).combobox("setText",""),_b64(_b71),$(_b71).combobox("setValues",_b72),$(_b71).combobox("setText",""),$(_b71).tagbox("validate")})}},$.fn.tagbox.parseOptions=function(_b79){return $.extend({},$.fn.combobox.parseOptions(_b79),$.parser.parseOptions(_b79,[]))},$.fn.tagbox.defaults=$.extend({},$.fn.combobox.defaults,{hasDownArrow:!1,multiple:!0,reversed:!0,selectOnNavigation:!1,tipOptions:$.extend({},$.fn.textbox.defaults.tipOptions,{showDelay:200}),val:function(_b7a){var vv=$(_b7a).parent().prev().tagbox("getValues");return $(_b7a).is(":focus")&&vv.push($(_b7a).val()),vv.join(",")},inputEvents:$.extend({},$.fn.combo.defaults.inputEvents,{blur:function(e){var _b7b=e.data.target;$(_b7b).tagbox("options").limitToList&&_b6b(_b7b)}}),keyHandler:$.extend({},$.fn.combobox.defaults.keyHandler,{enter:function(e){_b6b(this)},query:function(q,e){$(this).tagbox("options").limitToList?$.fn.combobox.defaults.keyHandler.query.call(this,q,e):$(this).combobox("hidePanel")}}),tagFormatter:function(_b7c,row){var opts=$(this).tagbox("options");return row?row[opts.textField]:_b7c},tagStyler:function(_b7d,row){return""},onClickTag:function(_b7e){},onBeforeRemoveTag:function(_b7f){},onRemoveTag:function(_b80){}})}($$),function($){function _b81(_b82){var _b87,cc,c,_b83=$.data(_b82,"datebox"),opts=_b83.options;$(_b82).addClass("datebox-f").combo($.extend({},opts,{onShowPanel:function(){!function(_b89){var opts=$(_b89).datebox("options");$(_b89).combo("panel").unbind(".datebox").bind("click.datebox",function(e){var _b8b;$(e.target).hasClass("datebox-button-a")&&(_b8b=parseInt($(e.target).attr("datebox-button-index")),opts.buttons[_b8b].handler.call(e.target,_b89))})}(this),function(_b8c){var _b8d=$(_b8c).combo("panel");if(_b8d.children("div.datebox-button").length)return;for(var tr=$('<div class="datebox-button"><table cellspacing="0" cellpadding="0" style="width:100%"><tr></tr></table></div>').appendTo(_b8d).find("tr"),i=0;i<opts.buttons.length;i++){var td=$("<td></td>").appendTo(tr),btn=opts.buttons[i];$('<a class="datebox-button-a" href="javascript:;"></a>').html($.isFunction(btn.text)?btn.text(_b8c):btn.text).appendTo(td).attr("datebox-button-index",i)}tr.find("td").css("width",100/opts.buttons.length+"%")}(this),function(_b8f){var _b90=$(_b8f).combo("panel"),cc=_b90.children("div.datebox-calendar-inner");{var _b91;_b90.children()._outerWidth(_b90.width()),_b83.calendar.appendTo(cc),_b83.calendar[0].target=_b8f,"auto"!=opts.panelHeight&&(_b91=_b90.height(),_b90.children().not(cc).each(function(){_b91-=$(this).outerHeight()}),cc._outerHeight(_b91))}_b83.calendar.calendar("resize")}(this),_b94(this,$(this).datebox("getText"),!0),opts.onShowPanel.call(this)}})),_b83.calendar||((_b87=$(_b82).combo("panel").css("overflow","hidden")).panel("options").onBeforeDestroy=function(){var c=$(this).find(".calendar-shared");c.length&&c.insertBefore(c[0].pholder)},cc=$('<div class="datebox-calendar-inner"></div>').prependTo(_b87),opts.sharedCalendar?((c=$(opts.sharedCalendar))[0].pholder||(c[0].pholder=$('<div class="calendar-pholder" style="display:none"></div>').insertAfter(c)),c.addClass("calendar-shared").appendTo(cc),c.hasClass("calendar")||c.calendar(),_b83.calendar=c):_b83.calendar=$("<div></div>").appendTo(cc).calendar(),$.extend(_b83.calendar.calendar("options"),{fit:!0,border:!1,onSelect:function(date){var _b88=this.target,opts=$(_b88).datebox("options");_b94(_b88,opts.formatter.call(_b88,date)),$(_b88).combo("hidePanel"),opts.onSelect.call(_b88,date)}})),$(_b82).combo("textbox").parent().addClass("datebox"),$(_b82).datebox("initValue",opts.value)}function _b95(_b96){var _b97=$.data(_b96,"datebox"),opts=_b97.options,_b98=_b97.calendar.calendar("options").current;_b98&&(_b94(_b96,opts.formatter.call(_b96,_b98)),$(_b96).combo("hidePanel"))}function _b94(_b99,_b9a,_b9b){var _b9c=$.data(_b99,"datebox"),opts=_b9c.options,_b9d=_b9c.calendar;_b9d.calendar("moveTo",opts.parser.call(_b99,_b9a)),_b9b?$(_b99).combo("setValue",_b9a):(_b9a=_b9a&&opts.formatter.call(_b99,_b9d.calendar("options").current),$(_b99).combo("setText",_b9a).combo("setValue",_b9a))}$.fn.datebox=function(_b9e,_b9f){if("string"!=typeof _b9e)return _b9e=_b9e||{},this.each(function(){var _ba1=$.data(this,"datebox");_ba1?$.extend(_ba1.options,_b9e):$.data(this,"datebox",{options:$.extend({},$.fn.datebox.defaults,$.fn.datebox.parseOptions(this),_b9e)}),_b81(this)});var _ba0=$.fn.datebox.methods[_b9e];return _ba0?_ba0(this,_b9f):this.combo(_b9e,_b9f)},$.fn.datebox.methods={options:function(jq){var _ba2=jq.combo("options");return $.extend($.data(jq[0],"datebox").options,{width:_ba2.width,height:_ba2.height,originalValue:_ba2.originalValue,disabled:_ba2.disabled,readonly:_ba2.readonly})},cloneFrom:function(jq,from){return jq.each(function(){$(this).combo("cloneFrom",from),$.data(this,"datebox",{options:$.extend(!0,{},$(from).datebox("options")),calendar:$(from).datebox("calendar")}),$(this).addClass("datebox-f")})},calendar:function(jq){return $.data(jq[0],"datebox").calendar},initValue:function(jq,_ba3){return jq.each(function(){var opts=$(this).datebox("options"),_ba4=(_ba4=opts.value)&&opts.formatter.call(this,opts.parser.call(this,_ba4));$(this).combo("initValue",_ba4).combo("setText",_ba4)})},setValue:function(jq,_ba5){return jq.each(function(){_b94(this,_ba5)})},reset:function(jq){return jq.each(function(){var opts=$(this).datebox("options");$(this).datebox("setValue",opts.originalValue)})}},$.fn.datebox.parseOptions=function(_ba6){return $.extend({},$.fn.combo.parseOptions(_ba6),$.parser.parseOptions(_ba6,["sharedCalendar"]))},$.fn.datebox.defaults=$.extend({},$.fn.combo.defaults,{panelWidth:180,panelHeight:"auto",sharedCalendar:null,keyHandler:{up:function(e){},down:function(e){},left:function(e){},right:function(e){},enter:function(e){_b95(this)},query:function(q,e){!function(_b93,q){_b94(_b93,q,!0)}(this,q)}},currentText:"Today",closeText:"Close",okText:"Ok",buttons:[{text:function(_ba7){return $(_ba7).datebox("options").currentText},handler:function(_ba8){var now=new Date;$(_ba8).datebox("calendar").calendar({year:now.getFullYear(),month:now.getMonth()+1,current:new Date(now.getFullYear(),now.getMonth(),now.getDate())}),_b95(_ba8)}},{text:function(_ba9){return $(_ba9).datebox("options").closeText},handler:function(_baa){$(this).closest("div.combo-panel").panel("close")}}],formatter:function(date){var y=date.getFullYear(),m=date.getMonth()+1,d=date.getDate();return(m<10?"0"+m:m)+"/"+(d<10?"0"+d:d)+"/"+y},parser:function(s){if(!s)return new Date;var ss=s.split("/"),m=parseInt(ss[0],10),d=parseInt(ss[1],10),y=parseInt(ss[2],10);return isNaN(y)||isNaN(m)||isNaN(d)?new Date:new Date(y,m-1,d)},onSelect:function(date){}})}($$),function($){function _bb5(_bb6){var opts=$.data(_bb6,"datetimebox").options,date=function(_bb1){var c=$(_bb1).datetimebox("calendar"),t=$(_bb1).datetimebox("spinner"),date=c.calendar("options").current;return new Date(date.getFullYear(),date.getMonth(),date.getDate(),t.timespinner("getHours"),t.timespinner("getMinutes"),t.timespinner("getSeconds"))}(_bb6);_bb4(_bb6,opts.formatter.call(_bb6,date)),$(_bb6).combo("hidePanel")}function _bb4(_bb7,_bb8,_bb9){var opts=$.data(_bb7,"datetimebox").options;$(_bb7).combo("setValue",_bb8),_bb9||(_bb8?(date=opts.parser.call(_bb7,_bb8),$(_bb7).combo("setText",opts.formatter.call(_bb7,date)),$(_bb7).combo("setValue",opts.formatter.call(_bb7,date))):$(_bb7).combo("setText",_bb8));var date=opts.parser.call(_bb7,_bb8);$(_bb7).datetimebox("calendar").calendar("moveTo",date),$(_bb7).datetimebox("spinner").timespinner("setValue",function(date){function _bbb(_bbc){return(_bbc<10?"0":"")+_bbc}var tt=[_bbb(date.getHours()),_bbb(date.getMinutes())];opts.showSeconds&&tt.push(_bbb(date.getSeconds()));return tt.join($(_bb7).datetimebox("spinner").timespinner("options").separator)}(date))}$.fn.datetimebox=function(_bbd,_bbe){if("string"!=typeof _bbd)return _bbd=_bbd||{},this.each(function(){var _bac,_baf,p,_bad,opts,_bc0=$.data(this,"datetimebox");_bc0?$.extend(_bc0.options,_bbd):$.data(this,"datetimebox",{options:$.extend({},$.fn.datetimebox.defaults,$.fn.datetimebox.parseOptions(this),_bbd)}),_bac=this,_bad=$.data(_bac,"datetimebox"),opts=_bad.options,$(_bac).datebox($.extend({},opts,{onShowPanel:function(){_bb4(this,$(this).datetimebox("getValue"),!0),opts.onShowPanel.call(this)},formatter:$.fn.datebox.defaults.formatter,parser:$.fn.datebox.defaults.parser})),$(_bac).removeClass("datebox-f").addClass("datetimebox-f"),$(_bac).datebox("calendar").calendar({onSelect:function(date){opts.onSelect.call(this.target,date)}}),_bad.spinner||(_baf=$(_bac).datebox("panel"),p=$('<div style="padding:2px"><input></div>').insertAfter(_baf.children("div.datebox-calendar-inner")),_bad.spinner=p.children("input")),_bad.spinner.timespinner({width:opts.spinnerWidth,showSeconds:opts.showSeconds,separator:opts.timeSeparator}),$(_bac).datetimebox("initValue",opts.value)});var _bbf=$.fn.datetimebox.methods[_bbd];return _bbf?_bbf(this,_bbe):this.datebox(_bbd,_bbe)},$.fn.datetimebox.methods={options:function(jq){var _bc1=jq.datebox("options");return $.extend($.data(jq[0],"datetimebox").options,{originalValue:_bc1.originalValue,disabled:_bc1.disabled,readonly:_bc1.readonly})},cloneFrom:function(jq,from){return jq.each(function(){$(this).datebox("cloneFrom",from),$.data(this,"datetimebox",{options:$.extend(!0,{},$(from).datetimebox("options")),spinner:$(from).datetimebox("spinner")}),$(this).removeClass("datebox-f").addClass("datetimebox-f")})},spinner:function(jq){return $.data(jq[0],"datetimebox").spinner},initValue:function(jq,_bc2){return jq.each(function(){var opts=$(this).datetimebox("options"),_bc3=(_bc3=opts.value)&&opts.formatter.call(this,opts.parser.call(this,_bc3));$(this).combo("initValue",_bc3).combo("setText",_bc3)})},setValue:function(jq,_bc4){return jq.each(function(){_bb4(this,_bc4)})},reset:function(jq){return jq.each(function(){var opts=$(this).datetimebox("options");$(this).datetimebox("setValue",opts.originalValue)})}},$.fn.datetimebox.parseOptions=function(_bc5){$(_bc5);return $.extend({},$.fn.datebox.parseOptions(_bc5),$.parser.parseOptions(_bc5,["timeSeparator","spinnerWidth",{showSeconds:"boolean"}]))},$.fn.datetimebox.defaults=$.extend({},$.fn.datebox.defaults,{spinnerWidth:"100%",showSeconds:!0,timeSeparator:":",keyHandler:{up:function(e){},down:function(e){},left:function(e){},right:function(e){},enter:function(e){_bb5(this)},query:function(q,e){!function(_bb3,q){_bb4(_bb3,q,!0)}(this,q)}},buttons:[{text:function(_bc6){return $(_bc6).datetimebox("options").currentText},handler:function(_bc7){_bb4(_bc7,$(_bc7).datetimebox("options").formatter.call(_bc7,new Date)),$(_bc7).datetimebox("hidePanel")}},{text:function(_bc8){return $(_bc8).datetimebox("options").okText},handler:function(_bc9){_bb5(_bc9)}},{text:function(_bca){return $(_bca).datetimebox("options").closeText},handler:function(_bcb){$(_bcb).datetimebox("hidePanel")}}],formatter:function(date){var h=date.getHours(),M=date.getMinutes(),s=date.getSeconds();function _bcc(_bcd){return(_bcd<10?"0":"")+_bcd}var _bce=$(this).datetimebox("spinner").timespinner("options").separator,r=$.fn.datebox.defaults.formatter(date)+" "+_bcc(h)+_bce+_bcc(M);return $(this).datetimebox("options").showSeconds&&(r+=_bce+_bcc(s)),r},parser:function(s){if(""==$.trim(s))return new Date;var dt=s.split(" "),d=$.fn.datebox.defaults.parser(dt[0]);if(dt.length<2)return d;var _bcf=$(this).datetimebox("spinner").timespinner("options").separator,tt=dt[1].split(_bcf),hour=parseInt(tt[0],10)||0,_bd0=parseInt(tt[1],10)||0,_bd1=parseInt(tt[2],10)||0;return new Date(d.getFullYear(),d.getMonth(),d.getDate(),hour,_bd0,_bd1)}})}($$),function($){function init(_bd2){var _bd3=$('<div class="slider"><div class="slider-inner"><a href="javascript:;" class="slider-handle"></a><span class="slider-tip"></span></div><div class="slider-rule"></div><div class="slider-rulelabel"></div><div style="clear:both"></div><input type="hidden" class="slider-value"></div>').insertAfter(_bd2),t=$(_bd2);t.addClass("slider-f").hide();var name=t.attr("name");return name&&(_bd3.find("input.slider-value").attr("name",name),t.removeAttr("name").attr("sliderName",name)),_bd3.bind("_resize",function(e,_bd4){return($(this).hasClass("easyui-fluid")||_bd4)&&_bd5(_bd2),!1}),_bd3}function _bd5(_bd6,_bd7){var _bd8=$.data(_bd6,"slider"),opts=_bd8.options,_bd9=_bd8.slider;_bd7&&(_bd7.width&&(opts.width=_bd7.width),_bd7.height&&(opts.height=_bd7.height)),_bd9._size(opts),"h"==opts.mode?(_bd9.css("height",""),_bd9.children("div").css("height","")):(_bd9.css("width",""),_bd9.children("div").css("width",""),_bd9.children("div.slider-rule,div.slider-rulelabel,div.slider-inner")._outerHeight(_bd9._outerHeight())),_bda(_bd6)}function _bdb(_bdc){var _bdd=$.data(_bdc,"slider"),opts=_bdd.options,_bde=_bdd.slider,aa="h"==opts.mode?opts.rule:opts.rule.slice(0).reverse();opts.reversed&&(aa=aa.slice(0).reverse()),function(aa){var rule=_bde.find("div.slider-rule"),_be0=_bde.find("div.slider-rulelabel");rule.empty(),_be0.empty();for(var i=0;i<aa.length;i++){var _be1=100*i/(aa.length-1)+"%",span=$("<span></span>").appendTo(rule);span.css("h"==opts.mode?"left":"top",_be1),"|"!=aa[i]&&((span=$("<span></span>").appendTo(_be0)).html(aa[i]),"h"==opts.mode?span.css({left:_be1,marginLeft:-Math.round(span.outerWidth()/2)}):span.css({top:_be1,marginTop:-Math.round(span.outerHeight()/2)}))}}(aa)}function _be2(_be3){var _be4=$.data(_be3,"slider"),opts=_be4.options,_be5=_be4.slider;_be5.removeClass("slider-h slider-v slider-disabled"),_be5.addClass("h"==opts.mode?"slider-h":"slider-v"),_be5.addClass(opts.disabled?"slider-disabled":"");var _be6=_be5.find(".slider-inner");function _be8(pos,_be9){var v1,v2,m,_bec,_bea=_beb(_be3,pos),s=Math.abs(_bea%opts.step);s<opts.step/2?_bea-=s:_bea=_bea-s+opts.step,opts.range?(v1=opts.value[0],v2=opts.value[1],m=parseFloat((v1+v2)/2),_be9?(_bec=0<$(_be9).nextAll(".slider-handle").length,_bea<=v2&&_bec?v1=_bea:v1<=_bea&&!_bec&&(v2=_bea)):_bea<v1||!(v2<_bea)&&_bea<m?v1=_bea:v2=_bea,$(_be3).slider("setValues",[v1,v2])):$(_be3).slider("setValue",_bea)}_be6.html('<a href="javascript:;" class="slider-handle"></a><span class="slider-tip"></span>'),opts.range&&_be6.append('<a href="javascript:;" class="slider-handle"></a><span class="slider-tip"></span>'),_be5.find("a.slider-handle").draggable({axis:opts.mode,cursor:"pointer",disabled:opts.disabled,onDrag:function(e){var left=e.data.left,_be7=_be5.width();return"h"!=opts.mode&&(left=e.data.top,_be7=_be5.height()),left<0||_be7<left||_be8(left,this),!1},onStartDrag:function(){_be4.isDragging=!0,opts.onSlideStart.call(_be3,opts.value)},onStopDrag:function(e){_be8("h"==opts.mode?e.data.left:e.data.top,this),opts.onSlideEnd.call(_be3,opts.value),opts.onComplete.call(_be3,opts.value),_be4.isDragging=!1}}),_be5.find("div.slider-inner").unbind(".slider").bind("mousedown.slider",function(e){var pos;_be4.isDragging||opts.disabled||(pos=$(this).offset(),_be8("h"==opts.mode?e.pageX-pos.left:e.pageY-pos.top),opts.onComplete.call(_be3,opts.value))})}function _bed(_bee,_bef){var _bf0=$.data(_bee,"slider"),opts=_bf0.options,_bf1=_bf0.slider,_bf2=$.isArray(opts.value)?opts.value:[opts.value],_bf3=[];$.isArray(_bef)||(_bef=$.map(String(_bef).split(opts.separator),function(v){return parseFloat(v)})),_bf1.find(".slider-value").remove();for(var name=$(_bee).attr("sliderName")||"",i=0;i<_bef.length;i++){var _bf4=_bef[i];_bf4<opts.min&&(_bf4=opts.min),_bf4>opts.max&&(_bf4=opts.max);var _bf5=$('<input type="hidden" class="slider-value">').appendTo(_bf1);_bf5.attr("name",name),_bf5.val(_bf4),_bf3.push(_bf4);var _bf8,_bf6=_bf1.find(".slider-handle:eq("+i+")"),tip=_bf6.next(),pos=_bf7(_bee,_bf4);opts.showTip?(tip.show(),tip.html(opts.tipFormatter.call(_bee,_bf4))):tip.hide(),"h"==opts.mode?(_bf8="left:"+pos+"px;",_bf6.attr("style",_bf8),tip.attr("style",_bf8+"margin-left:"+-Math.round(tip.outerWidth()/2)+"px")):(_bf8="top:"+pos+"px;",_bf6.attr("style",_bf8),tip.attr("style",_bf8+"margin-left:"+-Math.round(tip.outerWidth())+"px"))}opts.value=opts.range?_bf3:_bf3[0],$(_bee).val(opts.range?_bf3.join(opts.separator):_bf3[0]),_bf2.join(",")!=_bf3.join(",")&&opts.onChange.call(_bee,opts.value,opts.range?_bf2:_bf2[0])}function _bda(_bf9){var opts=$.data(_bf9,"slider").options,fn=opts.onChange;opts.onChange=function(){},_bed(_bf9,opts.value),opts.onChange=fn}function _bf7(_bfa,_bfb){var _bfc=$.data(_bfa,"slider"),opts=_bfc.options,_bfd=_bfc.slider,size="h"==opts.mode?_bfd.width():_bfd.height(),pos=opts.converter.toPosition.call(_bfa,_bfb,size);return"v"==opts.mode&&(pos=_bfd.height()-pos),opts.reversed&&(pos=size-pos),pos.toFixed(0)}function _beb(_bfe,pos){var _bff=$.data(_bfe,"slider"),opts=_bff.options,_c00=_bff.slider,size="h"==opts.mode?_c00.width():_c00.height(),pos="h"==opts.mode?opts.reversed?size-pos:pos:opts.reversed?pos:size-pos;return opts.converter.toValue.call(_bfe,pos,size).toFixed(0)}$.fn.slider=function(_c02,_c03){return"string"==typeof _c02?$.fn.slider.methods[_c02](this,_c03):(_c02=_c02||{},this.each(function(){var _c04=$.data(this,"slider");_c04?$.extend(_c04.options,_c02):(_c04=$.data(this,"slider",{options:$.extend({},$.fn.slider.defaults,$.fn.slider.parseOptions(this),_c02),slider:init(this)}),$(this).removeAttr("disabled"));var opts=_c04.options;opts.min=parseFloat(opts.min),opts.max=parseFloat(opts.max),opts.range?($.isArray(opts.value)||(opts.value=$.map(String(opts.value).split(opts.separator),function(v){return parseFloat(v)})),opts.value.length<2&&opts.value.push(opts.max)):opts.value=parseFloat(opts.value),opts.step=parseFloat(opts.step),opts.originalValue=opts.value,_be2(this),_bdb(this),_bd5(this)}))},$.fn.slider.methods={options:function(jq){return $.data(jq[0],"slider").options},destroy:function(jq){return jq.each(function(){$.data(this,"slider").slider.remove(),$(this).remove()})},resize:function(jq,_c05){return jq.each(function(){_bd5(this,_c05)})},getValue:function(jq){return jq.slider("options").value},getValues:function(jq){return jq.slider("options").value},setValue:function(jq,_c06){return jq.each(function(){_bed(this,[_c06])})},setValues:function(jq,_c07){return jq.each(function(){_bed(this,_c07)})},clear:function(jq){return jq.each(function(){var opts=$(this).slider("options");_bed(this,opts.range?[opts.min,opts.max]:[opts.min])})},reset:function(jq){return jq.each(function(){var opts=$(this).slider("options");$(this).slider(opts.range?"setValues":"setValue",opts.originalValue)})},enable:function(jq){return jq.each(function(){$.data(this,"slider").options.disabled=!1,_be2(this)})},disable:function(jq){return jq.each(function(){$.data(this,"slider").options.disabled=!0,_be2(this)})}},$.fn.slider.parseOptions=function(_c08){var t=$(_c08);return $.extend({},$.parser.parseOptions(_c08,["width","height","mode",{reversed:"boolean",showTip:"boolean",range:"boolean",min:"number",max:"number",step:"number"}]),{value:t.val()||void 0,disabled:!!t.attr("disabled")||void 0,rule:t.attr("rule")?eval(t.attr("rule")):void 0})},$.fn.slider.defaults={width:"auto",height:"auto",mode:"h",reversed:!1,showTip:!1,disabled:!1,range:!1,value:0,separator:",",min:0,max:100,step:1,rule:[],tipFormatter:function(_c09){return _c09},converter:{toPosition:function(_c0a,size){var opts=$(this).slider("options");return(_c0a-opts.min)/(opts.max-opts.min)*size},toValue:function(pos,size){var opts=$(this).slider("options");return opts.min+(opts.max-opts.min)*(pos/size)}},onChange:function(_c0b,_c0c){},onSlideStart:function(_c0d){},onSlideEnd:function(_c0e){},onComplete:function(_c0f){}}}($$),function($){var settings={},roots={},caches={},_consts={className:{BUTTON:"button",LEVEL:"level",ICO_LOADING:"ico_loading",SWITCH:"switch"},event:{NODECREATED:"ztree_nodeCreated",CLICK:"ztree_click",EXPAND:"ztree_expand",COLLAPSE:"ztree_collapse",ASYNC_SUCCESS:"ztree_async_success",ASYNC_ERROR:"ztree_async_error",REMOVE:"ztree_remove"},id:{A:"_a",ICON:"_ico",SPAN:"_span",SWITCH:"_switch",UL:"_ul"},line:{ROOT:"root",ROOTS:"roots",CENTER:"center",BOTTOM:"bottom",NOLINE:"noline",LINE:"line"},folder:{OPEN:"open",CLOSE:"close",DOCU:"docu"},node:{CURSELECTED:"curSelectedNode"}},_setting={treeId:"",treeObj:null,view:{addDiyDom:null,autoCancelSelected:!0,dblClickExpand:!0,expandSpeed:"fast",fontCss:{},nameIsHTML:!1,selectedMulti:!0,showIcon:!0,showLine:!0,showTitle:!0,txtSelectedEnable:!1},data:{key:{children:"children",name:"name",title:"",url:"url"},simpleData:{enable:!1,idKey:"id",pIdKey:"pId",rootPId:null},keep:{parent:!1,leaf:!1}},async:{enable:!1,contentType:"application/x-www-form-urlencoded",type:"post",dataType:"text",url:"",autoParam:[],otherParam:[],dataFilter:null},callback:{beforeAsync:null,beforeClick:null,beforeDblClick:null,beforeRightClick:null,beforeMouseDown:null,beforeMouseUp:null,beforeExpand:null,beforeCollapse:null,beforeRemove:null,onAsyncError:null,onAsyncSuccess:null,onNodeCreated:null,onClick:null,onDblClick:null,onRightClick:null,onMouseDown:null,onMouseUp:null,onExpand:null,onCollapse:null,onRemove:null}},_initRoot=function(setting){var r=data.getRoot(setting);r||(r={},data.setRoot(setting,r)),r[setting.data.key.children]=[],r.expandTriggerFlag=!1,r.curSelectedList=[],r.noSelection=!0,r.createdNodes=[],r.zId=0,r._ver=(new Date).getTime()},_initCache=function(setting){var c=data.getCache(setting);c||(c={},data.setCache(setting,c)),c.nodes=[],c.doms=[]},_bindEvent=function(setting){var o=setting.treeObj,c=consts.event;o.bind(c.NODECREATED,function(event,treeId,node){tools.apply(setting.callback.onNodeCreated,[event,treeId,node])}),o.bind(c.CLICK,function(event,srcEvent,treeId,node,clickFlag){tools.apply(setting.callback.onClick,[srcEvent,treeId,node,clickFlag])}),o.bind(c.EXPAND,function(event,treeId,node){tools.apply(setting.callback.onExpand,[event,treeId,node])}),o.bind(c.COLLAPSE,function(event,treeId,node){tools.apply(setting.callback.onCollapse,[event,treeId,node])}),o.bind(c.ASYNC_SUCCESS,function(event,treeId,node,msg){tools.apply(setting.callback.onAsyncSuccess,[event,treeId,node,msg])}),o.bind(c.ASYNC_ERROR,function(event,treeId,node,XMLHttpRequest,textStatus,errorThrown){tools.apply(setting.callback.onAsyncError,[event,treeId,node,XMLHttpRequest,textStatus,errorThrown])}),o.bind(c.REMOVE,function(event,treeId,treeNode){tools.apply(setting.callback.onRemove,[event,treeId,treeNode])})},_unbindEvent=function(setting){var o=setting.treeObj,c=consts.event;o.unbind(c.NODECREATED).unbind(c.CLICK).unbind(c.EXPAND).unbind(c.COLLAPSE).unbind(c.ASYNC_SUCCESS).unbind(c.ASYNC_ERROR).unbind(c.REMOVE)},_eventProxy=function(event){var target=event.target,setting=data.getSetting(event.data.treeId),tId="",node=null,nodeEventType="",treeEventType="",nodeEventCallback=null,treeEventCallback=null,tmp=null;if(tools.eqs(event.type,"mousedown")?treeEventType="mousedown":tools.eqs(event.type,"mouseup")?treeEventType="mouseup":tools.eqs(event.type,"contextmenu")?treeEventType="contextmenu":tools.eqs(event.type,"click")?tools.eqs(target.tagName,"span")&&null!==target.getAttribute("treeNode"+consts.id.SWITCH)?(tId=tools.getNodeMainDom(target).id,nodeEventType="switchNode"):(tmp=tools.getMDom(setting,target,[{tagName:"a",attrName:"treeNode"+consts.id.A}]))&&(tId=tools.getNodeMainDom(tmp).id,nodeEventType="clickNode"):tools.eqs(event.type,"dblclick")&&(treeEventType="dblclick",(tmp=tools.getMDom(setting,target,[{tagName:"a",attrName:"treeNode"+consts.id.A}]))&&(tId=tools.getNodeMainDom(tmp).id,nodeEventType="switchNode")),0<treeEventType.length&&0==tId.length&&(tmp=tools.getMDom(setting,target,[{tagName:"a",attrName:"treeNode"+consts.id.A}]))&&(tId=tools.getNodeMainDom(tmp).id),0<tId.length)switch(node=data.getNodeCache(setting,tId),nodeEventType){case"switchNode":node.isParent&&(tools.eqs(event.type,"click")||tools.eqs(event.type,"dblclick")&&tools.apply(setting.view.dblClickExpand,[setting.treeId,node],setting.view.dblClickExpand))?nodeEventCallback=handler.onSwitchNode:nodeEventType="";break;case"clickNode":nodeEventCallback=handler.onClickNode}switch(treeEventType){case"mousedown":treeEventCallback=handler.onZTreeMousedown;break;case"mouseup":treeEventCallback=handler.onZTreeMouseup;break;case"dblclick":treeEventCallback=handler.onZTreeDblclick;break;case"contextmenu":treeEventCallback=handler.onZTreeContextmenu}return{stop:!1,node:node,nodeEventType:nodeEventType,nodeEventCallback:nodeEventCallback,treeEventType:treeEventType,treeEventCallback:treeEventCallback}},_initNode=function(setting,level,n,parentNode,isFirstNode,isLastNode,openFlag){var r,childKey;n&&(r=data.getRoot(setting),childKey=setting.data.key.children,n.level=level,n.tId=setting.treeId+"_"+ ++r.zId,n.parentTId=parentNode?parentNode.tId:null,n.open="string"==typeof n.open?tools.eqs(n.open,"true"):!!n.open,n[childKey]&&0<n[childKey].length?(n.isParent=!0,n.zAsync=!0):(n.isParent="string"==typeof n.isParent?tools.eqs(n.isParent,"true"):!!n.isParent,n.open=!(!n.isParent||setting.async.enable)&&n.open,n.zAsync=!n.isParent),n.isFirstNode=isFirstNode,n.isLastNode=isLastNode,n.getParentNode=function(){return data.getNodeCache(setting,n.parentTId)},n.getPreNode=function(){return data.getPreNode(setting,n)},n.getNextNode=function(){return data.getNextNode(setting,n)},n.isAjaxing=!1,data.fixPIdKeyValue(setting,n))},_init={bind:[_bindEvent],unbind:[_unbindEvent],caches:[_initCache],nodes:[_initNode],proxys:[_eventProxy],roots:[_initRoot],beforeA:[],afterA:[],innerBeforeA:[],innerAfterA:[],zTreeTools:[]},data={addNodeCache:function(setting,node){data.getCache(setting).nodes[data.getNodeCacheId(node.tId)]=node},getNodeCacheId:function(tId){return tId.substring(tId.lastIndexOf("_")+1)},addAfterA:function(afterA){_init.afterA.push(afterA)},addBeforeA:function(beforeA){_init.beforeA.push(beforeA)},addInnerAfterA:function(innerAfterA){_init.innerAfterA.push(innerAfterA)},addInnerBeforeA:function(innerBeforeA){_init.innerBeforeA.push(innerBeforeA)},addInitBind:function(bindEvent){_init.bind.push(bindEvent)},addInitUnBind:function(unbindEvent){_init.unbind.push(unbindEvent)},addInitCache:function(initCache){_init.caches.push(initCache)},addInitNode:function(initNode){_init.nodes.push(initNode)},addInitProxy:function(initProxy,isFirst){isFirst?_init.proxys.splice(0,0,initProxy):_init.proxys.push(initProxy)},addInitRoot:function(initRoot){_init.roots.push(initRoot)},addNodesData:function(setting,parentNode,nodes){var childKey=setting.data.key.children;parentNode[childKey]||(parentNode[childKey]=[]),0<parentNode[childKey].length&&(parentNode[childKey][parentNode[childKey].length-1].isLastNode=!1,view.setNodeLineIcos(setting,parentNode[childKey][parentNode[childKey].length-1])),parentNode.isParent=!0,parentNode[childKey]=parentNode[childKey].concat(nodes)},addSelectedNode:function(setting,node){var root=data.getRoot(setting);data.isSelectedNode(setting,node)||root.curSelectedList.push(node)},addCreatedNode:function(setting,node){(setting.callback.onNodeCreated||setting.view.addDiyDom)&&data.getRoot(setting).createdNodes.push(node)},addZTreeTools:function(zTreeTools){_init.zTreeTools.push(zTreeTools)},exSetting:function(s){$.extend(!0,_setting,s)},fixPIdKeyValue:function(setting,node){setting.data.simpleData.enable&&(node[setting.data.simpleData.pIdKey]=node.parentTId?node.getParentNode()[setting.data.simpleData.idKey]:setting.data.simpleData.rootPId)},getAfterA:function(setting,node,array){for(var i=0,j=_init.afterA.length;i<j;i++)_init.afterA[i].apply(this,arguments)},getBeforeA:function(setting,node,array){for(var i=0,j=_init.beforeA.length;i<j;i++)_init.beforeA[i].apply(this,arguments)},getInnerAfterA:function(setting,node,array){for(var i=0,j=_init.innerAfterA.length;i<j;i++)_init.innerAfterA[i].apply(this,arguments)},getInnerBeforeA:function(setting,node,array){for(var i=0,j=_init.innerBeforeA.length;i<j;i++)_init.innerBeforeA[i].apply(this,arguments)},getCache:function(setting){return caches[setting.treeId]},getNextNode:function(setting,node){if(!node)return null;for(var childKey=setting.data.key.children,p=node.parentTId?node.getParentNode():data.getRoot(setting),i=0,l=p[childKey].length-1;i<=l;i++)if(p[childKey][i]===node)return i==l?null:p[childKey][i+1];return null},getNodeByParam:function(setting,nodes,key,value){if(!nodes||!key)return null;for(var childKey=setting.data.key.children,i=0,l=nodes.length;i<l;i++){if(nodes[i][key]==value)return nodes[i];var tmp=data.getNodeByParam(setting,nodes[i][childKey],key,value);if(tmp)return tmp}return null},getNodeCache:function(setting,tId){if(!tId)return null;var n=caches[setting.treeId].nodes[data.getNodeCacheId(tId)];return n||null},getNodeName:function(setting,node){return""+node[setting.data.key.name]},getNodeTitle:function(setting,node){return""+node[""===setting.data.key.title?setting.data.key.name:setting.data.key.title]},getNodes:function(setting){return data.getRoot(setting)[setting.data.key.children]},getNodesByParam:function(setting,nodes,key,value){if(!nodes||!key)return[];for(var childKey=setting.data.key.children,result=[],i=0,l=nodes.length;i<l;i++)nodes[i][key]==value&&result.push(nodes[i]),result=result.concat(data.getNodesByParam(setting,nodes[i][childKey],key,value));return result},getNodesByParamFuzzy:function(setting,nodes,key,value){if(!nodes||!key)return[];var childKey=setting.data.key.children,result=[];value=value.toLowerCase();for(var i=0,l=nodes.length;i<l;i++)"string"==typeof nodes[i][key]&&-1<nodes[i][key].toLowerCase().indexOf(value)&&result.push(nodes[i]),result=result.concat(data.getNodesByParamFuzzy(setting,nodes[i][childKey],key,value));return result},getNodesByFilter:function(setting,nodes,filter,isSingle,invokeParam){if(!nodes)return isSingle?null:[];for(var childKey=setting.data.key.children,result=isSingle?null:[],i=0,l=nodes.length;i<l;i++){if(tools.apply(filter,[nodes[i],invokeParam],!1)){if(isSingle)return nodes[i];result.push(nodes[i])}var tmpResult=data.getNodesByFilter(setting,nodes[i][childKey],filter,isSingle,invokeParam);if(isSingle&&tmpResult)return tmpResult;result=isSingle?tmpResult:result.concat(tmpResult)}return result},getPreNode:function(setting,node){if(!node)return null;for(var childKey=setting.data.key.children,p=node.parentTId?node.getParentNode():data.getRoot(setting),i=0,l=p[childKey].length;i<l;i++)if(p[childKey][i]===node)return 0==i?null:p[childKey][i-1];return null},getRoot:function(setting){return setting?roots[setting.treeId]:null},getRoots:function(){return roots},getSetting:function(treeId){return settings[treeId]},getSettings:function(){return settings},getZTreeTools:function(treeId){var r=this.getRoot(this.getSetting(treeId));return r?r.treeTools:null},initCache:function(setting){for(var i=0,j=_init.caches.length;i<j;i++)_init.caches[i].apply(this,arguments)},initNode:function(setting,level,node,parentNode,preNode,nextNode){for(var i=0,j=_init.nodes.length;i<j;i++)_init.nodes[i].apply(this,arguments)},initRoot:function(setting){for(var i=0,j=_init.roots.length;i<j;i++)_init.roots[i].apply(this,arguments)},isSelectedNode:function(setting,node){for(var root=data.getRoot(setting),i=0,j=root.curSelectedList.length;i<j;i++)if(node===root.curSelectedList[i])return!0;return!1},removeNodeCache:function(setting,node){var childKey=setting.data.key.children;if(node[childKey])for(var i=0,l=node[childKey].length;i<l;i++)arguments.callee(setting,node[childKey][i]);data.getCache(setting).nodes[data.getNodeCacheId(node.tId)]=null},removeSelectedNode:function(setting,node){for(var root=data.getRoot(setting),i=0,j=root.curSelectedList.length;i<j;i++)node!==root.curSelectedList[i]&&data.getNodeCache(setting,root.curSelectedList[i].tId)||(root.curSelectedList.splice(i,1),i--,j--)},setCache:function(setting,cache){caches[setting.treeId]=cache},setRoot:function(setting,root){roots[setting.treeId]=root},setZTreeTools:function(setting,zTreeTools){for(var i=0,j=_init.zTreeTools.length;i<j;i++)_init.zTreeTools[i].apply(this,arguments)},transformToArrayFormat:function(setting,nodes){if(!nodes)return[];var childKey=setting.data.key.children,r=[];if(tools.isArray(nodes))for(var i=0,l=nodes.length;i<l;i++)r.push(nodes[i]),nodes[i][childKey]&&(r=r.concat(data.transformToArrayFormat(setting,nodes[i][childKey])));else r.push(nodes),nodes[childKey]&&(r=r.concat(data.transformToArrayFormat(setting,nodes[childKey])));return r},transformTozTreeFormat:function(setting,sNodes){var key=setting.data.simpleData.idKey,parentKey=setting.data.simpleData.pIdKey,childKey=setting.data.key.children;if(!key||""==key||!sNodes)return[];if(tools.isArray(sNodes)){for(var r=[],tmpMap=[],i=0,l=sNodes.length;i<l;i++)tmpMap[sNodes[i][key]]=sNodes[i];for(i=0,l=sNodes.length;i<l;i++)tmpMap[sNodes[i][parentKey]]&&sNodes[i][key]!=sNodes[i][parentKey]?(tmpMap[sNodes[i][parentKey]][childKey]||(tmpMap[sNodes[i][parentKey]][childKey]=[]),tmpMap[sNodes[i][parentKey]][childKey].push(sNodes[i])):r.push(sNodes[i]);return r}return[sNodes]}},event={bindEvent:function(setting){for(var i=0,j=_init.bind.length;i<j;i++)_init.bind[i].apply(this,arguments)},unbindEvent:function(setting){for(var i=0,j=_init.unbind.length;i<j;i++)_init.unbind[i].apply(this,arguments)},bindTree:function(setting){var eventParam={treeId:setting.treeId},o=setting.treeObj;setting.view.txtSelectedEnable||o.bind("selectstart",function(e){var n=e.originalEvent.srcElement.nodeName.toLowerCase();return"input"===n||"textarea"===n}).css({"-moz-user-select":"-moz-none"}),o.bind("click",eventParam,event.proxy),o.bind("dblclick",eventParam,event.proxy),o.bind("mouseover",eventParam,event.proxy),o.bind("mouseout",eventParam,event.proxy),o.bind("mousedown",eventParam,event.proxy),o.bind("mouseup",eventParam,event.proxy),o.bind("contextmenu",eventParam,event.proxy)},unbindTree:function(setting){setting.treeObj.unbind("click",event.proxy).unbind("dblclick",event.proxy).unbind("mouseover",event.proxy).unbind("mouseout",event.proxy).unbind("mousedown",event.proxy).unbind("mouseup",event.proxy).unbind("contextmenu",event.proxy)},doProxy:function(e){for(var results=[],i=0,j=_init.proxys.length;i<j;i++){var proxyResult=_init.proxys[i].apply(this,arguments);if(results.push(proxyResult),proxyResult.stop)break}return results},proxy:function(e){var setting=data.getSetting(e.data.treeId);if(!tools.uCanDo(setting,e))return!0;for(var results=event.doProxy(e),r=!0,i=0,l=results.length;i<l;i++){var proxyResult=results[i];proxyResult.nodeEventCallback&&(r=proxyResult.nodeEventCallback.apply(proxyResult,[e,proxyResult.node])&&r),proxyResult.treeEventCallback&&(r=proxyResult.treeEventCallback.apply(proxyResult,[e,proxyResult.node])&&r)}return r}},handler={onSwitchNode:function(event,node){var setting=data.getSetting(event.data.treeId);if(node.open){if(0==tools.apply(setting.callback.beforeCollapse,[setting.treeId,node],!0))return!0;data.getRoot(setting).expandTriggerFlag=!0,view.switchNode(setting,node)}else{if(0==tools.apply(setting.callback.beforeExpand,[setting.treeId,node],!0))return!0;data.getRoot(setting).expandTriggerFlag=!0,view.switchNode(setting,node)}return!0},onClickNode:function(event,node){var setting=data.getSetting(event.data.treeId),clickFlag=setting.view.autoCancelSelected&&(event.ctrlKey||event.metaKey)&&data.isSelectedNode(setting,node)?0:setting.view.autoCancelSelected&&(event.ctrlKey||event.metaKey)&&setting.view.selectedMulti?2:1;return 0==tools.apply(setting.callback.beforeClick,[setting.treeId,node,clickFlag],!0)||(0==clickFlag?view.cancelPreSelectedNode(setting,node):view.selectNode(setting,node,2==clickFlag),setting.treeObj.trigger(consts.event.CLICK,[event,setting.treeId,node,clickFlag])),!0},onZTreeMousedown:function(event,node){var setting=data.getSetting(event.data.treeId);return tools.apply(setting.callback.beforeMouseDown,[setting.treeId,node],!0)&&tools.apply(setting.callback.onMouseDown,[event,setting.treeId,node]),!0},onZTreeMouseup:function(event,node){var setting=data.getSetting(event.data.treeId);return tools.apply(setting.callback.beforeMouseUp,[setting.treeId,node],!0)&&tools.apply(setting.callback.onMouseUp,[event,setting.treeId,node]),!0},onZTreeDblclick:function(event,node){var setting=data.getSetting(event.data.treeId);return tools.apply(setting.callback.beforeDblClick,[setting.treeId,node],!0)&&tools.apply(setting.callback.onDblClick,[event,setting.treeId,node]),!0},onZTreeContextmenu:function(event,node){var setting=data.getSetting(event.data.treeId);return tools.apply(setting.callback.beforeRightClick,[setting.treeId,node],!0)&&tools.apply(setting.callback.onRightClick,[event,setting.treeId,node]),"function"!=typeof setting.callback.onRightClick}},tools={apply:function(fun,param,defaultValue){return"function"==typeof fun?fun.apply(zt,param||[]):defaultValue},canAsync:function(setting,node){var childKey=setting.data.key.children;return setting.async.enable&&node&&node.isParent&&!(node.zAsync||node[childKey]&&0<node[childKey].length)},clone:function(obj){if(null===obj)return null;var i,o=tools.isArray(obj)?[]:{};for(i in obj)o[i]=obj[i]instanceof Date?new Date(obj[i].getTime()):"object"==typeof obj[i]?arguments.callee(obj[i]):obj[i];return o},eqs:function(str1,str2){return str1.toLowerCase()===str2.toLowerCase()},isArray:function(arr){return"[object Array]"===Object.prototype.toString.apply(arr)},$:function(node,exp,setting){return exp&&"string"!=typeof exp&&(setting=exp,exp=""),"string"==typeof node?$(node,setting?setting.treeObj.get(0).ownerDocument:null):$("#"+node.tId+exp,setting?setting.treeObj:null)},getMDom:function(setting,curDom,targetExpr){if(!curDom)return null;for(;curDom&&curDom.id!==setting.treeId;){for(var i=0,l=targetExpr.length;curDom.tagName&&i<l;i++)if(tools.eqs(curDom.tagName,targetExpr[i].tagName)&&null!==curDom.getAttribute(targetExpr[i].attrName))return curDom;curDom=curDom.parentNode}return null},getNodeMainDom:function(target){return $(target).parent("li").get(0)||$(target).parentsUntil("li").parent().get(0)},isChildOrSelf:function(dom,parentId){return 0<$(dom).closest("#"+parentId).length},uCanDo:function(setting,e){return!0}},view={addNodes:function(setting,parentNode,newNodes,isSilent){var target_switchObj,target_icoObj,target_ulObj;setting.data.keep.leaf&&parentNode&&!parentNode.isParent||(tools.isArray(newNodes)||(newNodes=[newNodes]),setting.data.simpleData.enable&&(newNodes=data.transformTozTreeFormat(setting,newNodes)),parentNode?(target_switchObj=$$(parentNode,consts.id.SWITCH,setting),target_icoObj=$$(parentNode,consts.id.ICON,setting),target_ulObj=$$(parentNode,consts.id.UL,setting),parentNode.open||(view.replaceSwitchClass(parentNode,target_switchObj,consts.folder.CLOSE),view.replaceIcoClass(parentNode,target_icoObj,consts.folder.CLOSE),parentNode.open=!1,target_ulObj.css({display:"none"})),data.addNodesData(setting,parentNode,newNodes),view.createNodes(setting,parentNode.level+1,newNodes,parentNode),isSilent||view.expandCollapseParentNode(setting,parentNode,!0)):(data.addNodesData(setting,data.getRoot(setting),newNodes),view.createNodes(setting,0,newNodes,null)))},appendNodes:function(setting,level,nodes,parentNode,initFlag,openFlag){if(!nodes)return[];for(var html=[],childKey=setting.data.key.children,i=0,l=nodes.length;i<l;i++){var isFirstNode,isLastNode,node=nodes[i];initFlag&&(isFirstNode=(parentNode||data.getRoot(setting))[childKey].length==nodes.length&&0==i,isLastNode=i==nodes.length-1,data.initNode(setting,level,node,parentNode,isFirstNode,isLastNode,openFlag),data.addNodeCache(setting,node));var childHtml=[];node[childKey]&&0<node[childKey].length&&(childHtml=view.appendNodes(setting,level+1,node[childKey],node,initFlag,openFlag&&node.open)),openFlag&&(view.makeDOMNodeMainBefore(html,setting,node),view.makeDOMNodeLine(html,setting,node),data.getBeforeA(setting,node,html),view.makeDOMNodeNameBefore(html,setting,node),data.getInnerBeforeA(setting,node,html),view.makeDOMNodeIcon(html,setting,node),data.getInnerAfterA(setting,node,html),view.makeDOMNodeNameAfter(html,setting,node),data.getAfterA(setting,node,html),node.isParent&&node.open&&view.makeUlHtml(setting,node,html,childHtml.join("")),view.makeDOMNodeMainAfter(html,setting,node),data.addCreatedNode(setting,node))}return html},appendParentULDom:function(setting,node){var html=[],nObj=$$(node,setting);!nObj.get(0)&&node.parentTId&&(view.appendParentULDom(setting,node.getParentNode()),nObj=$$(node,setting));var ulObj=$$(node,consts.id.UL,setting);ulObj.get(0)&&ulObj.remove();var childKey=setting.data.key.children,childHtml=view.appendNodes(setting,node.level+1,node[childKey],node,!1,!0);view.makeUlHtml(setting,node,html,childHtml.join("")),nObj.append(html.join(""))},asyncNode:function(setting,node,isSilent,callback){var i,l,icoObj;if(node&&!node.isParent)return tools.apply(callback),!1;if(node&&node.isAjaxing)return!1;if(0==tools.apply(setting.callback.beforeAsync,[setting.treeId,node],!0))return tools.apply(callback),!1;node&&(node.isAjaxing=!0,icoObj=$$(node,consts.id.ICON,setting),icoObj.attr({style:"",class:consts.className.BUTTON+" "+consts.className.ICO_LOADING}));for(var tmpParam={},i=0,l=setting.async.autoParam.length;node&&i<l;i++){var pKey=setting.async.autoParam[i].split("="),spKey=pKey;1<pKey.length&&(spKey=pKey[1],pKey=pKey[0]),tmpParam[spKey]=node[pKey]}if(tools.isArray(setting.async.otherParam))for(i=0,l=setting.async.otherParam.length;i<l;i+=2)tmpParam[setting.async.otherParam[i]]=setting.async.otherParam[i+1];else for(var p in setting.async.otherParam)tmpParam[p]=setting.async.otherParam[p];var _tmpV=data.getRoot(setting)._ver;return $.ajax({contentType:setting.async.contentType,type:setting.async.type,url:tools.apply(setting.async.url,[setting.treeId,node],setting.async.url),data:tmpParam,dataType:setting.async.dataType,success:function(msg){if(_tmpV==data.getRoot(setting)._ver){var newNodes=[];try{newNodes=msg&&0!=msg.length?"string"==typeof msg?eval("("+msg+")"):msg:[]}catch(err){newNodes=msg}node&&(node.isAjaxing=null,node.zAsync=!0),view.setNodeLineIcos(setting,node),newNodes&&""!==newNodes?(newNodes=tools.apply(setting.async.dataFilter,[setting.treeId,node,newNodes],newNodes),view.addNodes(setting,node,newNodes?tools.clone(newNodes):[],!!isSilent)):view.addNodes(setting,node,[],!!isSilent),setting.treeObj.trigger(consts.event.ASYNC_SUCCESS,[setting.treeId,node,msg]),tools.apply(callback)}},error:function(XMLHttpRequest,textStatus,errorThrown){_tmpV==data.getRoot(setting)._ver&&(node&&(node.isAjaxing=null),view.setNodeLineIcos(setting,node),setting.treeObj.trigger(consts.event.ASYNC_ERROR,[setting.treeId,node,XMLHttpRequest,textStatus,errorThrown]))}}),!0},cancelPreSelectedNode:function(setting,node){for(var list=data.getRoot(setting).curSelectedList,j=list.length-1;0<=j;j--)if((!node||node===list[j])&&($$(list[j],consts.id.A,setting).removeClass(consts.node.CURSELECTED),node)){data.removeSelectedNode(setting,node);break}node||(data.getRoot(setting).curSelectedList=[])},createNodeCallback:function(setting){if(setting.callback.onNodeCreated||setting.view.addDiyDom)for(var root=data.getRoot(setting);0<root.createdNodes.length;){var node=root.createdNodes.shift();tools.apply(setting.view.addDiyDom,[setting.treeId,node]),setting.callback.onNodeCreated&&setting.treeObj.trigger(consts.event.NODECREATED,[setting.treeId,node])}},createNodes:function(setting,level,nodes,parentNode){var root,childKey,openFlag,zTreeHtml,ulObj;nodes&&0!=nodes.length&&(root=data.getRoot(setting),childKey=setting.data.key.children,openFlag=!parentNode||parentNode.open||!!$$(parentNode[childKey][0],setting).get(0),root.createdNodes=[],zTreeHtml=view.appendNodes(setting,level,nodes,parentNode,!0,openFlag),parentNode?(ulObj=$$(parentNode,consts.id.UL,setting)).get(0)&&ulObj.append(zTreeHtml.join("")):setting.treeObj.append(zTreeHtml.join("")),view.createNodeCallback(setting))},destroy:function(setting){setting&&(data.initCache(setting),data.initRoot(setting),event.unbindTree(setting),event.unbindEvent(setting),setting.treeObj.empty(),delete settings[setting.treeId])},expandCollapseNode:function(setting,node,expandFlag,animateFlag,callback){var _callback,ulObj,switchObj,icoObj,root=data.getRoot(setting),childKey=setting.data.key.children;node?(root.expandTriggerFlag&&(_callback=callback,callback=function(){_callback&&_callback(),node.open?setting.treeObj.trigger(consts.event.EXPAND,[setting.treeId,node]):setting.treeObj.trigger(consts.event.COLLAPSE,[setting.treeId,node])},root.expandTriggerFlag=!1),!node.open&&node.isParent&&(!$$(node,consts.id.UL,setting).get(0)||node[childKey]&&0<node[childKey].length&&!$$(node[childKey][0],setting).get(0))&&(view.appendParentULDom(setting,node),view.createNodeCallback(setting)),node.open!=expandFlag?(ulObj=$$(node,consts.id.UL,setting),switchObj=$$(node,consts.id.SWITCH,setting),icoObj=$$(node,consts.id.ICON,setting),node.isParent?(node.open=!node.open,node.iconOpen&&node.iconClose&&icoObj.attr("style",view.makeNodeIcoStyle(setting,node)),node.open?(view.replaceSwitchClass(node,switchObj,consts.folder.OPEN),view.replaceIcoClass(node,icoObj,consts.folder.OPEN),0!=animateFlag&&""!=setting.view.expandSpeed&&node[childKey]&&0<node[childKey].length?ulObj.slideDown(setting.view.expandSpeed,callback):(ulObj.show(),tools.apply(callback,[]))):(view.replaceSwitchClass(node,switchObj,consts.folder.CLOSE),view.replaceIcoClass(node,icoObj,consts.folder.CLOSE),0!=animateFlag&&""!=setting.view.expandSpeed&&node[childKey]&&0<node[childKey].length?ulObj.slideUp(setting.view.expandSpeed,callback):(ulObj.hide(),tools.apply(callback,[])))):tools.apply(callback,[])):tools.apply(callback,[])):tools.apply(callback,[])},expandCollapseParentNode:function(setting,node,expandFlag,animateFlag,callback){node&&(node.parentTId?(view.expandCollapseNode(setting,node,expandFlag,animateFlag),node.parentTId&&view.expandCollapseParentNode(setting,node.getParentNode(),expandFlag,animateFlag,callback)):view.expandCollapseNode(setting,node,expandFlag,animateFlag,callback))},expandCollapseSonNode:function(setting,node,expandFlag,animateFlag,callback){var root=data.getRoot(setting),childKey=setting.data.key.children,treeNodes=node?node[childKey]:root[childKey],selfAnimateSign=!node&&animateFlag,expandTriggerFlag=data.getRoot(setting).expandTriggerFlag;if(data.getRoot(setting).expandTriggerFlag=!1,treeNodes)for(var i=0,l=treeNodes.length;i<l;i++)treeNodes[i]&&view.expandCollapseSonNode(setting,treeNodes[i],expandFlag,selfAnimateSign);data.getRoot(setting).expandTriggerFlag=expandTriggerFlag,view.expandCollapseNode(setting,node,expandFlag,animateFlag,callback)},makeDOMNodeIcon:function(html,setting,node){var nameStr=data.getNodeName(setting,node),name=setting.view.nameIsHTML?nameStr:nameStr.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");html.push("<span id='",node.tId,consts.id.ICON,"' title='' treeNode",consts.id.ICON," class='",view.makeNodeIcoClass(setting,node),"' style='",view.makeNodeIcoStyle(setting,node),"'></span><span id='",node.tId,consts.id.SPAN,"'>",name,"</span>")},makeDOMNodeLine:function(html,setting,node){html.push("<span id='",node.tId,consts.id.SWITCH,"' title='' class='",view.makeNodeLineClass(setting,node),"' treeNode",consts.id.SWITCH,"></span>")},makeDOMNodeMainAfter:function(html,setting,node){html.push("</li>")},makeDOMNodeMainBefore:function(html,setting,node){html.push("<li id='",node.tId,"' class='",consts.className.LEVEL,node.level,"' tabindex='0' hidefocus='true' treenode>")},makeDOMNodeNameAfter:function(html,setting,node){html.push("</a>")},makeDOMNodeNameBefore:function(html,setting,node){var f,title=data.getNodeTitle(setting,node),url=view.makeNodeUrl(setting,node),fontcss=view.makeNodeFontCss(setting,node),fontStyle=[];for(f in fontcss)fontStyle.push(f,":",fontcss[f],";");html.push("<a id='",node.tId,consts.id.A,"' class='",consts.className.LEVEL,node.level,"' treeNode",consts.id.A,' onclick="',node.click||"",'" ',null!=url&&0<url.length?"href='"+url+"'":""," target='",view.makeNodeTarget(node),"' style='",fontStyle.join(""),"'"),tools.apply(setting.view.showTitle,[setting.treeId,node],setting.view.showTitle)&&title&&html.push("title='",title.replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),"'"),html.push(">")},makeNodeFontCss:function(setting,node){var fontCss=tools.apply(setting.view.fontCss,[setting.treeId,node],setting.view.fontCss);return fontCss&&"function"!=typeof fontCss?fontCss:{}},makeNodeIcoClass:function(setting,node){var icoCss=["ico"];return node.isAjaxing||(icoCss[0]=(node.iconSkin?node.iconSkin+"_":"")+icoCss[0],node.isParent?icoCss.push(node.open?consts.folder.OPEN:consts.folder.CLOSE):icoCss.push(consts.folder.DOCU)),consts.className.BUTTON+" "+icoCss.join("_")},makeNodeIcoStyle:function(setting,node){var icon,icoStyle=[];return node.isAjaxing||((icon=node.isParent&&node.iconOpen&&node.iconClose?node.open?node.iconOpen:node.iconClose:node.icon)&&icoStyle.push("background:url(",icon,") 0 0 no-repeat;"),0!=setting.view.showIcon&&tools.apply(setting.view.showIcon,[setting.treeId,node],!0)||icoStyle.push("width:0px;height:0px;")),icoStyle.join("")},makeNodeLineClass:function(setting,node){var lineClass=[];return setting.view.showLine?0==node.level&&node.isFirstNode&&node.isLastNode?lineClass.push(consts.line.ROOT):0==node.level&&node.isFirstNode?lineClass.push(consts.line.ROOTS):node.isLastNode?lineClass.push(consts.line.BOTTOM):lineClass.push(consts.line.CENTER):lineClass.push(consts.line.NOLINE),node.isParent?lineClass.push(node.open?consts.folder.OPEN:consts.folder.CLOSE):lineClass.push(consts.folder.DOCU),view.makeNodeLineClassEx(node)+lineClass.join("_")},makeNodeLineClassEx:function(node){return consts.className.BUTTON+" "+consts.className.LEVEL+node.level+" "+consts.className.SWITCH+" "},makeNodeTarget:function(node){return node.target||"_blank"},makeNodeUrl:function(setting,node){var urlKey=setting.data.key.url;return node[urlKey]?node[urlKey]:null},makeUlHtml:function(setting,node,html,content){html.push("<ul id='",node.tId,consts.id.UL,"' class='",consts.className.LEVEL,node.level," ",view.makeUlLineClass(setting,node),"' style='display:",node.open?"block":"none","'>"),html.push(content),html.push("</ul>")},makeUlLineClass:function(setting,node){return setting.view.showLine&&!node.isLastNode?consts.line.LINE:""},removeChildNodes:function(setting,node){if(node){var childKey=setting.data.key.children,nodes=node[childKey];if(nodes){for(var tmp_switchObj,tmp_icoObj,i=0,l=nodes.length;i<l;i++)data.removeNodeCache(setting,nodes[i]);data.removeSelectedNode(setting),delete node[childKey],setting.data.keep.parent?$$(node,consts.id.UL,setting).empty():(node.isParent=!1,node.open=!1,tmp_switchObj=$$(node,consts.id.SWITCH,setting),tmp_icoObj=$$(node,consts.id.ICON,setting),view.replaceSwitchClass(node,tmp_switchObj,consts.folder.DOCU),view.replaceIcoClass(node,tmp_icoObj,consts.folder.DOCU),$$(node,consts.id.UL,setting).remove())}}},setFirstNode:function(setting,parentNode){var childKey=setting.data.key.children;0<parentNode[childKey].length&&(parentNode[childKey][0].isFirstNode=!0)},setLastNode:function(setting,parentNode){var childKey=setting.data.key.children,childLength=parentNode[childKey].length;0<childLength&&(parentNode[childKey][childLength-1].isLastNode=!0)},removeNode:function(setting,node){var root=data.getRoot(setting),childKey=setting.data.key.children,parentNode=node.parentTId?node.getParentNode():root;if(node.isFirstNode=!1,node.isLastNode=!1,node.getPreNode=function(){return null},node.getNextNode=function(){return null},data.getNodeCache(setting,node.tId)){$$(node,setting).remove(),data.removeNodeCache(setting,node),data.removeSelectedNode(setting,node);for(var i=0,l=parentNode[childKey].length;i<l;i++)if(parentNode[childKey][i].tId==node.tId){parentNode[childKey].splice(i,1);break}view.setFirstNode(setting,parentNode),view.setLastNode(setting,parentNode);var newLast,tmp_first_switchObj,tmp_ulObj,tmp_switchObj,tmp_icoObj,childLength=parentNode[childKey].length;setting.data.keep.parent||0!=childLength?setting.view.showLine&&0<childLength&&(newLast=parentNode[childKey][childLength-1],tmp_ulObj=$$(newLast,consts.id.UL,setting),tmp_switchObj=$$(newLast,consts.id.SWITCH,setting),tmp_icoObj=$$(newLast,consts.id.ICON,setting),parentNode==root?1==parentNode[childKey].length?view.replaceSwitchClass(newLast,tmp_switchObj,consts.line.ROOT):(tmp_first_switchObj=$$(parentNode[childKey][0],consts.id.SWITCH,setting),view.replaceSwitchClass(parentNode[childKey][0],tmp_first_switchObj,consts.line.ROOTS),view.replaceSwitchClass(newLast,tmp_switchObj,consts.line.BOTTOM)):view.replaceSwitchClass(newLast,tmp_switchObj,consts.line.BOTTOM),tmp_ulObj.removeClass(consts.line.LINE)):(parentNode.isParent=!1,parentNode.open=!1,tmp_ulObj=$$(parentNode,consts.id.UL,setting),tmp_switchObj=$$(parentNode,consts.id.SWITCH,setting),tmp_icoObj=$$(parentNode,consts.id.ICON,setting),view.replaceSwitchClass(parentNode,tmp_switchObj,consts.folder.DOCU),view.replaceIcoClass(parentNode,tmp_icoObj,consts.folder.DOCU),tmp_ulObj.css("display","none"))}},replaceIcoClass:function(node,obj,newName){if(obj&&!node.isAjaxing){var tmpName=obj.attr("class");if(null!=tmpName){var tmpList=tmpName.split("_");switch(newName){case consts.folder.OPEN:case consts.folder.CLOSE:case consts.folder.DOCU:tmpList[tmpList.length-1]=newName}obj.attr("class",tmpList.join("_"))}}},replaceSwitchClass:function(node,obj,newName){if(obj){var tmpName=obj.attr("class");if(null!=tmpName){var tmpList=tmpName.split("_");switch(newName){case consts.line.ROOT:case consts.line.ROOTS:case consts.line.CENTER:case consts.line.BOTTOM:case consts.line.NOLINE:tmpList[0]=view.makeNodeLineClassEx(node)+newName;break;case consts.folder.OPEN:case consts.folder.CLOSE:case consts.folder.DOCU:tmpList[1]=newName}obj.attr("class",tmpList.join("_")),newName!==consts.folder.DOCU?obj.removeAttr("disabled"):obj.attr("disabled","disabled")}}},selectNode:function(setting,node,addFlag){addFlag||view.cancelPreSelectedNode(setting),$$(node,consts.id.A,setting).addClass(consts.node.CURSELECTED),data.addSelectedNode(setting,node)},setNodeFontCss:function(setting,treeNode){var aObj=$$(treeNode,consts.id.A,setting),fontCss=view.makeNodeFontCss(setting,treeNode);fontCss&&aObj.css(fontCss)},setNodeLineIcos:function(setting,node){var switchObj,ulObj,icoObj,ulLine;node&&(switchObj=$$(node,consts.id.SWITCH,setting),ulObj=$$(node,consts.id.UL,setting),icoObj=$$(node,consts.id.ICON,setting),0==(ulLine=view.makeUlLineClass(setting,node)).length?ulObj.removeClass(consts.line.LINE):ulObj.addClass(ulLine),switchObj.attr("class",view.makeNodeLineClass(setting,node)),node.isParent?switchObj.removeAttr("disabled"):switchObj.attr("disabled","disabled"),icoObj.removeAttr("style"),icoObj.attr("style",view.makeNodeIcoStyle(setting,node)),icoObj.attr("class",view.makeNodeIcoClass(setting,node)))},setNodeName:function(setting,node){var title=data.getNodeTitle(setting,node),nObj=$$(node,consts.id.SPAN,setting);nObj.empty(),setting.view.nameIsHTML?nObj.html(data.getNodeName(setting,node)):nObj.text(data.getNodeName(setting,node)),tools.apply(setting.view.showTitle,[setting.treeId,node],setting.view.showTitle)&&$$(node,consts.id.A,setting).attr("title",title||"")},setNodeTarget:function(setting,node){$$(node,consts.id.A,setting).attr("target",view.makeNodeTarget(node))},setNodeUrl:function(setting,node){var aObj=$$(node,consts.id.A,setting),url=view.makeNodeUrl(setting,node);null==url||0==url.length?aObj.removeAttr("href"):aObj.attr("href",url)},switchNode:function(setting,node){if(node.open||!tools.canAsync(setting,node))view.expandCollapseNode(setting,node,!node.open);else if(setting.async.enable){if(!view.asyncNode(setting,node))return void view.expandCollapseNode(setting,node,!node.open)}else node&&view.expandCollapseNode(setting,node,!node.open)}};$.fn.zTree={consts:_consts,_z:{tools:tools,view:view,event:event,data:data},getZTreeObj:function(treeId){var o=data.getZTreeTools(treeId);return o||null},destroy:function(treeId){if(treeId&&0<treeId.length)view.destroy(data.getSetting(treeId));else for(var s in settings)view.destroy(settings[s])},init:function(obj,zSetting,zNodes){var setting=tools.clone(_setting);$.extend(!0,setting,zSetting),setting.treeId=obj.attr("id"),setting.treeObj=obj,setting.treeObj.empty(),settings[setting.treeId]=setting,void 0===document.body.style.maxHeight&&(setting.view.expandSpeed=""),data.initRoot(setting);var root=data.getRoot(setting),childKey=setting.data.key.children;zNodes=zNodes?tools.clone(tools.isArray(zNodes)?zNodes:[zNodes]):[],setting.data.simpleData.enable?root[childKey]=data.transformTozTreeFormat(setting,zNodes):root[childKey]=zNodes,data.initCache(setting),event.unbindTree(setting),event.bindTree(setting),event.unbindEvent(setting),event.bindEvent(setting);var zTreeTools={setting:setting,addNodes:function(parentNode,newNodes,isSilent){if(!newNodes)return null;if((parentNode=parentNode||null)&&!parentNode.isParent&&setting.data.keep.leaf)return null;var xNewNodes=tools.clone(tools.isArray(newNodes)?newNodes:[newNodes]);function addCallback(){view.addNodes(setting,parentNode,xNewNodes,1==isSilent)}return tools.canAsync(setting,parentNode)?view.asyncNode(setting,parentNode,isSilent,addCallback):addCallback(),xNewNodes},cancelSelectedNode:function(node){view.cancelPreSelectedNode(setting,node)},destroy:function(){view.destroy(setting)},expandAll:function(expandFlag){return expandFlag=!!expandFlag,view.expandCollapseSonNode(setting,null,expandFlag,!0),expandFlag},expandNode:function(node,expandFlag,sonSign,focus,callbackFlag){if(!node||!node.isParent)return null;if(!0!==expandFlag&&!1!==expandFlag&&(expandFlag=!node.open),(callbackFlag=!!callbackFlag)&&expandFlag&&0==tools.apply(setting.callback.beforeExpand,[setting.treeId,node],!0))return null;if(callbackFlag&&!expandFlag&&0==tools.apply(setting.callback.beforeCollapse,[setting.treeId,node],!0))return null;if(expandFlag&&node.parentTId&&view.expandCollapseParentNode(setting,node.getParentNode(),expandFlag,!1),expandFlag===node.open&&!sonSign)return null;if(data.getRoot(setting).expandTriggerFlag=callbackFlag,!tools.canAsync(setting,node)&&sonSign)view.expandCollapseSonNode(setting,node,expandFlag,!0,function(){if(!1!==focus)try{$$(node,setting).focus().blur()}catch(e){}});else if(node.open=!expandFlag,view.switchNode(this.setting,node),!1!==focus)try{$$(node,setting).focus().blur()}catch(e){}return expandFlag},getNodes:function(){return data.getNodes(setting)},getNodeByParam:function(key,value,parentNode){return key?data.getNodeByParam(setting,parentNode?parentNode[setting.data.key.children]:data.getNodes(setting),key,value):null},getNodeByTId:function(tId){return data.getNodeCache(setting,tId)},getNodesByParam:function(key,value,parentNode){return key?data.getNodesByParam(setting,parentNode?parentNode[setting.data.key.children]:data.getNodes(setting),key,value):null},getNodesByParamFuzzy:function(key,value,parentNode){return key?data.getNodesByParamFuzzy(setting,parentNode?parentNode[setting.data.key.children]:data.getNodes(setting),key,value):null},getNodesByFilter:function(filter,isSingle,parentNode,invokeParam){return isSingle=!!isSingle,filter&&"function"==typeof filter?data.getNodesByFilter(setting,parentNode?parentNode[setting.data.key.children]:data.getNodes(setting),filter,isSingle,invokeParam):isSingle?null:[]},getNodeIndex:function(node){if(!node)return null;for(var childKey=setting.data.key.children,parentNode=node.parentTId?node.getParentNode():data.getRoot(setting),i=0,l=parentNode[childKey].length;i<l;i++)if(parentNode[childKey][i]==node)return i;return-1},getSelectedNodes:function(){for(var r=[],list=data.getRoot(setting).curSelectedList,i=0,l=list.length;i<l;i++)r.push(list[i]);return r},isSelectedNode:function(node){return data.isSelectedNode(setting,node)},reAsyncChildNodes:function(parentNode,reloadType,isSilent){if(this.setting.async.enable){var isRoot=!parentNode;if(isRoot&&(parentNode=data.getRoot(setting)),"refresh"==reloadType){for(var childKey=this.setting.data.key.children,i=0,l=parentNode[childKey]?parentNode[childKey].length:0;i<l;i++)data.removeNodeCache(setting,parentNode[childKey][i]);data.removeSelectedNode(setting),parentNode[childKey]=[],isRoot?this.setting.treeObj.empty():$$(parentNode,consts.id.UL,setting).empty()}view.asyncNode(this.setting,isRoot?null:parentNode,!!isSilent)}},refresh:function(){this.setting.treeObj.empty();var root=data.getRoot(setting),nodes=root[setting.data.key.children];data.initRoot(setting),root[setting.data.key.children]=nodes,data.initCache(setting),view.createNodes(setting,0,root[setting.data.key.children])},removeChildNodes:function(node){if(!node)return null;var nodes=node[setting.data.key.children];return view.removeChildNodes(setting,node),nodes||null},removeNode:function(node,callbackFlag){node&&((callbackFlag=!!callbackFlag)&&0==tools.apply(setting.callback.beforeRemove,[setting.treeId,node],!0)||(view.removeNode(setting,node),callbackFlag&&this.setting.treeObj.trigger(consts.event.REMOVE,[setting.treeId,node])))},selectNode:function(node,addFlag){if(node&&tools.uCanDo(setting)){if(addFlag=setting.view.selectedMulti&&addFlag,node.parentTId)view.expandCollapseParentNode(setting,node.getParentNode(),!0,!1,function(){try{$$(node,setting).focus().blur()}catch(e){}});else try{$$(node,setting).focus().blur()}catch(e){}view.selectNode(setting,node,addFlag)}},transformTozTreeNodes:function(simpleNodes){return data.transformTozTreeFormat(setting,simpleNodes)},transformToArray:function(nodes){return data.transformToArrayFormat(setting,nodes)},updateNode:function(node,checkTypeFlag){node&&$$(node,setting).get(0)&&tools.uCanDo(setting)&&(view.setNodeName(setting,node),view.setNodeTarget(setting,node),view.setNodeUrl(setting,node),view.setNodeLineIcos(setting,node),view.setNodeFontCss(setting,node))}};return root.treeTools=zTreeTools,data.setZTreeTools(setting,zTreeTools),root[childKey]&&0<root[childKey].length?view.createNodes(setting,0,root[childKey]):setting.async.enable&&setting.async.url&&""!==setting.async.url&&view.asyncNode(setting),zTreeTools}};var zt=$.fn.zTree,$$=tools.$,consts=zt.consts}($$),function($){var _consts={event:{CHECK:"ztree_check"},id:{CHECK:"_check"},checkbox:{STYLE:"checkbox",DEFAULT:"chk",DISABLED:"disable",FALSE:"false",TRUE:"true",FULL:"full",PART:"part",FOCUS:"focus"},radio:{STYLE:"radio",TYPE_ALL:"all",TYPE_LEVEL:"level"}},_setting={check:{enable:!1,autoCheckTrigger:!1,chkStyle:_consts.checkbox.STYLE,nocheckInherit:!1,chkDisabledInherit:!1,radioType:_consts.radio.TYPE_LEVEL,chkboxType:{Y:"ps",N:"ps"}},data:{key:{checked:"checked"}},callback:{beforeCheck:null,onCheck:null}},_handler={onCheckNode:function(event,node){if(!0===node.chkDisabled)return!1;var setting=data.getSetting(event.data.treeId),checkedKey=setting.data.key.checked;if(0==tools.apply(setting.callback.beforeCheck,[setting.treeId,node],!0))return!0;node[checkedKey]=!node[checkedKey],view.checkNodeRelation(setting,node);var checkObj=$$(node,consts.id.CHECK,setting);return view.setChkClass(setting,checkObj,node),view.repairParentChkClassWithSelf(setting,node),setting.treeObj.trigger(consts.event.CHECK,[event,setting.treeId,node]),!0},onMouseoverCheck:function(event,node){if(!0===node.chkDisabled)return!1;var setting=data.getSetting(event.data.treeId),checkObj=$$(node,consts.id.CHECK,setting);return node.check_Focus=!0,view.setChkClass(setting,checkObj,node),!0},onMouseoutCheck:function(event,node){if(!0===node.chkDisabled)return!1;var setting=data.getSetting(event.data.treeId),checkObj=$$(node,consts.id.CHECK,setting);return node.check_Focus=!1,view.setChkClass(setting,checkObj,node),!0}},_z={tools:{},view:{checkNodeRelation:function(setting,node){var pNode,childKey=setting.data.key.children,checkedKey=setting.data.key.checked,r=consts.radio;if(setting.check.chkStyle==r.STYLE){var checkedList=data.getRadioCheckedList(setting);if(node[checkedKey])if(setting.check.radioType==r.TYPE_ALL){for(i=checkedList.length-1;0<=i;i--)(pNode=checkedList[i])[checkedKey]&&pNode!=node&&(pNode[checkedKey]=!1,checkedList.splice(i,1),view.setChkClass(setting,$$(pNode,consts.id.CHECK,setting),pNode),pNode.parentTId!=node.parentTId&&view.repairParentChkClassWithSelf(setting,pNode));checkedList.push(node)}else for(var parentNode=node.parentTId?node.getParentNode():data.getRoot(setting),i=0,l=parentNode[childKey].length;i<l;i++)(pNode=parentNode[childKey][i])[checkedKey]&&pNode!=node&&(pNode[checkedKey]=!1,view.setChkClass(setting,$$(pNode,consts.id.CHECK,setting),pNode));else if(setting.check.radioType==r.TYPE_ALL)for(i=0,l=checkedList.length;i<l;i++)if(node==checkedList[i]){checkedList.splice(i,1);break}}else node[checkedKey]&&(!node[childKey]||0==node[childKey].length||-1<setting.check.chkboxType.Y.indexOf("s"))&&view.setSonNodeCheckBox(setting,node,!0),node[checkedKey]||node[childKey]&&0!=node[childKey].length&&!(-1<setting.check.chkboxType.N.indexOf("s"))||view.setSonNodeCheckBox(setting,node,!1),node[checkedKey]&&-1<setting.check.chkboxType.Y.indexOf("p")&&view.setParentNodeCheckBox(setting,node,!0),!node[checkedKey]&&-1<setting.check.chkboxType.N.indexOf("p")&&view.setParentNodeCheckBox(setting,node,!1)},makeChkClass:function(setting,node){var checkedKey=setting.data.key.checked,c=consts.checkbox,r=consts.radio,fullStyle="",fullStyle=!0===node.chkDisabled?c.DISABLED:node.halfCheck?c.PART:setting.check.chkStyle!=r.STYLE&&node[checkedKey]?2===node.check_Child_State||-1===node.check_Child_State?c.FULL:c.PART:node.check_Child_State<1?c.FULL:c.PART,chkName=setting.check.chkStyle+"_"+(node[checkedKey]?c.TRUE:c.FALSE)+"_"+fullStyle,chkName=node.check_Focus&&!0!==node.chkDisabled?chkName+"_"+c.FOCUS:chkName;return consts.className.BUTTON+" "+c.DEFAULT+" "+chkName},repairAllChk:function(setting,checked){if(setting.check.enable&&setting.check.chkStyle===consts.checkbox.STYLE)for(var checkedKey=setting.data.key.checked,childKey=setting.data.key.children,root=data.getRoot(setting),i=0,l=root[childKey].length;i<l;i++){var node=root[childKey][i];!0!==node.nocheck&&!0!==node.chkDisabled&&(node[checkedKey]=checked),view.setSonNodeCheckBox(setting,node,checked)}},repairChkClass:function(setting,node){var checkObj;node&&(data.makeChkFlag(setting,node),!0!==node.nocheck&&(checkObj=$$(node,consts.id.CHECK,setting),view.setChkClass(setting,checkObj,node)))},repairParentChkClass:function(setting,node){var pNode;node&&node.parentTId&&(pNode=node.getParentNode(),view.repairChkClass(setting,pNode),view.repairParentChkClass(setting,pNode))},repairParentChkClassWithSelf:function(setting,node){var childKey;node&&(node[childKey=setting.data.key.children]&&0<node[childKey].length?view.repairParentChkClass(setting,node[childKey][0]):view.repairParentChkClass(setting,node))},repairSonChkDisabled:function(setting,node,chkDisabled,inherit){if(node){var childKey=setting.data.key.children;if(node.chkDisabled!=chkDisabled&&(node.chkDisabled=chkDisabled),view.repairChkClass(setting,node),node[childKey]&&inherit)for(var i=0,l=node[childKey].length;i<l;i++){var sNode=node[childKey][i];view.repairSonChkDisabled(setting,sNode,chkDisabled,inherit)}}},repairParentChkDisabled:function(setting,node,chkDisabled,inherit){node&&(node.chkDisabled!=chkDisabled&&inherit&&(node.chkDisabled=chkDisabled),view.repairChkClass(setting,node),view.repairParentChkDisabled(setting,node.getParentNode(),chkDisabled,inherit))},setChkClass:function(setting,obj,node){obj&&(!0===node.nocheck?obj.hide():obj.show(),obj.attr("class",view.makeChkClass(setting,node)))},setParentNodeCheckBox:function(setting,node,value,srcNode){var childKey=setting.data.key.children,checkedKey=setting.data.key.checked,checkObj=$$(node,consts.id.CHECK,setting);if(srcNode=srcNode||node,data.makeChkFlag(setting,node),!0!==node.nocheck&&!0!==node.chkDisabled&&(node[checkedKey]=value,view.setChkClass(setting,checkObj,node),setting.check.autoCheckTrigger&&node!=srcNode&&setting.treeObj.trigger(consts.event.CHECK,[null,setting.treeId,node])),node.parentTId){var pSign=!0;if(!value)for(var pNodes=node.getParentNode()[childKey],i=0,l=pNodes.length;i<l;i++)if(!0!==pNodes[i].nocheck&&!0!==pNodes[i].chkDisabled&&pNodes[i][checkedKey]||(!0===pNodes[i].nocheck||!0===pNodes[i].chkDisabled)&&0<pNodes[i].check_Child_State){pSign=!1;break}pSign&&view.setParentNodeCheckBox(setting,node.getParentNode(),value,srcNode)}},setSonNodeCheckBox:function(setting,node,value,srcNode){if(node){var childKey=setting.data.key.children,checkedKey=setting.data.key.checked,checkObj=$$(node,consts.id.CHECK,setting);srcNode=srcNode||node;var hasDisable=!1;if(node[childKey])for(var i=0,l=node[childKey].length;i<l&&!0!==node.chkDisabled;i++){var sNode=node[childKey][i];view.setSonNodeCheckBox(setting,sNode,value,srcNode),!0===sNode.chkDisabled&&(hasDisable=!0)}node!=data.getRoot(setting)&&!0!==node.chkDisabled&&(hasDisable&&!0!==node.nocheck&&data.makeChkFlag(setting,node),!0!==node.nocheck&&!0!==node.chkDisabled?(node[checkedKey]=value,hasDisable||(node.check_Child_State=node[childKey]&&0<node[childKey].length?value?2:0:-1)):node.check_Child_State=-1,view.setChkClass(setting,checkObj,node),setting.check.autoCheckTrigger&&node!=srcNode&&!0!==node.nocheck&&!0!==node.chkDisabled&&setting.treeObj.trigger(consts.event.CHECK,[null,setting.treeId,node]))}}},event:{},data:{getRadioCheckedList:function(setting){for(var checkedList=data.getRoot(setting).radioCheckedList,i=0,j=checkedList.length;i<j;i++)data.getNodeCache(setting,checkedList[i].tId)||(checkedList.splice(i,1),i--,j--);return checkedList},getCheckStatus:function(setting,node){if(!setting.check.enable||node.nocheck||node.chkDisabled)return null;var checkedKey=setting.data.key.checked;return{checked:node[checkedKey],half:node.halfCheck?node.halfCheck:setting.check.chkStyle==consts.radio.STYLE?2===node.check_Child_State:node[checkedKey]?-1<node.check_Child_State&&node.check_Child_State<2:0<node.check_Child_State}},getTreeCheckedNodes:function(setting,nodes,checked,results){if(!nodes)return[];var childKey=setting.data.key.children,checkedKey=setting.data.key.checked,onlyOne=checked&&setting.check.chkStyle==consts.radio.STYLE&&setting.check.radioType==consts.radio.TYPE_ALL;results=results||[];for(var i=0,l=nodes.length;i<l&&(!0===nodes[i].nocheck||!0===nodes[i].chkDisabled||nodes[i][checkedKey]!=checked||(results.push(nodes[i]),!onlyOne))&&(data.getTreeCheckedNodes(setting,nodes[i][childKey],checked,results),!(onlyOne&&0<results.length));i++);return results},getTreeChangeCheckedNodes:function(setting,nodes,results){if(!nodes)return[];var childKey=setting.data.key.children,checkedKey=setting.data.key.checked;results=results||[];for(var i=0,l=nodes.length;i<l;i++)!0!==nodes[i].nocheck&&!0!==nodes[i].chkDisabled&&nodes[i][checkedKey]!=nodes[i].checkedOld&&results.push(nodes[i]),data.getTreeChangeCheckedNodes(setting,nodes[i][childKey],results);return results},makeChkFlag:function(setting,node){if(node){var childKey=setting.data.key.children,checkedKey=setting.data.key.checked,chkFlag=-1;if(node[childKey])for(var i=0,l=node[childKey].length;i<l;i++){var cNode=node[childKey][i],tmp=-1;if(setting.check.chkStyle==consts.radio.STYLE){if(2==(tmp=!0===cNode.nocheck||!0===cNode.chkDisabled?cNode.check_Child_State:!0===cNode.halfCheck||cNode[checkedKey]||0<cNode.check_Child_State?2:0)){chkFlag=2;break}0==tmp&&(chkFlag=0)}else if(setting.check.chkStyle==consts.checkbox.STYLE){if(1===(tmp=!0===cNode.nocheck||!0===cNode.chkDisabled?cNode.check_Child_State:!0===cNode.halfCheck?1:cNode[checkedKey]?-1===cNode.check_Child_State||2===cNode.check_Child_State?2:1:0<cNode.check_Child_State?1:0)){chkFlag=1;break}if(2===tmp&&-1<chkFlag&&0<i&&tmp!==chkFlag){chkFlag=1;break}if(2===chkFlag&&-1<tmp&&tmp<2){chkFlag=1;break}-1<tmp&&(chkFlag=tmp)}}node.check_Child_State=chkFlag}}}};$.extend(!0,$.fn.zTree.consts,_consts),$.extend(!0,$.fn.zTree._z,_z);var zt=$.fn.zTree,tools=zt._z.tools,consts=zt.consts,view=zt._z.view,data=zt._z.data,$$=(zt._z.event,tools.$);data.exSetting(_setting),data.addInitBind(function(setting){var o=setting.treeObj,c=consts.event;o.bind(c.CHECK,function(event,srcEvent,treeId,node){event.srcEvent=srcEvent,tools.apply(setting.callback.onCheck,[event,treeId,node])})}),data.addInitUnBind(function(setting){var o=setting.treeObj,c=consts.event;o.unbind(c.CHECK)}),data.addInitCache(function(treeId){}),data.addInitNode(function(setting,level,n,parentNode,isFirstNode,isLastNode,openFlag){var checkedKey;n&&(checkedKey=setting.data.key.checked,"string"==typeof n[checkedKey]&&(n[checkedKey]=tools.eqs(n[checkedKey],"true")),n[checkedKey]=!!n[checkedKey],n.checkedOld=n[checkedKey],"string"==typeof n.nocheck&&(n.nocheck=tools.eqs(n.nocheck,"true")),n.nocheck=!!n.nocheck||setting.check.nocheckInherit&&parentNode&&!!parentNode.nocheck,"string"==typeof n.chkDisabled&&(n.chkDisabled=tools.eqs(n.chkDisabled,"true")),n.chkDisabled=!!n.chkDisabled||setting.check.chkDisabledInherit&&parentNode&&!!parentNode.chkDisabled,"string"==typeof n.halfCheck&&(n.halfCheck=tools.eqs(n.halfCheck,"true")),n.halfCheck=!!n.halfCheck,n.check_Child_State=-1,n.check_Focus=!1,n.getCheckStatus=function(){return data.getCheckStatus(setting,n)},setting.check.chkStyle==consts.radio.STYLE&&setting.check.radioType==consts.radio.TYPE_ALL&&n[checkedKey]&&data.getRoot(setting).radioCheckedList.push(n))}),data.addInitProxy(function(e){var target=e.target,setting=data.getSetting(e.data.treeId),tId="",node=null,nodeEventType="",nodeEventCallback=null;if(tools.eqs(e.type,"mouseover")?setting.check.enable&&tools.eqs(target.tagName,"span")&&null!==target.getAttribute("treeNode"+consts.id.CHECK)&&(tId=tools.getNodeMainDom(target).id,nodeEventType="mouseoverCheck"):tools.eqs(e.type,"mouseout")?setting.check.enable&&tools.eqs(target.tagName,"span")&&null!==target.getAttribute("treeNode"+consts.id.CHECK)&&(tId=tools.getNodeMainDom(target).id,nodeEventType="mouseoutCheck"):tools.eqs(e.type,"click")&&setting.check.enable&&tools.eqs(target.tagName,"span")&&null!==target.getAttribute("treeNode"+consts.id.CHECK)&&(tId=tools.getNodeMainDom(target).id,nodeEventType="checkNode"),0<tId.length)switch(node=data.getNodeCache(setting,tId),nodeEventType){case"checkNode":nodeEventCallback=_handler.onCheckNode;break;case"mouseoverCheck":nodeEventCallback=_handler.onMouseoverCheck;break;case"mouseoutCheck":nodeEventCallback=_handler.onMouseoutCheck}return{stop:"checkNode"===nodeEventType,node:node,nodeEventType:nodeEventType,nodeEventCallback:nodeEventCallback,treeEventType:"",treeEventCallback:null}},!0),data.addInitRoot(function(setting){data.getRoot(setting).radioCheckedList=[]}),data.addBeforeA(function(setting,node,html){setting.data.key.checked;setting.check.enable&&(data.makeChkFlag(setting,node),html.push("<span ID='",node.tId,consts.id.CHECK,"' class='",view.makeChkClass(setting,node),"' treeNode",consts.id.CHECK,!0===node.nocheck?" style='display:none;'":"","></span>"))}),data.addZTreeTools(function(setting,zTreeTools){zTreeTools.checkNode=function(node,checked,checkTypeFlag,callbackFlag){var checkObj,checkedKey=this.setting.data.key.checked;!0!==node.chkDisabled&&(!0!==checked&&!1!==checked&&(checked=!node[checkedKey]),callbackFlag=!!callbackFlag,node[checkedKey]===checked&&!checkTypeFlag||callbackFlag&&0==tools.apply(this.setting.callback.beforeCheck,[this.setting.treeId,node],!0)||tools.uCanDo(this.setting)&&this.setting.check.enable&&!0!==node.nocheck&&(node[checkedKey]=checked,checkObj=$$(node,consts.id.CHECK,this.setting),!checkTypeFlag&&this.setting.check.chkStyle!==consts.radio.STYLE||view.checkNodeRelation(this.setting,node),view.setChkClass(this.setting,checkObj,node),view.repairParentChkClassWithSelf(this.setting,node),callbackFlag&&this.setting.treeObj.trigger(consts.event.CHECK,[null,this.setting.treeId,node])))},zTreeTools.checkAllNodes=function(checked){view.repairAllChk(this.setting,!!checked)},zTreeTools.getCheckedNodes=function(checked){var childKey=this.setting.data.key.children;return checked=!1!==checked,data.getTreeCheckedNodes(this.setting,data.getRoot(this.setting)[childKey],checked)},zTreeTools.getChangeCheckedNodes=function(){var childKey=this.setting.data.key.children;return data.getTreeChangeCheckedNodes(this.setting,data.getRoot(this.setting)[childKey])},zTreeTools.setChkDisabled=function(node,disabled,inheritParent,inheritChildren){disabled=!!disabled,inheritParent=!!inheritParent,inheritChildren=!!inheritChildren,view.repairSonChkDisabled(this.setting,node,disabled,inheritChildren),view.repairParentChkDisabled(this.setting,node.getParentNode(),disabled,inheritParent)};var _updateNode=zTreeTools.updateNode;zTreeTools.updateNode=function(node,checkTypeFlag){var checkObj;_updateNode&&_updateNode.apply(zTreeTools,arguments),node&&this.setting.check.enable&&$$(node,this.setting).get(0)&&tools.uCanDo(this.setting)&&(checkObj=$$(node,consts.id.CHECK,this.setting),1!=checkTypeFlag&&this.setting.check.chkStyle!==consts.radio.STYLE||view.checkNodeRelation(this.setting,node),view.setChkClass(this.setting,checkObj,node),view.repairParentChkClassWithSelf(this.setting,node))}});var _createNodes=view.createNodes;view.createNodes=function(setting,level,nodes,parentNode){_createNodes&&_createNodes.apply(view,arguments),nodes&&view.repairParentChkClassWithSelf(setting,parentNode)};var _removeNode=view.removeNode;view.removeNode=function(setting,node){var parentNode=node.getParentNode();_removeNode&&_removeNode.apply(view,arguments),node&&parentNode&&(view.repairChkClass(setting,parentNode),view.repairParentChkClass(setting,parentNode))};var _appendNodes=view.appendNodes;view.appendNodes=function(setting,level,nodes,parentNode,initFlag,openFlag){var html="";return _appendNodes&&(html=_appendNodes.apply(view,arguments)),parentNode&&data.makeChkFlag(setting,parentNode),html}}($$),function($){var _consts={event:{DRAG:"ztree_drag",DROP:"ztree_drop",RENAME:"ztree_rename",DRAGMOVE:"ztree_dragmove"},id:{EDIT:"_edit",INPUT:"_input",REMOVE:"_remove"},move:{TYPE_INNER:"inner",TYPE_PREV:"prev",TYPE_NEXT:"next"},node:{CURSELECTED_EDIT:"curSelectedNode_Edit",TMPTARGET_TREE:"tmpTargetzTree",TMPTARGET_NODE:"tmpTargetNode"}},_handler={onHoverOverNode:function(event,node){var setting=data.getSetting(event.data.treeId),root=data.getRoot(setting);root.curHoverNode!=node&&_handler.onHoverOutNode(event),root.curHoverNode=node,view.addHoverDom(setting,node)},onHoverOutNode:function(event,node){var setting=data.getSetting(event.data.treeId),root=data.getRoot(setting);root.curHoverNode&&!data.isSelectedNode(setting,root.curHoverNode)&&(view.removeTreeDom(setting,root.curHoverNode),root.curHoverNode=null)},onMousedownNode:function(eventMouseDown,_node){var i,l,setting=data.getSetting(eventMouseDown.data.treeId),root=data.getRoot(setting),roots=data.getRoots();if(2==eventMouseDown.button||!setting.edit.enable||!setting.edit.drag.isCopy&&!setting.edit.drag.isMove)return!0;var target=eventMouseDown.target,_nodes=data.getRoot(setting).curSelectedList,nodes=[];if(data.isSelectedNode(setting,_node))for(i=0,l=_nodes.length;i<l;i++){if(_nodes[i].editNameFlag&&tools.eqs(target.tagName,"input")&&null!==target.getAttribute("treeNode"+consts.id.INPUT))return!0;if(nodes.push(_nodes[i]),nodes[0].parentTId!==_nodes[i].parentTId){nodes=[_node];break}}else nodes=[_node];view.editNodeBlur=!0,view.cancelCurEditNode(setting);var curNode,tmpArrow,tmpTarget,preNode,nextNode,doc=$(setting.treeObj.get(0).ownerDocument),body=$(setting.treeObj.get(0).ownerDocument.body),isOtherTree=!1,targetSetting=setting,sourceSetting=setting,preTmpTargetNodeId=null,preTmpMoveType=null,tmpTargetNodeId=null,moveType=consts.move.TYPE_INNER,mouseDownX=eventMouseDown.clientX,mouseDownY=eventMouseDown.clientY,startTime=(new Date).getTime();function _docMouseMove(event){if(0==root.dragFlag&&Math.abs(mouseDownX-event.clientX)<setting.edit.drag.minMoveSize&&Math.abs(mouseDownY-event.clientY)<setting.edit.drag.minMoveSize)return!0;var tmpNode,tmpDom,xT,childKey=setting.data.key.children;if(body.css("cursor","pointer"),0==root.dragFlag){if(0==tools.apply(setting.callback.beforeDrag,[setting.treeId,nodes],!0))return _docMouseUp(event),!0;for(i=0,l=nodes.length;i<l;i++)0==i&&(root.dragNodeShowBefore=[]),(tmpNode=nodes[i]).isParent&&tmpNode.open?(view.expandCollapseNode(setting,tmpNode,!tmpNode.open),root.dragNodeShowBefore[tmpNode.tId]=!0):root.dragNodeShowBefore[tmpNode.tId]=!1;root.dragFlag=1,roots.showHoverDom=!1,tools.showIfameMask(setting,!0);var isOrder=!0,lastIndex=-1;if(1<nodes.length)for(var pNodes=nodes[0].parentTId?nodes[0].getParentNode()[childKey]:data.getNodes(setting),tmpNodes=[],i=0,l=pNodes.length;i<l;i++)if(void 0!==root.dragNodeShowBefore[pNodes[i].tId]&&(isOrder&&-1<lastIndex&&lastIndex+1!==i&&(isOrder=!1),tmpNodes.push(pNodes[i]),lastIndex=i),nodes.length===tmpNodes.length){nodes=tmpNodes;break}for(isOrder&&(preNode=nodes[0].getPreNode(),nextNode=nodes[nodes.length-1].getNextNode()),curNode=$$("<ul class='zTreeDragUL'></ul>",setting),i=0,l=nodes.length;i<l;i++)(tmpNode=nodes[i]).editNameFlag=!1,view.selectNode(setting,tmpNode,0<i),view.removeTreeDom(setting,tmpNode),i>setting.edit.drag.maxShowNodeNum-1||((tmpDom=$$("<li id='"+tmpNode.tId+"_tmp'></li>",setting)).append($$(tmpNode,consts.id.A,setting).clone()),tmpDom.css("padding","0"),tmpDom.children("#"+tmpNode.tId+consts.id.A).removeClass(consts.node.CURSELECTED),curNode.append(tmpDom),i==setting.edit.drag.maxShowNodeNum-1&&(tmpDom=$$("<li id='"+tmpNode.tId+"_moretmp'><a>  ...  </a></li>",setting),curNode.append(tmpDom)));curNode.attr("id",nodes[0].tId+consts.id.UL+"_tmp"),curNode.addClass(setting.treeObj.attr("class")),curNode.appendTo(body),(tmpArrow=$$("<span class='tmpzTreeMove_arrow'></span>",setting)).attr("id","zTreeMove_arrow_tmp"),tmpArrow.appendTo(body),setting.treeObj.trigger(consts.event.DRAG,[event,setting.treeId,nodes])}if(1==root.dragFlag){tmpTarget&&tmpArrow.attr("id")==event.target.id&&tmpTargetNodeId&&event.clientX+doc.scrollLeft()+2>$("#"+tmpTargetNodeId+consts.id.A,tmpTarget).offset().left?(xT=$("#"+tmpTargetNodeId+consts.id.A,tmpTarget),event.target=0<xT.length?xT.get(0):event.target):tmpTarget&&(tmpTarget.removeClass(consts.node.TMPTARGET_TREE),tmpTargetNodeId&&$("#"+tmpTargetNodeId+consts.id.A,tmpTarget).removeClass(consts.node.TMPTARGET_NODE+"_"+consts.move.TYPE_PREV).removeClass(consts.node.TMPTARGET_NODE+"_"+_consts.move.TYPE_NEXT).removeClass(consts.node.TMPTARGET_NODE+"_"+_consts.move.TYPE_INNER)),tmpTargetNodeId=tmpTarget=null,isOtherTree=!1,targetSetting=setting;var s,settings=data.getSettings();for(s in settings)settings[s].treeId&&settings[s].edit.enable&&settings[s].treeId!=setting.treeId&&(event.target.id==settings[s].treeId||0<$(event.target).parents("#"+settings[s].treeId).length)&&(isOtherTree=!0,targetSetting=settings[s]);var docScrollTop=doc.scrollTop(),docScrollLeft=doc.scrollLeft(),treeOffset=targetSetting.treeObj.offset(),scrollHeight=targetSetting.treeObj.get(0).scrollHeight,scrollWidth=targetSetting.treeObj.get(0).scrollWidth,dTop=event.clientY+docScrollTop-treeOffset.top,dBottom=targetSetting.treeObj.height()+treeOffset.top-event.clientY-docScrollTop,dLeft=event.clientX+docScrollLeft-treeOffset.left,dRight=targetSetting.treeObj.width()+treeOffset.left-event.clientX-docScrollLeft,isTop=dTop<setting.edit.drag.borderMax&&dTop>setting.edit.drag.borderMin,isBottom=dBottom<setting.edit.drag.borderMax&&dBottom>setting.edit.drag.borderMin,isLeft=dLeft<setting.edit.drag.borderMax&&dLeft>setting.edit.drag.borderMin,isRight=dRight<setting.edit.drag.borderMax&&dRight>setting.edit.drag.borderMin,isTreeInner=dTop>setting.edit.drag.borderMin&&dBottom>setting.edit.drag.borderMin&&dLeft>setting.edit.drag.borderMin&&dRight>setting.edit.drag.borderMin,isTreeTop=isTop&&targetSetting.treeObj.scrollTop()<=0,isTreeBottom=isBottom&&targetSetting.treeObj.scrollTop()+targetSetting.treeObj.height()+10>=scrollHeight,isTreeLeft=isLeft&&targetSetting.treeObj.scrollLeft()<=0,isTreeRight=isRight&&targetSetting.treeObj.scrollLeft()+targetSetting.treeObj.width()+10>=scrollWidth;if(event.target&&tools.isChildOrSelf(event.target,targetSetting.treeId)){for(var targetObj=event.target;targetObj&&targetObj.tagName&&!tools.eqs(targetObj.tagName,"li")&&targetObj.id!=targetSetting.treeId;)targetObj=targetObj.parentNode;var canMove=!0;for(i=0,l=nodes.length;i<l;i++){if(tmpNode=nodes[i],targetObj.id===tmpNode.tId){canMove=!1;break}if(0<$$(tmpNode,setting).find("#"+targetObj.id).length){canMove=!1;break}}canMove&&event.target&&tools.isChildOrSelf(event.target,targetObj.id+consts.id.A)&&(tmpTarget=$(targetObj),tmpTargetNodeId=targetObj.id)}tmpNode=nodes[0],isTreeInner&&tools.isChildOrSelf(event.target,targetSetting.treeId)&&(!tmpTarget&&(event.target.id==targetSetting.treeId||isTreeTop||isTreeBottom||isTreeLeft||isTreeRight)&&(isOtherTree||!isOtherTree&&tmpNode.parentTId)&&(tmpTarget=targetSetting.treeObj),isTop?targetSetting.treeObj.scrollTop(targetSetting.treeObj.scrollTop()-10):isBottom&&targetSetting.treeObj.scrollTop(targetSetting.treeObj.scrollTop()+10),isLeft?targetSetting.treeObj.scrollLeft(targetSetting.treeObj.scrollLeft()-10):isRight&&targetSetting.treeObj.scrollLeft(targetSetting.treeObj.scrollLeft()+10),tmpTarget&&tmpTarget!=targetSetting.treeObj&&tmpTarget.offset().left<targetSetting.treeObj.offset().left&&targetSetting.treeObj.scrollLeft(targetSetting.treeObj.scrollLeft()+tmpTarget.offset().left-targetSetting.treeObj.offset().left)),curNode.css({top:event.clientY+docScrollTop+3+"px",left:event.clientX+docScrollLeft+3+"px"});var tmpTargetNode,isCopy,isPrev,isNext,isInner,canPrev,canNext,canInner,tmpTargetA,tmpNextA,tmpTop,tmpLeft,prevPercent,nextPercent,dY_percent,startTimer,dX=0,dY=0;tmpTarget&&tmpTarget.attr("id")!=targetSetting.treeId?(tmpTargetNode=null==tmpTargetNodeId?null:data.getNodeCache(targetSetting,tmpTargetNodeId),isCopy=(event.ctrlKey||event.metaKey)&&setting.edit.drag.isMove&&setting.edit.drag.isCopy||!setting.edit.drag.isMove&&setting.edit.drag.isCopy,isPrev=!(!preNode||tmpTargetNodeId!==preNode.tId),isNext=!(!nextNode||tmpTargetNodeId!==nextNode.tId),isInner=tmpNode.parentTId&&tmpNode.parentTId==tmpTargetNodeId,canPrev=(isCopy||!isNext)&&tools.apply(targetSetting.edit.drag.prev,[targetSetting.treeId,nodes,tmpTargetNode],!!targetSetting.edit.drag.prev),canNext=(isCopy||!isPrev)&&tools.apply(targetSetting.edit.drag.next,[targetSetting.treeId,nodes,tmpTargetNode],!!targetSetting.edit.drag.next),canInner=(isCopy||!isInner)&&!(targetSetting.data.keep.leaf&&!tmpTargetNode.isParent)&&tools.apply(targetSetting.edit.drag.inner,[targetSetting.treeId,nodes,tmpTargetNode],!!targetSetting.edit.drag.inner),canPrev||canNext||canInner?(tmpTargetA=$("#"+tmpTargetNodeId+consts.id.A,tmpTarget),tmpNextA=tmpTargetNode.isLastNode?null:$("#"+tmpTargetNode.getNextNode().tId+consts.id.A,tmpTarget.next()),tmpTop=tmpTargetA.offset().top,tmpLeft=tmpTargetA.offset().left,prevPercent=canPrev?canInner?.25:canNext?.5:1:-1,nextPercent=canNext?canInner?.75:canPrev?.5:0:-1,dY_percent=(event.clientY+docScrollTop-tmpTop)/tmpTargetA.height(),moveType=(1==prevPercent||dY_percent<=prevPercent&&-.2<=dY_percent)&&canPrev?(dX=1-tmpArrow.width(),dY=tmpTop-tmpArrow.height()/2,consts.move.TYPE_PREV):(0==nextPercent||nextPercent<=dY_percent&&dY_percent<=1.2)&&canNext?(dX=1-tmpArrow.width(),dY=null==tmpNextA||tmpTargetNode.isParent&&tmpTargetNode.open?tmpTop+tmpTargetA.height()-tmpArrow.height()/2:tmpNextA.offset().top-tmpArrow.height()/2,consts.move.TYPE_NEXT):(dX=5-tmpArrow.width(),dY=tmpTop,consts.move.TYPE_INNER),tmpArrow.css({display:"block",top:dY+"px",left:tmpLeft+dX+"px"}),tmpTargetA.addClass(consts.node.TMPTARGET_NODE+"_"+moveType),preTmpTargetNodeId==tmpTargetNodeId&&preTmpMoveType==moveType||(startTime=(new Date).getTime()),tmpTargetNode&&tmpTargetNode.isParent&&moveType==consts.move.TYPE_INNER&&(startTimer=!0,window.zTreeMoveTimer&&window.zTreeMoveTargetNodeTId!==tmpTargetNode.tId?(clearTimeout(window.zTreeMoveTimer),window.zTreeMoveTargetNodeTId=null):window.zTreeMoveTimer&&window.zTreeMoveTargetNodeTId===tmpTargetNode.tId&&(startTimer=!1),startTimer&&(window.zTreeMoveTimer=setTimeout(function(){moveType==consts.move.TYPE_INNER&&tmpTargetNode&&tmpTargetNode.isParent&&!tmpTargetNode.open&&(new Date).getTime()-startTime>targetSetting.edit.drag.autoOpenTime&&tools.apply(targetSetting.callback.beforeDragOpen,[targetSetting.treeId,tmpTargetNode],!0)&&(view.switchNode(targetSetting,tmpTargetNode),targetSetting.edit.drag.autoExpandTrigger&&targetSetting.treeObj.trigger(consts.event.EXPAND,[targetSetting.treeId,tmpTargetNode]))},targetSetting.edit.drag.autoOpenTime+50),window.zTreeMoveTargetNodeTId=tmpTargetNode.tId))):(tmpTarget=null,tmpTargetNodeId="",moveType=consts.move.TYPE_INNER,tmpArrow.css({display:"none"}),window.zTreeMoveTimer&&(clearTimeout(window.zTreeMoveTimer),window.zTreeMoveTargetNodeTId=null))):(moveType=consts.move.TYPE_INNER,tmpTarget&&tools.apply(targetSetting.edit.drag.inner,[targetSetting.treeId,nodes,null],!!targetSetting.edit.drag.inner)?tmpTarget.addClass(consts.node.TMPTARGET_TREE):tmpTarget=null,tmpArrow.css({display:"none"}),window.zTreeMoveTimer&&(clearTimeout(window.zTreeMoveTimer),window.zTreeMoveTargetNodeTId=null)),preTmpTargetNodeId=tmpTargetNodeId,preTmpMoveType=moveType,setting.treeObj.trigger(consts.event.DRAGMOVE,[event,setting.treeId,nodes])}return!1}function _docMouseUp(event){if(window.zTreeMoveTimer&&(clearTimeout(window.zTreeMoveTimer),window.zTreeMoveTargetNodeTId=null),preTmpMoveType=preTmpTargetNodeId=null,doc.unbind("mousemove",_docMouseMove),doc.unbind("mouseup",_docMouseUp),doc.unbind("selectstart",_docSelect),body.css("cursor","auto"),tmpTarget&&(tmpTarget.removeClass(consts.node.TMPTARGET_TREE),tmpTargetNodeId&&$("#"+tmpTargetNodeId+consts.id.A,tmpTarget).removeClass(consts.node.TMPTARGET_NODE+"_"+consts.move.TYPE_PREV).removeClass(consts.node.TMPTARGET_NODE+"_"+_consts.move.TYPE_NEXT).removeClass(consts.node.TMPTARGET_NODE+"_"+_consts.move.TYPE_INNER)),tools.showIfameMask(setting,!1),roots.showHoverDom=!0,0!=root.dragFlag){for(var tmpNode,i=root.dragFlag=0,l=nodes.length;i<l;i++)(tmpNode=nodes[i]).isParent&&root.dragNodeShowBefore[tmpNode.tId]&&!tmpNode.open&&(view.expandCollapseNode(setting,tmpNode,!tmpNode.open),delete root.dragNodeShowBefore[tmpNode.tId]);curNode&&curNode.remove(),tmpArrow&&tmpArrow.remove();var isCopy=(event.ctrlKey||event.metaKey)&&setting.edit.drag.isMove&&setting.edit.drag.isCopy||!setting.edit.drag.isMove&&setting.edit.drag.isCopy;if(!isCopy&&tmpTarget&&tmpTargetNodeId&&nodes[0].parentTId&&tmpTargetNodeId==nodes[0].parentTId&&moveType==consts.move.TYPE_INNER&&(tmpTarget=null),tmpTarget){var dragTargetNode=null==tmpTargetNodeId?null:data.getNodeCache(targetSetting,tmpTargetNodeId);if(0==tools.apply(setting.callback.beforeDrop,[targetSetting.treeId,nodes,dragTargetNode,moveType,isCopy],!0))return void view.selectNodes(sourceSetting,nodes);var newNodes=isCopy?tools.clone(nodes):nodes;function dropCallback(){if(isOtherTree){if(!isCopy)for(var i=0,l=nodes.length;i<l;i++)view.removeNode(setting,nodes[i]);if(moveType==consts.move.TYPE_INNER)view.addNodes(targetSetting,dragTargetNode,newNodes);else if(view.addNodes(targetSetting,dragTargetNode.getParentNode(),newNodes),moveType==consts.move.TYPE_PREV)for(i=0,l=newNodes.length;i<l;i++)view.moveNode(targetSetting,dragTargetNode,newNodes[i],moveType,!1);else for(i=-1,l=newNodes.length-1;i<l;l--)view.moveNode(targetSetting,dragTargetNode,newNodes[l],moveType,!1)}else if(isCopy&&moveType==consts.move.TYPE_INNER)view.addNodes(targetSetting,dragTargetNode,newNodes);else if(isCopy&&view.addNodes(targetSetting,dragTargetNode.getParentNode(),newNodes),moveType!=consts.move.TYPE_NEXT)for(i=0,l=newNodes.length;i<l;i++)view.moveNode(targetSetting,dragTargetNode,newNodes[i],moveType,!1);else for(i=-1,l=newNodes.length-1;i<l;l--)view.moveNode(targetSetting,dragTargetNode,newNodes[l],moveType,!1);view.selectNodes(targetSetting,newNodes),$$(newNodes[0],setting).focus().blur(),setting.treeObj.trigger(consts.event.DROP,[event,targetSetting.treeId,newNodes,dragTargetNode,moveType,isCopy])}moveType==consts.move.TYPE_INNER&&tools.canAsync(targetSetting,dragTargetNode)?view.asyncNode(targetSetting,dragTargetNode,!1,dropCallback):dropCallback()}else view.selectNodes(sourceSetting,nodes),setting.treeObj.trigger(consts.event.DROP,[event,setting.treeId,nodes,null,null,null])}}function _docSelect(){return!1}return tools.uCanDo(setting)&&doc.bind("mousemove",_docMouseMove),doc.bind("mouseup",_docMouseUp),doc.bind("selectstart",_docSelect),eventMouseDown.preventDefault&&eventMouseDown.preventDefault(),!0}},_z={tools:{getAbs:function(obj){var oRect=obj.getBoundingClientRect(),scrollTop=document.body.scrollTop+document.documentElement.scrollTop,scrollLeft=document.body.scrollLeft+document.documentElement.scrollLeft;return[oRect.left+scrollLeft,oRect.top+scrollTop]},inputFocus:function(inputObj){inputObj.get(0)&&(inputObj.focus(),tools.setCursorPosition(inputObj.get(0),inputObj.val().length))},inputSelect:function(inputObj){inputObj.get(0)&&(inputObj.focus(),inputObj.select())},setCursorPosition:function(obj,pos){var range;obj.setSelectionRange?(obj.focus(),obj.setSelectionRange(pos,pos)):obj.createTextRange&&((range=obj.createTextRange()).collapse(!0),range.moveEnd("character",pos),range.moveStart("character",pos),range.select())},showIfameMask:function(setting,showSign){for(var root=data.getRoot(setting);0<root.dragMaskList.length;)root.dragMaskList[0].remove(),root.dragMaskList.shift();if(showSign)for(var iframeList=$$("iframe",setting),i=0,l=iframeList.length;i<l;i++){var obj=iframeList.get(i),r=tools.getAbs(obj),dragMask=$$("<div id='zTreeMask_"+i+"' class='zTreeMask' style='top:"+r[1]+"px; left:"+r[0]+"px; width:"+obj.offsetWidth+"px; height:"+obj.offsetHeight+"px;'></div>",setting);dragMask.appendTo($$("body",setting)),root.dragMaskList.push(dragMask)}}},view:{addEditBtn:function(setting,node){var aObj,editStr;node.editNameFlag||0<$$(node,consts.id.EDIT,setting).length||tools.apply(setting.edit.showRenameBtn,[setting.treeId,node],setting.edit.showRenameBtn)&&(aObj=$$(node,consts.id.A,setting),editStr="<span class='"+consts.className.BUTTON+" edit' id='"+node.tId+consts.id.EDIT+"' title='"+tools.apply(setting.edit.renameTitle,[setting.treeId,node],setting.edit.renameTitle)+"' treeNode"+consts.id.EDIT+" style='display:none;'></span>",aObj.append(editStr),$$(node,consts.id.EDIT,setting).bind("click",function(){return tools.uCanDo(setting)&&0!=tools.apply(setting.callback.beforeEditName,[setting.treeId,node],!0)&&view.editNode(setting,node),!1}).show())},addRemoveBtn:function(setting,node){var aObj,removeStr;node.editNameFlag||0<$$(node,consts.id.REMOVE,setting).length||tools.apply(setting.edit.showRemoveBtn,[setting.treeId,node],setting.edit.showRemoveBtn)&&(aObj=$$(node,consts.id.A,setting),removeStr="<span class='"+consts.className.BUTTON+" remove' id='"+node.tId+consts.id.REMOVE+"' title='"+tools.apply(setting.edit.removeTitle,[setting.treeId,node],setting.edit.removeTitle)+"' treeNode"+consts.id.REMOVE+" style='display:none;'></span>",aObj.append(removeStr),$$(node,consts.id.REMOVE,setting).bind("click",function(){return tools.uCanDo(setting)&&0!=tools.apply(setting.callback.beforeRemove,[setting.treeId,node],!0)&&(view.removeNode(setting,node),setting.treeObj.trigger(consts.event.REMOVE,[setting.treeId,node])),!1}).bind("mousedown",function(eventMouseDown){return!0}).show())},addHoverDom:function(setting,node){data.getRoots().showHoverDom&&(node.isHover=!0,setting.edit.enable&&(view.addEditBtn(setting,node),view.addRemoveBtn(setting,node)),tools.apply(setting.view.addHoverDom,[setting.treeId,node]))},cancelCurEditNode:function(setting,forceName,isCancel){var root=data.getRoot(setting),nameKey=setting.data.key.name,node=root.curEditNode;if(node){var inputObj=root.curEditInput,newName=forceName||(isCancel?node[nameKey]:inputObj.val());if(!1===tools.apply(setting.callback.beforeRename,[setting.treeId,node,newName,isCancel],!0))return!1;node[nameKey]=newName,setting.treeObj.trigger(consts.event.RENAME,[setting.treeId,node,isCancel]),$$(node,consts.id.A,setting).removeClass(consts.node.CURSELECTED_EDIT),inputObj.unbind(),view.setNodeName(setting,node),node.editNameFlag=!1,root.curEditNode=null,root.curEditInput=null,view.selectNode(setting,node,!1)}return root.noSelection=!0},editNode:function(setting,node){var nameKey,inputObj,root=data.getRoot(setting);view.editNodeBlur=!1,data.isSelectedNode(setting,node)&&root.curEditNode==node&&node.editNameFlag?setTimeout(function(){tools.inputFocus(root.curEditInput)},0):(nameKey=setting.data.key.name,node.editNameFlag=!0,view.removeTreeDom(setting,node),view.cancelCurEditNode(setting),view.selectNode(setting,node,!1),$$(node,consts.id.SPAN,setting).html("<input type=text class='rename' id='"+node.tId+consts.id.INPUT+"' treeNode"+consts.id.INPUT+" >"),(inputObj=$$(node,consts.id.INPUT,setting)).attr("value",node[nameKey]),setting.edit.editNameSelectAll?tools.inputSelect(inputObj):tools.inputFocus(inputObj),inputObj.bind("blur",function(event){view.editNodeBlur||view.cancelCurEditNode(setting)}).bind("keydown",function(event){"13"==event.keyCode?(view.editNodeBlur=!0,view.cancelCurEditNode(setting)):"27"==event.keyCode&&view.cancelCurEditNode(setting,null,!0)}).bind("click",function(event){return!1}).bind("dblclick",function(event){return!1}),$$(node,consts.id.A,setting).addClass(consts.node.CURSELECTED_EDIT),root.curEditInput=inputObj,root.noSelection=!1,root.curEditNode=node)},moveNode:function(setting,targetNode,node,moveType,animateFlag,isSilent){var root=data.getRoot(setting),childKey=setting.data.key.children;if(targetNode!=node&&(!setting.data.keep.leaf||!targetNode||targetNode.isParent||moveType!=consts.move.TYPE_INNER)){var oldParentNode=node.parentTId?node.getParentNode():root,targetNodeIsRoot=null===targetNode||targetNode==root;targetNodeIsRoot&&null===targetNode&&(targetNode=root),targetNodeIsRoot&&(moveType=consts.move.TYPE_INNER);var targetObj,target_ulObj,ulstr,targetParentNode=targetNode.parentTId?targetNode.getParentNode():root;moveType!=consts.move.TYPE_PREV&&moveType!=consts.move.TYPE_NEXT&&(moveType=consts.move.TYPE_INNER),moveType==consts.move.TYPE_INNER&&(targetNodeIsRoot?node.parentTId=null:(targetNode.isParent||(targetNode.isParent=!0,targetNode.open=!!targetNode.open,view.setNodeLineIcos(setting,targetNode)),node.parentTId=targetNode.tId)),target_ulObj=targetNodeIsRoot?targetObj=setting.treeObj:(isSilent||moveType!=consts.move.TYPE_INNER?isSilent||view.expandCollapseNode(setting,targetNode.getParentNode(),!0,!1):view.expandCollapseNode(setting,targetNode,!0,!1),targetObj=$$(targetNode,setting),target_ulObj=$$(targetNode,consts.id.UL,setting),targetObj.get(0)&&!target_ulObj.get(0)&&(ulstr=[],view.makeUlHtml(setting,targetNode,ulstr,""),targetObj.append(ulstr.join(""))),$$(targetNode,consts.id.UL,setting));var nodeDom=$$(node,setting);nodeDom.get(0)?targetObj.get(0)||nodeDom.remove():nodeDom=view.appendNodes(setting,node.level,[node],null,!1,!0).join(""),target_ulObj.get(0)&&moveType==consts.move.TYPE_INNER?target_ulObj.append(nodeDom):targetObj.get(0)&&moveType==consts.move.TYPE_PREV?targetObj.before(nodeDom):targetObj.get(0)&&moveType==consts.move.TYPE_NEXT&&targetObj.after(nodeDom);var i,l,tmp_ulObj,tmp_switchObj,tmp_icoObj,tmpSrcIndex=-1,tmpTargetIndex=0,oldNeighbor=null,newNeighbor=null,oldLevel=node.level;if(node.isFirstNode)tmpSrcIndex=0,1<oldParentNode[childKey].length&&((oldNeighbor=oldParentNode[childKey][1]).isFirstNode=!0);else if(node.isLastNode)tmpSrcIndex=oldParentNode[childKey].length-1,(oldNeighbor=oldParentNode[childKey][tmpSrcIndex-1]).isLastNode=!0;else for(i=0,l=oldParentNode[childKey].length;i<l;i++)if(oldParentNode[childKey][i].tId==node.tId){tmpSrcIndex=i;break}if(0<=tmpSrcIndex&&oldParentNode[childKey].splice(tmpSrcIndex,1),moveType!=consts.move.TYPE_INNER)for(i=0,l=targetParentNode[childKey].length;i<l;i++)targetParentNode[childKey][i].tId==targetNode.tId&&(tmpTargetIndex=i);moveType==consts.move.TYPE_INNER?(targetNode[childKey]||(targetNode[childKey]=new Array),0<targetNode[childKey].length&&((newNeighbor=targetNode[childKey][targetNode[childKey].length-1]).isLastNode=!1),targetNode[childKey].splice(targetNode[childKey].length,0,node),node.isLastNode=!0,node.isFirstNode=1==targetNode[childKey].length):targetNode.isFirstNode&&moveType==consts.move.TYPE_PREV?(targetParentNode[childKey].splice(tmpTargetIndex,0,node),(newNeighbor=targetNode).isFirstNode=!1,node.parentTId=targetNode.parentTId,node.isFirstNode=!0,node.isLastNode=!1):targetNode.isLastNode&&moveType==consts.move.TYPE_NEXT?(targetParentNode[childKey].splice(tmpTargetIndex+1,0,node),(newNeighbor=targetNode).isLastNode=!1,node.parentTId=targetNode.parentTId,node.isFirstNode=!1,node.isLastNode=!0):(moveType==consts.move.TYPE_PREV?targetParentNode[childKey].splice(tmpTargetIndex,0,node):targetParentNode[childKey].splice(tmpTargetIndex+1,0,node),node.parentTId=targetNode.parentTId,node.isFirstNode=!1,node.isLastNode=!1),data.fixPIdKeyValue(setting,node),data.setSonNodeLevel(setting,node.getParentNode(),node),view.setNodeLineIcos(setting,node),view.repairNodeLevelClass(setting,node,oldLevel),!setting.data.keep.parent&&oldParentNode[childKey].length<1?(oldParentNode.isParent=!1,oldParentNode.open=!1,tmp_ulObj=$$(oldParentNode,consts.id.UL,setting),tmp_switchObj=$$(oldParentNode,consts.id.SWITCH,setting),tmp_icoObj=$$(oldParentNode,consts.id.ICON,setting),view.replaceSwitchClass(oldParentNode,tmp_switchObj,consts.folder.DOCU),view.replaceIcoClass(oldParentNode,tmp_icoObj,consts.folder.DOCU),tmp_ulObj.css("display","none")):oldNeighbor&&view.setNodeLineIcos(setting,oldNeighbor),newNeighbor&&view.setNodeLineIcos(setting,newNeighbor),setting.check&&setting.check.enable&&view.repairChkClass&&(view.repairChkClass(setting,oldParentNode),view.repairParentChkClassWithSelf(setting,oldParentNode),oldParentNode!=node.parent&&view.repairParentChkClassWithSelf(setting,node)),isSilent||view.expandCollapseParentNode(setting,node.getParentNode(),!0,animateFlag)}},removeEditBtn:function(setting,node){$$(node,consts.id.EDIT,setting).unbind().remove()},removeRemoveBtn:function(setting,node){$$(node,consts.id.REMOVE,setting).unbind().remove()},removeTreeDom:function(setting,node){node.isHover=!1,view.removeEditBtn(setting,node),view.removeRemoveBtn(setting,node),tools.apply(setting.view.removeHoverDom,[setting.treeId,node])},repairNodeLevelClass:function(setting,node,oldLevel){var liObj,aObj,ulObj,oldClass,newClass;oldLevel!==node.level&&(liObj=$$(node,setting),aObj=$$(node,consts.id.A,setting),ulObj=$$(node,consts.id.UL,setting),oldClass=consts.className.LEVEL+oldLevel,newClass=consts.className.LEVEL+node.level,liObj.removeClass(oldClass),liObj.addClass(newClass),aObj.removeClass(oldClass),aObj.addClass(newClass),ulObj.removeClass(oldClass),ulObj.addClass(newClass))},selectNodes:function(setting,nodes){for(var i=0,l=nodes.length;i<l;i++)view.selectNode(setting,nodes[i],0<i)}},event:{},data:{setSonNodeLevel:function(setting,parentNode,node){if(node){var childKey=setting.data.key.children;if(node.level=parentNode?parentNode.level+1:0,node[childKey])for(var i=0,l=node[childKey].length;i<l;i++)node[childKey][i]&&data.setSonNodeLevel(setting,node,node[childKey][i])}}}};$.extend(!0,$.fn.zTree.consts,_consts),$.extend(!0,$.fn.zTree._z,_z);var zt=$.fn.zTree,tools=zt._z.tools,consts=zt.consts,view=zt._z.view,data=zt._z.data,$$=(zt._z.event,tools.$);data.exSetting({edit:{enable:!1,editNameSelectAll:!1,showRemoveBtn:!0,showRenameBtn:!0,removeTitle:"remove",renameTitle:"rename",drag:{autoExpandTrigger:!1,isCopy:!0,isMove:!0,prev:!0,next:!0,inner:!0,minMoveSize:5,borderMax:10,borderMin:-5,maxShowNodeNum:5,autoOpenTime:500}},view:{addHoverDom:null,removeHoverDom:null},callback:{beforeDrag:null,beforeDragOpen:null,beforeDrop:null,beforeEditName:null,beforeRename:null,onDrag:null,onDragMove:null,onDrop:null,onRename:null}}),data.addInitBind(function(setting){var o=setting.treeObj,c=consts.event;o.bind(c.RENAME,function(event,treeId,treeNode,isCancel){tools.apply(setting.callback.onRename,[event,treeId,treeNode,isCancel])}),o.bind(c.DRAG,function(event,srcEvent,treeId,treeNodes){tools.apply(setting.callback.onDrag,[srcEvent,treeId,treeNodes])}),o.bind(c.DRAGMOVE,function(event,srcEvent,treeId,treeNodes){tools.apply(setting.callback.onDragMove,[srcEvent,treeId,treeNodes])}),o.bind(c.DROP,function(event,srcEvent,treeId,treeNodes,targetNode,moveType,isCopy){tools.apply(setting.callback.onDrop,[srcEvent,treeId,treeNodes,targetNode,moveType,isCopy])})}),data.addInitUnBind(function(setting){var o=setting.treeObj,c=consts.event;o.unbind(c.RENAME),o.unbind(c.DRAG),o.unbind(c.DRAGMOVE),o.unbind(c.DROP)}),data.addInitCache(function(treeId){}),data.addInitNode(function(setting,level,n,parentNode,isFirstNode,isLastNode,openFlag){n&&(n.isHover=!1,n.editNameFlag=!1)}),data.addInitProxy(function(e){var target=e.target,setting=data.getSetting(e.data.treeId),relatedTarget=e.relatedTarget,tId="",node=null,nodeEventType="",nodeEventCallback=null,tmp=null;if(tools.eqs(e.type,"mouseover")?(tmp=tools.getMDom(setting,target,[{tagName:"a",attrName:"treeNode"+consts.id.A}]))&&(tId=tools.getNodeMainDom(tmp).id,nodeEventType="hoverOverNode"):tools.eqs(e.type,"mouseout")?(tmp=tools.getMDom(setting,relatedTarget,[{tagName:"a",attrName:"treeNode"+consts.id.A}]))||(tId="remove",nodeEventType="hoverOutNode"):tools.eqs(e.type,"mousedown")&&(tmp=tools.getMDom(setting,target,[{tagName:"a",attrName:"treeNode"+consts.id.A}]))&&(tId=tools.getNodeMainDom(tmp).id,nodeEventType="mousedownNode"),0<tId.length)switch(node=data.getNodeCache(setting,tId),nodeEventType){case"mousedownNode":nodeEventCallback=_handler.onMousedownNode;break;case"hoverOverNode":nodeEventCallback=_handler.onHoverOverNode;break;case"hoverOutNode":nodeEventCallback=_handler.onHoverOutNode}return{stop:!1,node:node,nodeEventType:nodeEventType,nodeEventCallback:nodeEventCallback,treeEventType:"",treeEventCallback:null}}),data.addInitRoot(function(setting){var r=data.getRoot(setting),rs=data.getRoots();r.curEditNode=null,r.curEditInput=null,r.curHoverNode=null,r.dragFlag=0,r.dragNodeShowBefore=[],r.dragMaskList=new Array,rs.showHoverDom=!0}),data.addZTreeTools(function(setting,zTreeTools){zTreeTools.cancelEditName=function(newName){data.getRoot(this.setting).curEditNode&&view.cancelCurEditNode(this.setting,newName||null,!0)},zTreeTools.copyNode=function(targetNode,node,moveType,isSilent){if(!node)return null;if(targetNode&&!targetNode.isParent&&this.setting.data.keep.leaf&&moveType===consts.move.TYPE_INNER)return null;var _this=this,newNode=tools.clone(node);function copyCallback(){view.addNodes(_this.setting,targetNode,[newNode],isSilent)}return targetNode||(targetNode=null,moveType=consts.move.TYPE_INNER),moveType==consts.move.TYPE_INNER?tools.canAsync(this.setting,targetNode)?view.asyncNode(this.setting,targetNode,isSilent,copyCallback):copyCallback():(view.addNodes(this.setting,targetNode.parentNode,[newNode],isSilent),view.moveNode(this.setting,targetNode,newNode,moveType,!1,isSilent)),newNode},zTreeTools.editName=function(node){node&&node.tId&&node===data.getNodeCache(this.setting,node.tId)&&(node.parentTId&&view.expandCollapseParentNode(this.setting,node.getParentNode(),!0),view.editNode(this.setting,node))},zTreeTools.moveNode=function(targetNode,node,moveType,isSilent){if(!node)return node;if(targetNode&&!targetNode.isParent&&this.setting.data.keep.leaf&&moveType===consts.move.TYPE_INNER)return null;if(targetNode&&(node.parentTId==targetNode.tId&&moveType==consts.move.TYPE_INNER||0<$$(node,this.setting).find("#"+targetNode.tId).length))return null;targetNode=targetNode||null;var _this=this;function moveCallback(){view.moveNode(_this.setting,targetNode,node,moveType,!1,isSilent)}return tools.canAsync(this.setting,targetNode)&&moveType===consts.move.TYPE_INNER?view.asyncNode(this.setting,targetNode,isSilent,moveCallback):moveCallback(),node},zTreeTools.setEditable=function(editable){return this.setting.edit.enable=editable,this.refresh()}});var _cancelPreSelectedNode=view.cancelPreSelectedNode;view.cancelPreSelectedNode=function(setting,node){for(var list=data.getRoot(setting).curSelectedList,i=0,j=list.length;i<j&&(node&&node!==list[i]||(view.removeTreeDom(setting,list[i]),!node));i++);_cancelPreSelectedNode&&_cancelPreSelectedNode.apply(view,arguments)};var _createNodes=view.createNodes;view.createNodes=function(setting,level,nodes,parentNode){_createNodes&&_createNodes.apply(view,arguments),nodes&&view.repairParentChkClassWithSelf&&view.repairParentChkClassWithSelf(setting,parentNode)};var _makeNodeUrl=view.makeNodeUrl;view.makeNodeUrl=function(setting,node){return setting.edit.enable?null:_makeNodeUrl.apply(view,arguments)};var _removeNode=view.removeNode;view.removeNode=function(setting,node){var root=data.getRoot(setting);root.curEditNode===node&&(root.curEditNode=null),_removeNode&&_removeNode.apply(view,arguments)};var _selectNode=view.selectNode;view.selectNode=function(setting,node,addFlag){var root=data.getRoot(setting);return(!data.isSelectedNode(setting,node)||root.curEditNode!=node||!node.editNameFlag)&&(_selectNode&&_selectNode.apply(view,arguments),view.addHoverDom(setting,node),!0)};var _uCanDo=tools.uCanDo;tools.uCanDo=function(setting,e){var root=data.getRoot(setting);return!(!e||!(tools.eqs(e.type,"mouseover")||tools.eqs(e.type,"mouseout")||tools.eqs(e.type,"mousedown")||tools.eqs(e.type,"mouseup")))||(root.curEditNode&&(view.editNodeBlur=!1,root.curEditInput.focus()),!root.curEditNode&&(!_uCanDo||_uCanDo.apply(view,arguments)))}}($$),function(global,factory){"object"==typeof exports&&"undefined"!=typeof module?module.exports=factory():"function"==typeof define&&define.amd?define(factory):(global=global||self).html2canvas=factory()}(this,function(){"use strict";var extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)};function __extends(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}var __assign=function(){return(__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)};function __awaiter(thisArg,_arguments,P,generator){return new(P=P||Promise)(function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):new P(function(resolve){resolve(result.value)}).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())})}function __generator(thisArg,body){var f,y,t,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]},g={next:verb(0),throw:verb(1),return:verb(2)};return"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=0<(t=_.trys).length&&t[t.length-1])&&(6===op[0]||2===op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}}for(var Bounds=function(){function Bounds(x,y,w,h){this.left=x,this.top=y,this.width=w,this.height=h}return Bounds.prototype.add=function(x,y,w,h){return new Bounds(this.left+x,this.top+y,this.width+w,this.height+h)},Bounds.fromClientRect=function(clientRect){return new Bounds(clientRect.left,clientRect.top,clientRect.width,clientRect.height)},Bounds}(),parseBounds=function(node){return Bounds.fromClientRect(node.getBoundingClientRect())},toCodePoints=function(str){for(var codePoints=[],i=0,length=str.length;i<length;){var extra,value=str.charCodeAt(i++);55296<=value&&value<=56319&&i<length?56320==(64512&(extra=str.charCodeAt(i++)))?codePoints.push(((1023&value)<<10)+(1023&extra)+65536):(codePoints.push(value),i--):codePoints.push(value)}return codePoints},fromCodePoint=function(){for(var codePoints=[],_i=0;_i<arguments.length;_i++)codePoints[_i]=arguments[_i];if(String.fromCodePoint)return String.fromCodePoint.apply(String,codePoints);var length=codePoints.length;if(!length)return"";for(var codeUnits=[],index=-1,result="";++index<length;){var codePoint=codePoints[index];codePoint<=65535?codeUnits.push(codePoint):(codePoint-=65536,codeUnits.push(55296+(codePoint>>10),codePoint%1024+56320)),(index+1===length||16384<codeUnits.length)&&(result+=String.fromCharCode.apply(String,codeUnits),codeUnits.length=0)}return result},chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",lookup="undefined"==typeof Uint8Array?[]:new Uint8Array(256),i=0;i<chars.length;i++)lookup[chars.charCodeAt(i)]=i;function slice16(view,start,end){return view.slice?view.slice(start,end):new Uint16Array(Array.prototype.slice.call(view,start,end))}function isAdjacentWithSpaceIgnored(a,b,currentIndex,classTypes){var current=classTypes[currentIndex];if(Array.isArray(a)?-1!==a.indexOf(current):a===current)for(var i=currentIndex;i<=classTypes.length;){if((next=classTypes[++i])===b)return 1;if(next!==SP)break}if(current===SP)for(i=currentIndex;0<i;){var prev=classTypes[--i];if(Array.isArray(a)?-1!==a.indexOf(prev):a===prev)for(var next,n=currentIndex;n<=classTypes.length;){if((next=classTypes[++n])===b)return 1;if(next!==SP)break}if(prev!==SP)break}}function previousNonSpaceClassType(currentIndex,classTypes){for(var i=currentIndex;0<=i;){var type=classTypes[i];if(type!==SP)return type;i--}return 0}function cssFormattedClasses(codePoints,options){var _a=function(codePoints,lineBreak){void 0===lineBreak&&(lineBreak="strict");var types=[],indicies=[],categories=[];return codePoints.forEach(function(codePoint,index){var classType=UnicodeTrie.get(codePoint);if(50<classType?(categories.push(!0),classType-=50):categories.push(!1),-1!==["normal","auto","loose"].indexOf(lineBreak)&&-1!==[8208,8211,12316,12448].indexOf(codePoint))return indicies.push(index),types.push(16);if(4!==classType&&11!==classType)return indicies.push(index),31===classType?types.push("strict"===lineBreak?NS:ID):classType===SA||29===classType?types.push(AL):43===classType?131072<=codePoint&&codePoint<=196605||196608<=codePoint&&codePoint<=262141?types.push(ID):types.push(AL):void types.push(classType);if(0===index)return indicies.push(index),types.push(AL);var prev=types[index-1];return-1===LINE_BREAKS.indexOf(prev)?(indicies.push(indicies[index-1]),types.push(prev)):(indicies.push(index),types.push(AL))}),[indicies,types,categories]}(codePoints,(options=options||{lineBreak:"normal",wordBreak:"normal"}).lineBreak),indicies=_a[0],classTypes=_a[1],isLetterNumber=_a[2];return"break-all"!==options.wordBreak&&"break-word"!==options.wordBreak||(classTypes=classTypes.map(function(type){return-1!==[NU,AL,SA].indexOf(type)?ID:type})),[indicies,classTypes,"keep-all"===options.wordBreak?isLetterNumber.map(function(letterNumber,i){return letterNumber&&19968<=codePoints[i]&&codePoints[i]<=40959}):void 0]}function LineBreaker(str,options){var codePoints=toCodePoints(str),_a=cssFormattedClasses(codePoints,options),indicies=_a[0],classTypes=_a[1],forbiddenBreakpoints=_a[2],length=codePoints.length,lastEnd=0,nextIndex=0;return{next:function(){if(length<=nextIndex)return{done:!0,value:null};for(var lineBreak="×";nextIndex<length&&"×"===(lineBreak=function(codePoints,classTypes,indicies,index,forbiddenBreaks){if(0===indicies[index])return"×";var currentIndex=index-1;if(Array.isArray(forbiddenBreaks)&&!0===forbiddenBreaks[currentIndex])return"×";var beforeIndex=currentIndex-1,afterIndex=1+currentIndex,current=classTypes[currentIndex],before=0<=beforeIndex?classTypes[beforeIndex]:0,next=classTypes[afterIndex];if(2===current&&3===next)return"×";if(-1!==HARD_LINE_BREAKS.indexOf(current))return"!";if(-1!==HARD_LINE_BREAKS.indexOf(next))return"×";if(-1!==SPACE.indexOf(next))return"×";if(8===previousNonSpaceClassType(currentIndex,classTypes))return"÷";if(11===UnicodeTrie.get(codePoints[currentIndex])&&(next===ID||next===EB||next===EM))return"×";if(7===current||7===next)return"×";if(9===current)return"×";if(-1===[SP,BA,HY].indexOf(current)&&9===next)return"×";if(-1!==[CL,CP,EX,IS,SY].indexOf(next))return"×";if(previousNonSpaceClassType(currentIndex,classTypes)===OP)return"×";if(isAdjacentWithSpaceIgnored(23,OP,currentIndex,classTypes))return"×";if(isAdjacentWithSpaceIgnored([CL,CP],NS,currentIndex,classTypes))return"×";if(isAdjacentWithSpaceIgnored(12,12,currentIndex,classTypes))return"×";if(current===SP)return"÷";if(23===current||23===next)return"×";if(16===next||16===current)return"÷";if(-1!==[BA,HY,NS].indexOf(next)||14===current)return"×";if(36===before&&-1!==HYPHEN.indexOf(current))return"×";if(current===SY&&36===next)return"×";if(next===IN&&-1!==ALPHABETICS.concat(IN,EX,NU,ID,EB,EM).indexOf(current))return"×";if(-1!==ALPHABETICS.indexOf(next)&&current===NU||-1!==ALPHABETICS.indexOf(current)&&next===NU)return"×";if(current===PR&&-1!==[ID,EB,EM].indexOf(next)||-1!==[ID,EB,EM].indexOf(current)&&next===PO)return"×";if(-1!==ALPHABETICS.indexOf(current)&&-1!==PREFIX_POSTFIX.indexOf(next)||-1!==PREFIX_POSTFIX.indexOf(current)&&-1!==ALPHABETICS.indexOf(next))return"×";if(-1!==[PR,PO].indexOf(current)&&(next===NU||-1!==[OP,HY].indexOf(next)&&classTypes[1+afterIndex]===NU)||-1!==[OP,HY].indexOf(current)&&next===NU||current===NU&&-1!==[NU,SY,IS].indexOf(next))return"×";if(-1!==[NU,SY,IS,CL,CP].indexOf(next))for(var prevIndex=currentIndex;0<=prevIndex;){if((type=classTypes[prevIndex])===NU)return"×";if(-1===[SY,IS].indexOf(type))break;prevIndex--}if(-1!==[PR,PO].indexOf(next))for(var type,prevIndex=-1!==[CL,CP].indexOf(current)?beforeIndex:currentIndex;0<=prevIndex;){if((type=classTypes[prevIndex])===NU)return"×";if(-1===[SY,IS].indexOf(type))break;prevIndex--}if(JL===current&&-1!==[JL,JV,H2,H3].indexOf(next)||-1!==[JV,H2].indexOf(current)&&-1!==[JV,JT].indexOf(next)||-1!==[JT,H3].indexOf(current)&&next===JT)return"×";if(-1!==KOREAN_SYLLABLE_BLOCK.indexOf(current)&&-1!==[IN,PO].indexOf(next)||-1!==KOREAN_SYLLABLE_BLOCK.indexOf(next)&&current===PR)return"×";if(-1!==ALPHABETICS.indexOf(current)&&-1!==ALPHABETICS.indexOf(next))return"×";if(current===IS&&-1!==ALPHABETICS.indexOf(next))return"×";if(-1!==ALPHABETICS.concat(NU).indexOf(current)&&next===OP||-1!==ALPHABETICS.concat(NU).indexOf(next)&&current===CP)return"×";if(41===current&&41===next){for(var i=indicies[currentIndex],count=1;0<i&&41===classTypes[--i];)count++;if(count%2!=0)return"×"}return current===EB&&next===EM?"×":"÷"}(codePoints,classTypes,indicies,++nextIndex,forbiddenBreakpoints)););if("×"===lineBreak&&nextIndex!==length)return{done:!0,value:null};var value=new Break(codePoints,lineBreak,lastEnd,nextIndex);return lastEnd=nextIndex,{value:value,done:!1}}}}var TokenType,Trie=function(){function Trie(initialValue,errorValue,highStart,highValueIndex,index,data){this.initialValue=initialValue,this.errorValue=errorValue,this.highStart=highStart,this.highValueIndex=highValueIndex,this.index=index,this.data=data}return Trie.prototype.get=function(codePoint){var ix;if(0<=codePoint){if(codePoint<55296||56319<codePoint&&codePoint<=65535)return ix=((ix=this.index[codePoint>>5])<<2)+(31&codePoint),this.data[ix];if(codePoint<=65535)return ix=((ix=this.index[2048+(codePoint-55296>>5)])<<2)+(31&codePoint),this.data[ix];if(codePoint<this.highStart)return ix=2080+(codePoint>>11),ix=this.index[ix],ix+=codePoint>>5&63,ix=((ix=this.index[ix])<<2)+(31&codePoint),this.data[ix];if(codePoint<=1114111)return this.data[this.highValueIndex]}return this.errorValue},Trie}(),SP=10,BA=13,HY=15,CL=17,CP=18,EX=19,IN=20,NS=21,OP=22,IS=24,NU=25,PO=26,PR=27,SY=28,AL=30,EB=32,EM=33,H2=34,H3=35,ID=37,JL=38,JV=39,JT=40,SA=42,UnicodeTrie=function(base64){var view,start,end,buffer=function(base64){var encoded1,encoded2,encoded3,encoded4,bufferLength=.75*base64.length,len=base64.length,p=0;"="===base64[base64.length-1]&&(bufferLength--,"="===base64[base64.length-2]&&bufferLength--);for(var buffer=new("undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array&&void 0!==Uint8Array.prototype.slice?ArrayBuffer:Array)(bufferLength),bytes=Array.isArray(buffer)?buffer:new Uint8Array(buffer),i=0;i<len;i+=4)encoded1=lookup[base64.charCodeAt(i)],encoded2=lookup[base64.charCodeAt(i+1)],encoded3=lookup[base64.charCodeAt(i+2)],encoded4=lookup[base64.charCodeAt(i+3)],bytes[p++]=encoded1<<2|encoded2>>4,bytes[p++]=(15&encoded2)<<4|encoded3>>2,bytes[p++]=(3&encoded3)<<6|63&encoded4;return buffer}(base64),view32=Array.isArray(buffer)?function(buffer){for(var length=buffer.length,bytes=[],i=0;i<length;i+=4)bytes.push(buffer[i+3]<<24|buffer[i+2]<<16|buffer[i+1]<<8|buffer[i]);return bytes}(buffer):new Uint32Array(buffer),view16=Array.isArray(buffer)?function(buffer){for(var length=buffer.length,bytes=[],i=0;i<length;i+=2)bytes.push(buffer[i+1]<<8|buffer[i]);return bytes}(buffer):new Uint16Array(buffer),index=slice16(view16,12,view32[4]/2),data=2===view32[5]?slice16(view16,(24+view32[4])/2):(view=view32,start=Math.ceil((24+view32[4])/4),view.slice?view.slice(start,end):new Uint32Array(Array.prototype.slice.call(view,start,end)));return new Trie(view32[0],view32[1],view32[2],view32[3],index,data)}("KwAAAAAAAAAACA4AIDoAAPAfAAACAAAAAAAIABAAGABAAEgAUABYAF4AZgBeAGYAYABoAHAAeABeAGYAfACEAIAAiACQAJgAoACoAK0AtQC9AMUAXgBmAF4AZgBeAGYAzQDVAF4AZgDRANkA3gDmAOwA9AD8AAQBDAEUARoBIgGAAIgAJwEvATcBPwFFAU0BTAFUAVwBZAFsAXMBewGDATAAiwGTAZsBogGkAawBtAG8AcIBygHSAdoB4AHoAfAB+AH+AQYCDgIWAv4BHgImAi4CNgI+AkUCTQJTAlsCYwJrAnECeQKBAk0CiQKRApkCoQKoArACuALAAsQCzAIwANQC3ALkAjAA7AL0AvwCAQMJAxADGAMwACADJgMuAzYDPgOAAEYDSgNSA1IDUgNaA1oDYANiA2IDgACAAGoDgAByA3YDfgOAAIQDgACKA5IDmgOAAIAAogOqA4AAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAK8DtwOAAIAAvwPHA88D1wPfAyAD5wPsA/QD/AOAAIAABAQMBBIEgAAWBB4EJgQuBDMEIAM7BEEEXgBJBCADUQRZBGEEaQQwADAAcQQ+AXkEgQSJBJEEgACYBIAAoASoBK8EtwQwAL8ExQSAAIAAgACAAIAAgACgAM0EXgBeAF4AXgBeAF4AXgBeANUEXgDZBOEEXgDpBPEE+QQBBQkFEQUZBSEFKQUxBTUFPQVFBUwFVAVcBV4AYwVeAGsFcwV7BYMFiwWSBV4AmgWgBacFXgBeAF4AXgBeAKsFXgCyBbEFugW7BcIFwgXIBcIFwgXQBdQF3AXkBesF8wX7BQMGCwYTBhsGIwYrBjMGOwZeAD8GRwZNBl4AVAZbBl4AXgBeAF4AXgBeAF4AXgBeAF4AXgBeAGMGXgBqBnEGXgBeAF4AXgBeAF4AXgBeAF4AXgB5BoAG4wSGBo4GkwaAAIADHgR5AF4AXgBeAJsGgABGA4AAowarBrMGswagALsGwwbLBjAA0wbaBtoG3QbaBtoG2gbaBtoG2gblBusG8wb7BgMHCwcTBxsHCwcjBysHMAc1BzUHOgdCB9oGSgdSB1oHYAfaBloHaAfaBlIH2gbaBtoG2gbaBtoG2gbaBjUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHbQdeAF4ANQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQd1B30HNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1B4MH2gaKB68EgACAAIAAgACAAIAAgACAAI8HlwdeAJ8HpweAAIAArwe3B14AXgC/B8UHygcwANAH2AfgB4AA6AfwBz4B+AcACFwBCAgPCBcIogEYAR8IJwiAAC8INwg/CCADRwhPCFcIXwhnCEoDGgSAAIAAgABvCHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIhAiLCI4IMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAANQc1BzUHNQc1BzUHNQc1BzUHNQc1B54INQc1B6II2gaqCLIIugiAAIAAvgjGCIAAgACAAIAAgACAAIAAgACAAIAAywiHAYAA0wiAANkI3QjlCO0I9Aj8CIAAgACAAAIJCgkSCRoJIgknCTYHLwk3CZYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiAAIAAAAFAAXgBeAGAAcABeAHwAQACQAKAArQC9AJ4AXgBeAE0A3gBRAN4A7AD8AMwBGgEAAKcBNwEFAUwBXAF4QkhCmEKnArcCgAHHAsABz4LAAcABwAHAAd+C6ABoAG+C/4LAAcABwAHAAc+DF4MAAcAB54M3gweDV4Nng3eDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEeDqABVg6WDqABoQ6gAaABoAHXDvcONw/3DvcO9w73DvcO9w73DvcO9w73DvcO9w73DvcO9w73DvcO9w73DvcO9w73DvcO9w73DvcO9w73DvcO9w73DncPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB7cPPwlGCU4JMACAAIAAgABWCV4JYQmAAGkJcAl4CXwJgAkwADAAMAAwAIgJgACLCZMJgACZCZ8JowmrCYAAswkwAF4AXgB8AIAAuwkABMMJyQmAAM4JgADVCTAAMAAwADAAgACAAIAAgACAAIAAgACAAIAAqwYWBNkIMAAwADAAMADdCeAJ6AnuCR4E9gkwAP4JBQoNCjAAMACAABUK0wiAAB0KJAosCjQKgAAwADwKQwqAAEsKvQmdCVMKWwowADAAgACAALcEMACAAGMKgABrCjAAMAAwADAAMAAwADAAMAAwADAAMAAeBDAAMAAwADAAMAAwADAAMAAwADAAMAAwAIkEPQFzCnoKiQSCCooKkAqJBJgKoAqkCokEGAGsCrQKvArBCjAAMADJCtEKFQHZCuEK/gHpCvEKMAAwADAAMACAAIwE+QowAIAAPwEBCzAAMAAwADAAMACAAAkLEQswAIAAPwEZCyELgAAOCCkLMAAxCzkLMAAwADAAMAAwADAAXgBeAEELMAAwADAAMAAwADAAMAAwAEkLTQtVC4AAXAtkC4AAiQkwADAAMAAwADAAMAAwADAAbAtxC3kLgAuFC4sLMAAwAJMLlwufCzAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAApwswADAAMACAAIAAgACvC4AAgACAAIAAgACAALcLMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAvwuAAMcLgACAAIAAgACAAIAAyguAAIAAgACAAIAA0QswADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAANkLgACAAIAA4AswADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACJCR4E6AswADAAhwHwC4AA+AsADAgMEAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMACAAIAAGAwdDCUMMAAwAC0MNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQw1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHPQwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADUHNQc1BzUHNQc1BzUHNQc2BzAAMAA5DDUHNQc1BzUHNQc1BzUHNQc1BzUHNQdFDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAgACAAIAATQxSDFoMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAF4AXgBeAF4AXgBeAF4AYgxeAGoMXgBxDHkMfwxeAIUMXgBeAI0MMAAwADAAMAAwAF4AXgCVDJ0MMAAwADAAMABeAF4ApQxeAKsMswy7DF4Awgy9DMoMXgBeAF4AXgBeAF4AXgBeAF4AXgDRDNkMeQBqCeAM3Ax8AOYM7Az0DPgMXgBeAF4AXgBeAF4AXgBeAF4AXgBeAF4AXgBeAF4AXgCgAAANoAAHDQ4NFg0wADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAeDSYNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIAAgACAAIAAgACAAC4NMABeAF4ANg0wADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAD4NRg1ODVYNXg1mDTAAbQ0wADAAMAAwADAAMAAwADAA2gbaBtoG2gbaBtoG2gbaBnUNeg3CBYANwgWFDdoGjA3aBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gaUDZwNpA2oDdoG2gawDbcNvw3HDdoG2gbPDdYN3A3fDeYN2gbsDfMN2gbaBvoN/g3aBgYODg7aBl4AXgBeABYOXgBeACUG2gYeDl4AJA5eACwO2w3aBtoGMQ45DtoG2gbaBtoGQQ7aBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gZJDjUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1B1EO2gY1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQdZDjUHNQc1BzUHNQc1B2EONQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHaA41BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1B3AO2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gY1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1B2EO2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gZJDtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBkkOeA6gAKAAoAAwADAAMAAwAKAAoACgAKAAoACgAKAAgA4wADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAD//wQABAAEAAQABAAEAAQABAAEAA0AAwABAAEAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAKABMAFwAeABsAGgAeABcAFgASAB4AGwAYAA8AGAAcAEsASwBLAEsASwBLAEsASwBLAEsAGAAYAB4AHgAeABMAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAFgAbABIAHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYADQARAB4ABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkAFgAaABsAGwAbAB4AHQAdAB4ATwAXAB4ADQAeAB4AGgAbAE8ATwAOAFAAHQAdAB0ATwBPABcATwBPAE8AFgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwArAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAAQABAANAA0ASwBLAEsASwBLAEsASwBLAEsASwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUAArACsABABQAAQABAAEAAQABAAEAAQAKwArAAQABAArACsABAAEAAQAUAArACsAKwArACsAKwArACsABAArACsAKwArAFAAUAArAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAGgAaAFAAUABQAFAAUABMAB4AGwBQAB4AKwArACsABAAEAAQAKwBQAFAAUABQAFAAUAArACsAKwArAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUAArAFAAUAArACsABAArAAQABAAEAAQABAArACsAKwArAAQABAArACsABAAEAAQAKwArACsABAArACsAKwArACsAKwArAFAAUABQAFAAKwBQACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwAEAAQAUABQAFAABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUAArACsABABQAAQABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQAKwArAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwAeABsAKwArACsAKwArACsAKwBQAAQABAAEAAQABAAEACsABAAEAAQAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwArAAQABAArACsABAAEAAQAKwArACsAKwArACsAKwArAAQABAArACsAKwArAFAAUAArAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwAeAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwAEAFAAKwBQAFAAUABQAFAAUAArACsAKwBQAFAAUAArAFAAUABQAFAAKwArACsAUABQACsAUAArAFAAUAArACsAKwBQAFAAKwArACsAUABQAFAAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQAKwArACsABAAEAAQAKwAEAAQABAAEACsAKwBQACsAKwArACsAKwArAAQAKwArACsAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAB4AHgAeAB4AHgAeABsAHgArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABAArACsAKwArACsAKwArAAQABAArAFAAUABQACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAB4AUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABAArACsAKwArACsAKwArAAQABAArACsAKwArACsAKwArAFAAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwArAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAKwBcAFwAKwBcACsAKwBcACsAKwArACsAKwArAFwAXABcAFwAKwBcAFwAXABcAFwAXABcACsAXABcAFwAKwBcACsAXAArACsAXABcACsAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgArACoAKgBcACsAKwBcAFwAXABcAFwAKwBcACsAKgAqACoAKgAqACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAFwAXABcAFwAUAAOAA4ADgAOAB4ADgAOAAkADgAOAA0ACQATABMAEwATABMACQAeABMAHgAeAB4ABAAEAB4AHgAeAB4AHgAeAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUAANAAQAHgAEAB4ABAAWABEAFgARAAQABABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAAQABAAEAAQABAANAAQABABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsADQANAB4AHgAeAB4AHgAeAAQAHgAeAB4AHgAeAB4AKwAeAB4ADgAOAA0ADgAeAB4AHgAeAB4ACQAJACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgAeAB4AHgBcAFwAXABcAFwAXAAqACoAKgAqAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAKgAqACoAKgAqACoAKgBcAFwAXAAqACoAKgAqAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAXAAqAEsASwBLAEsASwBLAEsASwBLAEsAKgAqACoAKgAqACoAUABQAFAAUABQAFAAKwBQACsAKwArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQACsAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwAEAAQABAAeAA0AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAEQArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAADQANAA0AUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAA0ADQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQACsABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoADQANABUAXAANAB4ADQAbAFwAKgArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAB4AHgATABMADQANAA4AHgATABMAHgAEAAQABAAJACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAUABQAFAAUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwAeACsAKwArABMAEwBLAEsASwBLAEsASwBLAEsASwBLAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwBcAFwAXABcAFwAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcACsAKwArACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwAeAB4AXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgArACsABABLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKgAqACoAKgAqACoAKgBcACoAKgAqACoAKgAqACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAUABQAFAAUABQAFAAUAArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4ADQANAA0ADQAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAHgAeAB4AHgBQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwANAA0ADQANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwBQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsABAAEAAQAHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAABABQAFAAUABQAAQABAAEAFAAUAAEAAQABAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAKwBQACsAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAKwArAB4AHgAeAB4AHgAeACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAUABQAFAAKwAeAB4AHgAeAB4AHgAeAA4AHgArAA0ADQANAA0ADQANAA0ACQANAA0ADQAIAAQACwAEAAQADQAJAA0ADQAMAB0AHQAeABcAFwAWABcAFwAXABYAFwAdAB0AHgAeABQAFAAUAA0AAQABAAQABAAEAAQABAAJABoAGgAaABoAGgAaABoAGgAeABcAFwAdABUAFQAeAB4AHgAeAB4AHgAYABYAEQAVABUAFQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgANAB4ADQANAA0ADQAeAA0ADQANAAcAHgAeAB4AHgArAAQABAAEAAQABAAEAAQABAAEAAQAUABQACsAKwBPAFAAUABQAFAAUAAeAB4AHgAWABEATwBQAE8ATwBPAE8AUABQAFAAUABQAB4AHgAeABYAEQArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAGwAbABsAGwAbABsAGwAaABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAaABsAGwAbABsAGgAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgBQABoAHgAdAB4AUAAeABoAHgAeAB4AHgAeAB4AHgAeAB4ATwAeAFAAGwAeAB4AUABQAFAAUABQAB4AHgAeAB0AHQAeAFAAHgBQAB4AUAAeAFAATwBQAFAAHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AUABQAFAAUABPAE8AUABQAFAAUABQAE8AUABQAE8AUABPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAE8ATwBPAE8ATwBPAE8ATwBPAE8AUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAATwAeAB4AKwArACsAKwAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB0AHQAeAB4AHgAdAB0AHgAeAB0AHgAeAB4AHQAeAB0AGwAbAB4AHQAeAB4AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB0AHgAdAB4AHQAdAB0AHQAdAB0AHgAdAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAdAB0AHQAdAB4AHgAdAB0AHgAeAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABQAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAlACUAHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBQAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAeAB4AHgAeAB0AHQAeAB4AHgAeAB0AHQAdAB4AHgAdAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB0AHQAeAB4AHQAeAB4AHgAeAB0AHQAeAB4AHgAeACUAJQAdAB0AJQAeACUAJQAlACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAHgAeAB4AHgAdAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHQAdAB0AHgAdACUAHQAdAB4AHQAdAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHQAdAB0AHQAlAB4AJQAlACUAHQAlACUAHQAdAB0AJQAlAB0AHQAlAB0AHQAlACUAJQAeAB0AHgAeAB4AHgAdAB0AJQAdAB0AHQAdAB0AHQAlACUAJQAlACUAHQAlACUAIAAlAB0AHQAlACUAJQAlACUAJQAlACUAHgAeAB4AJQAlACAAIAAgACAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeABcAFwAXABcAFwAXAB4AEwATACUAHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwArACUAJQBXAFcAVwBXACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAKwArACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAE8ATwBPAE8ATwBPAE8ATwAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeACsAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUAArACsAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQBQAFAAUABQACsAKwArACsAUABQAFAAUABQAFAAUABQAA0AUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQACsAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgBQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAABAAEAAQAKwAEAAQAKwArACsAKwArAAQABAAEAAQAUABQAFAAUAArAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsABAAEAAQAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsADQANAA0ADQANAA0ADQANAB4AKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AUABQAFAAUABQAFAAUABQAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAUABQAFAAUABQAA0ADQANAA0ADQANABQAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwANAA0ADQANAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAeAAQABAAEAB4AKwArAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLACsADQArAB4AKwArAAQABAAEAAQAUABQAB4AUAArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwAEAAQABAAEAAQABAAEAAQABAAOAA0ADQATABMAHgAeAB4ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0AUABQAFAAUAAEAAQAKwArAAQADQANAB4AUAArACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXABcAA0ADQANACoASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUAArACsAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANACsADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEcARwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQACsAKwAeAAQABAANAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAEAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUAArACsAUAArACsAUABQACsAKwBQAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AKwArAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAeAB4ADQANAA0ADQAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAArAAQABAArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAEAAQABAAEAAQABAAEACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAFgAWAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAKwBQACsAKwArACsAKwArAFAAKwArACsAKwBQACsAUAArAFAAKwBQAFAAUAArAFAAUAArAFAAKwArAFAAKwBQACsAUAArAFAAKwBQACsAUABQACsAUAArACsAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAUABQAFAAUAArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUAArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAlACUAJQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeACUAJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeACUAJQAlACUAJQAeACUAJQAlACUAJQAgACAAIAAlACUAIAAlACUAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAIQAhACEAIQAhACUAJQAgACAAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAIAAgACAAIAAlACUAJQAlACAAJQAgACAAIAAgACAAIAAgACAAIAAlACUAJQAgACUAJQAlACUAIAAgACAAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeACUAHgAlAB4AJQAlACUAJQAlACAAJQAlACUAJQAeACUAHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAIAAgACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAIAAlACUAJQAlACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAIAAgACAAJQAlACUAIAAgACAAIAAgAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFwAXABcAFQAVABUAHgAeAB4AHgAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAIAAgACAAJQAlACUAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAlACAAIAAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsA"),ALPHABETICS=[AL,36],HARD_LINE_BREAKS=[1,2,3,5],SPACE=[SP,8],PREFIX_POSTFIX=[PR,PO],LINE_BREAKS=HARD_LINE_BREAKS.concat(SPACE),KOREAN_SYLLABLE_BLOCK=[JL,JV,JT,H2,H3],HYPHEN=[HY,BA],Break=function(){function Break(codePoints,lineBreak,start,end){this.codePoints=codePoints,this.required="!"===lineBreak,this.start=start,this.end=end}return Break.prototype.slice=function(){return fromCodePoint.apply(void 0,this.codePoints.slice(this.start,this.end))},Break}();!function(TokenType){TokenType[TokenType.STRING_TOKEN=0]="STRING_TOKEN",TokenType[TokenType.BAD_STRING_TOKEN=1]="BAD_STRING_TOKEN",TokenType[TokenType.LEFT_PARENTHESIS_TOKEN=2]="LEFT_PARENTHESIS_TOKEN",TokenType[TokenType.RIGHT_PARENTHESIS_TOKEN=3]="RIGHT_PARENTHESIS_TOKEN",TokenType[TokenType.COMMA_TOKEN=4]="COMMA_TOKEN",TokenType[TokenType.HASH_TOKEN=5]="HASH_TOKEN",TokenType[TokenType.DELIM_TOKEN=6]="DELIM_TOKEN",TokenType[TokenType.AT_KEYWORD_TOKEN=7]="AT_KEYWORD_TOKEN",TokenType[TokenType.PREFIX_MATCH_TOKEN=8]="PREFIX_MATCH_TOKEN",TokenType[TokenType.DASH_MATCH_TOKEN=9]="DASH_MATCH_TOKEN",TokenType[TokenType.INCLUDE_MATCH_TOKEN=10]="INCLUDE_MATCH_TOKEN",TokenType[TokenType.LEFT_CURLY_BRACKET_TOKEN=11]="LEFT_CURLY_BRACKET_TOKEN",TokenType[TokenType.RIGHT_CURLY_BRACKET_TOKEN=12]="RIGHT_CURLY_BRACKET_TOKEN",TokenType[TokenType.SUFFIX_MATCH_TOKEN=13]="SUFFIX_MATCH_TOKEN",TokenType[TokenType.SUBSTRING_MATCH_TOKEN=14]="SUBSTRING_MATCH_TOKEN",TokenType[TokenType.DIMENSION_TOKEN=15]="DIMENSION_TOKEN",TokenType[TokenType.PERCENTAGE_TOKEN=16]="PERCENTAGE_TOKEN",TokenType[TokenType.NUMBER_TOKEN=17]="NUMBER_TOKEN",TokenType[TokenType.FUNCTION=18]="FUNCTION",TokenType[TokenType.FUNCTION_TOKEN=19]="FUNCTION_TOKEN",TokenType[TokenType.IDENT_TOKEN=20]="IDENT_TOKEN",TokenType[TokenType.COLUMN_TOKEN=21]="COLUMN_TOKEN",TokenType[TokenType.URL_TOKEN=22]="URL_TOKEN",TokenType[TokenType.BAD_URL_TOKEN=23]="BAD_URL_TOKEN",TokenType[TokenType.CDC_TOKEN=24]="CDC_TOKEN",TokenType[TokenType.CDO_TOKEN=25]="CDO_TOKEN",TokenType[TokenType.COLON_TOKEN=26]="COLON_TOKEN",TokenType[TokenType.SEMICOLON_TOKEN=27]="SEMICOLON_TOKEN",TokenType[TokenType.LEFT_SQUARE_BRACKET_TOKEN=28]="LEFT_SQUARE_BRACKET_TOKEN",TokenType[TokenType.RIGHT_SQUARE_BRACKET_TOKEN=29]="RIGHT_SQUARE_BRACKET_TOKEN",TokenType[TokenType.UNICODE_RANGE_TOKEN=30]="UNICODE_RANGE_TOKEN",TokenType[TokenType.WHITESPACE_TOKEN=31]="WHITESPACE_TOKEN",TokenType[TokenType.EOF_TOKEN=32]="EOF_TOKEN"}(TokenType=TokenType||{});function isDigit(codePoint){return 48<=codePoint&&codePoint<=57}function isHex(codePoint){return isDigit(codePoint)||65<=codePoint&&codePoint<=70||97<=codePoint&&codePoint<=102}function isWhiteSpace(codePoint){return 10===codePoint||9===codePoint||32===codePoint}function isNameStartCodePoint(codePoint){return function(codePoint){return function(codePoint){return 97<=codePoint&&codePoint<=122}(codePoint)||function(codePoint){return 65<=codePoint&&codePoint<=90}(codePoint)}(codePoint)||128<=codePoint||95===codePoint}function isNameCodePoint(codePoint){return isNameStartCodePoint(codePoint)||isDigit(codePoint)||45===codePoint}function isValidEscape(c1,c2){return 92===c1&&10!==c2}function isIdentifierStart(c1,c2,c3){return 45===c1?isNameStartCodePoint(c2)||92===c2&&10!==c3:!!isNameStartCodePoint(c1)||92===c1&&92===c1&&10!==c2}function isNumberStart(c1,c2,c3){return 43===c1||45===c1?!!isDigit(c2)||46===c2&&isDigit(c3):isDigit(46===c1?c2:c1)}function isDimensionToken(token){return token.type===TokenType.DIMENSION_TOKEN}function isNumberToken(token){return token.type===TokenType.NUMBER_TOKEN}function isIdentToken(token){return token.type===TokenType.IDENT_TOKEN}function isStringToken(token){return token.type===TokenType.STRING_TOKEN}function isIdentWithValue(token,value){return isIdentToken(token)&&token.value===value}function nonWhiteSpace(token){return token.type!==TokenType.WHITESPACE_TOKEN}function nonFunctionArgSeparator(token){return token.type!==TokenType.WHITESPACE_TOKEN&&token.type!==TokenType.COMMA_TOKEN}function parseFunctionArgs(tokens){var args=[],arg=[];return tokens.forEach(function(token){if(token.type===TokenType.COMMA_TOKEN){if(0===arg.length)throw new Error("Error parsing function args, zero tokens for arg");return args.push(arg),void(arg=[])}token.type!==TokenType.WHITESPACE_TOKEN&&arg.push(token)}),arg.length&&args.push(arg),args}function isLength(token){return token.type===TokenType.NUMBER_TOKEN||token.type===TokenType.DIMENSION_TOKEN}function isLengthPercentage(token){return token.type===TokenType.PERCENTAGE_TOKEN||isLength(token)}function parseLengthPercentageTuple(tokens){return 1<tokens.length?[tokens[0],tokens[1]]:[tokens[0]]}function getAbsoluteValueForTuple(tuple,width,height){var x=tuple[0],y=tuple[1];return[getAbsoluteValue(x,width),getAbsoluteValue(void 0!==y?y:x,height)]}function isAngle(value){return value.type===TokenType.DIMENSION_TOKEN&&("deg"===value.unit||"grad"===value.unit||"rad"===value.unit||"turn"===value.unit)}function parseNamedSide(tokens){switch(tokens.filter(isIdentToken).map(function(ident){return ident.value}).join(" ")){case"to bottom right":case"to right bottom":case"left top":case"top left":return[ZERO_LENGTH,ZERO_LENGTH];case"to top":case"bottom":return deg(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[ZERO_LENGTH,HUNDRED_PERCENT];case"to right":case"left":return deg(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[HUNDRED_PERCENT,HUNDRED_PERCENT];case"to bottom":case"top":return deg(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[HUNDRED_PERCENT,ZERO_LENGTH];case"to left":case"right":return deg(270)}return 0}function asString(color){var alpha=255&color,blue=255&color>>8,green=255&color>>16,red=255&color>>24;return alpha<255?"rgba("+red+","+green+","+blue+","+alpha/255+")":"rgb("+red+","+green+","+blue+")"}function getTokenColorValue(token,i){if(token.type===TokenType.NUMBER_TOKEN)return token.number;if(token.type!==TokenType.PERCENTAGE_TOKEN)return 0;var max=3===i?1:255;return 3===i?token.number/100*max:Math.round(token.number/100*max)}function rgb(args){var tokens=args.filter(nonFunctionArgSeparator);if(3===tokens.length){var _a=tokens.map(getTokenColorValue),r=_a[0],g=_a[1],b=_a[2];return pack(r,g,b,1)}if(4!==tokens.length)return 0;var _b=tokens.map(getTokenColorValue),r=_b[0],g=_b[1],b=_b[2],a=_b[3];return pack(r,g,b,a)}var LEFT_PARENTHESIS_TOKEN={type:TokenType.LEFT_PARENTHESIS_TOKEN},RIGHT_PARENTHESIS_TOKEN={type:TokenType.RIGHT_PARENTHESIS_TOKEN},COMMA_TOKEN={type:TokenType.COMMA_TOKEN},SUFFIX_MATCH_TOKEN={type:TokenType.SUFFIX_MATCH_TOKEN},PREFIX_MATCH_TOKEN={type:TokenType.PREFIX_MATCH_TOKEN},COLUMN_TOKEN={type:TokenType.COLUMN_TOKEN},DASH_MATCH_TOKEN={type:TokenType.DASH_MATCH_TOKEN},INCLUDE_MATCH_TOKEN={type:TokenType.INCLUDE_MATCH_TOKEN},LEFT_CURLY_BRACKET_TOKEN={type:TokenType.LEFT_CURLY_BRACKET_TOKEN},RIGHT_CURLY_BRACKET_TOKEN={type:TokenType.RIGHT_CURLY_BRACKET_TOKEN},SUBSTRING_MATCH_TOKEN={type:TokenType.SUBSTRING_MATCH_TOKEN},BAD_URL_TOKEN={type:TokenType.BAD_URL_TOKEN},BAD_STRING_TOKEN={type:TokenType.BAD_STRING_TOKEN},CDO_TOKEN={type:TokenType.CDO_TOKEN},CDC_TOKEN={type:TokenType.CDC_TOKEN},COLON_TOKEN={type:TokenType.COLON_TOKEN},SEMICOLON_TOKEN={type:TokenType.SEMICOLON_TOKEN},LEFT_SQUARE_BRACKET_TOKEN={type:TokenType.LEFT_SQUARE_BRACKET_TOKEN},RIGHT_SQUARE_BRACKET_TOKEN={type:TokenType.RIGHT_SQUARE_BRACKET_TOKEN},WHITESPACE_TOKEN={type:TokenType.WHITESPACE_TOKEN},EOF_TOKEN={type:TokenType.EOF_TOKEN},Tokenizer=function(){function Tokenizer(){this._value=[]}return Tokenizer.prototype.write=function(chunk){this._value=this._value.concat(toCodePoints(chunk))},Tokenizer.prototype.read=function(){for(var tokens=[],token=this.consumeToken();token!==EOF_TOKEN;)tokens.push(token),token=this.consumeToken();return tokens},Tokenizer.prototype.consumeToken=function(){var codePoint=this.consumeCodePoint();switch(codePoint){case 34:return this.consumeStringToken(34);case 35:var c1=this.peekCodePoint(0),c2=this.peekCodePoint(1),c3=this.peekCodePoint(2);if(isNameCodePoint(c1)||92===c2&&10!==c3){var flags=isIdentifierStart(c1,c2,c3)?2:1,value=this.consumeName();return{type:TokenType.HASH_TOKEN,value:value,flags:flags}}break;case 36:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),SUFFIX_MATCH_TOKEN;break;case 39:return this.consumeStringToken(39);case 40:return LEFT_PARENTHESIS_TOKEN;case 41:return RIGHT_PARENTHESIS_TOKEN;case 42:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),SUBSTRING_MATCH_TOKEN;break;case 43:if(isNumberStart(codePoint,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(codePoint),this.consumeNumericToken();break;case 44:return COMMA_TOKEN;case 45:var e1=codePoint,e2=this.peekCodePoint(0),e3=this.peekCodePoint(1);if(isNumberStart(e1,e2,e3))return this.reconsumeCodePoint(codePoint),this.consumeNumericToken();if(isIdentifierStart(e1,e2,e3))return this.reconsumeCodePoint(codePoint),this.consumeIdentLikeToken();if(45===e2&&62===e3)return this.consumeCodePoint(),this.consumeCodePoint(),CDC_TOKEN;break;case 46:if(isNumberStart(codePoint,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(codePoint),this.consumeNumericToken();break;case 47:if(42===this.peekCodePoint(0))for(this.consumeCodePoint();;){var c=this.consumeCodePoint();if(42===c&&47===(c=this.consumeCodePoint()))return this.consumeToken();if(-1===c)return this.consumeToken()}break;case 58:return COLON_TOKEN;case 59:return SEMICOLON_TOKEN;case 60:if(33===this.peekCodePoint(0)&&45===this.peekCodePoint(1)&&45===this.peekCodePoint(2))return this.consumeCodePoint(),this.consumeCodePoint(),CDO_TOKEN;break;case 64:var a1=this.peekCodePoint(0),a2=this.peekCodePoint(1),a3=this.peekCodePoint(2);if(isIdentifierStart(a1,a2,a3)){value=this.consumeName();return{type:TokenType.AT_KEYWORD_TOKEN,value:value}}break;case 91:return LEFT_SQUARE_BRACKET_TOKEN;case 92:if(isValidEscape(codePoint,this.peekCodePoint(0)))return this.reconsumeCodePoint(codePoint),this.consumeIdentLikeToken();break;case 93:return RIGHT_SQUARE_BRACKET_TOKEN;case 61:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),PREFIX_MATCH_TOKEN;break;case 123:return LEFT_CURLY_BRACKET_TOKEN;case 125:return RIGHT_CURLY_BRACKET_TOKEN;case 117:case 85:var u1=this.peekCodePoint(0),u2=this.peekCodePoint(1);return 43!==u1||!isHex(u2)&&63!==u2||(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(codePoint),this.consumeIdentLikeToken();case 124:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),DASH_MATCH_TOKEN;if(124===this.peekCodePoint(0))return this.consumeCodePoint(),COLUMN_TOKEN;break;case 126:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),INCLUDE_MATCH_TOKEN;break;case-1:return EOF_TOKEN}return isWhiteSpace(codePoint)?(this.consumeWhiteSpace(),WHITESPACE_TOKEN):isDigit(codePoint)?(this.reconsumeCodePoint(codePoint),this.consumeNumericToken()):isNameStartCodePoint(codePoint)?(this.reconsumeCodePoint(codePoint),this.consumeIdentLikeToken()):{type:TokenType.DELIM_TOKEN,value:fromCodePoint(codePoint)}},Tokenizer.prototype.consumeCodePoint=function(){var value=this._value.shift();return void 0===value?-1:value},Tokenizer.prototype.reconsumeCodePoint=function(codePoint){this._value.unshift(codePoint)},Tokenizer.prototype.peekCodePoint=function(delta){return delta>=this._value.length?-1:this._value[delta]},Tokenizer.prototype.consumeUnicodeRangeToken=function(){for(var digits=[],codePoint=this.consumeCodePoint();isHex(codePoint)&&digits.length<6;)digits.push(codePoint),codePoint=this.consumeCodePoint();for(var questionMarks=!1;63===codePoint&&digits.length<6;)digits.push(codePoint),codePoint=this.consumeCodePoint(),questionMarks=!0;if(questionMarks){var start_1=parseInt(fromCodePoint.apply(void 0,digits.map(function(digit){return 63===digit?48:digit})),16),end=parseInt(fromCodePoint.apply(void 0,digits.map(function(digit){return 63===digit?70:digit})),16);return{type:TokenType.UNICODE_RANGE_TOKEN,start:start_1,end:end}}var start=parseInt(fromCodePoint.apply(void 0,digits),16);if(45===this.peekCodePoint(0)&&isHex(this.peekCodePoint(1))){this.consumeCodePoint(),codePoint=this.consumeCodePoint();for(var endDigits=[];isHex(codePoint)&&endDigits.length<6;)endDigits.push(codePoint),codePoint=this.consumeCodePoint();end=parseInt(fromCodePoint.apply(void 0,endDigits),16);return{type:TokenType.UNICODE_RANGE_TOKEN,start:start,end:end}}return{type:TokenType.UNICODE_RANGE_TOKEN,start:start,end:start}},Tokenizer.prototype.consumeIdentLikeToken=function(){var value=this.consumeName();return"url"===value.toLowerCase()&&40===this.peekCodePoint(0)?(this.consumeCodePoint(),this.consumeUrlToken()):40===this.peekCodePoint(0)?(this.consumeCodePoint(),{type:TokenType.FUNCTION_TOKEN,value:value}):{type:TokenType.IDENT_TOKEN,value:value}},Tokenizer.prototype.consumeUrlToken=function(){var value=[];if(this.consumeWhiteSpace(),-1===this.peekCodePoint(0))return{type:TokenType.URL_TOKEN,value:""};var next=this.peekCodePoint(0);if(39===next||34===next){var stringToken=this.consumeStringToken(this.consumeCodePoint());return stringToken.type===TokenType.STRING_TOKEN&&(this.consumeWhiteSpace(),-1===this.peekCodePoint(0)||41===this.peekCodePoint(0))?(this.consumeCodePoint(),{type:TokenType.URL_TOKEN,value:stringToken.value}):(this.consumeBadUrlRemnants(),BAD_URL_TOKEN)}for(;;){var codePoint=this.consumeCodePoint();if(-1===codePoint||41===codePoint)return{type:TokenType.URL_TOKEN,value:fromCodePoint.apply(void 0,value)};if(isWhiteSpace(codePoint))return this.consumeWhiteSpace(),-1===this.peekCodePoint(0)||41===this.peekCodePoint(0)?(this.consumeCodePoint(),{type:TokenType.URL_TOKEN,value:fromCodePoint.apply(void 0,value)}):(this.consumeBadUrlRemnants(),BAD_URL_TOKEN);if(34===codePoint||39===codePoint||40===codePoint||function(codePoint){return 0<=codePoint&&codePoint<=8||11===codePoint||14<=codePoint&&codePoint<=31||127===codePoint}(codePoint))return this.consumeBadUrlRemnants(),BAD_URL_TOKEN;if(92===codePoint){if(!isValidEscape(codePoint,this.peekCodePoint(0)))return this.consumeBadUrlRemnants(),BAD_URL_TOKEN;value.push(this.consumeEscapedCodePoint())}else value.push(codePoint)}},Tokenizer.prototype.consumeWhiteSpace=function(){for(;isWhiteSpace(this.peekCodePoint(0));)this.consumeCodePoint()},Tokenizer.prototype.consumeBadUrlRemnants=function(){for(;;){var codePoint=this.consumeCodePoint();if(41===codePoint||-1===codePoint)return;isValidEscape(codePoint,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},Tokenizer.prototype.consumeStringSlice=function(count){for(var value="";0<count;){var amount=Math.min(6e4,count);value+=fromCodePoint.apply(void 0,this._value.splice(0,amount)),count-=amount}return this._value.shift(),value},Tokenizer.prototype.consumeStringToken=function(endingCodePoint){for(var value="",i=0;;){var next,codePoint=this._value[i];if(-1===codePoint||void 0===codePoint||codePoint===endingCodePoint)return value+=this.consumeStringSlice(i),{type:TokenType.STRING_TOKEN,value:value};if(10===codePoint)return this._value.splice(0,i),BAD_STRING_TOKEN;92!==codePoint||-1!==(next=this._value[i+1])&&void 0!==next&&(10===next?(value+=this.consumeStringSlice(i),i=-1,this._value.shift()):92===codePoint&&10!==next&&(value+=this.consumeStringSlice(i),value+=fromCodePoint(this.consumeEscapedCodePoint()),i=-1)),i++}},Tokenizer.prototype.consumeNumber=function(){var repr=[],type=4,c1=this.peekCodePoint(0);for(43!==c1&&45!==c1||repr.push(this.consumeCodePoint());isDigit(this.peekCodePoint(0));)repr.push(this.consumeCodePoint());c1=this.peekCodePoint(0);var c2=this.peekCodePoint(1);if(46===c1&&isDigit(c2))for(repr.push(this.consumeCodePoint(),this.consumeCodePoint()),type=8;isDigit(this.peekCodePoint(0));)repr.push(this.consumeCodePoint());c1=this.peekCodePoint(0),c2=this.peekCodePoint(1);var c3=this.peekCodePoint(2);if((69===c1||101===c1)&&((43===c2||45===c2)&&isDigit(c3)||isDigit(c2)))for(repr.push(this.consumeCodePoint(),this.consumeCodePoint()),type=8;isDigit(this.peekCodePoint(0));)repr.push(this.consumeCodePoint());return[function(codePoints){var c=0,sign=1;43!==codePoints[c]&&45!==codePoints[c]||(45===codePoints[c]&&(sign=-1),c++);for(var integers=[];isDigit(codePoints[c]);)integers.push(codePoints[c++]);var int=integers.length?parseInt(fromCodePoint.apply(void 0,integers),10):0;46===codePoints[c]&&c++;for(var fraction=[];isDigit(codePoints[c]);)fraction.push(codePoints[c++]);var fracd=fraction.length,frac=fracd?parseInt(fromCodePoint.apply(void 0,fraction),10):0;69!==codePoints[c]&&101!==codePoints[c]||c++;var expsign=1;43!==codePoints[c]&&45!==codePoints[c]||(45===codePoints[c]&&(expsign=-1),c++);for(var exponent=[];isDigit(codePoints[c]);)exponent.push(codePoints[c++]);var exp=exponent.length?parseInt(fromCodePoint.apply(void 0,exponent),10):0;return sign*(int+frac*Math.pow(10,-fracd))*Math.pow(10,expsign*exp)}(repr),type]},Tokenizer.prototype.consumeNumericToken=function(){var _a=this.consumeNumber(),number=_a[0],flags=_a[1],c1=this.peekCodePoint(0),c2=this.peekCodePoint(1),c3=this.peekCodePoint(2);if(isIdentifierStart(c1,c2,c3)){var unit=this.consumeName();return{type:TokenType.DIMENSION_TOKEN,number:number,flags:flags,unit:unit}}return 37===c1?(this.consumeCodePoint(),{type:TokenType.PERCENTAGE_TOKEN,number:number,flags:flags}):{type:TokenType.NUMBER_TOKEN,number:number,flags:flags}},Tokenizer.prototype.consumeEscapedCodePoint=function(){var codePoint=this.consumeCodePoint();if(isHex(codePoint)){for(var hex=fromCodePoint(codePoint);isHex(this.peekCodePoint(0))&&hex.length<6;)hex+=fromCodePoint(this.consumeCodePoint());isWhiteSpace(this.peekCodePoint(0))&&this.consumeCodePoint();var hexCodePoint=parseInt(hex,16);return 0===hexCodePoint||function(codePoint){return 55296<=codePoint&&codePoint<=57343}(hexCodePoint)||1114111<hexCodePoint?65533:hexCodePoint}return-1===codePoint?65533:codePoint},Tokenizer.prototype.consumeName=function(){for(var result="";;){var codePoint=this.consumeCodePoint();if(isNameCodePoint(codePoint))result+=fromCodePoint(codePoint);else{if(!isValidEscape(codePoint,this.peekCodePoint(0)))return this.reconsumeCodePoint(codePoint),result;result+=fromCodePoint(this.consumeEscapedCodePoint())}}},Tokenizer}(),Parser=function(){function Parser(tokens){this._tokens=tokens}return Parser.create=function(value){var tokenizer=new Tokenizer;return tokenizer.write(value),new Parser(tokenizer.read())},Parser.parseValue=function(value){return Parser.create(value).parseComponentValue()},Parser.parseValues=function(value){return Parser.create(value).parseComponentValues()},Parser.prototype.parseComponentValue=function(){for(var token=this.consumeToken();token.type===TokenType.WHITESPACE_TOKEN;)token=this.consumeToken();if(token.type===TokenType.EOF_TOKEN)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(token);for(var value=this.consumeComponentValue();(token=this.consumeToken()).type===TokenType.WHITESPACE_TOKEN;);if(token.type===TokenType.EOF_TOKEN)return value;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},Parser.prototype.parseComponentValues=function(){for(var values=[];;){var value=this.consumeComponentValue();if(value.type===TokenType.EOF_TOKEN)return values;values.push(value),values.push()}},Parser.prototype.consumeComponentValue=function(){var token=this.consumeToken();switch(token.type){case TokenType.LEFT_CURLY_BRACKET_TOKEN:case TokenType.LEFT_SQUARE_BRACKET_TOKEN:case TokenType.LEFT_PARENTHESIS_TOKEN:return this.consumeSimpleBlock(token.type);case TokenType.FUNCTION_TOKEN:return this.consumeFunction(token)}return token},Parser.prototype.consumeSimpleBlock=function(type){for(var block={type:type,values:[]},token=this.consumeToken();;){if(token.type===TokenType.EOF_TOKEN||isEndingTokenFor(token,type))return block;this.reconsumeToken(token),block.values.push(this.consumeComponentValue()),token=this.consumeToken()}},Parser.prototype.consumeFunction=function(functionToken){for(var cssFunction={name:functionToken.value,values:[],type:TokenType.FUNCTION};;){var token=this.consumeToken();if(token.type===TokenType.EOF_TOKEN||token.type===TokenType.RIGHT_PARENTHESIS_TOKEN)return cssFunction;this.reconsumeToken(token),cssFunction.values.push(this.consumeComponentValue())}},Parser.prototype.consumeToken=function(){var token=this._tokens.shift();return void 0===token?EOF_TOKEN:token},Parser.prototype.reconsumeToken=function(token){this._tokens.unshift(token)},Parser}(),isEndingTokenFor=function(token,type){return type===TokenType.LEFT_CURLY_BRACKET_TOKEN&&token.type===TokenType.RIGHT_CURLY_BRACKET_TOKEN||(type===TokenType.LEFT_SQUARE_BRACKET_TOKEN&&token.type===TokenType.RIGHT_SQUARE_BRACKET_TOKEN||type===TokenType.LEFT_PARENTHESIS_TOKEN&&token.type===TokenType.RIGHT_PARENTHESIS_TOKEN)},ZERO_LENGTH={type:TokenType.NUMBER_TOKEN,number:0,flags:4},FIFTY_PERCENT={type:TokenType.PERCENTAGE_TOKEN,number:50,flags:4},HUNDRED_PERCENT={type:TokenType.PERCENTAGE_TOKEN,number:100,flags:4},getAbsoluteValue=function(token,parent){if(token.type===TokenType.PERCENTAGE_TOKEN)return token.number/100*parent;if(isDimensionToken(token))switch(token.unit){case"rem":case"em":return 16*token.number;case"px":default:return token.number}return token.number},angle_parse=function(value){if(value.type===TokenType.DIMENSION_TOKEN)switch(value.unit){case"deg":return Math.PI*value.number/180;case"grad":return Math.PI/200*value.number;case"rad":return value.number;case"turn":return 2*Math.PI*value.number}throw new Error("Unsupported angle type")},deg=function(deg){return Math.PI*deg/180},color_parse=function(value){if(value.type===TokenType.FUNCTION){var colorFunction=SUPPORTED_COLOR_FUNCTIONS[value.name];if(void 0===colorFunction)throw new Error('Attempting to parse an unsupported color function "'+value.name+'"');return colorFunction(value.values)}if(value.type===TokenType.HASH_TOKEN){if(3===value.value.length){var r=value.value.substring(0,1),g=value.value.substring(1,2),b=value.value.substring(2,3);return pack(parseInt(r+r,16),parseInt(g+g,16),parseInt(b+b,16),1)}if(4===value.value.length){var r=value.value.substring(0,1),g=value.value.substring(1,2),b=value.value.substring(2,3),a=value.value.substring(3,4);return pack(parseInt(r+r,16),parseInt(g+g,16),parseInt(b+b,16),parseInt(a+a,16)/255)}if(6===value.value.length){r=value.value.substring(0,2),g=value.value.substring(2,4),b=value.value.substring(4,6);return pack(parseInt(r,16),parseInt(g,16),parseInt(b,16),1)}if(8===value.value.length){r=value.value.substring(0,2),g=value.value.substring(2,4),b=value.value.substring(4,6),a=value.value.substring(6,8);return pack(parseInt(r,16),parseInt(g,16),parseInt(b,16),parseInt(a,16)/255)}}if(value.type===TokenType.IDENT_TOKEN){var namedColor=COLORS[value.value.toUpperCase()];if(void 0!==namedColor)return namedColor}return COLORS.TRANSPARENT},pack=function(r,g,b,a){return(r<<24|g<<16|b<<8|Math.round(255*a)<<0)>>>0};function hue2rgb(t1,t2,hue){return hue<0&&(hue+=1),1<=hue&&--hue,hue<1/6?(t2-t1)*hue*6+t1:hue<.5?t2:hue<2/3?6*(t2-t1)*(2/3-hue)+t1:t1}function hsl(args){var tokens=args.filter(nonFunctionArgSeparator),hue=tokens[0],saturation=tokens[1],lightness=tokens[2],alpha=tokens[3],h=(hue.type===TokenType.NUMBER_TOKEN?deg(hue.number):angle_parse(hue))/(2*Math.PI),s=isLengthPercentage(saturation)?saturation.number/100:0,l=isLengthPercentage(lightness)?lightness.number/100:0,a=void 0!==alpha&&isLengthPercentage(alpha)?getAbsoluteValue(alpha,1):1;if(0==s)return pack(255*l,255*l,255*l,1);var t2=l<=.5?l*(1+s):l+s-l*s,t1=2*l-t2,r=hue2rgb(t1,t2,h+1/3),g=hue2rgb(t1,t2,h),b=hue2rgb(t1,t2,h-1/3);return pack(255*r,255*g,255*b,a)}var PropertyDescriptorParsingType,BACKGROUND_CLIP,SUPPORTED_COLOR_FUNCTIONS={hsl:hsl,hsla:hsl,rgb:rgb,rgba:rgb},COLORS={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199};!function(PropertyDescriptorParsingType){PropertyDescriptorParsingType[PropertyDescriptorParsingType.VALUE=0]="VALUE",PropertyDescriptorParsingType[PropertyDescriptorParsingType.LIST=1]="LIST",PropertyDescriptorParsingType[PropertyDescriptorParsingType.IDENT_VALUE=2]="IDENT_VALUE",PropertyDescriptorParsingType[PropertyDescriptorParsingType.TYPE_VALUE=3]="TYPE_VALUE",PropertyDescriptorParsingType[PropertyDescriptorParsingType.TOKEN_VALUE=4]="TOKEN_VALUE"}(PropertyDescriptorParsingType=PropertyDescriptorParsingType||{}),function(BACKGROUND_CLIP){BACKGROUND_CLIP[BACKGROUND_CLIP.BORDER_BOX=0]="BORDER_BOX",BACKGROUND_CLIP[BACKGROUND_CLIP.PADDING_BOX=1]="PADDING_BOX",BACKGROUND_CLIP[BACKGROUND_CLIP.CONTENT_BOX=2]="CONTENT_BOX"}(BACKGROUND_CLIP=BACKGROUND_CLIP||{});function parseColorStop(args){var color$1=color_parse(args[0]),stop=args[1];return stop&&isLengthPercentage(stop)?{color:color$1,stop:stop}:{color:color$1,stop:null}}function processColorStops(stops,lineLength){var first=stops[0],last=stops[stops.length-1];null===first.stop&&(first.stop=ZERO_LENGTH),null===last.stop&&(last.stop=HUNDRED_PERCENT);for(var processStops=[],previous=0,i=0;i<stops.length;i++){var absoluteValue,stop_1=stops[i].stop;null!==stop_1?(previous<(absoluteValue=getAbsoluteValue(stop_1,lineLength))?processStops.push(absoluteValue):processStops.push(previous),previous=absoluteValue):processStops.push(null)}for(var gapBegin=null,i=0;i<processStops.length;i++){var stop_2=processStops[i];if(null===stop_2)null===gapBegin&&(gapBegin=i);else if(null!==gapBegin){for(var gapLength=i-gapBegin,gapValue=(stop_2-processStops[gapBegin-1])/(1+gapLength),g=1;g<=gapLength;g++)processStops[gapBegin+g-1]=gapValue*g;gapBegin=null}}return stops.map(function(_a,i){return{color:_a.color,stop:Math.max(Math.min(1,processStops[i]/lineLength),0)}})}function calculateGradientDirection(angle,width,height){var radian="number"==typeof angle?angle:function(corner,width,height){var centerX=width/2,centerY=height/2,x=getAbsoluteValue(corner[0],width)-centerX,y=centerY-getAbsoluteValue(corner[1],height);return(Math.atan2(y,x)+2*Math.PI)%(2*Math.PI)}(angle,width,height),lineLength=Math.abs(width*Math.sin(radian))+Math.abs(height*Math.cos(radian)),halfWidth=width/2,halfHeight=height/2,halfLineLength=lineLength/2,yDiff=Math.sin(radian-Math.PI/2)*halfLineLength,xDiff=Math.cos(radian-Math.PI/2)*halfLineLength;return[lineLength,halfWidth-xDiff,halfWidth+xDiff,halfHeight-yDiff,halfHeight+yDiff]}function distance(a,b){return Math.sqrt(a*a+b*b)}function findCorner(width,height,x,y,closest){return[[0,0],[0,height],[width,0],[width,height]].reduce(function(stat,corner){var cx=corner[0],cy=corner[1],d=distance(x-cx,y-cy);return(closest?d<stat.optimumDistance:d>stat.optimumDistance)?{optimumCorner:corner,optimumDistance:d}:stat},{optimumDistance:closest?1/0:-1/0,optimumCorner:null}).optimumCorner}function prefixLinearGradient(tokens){var angle$1=deg(180),stops=[];return parseFunctionArgs(tokens).forEach(function(arg,i){if(0===i){var firstToken=arg[0];if(firstToken.type===TokenType.IDENT_TOKEN&&-1!==["top","left","right","bottom"].indexOf(firstToken.value))return void(angle$1=parseNamedSide(arg));if(isAngle(firstToken))return void(angle$1=(angle_parse(firstToken)+deg(270))%deg(360))}var colorStop=parseColorStop(arg);stops.push(colorStop)}),{angle:angle$1,stops:stops,type:CSSImageType.LINEAR_GRADIENT}}function isGreenPixel(data){return 0===data[0]&&255===data[1]&&0===data[2]&&255===data[3]}function prefixRadialGradient(tokens){var shape=CSSRadialShape.CIRCLE,size=CSSRadialExtent.FARTHEST_CORNER,stops=[],position=[];return parseFunctionArgs(tokens).forEach(function(arg,i){var colorStop,isColorStop=!0;0===i?isColorStop=arg.reduce(function(acc,token){if(isIdentToken(token))switch(token.value){case"center":return position.push(FIFTY_PERCENT),!1;case"top":case"left":return position.push(ZERO_LENGTH),!1;case"right":case"bottom":return position.push(HUNDRED_PERCENT),!1}else if(isLengthPercentage(token)||isLength(token))return position.push(token),!1;return acc},isColorStop):1===i&&(isColorStop=arg.reduce(function(acc,token){if(isIdentToken(token))switch(token.value){case"circle":return shape=CSSRadialShape.CIRCLE,!1;case"ellipse":return shape=CSSRadialShape.ELLIPSE,!1;case"contain":case"closest-side":return size=CSSRadialExtent.CLOSEST_SIDE,!1;case"farthest-side":return size=CSSRadialExtent.FARTHEST_SIDE,!1;case"closest-corner":return size=CSSRadialExtent.CLOSEST_CORNER,!1;case"cover":case"farthest-corner":return size=CSSRadialExtent.FARTHEST_CORNER,!1}else if(isLength(token)||isLengthPercentage(token))return Array.isArray(size)||(size=[]),size.push(token),!1;return acc},isColorStop)),isColorStop&&(colorStop=parseColorStop(arg),stops.push(colorStop))}),{size:size,shape:shape,stops:stops,position:position,type:CSSImageType.RADIAL_GRADIENT}}var CSSImageType,backgroundClip={name:"background-clip",initialValue:"border-box",prefix:!1,type:PropertyDescriptorParsingType.LIST,parse:function(tokens){return tokens.map(function(token){if(isIdentToken(token))switch(token.value){case"padding-box":return BACKGROUND_CLIP.PADDING_BOX;case"content-box":return BACKGROUND_CLIP.CONTENT_BOX}return BACKGROUND_CLIP.BORDER_BOX})}},backgroundColor={name:"background-color",initialValue:"transparent",prefix:!1,type:PropertyDescriptorParsingType.TYPE_VALUE,format:"color"},createForeignObjectSVG=function(width,height,x,y,node){var xmlns="http://www.w3.org/2000/svg",svg=document.createElementNS(xmlns,"svg"),foreignObject=document.createElementNS(xmlns,"foreignObject");return svg.setAttributeNS(null,"width",width.toString()),svg.setAttributeNS(null,"height",height.toString()),foreignObject.setAttributeNS(null,"width","100%"),foreignObject.setAttributeNS(null,"height","100%"),foreignObject.setAttributeNS(null,"x",x.toString()),foreignObject.setAttributeNS(null,"y",y.toString()),foreignObject.setAttributeNS(null,"externalResourcesRequired","true"),svg.appendChild(foreignObject),foreignObject.appendChild(node),svg},loadSerializedSVG=function(svg){return new Promise(function(resolve,reject){var img=new Image;img.onload=function(){return resolve(img)},img.onerror=reject,img.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent((new XMLSerializer).serializeToString(svg))})},FEATURES={get SUPPORT_RANGE_BOUNDS(){var value=function(document){if(document.createRange){var range=document.createRange();if(range.getBoundingClientRect){var testElement=document.createElement("boundtest");testElement.style.height="123px",testElement.style.display="block",document.body.appendChild(testElement),range.selectNode(testElement);var rangeBounds=range.getBoundingClientRect(),rangeHeight=Math.round(rangeBounds.height);if(document.body.removeChild(testElement),123===rangeHeight)return!0}}return!1}(document);return Object.defineProperty(FEATURES,"SUPPORT_RANGE_BOUNDS",{value:value}),value},get SUPPORT_SVG_DRAWING(){var value=function(document){var img=new Image,canvas=document.createElement("canvas"),ctx=canvas.getContext("2d");if(!ctx)return!1;img.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{ctx.drawImage(img,0,0),canvas.toDataURL()}catch(e){return!1}return!0}(document);return Object.defineProperty(FEATURES,"SUPPORT_SVG_DRAWING",{value:value}),value},get SUPPORT_FOREIGNOBJECT_DRAWING(){var value="function"==typeof Array.from&&"function"==typeof window.fetch?function(document){var canvas=document.createElement("canvas");canvas.width=100,canvas.height=100;var ctx=canvas.getContext("2d");if(!ctx)return Promise.reject(!1);ctx.fillStyle="rgb(0, 255, 0)",ctx.fillRect(0,0,100,100);var img=new Image,greenImageSrc=canvas.toDataURL();img.src=greenImageSrc;var svg=createForeignObjectSVG(100,100,0,0,img);return ctx.fillStyle="red",ctx.fillRect(0,0,100,100),loadSerializedSVG(svg).then(function(img){ctx.drawImage(img,0,0);var data=ctx.getImageData(0,0,100,100).data;ctx.fillStyle="red",ctx.fillRect(0,0,100,100);var node=document.createElement("div");return node.style.backgroundImage="url("+greenImageSrc+")",node.style.height="100px",isGreenPixel(data)?loadSerializedSVG(createForeignObjectSVG(100,100,0,0,node)):Promise.reject(!1)}).then(function(img){return ctx.drawImage(img,0,0),isGreenPixel(ctx.getImageData(0,0,100,100).data)}).catch(function(){return!1})}(document):Promise.resolve(!1);return Object.defineProperty(FEATURES,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:value}),value},get SUPPORT_CORS_IMAGES(){var value=void 0!==(new Image).crossOrigin;return Object.defineProperty(FEATURES,"SUPPORT_CORS_IMAGES",{value:value}),value},get SUPPORT_RESPONSE_TYPE(){var value="string"==typeof(new XMLHttpRequest).responseType;return Object.defineProperty(FEATURES,"SUPPORT_RESPONSE_TYPE",{value:value}),value},get SUPPORT_CORS_XHR(){var value="withCredentials"in new XMLHttpRequest;return Object.defineProperty(FEATURES,"SUPPORT_CORS_XHR",{value:value}),value}},Logger=function(){function Logger(id){this.id=id,this.start=Date.now()}return Logger.prototype.debug=function(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];"undefined"!=typeof window&&window.console&&"function"==typeof console.debug?console.debug.apply(console,[this.id,this.getTime()+"ms"].concat(args)):this.info.apply(this,args)},Logger.prototype.getTime=function(){return Date.now()-this.start},Logger.create=function(id){Logger.instances[id]=new Logger(id)},Logger.destroy=function(id){delete Logger.instances[id]},Logger.getInstance=function(id){var instance=Logger.instances[id];if(void 0===instance)throw new Error("No logger instance found with id "+id);return instance},Logger.prototype.info=function(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];"undefined"!=typeof window&&window.console&&"function"==typeof console.info&&console.info.apply(console,[this.id,this.getTime()+"ms"].concat(args))},Logger.prototype.error=function(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];"undefined"!=typeof window&&window.console&&"function"==typeof console.error?console.error.apply(console,[this.id,this.getTime()+"ms"].concat(args)):this.info.apply(this,args)},Logger.instances={},Logger}(),CacheStorage=function(){function CacheStorage(){}return CacheStorage.create=function(name,options){return CacheStorage._caches[name]=new Cache(name,options)},CacheStorage.destroy=function(name){delete CacheStorage._caches[name]},CacheStorage.open=function(name){var cache=CacheStorage._caches[name];if(void 0!==cache)return cache;throw new Error('Cache with key "'+name+'" not found')},CacheStorage.getOrigin=function(url){var link=CacheStorage._link;return link?(link.href=url,link.href=link.href,link.protocol+link.hostname+link.port):"about:blank"},CacheStorage.isSameOrigin=function(src){return CacheStorage.getOrigin(src)===CacheStorage._origin},CacheStorage.setContext=function(window){CacheStorage._link=window.document.createElement("a"),CacheStorage._origin=CacheStorage.getOrigin(window.location.href)},CacheStorage.getInstance=function(){var current=CacheStorage._current;if(null===current)throw new Error("No cache instance attached");return current},CacheStorage.attachInstance=function(cache){CacheStorage._current=cache},CacheStorage.detachInstance=function(){CacheStorage._current=null},CacheStorage._caches={},CacheStorage._origin="about:blank",CacheStorage._current=null,CacheStorage}(),Cache=function(){function Cache(id,options){this.id=id,this._options=options,this._cache={}}return Cache.prototype.addImage=function(src){var result=Promise.resolve();return this.has(src)||(isBlobImage(src)||isRenderable(src))&&(this._cache[src]=this.loadImage(src)),result},Cache.prototype.match=function(src){return this._cache[src]},Cache.prototype.loadImage=function(key){return __awaiter(this,void 0,void 0,function(){var isSameOrigin,useCORS,useProxy,src,_this=this;return __generator(this,function(_a){switch(_a.label){case 0:return(isSameOrigin=CacheStorage.isSameOrigin(key),useCORS=!isInlineImage(key)&&!0===this._options.useCORS&&FEATURES.SUPPORT_CORS_IMAGES&&!isSameOrigin,useProxy=!isInlineImage(key)&&!isSameOrigin&&"string"==typeof this._options.proxy&&FEATURES.SUPPORT_CORS_XHR&&!useCORS,isSameOrigin||!1!==this._options.allowTaint||isInlineImage(key)||useProxy||useCORS)?(src=key,useProxy?[4,this.proxy(src)]:[3,2]):[2];case 1:src=_a.sent(),_a.label=2;case 2:return Logger.getInstance(this.id).debug("Added image "+key.substring(0,256)),[4,new Promise(function(resolve,reject){var img=new Image;img.onload=function(){return resolve(img)},img.onerror=reject,(isInlineBase64Image(src)||useCORS)&&(img.crossOrigin="anonymous"),img.src=src,!0===img.complete&&setTimeout(function(){return resolve(img)},500),0<_this._options.imageTimeout&&setTimeout(function(){return reject("Timed out ("+_this._options.imageTimeout+"ms) loading image")},_this._options.imageTimeout)})];case 3:return[2,_a.sent()]}})})},Cache.prototype.has=function(key){return void 0!==this._cache[key]},Cache.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},Cache.prototype.proxy=function(src){var _this=this,proxy=this._options.proxy;if(!proxy)throw new Error("No proxy defined");var key=src.substring(0,256);return new Promise(function(resolve,reject){var timeout_1,responseType=FEATURES.SUPPORT_RESPONSE_TYPE?"blob":"text",xhr=new XMLHttpRequest;xhr.onload=function(){var reader_1;200===xhr.status?"text"==responseType?resolve(xhr.response):((reader_1=new FileReader).addEventListener("load",function(){return resolve(reader_1.result)},!1),reader_1.addEventListener("error",function(e){return reject(e)},!1),reader_1.readAsDataURL(xhr.response)):reject("Failed to proxy resource "+key+" with status code "+xhr.status)},xhr.onerror=reject,xhr.open("GET",proxy+"?url="+encodeURIComponent(src)+"&responseType="+responseType),"text"!=responseType&&xhr instanceof XMLHttpRequest&&(xhr.responseType=responseType),_this._options.imageTimeout&&(timeout_1=_this._options.imageTimeout,xhr.timeout=timeout_1,xhr.ontimeout=function(){return reject("Timed out ("+timeout_1+"ms) proxying "+key)}),xhr.send()})},Cache}(),INLINE_SVG=/^data:image\/svg\+xml/i,INLINE_BASE64=/^data:image\/.*;base64,/i,INLINE_IMG=/^data:image\/.*/i,isRenderable=function(src){return FEATURES.SUPPORT_SVG_DRAWING||!isSVG(src)},isInlineImage=function(src){return INLINE_IMG.test(src)},isInlineBase64Image=function(src){return INLINE_BASE64.test(src)},isBlobImage=function(src){return"blob"===src.substr(0,4)},isSVG=function(src){return"svg"===src.substr(-3).toLowerCase()||INLINE_SVG.test(src)};!function(CSSImageType){CSSImageType[CSSImageType.URL=0]="URL",CSSImageType[CSSImageType.LINEAR_GRADIENT=1]="LINEAR_GRADIENT",CSSImageType[CSSImageType.RADIAL_GRADIENT=2]="RADIAL_GRADIENT"}(CSSImageType=CSSImageType||{});var CSSRadialShape,CSSRadialExtent;!function(CSSRadialShape){CSSRadialShape[CSSRadialShape.CIRCLE=0]="CIRCLE",CSSRadialShape[CSSRadialShape.ELLIPSE=1]="ELLIPSE"}(CSSRadialShape=CSSRadialShape||{}),function(CSSRadialExtent){CSSRadialExtent[CSSRadialExtent.CLOSEST_SIDE=0]="CLOSEST_SIDE",CSSRadialExtent[CSSRadialExtent.FARTHEST_SIDE=1]="FARTHEST_SIDE",CSSRadialExtent[CSSRadialExtent.CLOSEST_CORNER=2]="CLOSEST_CORNER",CSSRadialExtent[CSSRadialExtent.FARTHEST_CORNER=3]="FARTHEST_CORNER"}(CSSRadialExtent=CSSRadialExtent||{});var image_parse=function(value){if(value.type===TokenType.URL_TOKEN){var image_1={url:value.value,type:CSSImageType.URL};return CacheStorage.getInstance().addImage(value.value),image_1}if(value.type!==TokenType.FUNCTION)throw new Error("Unsupported image type");var imageFunction=SUPPORTED_IMAGE_FUNCTIONS[value.name];if(void 0===imageFunction)throw new Error('Attempting to parse an unsupported image function "'+value.name+'"');return imageFunction(value.values)};var BACKGROUND_REPEAT,SUPPORTED_IMAGE_FUNCTIONS={"linear-gradient":function(tokens){var angle$1=deg(180),stops=[];return parseFunctionArgs(tokens).forEach(function(arg,i){if(0===i){var firstToken=arg[0];if(firstToken.type===TokenType.IDENT_TOKEN&&"to"===firstToken.value)return void(angle$1=parseNamedSide(arg));if(isAngle(firstToken))return void(angle$1=angle_parse(firstToken))}var colorStop=parseColorStop(arg);stops.push(colorStop)}),{angle:angle$1,stops:stops,type:CSSImageType.LINEAR_GRADIENT}},"-moz-linear-gradient":prefixLinearGradient,"-ms-linear-gradient":prefixLinearGradient,"-o-linear-gradient":prefixLinearGradient,"-webkit-linear-gradient":prefixLinearGradient,"radial-gradient":function(tokens){var shape=CSSRadialShape.CIRCLE,size=CSSRadialExtent.FARTHEST_CORNER,stops=[],position=[];return parseFunctionArgs(tokens).forEach(function(arg,i){var isAtPosition_1,colorStop,isColorStop=!0;0===i&&(isAtPosition_1=!1,isColorStop=arg.reduce(function(acc,token){if(isAtPosition_1)if(isIdentToken(token))switch(token.value){case"center":return position.push(FIFTY_PERCENT),acc;case"top":case"left":return position.push(ZERO_LENGTH),acc;case"right":case"bottom":return position.push(HUNDRED_PERCENT),acc}else(isLengthPercentage(token)||isLength(token))&&position.push(token);else if(isIdentToken(token))switch(token.value){case"circle":return shape=CSSRadialShape.CIRCLE,!1;case"ellipse":return shape=CSSRadialShape.ELLIPSE,!1;case"at":return!(isAtPosition_1=!0);case"closest-side":return size=CSSRadialExtent.CLOSEST_SIDE,!1;case"cover":case"farthest-side":return size=CSSRadialExtent.FARTHEST_SIDE,!1;case"contain":case"closest-corner":return size=CSSRadialExtent.CLOSEST_CORNER,!1;case"farthest-corner":return size=CSSRadialExtent.FARTHEST_CORNER,!1}else if(isLength(token)||isLengthPercentage(token))return Array.isArray(size)||(size=[]),size.push(token),!1;return acc},isColorStop)),isColorStop&&(colorStop=parseColorStop(arg),stops.push(colorStop))}),{size:size,shape:shape,stops:stops,position:position,type:CSSImageType.RADIAL_GRADIENT}},"-moz-radial-gradient":prefixRadialGradient,"-ms-radial-gradient":prefixRadialGradient,"-o-radial-gradient":prefixRadialGradient,"-webkit-radial-gradient":prefixRadialGradient,"-webkit-gradient":function(tokens){var angle=deg(180),stops=[],type=CSSImageType.LINEAR_GRADIENT,shape=CSSRadialShape.CIRCLE,size=CSSRadialExtent.FARTHEST_CORNER;return parseFunctionArgs(tokens).forEach(function(arg,i){var values,color$1,stop_1,firstToken=arg[0];if(0===i){if(isIdentToken(firstToken)&&"linear"===firstToken.value)return void(type=CSSImageType.LINEAR_GRADIENT);if(isIdentToken(firstToken)&&"radial"===firstToken.value)return void(type=CSSImageType.RADIAL_GRADIENT)}firstToken.type===TokenType.FUNCTION&&("from"===firstToken.name?(color$1=color_parse(firstToken.values[0]),stops.push({stop:ZERO_LENGTH,color:color$1})):"to"===firstToken.name?(color$1=color_parse(firstToken.values[0]),stops.push({stop:HUNDRED_PERCENT,color:color$1})):"color-stop"!==firstToken.name||2===(values=firstToken.values.filter(nonFunctionArgSeparator)).length&&(color$1=color_parse(values[1]),stop_1=values[0],isNumberToken(stop_1)&&stops.push({stop:{type:TokenType.PERCENTAGE_TOKEN,number:100*stop_1.number,flags:stop_1.flags},color:color$1})))}),type===CSSImageType.LINEAR_GRADIENT?{angle:(angle+deg(180))%deg(360),stops:stops,type:type}:{size:size,shape:shape,stops:stops,position:[],type:type}}},backgroundImage={name:"background-image",initialValue:"none",type:PropertyDescriptorParsingType.LIST,prefix:!1,parse:function(tokens){if(0===tokens.length)return[];var first=tokens[0];return first.type===TokenType.IDENT_TOKEN&&"none"===first.value?[]:tokens.filter(function(value){return nonFunctionArgSeparator(value)&&function(value){return value.type!==TokenType.FUNCTION||SUPPORTED_IMAGE_FUNCTIONS[value.name]}(value)}).map(image_parse)}},backgroundOrigin={name:"background-origin",initialValue:"border-box",prefix:!1,type:PropertyDescriptorParsingType.LIST,parse:function(tokens){return tokens.map(function(token){if(isIdentToken(token))switch(token.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},backgroundPosition={name:"background-position",initialValue:"0% 0%",type:PropertyDescriptorParsingType.LIST,prefix:!1,parse:function(tokens){return parseFunctionArgs(tokens).map(function(values){return values.filter(isLengthPercentage)}).map(parseLengthPercentageTuple)}};!function(BACKGROUND_REPEAT){BACKGROUND_REPEAT[BACKGROUND_REPEAT.REPEAT=0]="REPEAT",BACKGROUND_REPEAT[BACKGROUND_REPEAT.NO_REPEAT=1]="NO_REPEAT",BACKGROUND_REPEAT[BACKGROUND_REPEAT.REPEAT_X=2]="REPEAT_X",BACKGROUND_REPEAT[BACKGROUND_REPEAT.REPEAT_Y=3]="REPEAT_Y"}(BACKGROUND_REPEAT=BACKGROUND_REPEAT||{});var BACKGROUND_SIZE,backgroundRepeat={name:"background-repeat",initialValue:"repeat",prefix:!1,type:PropertyDescriptorParsingType.LIST,parse:function(tokens){return parseFunctionArgs(tokens).map(function(values){return values.filter(isIdentToken).map(function(token){return token.value}).join(" ")}).map(parseBackgroundRepeat)}},parseBackgroundRepeat=function(value){switch(value){case"no-repeat":return BACKGROUND_REPEAT.NO_REPEAT;case"repeat-x":case"repeat no-repeat":return BACKGROUND_REPEAT.REPEAT_X;case"repeat-y":case"no-repeat repeat":return BACKGROUND_REPEAT.REPEAT_Y;case"repeat":default:return BACKGROUND_REPEAT.REPEAT}};!function(BACKGROUND_SIZE){BACKGROUND_SIZE.AUTO="auto",BACKGROUND_SIZE.CONTAIN="contain",BACKGROUND_SIZE.COVER="cover"}(BACKGROUND_SIZE=BACKGROUND_SIZE||{});function borderColorForSide(side){return{name:"border-"+side+"-color",initialValue:"transparent",prefix:!1,type:PropertyDescriptorParsingType.TYPE_VALUE,format:"color"}}function borderRadiusForSide(side){return{name:"border-radius-"+side,initialValue:"0 0",prefix:!1,type:PropertyDescriptorParsingType.LIST,parse:function(tokens){return parseLengthPercentageTuple(tokens.filter(isLengthPercentage))}}}var BORDER_STYLE,backgroundSize={name:"background-size",initialValue:"0",prefix:!1,type:PropertyDescriptorParsingType.LIST,parse:function(tokens){return parseFunctionArgs(tokens).map(function(values){return values.filter(isBackgroundSizeInfoToken)})}},isBackgroundSizeInfoToken=function(value){return isIdentToken(value)||isLengthPercentage(value)},borderTopColor=borderColorForSide("top"),borderRightColor=borderColorForSide("right"),borderBottomColor=borderColorForSide("bottom"),borderLeftColor=borderColorForSide("left"),borderTopLeftRadius=borderRadiusForSide("top-left"),borderTopRightRadius=borderRadiusForSide("top-right"),borderBottomRightRadius=borderRadiusForSide("bottom-right"),borderBottomLeftRadius=borderRadiusForSide("bottom-left");!function(BORDER_STYLE){BORDER_STYLE[BORDER_STYLE.NONE=0]="NONE",BORDER_STYLE[BORDER_STYLE.SOLID=1]="SOLID"}(BORDER_STYLE=BORDER_STYLE||{});function borderStyleForSide(side){return{name:"border-"+side+"-style",initialValue:"solid",prefix:!1,type:PropertyDescriptorParsingType.IDENT_VALUE,parse:function(style){return"none"===style?BORDER_STYLE.NONE:BORDER_STYLE.SOLID}}}function borderWidthForSide(side){return{name:"border-"+side+"-width",initialValue:"0",type:PropertyDescriptorParsingType.VALUE,prefix:!1,parse:function(token){return isDimensionToken(token)?token.number:0}}}var FLOAT,borderTopStyle=borderStyleForSide("top"),borderRightStyle=borderStyleForSide("right"),borderBottomStyle=borderStyleForSide("bottom"),borderLeftStyle=borderStyleForSide("left"),borderTopWidth=borderWidthForSide("top"),borderRightWidth=borderWidthForSide("right"),borderBottomWidth=borderWidthForSide("bottom"),borderLeftWidth=borderWidthForSide("left"),color$1={name:"color",initialValue:"transparent",prefix:!1,type:PropertyDescriptorParsingType.TYPE_VALUE,format:"color"},display={name:"display",initialValue:"inline-block",prefix:!1,type:PropertyDescriptorParsingType.LIST,parse:function(tokens){return tokens.filter(isIdentToken).reduce(function(bit,token){return bit|parseDisplayValue(token.value)},0)}},parseDisplayValue=function(display){switch(display){case"block":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0};!function(FLOAT){FLOAT[FLOAT.NONE=0]="NONE",FLOAT[FLOAT.LEFT=1]="LEFT",FLOAT[FLOAT.RIGHT=2]="RIGHT",FLOAT[FLOAT.INLINE_START=3]="INLINE_START",FLOAT[FLOAT.INLINE_END=4]="INLINE_END"}(FLOAT=FLOAT||{});var LINE_BREAK,float={name:"float",initialValue:"none",prefix:!1,type:PropertyDescriptorParsingType.IDENT_VALUE,parse:function(float){switch(float){case"left":return FLOAT.LEFT;case"right":return FLOAT.RIGHT;case"inline-start":return FLOAT.INLINE_START;case"inline-end":return FLOAT.INLINE_END}return FLOAT.NONE}},letterSpacing={name:"letter-spacing",initialValue:"0",prefix:!1,type:PropertyDescriptorParsingType.VALUE,parse:function(token){return!(token.type===TokenType.IDENT_TOKEN&&"normal"===token.value||token.type!==TokenType.NUMBER_TOKEN&&token.type!==TokenType.DIMENSION_TOKEN)?token.number:0}};!function(LINE_BREAK){LINE_BREAK.NORMAL="normal",LINE_BREAK.STRICT="strict"}(LINE_BREAK=LINE_BREAK||{});var LIST_STYLE_POSITION,lineBreak={name:"line-break",initialValue:"normal",prefix:!1,type:PropertyDescriptorParsingType.IDENT_VALUE,parse:function(lineBreak){switch(lineBreak){case"strict":return LINE_BREAK.STRICT;case"normal":default:return LINE_BREAK.NORMAL}}},lineHeight={name:"line-height",initialValue:"normal",prefix:!1,type:PropertyDescriptorParsingType.TOKEN_VALUE},listStyleImage={name:"list-style-image",initialValue:"none",type:PropertyDescriptorParsingType.VALUE,prefix:!1,parse:function(token){return token.type===TokenType.IDENT_TOKEN&&"none"===token.value?null:image_parse(token)}};!function(LIST_STYLE_POSITION){LIST_STYLE_POSITION[LIST_STYLE_POSITION.INSIDE=0]="INSIDE",LIST_STYLE_POSITION[LIST_STYLE_POSITION.OUTSIDE=1]="OUTSIDE"}(LIST_STYLE_POSITION=LIST_STYLE_POSITION||{});var LIST_STYLE_TYPE,listStylePosition={name:"list-style-position",initialValue:"outside",prefix:!1,type:PropertyDescriptorParsingType.IDENT_VALUE,parse:function(position){switch(position){case"inside":return LIST_STYLE_POSITION.INSIDE;case"outside":default:return LIST_STYLE_POSITION.OUTSIDE}}};!function(LIST_STYLE_TYPE){LIST_STYLE_TYPE[LIST_STYLE_TYPE.NONE=-1]="NONE",LIST_STYLE_TYPE[LIST_STYLE_TYPE.DISC=0]="DISC",LIST_STYLE_TYPE[LIST_STYLE_TYPE.CIRCLE=1]="CIRCLE",LIST_STYLE_TYPE[LIST_STYLE_TYPE.SQUARE=2]="SQUARE",LIST_STYLE_TYPE[LIST_STYLE_TYPE.DECIMAL=3]="DECIMAL",LIST_STYLE_TYPE[LIST_STYLE_TYPE.CJK_DECIMAL=4]="CJK_DECIMAL",LIST_STYLE_TYPE[LIST_STYLE_TYPE.DECIMAL_LEADING_ZERO=5]="DECIMAL_LEADING_ZERO",LIST_STYLE_TYPE[LIST_STYLE_TYPE.LOWER_ROMAN=6]="LOWER_ROMAN",LIST_STYLE_TYPE[LIST_STYLE_TYPE.UPPER_ROMAN=7]="UPPER_ROMAN",LIST_STYLE_TYPE[LIST_STYLE_TYPE.LOWER_GREEK=8]="LOWER_GREEK",LIST_STYLE_TYPE[LIST_STYLE_TYPE.LOWER_ALPHA=9]="LOWER_ALPHA",LIST_STYLE_TYPE[LIST_STYLE_TYPE.UPPER_ALPHA=10]="UPPER_ALPHA",LIST_STYLE_TYPE[LIST_STYLE_TYPE.ARABIC_INDIC=11]="ARABIC_INDIC",LIST_STYLE_TYPE[LIST_STYLE_TYPE.ARMENIAN=12]="ARMENIAN",LIST_STYLE_TYPE[LIST_STYLE_TYPE.BENGALI=13]="BENGALI",LIST_STYLE_TYPE[LIST_STYLE_TYPE.CAMBODIAN=14]="CAMBODIAN",LIST_STYLE_TYPE[LIST_STYLE_TYPE.CJK_EARTHLY_BRANCH=15]="CJK_EARTHLY_BRANCH",LIST_STYLE_TYPE[LIST_STYLE_TYPE.CJK_HEAVENLY_STEM=16]="CJK_HEAVENLY_STEM",LIST_STYLE_TYPE[LIST_STYLE_TYPE.CJK_IDEOGRAPHIC=17]="CJK_IDEOGRAPHIC",LIST_STYLE_TYPE[LIST_STYLE_TYPE.DEVANAGARI=18]="DEVANAGARI",LIST_STYLE_TYPE[LIST_STYLE_TYPE.ETHIOPIC_NUMERIC=19]="ETHIOPIC_NUMERIC",LIST_STYLE_TYPE[LIST_STYLE_TYPE.GEORGIAN=20]="GEORGIAN",LIST_STYLE_TYPE[LIST_STYLE_TYPE.GUJARATI=21]="GUJARATI",LIST_STYLE_TYPE[LIST_STYLE_TYPE.GURMUKHI=22]="GURMUKHI",LIST_STYLE_TYPE[LIST_STYLE_TYPE.HEBREW=22]="HEBREW",LIST_STYLE_TYPE[LIST_STYLE_TYPE.HIRAGANA=23]="HIRAGANA",LIST_STYLE_TYPE[LIST_STYLE_TYPE.HIRAGANA_IROHA=24]="HIRAGANA_IROHA",LIST_STYLE_TYPE[LIST_STYLE_TYPE.JAPANESE_FORMAL=25]="JAPANESE_FORMAL",LIST_STYLE_TYPE[LIST_STYLE_TYPE.JAPANESE_INFORMAL=26]="JAPANESE_INFORMAL",LIST_STYLE_TYPE[LIST_STYLE_TYPE.KANNADA=27]="KANNADA",LIST_STYLE_TYPE[LIST_STYLE_TYPE.KATAKANA=28]="KATAKANA",LIST_STYLE_TYPE[LIST_STYLE_TYPE.KATAKANA_IROHA=29]="KATAKANA_IROHA",LIST_STYLE_TYPE[LIST_STYLE_TYPE.KHMER=30]="KHMER",LIST_STYLE_TYPE[LIST_STYLE_TYPE.KOREAN_HANGUL_FORMAL=31]="KOREAN_HANGUL_FORMAL",LIST_STYLE_TYPE[LIST_STYLE_TYPE.KOREAN_HANJA_FORMAL=32]="KOREAN_HANJA_FORMAL",LIST_STYLE_TYPE[LIST_STYLE_TYPE.KOREAN_HANJA_INFORMAL=33]="KOREAN_HANJA_INFORMAL",LIST_STYLE_TYPE[LIST_STYLE_TYPE.LAO=34]="LAO",LIST_STYLE_TYPE[LIST_STYLE_TYPE.LOWER_ARMENIAN=35]="LOWER_ARMENIAN",LIST_STYLE_TYPE[LIST_STYLE_TYPE.MALAYALAM=36]="MALAYALAM",LIST_STYLE_TYPE[LIST_STYLE_TYPE.MONGOLIAN=37]="MONGOLIAN",LIST_STYLE_TYPE[LIST_STYLE_TYPE.MYANMAR=38]="MYANMAR",LIST_STYLE_TYPE[LIST_STYLE_TYPE.ORIYA=39]="ORIYA",LIST_STYLE_TYPE[LIST_STYLE_TYPE.PERSIAN=40]="PERSIAN",LIST_STYLE_TYPE[LIST_STYLE_TYPE.SIMP_CHINESE_FORMAL=41]="SIMP_CHINESE_FORMAL",LIST_STYLE_TYPE[LIST_STYLE_TYPE.SIMP_CHINESE_INFORMAL=42]="SIMP_CHINESE_INFORMAL",LIST_STYLE_TYPE[LIST_STYLE_TYPE.TAMIL=43]="TAMIL",LIST_STYLE_TYPE[LIST_STYLE_TYPE.TELUGU=44]="TELUGU",LIST_STYLE_TYPE[LIST_STYLE_TYPE.THAI=45]="THAI",LIST_STYLE_TYPE[LIST_STYLE_TYPE.TIBETAN=46]="TIBETAN",LIST_STYLE_TYPE[LIST_STYLE_TYPE.TRAD_CHINESE_FORMAL=47]="TRAD_CHINESE_FORMAL",LIST_STYLE_TYPE[LIST_STYLE_TYPE.TRAD_CHINESE_INFORMAL=48]="TRAD_CHINESE_INFORMAL",LIST_STYLE_TYPE[LIST_STYLE_TYPE.UPPER_ARMENIAN=49]="UPPER_ARMENIAN",LIST_STYLE_TYPE[LIST_STYLE_TYPE.DISCLOSURE_OPEN=50]="DISCLOSURE_OPEN",LIST_STYLE_TYPE[LIST_STYLE_TYPE.DISCLOSURE_CLOSED=51]="DISCLOSURE_CLOSED"}(LIST_STYLE_TYPE=LIST_STYLE_TYPE||{});function marginForSide(side){return{name:"margin-"+side,initialValue:"0",prefix:!1,type:PropertyDescriptorParsingType.TOKEN_VALUE}}var OVERFLOW,listStyleType={name:"list-style-type",initialValue:"none",prefix:!1,type:PropertyDescriptorParsingType.IDENT_VALUE,parse:function(type){switch(type){case"disc":return LIST_STYLE_TYPE.DISC;case"circle":return LIST_STYLE_TYPE.CIRCLE;case"square":return LIST_STYLE_TYPE.SQUARE;case"decimal":return LIST_STYLE_TYPE.DECIMAL;case"cjk-decimal":return LIST_STYLE_TYPE.CJK_DECIMAL;case"decimal-leading-zero":return LIST_STYLE_TYPE.DECIMAL_LEADING_ZERO;case"lower-roman":return LIST_STYLE_TYPE.LOWER_ROMAN;case"upper-roman":return LIST_STYLE_TYPE.UPPER_ROMAN;case"lower-greek":return LIST_STYLE_TYPE.LOWER_GREEK;case"lower-alpha":return LIST_STYLE_TYPE.LOWER_ALPHA;case"upper-alpha":return LIST_STYLE_TYPE.UPPER_ALPHA;case"arabic-indic":return LIST_STYLE_TYPE.ARABIC_INDIC;case"armenian":return LIST_STYLE_TYPE.ARMENIAN;case"bengali":return LIST_STYLE_TYPE.BENGALI;case"cambodian":return LIST_STYLE_TYPE.CAMBODIAN;case"cjk-earthly-branch":return LIST_STYLE_TYPE.CJK_EARTHLY_BRANCH;case"cjk-heavenly-stem":return LIST_STYLE_TYPE.CJK_HEAVENLY_STEM;case"cjk-ideographic":return LIST_STYLE_TYPE.CJK_IDEOGRAPHIC;case"devanagari":return LIST_STYLE_TYPE.DEVANAGARI;case"ethiopic-numeric":return LIST_STYLE_TYPE.ETHIOPIC_NUMERIC;case"georgian":return LIST_STYLE_TYPE.GEORGIAN;case"gujarati":return LIST_STYLE_TYPE.GUJARATI;case"gurmukhi":return LIST_STYLE_TYPE.GURMUKHI;case"hebrew":return LIST_STYLE_TYPE.HEBREW;case"hiragana":return LIST_STYLE_TYPE.HIRAGANA;case"hiragana-iroha":return LIST_STYLE_TYPE.HIRAGANA_IROHA;case"japanese-formal":return LIST_STYLE_TYPE.JAPANESE_FORMAL;case"japanese-informal":return LIST_STYLE_TYPE.JAPANESE_INFORMAL;case"kannada":return LIST_STYLE_TYPE.KANNADA;case"katakana":return LIST_STYLE_TYPE.KATAKANA;case"katakana-iroha":return LIST_STYLE_TYPE.KATAKANA_IROHA;case"khmer":return LIST_STYLE_TYPE.KHMER;case"korean-hangul-formal":return LIST_STYLE_TYPE.KOREAN_HANGUL_FORMAL;case"korean-hanja-formal":return LIST_STYLE_TYPE.KOREAN_HANJA_FORMAL;case"korean-hanja-informal":return LIST_STYLE_TYPE.KOREAN_HANJA_INFORMAL;case"lao":return LIST_STYLE_TYPE.LAO;case"lower-armenian":return LIST_STYLE_TYPE.LOWER_ARMENIAN;case"malayalam":return LIST_STYLE_TYPE.MALAYALAM;case"mongolian":return LIST_STYLE_TYPE.MONGOLIAN;case"myanmar":return LIST_STYLE_TYPE.MYANMAR;case"oriya":return LIST_STYLE_TYPE.ORIYA;case"persian":return LIST_STYLE_TYPE.PERSIAN;case"simp-chinese-formal":return LIST_STYLE_TYPE.SIMP_CHINESE_FORMAL;case"simp-chinese-informal":return LIST_STYLE_TYPE.SIMP_CHINESE_INFORMAL;case"tamil":return LIST_STYLE_TYPE.TAMIL;case"telugu":return LIST_STYLE_TYPE.TELUGU;case"thai":return LIST_STYLE_TYPE.THAI;case"tibetan":return LIST_STYLE_TYPE.TIBETAN;case"trad-chinese-formal":return LIST_STYLE_TYPE.TRAD_CHINESE_FORMAL;case"trad-chinese-informal":return LIST_STYLE_TYPE.TRAD_CHINESE_INFORMAL;case"upper-armenian":return LIST_STYLE_TYPE.UPPER_ARMENIAN;case"disclosure-open":return LIST_STYLE_TYPE.DISCLOSURE_OPEN;case"disclosure-closed":return LIST_STYLE_TYPE.DISCLOSURE_CLOSED;case"none":default:return LIST_STYLE_TYPE.NONE}}},marginTop=marginForSide("top"),marginRight=marginForSide("right"),marginBottom=marginForSide("bottom"),marginLeft=marginForSide("left");!function(OVERFLOW){OVERFLOW[OVERFLOW.VISIBLE=0]="VISIBLE",OVERFLOW[OVERFLOW.HIDDEN=1]="HIDDEN",OVERFLOW[OVERFLOW.SCROLL=2]="SCROLL",OVERFLOW[OVERFLOW.AUTO=3]="AUTO"}(OVERFLOW=OVERFLOW||{});var OVERFLOW_WRAP,overflow={name:"overflow",initialValue:"visible",prefix:!1,type:PropertyDescriptorParsingType.LIST,parse:function(tokens){return tokens.filter(isIdentToken).map(function(overflow){switch(overflow.value){case"hidden":return OVERFLOW.HIDDEN;case"scroll":return OVERFLOW.SCROLL;case"auto":return OVERFLOW.AUTO;case"visible":default:return OVERFLOW.VISIBLE}})}};!function(OVERFLOW_WRAP){OVERFLOW_WRAP.NORMAL="normal",OVERFLOW_WRAP.BREAK_WORD="break-word"}(OVERFLOW_WRAP=OVERFLOW_WRAP||{});function paddingForSide(side){return{name:"padding-"+side,initialValue:"0",prefix:!1,type:PropertyDescriptorParsingType.TYPE_VALUE,format:"length-percentage"}}var TEXT_ALIGN,overflowWrap={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:PropertyDescriptorParsingType.IDENT_VALUE,parse:function(overflow){switch(overflow){case"break-word":return OVERFLOW_WRAP.BREAK_WORD;case"normal":default:return OVERFLOW_WRAP.NORMAL}}},paddingTop=paddingForSide("top"),paddingRight=paddingForSide("right"),paddingBottom=paddingForSide("bottom"),paddingLeft=paddingForSide("left");!function(TEXT_ALIGN){TEXT_ALIGN[TEXT_ALIGN.LEFT=0]="LEFT",TEXT_ALIGN[TEXT_ALIGN.CENTER=1]="CENTER",TEXT_ALIGN[TEXT_ALIGN.RIGHT=2]="RIGHT"}(TEXT_ALIGN=TEXT_ALIGN||{});var POSITION,textAlign={name:"text-align",initialValue:"left",prefix:!1,type:PropertyDescriptorParsingType.IDENT_VALUE,parse:function(textAlign){switch(textAlign){case"right":return TEXT_ALIGN.RIGHT;case"center":case"justify":return TEXT_ALIGN.CENTER;case"left":default:return TEXT_ALIGN.LEFT}}};!function(POSITION){POSITION[POSITION.STATIC=0]="STATIC",POSITION[POSITION.RELATIVE=1]="RELATIVE",POSITION[POSITION.ABSOLUTE=2]="ABSOLUTE",POSITION[POSITION.FIXED=3]="FIXED",POSITION[POSITION.STICKY=4]="STICKY"}(POSITION=POSITION||{});var TEXT_TRANSFORM,position={name:"position",initialValue:"static",prefix:!1,type:PropertyDescriptorParsingType.IDENT_VALUE,parse:function(position){switch(position){case"relative":return POSITION.RELATIVE;case"absolute":return POSITION.ABSOLUTE;case"fixed":return POSITION.FIXED;case"sticky":return POSITION.STICKY}return POSITION.STATIC}},textShadow={name:"text-shadow",initialValue:"none",type:PropertyDescriptorParsingType.LIST,prefix:!1,parse:function(tokens){return 1===tokens.length&&isIdentWithValue(tokens[0],"none")?[]:parseFunctionArgs(tokens).map(function(values){for(var shadow={color:COLORS.TRANSPARENT,offsetX:ZERO_LENGTH,offsetY:ZERO_LENGTH,blur:ZERO_LENGTH},c=0,i=0;i<values.length;i++){var token=values[i];isLength(token)?(0===c?shadow.offsetX=token:1===c?shadow.offsetY=token:shadow.blur=token,c++):shadow.color=color_parse(token)}return shadow})}};!function(TEXT_TRANSFORM){TEXT_TRANSFORM[TEXT_TRANSFORM.NONE=0]="NONE",TEXT_TRANSFORM[TEXT_TRANSFORM.LOWERCASE=1]="LOWERCASE",TEXT_TRANSFORM[TEXT_TRANSFORM.UPPERCASE=2]="UPPERCASE",TEXT_TRANSFORM[TEXT_TRANSFORM.CAPITALIZE=3]="CAPITALIZE"}(TEXT_TRANSFORM=TEXT_TRANSFORM||{});var VISIBILITY,textTransform={name:"text-transform",initialValue:"none",prefix:!1,type:PropertyDescriptorParsingType.IDENT_VALUE,parse:function(textTransform){switch(textTransform){case"uppercase":return TEXT_TRANSFORM.UPPERCASE;case"lowercase":return TEXT_TRANSFORM.LOWERCASE;case"capitalize":return TEXT_TRANSFORM.CAPITALIZE}return TEXT_TRANSFORM.NONE}},transform={name:"transform",initialValue:"none",prefix:!0,type:PropertyDescriptorParsingType.VALUE,parse:function(token){if(token.type===TokenType.IDENT_TOKEN&&"none"===token.value)return null;if(token.type!==TokenType.FUNCTION)return null;var transformFunction=SUPPORTED_TRANSFORM_FUNCTIONS[token.name];if(void 0===transformFunction)throw new Error('Attempting to parse an unsupported transform function "'+token.name+'"');return transformFunction(token.values)}},SUPPORTED_TRANSFORM_FUNCTIONS={matrix:function(args){var values=args.filter(function(arg){return arg.type===TokenType.NUMBER_TOKEN}).map(function(arg){return arg.number});return 6===values.length?values:null},matrix3d:function(args){var values=args.filter(function(arg){return arg.type===TokenType.NUMBER_TOKEN}).map(function(arg){return arg.number}),a1=values[0],b1=values[1],a2=(values[2],values[3],values[4]),b2=values[5],a4=(values[6],values[7],values[8],values[9],values[10],values[11],values[12]),b4=values[13];values[14],values[15];return 16===values.length?[a1,b1,a2,b2,a4,b4]:null}},DEFAULT_VALUE={type:TokenType.PERCENTAGE_TOKEN,number:50,flags:4},DEFAULT=[DEFAULT_VALUE,DEFAULT_VALUE],transformOrigin={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:PropertyDescriptorParsingType.LIST,parse:function(tokens){var origins=tokens.filter(isLengthPercentage);return 2!==origins.length?DEFAULT:[origins[0],origins[1]]}};!function(VISIBILITY){VISIBILITY[VISIBILITY.VISIBLE=0]="VISIBLE",VISIBILITY[VISIBILITY.HIDDEN=1]="HIDDEN",VISIBILITY[VISIBILITY.COLLAPSE=2]="COLLAPSE"}(VISIBILITY=VISIBILITY||{});var WORD_BREAK,visibility={name:"visible",initialValue:"none",prefix:!1,type:PropertyDescriptorParsingType.IDENT_VALUE,parse:function(visibility){switch(visibility){case"hidden":return VISIBILITY.HIDDEN;case"collapse":return VISIBILITY.COLLAPSE;case"visible":default:return VISIBILITY.VISIBLE}}};!function(WORD_BREAK){WORD_BREAK.NORMAL="normal",WORD_BREAK.BREAK_ALL="break-all",WORD_BREAK.KEEP_ALL="keep-all"}(WORD_BREAK=WORD_BREAK||{});var FONT_STYLE,wordBreak={name:"word-break",initialValue:"normal",prefix:!1,type:PropertyDescriptorParsingType.IDENT_VALUE,parse:function(wordBreak){switch(wordBreak){case"break-all":return WORD_BREAK.BREAK_ALL;case"keep-all":return WORD_BREAK.KEEP_ALL;case"normal":default:return WORD_BREAK.NORMAL}}},zIndex={name:"z-index",initialValue:"auto",prefix:!1,type:PropertyDescriptorParsingType.VALUE,parse:function(token){if(token.type===TokenType.IDENT_TOKEN)return{auto:!0,order:0};if(isNumberToken(token))return{auto:!1,order:token.number};throw new Error("Invalid z-index number parsed")}},opacity={name:"opacity",initialValue:"1",type:PropertyDescriptorParsingType.VALUE,prefix:!1,parse:function(token){return isNumberToken(token)?token.number:1}},textDecorationColor={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:PropertyDescriptorParsingType.TYPE_VALUE,format:"color"},textDecorationLine={name:"text-decoration-line",initialValue:"none",prefix:!1,type:PropertyDescriptorParsingType.LIST,parse:function(tokens){return tokens.filter(isIdentToken).map(function(token){switch(token.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(line){return 0!==line})}},fontFamily={name:"font-family",initialValue:"",prefix:!1,type:PropertyDescriptorParsingType.LIST,parse:function(tokens){return tokens.filter(isStringToken$1).map(function(token){return token.value})}},isStringToken$1=function(token){return token.type===TokenType.STRING_TOKEN||token.type===TokenType.IDENT_TOKEN},fontSize={name:"font-size",initialValue:"0",prefix:!1,type:PropertyDescriptorParsingType.TYPE_VALUE,format:"length"},fontWeight={name:"font-weight",initialValue:"normal",type:PropertyDescriptorParsingType.VALUE,prefix:!1,parse:function(token){if(isNumberToken(token))return token.number;if(isIdentToken(token))switch(token.value){case"bold":return 700;case"normal":default:return 400}return 400}},fontVariant={name:"font-variant",initialValue:"none",type:PropertyDescriptorParsingType.LIST,prefix:!1,parse:function(tokens){return tokens.filter(isIdentToken).map(function(token){return token.value})}};!function(FONT_STYLE){FONT_STYLE.NORMAL="normal",FONT_STYLE.ITALIC="italic",FONT_STYLE.OBLIQUE="oblique"}(FONT_STYLE=FONT_STYLE||{});function getQuote(quotes,depth,open){if(!quotes)return"";var quote=quotes[Math.min(depth,quotes.length-1)];return quote?open?quote.open:quote.close:""}function parseColor(value){return color_parse(Parser.create(value).parseComponentValue())}function isStyleElement(node){return"STYLE"===node.tagName}function createAdditiveCounter(value,min,max,symbols,fallback,suffix){return value<min||max<value?createCounterText(value,fallback,0<suffix.length):symbols.integers.reduce(function(string,integer,index){for(;integer<=value;)value-=integer,string+=symbols.values[index];return string},"")+suffix}function createCounterStyleWithSymbolResolver(value,codePointRangeLength,isNumeric,resolver){for(var string="";isNumeric||value--,string=resolver(value)+string,codePointRangeLength<=(value/=codePointRangeLength)*codePointRangeLength;);return string}function createCounterStyleFromRange(value,codePointRangeStart,codePointRangeEnd,isNumeric,suffix){var codePointRangeLength=codePointRangeEnd-codePointRangeStart+1;return(value<0?"-":"")+(createCounterStyleWithSymbolResolver(Math.abs(value),codePointRangeLength,isNumeric,function(codePoint){return fromCodePoint(Math.floor(codePoint%codePointRangeLength)+codePointRangeStart)})+suffix)}function createCounterStyleFromSymbols(value,symbols,suffix){void 0===suffix&&(suffix=". ");var codePointRangeLength=symbols.length;return createCounterStyleWithSymbolResolver(Math.abs(value),codePointRangeLength,!1,function(codePoint){return symbols[Math.floor(codePoint%codePointRangeLength)]})+suffix}function createCJKCounter(value,numbers,multipliers,negativeSign,suffix,flags){if(value<-9999||9999<value)return createCounterText(value,LIST_STYLE_TYPE.CJK_DECIMAL,0<suffix.length);var tmp=Math.abs(value),string=suffix;if(0===tmp)return numbers[0]+string;for(var digit=0;0<tmp&&digit<=4;digit++){var coefficient=tmp%10;0==coefficient&&0!=(1&flags)&&""!==string?string=numbers[coefficient]+string:1<coefficient||1==coefficient&&0===digit||1==coefficient&&1===digit&&0!=(2&flags)||1==coefficient&&1===digit&&0!=(4&flags)&&100<value||1==coefficient&&1<digit&&0!=(8&flags)?string=numbers[coefficient]+(0<digit?multipliers[digit-1]:"")+string:1==coefficient&&0<digit&&(string=multipliers[digit-1]+string),tmp=Math.floor(tmp/10)}return(value<0?negativeSign:"")+string}var PseudoElementType,fontStyle={name:"font-style",initialValue:"normal",prefix:!1,type:PropertyDescriptorParsingType.IDENT_VALUE,parse:function(overflow){switch(overflow){case"oblique":return FONT_STYLE.OBLIQUE;case"italic":return FONT_STYLE.ITALIC;case"normal":default:return FONT_STYLE.NORMAL}}},content={name:"content",initialValue:"none",type:PropertyDescriptorParsingType.LIST,prefix:!1,parse:function(tokens){if(0===tokens.length)return[];var first=tokens[0];return first.type===TokenType.IDENT_TOKEN&&"none"===first.value?[]:tokens}},counterIncrement={name:"counter-increment",initialValue:"none",prefix:!0,type:PropertyDescriptorParsingType.LIST,parse:function(tokens){if(0===tokens.length)return null;var first=tokens[0];if(first.type===TokenType.IDENT_TOKEN&&"none"===first.value)return null;for(var increments=[],filtered=tokens.filter(nonWhiteSpace),i=0;i<filtered.length;i++){var increment,counter=filtered[i],next=filtered[i+1];counter.type===TokenType.IDENT_TOKEN&&(increment=next&&isNumberToken(next)?next.number:1,increments.push({counter:counter.value,increment:increment}))}return increments}},counterReset={name:"counter-reset",initialValue:"none",prefix:!0,type:PropertyDescriptorParsingType.LIST,parse:function(tokens){if(0===tokens.length)return[];for(var resets=[],filtered=tokens.filter(nonWhiteSpace),i=0;i<filtered.length;i++){var reset,counter=filtered[i],next=filtered[i+1];isIdentToken(counter)&&"none"!==counter.value&&(reset=next&&isNumberToken(next)?next.number:0,resets.push({counter:counter.value,reset:reset}))}return resets}},quotes={name:"quotes",initialValue:"none",prefix:!0,type:PropertyDescriptorParsingType.LIST,parse:function(tokens){if(0===tokens.length)return null;var first=tokens[0];if(first.type===TokenType.IDENT_TOKEN&&"none"===first.value)return null;var quotes=[],filtered=tokens.filter(isStringToken);if(filtered.length%2!=0)return null;for(var i=0;i<filtered.length;i+=2){var open_1=filtered[i].value,close_1=filtered[i+1].value;quotes.push({open:open_1,close:close_1})}return quotes}},boxShadow={name:"box-shadow",initialValue:"none",type:PropertyDescriptorParsingType.LIST,prefix:!1,parse:function(tokens){return 1===tokens.length&&isIdentWithValue(tokens[0],"none")?[]:parseFunctionArgs(tokens).map(function(values){for(var shadow={color:255,offsetX:ZERO_LENGTH,offsetY:ZERO_LENGTH,blur:ZERO_LENGTH,spread:ZERO_LENGTH,inset:!1},c=0,i=0;i<values.length;i++){var token=values[i];isIdentWithValue(token,"inset")?shadow.inset=!0:isLength(token)?(0===c?shadow.offsetX=token:1===c?shadow.offsetY=token:2===c?shadow.blur=token:shadow.spread=token,c++):shadow.color=color_parse(token)}return shadow})}},CSSParsedDeclaration=function(){function CSSParsedDeclaration(declaration){this.backgroundClip=parse(backgroundClip,declaration.backgroundClip),this.backgroundColor=parse(backgroundColor,declaration.backgroundColor),this.backgroundImage=parse(backgroundImage,declaration.backgroundImage),this.backgroundOrigin=parse(backgroundOrigin,declaration.backgroundOrigin),this.backgroundPosition=parse(backgroundPosition,declaration.backgroundPosition),this.backgroundRepeat=parse(backgroundRepeat,declaration.backgroundRepeat),this.backgroundSize=parse(backgroundSize,declaration.backgroundSize),this.borderTopColor=parse(borderTopColor,declaration.borderTopColor),this.borderRightColor=parse(borderRightColor,declaration.borderRightColor),this.borderBottomColor=parse(borderBottomColor,declaration.borderBottomColor),this.borderLeftColor=parse(borderLeftColor,declaration.borderLeftColor),this.borderTopLeftRadius=parse(borderTopLeftRadius,declaration.borderTopLeftRadius),this.borderTopRightRadius=parse(borderTopRightRadius,declaration.borderTopRightRadius),this.borderBottomRightRadius=parse(borderBottomRightRadius,declaration.borderBottomRightRadius),this.borderBottomLeftRadius=parse(borderBottomLeftRadius,declaration.borderBottomLeftRadius),this.borderTopStyle=parse(borderTopStyle,declaration.borderTopStyle),this.borderRightStyle=parse(borderRightStyle,declaration.borderRightStyle),this.borderBottomStyle=parse(borderBottomStyle,declaration.borderBottomStyle),this.borderLeftStyle=parse(borderLeftStyle,declaration.borderLeftStyle),this.borderTopWidth=parse(borderTopWidth,declaration.borderTopWidth),this.borderRightWidth=parse(borderRightWidth,declaration.borderRightWidth),this.borderBottomWidth=parse(borderBottomWidth,declaration.borderBottomWidth),this.borderLeftWidth=parse(borderLeftWidth,declaration.borderLeftWidth),this.boxShadow=parse(boxShadow,declaration.boxShadow),this.color=parse(color$1,declaration.color),this.display=parse(display,declaration.display),this.float=parse(float,declaration.cssFloat),this.fontFamily=parse(fontFamily,declaration.fontFamily),this.fontSize=parse(fontSize,declaration.fontSize),this.fontStyle=parse(fontStyle,declaration.fontStyle),this.fontVariant=parse(fontVariant,declaration.fontVariant),this.fontWeight=parse(fontWeight,declaration.fontWeight),this.letterSpacing=parse(letterSpacing,declaration.letterSpacing),this.lineBreak=parse(lineBreak,declaration.lineBreak),this.lineHeight=parse(lineHeight,declaration.lineHeight),this.listStyleImage=parse(listStyleImage,declaration.listStyleImage),this.listStylePosition=parse(listStylePosition,declaration.listStylePosition),this.listStyleType=parse(listStyleType,declaration.listStyleType),this.marginTop=parse(marginTop,declaration.marginTop),this.marginRight=parse(marginRight,declaration.marginRight),this.marginBottom=parse(marginBottom,declaration.marginBottom),this.marginLeft=parse(marginLeft,declaration.marginLeft),this.opacity=parse(opacity,declaration.opacity);var overflowTuple=parse(overflow,declaration.overflow);this.overflowX=overflowTuple[0],this.overflowY=overflowTuple[1<overflowTuple.length?1:0],this.overflowWrap=parse(overflowWrap,declaration.overflowWrap),this.paddingTop=parse(paddingTop,declaration.paddingTop),this.paddingRight=parse(paddingRight,declaration.paddingRight),this.paddingBottom=parse(paddingBottom,declaration.paddingBottom),this.paddingLeft=parse(paddingLeft,declaration.paddingLeft),this.position=parse(position,declaration.position),this.textAlign=parse(textAlign,declaration.textAlign),this.textDecorationColor=parse(textDecorationColor,declaration.textDecorationColor||declaration.color),this.textDecorationLine=parse(textDecorationLine,declaration.textDecorationLine),this.textShadow=parse(textShadow,declaration.textShadow),this.textTransform=parse(textTransform,declaration.textTransform),this.transform=parse(transform,declaration.transform),this.transformOrigin=parse(transformOrigin,declaration.transformOrigin),this.visibility=parse(visibility,declaration.visibility),this.wordBreak=parse(wordBreak,declaration.wordBreak),this.zIndex=parse(zIndex,declaration.zIndex)}return CSSParsedDeclaration.prototype.isVisible=function(){return 0<this.display&&0<this.opacity&&this.visibility===VISIBILITY.VISIBLE},CSSParsedDeclaration.prototype.isTransparent=function(){return 0==(255&this.backgroundColor)},CSSParsedDeclaration.prototype.isTransformed=function(){return null!==this.transform},CSSParsedDeclaration.prototype.isPositioned=function(){return this.position!==POSITION.STATIC},CSSParsedDeclaration.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},CSSParsedDeclaration.prototype.isFloating=function(){return this.float!==FLOAT.NONE},CSSParsedDeclaration.prototype.isInlineLevel=function(){return 0!=(4&this.display)||0!=(33554432&this.display)||0!=(268435456&this.display)||0!=(536870912&this.display)||0!=(67108864&this.display)||0!=(134217728&this.display)},CSSParsedDeclaration}(),CSSParsedPseudoDeclaration=function(declaration){this.content=parse(content,declaration.content),this.quotes=parse(quotes,declaration.quotes)},CSSParsedCounterDeclaration=function(declaration){this.counterIncrement=parse(counterIncrement,declaration.counterIncrement),this.counterReset=parse(counterReset,declaration.counterReset)},parse=function(descriptor,style){var tokenizer=new Tokenizer,value=null!=style?style.toString():descriptor.initialValue;tokenizer.write(value);var parser=new Parser(tokenizer.read());switch(descriptor.type){case PropertyDescriptorParsingType.IDENT_VALUE:var token=parser.parseComponentValue();return descriptor.parse(isIdentToken(token)?token.value:descriptor.initialValue);case PropertyDescriptorParsingType.VALUE:return descriptor.parse(parser.parseComponentValue());case PropertyDescriptorParsingType.LIST:return descriptor.parse(parser.parseComponentValues());case PropertyDescriptorParsingType.TOKEN_VALUE:return parser.parseComponentValue();case PropertyDescriptorParsingType.TYPE_VALUE:switch(descriptor.format){case"angle":return angle_parse(parser.parseComponentValue());case"color":return color_parse(parser.parseComponentValue());case"image":return image_parse(parser.parseComponentValue());case"length":var length_1=parser.parseComponentValue();return isLength(length_1)?length_1:ZERO_LENGTH;case"length-percentage":var value_1=parser.parseComponentValue();return isLengthPercentage(value_1)?value_1:ZERO_LENGTH}}throw new Error("Attempting to parse unsupported css format type "+descriptor.format)},ElementContainer=function(element){this.styles=new CSSParsedDeclaration(window.getComputedStyle(element,null)),this.textNodes=[],this.elements=[],null!==this.styles.transform&&isHTMLElementNode(element)&&(element.style.transform="none"),this.bounds=parseBounds(element),this.flags=0},TextBounds=function(text,bounds){this.text=text,this.bounds=bounds},getWrapperBounds=function(node){var ownerDocument=node.ownerDocument;if(ownerDocument){var wrapper=ownerDocument.createElement("html2canvaswrapper");wrapper.appendChild(node.cloneNode(!0));var parentNode=node.parentNode;if(parentNode){parentNode.replaceChild(wrapper,node);var bounds=parseBounds(wrapper);return wrapper.firstChild&&parentNode.replaceChild(wrapper.firstChild,wrapper),bounds}}return new Bounds(0,0,0,0)},getRangeBounds=function(node,offset,length){var ownerDocument=node.ownerDocument;if(!ownerDocument)throw new Error("Node has no owner document");var range=ownerDocument.createRange();return range.setStart(node,offset),range.setEnd(node,offset+length),Bounds.fromClientRect(range.getBoundingClientRect())},breakText=function(value,styles){return 0!==styles.letterSpacing?toCodePoints(value).map(function(i){return fromCodePoint(i)}):breakWords(value,styles)},breakWords=function(str,styles){for(var bk,breaker=LineBreaker(str,{lineBreak:styles.lineBreak,wordBreak:styles.overflowWrap===OVERFLOW_WRAP.BREAK_WORD?"break-word":styles.wordBreak}),words=[];!(bk=breaker.next()).done;)bk.value&&words.push(bk.value.slice());return words},TextContainer=function(node,styles){this.text=transform$1(node.data,styles.textTransform),this.textBounds=function(value,styles,node){var textList=breakText(value,styles),textBounds=[],offset=0;return textList.forEach(function(text){var replacementNode;styles.textDecorationLine.length||0<text.trim().length?FEATURES.SUPPORT_RANGE_BOUNDS?textBounds.push(new TextBounds(text,getRangeBounds(node,offset,text.length))):(replacementNode=node.splitText(text.length),textBounds.push(new TextBounds(text,getWrapperBounds(node))),node=replacementNode):FEATURES.SUPPORT_RANGE_BOUNDS||(node=node.splitText(text.length)),offset+=text.length}),textBounds}(this.text,styles,node)},transform$1=function(text,transform){switch(transform){case TEXT_TRANSFORM.LOWERCASE:return text.toLowerCase();case TEXT_TRANSFORM.CAPITALIZE:return text.replace(CAPITALIZE,capitalize);case TEXT_TRANSFORM.UPPERCASE:return text.toUpperCase();default:return text}},CAPITALIZE=/(^|\s|:|-|\(|\))([a-z])/g,capitalize=function(m,p1,p2){return 0<m.length?p1+p2.toUpperCase():m},ImageElementContainer=function(_super){function ImageElementContainer(img){var _this=_super.call(this,img)||this;return _this.src=img.currentSrc||img.src,_this.intrinsicWidth=img.naturalWidth,_this.intrinsicHeight=img.naturalHeight,CacheStorage.getInstance().addImage(_this.src),_this}return __extends(ImageElementContainer,_super),ImageElementContainer}(ElementContainer),CanvasElementContainer=function(_super){function CanvasElementContainer(canvas){var _this=_super.call(this,canvas)||this;return _this.canvas=canvas,_this.intrinsicWidth=canvas.width,_this.intrinsicHeight=canvas.height,_this}return __extends(CanvasElementContainer,_super),CanvasElementContainer}(ElementContainer),SVGElementContainer=function(_super){function SVGElementContainer(img){var _this=_super.call(this,img)||this,s=new XMLSerializer;return _this.svg="data:image/svg+xml,"+encodeURIComponent(s.serializeToString(img)),_this.intrinsicWidth=img.width.baseVal.value,_this.intrinsicHeight=img.height.baseVal.value,CacheStorage.getInstance().addImage(_this.svg),_this}return __extends(SVGElementContainer,_super),SVGElementContainer}(ElementContainer),LIElementContainer=function(_super){function LIElementContainer(element){var _this=_super.call(this,element)||this;return _this.value=element.value,_this}return __extends(LIElementContainer,_super),LIElementContainer}(ElementContainer),OLElementContainer=function(_super){function OLElementContainer(element){var _this=_super.call(this,element)||this;return _this.start=element.start,_this.reversed="boolean"==typeof element.reversed&&!0===element.reversed,_this}return __extends(OLElementContainer,_super),OLElementContainer}(ElementContainer),CHECKBOX_BORDER_RADIUS=[{type:TokenType.DIMENSION_TOKEN,flags:0,unit:"px",number:3}],RADIO_BORDER_RADIUS=[{type:TokenType.PERCENTAGE_TOKEN,flags:0,number:50}],PASSWORD="password",InputElementContainer=function(_super){function InputElementContainer(input){var node,value,bounds,_this=_super.call(this,input)||this;switch(_this.type=input.type.toLowerCase(),_this.checked=input.checked,_this.value=0===(value=(node=input).type===PASSWORD?new Array(node.value.length+1).join("•"):node.value).length?node.placeholder||"":value,"checkbox"!==_this.type&&"radio"!==_this.type||(_this.styles.backgroundColor=3739148031,_this.styles.borderTopColor=_this.styles.borderRightColor=_this.styles.borderBottomColor=_this.styles.borderLeftColor=2779096575,_this.styles.borderTopWidth=_this.styles.borderRightWidth=_this.styles.borderBottomWidth=_this.styles.borderLeftWidth=1,_this.styles.borderTopStyle=_this.styles.borderRightStyle=_this.styles.borderBottomStyle=_this.styles.borderLeftStyle=BORDER_STYLE.SOLID,_this.styles.backgroundClip=[BACKGROUND_CLIP.BORDER_BOX],_this.styles.backgroundOrigin=[0],_this.bounds=(bounds=_this.bounds).width>bounds.height?new Bounds(bounds.left+(bounds.width-bounds.height)/2,bounds.top,bounds.height,bounds.height):bounds.width<bounds.height?new Bounds(bounds.left,bounds.top+(bounds.height-bounds.width)/2,bounds.width,bounds.width):bounds),_this.type){case"checkbox":_this.styles.borderTopRightRadius=_this.styles.borderTopLeftRadius=_this.styles.borderBottomRightRadius=_this.styles.borderBottomLeftRadius=CHECKBOX_BORDER_RADIUS;break;case"radio":_this.styles.borderTopRightRadius=_this.styles.borderTopLeftRadius=_this.styles.borderBottomRightRadius=_this.styles.borderBottomLeftRadius=RADIO_BORDER_RADIUS}return _this}return __extends(InputElementContainer,_super),InputElementContainer}(ElementContainer),SelectElementContainer=function(_super){function SelectElementContainer(element){var _this=_super.call(this,element)||this,option=element.options[element.selectedIndex||0];return _this.value=option&&option.text||"",_this}return __extends(SelectElementContainer,_super),SelectElementContainer}(ElementContainer),TextareaElementContainer=function(_super){function TextareaElementContainer(element){var _this=_super.call(this,element)||this;return _this.value=element.value,_this}return __extends(TextareaElementContainer,_super),TextareaElementContainer}(ElementContainer),IFrameElementContainer=function(_super){function IFrameElementContainer(iframe){var documentBackgroundColor,bodyBackgroundColor,_this=_super.call(this,iframe)||this;_this.src=iframe.src,_this.width=parseInt(iframe.width,10)||0,_this.height=parseInt(iframe.height,10)||0,_this.backgroundColor=_this.styles.backgroundColor;try{iframe.contentWindow&&iframe.contentWindow.document&&iframe.contentWindow.document.documentElement&&(_this.tree=parseTree(iframe.contentWindow.document.documentElement),documentBackgroundColor=iframe.contentWindow.document.documentElement?parseColor(getComputedStyle(iframe.contentWindow.document.documentElement).backgroundColor):COLORS.TRANSPARENT,bodyBackgroundColor=iframe.contentWindow.document.body?parseColor(getComputedStyle(iframe.contentWindow.document.body).backgroundColor):COLORS.TRANSPARENT,_this.backgroundColor=0==(255&documentBackgroundColor)?0==(255&bodyBackgroundColor)?_this.styles.backgroundColor:bodyBackgroundColor:documentBackgroundColor)}catch(e){}return _this}return __extends(IFrameElementContainer,_super),IFrameElementContainer}(ElementContainer),LIST_OWNERS=["OL","UL","MENU"],parseNodeTree=function(node,parent,root){for(var childNode=node.firstChild;childNode;childNode=nextNode){var container,nextNode=childNode.nextSibling;isTextNode(childNode)&&0<childNode.data.trim().length?parent.textNodes.push(new TextContainer(childNode,parent.styles)):!isElementNode(childNode)||(container=createContainer(childNode)).styles.isVisible()&&(createsRealStackingContext(childNode,container,root)?container.flags|=4:createsStackingContext(container.styles)&&(container.flags|=2),-1!==LIST_OWNERS.indexOf(childNode.tagName)&&(container.flags|=8),parent.elements.push(container),isTextareaElement(childNode)||isSVGElement(childNode)||isSelectElement(childNode)||parseNodeTree(childNode,container,root))}},createContainer=function(element){return new(isImageElement(element)?ImageElementContainer:isCanvasElement(element)?CanvasElementContainer:isSVGElement(element)?SVGElementContainer:isLIElement(element)?LIElementContainer:isOLElement(element)?OLElementContainer:isInputElement(element)?InputElementContainer:isSelectElement(element)?SelectElementContainer:isTextareaElement(element)?TextareaElementContainer:isIFrameElement(element)?IFrameElementContainer:ElementContainer)(element)},parseTree=function(element){var container=createContainer(element);return container.flags|=4,parseNodeTree(element,container,container),container},createsRealStackingContext=function(node,container,root){return container.styles.isPositionedWithZIndex()||container.styles.opacity<1||container.styles.isTransformed()||isBodyElement(node)&&root.styles.isTransparent()},createsStackingContext=function(styles){return styles.isPositioned()||styles.isFloating()},isTextNode=function(node){return node.nodeType===Node.TEXT_NODE},isElementNode=function(node){return node.nodeType===Node.ELEMENT_NODE},isHTMLElementNode=function(node){return void 0!==node.style},isLIElement=function(node){return"LI"===node.tagName},isOLElement=function(node){return"OL"===node.tagName},isInputElement=function(node){return"INPUT"===node.tagName},isSVGElement=function(node){return"svg"===node.tagName},isBodyElement=function(node){return"BODY"===node.tagName},isCanvasElement=function(node){return"CANVAS"===node.tagName},isImageElement=function(node){return"IMG"===node.tagName},isIFrameElement=function(node){return"IFRAME"===node.tagName},isTextareaElement=function(node){return"TEXTAREA"===node.tagName},isSelectElement=function(node){return"SELECT"===node.tagName},CounterState=function(){function CounterState(){this.counters={}}return CounterState.prototype.getCounterValue=function(name){var counter=this.counters[name];return counter&&counter.length?counter[counter.length-1]:1},CounterState.prototype.getCounterValues=function(name){var counter=this.counters[name];return counter||[]},CounterState.prototype.pop=function(counters){var _this=this;counters.forEach(function(counter){return _this.counters[counter].pop()})},CounterState.prototype.parse=function(style){var _this=this,counterIncrement=style.counterIncrement,counterReset=style.counterReset;null!==counterIncrement&&counterIncrement.forEach(function(entry){var counter=_this.counters[entry.counter];counter&&(counter[Math.max(0,counter.length-1)]+=entry.increment)});var counterNames=[];return counterReset.forEach(function(entry){var counter=_this.counters[entry.counter];counterNames.push(entry.counter),(counter=counter||(_this.counters[entry.counter]=[])).push(entry.reset)}),counterNames},CounterState}(),ROMAN_UPPER={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},ARMENIAN={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["Ք","Փ","Ւ","Ց","Ր","Տ","Վ","Ս","Ռ","Ջ","Պ","Չ","Ո","Շ","Ն","Յ","Մ","Ճ","Ղ","Ձ","Հ","Կ","Ծ","Խ","Լ","Ի","Ժ","Թ","Ը","Է","Զ","Ե","Դ","Գ","Բ","Ա"]},HEBREW={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["י׳","ט׳","ח׳","ז׳","ו׳","ה׳","ד׳","ג׳","ב׳","א׳","ת","ש","ר","ק","צ","פ","ע","ס","נ","מ","ל","כ","יט","יח","יז","טז","טו","י","ט","ח","ז","ו","ה","ד","ג","ב","א"]},GEORGIAN={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["ჵ","ჰ","ჯ","ჴ","ხ","ჭ","წ","ძ","ც","ჩ","შ","ყ","ღ","ქ","ფ","ჳ","ტ","ს","რ","ჟ","პ","ო","ჲ","ნ","მ","ლ","კ","ი","თ","ჱ","ზ","ვ","ე","დ","გ","ბ","ა"]},createCounterText=function(value,type,appendSuffix){var defaultSuffix=appendSuffix?". ":"",cjkSuffix=appendSuffix?"、":"",koreanSuffix=appendSuffix?", ":"",spaceSuffix=appendSuffix?" ":"";switch(type){case LIST_STYLE_TYPE.DISC:return"•"+spaceSuffix;case LIST_STYLE_TYPE.CIRCLE:return"◦"+spaceSuffix;case LIST_STYLE_TYPE.SQUARE:return"◾"+spaceSuffix;case LIST_STYLE_TYPE.DECIMAL_LEADING_ZERO:var string=createCounterStyleFromRange(value,48,57,!0,defaultSuffix);return string.length<4?"0"+string:string;case LIST_STYLE_TYPE.CJK_DECIMAL:return createCounterStyleFromSymbols(value,"〇一二三四五六七八九",cjkSuffix);case LIST_STYLE_TYPE.LOWER_ROMAN:return createAdditiveCounter(value,1,3999,ROMAN_UPPER,LIST_STYLE_TYPE.DECIMAL,defaultSuffix).toLowerCase();case LIST_STYLE_TYPE.UPPER_ROMAN:return createAdditiveCounter(value,1,3999,ROMAN_UPPER,LIST_STYLE_TYPE.DECIMAL,defaultSuffix);case LIST_STYLE_TYPE.LOWER_GREEK:return createCounterStyleFromRange(value,945,969,!1,defaultSuffix);case LIST_STYLE_TYPE.LOWER_ALPHA:return createCounterStyleFromRange(value,97,122,!1,defaultSuffix);case LIST_STYLE_TYPE.UPPER_ALPHA:return createCounterStyleFromRange(value,65,90,!1,defaultSuffix);case LIST_STYLE_TYPE.ARABIC_INDIC:return createCounterStyleFromRange(value,1632,1641,!0,defaultSuffix);case LIST_STYLE_TYPE.ARMENIAN:case LIST_STYLE_TYPE.UPPER_ARMENIAN:return createAdditiveCounter(value,1,9999,ARMENIAN,LIST_STYLE_TYPE.DECIMAL,defaultSuffix);case LIST_STYLE_TYPE.LOWER_ARMENIAN:return createAdditiveCounter(value,1,9999,ARMENIAN,LIST_STYLE_TYPE.DECIMAL,defaultSuffix).toLowerCase();case LIST_STYLE_TYPE.BENGALI:return createCounterStyleFromRange(value,2534,2543,!0,defaultSuffix);case LIST_STYLE_TYPE.CAMBODIAN:case LIST_STYLE_TYPE.KHMER:return createCounterStyleFromRange(value,6112,6121,!0,defaultSuffix);case LIST_STYLE_TYPE.CJK_EARTHLY_BRANCH:return createCounterStyleFromSymbols(value,"子丑寅卯辰巳午未申酉戌亥",cjkSuffix);case LIST_STYLE_TYPE.CJK_HEAVENLY_STEM:return createCounterStyleFromSymbols(value,"甲乙丙丁戊己庚辛壬癸",cjkSuffix);case LIST_STYLE_TYPE.CJK_IDEOGRAPHIC:case LIST_STYLE_TYPE.TRAD_CHINESE_INFORMAL:return createCJKCounter(value,"零一二三四五六七八九","十百千萬","負",cjkSuffix,14);case LIST_STYLE_TYPE.TRAD_CHINESE_FORMAL:return createCJKCounter(value,"零壹貳參肆伍陸柒捌玖","拾佰仟萬","負",cjkSuffix,15);case LIST_STYLE_TYPE.SIMP_CHINESE_INFORMAL:return createCJKCounter(value,"零一二三四五六七八九","十百千萬","负",cjkSuffix,14);case LIST_STYLE_TYPE.SIMP_CHINESE_FORMAL:return createCJKCounter(value,"零壹贰叁肆伍陆柒捌玖","拾佰仟萬","负",cjkSuffix,15);case LIST_STYLE_TYPE.JAPANESE_INFORMAL:return createCJKCounter(value,"〇一二三四五六七八九","十百千万","マイナス",cjkSuffix,0);case LIST_STYLE_TYPE.JAPANESE_FORMAL:return createCJKCounter(value,"零壱弐参四伍六七八九","拾百千万","マイナス",cjkSuffix,7);case LIST_STYLE_TYPE.KOREAN_HANGUL_FORMAL:return createCJKCounter(value,"영일이삼사오육칠팔구","십백천만","마이너스",koreanSuffix,7);case LIST_STYLE_TYPE.KOREAN_HANJA_INFORMAL:return createCJKCounter(value,"零一二三四五六七八九","十百千萬","마이너스",koreanSuffix,0);case LIST_STYLE_TYPE.KOREAN_HANJA_FORMAL:return createCJKCounter(value,"零壹貳參四五六七八九","拾百千","마이너스",koreanSuffix,7);case LIST_STYLE_TYPE.DEVANAGARI:return createCounterStyleFromRange(value,2406,2415,!0,defaultSuffix);case LIST_STYLE_TYPE.GEORGIAN:return createAdditiveCounter(value,1,19999,GEORGIAN,LIST_STYLE_TYPE.DECIMAL,defaultSuffix);case LIST_STYLE_TYPE.GUJARATI:return createCounterStyleFromRange(value,2790,2799,!0,defaultSuffix);case LIST_STYLE_TYPE.GURMUKHI:return createCounterStyleFromRange(value,2662,2671,!0,defaultSuffix);case LIST_STYLE_TYPE.HEBREW:return createAdditiveCounter(value,1,10999,HEBREW,LIST_STYLE_TYPE.DECIMAL,defaultSuffix);case LIST_STYLE_TYPE.HIRAGANA:return createCounterStyleFromSymbols(value,"あいうえおかきくけこさしすせそたちつてとなにぬねのはひふへほまみむめもやゆよらりるれろわゐゑをん");case LIST_STYLE_TYPE.HIRAGANA_IROHA:return createCounterStyleFromSymbols(value,"いろはにほへとちりぬるをわかよたれそつねならむうゐのおくやまけふこえてあさきゆめみしゑひもせす");case LIST_STYLE_TYPE.KANNADA:return createCounterStyleFromRange(value,3302,3311,!0,defaultSuffix);case LIST_STYLE_TYPE.KATAKANA:return createCounterStyleFromSymbols(value,"アイウエオカキクケコサシスセソタチツテトナニヌネノハヒフヘホマミムメモヤユヨラリルレロワヰヱヲン",cjkSuffix);case LIST_STYLE_TYPE.KATAKANA_IROHA:return createCounterStyleFromSymbols(value,"イロハニホヘトチリヌルヲワカヨタレソツネナラムウヰノオクヤマケフコエテアサキユメミシヱヒモセス",cjkSuffix);case LIST_STYLE_TYPE.LAO:return createCounterStyleFromRange(value,3792,3801,!0,defaultSuffix);case LIST_STYLE_TYPE.MONGOLIAN:return createCounterStyleFromRange(value,6160,6169,!0,defaultSuffix);case LIST_STYLE_TYPE.MYANMAR:return createCounterStyleFromRange(value,4160,4169,!0,defaultSuffix);case LIST_STYLE_TYPE.ORIYA:return createCounterStyleFromRange(value,2918,2927,!0,defaultSuffix);case LIST_STYLE_TYPE.PERSIAN:return createCounterStyleFromRange(value,1776,1785,!0,defaultSuffix);case LIST_STYLE_TYPE.TAMIL:return createCounterStyleFromRange(value,3046,3055,!0,defaultSuffix);case LIST_STYLE_TYPE.TELUGU:return createCounterStyleFromRange(value,3174,3183,!0,defaultSuffix);case LIST_STYLE_TYPE.THAI:return createCounterStyleFromRange(value,3664,3673,!0,defaultSuffix);case LIST_STYLE_TYPE.TIBETAN:return createCounterStyleFromRange(value,3872,3881,!0,defaultSuffix);case LIST_STYLE_TYPE.DECIMAL:default:return createCounterStyleFromRange(value,48,57,!0,defaultSuffix)}},DocumentCloner=function(){function DocumentCloner(element,options){if(this.options=options,this.scrolledElements=[],this.referenceElement=element,this.counters=new CounterState,this.quoteDepth=0,!element.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(element.ownerDocument.documentElement)}return DocumentCloner.prototype.toIFrame=function(ownerDocument,windowSize){var _this=this,iframe=createIFrameContainer(ownerDocument,windowSize);if(!iframe.contentWindow)return Promise.reject("Unable to find iframe window");var scrollX=ownerDocument.defaultView.pageXOffset,scrollY=ownerDocument.defaultView.pageYOffset,cloneWindow=iframe.contentWindow,documentClone=cloneWindow.document,iframeLoad=iframeLoader(iframe).then(function(){_this.scrolledElements.forEach(restoreNodeScroll),cloneWindow&&(cloneWindow.scrollTo(windowSize.left,windowSize.top),!/(iPad|iPhone|iPod)/g.test(navigator.userAgent)||cloneWindow.scrollY===windowSize.top&&cloneWindow.scrollX===windowSize.left||(documentClone.documentElement.style.top=-windowSize.top+"px",documentClone.documentElement.style.left=-windowSize.left+"px",documentClone.documentElement.style.position="absolute"));var onclone=_this.options.onclone;return void 0===_this.clonedReferenceElement?Promise.reject("Error finding the "+_this.referenceElement.nodeName+" in the cloned document"):"function"==typeof onclone?Promise.resolve().then(function(){return onclone(documentClone)}).then(function(){return iframe}):iframe});return documentClone.open(),documentClone.write(serializeDoctype(document.doctype)+"<html></html>"),restoreOwnerScroll(this.referenceElement.ownerDocument,scrollX,scrollY),documentClone.replaceChild(documentClone.adoptNode(this.documentElement),documentClone.documentElement),documentClone.close(),iframeLoad},DocumentCloner.prototype.createElementClone=function(node){return isCanvasElement(node)?this.createCanvasClone(node):isStyleElement(node)?this.createStyleClone(node):node.cloneNode(!1)},DocumentCloner.prototype.createStyleClone=function(node){try{var sheet=node.sheet;if(sheet&&sheet.cssRules){var css=[].slice.call(sheet.cssRules,0).reduce(function(css,rule){return rule&&"string"==typeof rule.cssText?css+rule.cssText:css},""),style=node.cloneNode(!1);return style.textContent=css,style}}catch(e){if(Logger.getInstance(this.options.id).error("Unable to access cssRules property",e),"SecurityError"!==e.name)throw e}return node.cloneNode(!1)},DocumentCloner.prototype.createCanvasClone=function(canvas){if(this.options.inlineImages&&canvas.ownerDocument){var img=canvas.ownerDocument.createElement("img");try{return img.src=canvas.toDataURL(),img}catch(e){Logger.getInstance(this.options.id).info("Unable to clone canvas contents, canvas is tainted")}}var clonedCanvas=canvas.cloneNode(!1);try{clonedCanvas.width=canvas.width,clonedCanvas.height=canvas.height;var ctx=canvas.getContext("2d"),clonedCtx=clonedCanvas.getContext("2d");return clonedCtx&&(ctx?clonedCtx.putImageData(ctx.getImageData(0,0,canvas.width,canvas.height),0,0):clonedCtx.drawImage(canvas,0,0)),clonedCanvas}catch(e){}return clonedCanvas},DocumentCloner.prototype.cloneNode=function(node){if(isTextNode(node))return document.createTextNode(node.data);if(!node.ownerDocument)return node.cloneNode(!1);var window=node.ownerDocument.defaultView;if(isHTMLElementNode(node)&&window){var clone=this.createElementClone(node),style=window.getComputedStyle(node),styleBefore=window.getComputedStyle(node,":before"),styleAfter=window.getComputedStyle(node,":after");this.referenceElement===node&&(this.clonedReferenceElement=clone),isBodyElement(clone)&&createPseudoHideStyles(clone);for(var counters=this.counters.parse(new CSSParsedCounterDeclaration(style)),before_1=this.resolvePseudoContent(node,clone,styleBefore,PseudoElementType.BEFORE),child=node.firstChild;child;child=child.nextSibling)isElementNode(child)&&("SCRIPT"===child.tagName||child.hasAttribute("data-html2canvas-ignore")||"function"==typeof this.options.ignoreElements&&this.options.ignoreElements(child))||this.options.copyStyles&&isElementNode(child)&&isStyleElement(child)||clone.appendChild(this.cloneNode(child));before_1&&clone.insertBefore(before_1,clone.firstChild);var after_1=this.resolvePseudoContent(node,clone,styleAfter,PseudoElementType.AFTER);return after_1&&clone.appendChild(after_1),this.counters.pop(counters),style&&this.options.copyStyles&&!isIFrameElement(node)&&copyCSSStyles(style,clone),0===node.scrollTop&&0===node.scrollLeft||this.scrolledElements.push([clone,node.scrollLeft,node.scrollTop]),(isTextareaElement(node)||isSelectElement(node))&&(isTextareaElement(clone)||isSelectElement(clone))&&(clone.value=node.value),clone}return node.cloneNode(!1)},DocumentCloner.prototype.resolvePseudoContent=function(node,clone,style,pseudoElt){var _this=this;if(style){var value=style.content,document=clone.ownerDocument;if(document&&value&&"none"!==value&&"-moz-alt-content"!==value&&"none"!==style.display){this.counters.parse(new CSSParsedCounterDeclaration(style));var declaration=new CSSParsedPseudoDeclaration(style),anonymousReplacedElement=document.createElement("html2canvaspseudoelement");return copyCSSStyles(style,anonymousReplacedElement),declaration.content.forEach(function(token){if(token.type===TokenType.STRING_TOKEN)anonymousReplacedElement.appendChild(document.createTextNode(token.value));else if(token.type===TokenType.URL_TOKEN){var img=document.createElement("img");img.src=token.value,img.style.opacity="1",anonymousReplacedElement.appendChild(img)}else if(token.type===TokenType.FUNCTION){var attr,_a,counterState,counterType,_b,counter,delim,counterStyle,counterStates,counterType_1,separator,text;"attr"===token.name?(attr=token.values.filter(isIdentToken)).length&&anonymousReplacedElement.appendChild(document.createTextNode(node.getAttribute(attr[0].value)||"")):"counter"===token.name?(counter=(_a=token.values.filter(nonFunctionArgSeparator))[0],counterStyle=_a[1],counter&&isIdentToken(counter)&&(counterState=_this.counters.getCounterValue(counter.value),counterType=counterStyle&&isIdentToken(counterStyle)?listStyleType.parse(counterStyle.value):LIST_STYLE_TYPE.DECIMAL,anonymousReplacedElement.appendChild(document.createTextNode(createCounterText(counterState,counterType,!1))))):"counters"===token.name&&(counter=(_b=token.values.filter(nonFunctionArgSeparator))[0],delim=_b[1],counterStyle=_b[2],counter&&isIdentToken(counter)&&(counterStates=_this.counters.getCounterValues(counter.value),counterType_1=counterStyle&&isIdentToken(counterStyle)?listStyleType.parse(counterStyle.value):LIST_STYLE_TYPE.DECIMAL,separator=delim&&delim.type===TokenType.STRING_TOKEN?delim.value:"",text=counterStates.map(function(value){return createCounterText(value,counterType_1,!1)}).join(separator),anonymousReplacedElement.appendChild(document.createTextNode(text))))}else if(token.type===TokenType.IDENT_TOKEN)switch(token.value){case"open-quote":anonymousReplacedElement.appendChild(document.createTextNode(getQuote(declaration.quotes,_this.quoteDepth++,!0)));break;case"close-quote":anonymousReplacedElement.appendChild(document.createTextNode(getQuote(declaration.quotes,--_this.quoteDepth,!1)))}}),anonymousReplacedElement.className=PSEUDO_HIDE_ELEMENT_CLASS_BEFORE+" "+PSEUDO_HIDE_ELEMENT_CLASS_AFTER,clone.className+=pseudoElt===PseudoElementType.BEFORE?" "+PSEUDO_HIDE_ELEMENT_CLASS_BEFORE:" "+PSEUDO_HIDE_ELEMENT_CLASS_AFTER,anonymousReplacedElement}}},DocumentCloner}();!function(PseudoElementType){PseudoElementType[PseudoElementType.BEFORE=0]="BEFORE",PseudoElementType[PseudoElementType.AFTER=1]="AFTER"}(PseudoElementType=PseudoElementType||{});var PathType,createIFrameContainer=function(ownerDocument,bounds){var cloneIframeContainer=ownerDocument.createElement("iframe");return cloneIframeContainer.className="html2canvas-container",cloneIframeContainer.style.visibility="hidden",cloneIframeContainer.style.position="fixed",cloneIframeContainer.style.left="-10000px",cloneIframeContainer.style.top="0px",cloneIframeContainer.style.border="0",cloneIframeContainer.width=bounds.width.toString(),cloneIframeContainer.height=bounds.height.toString(),cloneIframeContainer.scrolling="no",cloneIframeContainer.setAttribute("data-html2canvas-ignore","true"),ownerDocument.body.appendChild(cloneIframeContainer),cloneIframeContainer},iframeLoader=function(iframe){return new Promise(function(resolve,reject){var cloneWindow=iframe.contentWindow;if(!cloneWindow)return reject("No window assigned for iframe");var documentClone=cloneWindow.document;cloneWindow.onload=iframe.onload=documentClone.onreadystatechange=function(){cloneWindow.onload=iframe.onload=documentClone.onreadystatechange=null;var interval=setInterval(function(){0<documentClone.body.childNodes.length&&"complete"===documentClone.readyState&&(clearInterval(interval),resolve(iframe))},50)}})},copyCSSStyles=function(style,target){for(var i=style.length-1;0<=i;i--){var property=style.item(i);"content"!==property&&target.style.setProperty(property,style.getPropertyValue(property))}return target},serializeDoctype=function(doctype){var str="";return doctype&&(str+="<!DOCTYPE ",doctype.name&&(str+=doctype.name),doctype.internalSubset&&(str+=doctype.internalSubset),doctype.publicId&&(str+='"'+doctype.publicId+'"'),doctype.systemId&&(str+='"'+doctype.systemId+'"'),str+=">"),str},restoreOwnerScroll=function(ownerDocument,x,y){ownerDocument&&ownerDocument.defaultView&&(x!==ownerDocument.defaultView.pageXOffset||y!==ownerDocument.defaultView.pageYOffset)&&ownerDocument.defaultView.scrollTo(x,y)},restoreNodeScroll=function(_a){var element=_a[0],x=_a[1],y=_a[2];element.scrollLeft=x,element.scrollTop=y},PSEUDO_HIDE_ELEMENT_CLASS_BEFORE="___html2canvas___pseudoelement_before",PSEUDO_HIDE_ELEMENT_CLASS_AFTER="___html2canvas___pseudoelement_after",createPseudoHideStyles=function(body){createStyles(body,"."+PSEUDO_HIDE_ELEMENT_CLASS_BEFORE+':before{\n    content: "" !important;\n    display: none !important;\n}\n         .'+PSEUDO_HIDE_ELEMENT_CLASS_AFTER+':after{\n    content: "" !important;\n    display: none !important;\n}')},createStyles=function(body,styles){var style,document=body.ownerDocument;document&&((style=document.createElement("style")).textContent=styles,body.appendChild(style))};!function(PathType){PathType[PathType.VECTOR=0]="VECTOR",PathType[PathType.BEZIER_CURVE=1]="BEZIER_CURVE"}(PathType=PathType||{});function equalPath(a,b){return a.length===b.length&&a.some(function(v,i){return v===b[i]})}function lerp(a,b,t){return new Vector(a.x+(b.x-a.x)*t,a.y+(b.y-a.y)*t)}function isBezierCurve(path){return path.type===PathType.BEZIER_CURVE}var CORNER,Vector=function(){function Vector(x,y){this.type=PathType.VECTOR,this.x=x,this.y=y}return Vector.prototype.add=function(deltaX,deltaY){return new Vector(this.x+deltaX,this.y+deltaY)},Vector}(),BezierCurve=function(){function BezierCurve(start,startControl,endControl,end){this.type=PathType.BEZIER_CURVE,this.start=start,this.startControl=startControl,this.endControl=endControl,this.end=end}return BezierCurve.prototype.subdivide=function(t,firstHalf){var ab=lerp(this.start,this.startControl,t),bc=lerp(this.startControl,this.endControl,t),cd=lerp(this.endControl,this.end,t),abbc=lerp(ab,bc,t),bccd=lerp(bc,cd,t),dest=lerp(abbc,bccd,t);return firstHalf?new BezierCurve(this.start,ab,abbc,dest):new BezierCurve(dest,bccd,cd,this.end)},BezierCurve.prototype.add=function(deltaX,deltaY){return new BezierCurve(this.start.add(deltaX,deltaY),this.startControl.add(deltaX,deltaY),this.endControl.add(deltaX,deltaY),this.end.add(deltaX,deltaY))},BezierCurve.prototype.reverse=function(){return new BezierCurve(this.end,this.endControl,this.startControl,this.start)},BezierCurve}(),BoundCurves=function(element){var styles=element.styles,bounds=element.bounds,_a=getAbsoluteValueForTuple(styles.borderTopLeftRadius,bounds.width,bounds.height),tlh=_a[0],tlv=_a[1],_b=getAbsoluteValueForTuple(styles.borderTopRightRadius,bounds.width,bounds.height),trh=_b[0],trv=_b[1],_c=getAbsoluteValueForTuple(styles.borderBottomRightRadius,bounds.width,bounds.height),brh=_c[0],brv=_c[1],_d=getAbsoluteValueForTuple(styles.borderBottomLeftRadius,bounds.width,bounds.height),blh=_d[0],blv=_d[1],factors=[];factors.push((tlh+trh)/bounds.width),factors.push((blh+brh)/bounds.width),factors.push((tlv+blv)/bounds.height),factors.push((trv+brv)/bounds.height);var maxFactor=Math.max.apply(Math,factors);1<maxFactor&&(tlh/=maxFactor,tlv/=maxFactor,trh/=maxFactor,trv/=maxFactor,brh/=maxFactor,brv/=maxFactor,blh/=maxFactor,blv/=maxFactor);var topWidth=bounds.width-trh,rightHeight=bounds.height-brv,bottomWidth=bounds.width-brh,leftHeight=bounds.height-blv,borderTopWidth=styles.borderTopWidth,borderRightWidth=styles.borderRightWidth,borderBottomWidth=styles.borderBottomWidth,borderLeftWidth=styles.borderLeftWidth,paddingTop=getAbsoluteValue(styles.paddingTop,element.bounds.width),paddingRight=getAbsoluteValue(styles.paddingRight,element.bounds.width),paddingBottom=getAbsoluteValue(styles.paddingBottom,element.bounds.width),paddingLeft=getAbsoluteValue(styles.paddingLeft,element.bounds.width);this.topLeftBorderBox=0<tlh||0<tlv?getCurvePoints(bounds.left,bounds.top,tlh,tlv,CORNER.TOP_LEFT):new Vector(bounds.left,bounds.top),this.topRightBorderBox=0<trh||0<trv?getCurvePoints(bounds.left+topWidth,bounds.top,trh,trv,CORNER.TOP_RIGHT):new Vector(bounds.left+bounds.width,bounds.top),this.bottomRightBorderBox=0<brh||0<brv?getCurvePoints(bounds.left+bottomWidth,bounds.top+rightHeight,brh,brv,CORNER.BOTTOM_RIGHT):new Vector(bounds.left+bounds.width,bounds.top+bounds.height),this.bottomLeftBorderBox=0<blh||0<blv?getCurvePoints(bounds.left,bounds.top+leftHeight,blh,blv,CORNER.BOTTOM_LEFT):new Vector(bounds.left,bounds.top+bounds.height),this.topLeftPaddingBox=0<tlh||0<tlv?getCurvePoints(bounds.left+borderLeftWidth,bounds.top+borderTopWidth,Math.max(0,tlh-borderLeftWidth),Math.max(0,tlv-borderTopWidth),CORNER.TOP_LEFT):new Vector(bounds.left+borderLeftWidth,bounds.top+borderTopWidth),this.topRightPaddingBox=0<trh||0<trv?getCurvePoints(bounds.left+Math.min(topWidth,bounds.width+borderLeftWidth),bounds.top+borderTopWidth,topWidth>bounds.width+borderLeftWidth?0:trh-borderLeftWidth,trv-borderTopWidth,CORNER.TOP_RIGHT):new Vector(bounds.left+bounds.width-borderRightWidth,bounds.top+borderTopWidth),this.bottomRightPaddingBox=0<brh||0<brv?getCurvePoints(bounds.left+Math.min(bottomWidth,bounds.width-borderLeftWidth),bounds.top+Math.min(rightHeight,bounds.height+borderTopWidth),Math.max(0,brh-borderRightWidth),brv-borderBottomWidth,CORNER.BOTTOM_RIGHT):new Vector(bounds.left+bounds.width-borderRightWidth,bounds.top+bounds.height-borderBottomWidth),this.bottomLeftPaddingBox=0<blh||0<blv?getCurvePoints(bounds.left+borderLeftWidth,bounds.top+leftHeight,Math.max(0,blh-borderLeftWidth),blv-borderBottomWidth,CORNER.BOTTOM_LEFT):new Vector(bounds.left+borderLeftWidth,bounds.top+bounds.height-borderBottomWidth),this.topLeftContentBox=0<tlh||0<tlv?getCurvePoints(bounds.left+borderLeftWidth+paddingLeft,bounds.top+borderTopWidth+paddingTop,Math.max(0,tlh-(borderLeftWidth+paddingLeft)),Math.max(0,tlv-(borderTopWidth+paddingTop)),CORNER.TOP_LEFT):new Vector(bounds.left+borderLeftWidth+paddingLeft,bounds.top+borderTopWidth+paddingTop),this.topRightContentBox=0<trh||0<trv?getCurvePoints(bounds.left+Math.min(topWidth,bounds.width+borderLeftWidth+paddingLeft),bounds.top+borderTopWidth+paddingTop,topWidth>bounds.width+borderLeftWidth+paddingLeft?0:trh-borderLeftWidth+paddingLeft,trv-(borderTopWidth+paddingTop),CORNER.TOP_RIGHT):new Vector(bounds.left+bounds.width-(borderRightWidth+paddingRight),bounds.top+borderTopWidth+paddingTop),this.bottomRightContentBox=0<brh||0<brv?getCurvePoints(bounds.left+Math.min(bottomWidth,bounds.width-(borderLeftWidth+paddingLeft)),bounds.top+Math.min(rightHeight,bounds.height+borderTopWidth+paddingTop),Math.max(0,brh-(borderRightWidth+paddingRight)),brv-(borderBottomWidth+paddingBottom),CORNER.BOTTOM_RIGHT):new Vector(bounds.left+bounds.width-(borderRightWidth+paddingRight),bounds.top+bounds.height-(borderBottomWidth+paddingBottom)),this.bottomLeftContentBox=0<blh||0<blv?getCurvePoints(bounds.left+borderLeftWidth+paddingLeft,bounds.top+leftHeight,Math.max(0,blh-(borderLeftWidth+paddingLeft)),blv-(borderBottomWidth+paddingBottom),CORNER.BOTTOM_LEFT):new Vector(bounds.left+borderLeftWidth+paddingLeft,bounds.top+bounds.height-(borderBottomWidth+paddingBottom))};!function(CORNER){CORNER[CORNER.TOP_LEFT=0]="TOP_LEFT",CORNER[CORNER.TOP_RIGHT=1]="TOP_RIGHT",CORNER[CORNER.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",CORNER[CORNER.BOTTOM_LEFT=3]="BOTTOM_LEFT"}(CORNER=CORNER||{});function calculateBorderBoxPath(curves){return[curves.topLeftBorderBox,curves.topRightBorderBox,curves.bottomRightBorderBox,curves.bottomLeftBorderBox]}function calculatePaddingBoxPath(curves){return[curves.topLeftPaddingBox,curves.topRightPaddingBox,curves.bottomRightPaddingBox,curves.bottomLeftPaddingBox]}function paddingBox(element){var bounds=element.bounds,styles=element.styles;return bounds.add(styles.borderLeftWidth,styles.borderTopWidth,-(styles.borderRightWidth+styles.borderLeftWidth),-(styles.borderTopWidth+styles.borderBottomWidth))}function contentBox(element){var styles=element.styles,bounds=element.bounds,paddingLeft=getAbsoluteValue(styles.paddingLeft,bounds.width),paddingRight=getAbsoluteValue(styles.paddingRight,bounds.width),paddingTop=getAbsoluteValue(styles.paddingTop,bounds.width),paddingBottom=getAbsoluteValue(styles.paddingBottom,bounds.width);return bounds.add(paddingLeft+styles.borderLeftWidth,paddingTop+styles.borderTopWidth,-(styles.borderRightWidth+styles.borderLeftWidth+paddingLeft+paddingRight),-(styles.borderTopWidth+styles.borderBottomWidth+paddingTop+paddingBottom))}function calculateBackgroundRendering(container,index,intrinsicSize){var backgroundOrigin,element,backgroundPositioningArea=(backgroundOrigin=getBackgroundValueForIndex(container.styles.backgroundOrigin,index),element=container,0===backgroundOrigin?element.bounds:(2===backgroundOrigin?contentBox:paddingBox)(element)),backgroundPaintingArea=function(backgroundClip,element){return backgroundClip===BACKGROUND_CLIP.BORDER_BOX?element.bounds:(backgroundClip===BACKGROUND_CLIP.CONTENT_BOX?contentBox:paddingBox)(element)}(getBackgroundValueForIndex(container.styles.backgroundClip,index),container),backgroundImageSize=calculateBackgroundSize(getBackgroundValueForIndex(container.styles.backgroundSize,index),intrinsicSize,backgroundPositioningArea),sizeWidth=backgroundImageSize[0],sizeHeight=backgroundImageSize[1],position=getAbsoluteValueForTuple(getBackgroundValueForIndex(container.styles.backgroundPosition,index),backgroundPositioningArea.width-sizeWidth,backgroundPositioningArea.height-sizeHeight);return[calculateBackgroundRepeatPath(getBackgroundValueForIndex(container.styles.backgroundRepeat,index),position,backgroundImageSize,backgroundPositioningArea,backgroundPaintingArea),Math.round(backgroundPositioningArea.left+position[0]),Math.round(backgroundPositioningArea.top+position[1]),sizeWidth,sizeHeight]}function isAuto(token){return isIdentToken(token)&&token.value===BACKGROUND_SIZE.AUTO}function parseColor$1(value){return color_parse(Parser.create(value).parseComponentValue())}var getCurvePoints=function(x,y,r1,r2,position){var kappa=(Math.sqrt(2)-1)/3*4,ox=r1*kappa,oy=r2*kappa,xm=x+r1,ym=y+r2;switch(position){case CORNER.TOP_LEFT:return new BezierCurve(new Vector(x,ym),new Vector(x,ym-oy),new Vector(xm-ox,y),new Vector(xm,y));case CORNER.TOP_RIGHT:return new BezierCurve(new Vector(x,y),new Vector(x+ox,y),new Vector(xm,ym-oy),new Vector(xm,ym));case CORNER.BOTTOM_RIGHT:return new BezierCurve(new Vector(xm,y),new Vector(xm,y+oy),new Vector(x+ox,ym),new Vector(x,ym));case CORNER.BOTTOM_LEFT:default:return new BezierCurve(new Vector(xm,ym),new Vector(xm-ox,ym),new Vector(x,y+oy),new Vector(x,y))}},TransformEffect=function(offsetX,offsetY,matrix){this.type=0,this.offsetX=offsetX,this.offsetY=offsetY,this.matrix=matrix,this.target=6},ClipEffect=function(path,target){this.type=1,this.target=target,this.path=path},StackingContext=function(container){this.element=container,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]},ElementPaint=function(){function ElementPaint(element,parentStack){var offsetX,offsetY,matrix,borderBox,paddingBox;this.container=element,this.effects=parentStack.slice(0),this.curves=new BoundCurves(element),null!==element.styles.transform&&(offsetX=element.bounds.left+element.styles.transformOrigin[0].number,offsetY=element.bounds.top+element.styles.transformOrigin[1].number,matrix=element.styles.transform,this.effects.push(new TransformEffect(offsetX,offsetY,matrix))),element.styles.overflowX!==OVERFLOW.VISIBLE&&(borderBox=calculateBorderBoxPath(this.curves),paddingBox=calculatePaddingBoxPath(this.curves),equalPath(borderBox,paddingBox)?this.effects.push(new ClipEffect(borderBox,6)):(this.effects.push(new ClipEffect(borderBox,2)),this.effects.push(new ClipEffect(paddingBox,4))))}return ElementPaint.prototype.getParentEffects=function(){var borderBox,paddingBox,effects=this.effects.slice(0);return this.container.styles.overflowX!==OVERFLOW.VISIBLE&&(borderBox=calculateBorderBoxPath(this.curves),paddingBox=calculatePaddingBoxPath(this.curves),equalPath(borderBox,paddingBox)||effects.push(new ClipEffect(paddingBox,6))),effects},ElementPaint}(),parseStackTree=function(parent,stackingContext,realStackingContext,listItems){parent.container.elements.forEach(function(child){var treatAsRealStackingContext=0!=(4&child.flags),createsStackingContext=0!=(2&child.flags),paintContainer=new ElementPaint(child,parent.getParentEffects());0!=(2048&child.styles.display)&&listItems.push(paintContainer);var parentStack,stack,order_1,index_1,index_2,listOwnerItems=0!=(8&child.flags)?[]:listItems;treatAsRealStackingContext||createsStackingContext?(parentStack=treatAsRealStackingContext||child.styles.isPositioned()?realStackingContext:stackingContext,stack=new StackingContext(paintContainer),child.styles.isPositioned()||child.styles.opacity<1||child.styles.isTransformed()?(order_1=child.styles.zIndex.order)<0?(index_1=0,parentStack.negativeZIndex.some(function(current,i){return order_1>current.element.container.styles.zIndex.order&&(index_1=i,!0)}),parentStack.negativeZIndex.splice(index_1,0,stack)):0<order_1?(index_2=0,parentStack.positiveZIndex.some(function(current,i){return order_1>current.element.container.styles.zIndex.order&&(index_2=i+1,!0)}),parentStack.positiveZIndex.splice(index_2,0,stack)):parentStack.zeroOrAutoZIndexOrTransformedOrOpacity.push(stack):child.styles.isFloating()?parentStack.nonPositionedFloats.push(stack):parentStack.nonPositionedInlineLevel.push(stack),parseStackTree(paintContainer,stack,treatAsRealStackingContext?stack:realStackingContext,listOwnerItems)):(child.styles.isInlineLevel()?stackingContext.inlineLevel.push(paintContainer):stackingContext.nonInlineLevel.push(paintContainer),parseStackTree(paintContainer,stackingContext,realStackingContext,listOwnerItems)),0!=(8&child.flags)&&processListItems(child,listOwnerItems)})},processListItems=function(owner,elements){for(var numbering=owner instanceof OLElementContainer?owner.start:1,reversed=owner instanceof OLElementContainer&&owner.reversed,i=0;i<elements.length;i++){var item=elements[i];item.container instanceof LIElementContainer&&"number"==typeof item.container.value&&0!==item.container.value&&(numbering=item.container.value),item.listValue=createCounterText(numbering,item.container.styles.listStyleType,!0),numbering+=reversed?-1:1}},createPathFromCurves=function(outer1,inner1,outer2,inner2){var path=[];return isBezierCurve(outer1)?path.push(outer1.subdivide(.5,!1)):path.push(outer1),isBezierCurve(outer2)?path.push(outer2.subdivide(.5,!0)):path.push(outer2),isBezierCurve(inner2)?path.push(inner2.subdivide(.5,!0).reverse()):path.push(inner2),isBezierCurve(inner1)?path.push(inner1.subdivide(.5,!1).reverse()):path.push(inner1),path},calculateBackgroundSize=function(size,_a,bounds){var intrinsicWidth=_a[0],intrinsicHeight=_a[1],intrinsicProportion=_a[2],first=size[0],second=size[1];if(isLengthPercentage(first)&&second&&isLengthPercentage(second))return[getAbsoluteValue(first,bounds.width),getAbsoluteValue(second,bounds.height)];var hasIntrinsicProportion="number"==typeof intrinsicProportion;if(isIdentToken(first)&&(first.value===BACKGROUND_SIZE.CONTAIN||first.value===BACKGROUND_SIZE.COVER))return"number"!=typeof intrinsicProportion?[bounds.width,bounds.height]:bounds.width/bounds.height<intrinsicProportion!=(first.value===BACKGROUND_SIZE.COVER)?[bounds.width,bounds.width/intrinsicProportion]:[bounds.height*intrinsicProportion,bounds.height];var hasIntrinsicWidth="number"==typeof intrinsicWidth,hasIntrinsicHeight="number"==typeof intrinsicHeight,hasIntrinsicDimensions=hasIntrinsicWidth||hasIntrinsicHeight;if(isAuto(first)&&(!second||isAuto(second)))return hasIntrinsicWidth&&hasIntrinsicHeight?[intrinsicWidth,intrinsicHeight]:hasIntrinsicProportion||hasIntrinsicDimensions?hasIntrinsicDimensions&&hasIntrinsicProportion?[hasIntrinsicWidth?intrinsicWidth:intrinsicHeight*intrinsicProportion,hasIntrinsicHeight?intrinsicHeight:intrinsicWidth/intrinsicProportion]:[hasIntrinsicWidth?intrinsicWidth:bounds.width,hasIntrinsicHeight?intrinsicHeight:bounds.height]:[bounds.width,bounds.height];if(hasIntrinsicProportion){var width_3=0,height_3=0;return isLengthPercentage(first)?width_3=getAbsoluteValue(first,bounds.width):isLengthPercentage(second)&&(height_3=getAbsoluteValue(second,bounds.height)),isAuto(first)?width_3=height_3*intrinsicProportion:second&&!isAuto(second)||(height_3=width_3/intrinsicProportion),[width_3,height_3]}var width=null,height=null;if(isLengthPercentage(first)?width=getAbsoluteValue(first,bounds.width):second&&isLengthPercentage(second)&&(height=getAbsoluteValue(second,bounds.height)),null===width||second&&!isAuto(second)||(height=hasIntrinsicWidth&&hasIntrinsicHeight?width/intrinsicWidth*intrinsicHeight:bounds.height),null!==height&&isAuto(first)&&(width=hasIntrinsicWidth&&hasIntrinsicHeight?height/intrinsicHeight*intrinsicWidth:bounds.width),null!==width&&null!==height)return[width,height];throw new Error("Unable to calculate background-size for element")},getBackgroundValueForIndex=function(values,index){var value=values[index];return void 0===value?values[0]:value},calculateBackgroundRepeatPath=function(repeat,_a,_b,backgroundPositioningArea,backgroundPaintingArea){var x=_a[0],y=_a[1],width=_b[0],height=_b[1];switch(repeat){case BACKGROUND_REPEAT.REPEAT_X:return[new Vector(Math.round(backgroundPositioningArea.left),Math.round(backgroundPositioningArea.top+y)),new Vector(Math.round(backgroundPositioningArea.left+backgroundPositioningArea.width),Math.round(backgroundPositioningArea.top+y)),new Vector(Math.round(backgroundPositioningArea.left+backgroundPositioningArea.width),Math.round(height+backgroundPositioningArea.top+y)),new Vector(Math.round(backgroundPositioningArea.left),Math.round(height+backgroundPositioningArea.top+y))];case BACKGROUND_REPEAT.REPEAT_Y:return[new Vector(Math.round(backgroundPositioningArea.left+x),Math.round(backgroundPositioningArea.top)),new Vector(Math.round(backgroundPositioningArea.left+x+width),Math.round(backgroundPositioningArea.top)),new Vector(Math.round(backgroundPositioningArea.left+x+width),Math.round(backgroundPositioningArea.height+backgroundPositioningArea.top)),new Vector(Math.round(backgroundPositioningArea.left+x),Math.round(backgroundPositioningArea.height+backgroundPositioningArea.top))];case BACKGROUND_REPEAT.NO_REPEAT:return[new Vector(Math.round(backgroundPositioningArea.left+x),Math.round(backgroundPositioningArea.top+y)),new Vector(Math.round(backgroundPositioningArea.left+x+width),Math.round(backgroundPositioningArea.top+y)),new Vector(Math.round(backgroundPositioningArea.left+x+width),Math.round(backgroundPositioningArea.top+y+height)),new Vector(Math.round(backgroundPositioningArea.left+x),Math.round(backgroundPositioningArea.top+y+height))];default:return[new Vector(Math.round(backgroundPaintingArea.left),Math.round(backgroundPaintingArea.top)),new Vector(Math.round(backgroundPaintingArea.left+backgroundPaintingArea.width),Math.round(backgroundPaintingArea.top)),new Vector(Math.round(backgroundPaintingArea.left+backgroundPaintingArea.width),Math.round(backgroundPaintingArea.height+backgroundPaintingArea.top)),new Vector(Math.round(backgroundPaintingArea.left),Math.round(backgroundPaintingArea.height+backgroundPaintingArea.top))]}},FontMetrics=function(){function FontMetrics(document){this._data={},this._document=document}return FontMetrics.prototype.parseMetrics=function(fontFamily,fontSize){var container=this._document.createElement("div"),img=this._document.createElement("img"),span=this._document.createElement("span"),body=this._document.body;container.style.visibility="hidden",container.style.fontFamily=fontFamily,container.style.fontSize=fontSize,container.style.margin="0",container.style.padding="0",body.appendChild(container),img.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",img.width=1,img.height=1,img.style.margin="0",img.style.padding="0",img.style.verticalAlign="baseline",span.style.fontFamily=fontFamily,span.style.fontSize=fontSize,span.style.margin="0",span.style.padding="0",span.appendChild(this._document.createTextNode("Hidden Text")),container.appendChild(span),container.appendChild(img);var baseline=img.offsetTop-span.offsetTop+2;container.removeChild(span),container.appendChild(this._document.createTextNode("Hidden Text")),container.style.lineHeight="normal",img.style.verticalAlign="super";var middle=img.offsetTop-container.offsetTop+2;return body.removeChild(container),{baseline:baseline,middle:middle}},FontMetrics.prototype.getMetrics=function(fontFamily,fontSize){var key=fontFamily+" "+fontSize;return void 0===this._data[key]&&(this._data[key]=this.parseMetrics(fontFamily,fontSize)),this._data[key]},FontMetrics}(),CanvasRenderer=function(){function CanvasRenderer(options){this._activeEffects=[],this.canvas=options.canvas?options.canvas:document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),this.options=options,this.canvas.width=Math.floor(options.width*options.scale),this.canvas.height=Math.floor(options.height*options.scale),this.canvas.style.width=options.width+"px",this.canvas.style.height=options.height+"px",this.fontMetrics=new FontMetrics(document),this.ctx.scale(this.options.scale,this.options.scale),this.ctx.translate(-options.x+options.scrollX,-options.y+options.scrollY),this.ctx.textBaseline="bottom",this._activeEffects=[],Logger.getInstance(options.id).debug("Canvas renderer initialized ("+options.width+"x"+options.height+" at "+options.x+","+options.y+") with scale "+options.scale)}return CanvasRenderer.prototype.applyEffects=function(effects,target){for(var _this=this;this._activeEffects.length;)this.popEffect();effects.filter(function(effect){return 0!=(effect.target&target)}).forEach(function(effect){return _this.applyEffect(effect)})},CanvasRenderer.prototype.applyEffect=function(effect){this.ctx.save(),0===effect.type&&(this.ctx.translate(effect.offsetX,effect.offsetY),this.ctx.transform(effect.matrix[0],effect.matrix[1],effect.matrix[2],effect.matrix[3],effect.matrix[4],effect.matrix[5]),this.ctx.translate(-effect.offsetX,-effect.offsetY)),1===effect.type&&(this.path(effect.path),this.ctx.clip()),this._activeEffects.push(effect)},CanvasRenderer.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},CanvasRenderer.prototype.renderStack=function(stack){return __awaiter(this,void 0,void 0,function(){var styles;return __generator(this,function(_a){switch(_a.label){case 0:return(styles=stack.element.container.styles).isVisible()?(this.ctx.globalAlpha=styles.opacity,[4,this.renderStackContent(stack)]):[3,2];case 1:_a.sent(),_a.label=2;case 2:return[2]}})})},CanvasRenderer.prototype.renderNode=function(paint){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(_a){switch(_a.label){case 0:return paint.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(paint)]:[3,3];case 1:return _a.sent(),[4,this.renderNodeContent(paint)];case 2:_a.sent(),_a.label=3;case 3:return[2]}})})},CanvasRenderer.prototype.renderTextWithLetterSpacing=function(text,letterSpacing){var _this=this;0===letterSpacing?this.ctx.fillText(text.text,text.bounds.left,text.bounds.top+text.bounds.height):toCodePoints(text.text).map(function(i){return fromCodePoint(i)}).reduce(function(left,letter){return _this.ctx.fillText(letter,left,text.bounds.top+text.bounds.height),left+_this.ctx.measureText(letter).width},text.bounds.left)},CanvasRenderer.prototype.createFontStyle=function(styles){var fontVariant=styles.fontVariant.filter(function(variant){return"normal"===variant||"small-caps"===variant}).join(""),fontFamily=styles.fontFamily.join(", "),fontSize=isDimensionToken(styles.fontSize)?""+styles.fontSize.number+styles.fontSize.unit:styles.fontSize.number+"px";return[[styles.fontStyle,fontVariant,styles.fontWeight,fontSize,fontFamily].join(" "),fontFamily,fontSize]},CanvasRenderer.prototype.renderTextNode=function(text,styles){return __awaiter(this,void 0,void 0,function(){var _a,font,fontFamily,fontSize,_this=this;return __generator(this,function(_b){return _a=this.createFontStyle(styles),font=_a[0],fontFamily=_a[1],fontSize=_a[2],this.ctx.font=font,text.textBounds.forEach(function(text){_this.ctx.fillStyle=asString(styles.color),_this.renderTextWithLetterSpacing(text,styles.letterSpacing);var textShadows=styles.textShadow;textShadows.length&&text.text.trim().length&&(textShadows.slice(0).reverse().forEach(function(textShadow){_this.ctx.shadowColor=asString(textShadow.color),_this.ctx.shadowOffsetX=textShadow.offsetX.number*_this.options.scale,_this.ctx.shadowOffsetY=textShadow.offsetY.number*_this.options.scale,_this.ctx.shadowBlur=textShadow.blur.number,_this.ctx.fillText(text.text,text.bounds.left,text.bounds.top+text.bounds.height)}),_this.ctx.shadowColor="",_this.ctx.shadowOffsetX=0,_this.ctx.shadowOffsetY=0,_this.ctx.shadowBlur=0),styles.textDecorationLine.length&&(_this.ctx.fillStyle=asString(styles.textDecorationColor||styles.color),styles.textDecorationLine.forEach(function(textDecorationLine){switch(textDecorationLine){case 1:var baseline=_this.fontMetrics.getMetrics(fontFamily,fontSize).baseline;_this.ctx.fillRect(text.bounds.left,Math.round(text.bounds.top+baseline),text.bounds.width,1);break;case 2:_this.ctx.fillRect(text.bounds.left,Math.round(text.bounds.top),text.bounds.width,1);break;case 3:var middle=_this.fontMetrics.getMetrics(fontFamily,fontSize).middle;_this.ctx.fillRect(text.bounds.left,Math.ceil(text.bounds.top+middle),text.bounds.width,1)}}))}),[2]})})},CanvasRenderer.prototype.renderReplacedElement=function(container,curves,image){var box,path;image&&0<container.intrinsicWidth&&0<container.intrinsicHeight&&(box=contentBox(container),path=calculatePaddingBoxPath(curves),this.path(path),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(image,0,0,container.intrinsicWidth,container.intrinsicHeight,box.left,box.top,box.width,box.height),this.ctx.restore())},CanvasRenderer.prototype.renderNodeContent=function(paint){return __awaiter(this,void 0,void 0,function(){var container,curves,styles,_i,_a,child,canvas,size,x,textBounds,img,image,url,bounds;return __generator(this,function(_b){switch(_b.label){case 0:this.applyEffects(paint.effects,4),container=paint.container,curves=paint.curves,styles=container.styles,_i=0,_a=container.textNodes,_b.label=1;case 1:return _i<_a.length?(child=_a[_i],[4,this.renderTextNode(child,styles)]):[3,4];case 2:_b.sent(),_b.label=3;case 3:return _i++,[3,1];case 4:if(!(container instanceof ImageElementContainer))return[3,8];_b.label=5;case 5:return _b.trys.push([5,7,,8]),[4,this.options.cache.match(container.src)];case 6:return image=_b.sent(),this.renderReplacedElement(container,curves,image),[3,8];case 7:return _b.sent(),Logger.getInstance(this.options.id).error("Error loading image "+container.src),[3,8];case 8:if(container instanceof CanvasElementContainer&&this.renderReplacedElement(container,curves,container.canvas),!(container instanceof SVGElementContainer))return[3,12];_b.label=9;case 9:return _b.trys.push([9,11,,12]),[4,this.options.cache.match(container.svg)];case 10:return image=_b.sent(),this.renderReplacedElement(container,curves,image),[3,12];case 11:return _b.sent(),Logger.getInstance(this.options.id).error("Error loading svg "+container.svg.substring(0,255)),[3,12];case 12:return container instanceof IFrameElementContainer&&container.tree?[4,new CanvasRenderer({id:this.options.id,scale:this.options.scale,backgroundColor:container.backgroundColor,x:0,y:0,scrollX:0,scrollY:0,width:container.width,height:container.height,cache:this.options.cache,windowWidth:container.width,windowHeight:container.height}).render(container.tree)]:[3,14];case 13:canvas=_b.sent(),container.width&&container.height&&this.ctx.drawImage(canvas,0,0,container.width,container.height,container.bounds.left,container.bounds.top,container.bounds.width,container.bounds.height),_b.label=14;case 14:if(container instanceof InputElementContainer&&(size=Math.min(container.bounds.width,container.bounds.height),"checkbox"===container.type?container.checked&&(this.ctx.save(),this.path([new Vector(container.bounds.left+.39363*size,container.bounds.top+.79*size),new Vector(container.bounds.left+.16*size,container.bounds.top+.5549*size),new Vector(container.bounds.left+.27347*size,container.bounds.top+.44071*size),new Vector(container.bounds.left+.39694*size,container.bounds.top+.5649*size),new Vector(container.bounds.left+.72983*size,container.bounds.top+.23*size),new Vector(container.bounds.left+.84*size,container.bounds.top+.34085*size),new Vector(container.bounds.left+.39363*size,container.bounds.top+.79*size)]),this.ctx.fillStyle=asString(707406591),this.ctx.fill(),this.ctx.restore()):"radio"===container.type&&container.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(container.bounds.left+size/2,container.bounds.top+size/2,size/4,0,2*Math.PI,!0),this.ctx.fillStyle=asString(707406591),this.ctx.fill(),this.ctx.restore())),isTextInputElement(container)&&container.value.length){switch(this.ctx.font=this.createFontStyle(styles)[0],this.ctx.fillStyle=asString(styles.color),this.ctx.textBaseline="middle",this.ctx.textAlign=canvasTextAlign(container.styles.textAlign),bounds=contentBox(container),x=0,container.styles.textAlign){case TEXT_ALIGN.CENTER:x+=bounds.width/2;break;case TEXT_ALIGN.RIGHT:x+=bounds.width}textBounds=bounds.add(x,0,0,-bounds.height/2+1),this.ctx.save(),this.path([new Vector(bounds.left,bounds.top),new Vector(bounds.left+bounds.width,bounds.top),new Vector(bounds.left+bounds.width,bounds.top+bounds.height),new Vector(bounds.left,bounds.top+bounds.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new TextBounds(container.value,textBounds),styles.letterSpacing),this.ctx.restore(),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"}if(0==(2048&container.styles.display))return[3,20];if(null===container.styles.listStyleImage)return[3,19];if((img=container.styles.listStyleImage).type!==CSSImageType.URL)return[3,18];image=void 0,url=img.url,_b.label=15;case 15:return _b.trys.push([15,17,,18]),[4,this.options.cache.match(url)];case 16:return image=_b.sent(),this.ctx.drawImage(image,container.bounds.left-(image.width+10),container.bounds.top),[3,18];case 17:return _b.sent(),Logger.getInstance(this.options.id).error("Error loading list-style-image "+url),[3,18];case 18:return[3,20];case 19:paint.listValue&&container.styles.listStyleType!==LIST_STYLE_TYPE.NONE&&(this.ctx.font=this.createFontStyle(styles)[0],this.ctx.fillStyle=asString(styles.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",bounds=new Bounds(container.bounds.left,container.bounds.top+getAbsoluteValue(container.styles.paddingTop,container.bounds.width),container.bounds.width,(token=styles.lineHeight,fontSize=styles.fontSize.number,(isIdentToken(token)&&"normal"===token.value?1.2*fontSize:token.type===TokenType.NUMBER_TOKEN?fontSize*token.number:isLengthPercentage(token)?getAbsoluteValue(token,fontSize):fontSize)/2+1)),this.renderTextWithLetterSpacing(new TextBounds(paint.listValue,bounds),styles.letterSpacing),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),_b.label=20;case 20:return[2]}var token,fontSize})})},CanvasRenderer.prototype.renderStackContent=function(stack){return __awaiter(this,void 0,void 0,function(){var _i,_a,_b,_c,_d,_e,_f,_g,_h,_j,_k,_l,_m,_o,child;return __generator(this,function(_p){switch(_p.label){case 0:return[4,this.renderNodeBackgroundAndBorders(stack.element)];case 1:_p.sent(),_i=0,_a=stack.negativeZIndex,_p.label=2;case 2:return _i<_a.length?(child=_a[_i],[4,this.renderStack(child)]):[3,5];case 3:_p.sent(),_p.label=4;case 4:return _i++,[3,2];case 5:return[4,this.renderNodeContent(stack.element)];case 6:_p.sent(),_b=0,_c=stack.nonInlineLevel,_p.label=7;case 7:return _b<_c.length?(child=_c[_b],[4,this.renderNode(child)]):[3,10];case 8:_p.sent(),_p.label=9;case 9:return _b++,[3,7];case 10:_d=0,_e=stack.nonPositionedFloats,_p.label=11;case 11:return _d<_e.length?(child=_e[_d],[4,this.renderStack(child)]):[3,14];case 12:_p.sent(),_p.label=13;case 13:return _d++,[3,11];case 14:_f=0,_g=stack.nonPositionedInlineLevel,_p.label=15;case 15:return _f<_g.length?(child=_g[_f],[4,this.renderStack(child)]):[3,18];case 16:_p.sent(),_p.label=17;case 17:return _f++,[3,15];case 18:_h=0,_j=stack.inlineLevel,_p.label=19;case 19:return _h<_j.length?(child=_j[_h],[4,this.renderNode(child)]):[3,22];case 20:_p.sent(),_p.label=21;case 21:return _h++,[3,19];case 22:_k=0,_l=stack.zeroOrAutoZIndexOrTransformedOrOpacity,_p.label=23;case 23:return _k<_l.length?(child=_l[_k],[4,this.renderStack(child)]):[3,26];case 24:_p.sent(),_p.label=25;case 25:return _k++,[3,23];case 26:_m=0,_o=stack.positiveZIndex,_p.label=27;case 27:return _m<_o.length?(child=_o[_m],[4,this.renderStack(child)]):[3,30];case 28:_p.sent(),_p.label=29;case 29:return _m++,[3,27];case 30:return[2]}})})},CanvasRenderer.prototype.mask=function(paths){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(paths.slice(0).reverse()),this.ctx.closePath()},CanvasRenderer.prototype.path=function(paths){this.ctx.beginPath(),this.formatPath(paths),this.ctx.closePath()},CanvasRenderer.prototype.formatPath=function(paths){var _this=this;paths.forEach(function(point,index){var start=isBezierCurve(point)?point.start:point;0===index?_this.ctx.moveTo(start.x,start.y):_this.ctx.lineTo(start.x,start.y),isBezierCurve(point)&&_this.ctx.bezierCurveTo(point.startControl.x,point.startControl.y,point.endControl.x,point.endControl.y,point.end.x,point.end.y)})},CanvasRenderer.prototype.renderRepeat=function(path,pattern,offsetX,offsetY){this.path(path),this.ctx.fillStyle=pattern,this.ctx.translate(offsetX,offsetY),this.ctx.fill(),this.ctx.translate(-offsetX,-offsetY)},CanvasRenderer.prototype.resizeImage=function(image,width,height){if(image.width===width&&image.height===height)return image;var canvas=this.canvas.ownerDocument.createElement("canvas");return canvas.width=width,canvas.height=height,canvas.getContext("2d").drawImage(image,0,0,image.width,image.height,0,0,width,height),canvas},CanvasRenderer.prototype.renderBackgroundImage=function(container){return __awaiter(this,void 0,void 0,function(){var index,_loop_1,this_1,_i,_a,backgroundImage;return __generator(this,function(_b){switch(_b.label){case 0:index=container.styles.backgroundImage.length-1,_loop_1=function(backgroundImage){var image,url,_a,_b,_c,lineLength,x0,x1,y0,y1,canvas,ctx,gradient_1,pattern,_d,path,left,top_1,width,height,position,x,y,_e,rx,ry,radialGradient_1,midX,midY,f,invF;return __generator(this,function(_f){switch(_f.label){case 0:if(backgroundImage.type!==CSSImageType.URL)return[3,5];image=void 0,url=backgroundImage.url,_f.label=1;case 1:return _f.trys.push([1,3,,4]),[4,this_1.options.cache.match(url)];case 2:return image=_f.sent(),[3,4];case 3:return _f.sent(),Logger.getInstance(this_1.options.id).error("Error loading background-image "+url),[3,4];case 4:return image&&(_a=calculateBackgroundRendering(container,index,[image.width,image.height,image.width/image.height]),path=_a[0],x=_a[1],y=_a[2],width=_a[3],height=_a[4],pattern=this_1.ctx.createPattern(this_1.resizeImage(image,width,height),"repeat"),this_1.renderRepeat(path,pattern,x,y)),[3,6];case 5:backgroundImage.type===CSSImageType.LINEAR_GRADIENT?(_b=calculateBackgroundRendering(container,index,[null,null,null]),path=_b[0],x=_b[1],y=_b[2],width=_b[3],height=_b[4],_c=calculateGradientDirection(backgroundImage.angle,width,height),lineLength=_c[0],x0=_c[1],x1=_c[2],y0=_c[3],y1=_c[4],(canvas=document.createElement("canvas")).width=width,canvas.height=height,ctx=canvas.getContext("2d"),gradient_1=ctx.createLinearGradient(x0,y0,x1,y1),processColorStops(backgroundImage.stops,lineLength).forEach(function(colorStop){return gradient_1.addColorStop(colorStop.stop,asString(colorStop.color))}),ctx.fillStyle=gradient_1,ctx.fillRect(0,0,width,height),pattern=this_1.ctx.createPattern(canvas,"repeat"),this_1.renderRepeat(path,pattern,x,y)):function(background){return background.type===CSSImageType.RADIAL_GRADIENT}(backgroundImage)&&(_d=calculateBackgroundRendering(container,index,[null,null,null]),path=_d[0],left=_d[1],top_1=_d[2],width=_d[3],height=_d[4],position=0===backgroundImage.position.length?[FIFTY_PERCENT]:backgroundImage.position,x=getAbsoluteValue(position[0],width),y=getAbsoluteValue(position[position.length-1],height),rx=(_e=function(gradient,x,y,width,height){var _a,c,_b,cx,cy,rx=0,ry=0;switch(gradient.size){case CSSRadialExtent.CLOSEST_SIDE:gradient.shape===CSSRadialShape.CIRCLE?rx=ry=Math.min(Math.abs(x),Math.abs(x-width),Math.abs(y),Math.abs(y-height)):gradient.shape===CSSRadialShape.ELLIPSE&&(rx=Math.min(Math.abs(x),Math.abs(x-width)),ry=Math.min(Math.abs(y),Math.abs(y-height)));break;case CSSRadialExtent.CLOSEST_CORNER:gradient.shape===CSSRadialShape.CIRCLE?rx=ry=Math.min(distance(x,y),distance(x,y-height),distance(x-width,y),distance(x-width,y-height)):gradient.shape===CSSRadialShape.ELLIPSE&&(c=Math.min(Math.abs(y),Math.abs(y-height))/Math.min(Math.abs(x),Math.abs(x-width)),cx=(_a=findCorner(width,height,x,y,!0))[0],cy=_a[1],ry=c*(rx=distance(cx-x,(cy-y)/c)));break;case CSSRadialExtent.FARTHEST_SIDE:gradient.shape===CSSRadialShape.CIRCLE?rx=ry=Math.max(Math.abs(x),Math.abs(x-width),Math.abs(y),Math.abs(y-height)):gradient.shape===CSSRadialShape.ELLIPSE&&(rx=Math.max(Math.abs(x),Math.abs(x-width)),ry=Math.max(Math.abs(y),Math.abs(y-height)));break;case CSSRadialExtent.FARTHEST_CORNER:gradient.shape===CSSRadialShape.CIRCLE?rx=ry=Math.max(distance(x,y),distance(x,y-height),distance(x-width,y),distance(x-width,y-height)):gradient.shape===CSSRadialShape.ELLIPSE&&(c=Math.max(Math.abs(y),Math.abs(y-height))/Math.max(Math.abs(x),Math.abs(x-width)),cx=(_b=findCorner(width,height,x,y,!1))[0],cy=_b[1],ry=c*(rx=distance(cx-x,(cy-y)/c)))}return Array.isArray(gradient.size)&&(rx=getAbsoluteValue(gradient.size[0],width),ry=2===gradient.size.length?getAbsoluteValue(gradient.size[1],height):rx),[rx,ry]}(backgroundImage,x,y,width,height))[0],ry=_e[1],0<rx&&0<rx&&(radialGradient_1=this_1.ctx.createRadialGradient(left+x,top_1+y,0,left+x,top_1+y,rx),processColorStops(backgroundImage.stops,2*rx).forEach(function(colorStop){return radialGradient_1.addColorStop(colorStop.stop,asString(colorStop.color))}),this_1.path(path),this_1.ctx.fillStyle=radialGradient_1,rx!==ry?(midX=container.bounds.left+.5*container.bounds.width,midY=container.bounds.top+.5*container.bounds.height,invF=1/(f=ry/rx),this_1.ctx.save(),this_1.ctx.translate(midX,midY),this_1.ctx.transform(1,0,0,f,0,0),this_1.ctx.translate(-midX,-midY),this_1.ctx.fillRect(left,invF*(top_1-midY)+midY,width,height*invF),this_1.ctx.restore()):this_1.ctx.fill())),_f.label=6;case 6:return index--,[2]}})},this_1=this,_i=0,_a=container.styles.backgroundImage.slice(0).reverse(),_b.label=1;case 1:return _i<_a.length?(backgroundImage=_a[_i],[5,_loop_1(backgroundImage)]):[3,4];case 2:_b.sent(),_b.label=3;case 3:return _i++,[3,1];case 4:return[2]}})})},CanvasRenderer.prototype.renderBorder=function(color,side,curvePoints){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(_a){return this.path(function(curves,borderSide){switch(borderSide){case 0:return createPathFromCurves(curves.topLeftBorderBox,curves.topLeftPaddingBox,curves.topRightBorderBox,curves.topRightPaddingBox);case 1:return createPathFromCurves(curves.topRightBorderBox,curves.topRightPaddingBox,curves.bottomRightBorderBox,curves.bottomRightPaddingBox);case 2:return createPathFromCurves(curves.bottomRightBorderBox,curves.bottomRightPaddingBox,curves.bottomLeftBorderBox,curves.bottomLeftPaddingBox);case 3:default:return createPathFromCurves(curves.bottomLeftBorderBox,curves.bottomLeftPaddingBox,curves.topLeftBorderBox,curves.topLeftPaddingBox)}}(curvePoints,side)),this.ctx.fillStyle=asString(color),this.ctx.fill(),[2]})})},CanvasRenderer.prototype.renderNodeBackgroundAndBorders=function(paint){return __awaiter(this,void 0,void 0,function(){var styles,hasBackground,borders,backgroundPaintingArea,side,_i,borders_1,border,_this=this;return __generator(this,function(_a){switch(_a.label){case 0:return(this.applyEffects(paint.effects,2),styles=paint.container.styles,hasBackground=!(0==(255&styles.backgroundColor))||styles.backgroundImage.length,borders=[{style:styles.borderTopStyle,color:styles.borderTopColor},{style:styles.borderRightStyle,color:styles.borderRightColor},{style:styles.borderBottomStyle,color:styles.borderBottomColor},{style:styles.borderLeftStyle,color:styles.borderLeftColor}],backgroundPaintingArea=calculateBackgroundCurvedPaintingArea(getBackgroundValueForIndex(styles.backgroundClip,0),paint.curves),hasBackground||styles.boxShadow.length)?(this.ctx.save(),this.path(backgroundPaintingArea),this.ctx.clip(),0!=(255&styles.backgroundColor)&&(this.ctx.fillStyle=asString(styles.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(paint.container)]):[3,2];case 1:_a.sent(),this.ctx.restore(),styles.boxShadow.slice(0).reverse().forEach(function(shadow){_this.ctx.save();var path,deltaX,deltaY,deltaW,deltaH,borderBoxArea=calculateBorderBoxPath(paint.curves),maskOffset=shadow.inset?0:1e4,shadowPaintingArea=(path=borderBoxArea,deltaX=-maskOffset+(shadow.inset?1:-1)*shadow.spread.number,deltaY=(shadow.inset?1:-1)*shadow.spread.number,deltaW=shadow.spread.number*(shadow.inset?-2:2),deltaH=shadow.spread.number*(shadow.inset?-2:2),path.map(function(point,index){switch(index){case 0:return point.add(deltaX,deltaY);case 1:return point.add(deltaX+deltaW,deltaY);case 2:return point.add(deltaX+deltaW,deltaY+deltaH);case 3:return point.add(deltaX,deltaY+deltaH)}return point}));shadow.inset?(_this.path(borderBoxArea),_this.ctx.clip(),_this.mask(shadowPaintingArea)):(_this.mask(borderBoxArea),_this.ctx.clip(),_this.path(shadowPaintingArea)),_this.ctx.shadowOffsetX=shadow.offsetX.number+maskOffset,_this.ctx.shadowOffsetY=shadow.offsetY.number,_this.ctx.shadowColor=asString(shadow.color),_this.ctx.shadowBlur=shadow.blur.number,_this.ctx.fillStyle=shadow.inset?asString(shadow.color):"rgba(0,0,0,1)",_this.ctx.fill(),_this.ctx.restore()}),_a.label=2;case 2:_i=side=0,borders_1=borders,_a.label=3;case 3:return _i<borders_1.length?(border=borders_1[_i]).style===BORDER_STYLE.NONE||0==(255&border.color)?[3,5]:[4,this.renderBorder(border.color,side++,paint.curves)]:[3,6];case 4:_a.sent(),_a.label=5;case 5:return _i++,[3,3];case 6:return[2]}})})},CanvasRenderer.prototype.render=function(element){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(_a){switch(_a.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=asString(this.options.backgroundColor),this.ctx.fillRect(this.options.x-this.options.scrollX,this.options.y-this.options.scrollY,this.options.width,this.options.height)),paintContainer=new ElementPaint(element,[]),root=new StackingContext(paintContainer),parseStackTree(paintContainer,root,root,listItems=[]),processListItems(paintContainer.container,listItems),[4,this.renderStack(root)];case 1:return _a.sent(),this.applyEffects([],2),[2,this.canvas]}var paintContainer,root,listItems})})},CanvasRenderer}(),isTextInputElement=function(container){return container instanceof TextareaElementContainer||(container instanceof SelectElementContainer||container instanceof InputElementContainer&&"radio"!==container.type&&"checkbox"!==container.type)},calculateBackgroundCurvedPaintingArea=function(clip,curves){switch(clip){case BACKGROUND_CLIP.BORDER_BOX:return calculateBorderBoxPath(curves);case BACKGROUND_CLIP.CONTENT_BOX:return function(curves){return[curves.topLeftContentBox,curves.topRightContentBox,curves.bottomRightContentBox,curves.bottomLeftContentBox]}(curves);case BACKGROUND_CLIP.PADDING_BOX:default:return calculatePaddingBoxPath(curves)}},canvasTextAlign=function(textAlign){switch(textAlign){case TEXT_ALIGN.CENTER:return"center";case TEXT_ALIGN.RIGHT:return"right";case TEXT_ALIGN.LEFT:default:return"left"}},ForeignObjectRenderer=function(){function ForeignObjectRenderer(options){this.canvas=options.canvas?options.canvas:document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),this.options=options,this.canvas.width=Math.floor(options.width*options.scale),this.canvas.height=Math.floor(options.height*options.scale),this.canvas.style.width=options.width+"px",this.canvas.style.height=options.height+"px",this.ctx.scale(this.options.scale,this.options.scale),this.ctx.translate(-options.x+options.scrollX,-options.y+options.scrollY),Logger.getInstance(options.id).debug("EXPERIMENTAL ForeignObject renderer initialized ("+options.width+"x"+options.height+" at "+options.x+","+options.y+") with scale "+options.scale)}return ForeignObjectRenderer.prototype.render=function(element){return __awaiter(this,void 0,void 0,function(){var svg,img;return __generator(this,function(_a){switch(_a.label){case 0:return svg=createForeignObjectSVG(Math.max(this.options.windowWidth,this.options.width)*this.options.scale,Math.max(this.options.windowHeight,this.options.height)*this.options.scale,this.options.scrollX*this.options.scale,this.options.scrollY*this.options.scale,element),[4,loadSerializedSVG$1(svg)];case 1:return img=_a.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=asString(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(img,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},ForeignObjectRenderer}(),loadSerializedSVG$1=function(svg){return new Promise(function(resolve,reject){var img=new Image;img.onload=function(){resolve(img)},img.onerror=reject,img.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent((new XMLSerializer).serializeToString(svg))})};CacheStorage.setContext(window);var renderElement=function(element,opts){return __awaiter(void 0,void 0,void 0,function(){var ownerDocument,defaultView,instanceName,_a,width,height,left,top,resourceOptions,defaultOptions,options,windowBounds,documentCloner,clonedElement,container,documentBackgroundColor,bodyBackgroundColor,bgColor,defaultBackgroundColor,backgroundColor,renderOptions,canvas,root;return __generator(this,function(_b){switch(_b.label){case 0:if(!(ownerDocument=element.ownerDocument))throw new Error("Element is not attached to a Document");if(!(defaultView=ownerDocument.defaultView))throw new Error("Document is not attached to a Window");return instanceName=(Math.round(1e3*Math.random())+Date.now()).toString(16),_a=isBodyElement(element)||"HTML"===element.tagName?function(document){var body=document.body,documentElement=document.documentElement;if(!body||!documentElement)throw new Error("Unable to get document size");var width=Math.max(Math.max(body.scrollWidth,documentElement.scrollWidth),Math.max(body.offsetWidth,documentElement.offsetWidth),Math.max(body.clientWidth,documentElement.clientWidth)),height=Math.max(Math.max(body.scrollHeight,documentElement.scrollHeight),Math.max(body.offsetHeight,documentElement.offsetHeight),Math.max(body.clientHeight,documentElement.clientHeight));return new Bounds(0,0,width,height)}(ownerDocument):parseBounds(element),width=_a.width,height=_a.height,left=_a.left,top=_a.top,resourceOptions=__assign({},{allowTaint:!1,imageTimeout:15e3,proxy:void 0,useCORS:!1},opts),defaultOptions={backgroundColor:"#ffffff",cache:opts.cache?opts.cache:CacheStorage.create(instanceName,resourceOptions),logging:!0,removeContainer:!0,foreignObjectRendering:!1,scale:defaultView.devicePixelRatio||1,windowWidth:defaultView.innerWidth,windowHeight:defaultView.innerHeight,scrollX:defaultView.pageXOffset,scrollY:defaultView.pageYOffset,x:left,y:top,width:Math.ceil(width),height:Math.ceil(height),id:instanceName},options=__assign({},defaultOptions,resourceOptions,opts),windowBounds=new Bounds(options.scrollX,options.scrollY,options.windowWidth,options.windowHeight),Logger.create(instanceName),Logger.getInstance(instanceName).debug("Starting document clone"),documentCloner=new DocumentCloner(element,{id:instanceName,onclone:options.onclone,ignoreElements:options.ignoreElements,inlineImages:options.foreignObjectRendering,copyStyles:options.foreignObjectRendering}),(clonedElement=documentCloner.clonedReferenceElement)?[4,documentCloner.toIFrame(ownerDocument,windowBounds)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return(container=_b.sent(),documentBackgroundColor=ownerDocument.documentElement?parseColor$1(getComputedStyle(ownerDocument.documentElement).backgroundColor):COLORS.TRANSPARENT,bodyBackgroundColor=ownerDocument.body?parseColor$1(getComputedStyle(ownerDocument.body).backgroundColor):COLORS.TRANSPARENT,bgColor=opts.backgroundColor,defaultBackgroundColor="string"==typeof bgColor?parseColor$1(bgColor):4294967295,backgroundColor=element===ownerDocument.documentElement?0==(255&documentBackgroundColor)?0==(255&bodyBackgroundColor)?defaultBackgroundColor:bodyBackgroundColor:documentBackgroundColor:defaultBackgroundColor,renderOptions={id:instanceName,cache:options.cache,backgroundColor:backgroundColor,scale:options.scale,x:options.x,y:options.y,scrollX:options.scrollX,scrollY:options.scrollY,width:options.width,height:options.height,windowWidth:options.windowWidth,windowHeight:options.windowHeight},options.foreignObjectRendering)?(Logger.getInstance(instanceName).debug("Document cloned, using foreign object rendering"),[4,new ForeignObjectRenderer(renderOptions).render(clonedElement)]):[3,3];case 2:return canvas=_b.sent(),[3,5];case 3:return Logger.getInstance(instanceName).debug("Document cloned, using computed rendering"),CacheStorage.attachInstance(options.cache),Logger.getInstance(instanceName).debug("Starting DOM parsing"),root=parseTree(clonedElement),CacheStorage.detachInstance(),backgroundColor===root.styles.backgroundColor&&(root.styles.backgroundColor=COLORS.TRANSPARENT),Logger.getInstance(instanceName).debug("Starting renderer"),[4,new CanvasRenderer(renderOptions).render(root)];case 4:canvas=_b.sent(),_b.label=5;case 5:return!0===options.removeContainer&&(cleanContainer(container)||Logger.getInstance(instanceName).error("Cannot detach cloned iframe as it is not in the DOM anymore")),Logger.getInstance(instanceName).debug("Finished rendering"),Logger.destroy(instanceName),CacheStorage.destroy(instanceName),[2,canvas]}})})},cleanContainer=function(container){return!!container.parentNode&&(container.parentNode.removeChild(container),!0)};return function(element,options){return void 0===options&&(options={}),renderElement(element,options)}});var saveAs=saveAs||function(view){"use strict";if(!(void 0===view||"undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var doc=view.document,get_URL=function(){return view.URL||view.webkitURL||view},save_link=doc.createElementNS("http://www.w3.org/1999/xhtml","a"),can_use_save_link="download"in save_link,is_safari=/constructor/i.test(view.HTMLElement)||view.safari,is_chrome_ios=/CriOS\/[\d]+/.test(navigator.userAgent),revoke=function(file){setTimeout(function(){"string"==typeof file?get_URL().revokeObjectURL(file):file.remove()},4e4)},dispatch=function(filesaver,event_types,event){for(var i=(event_types=[].concat(event_types)).length;i--;){var listener=filesaver["on"+event_types[i]];if("function"==typeof listener)try{listener.call(filesaver,event||filesaver)}catch(ex){!function(ex){(view.setImmediate||view.setTimeout)(function(){throw ex},0)}(ex)}}},auto_bom=function(blob){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(blob.type)?new Blob([String.fromCharCode(65279),blob],{type:blob.type}):blob},FileSaver=function(blob,name,no_auto_bom){no_auto_bom||(blob=auto_bom(blob));function dispatch_all(){dispatch(filesaver,"writestart progress write writeend".split(" "))}var object_url,filesaver=this,force="application/octet-stream"===blob.type;if(filesaver.readyState=filesaver.INIT,can_use_save_link)return object_url=get_URL().createObjectURL(blob),void setTimeout(function(){var node,event;save_link.href=object_url,save_link.download=name,node=save_link,event=new MouseEvent("click"),node.dispatchEvent(event),dispatch_all(),revoke(object_url),filesaver.readyState=filesaver.DONE});!function(){if((is_chrome_ios||force&&is_safari)&&view.FileReader){var reader=new FileReader;return reader.onloadend=function(){var url=is_chrome_ios?reader.result:reader.result.replace(/^data:[^;]*;/,"data:attachment/file;");view.open(url,"_blank")||(view.location.href=url),url=void 0,filesaver.readyState=filesaver.DONE,dispatch_all()},reader.readAsDataURL(blob),filesaver.readyState=filesaver.INIT}object_url=object_url||get_URL().createObjectURL(blob),!force&&view.open(object_url,"_blank")||(view.location.href=object_url),filesaver.readyState=filesaver.DONE,dispatch_all(),revoke(object_url)}()},FS_proto=FileSaver.prototype;return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(blob,name,no_auto_bom){return name=name||blob.name||"download",no_auto_bom||(blob=auto_bom(blob)),navigator.msSaveOrOpenBlob(blob,name)}:(FS_proto.abort=function(){},FS_proto.readyState=FS_proto.INIT=0,FS_proto.WRITING=1,FS_proto.DONE=2,FS_proto.error=FS_proto.onwritestart=FS_proto.onprogress=FS_proto.onwrite=FS_proto.onabort=FS_proto.onerror=FS_proto.onwriteend=null,function(blob,name,no_auto_bom){return new FileSaver(blob,name||blob.name||"download",no_auto_bom)})}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);"undefined"!=typeof module&&module.exports?module.exports.saveAs=saveAs:"undefined"!=typeof define&&null!==define&&null!==define.amd&&define("FileSaver.js",function(){return saveAs}),function(global,factory){"object"==typeof exports&&"undefined"!=typeof module?factory(exports):"function"==typeof define&&define.amd?define(["exports"],factory):factory(global.Cgszrender={})}(this,function(exports){"use strict";function guid(){return idStart++}var idStart=2311,env$1="undefined"==typeof navigator?{browser:{},os:{},node:!0,canvasSupported:!0,svgSupported:!0}:function(ua){var browser={},firefox=ua.match(/Firefox\/([\d.]+)/),ie=ua.match(/MSIE\s([\d.]+)/)||ua.match(/Trident\/.+?rv:(([\d.]+))/),edge=ua.match(/Edge\/([\d.]+)/),weChat=/micromessenger/i.test(ua);firefox&&(browser.firefox=!0,browser.version=firefox[1]);ie&&(browser.ie=!0,browser.version=ie[1]);edge&&(browser.edge=!0,browser.version=edge[1]);weChat&&(browser.weChat=!0);return{browser:browser,os:{},node:!1,canvasSupported:!!document.createElement("canvas").getContext,svgSupported:"undefined"!=typeof SVGRect,touchEventsSupported:"ontouchstart"in window&&!browser.ie&&!browser.edge,pointerEventsSupported:"onpointerdown"in window&&(browser.edge||browser.ie&&11<=browser.version)}}(navigator.userAgent);var BUILTIN_OBJECT={"[object Function]":1,"[object RegExp]":1,"[object Date]":1,"[object Error]":1,"[object CanvasGradient]":1,"[object CanvasPattern]":1,"[object Image]":1,"[object Canvas]":1},TYPED_ARRAY={"[object Int8Array]":1,"[object Uint8Array]":1,"[object Uint8ClampedArray]":1,"[object Int16Array]":1,"[object Uint16Array]":1,"[object Int32Array]":1,"[object Uint32Array]":1,"[object Float32Array]":1,"[object Float64Array]":1},objToString=Object.prototype.toString,arrayProto=Array.prototype,nativeForEach=arrayProto.forEach,nativeFilter=arrayProto.filter,nativeSlice=arrayProto.slice,nativeMap=arrayProto.map,nativeReduce=arrayProto.reduce,methods={};function clone(source){if(null==source||"object"!=typeof source)return source;var result=source,typeStr=objToString.call(source);if("[object Array]"===typeStr){result=[];for(var i=0,len=source.length;i<len;i++)result[i]=clone(source[i])}else if(TYPED_ARRAY[typeStr]){var Ctor=source.constructor;if(source.constructor.from)result=Ctor.from(source);else{result=new Ctor(source.length);for(i=0,len=source.length;i<len;i++)result[i]=clone(source[i])}}else if(!BUILTIN_OBJECT[typeStr]&&!isPrimitive(source)&&!isDom(source))for(var key in result={},source)source.hasOwnProperty(key)&&(result[key]=clone(source[key]));return result}function merge(target,source,overwrite){if(!isObject(source)||!isObject(target))return overwrite?clone(source):target;for(var key in source){var targetProp,sourceProp;source.hasOwnProperty(key)&&(targetProp=target[key],!isObject(sourceProp=source[key])||!isObject(targetProp)||isArray(sourceProp)||isArray(targetProp)||isDom(sourceProp)||isDom(targetProp)||isBuiltInObject(sourceProp)||isBuiltInObject(targetProp)||isPrimitive(sourceProp)||isPrimitive(targetProp)?!overwrite&&key in target||(target[key]=clone(source[key])):merge(targetProp,sourceProp,overwrite))}return target}function extend(target,source){for(var key in source)source.hasOwnProperty(key)&&(target[key]=source[key]);return target}function defaults(target,source,overlay){for(var key in source)source.hasOwnProperty(key)&&(overlay?null!=source[key]:null==target[key])&&(target[key]=source[key]);return target}function createCanvas(){return methods.createCanvas()}var _ctx;function getContext(){return _ctx=_ctx||createCanvas().getContext("2d")}function indexOf(array,value){if(array){if(array.indexOf)return array.indexOf(value);for(var i=0,len=array.length;i<len;i++)if(array[i]===value)return i}return-1}function inherits(clazz,baseClazz){var prop,clazzPrototype=clazz.prototype;function F(){}for(prop in F.prototype=baseClazz.prototype,clazz.prototype=new F,clazzPrototype)clazz.prototype[prop]=clazzPrototype[prop];(clazz.prototype.constructor=clazz).superClass=baseClazz}function mixin(target,source,overlay){defaults(target="prototype"in target?target.prototype:target,source="prototype"in source?source.prototype:source,overlay)}function isArrayLike(data){if(data)return"string"!=typeof data&&"number"==typeof data.length}function each(obj,cb,context){if(obj&&cb)if(obj.forEach&&obj.forEach===nativeForEach)obj.forEach(cb,context);else if(obj.length===+obj.length)for(var i=0,len=obj.length;i<len;i++)cb.call(context,obj[i],i,obj);else for(var key in obj)obj.hasOwnProperty(key)&&cb.call(context,obj[key],key,obj)}function map(obj,cb,context){if(obj&&cb){if(obj.map&&obj.map===nativeMap)return obj.map(cb,context);for(var result=[],i=0,len=obj.length;i<len;i++)result.push(cb.call(context,obj[i],i,obj));return result}}function bind(func,context){var args=nativeSlice.call(arguments,2);return function(){return func.apply(context,args.concat(nativeSlice.call(arguments)))}}function isArray(value){return"[object Array]"===objToString.call(value)}function isFunction(value){return"function"==typeof value}function isString(value){return"[object String]"===objToString.call(value)}function isObject(value){var type=typeof value;return"function"==type||!!value&&"object"==type}function isBuiltInObject(value){return!!BUILTIN_OBJECT[objToString.call(value)]}function isDom(value){return"object"==typeof value&&"number"==typeof value.nodeType&&"object"==typeof value.ownerDocument}function retrieve2(value0,value1){return null!=value0?value0:value1}function retrieve3(value0,value1,value2){return null!=value0?value0:null!=value1?value1:value2}function normalizeCssArray(val){if("number"==typeof val)return[val,val,val,val];var len=val.length;return 2===len?[val[0],val[1],val[0],val[1]]:3===len?[val[0],val[1],val[2],val[1]]:val}methods.createCanvas=function(){return document.createElement("canvas")};var primitiveKey="__ec_primitive__";function isPrimitive(obj){return obj[primitiveKey]}function HashMap(obj){obj&&each(obj,function(value,key){this.set(key,value)},this)}HashMap.prototype={constructor:HashMap,get:function(key){return this["_ec_"+key]},set:function(key,value){return this["_ec_"+key]=value},each:function(cb,context){for(var prefixedKey in void 0!==context&&(cb=bind(cb,context)),this)this.hasOwnProperty(prefixedKey)&&cb(this[prefixedKey],prefixedKey.slice(4))},removeKey:function(key){delete this["_ec_"+key]}};var util=(Object.freeze||Object)({$override:function(name,fn){methods[name]=fn},clone:clone,merge:merge,mergeAll:function(targetAndSources,overwrite){for(var result=targetAndSources[0],i=1,len=targetAndSources.length;i<len;i++)result=merge(result,targetAndSources[i],overwrite);return result},extend:extend,defaults:defaults,createCanvas:createCanvas,getContext:getContext,indexOf:indexOf,inherits:inherits,mixin:mixin,isArrayLike:isArrayLike,each:each,map:map,reduce:function(obj,cb,memo,context){if(obj&&cb){if(obj.reduce&&obj.reduce===nativeReduce)return obj.reduce(cb,memo,context);for(var i=0,len=obj.length;i<len;i++)memo=cb.call(context,memo,obj[i],i,obj);return memo}},filter:function(obj,cb,context){if(obj&&cb){if(obj.filter&&obj.filter===nativeFilter)return obj.filter(cb,context);for(var result=[],i=0,len=obj.length;i<len;i++)cb.call(context,obj[i],i,obj)&&result.push(obj[i]);return result}},find:function(obj,cb,context){if(obj&&cb)for(var i=0,len=obj.length;i<len;i++)if(cb.call(context,obj[i],i,obj))return obj[i]},bind:bind,curry:function(func){var args=nativeSlice.call(arguments,1);return function(){return func.apply(this,args.concat(nativeSlice.call(arguments)))}},isArray:isArray,isFunction:isFunction,isString:isString,isObject:isObject,isBuiltInObject:isBuiltInObject,isDom:isDom,eqNaN:function(value){return value!=value},retrieve:function(values){for(var i=0,len=arguments.length;i<len;i++)if(null!=arguments[i])return arguments[i]},retrieve2:retrieve2,retrieve3:retrieve3,slice:function(){return Function.call.apply(nativeSlice,arguments)},normalizeCssArray:normalizeCssArray,assert:function(condition,message){if(!condition)throw new Error(message)},setAsPrimitive:function(obj){obj[primitiveKey]=!0},isPrimitive:isPrimitive,createHashMap:function(obj){return new HashMap(obj)},noop:function(){}}),ArrayCtor="undefined"==typeof Float32Array?Array:Float32Array;function create(x,y){var out=new ArrayCtor(2);return null==x&&(x=0),null==y&&(y=0),out[0]=x,out[1]=y,out}function clone$1(v){var out=new ArrayCtor(2);return out[0]=v[0],out[1]=v[1],out}function add(out,v1,v2){return out[0]=v1[0]+v2[0],out[1]=v1[1]+v2[1],out}function sub(out,v1,v2){return out[0]=v1[0]-v2[0],out[1]=v1[1]-v2[1],out}function len(v){return Math.sqrt(lenSquare(v))}function lenSquare(v){return v[0]*v[0]+v[1]*v[1]}function scale(out,v,s){return out[0]=v[0]*s,out[1]=v[1]*s,out}function normalize(out,v){var d=len(v);return 0===d?(out[0]=0,out[1]=0):(out[0]=v[0]/d,out[1]=v[1]/d),out}function distance(v1,v2){return Math.sqrt((v1[0]-v2[0])*(v1[0]-v2[0])+(v1[1]-v2[1])*(v1[1]-v2[1]))}var dist=distance;function distanceSquare(v1,v2){return(v1[0]-v2[0])*(v1[0]-v2[0])+(v1[1]-v2[1])*(v1[1]-v2[1])}var distSquare=distanceSquare;function applyTransform(out,v,m){var x=v[0],y=v[1];return out[0]=m[0]*x+m[2]*y+m[4],out[1]=m[1]*x+m[3]*y+m[5],out}function min(out,v1,v2){return out[0]=Math.min(v1[0],v2[0]),out[1]=Math.min(v1[1],v2[1]),out}function max(out,v1,v2){return out[0]=Math.max(v1[0],v2[0]),out[1]=Math.max(v1[1],v2[1]),out}var vector=(Object.freeze||Object)({create:create,copy:function(out,v){return out[0]=v[0],out[1]=v[1],out},clone:clone$1,set:function(out,a,b){return out[0]=a,out[1]=b,out},add:add,scaleAndAdd:function(out,v1,v2,a){return out[0]=v1[0]+v2[0]*a,out[1]=v1[1]+v2[1]*a,out},sub:sub,len:len,length:len,lenSquare:lenSquare,lengthSquare:lenSquare,mul:function(out,v1,v2){return out[0]=v1[0]*v2[0],out[1]=v1[1]*v2[1],out},div:function(out,v1,v2){return out[0]=v1[0]/v2[0],out[1]=v1[1]/v2[1],out},dot:function(v1,v2){return v1[0]*v2[0]+v1[1]*v2[1]},scale:scale,normalize:normalize,distance:distance,dist:dist,distanceSquare:distanceSquare,distSquare:distSquare,negate:function(out,v){return out[0]=-v[0],out[1]=-v[1],out},lerp:function(out,v1,v2,t){return out[0]=v1[0]+t*(v2[0]-v1[0]),out[1]=v1[1]+t*(v2[1]-v1[1]),out},applyTransform:applyTransform,min:min,max:max});function Draggable(){this.on("mousedown",this._dragStart,this),this.on("mousemove",this._drag,this),this.on("mouseup",this._dragEnd,this),this.on("globalout",this._dragEnd,this)}function param(target,e){return{target:target,topTarget:e&&e.topTarget}}Draggable.prototype={constructor:Draggable,_dragStart:function(e){var draggingTarget=e.target;draggingTarget&&draggingTarget.draggable&&((this._draggingTarget=draggingTarget).dragging=!0,this._x=e.offsetX,this._y=e.offsetY,this.dispatchToElement(param(draggingTarget,e),"dragstart",e.event))},_drag:function(e){var x,y,dx,dy,dropTarget,lastDropTarget,draggingTarget=this._draggingTarget;draggingTarget&&(x=e.offsetX,y=e.offsetY,dx=x-this._x,dy=y-this._y,this._x=x,this._y=y,draggingTarget.drift(dx,dy,e),this.dispatchToElement(param(draggingTarget,e),"drag",e.event),dropTarget=this.findHover(x,y,draggingTarget).target,lastDropTarget=this._dropTarget,draggingTarget!==(this._dropTarget=dropTarget)&&(lastDropTarget&&dropTarget!==lastDropTarget&&this.dispatchToElement(param(lastDropTarget,e),"dragleave",e.event),dropTarget&&dropTarget!==lastDropTarget&&this.dispatchToElement(param(dropTarget,e),"dragenter",e.event)))},_dragEnd:function(e){var draggingTarget=this._draggingTarget;draggingTarget&&(draggingTarget.dragging=!1),this.dispatchToElement(param(draggingTarget,e),"dragend",e.event),this._dropTarget&&this.dispatchToElement(param(this._dropTarget,e),"drop",e.event),this._draggingTarget=null,this._dropTarget=null}};function Eventful(){this._$handlers={}}var arrySlice=Array.prototype.slice;Eventful.prototype={constructor:Eventful,one:function(event,handler,context){var _h=this._$handlers;if(!handler||!event)return this;_h[event]||(_h[event]=[]);for(var i=0;i<_h[event].length;i++)if(_h[event][i].h===handler)return this;return _h[event].push({h:handler,one:!0,ctx:context||this}),this},on:function(event,handler,context){var _h=this._$handlers;if(!handler||!event)return this;_h[event]||(_h[event]=[]);for(var i=0;i<_h[event].length;i++)if(_h[event][i].h===handler)return this;return _h[event].push({h:handler,one:!1,ctx:context||this}),this},isSilent:function(event){var _h=this._$handlers;return _h[event]&&_h[event].length},off:function(event,handler){var _h=this._$handlers;if(!event)return this._$handlers={},this;if(handler){if(_h[event]){for(var newList=[],i=0,l=_h[event].length;i<l;i++)_h[event][i].h!=handler&&newList.push(_h[event][i]);_h[event]=newList}_h[event]&&0===_h[event].length&&delete _h[event]}else delete _h[event];return this},trigger:function(type){if(this._$handlers[type]){var args=arguments,argLen=args.length;3<argLen&&(args=arrySlice.call(args,1));for(var _h=this._$handlers[type],len=_h.length,i=0;i<len;){switch(argLen){case 1:_h[i].h.call(_h[i].ctx);break;case 2:_h[i].h.call(_h[i].ctx,args[1]);break;case 3:_h[i].h.call(_h[i].ctx,args[1],args[2]);break;default:_h[i].h.apply(_h[i].ctx,args)}_h[i].one?(_h.splice(i,1),len--):i++}}return this},triggerWithContext:function(type){if(this._$handlers[type]){var args=arguments,argLen=args.length;4<argLen&&(args=arrySlice.call(args,1,args.length-1));for(var ctx=args[args.length-1],_h=this._$handlers[type],len=_h.length,i=0;i<len;){switch(argLen){case 1:_h[i].h.call(ctx);break;case 2:_h[i].h.call(ctx,args[1]);break;case 3:_h[i].h.call(ctx,args[1],args[2]);break;default:_h[i].h.apply(ctx,args)}_h[i].one?(_h.splice(i,1),len--):i++}}return this}};var SILENT="silent";function EmptyProxy(){}EmptyProxy.prototype.dispose=function(){};function Handler(storage,painter,proxy,painterRoot){Eventful.call(this),this.storage=storage,this.painter=painter,this.painterRoot=painterRoot,proxy=proxy||new EmptyProxy,((this.proxy=proxy).handler=this)._hovered={},this._lastTouchMoment,this._lastX,this._lastY,Draggable.call(this),each(handlerNames,function(name){proxy.on&&proxy.on(name,this[name],this)},this)}var handlerNames=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"];Handler.prototype={constructor:Handler,mousemove:function(event){var x=event.zrX,y=event.zrY,lastHovered=this._hovered,lastHoveredTarget=lastHovered.target;lastHoveredTarget&&!lastHoveredTarget.__zr&&(lastHoveredTarget=(lastHovered=this.findHover(lastHovered.x,lastHovered.y)).target);var hovered=this._hovered=this.findHover(x,y),hoveredTarget=hovered.target,proxy=this.proxy;proxy.setCursor&&proxy.setCursor(hoveredTarget?hoveredTarget.cursor:"default"),lastHoveredTarget&&hoveredTarget!==lastHoveredTarget&&this.dispatchToElement(lastHovered,"mouseout",event),this.dispatchToElement(hovered,"mousemove",event),hoveredTarget&&hoveredTarget!==lastHoveredTarget&&this.dispatchToElement(hovered,"mouseover",event)},mouseout:function(event){this.dispatchToElement(this._hovered,"mouseout",event);for(var innerDom,element=event.toElement||event.relatedTarget;(element=element&&element.parentNode)&&9!=element.nodeType&&!(innerDom=element===this.painterRoot););innerDom||this.trigger("globalout",{event:event})},resize:function(event){this._hovered={}},dispatch:function(eventName,eventArgs){var handler=this[eventName];handler&&handler.call(this,eventArgs)},dispose:function(){this.proxy.dispose(),this.storage=this.proxy=this.painter=null},setCursorStyle:function(cursorStyle){var proxy=this.proxy;proxy.setCursor&&proxy.setCursor(cursorStyle)},dispatchToElement:function(targetInfo,eventName,event){var el=(targetInfo=targetInfo||{}).target;if(!el||!el.silent){for(var eventHandler="on"+eventName,eventPacket=function(eveType,targetInfo,event){return{type:eveType,event:event,target:targetInfo.target,topTarget:targetInfo.topTarget,cancelBubble:!1,offsetX:event.zrX,offsetY:event.zrY,gestureEvent:event.gestureEvent,pinchX:event.pinchX,pinchY:event.pinchY,pinchScale:event.pinchScale,wheelDelta:event.zrDelta,zrByTouch:event.zrByTouch,which:event.which}}(eventName,targetInfo,event);el&&(el[eventHandler]&&(eventPacket.cancelBubble=el[eventHandler].call(el,eventPacket)),el.trigger(eventName,eventPacket),el=el.parent,!eventPacket.cancelBubble););eventPacket.cancelBubble||(this.trigger(eventName,eventPacket),this.painter&&this.painter.eachOtherLayer(function(layer){"function"==typeof layer[eventHandler]&&layer[eventHandler].call(layer,eventPacket),layer.trigger&&layer.trigger(eventName,eventPacket)}))}},findHover:function(x,y,exclude){for(var hoverCheckResult,list=this.storage.getDisplayList(),out={x:x,y:y},i=list.length-1;0<=i;i--){if(list[i]!==exclude&&!list[i].ignore&&(hoverCheckResult=function(displayable,x,y){if(displayable[displayable.rectHover?"rectContain":"contain"](x,y)){for(var isSilent,el=displayable;el;){if(el.clipPath&&!el.clipPath.contain(x,y))return!1;el.silent&&(isSilent=!0),el=el.parent}return!isSilent||SILENT}return!1}(list[i],x,y))&&(out.topTarget||(out.topTarget=list[i]),hoverCheckResult!==SILENT)){out.target=list[i];break}}return out}},each(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],function(name){Handler.prototype[name]=function(event){var hovered=this.findHover(event.zrX,event.zrY),hoveredTarget=hovered.target;if("mousedown"===name)this._downEl=hoveredTarget,this._downPoint=[event.zrX,event.zrY],this._upEl=hoveredTarget;else if("mosueup"===name)this._upEl=hoveredTarget;else if("click"===name){if(this._downEl!==this._upEl||!this._downPoint||4<dist(this._downPoint,[event.zrX,event.zrY]))return;this._downPoint=null}this.dispatchToElement(hovered,name,event)}}),mixin(Handler,Eventful),mixin(Handler,Draggable);var ArrayCtor$1="undefined"==typeof Float32Array?Array:Float32Array;function create$1(){var out=new ArrayCtor$1(6);return identity(out),out}function identity(out){return out[0]=1,out[1]=0,out[2]=0,out[3]=1,out[4]=0,out[5]=0,out}function copy$1(out,m){return out[0]=m[0],out[1]=m[1],out[2]=m[2],out[3]=m[3],out[4]=m[4],out[5]=m[5],out}function mul$1(out,m1,m2){var out0=m1[0]*m2[0]+m1[2]*m2[1],out1=m1[1]*m2[0]+m1[3]*m2[1],out2=m1[0]*m2[2]+m1[2]*m2[3],out3=m1[1]*m2[2]+m1[3]*m2[3],out4=m1[0]*m2[4]+m1[2]*m2[5]+m1[4],out5=m1[1]*m2[4]+m1[3]*m2[5]+m1[5];return out[0]=out0,out[1]=out1,out[2]=out2,out[3]=out3,out[4]=out4,out[5]=out5,out}function translate(out,a,v){return out[0]=a[0],out[1]=a[1],out[2]=a[2],out[3]=a[3],out[4]=a[4]+v[0],out[5]=a[5]+v[1],out}function rotate(out,a,rad){var aa=a[0],ac=a[2],atx=a[4],ab=a[1],ad=a[3],aty=a[5],st=Math.sin(rad),ct=Math.cos(rad);return out[0]=aa*ct+ab*st,out[1]=-aa*st+ab*ct,out[2]=ac*ct+ad*st,out[3]=-ac*st+ct*ad,out[4]=ct*atx+st*aty,out[5]=ct*aty-st*atx,out}function scale$1(out,a,v){var vx=v[0],vy=v[1];return out[0]=a[0]*vx,out[1]=a[1]*vy,out[2]=a[2]*vx,out[3]=a[3]*vy,out[4]=a[4]*vx,out[5]=a[5]*vy,out}function invert(out,a){var aa=a[0],ac=a[2],atx=a[4],ab=a[1],ad=a[3],aty=a[5],det=aa*ad-ab*ac;return det?(det=1/det,out[0]=ad*det,out[1]=-ab*det,out[2]=-ac*det,out[3]=aa*det,out[4]=(ac*aty-ad*atx)*det,out[5]=(ab*atx-aa*aty)*det,out):null}var matrix=(Object.freeze||Object)({create:create$1,identity:identity,copy:copy$1,mul:mul$1,translate:translate,rotate:rotate,scale:scale$1,invert:invert}),mIdentity=identity;function isNotAroundZero(val){return 5e-5<val||val<-5e-5}function Transformable(opts){(opts=opts||{}).position||(this.position=[0,0]),null==opts.rotation&&(this.rotation=0),opts.scale||(this.scale=[1,1]),this.origin=this.origin||null}var transformableProto=Transformable.prototype;transformableProto.transform=null,transformableProto.needLocalTransform=function(){return isNotAroundZero(this.rotation)||isNotAroundZero(this.position[0])||isNotAroundZero(this.position[1])||isNotAroundZero(this.scale[0]-1)||isNotAroundZero(this.scale[1]-1)},transformableProto.updateTransform=function(){var parent=this.parent,parentHasTransform=parent&&parent.transform,needLocalTransform=this.needLocalTransform(),m=this.transform;needLocalTransform||parentHasTransform?(m=m||create$1(),needLocalTransform?this.getLocalTransform(m):mIdentity(m),parentHasTransform&&(needLocalTransform?mul$1(m,parent.transform,m):copy$1(m,parent.transform)),this.transform=m,this.invTransform=this.invTransform||create$1(),invert(this.invTransform,m)):m&&mIdentity(m)},transformableProto.getLocalTransform=function(m){return Transformable.getLocalTransform(this,m)},transformableProto.setTransform=function(ctx){var m=this.transform,dpr=ctx.dpr||1;m?ctx.setTransform(dpr*m[0],dpr*m[1],dpr*m[2],dpr*m[3],dpr*m[4],dpr*m[5]):ctx.setTransform(dpr,0,0,dpr,0,0)},transformableProto.restoreTransform=function(ctx){var dpr=ctx.dpr||1;ctx.setTransform(dpr,0,0,dpr,0,0)};var tmpTransform=[];transformableProto.decomposeTransform=function(){var parent,m,sx,sy,position,scale$$1;this.transform&&(parent=this.parent,m=this.transform,parent&&parent.transform&&(mul$1(tmpTransform,parent.invTransform,m),m=tmpTransform),sx=m[0]*m[0]+m[1]*m[1],sy=m[2]*m[2]+m[3]*m[3],position=this.position,scale$$1=this.scale,isNotAroundZero(sx-1)&&(sx=Math.sqrt(sx)),isNotAroundZero(sy-1)&&(sy=Math.sqrt(sy)),m[0]<0&&(sx=-sx),m[3]<0&&(sy=-sy),position[0]=m[4],position[1]=m[5],scale$$1[0]=sx,scale$$1[1]=sy,this.rotation=Math.atan2(-m[1]/sy,m[0]/sx))},transformableProto.getGlobalScale=function(){var m=this.transform;if(!m)return[1,1];var sx=Math.sqrt(m[0]*m[0]+m[1]*m[1]),sy=Math.sqrt(m[2]*m[2]+m[3]*m[3]);return m[0]<0&&(sx=-sx),m[3]<0&&(sy=-sy),[sx,sy]},transformableProto.transformCoordToLocal=function(x,y){var v2=[x,y],invTransform=this.invTransform;return invTransform&&applyTransform(v2,v2,invTransform),v2},transformableProto.transformCoordToGlobal=function(x,y){var v2=[x,y],transform=this.transform;return transform&&applyTransform(v2,v2,transform),v2},Transformable.getLocalTransform=function(target,m){mIdentity(m=m||[]);var origin=target.origin,scale$$1=target.scale||[1,1],rotation=target.rotation||0,position=target.position||[0,0];return origin&&(m[4]-=origin[0],m[5]-=origin[1]),scale$1(m,m,scale$$1),rotation&&rotate(m,m,rotation),origin&&(m[4]+=origin[0],m[5]+=origin[1]),m[4]+=position[0],m[5]+=position[1],m};var easing={linear:function(k){return k},quadraticIn:function(k){return k*k},quadraticOut:function(k){return k*(2-k)},quadraticInOut:function(k){return(k*=2)<1?.5*k*k:-.5*(--k*(k-2)-1)},cubicIn:function(k){return k*k*k},cubicOut:function(k){return--k*k*k+1},cubicInOut:function(k){return(k*=2)<1?.5*k*k*k:.5*((k-=2)*k*k+2)},quarticIn:function(k){return k*k*k*k},quarticOut:function(k){return 1- --k*k*k*k},quarticInOut:function(k){return(k*=2)<1?.5*k*k*k*k:-.5*((k-=2)*k*k*k-2)},quinticIn:function(k){return k*k*k*k*k},quinticOut:function(k){return--k*k*k*k*k+1},quinticInOut:function(k){return(k*=2)<1?.5*k*k*k*k*k:.5*((k-=2)*k*k*k*k+2)},sinusoidalIn:function(k){return 1-Math.cos(k*Math.PI/2)},sinusoidalOut:function(k){return Math.sin(k*Math.PI/2)},sinusoidalInOut:function(k){return.5*(1-Math.cos(Math.PI*k))},exponentialIn:function(k){return 0===k?0:Math.pow(1024,k-1)},exponentialOut:function(k){return 1===k?1:1-Math.pow(2,-10*k)},exponentialInOut:function(k){return 0===k?0:1===k?1:(k*=2)<1?.5*Math.pow(1024,k-1):.5*(2-Math.pow(2,-10*(k-1)))},circularIn:function(k){return 1-Math.sqrt(1-k*k)},circularOut:function(k){return Math.sqrt(1- --k*k)},circularInOut:function(k){return(k*=2)<1?-.5*(Math.sqrt(1-k*k)-1):.5*(Math.sqrt(1-(k-=2)*k)+1)},elasticIn:function(k){var s,a=.1;return 0===k?0:1===k?1:(s=!a||a<1?(a=1,.1):.4*Math.asin(1/a)/(2*Math.PI),-(a*Math.pow(2,10*--k)*Math.sin((k-s)*(2*Math.PI)/.4)))},elasticOut:function(k){var s,a=.1;return 0===k?0:1===k?1:(s=!a||a<1?(a=1,.1):.4*Math.asin(1/a)/(2*Math.PI),a*Math.pow(2,-10*k)*Math.sin((k-s)*(2*Math.PI)/.4)+1)},elasticInOut:function(k){var s,a=.1;return 0===k?0:1===k?1:(s=!a||a<1?(a=1,.1):.4*Math.asin(1/a)/(2*Math.PI),(k*=2)<1?a*Math.pow(2,10*--k)*Math.sin((k-s)*(2*Math.PI)/.4)*-.5:a*Math.pow(2,-10*--k)*Math.sin((k-s)*(2*Math.PI)/.4)*.5+1)},backIn:function(k){var s=1.70158;return k*k*((1+s)*k-s)},backOut:function(k){var s=1.70158;return--k*k*((1+s)*k+s)+1},backInOut:function(k){var s=2.5949095;return(k*=2)<1?k*k*((1+s)*k-s)*.5:.5*((k-=2)*k*((1+s)*k+s)+2)},bounceIn:function(k){return 1-easing.bounceOut(1-k)},bounceOut:function(k){return k<1/2.75?7.5625*k*k:k<2/2.75?7.5625*(k-=1.5/2.75)*k+.75:k<2.5/2.75?7.5625*(k-=2.25/2.75)*k+.9375:7.5625*(k-=2.625/2.75)*k+.984375},bounceInOut:function(k){return k<.5?.5*easing.bounceIn(2*k):.5*easing.bounceOut(2*k-1)+.5}};function Clip(options){this._target=options.target,this._life=options.life||1e3,this._delay=options.delay||0,this._initialized=!1,this.loop=null!=options.loop&&options.loop,this.gap=options.gap||0,this.easing=options.easing||"Linear",this.onframe=options.onframe,this.ondestroy=options.ondestroy,this.onrestart=options.onrestart,this._pausedTime=0,this._paused=!1}Clip.prototype={constructor:Clip,step:function(globalTime,deltaTime){if(this._initialized||(this._startTime=globalTime+this._delay,this._initialized=!0),this._paused)this._pausedTime+=deltaTime;else{var percent=(globalTime-this._startTime-this._pausedTime)/this._life;if(!(percent<0)){percent=Math.min(percent,1);var easing$$1=this.easing,easingFunc="string"==typeof easing$$1?easing[easing$$1]:easing$$1,schedule="function"==typeof easingFunc?easingFunc(percent):percent;return this.fire("frame",schedule),1==percent?this.loop?(this.restart(globalTime),"restart"):(this._needsRemove=!0,"destroy"):null}}},restart:function(globalTime){var remainder=(globalTime-this._startTime-this._pausedTime)%this._life;this._startTime=globalTime-remainder+this.gap,this._pausedTime=0,this._needsRemove=!1},fire:function(eventType,arg){this[eventType="on"+eventType]&&this[eventType](this._target,arg)},pause:function(){this._paused=!0},resume:function(){this._paused=!1}};function LinkedList(){this.head=null,this.tail=null,this._len=0}var linkedListProto=LinkedList.prototype;linkedListProto.insert=function(val){var entry=new Entry(val);return this.insertEntry(entry),entry},linkedListProto.insertEntry=function(entry){this.head?((this.tail.next=entry).prev=this.tail,entry.next=null,this.tail=entry):this.head=this.tail=entry,this._len++},linkedListProto.remove=function(entry){var prev=entry.prev,next=entry.next;prev?prev.next=next:this.head=next,next?next.prev=prev:this.tail=prev,entry.next=entry.prev=null,this._len--},linkedListProto.len=function(){return this._len},linkedListProto.clear=function(){this.head=this.tail=null,this._len=0};function LRU(maxSize){this._list=new LinkedList,this._map={},this._maxSize=maxSize||10,this._lastRemovedEntry=null}var Entry=function(val){this.value=val,this.next,this.prev},LRUProto=LRU.prototype;LRUProto.put=function(key,value){var len,entry,leastUsedEntry,list=this._list,map=this._map,removed=null;return null==map[key]&&(len=list.len(),entry=this._lastRemovedEntry,len>=this._maxSize&&0<len&&(leastUsedEntry=list.head,list.remove(leastUsedEntry),delete map[leastUsedEntry.key],removed=leastUsedEntry.value,this._lastRemovedEntry=leastUsedEntry),entry?entry.value=value:entry=new Entry(value),entry.key=key,list.insertEntry(entry),map[key]=entry),removed},LRUProto.get=function(key){var entry=this._map[key],list=this._list;if(null!=entry)return entry!==list.tail&&(list.remove(entry),list.insertEntry(entry)),entry.value},LRUProto.clear=function(){this._list.clear(),this._map={}};var kCSSColorTable={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function clampCssByte(i){return(i=Math.round(i))<0?0:255<i?255:i}function clampCssFloat(f){return f<0?0:1<f?1:f}function parseCssInt(str){return str.length&&"%"===str.charAt(str.length-1)?clampCssByte(parseFloat(str)/100*255):clampCssByte(parseInt(str,10))}function parseCssFloat(str){return str.length&&"%"===str.charAt(str.length-1)?clampCssFloat(parseFloat(str)/100):clampCssFloat(parseFloat(str))}function cssHueToRgb(m1,m2,h){return h<0?h+=1:1<h&&--h,6*h<1?m1+(m2-m1)*h*6:2*h<1?m2:3*h<2?m1+(m2-m1)*(2/3-h)*6:m1}function lerpNumber(a,b,p){return a+(b-a)*p}function setRgba(out,r,g,b,a){return out[0]=r,out[1]=g,out[2]=b,out[3]=a,out}function copyRgba(out,a){return out[0]=a[0],out[1]=a[1],out[2]=a[2],out[3]=a[3],out}var colorCache=new LRU(20),lastRemovedArr=null;function putToCache(colorStr,rgbaArr){lastRemovedArr&&copyRgba(lastRemovedArr,rgbaArr),lastRemovedArr=colorCache.put(colorStr,lastRemovedArr||rgbaArr.slice())}function parse(colorStr,rgbaArr){if(colorStr){rgbaArr=rgbaArr||[];var cached=colorCache.get(colorStr);if(cached)return copyRgba(rgbaArr,cached);var iv,str=(colorStr+="").replace(/ /g,"").toLowerCase();if(str in kCSSColorTable)return copyRgba(rgbaArr,kCSSColorTable[str]),putToCache(colorStr,rgbaArr),rgbaArr;if("#"===str.charAt(0))return 4===str.length?0<=(iv=parseInt(str.substr(1),16))&&iv<=4095?(setRgba(rgbaArr,(3840&iv)>>4|(3840&iv)>>8,240&iv|(240&iv)>>4,15&iv|(15&iv)<<4,1),putToCache(colorStr,rgbaArr),rgbaArr):void setRgba(rgbaArr,0,0,0,1):7===str.length?0<=(iv=parseInt(str.substr(1),16))&&iv<=16777215?(setRgba(rgbaArr,(16711680&iv)>>16,(65280&iv)>>8,255&iv,1),putToCache(colorStr,rgbaArr),rgbaArr):void setRgba(rgbaArr,0,0,0,1):void 0;var op=str.indexOf("("),ep=str.indexOf(")");if(-1!==op&&ep+1===str.length){var fname=str.substr(0,op),params=str.substr(op+1,ep-(op+1)).split(","),alpha=1;switch(fname){case"rgba":if(4!==params.length)return void setRgba(rgbaArr,0,0,0,1);alpha=parseCssFloat(params.pop());case"rgb":return 3!==params.length?void setRgba(rgbaArr,0,0,0,1):(setRgba(rgbaArr,parseCssInt(params[0]),parseCssInt(params[1]),parseCssInt(params[2]),alpha),putToCache(colorStr,rgbaArr),rgbaArr);case"hsla":return 4!==params.length?void setRgba(rgbaArr,0,0,0,1):(params[3]=parseCssFloat(params[3]),hsla2rgba(params,rgbaArr),putToCache(colorStr,rgbaArr),rgbaArr);case"hsl":return 3!==params.length?void setRgba(rgbaArr,0,0,0,1):(hsla2rgba(params,rgbaArr),putToCache(colorStr,rgbaArr),rgbaArr);default:return}}setRgba(rgbaArr,0,0,0,1)}}function hsla2rgba(hsla,rgba){var h=(parseFloat(hsla[0])%360+360)%360/360,s=parseCssFloat(hsla[1]),l=parseCssFloat(hsla[2]),m2=l<=.5?l*(s+1):l+s-l*s,m1=2*l-m2;return setRgba(rgba=rgba||[],clampCssByte(255*cssHueToRgb(m1,m2,h+1/3)),clampCssByte(255*cssHueToRgb(m1,m2,h)),clampCssByte(255*cssHueToRgb(m1,m2,h-1/3)),1),4===hsla.length&&(rgba[3]=hsla[3]),rgba}function fastLerp(normalizedValue,colors,out){if(colors&&colors.length&&0<=normalizedValue&&normalizedValue<=1){out=out||[];var value=normalizedValue*(colors.length-1),leftIndex=Math.floor(value),rightIndex=Math.ceil(value),leftColor=colors[leftIndex],rightColor=colors[rightIndex],dv=value-leftIndex;return out[0]=clampCssByte(lerpNumber(leftColor[0],rightColor[0],dv)),out[1]=clampCssByte(lerpNumber(leftColor[1],rightColor[1],dv)),out[2]=clampCssByte(lerpNumber(leftColor[2],rightColor[2],dv)),out[3]=clampCssFloat(lerpNumber(leftColor[3],rightColor[3],dv)),out}}function lerp$1(normalizedValue,colors,fullOutput){if(colors&&colors.length&&0<=normalizedValue&&normalizedValue<=1){var value=normalizedValue*(colors.length-1),leftIndex=Math.floor(value),rightIndex=Math.ceil(value),leftColor=parse(colors[leftIndex]),rightColor=parse(colors[rightIndex]),dv=value-leftIndex,color=stringify([clampCssByte(lerpNumber(leftColor[0],rightColor[0],dv)),clampCssByte(lerpNumber(leftColor[1],rightColor[1],dv)),clampCssByte(lerpNumber(leftColor[2],rightColor[2],dv)),clampCssFloat(lerpNumber(leftColor[3],rightColor[3],dv))],"rgba");return fullOutput?{color:color,leftIndex:leftIndex,rightIndex:rightIndex,value:value}:color}}function stringify(arrColor,type){if(arrColor&&arrColor.length){var colorStr=arrColor[0]+","+arrColor[1]+","+arrColor[2];return"rgba"!==type&&"hsva"!==type&&"hsla"!==type||(colorStr+=","+arrColor[3]),type+"("+colorStr+")"}}var color=(Object.freeze||Object)({parse:parse,lift:function(color,level){var colorArr=parse(color);if(colorArr){for(var i=0;i<3;i++)colorArr[i]=level<0?colorArr[i]*(1-level)|0:(255-colorArr[i])*level+colorArr[i]|0;return stringify(colorArr,4===colorArr.length?"rgba":"rgb")}},toHex:function(color){var colorArr=parse(color);if(colorArr)return((1<<24)+(colorArr[0]<<16)+(colorArr[1]<<8)+ +colorArr[2]).toString(16).slice(1)},fastLerp:fastLerp,fastMapToColor:fastLerp,lerp:lerp$1,mapToColor:lerp$1,modifyHSL:function(color,h,s,l){if(color=parse(color))return color=function(rgba){if(rgba){var H,S,deltaR,deltaG,deltaB,R=rgba[0]/255,G=rgba[1]/255,B=rgba[2]/255,vMin=Math.min(R,G,B),vMax=Math.max(R,G,B),delta=vMax-vMin,L=(vMax+vMin)/2;0==delta?S=H=0:(S=L<.5?delta/(vMax+vMin):delta/(2-vMax-vMin),deltaR=((vMax-R)/6+delta/2)/delta,deltaG=((vMax-G)/6+delta/2)/delta,deltaB=((vMax-B)/6+delta/2)/delta,R===vMax?H=deltaB-deltaG:G===vMax?H=1/3+deltaR-deltaB:B===vMax&&(H=2/3+deltaG-deltaR),H<0&&(H+=1),1<H&&--H);var hsla=[360*H,S,L];return null!=rgba[3]&&hsla.push(rgba[3]),hsla}}(color),null!=h&&(color[0]=(i=h,(i=Math.round(i))<0?0:360<i?360:i)),null!=s&&(color[1]=parseCssFloat(s)),null!=l&&(color[2]=parseCssFloat(l)),stringify(hsla2rgba(color),"rgba");var i},modifyAlpha:function(color,alpha){if((color=parse(color))&&null!=alpha)return color[3]=clampCssFloat(alpha),stringify(color,"rgba")},stringify:stringify}),arraySlice=Array.prototype.slice;function defaultGetter(target,key){return target[key]}function defaultSetter(target,key,value){target[key]=value}function interpolateNumber(p0,p1,percent){return(p1-p0)*percent+p0}function interpolateString(p0,p1,percent){return.5<percent?p1:p0}function interpolateArray(p0,p1,percent,out,arrDim){var len=p0.length;if(1==arrDim)for(var i=0;i<len;i++)out[i]=interpolateNumber(p0[i],p1[i],percent);else for(var len2=len&&p0[0].length,i=0;i<len;i++)for(var j=0;j<len2;j++)out[i][j]=interpolateNumber(p0[i][j],p1[i][j],percent)}function fillArr(arr0,arr1,arrDim){var arr0Len=arr0.length,arr1Len=arr1.length;if(arr0Len!==arr1Len)if(arr1Len<arr0Len)arr0.length=arr1Len;else for(var i=arr0Len;i<arr1Len;i++)arr0.push(1===arrDim?arr1[i]:arraySlice.call(arr1[i]));for(var len2=arr0[0]&&arr0[0].length,i=0;i<arr0.length;i++)if(1===arrDim)isNaN(arr0[i])&&(arr0[i]=arr1[i]);else for(var j=0;j<len2;j++)isNaN(arr0[i][j])&&(arr0[i][j]=arr1[i][j])}function catmullRomInterpolateArray(p0,p1,p2,p3,t,t2,t3,out,arrDim){var len=p0.length;if(1==arrDim)for(var i=0;i<len;i++)out[i]=catmullRomInterpolate(p0[i],p1[i],p2[i],p3[i],t,t2,t3);else for(var len2=p0[0].length,i=0;i<len;i++)for(var j=0;j<len2;j++)out[i][j]=catmullRomInterpolate(p0[i][j],p1[i][j],p2[i][j],p3[i][j],t,t2,t3)}function catmullRomInterpolate(p0,p1,p2,p3,t,t2,t3){var v0=.5*(p2-p0),v1=.5*(p3-p1);return(2*(p1-p2)+v0+v1)*t3+(-3*(p1-p2)-2*v0-v1)*t2+v0*t+p1}function rgba2String(rgba){return rgba[0]=Math.floor(rgba[0]),rgba[1]=Math.floor(rgba[1]),rgba[2]=Math.floor(rgba[2]),"rgba("+rgba.join(",")+")"}function createTrackClip(animator,easing,oneTrackDone,keyframes,propName,forceAnimate){var getter=animator._getter,setter=animator._setter,useSpline="spline"===easing,trackLen=keyframes.length;if(trackLen){var trackMaxTime,isValueArray=isArrayLike(keyframes[0].value),isValueColor=!1,isValueString=!1,arrDim=isValueArray?function(keyframes){var lastValue=keyframes[keyframes.length-1].value;return isArrayLike(lastValue&&lastValue[0])?2:1}(keyframes):0;keyframes.sort(function(a,b){return a.time-b.time}),trackMaxTime=keyframes[trackLen-1].time;for(var kfPercents=[],kfValues=[],prevValue=keyframes[0].value,isAllValueEqual=!0,i=0;i<trackLen;i++){kfPercents.push(keyframes[i].time/trackMaxTime);var colorArray,value=keyframes[i].value;isValueArray&&function(arr0,arr1,arrDim){if(arr0===arr1)return 1;var len=arr0.length;if(len===arr1.length){if(1===arrDim){for(var i=0;i<len;i++)if(arr0[i]!==arr1[i])return}else for(var len2=arr0[0].length,i=0;i<len;i++)for(var j=0;j<len2;j++)if(arr0[i][j]!==arr1[i][j])return;return 1}}(value,prevValue,arrDim)||!isValueArray&&value===prevValue||(isAllValueEqual=!1),"string"==typeof(prevValue=value)&&((colorArray=parse(value))?(value=colorArray,isValueColor=!0):isValueString=!0),kfValues.push(value)}if(forceAnimate||!isAllValueEqual){for(var lastValue=kfValues[trackLen-1],i=0;i<trackLen-1;i++)isValueArray?fillArr(kfValues[i],lastValue,arrDim):!isNaN(kfValues[i])||isNaN(lastValue)||isValueString||isValueColor||(kfValues[i]=lastValue);isValueArray&&fillArr(getter(animator._target,propName),lastValue,arrDim);var w,p0,p1,p2,p3,rgba,lastFrame=0,lastFramePercent=0;isValueColor&&(rgba=[0,0,0,0]);var clip=new Clip({target:animator._target,life:trackMaxTime,loop:animator._loop,delay:animator._delay,onframe:function(target,percent){var frame;if(percent<0)frame=0;else if(percent<lastFramePercent){for(frame=Math.min(lastFrame+1,trackLen-1);0<=frame&&!(kfPercents[frame]<=percent);frame--);frame=Math.min(frame,trackLen-2)}else{for(frame=lastFrame;frame<trackLen&&!(kfPercents[frame]>percent);frame++);frame=Math.min(frame-1,trackLen-2)}lastFramePercent=percent;var value,range=kfPercents[(lastFrame=frame)+1]-kfPercents[frame];if(0!=range)if(w=(percent-kfPercents[frame])/range,useSpline)if(p1=kfValues[frame],p0=kfValues[0===frame?frame:frame-1],p2=kfValues[trackLen-2<frame?trackLen-1:frame+1],p3=kfValues[trackLen-3<frame?trackLen-1:frame+2],isValueArray)catmullRomInterpolateArray(p0,p1,p2,p3,w,w*w,w*w*w,getter(target,propName),arrDim);else{if(isValueColor)value=catmullRomInterpolateArray(p0,p1,p2,p3,w,w*w,w*w*w,rgba,1),value=rgba2String(rgba);else{if(isValueString)return.5<w?p2:p1;value=catmullRomInterpolate(p0,p1,p2,p3,w,w*w,w*w*w)}setter(target,propName,value)}else if(isValueArray)interpolateArray(kfValues[frame],kfValues[frame+1],w,getter(target,propName),arrDim);else{if(isValueColor)interpolateArray(kfValues[frame],kfValues[frame+1],w,rgba,1),value=rgba2String(rgba);else{if(isValueString)return interpolateString(kfValues[frame],kfValues[frame+1],w);value=interpolateNumber(kfValues[frame],kfValues[frame+1],w)}setter(target,propName,value)}},ondestroy:oneTrackDone});return easing&&"spline"!==easing&&(clip.easing=easing),clip}}}function Animator(target,loop,getter,setter){this._tracks={},this._target=target,this._loop=loop||!1,this._getter=getter||defaultGetter,this._setter=setter||defaultSetter,this._clipCount=0,this._delay=0,this._doneList=[],this._onframeList=[],this._clipList=[]}Animator.prototype={when:function(time,props){var propName,tracks=this._tracks;for(propName in props)if(props.hasOwnProperty(propName)){if(!tracks[propName]){tracks[propName]=[];var value=this._getter(this._target,propName);if(null==value)continue;0!==time&&tracks[propName].push({time:0,value:function(value){if(isArrayLike(value)){var len=value.length;if(isArrayLike(value[0])){for(var ret=[],i=0;i<len;i++)ret.push(arraySlice.call(value[i]));return ret}return arraySlice.call(value)}return value}(value)})}tracks[propName].push({time:time,value:props[propName]})}return this},during:function(callback){return this._onframeList.push(callback),this},pause:function(){for(var i=0;i<this._clipList.length;i++)this._clipList[i].pause();this._paused=!0},resume:function(){for(var i=0;i<this._clipList.length;i++)this._clipList[i].resume();this._paused=!1},isPaused:function(){return!!this._paused},_doneCallback:function(){this._tracks={},this._clipList.length=0;for(var doneList=this._doneList,len=doneList.length,i=0;i<len;i++)doneList[i].call(this)},start:function(easing,forceAnimate){function oneTrackDone(){--clipCount||self._doneCallback()}var lastClip,propName,clip,oldOnFrame,self=this,clipCount=0;for(propName in this._tracks){this._tracks.hasOwnProperty(propName)&&((clip=createTrackClip(this,easing,oneTrackDone,this._tracks[propName],propName,forceAnimate))&&(this._clipList.push(clip),clipCount++,this.animation&&this.animation.addClip(clip),lastClip=clip))}return lastClip&&(oldOnFrame=lastClip.onframe,lastClip.onframe=function(target,percent){oldOnFrame(target,percent);for(var i=0;i<self._onframeList.length;i++)self._onframeList[i](target,percent)}),clipCount||this._doneCallback(),this},stop:function(forwardToLast){for(var clipList=this._clipList,animation=this.animation,i=0;i<clipList.length;i++){var clip=clipList[i];forwardToLast&&clip.onframe(this._target,1),animation&&animation.removeClip(clip)}clipList.length=0},delay:function(time){return this._delay=time,this},done:function(cb){return cb&&this._doneList.push(cb),this},getClips:function(){return this._clipList}};var dpr=1;"undefined"!=typeof window&&(dpr=Math.max(window.devicePixelRatio||1,1));var devicePixelRatio=dpr,log=function(){};function Animatable(){this.animators=[]}var zrLog=log;Animatable.prototype={constructor:Animatable,animate:function(path,loop){var target,animatingShape=!1,el=this,zr=this.__zr;if(path){for(var pathSplitted=path.split("."),prop=el,animatingShape="shape"===pathSplitted[0],i=0,l=pathSplitted.length;i<l;i++)prop=prop&&prop[pathSplitted[i]];prop&&(target=prop)}else target=el;if(target){var animators=el.animators,animator=new Animator(target,loop);return animator.during(function(target){el.dirty(animatingShape)}).done(function(){animators.splice(indexOf(animators,animator),1)}),animators.push(animator),zr&&zr.animation.addAnimator(animator),animator}zrLog('Property "'+path+'" is not existed in element '+el.id)},stopAnimation:function(forwardToLast){for(var animators=this.animators,len=animators.length,i=0;i<len;i++)animators[i].stop(forwardToLast);return animators.length=0,this},animateTo:function(target,time,delay,easing,callback,forceAnimate){isString(delay)?(callback=easing,easing=delay,delay=0):isFunction(easing)?(callback=easing,easing="linear",delay=0):isFunction(delay)?(callback=delay,delay=0):time=isFunction(time)?(callback=time,500):time||500,this.stopAnimation(),this._animateToShallow("",this,target,time,delay);var animators=this.animators.slice(),count=animators.length;function done(){--count||callback&&callback()}count||callback&&callback();for(var i=0;i<animators.length;i++)animators[i].done(done).start(easing,forceAnimate)},_animateToShallow:function(path,source,target,time,delay){var name,props,objShallow={},propertyCount=0;for(name in target){target.hasOwnProperty(name)&&(null!=source[name]?isObject(target[name])&&!isArrayLike(target[name])?this._animateToShallow(path?path+"."+name:name,source[name],target[name],time,delay):(objShallow[name]=target[name],propertyCount++):null!=target[name]&&(path?((props={})[path]={},props[path][name]=target[name],this.attr(props)):this.attr(name,target[name])))}return 0<propertyCount&&this.animate(path,!1).when(null==time?500:time,objShallow).delay(delay||0),this}};var Element=function(opts){Transformable.call(this,opts),Eventful.call(this,opts),Animatable.call(this,opts),this.id=opts.id||guid()};Element.prototype={type:"element",name:"",__zr:null,ignore:!1,clipPath:null,drift:function(dx,dy){switch(this.draggable){case"horizontal":dy=0;break;case"vertical":dx=0}var m=this.transform;(m=m||(this.transform=[1,0,0,1,0,0]))[4]+=dx,m[5]+=dy,this.decomposeTransform(),this.dirty(!1)},beforeUpdate:function(){},afterUpdate:function(){},update:function(){this.updateTransform()},traverse:function(cb,context){},attrKV:function(key,value){var target;"position"===key||"scale"===key||"origin"===key?value&&((target=(target=this[key])||(this[key]=[]))[0]=value[0],target[1]=value[1]):this[key]=value},hide:function(){this.ignore=!0,this.__zr&&this.__zr.refresh()},show:function(){this.ignore=!1,this.__zr&&this.__zr.refresh()},attr:function(key,value){if("string"==typeof key)this.attrKV(key,value);else if(isObject(key))for(var name in key)key.hasOwnProperty(name)&&this.attrKV(name,key[name]);return this.dirty(!1),this},setClipPath:function(clipPath){var zr=this.__zr;zr&&clipPath.addSelfToZr(zr),this.clipPath&&this.clipPath!==clipPath&&this.removeClipPath(),(this.clipPath=clipPath).__zr=zr,(clipPath.__clipTarget=this).dirty(!1)},removeClipPath:function(){var clipPath=this.clipPath;clipPath&&(clipPath.__zr&&clipPath.removeSelfFromZr(clipPath.__zr),clipPath.__zr=null,clipPath.__clipTarget=null,this.clipPath=null,this.dirty(!1))},addSelfToZr:function(zr){this.__zr=zr;var animators=this.animators;if(animators)for(var i=0;i<animators.length;i++)zr.animation.addAnimator(animators[i]);this.clipPath&&this.clipPath.addSelfToZr(zr)},removeSelfFromZr:function(zr){this.__zr=null;var animators=this.animators;if(animators)for(var i=0;i<animators.length;i++)zr.animation.removeAnimator(animators[i]);this.clipPath&&this.clipPath.removeSelfFromZr(zr)}},mixin(Element,Animatable),mixin(Element,Transformable),mixin(Element,Eventful);var lt,rb,lb,rt,v2ApplyTransform=applyTransform,mathMin=Math.min,mathMax=Math.max;function BoundingRect(x,y,width,height){width<0&&(x+=width,width=-width),height<0&&(y+=height,height=-height),this.x=x,this.y=y,this.width=width,this.height=height}BoundingRect.prototype={constructor:BoundingRect,union:function(other){var x=mathMin(other.x,this.x),y=mathMin(other.y,this.y);this.width=mathMax(other.x+other.width,this.x+this.width)-x,this.height=mathMax(other.y+other.height,this.y+this.height)-y,this.x=x,this.y=y},applyTransform:(lt=[],rb=[],lb=[],rt=[],function(m){var maxX,maxY;m&&(lt[0]=lb[0]=this.x,lt[1]=rt[1]=this.y,rb[0]=rt[0]=this.x+this.width,rb[1]=lb[1]=this.y+this.height,v2ApplyTransform(lt,lt,m),v2ApplyTransform(rb,rb,m),v2ApplyTransform(lb,lb,m),v2ApplyTransform(rt,rt,m),this.x=mathMin(lt[0],rb[0],lb[0],rt[0]),this.y=mathMin(lt[1],rb[1],lb[1],rt[1]),maxX=mathMax(lt[0],rb[0],lb[0],rt[0]),maxY=mathMax(lt[1],rb[1],lb[1],rt[1]),this.width=maxX-this.x,this.height=maxY-this.y)}),calculateTransform:function(b){var a=this,sx=b.width/a.width,sy=b.height/a.height,m=create$1();return translate(m,m,[-a.x,-a.y]),scale$1(m,m,[sx,sy]),translate(m,m,[b.x,b.y]),m},intersect:function(b){if(!b)return!1;b instanceof BoundingRect||(b=BoundingRect.create(b));var a=this,ax0=a.x,ax1=a.x+a.width,ay0=a.y,ay1=a.y+a.height,bx0=b.x,bx1=b.x+b.width,by0=b.y,by1=b.y+b.height;return!(ax1<bx0||bx1<ax0||ay1<by0||by1<ay0)},contain:function(x,y){return x>=this.x&&x<=this.x+this.width&&y>=this.y&&y<=this.y+this.height},clone:function(){return new BoundingRect(this.x,this.y,this.width,this.height)},copy:function(other){this.x=other.x,this.y=other.y,this.width=other.width,this.height=other.height},plain:function(){return{x:this.x,y:this.y,width:this.width,height:this.height}}};function Group(opts){for(var key in opts=opts||{},Element.call(this,opts),opts)opts.hasOwnProperty(key)&&(this[key]=opts[key]);this._children=[],this.__storage=null,this.__dirty=!0}Group.prototype={constructor:Group,isGroup:!0,type:"group",silent:!(BoundingRect.create=function(rect){return new BoundingRect(rect.x,rect.y,rect.width,rect.height)}),children:function(){return this._children.slice()},childAt:function(idx){return this._children[idx]},childOfName:function(name){for(var children=this._children,i=0;i<children.length;i++)if(children[i].name===name)return children[i]},childCount:function(){return this._children.length},add:function(child){return child&&child!==this&&child.parent!==this&&(this._children.push(child),this._doAdd(child)),this},addBefore:function(child,nextSibling){var children,idx;return child&&child!==this&&child.parent!==this&&nextSibling&&nextSibling.parent===this&&(0<=(idx=(children=this._children).indexOf(nextSibling))&&(children.splice(idx,0,child),this._doAdd(child))),this},_doAdd:function(child){child.parent&&child.parent.remove(child);var storage=(child.parent=this).__storage,zr=this.__zr;storage&&storage!==child.__storage&&(storage.addToStorage(child),child instanceof Group&&child.addChildrenToStorage(storage)),zr&&zr.refresh()},remove:function(child){var zr=this.__zr,storage=this.__storage,children=this._children,idx=indexOf(children,child);return idx<0||(children.splice(idx,1),child.parent=null,storage&&(storage.delFromStorage(child),child instanceof Group&&child.delChildrenFromStorage(storage)),zr&&zr.refresh()),this},removeAll:function(){for(var child,children=this._children,storage=this.__storage,i=0;i<children.length;i++)child=children[i],storage&&(storage.delFromStorage(child),child instanceof Group&&child.delChildrenFromStorage(storage)),child.parent=null;return children.length=0,this},eachChild:function(cb,context){for(var children=this._children,i=0;i<children.length;i++){var child=children[i];cb.call(context,child,i)}return this},traverse:function(cb,context){for(var i=0;i<this._children.length;i++){var child=this._children[i];cb.call(context,child),"group"===child.type&&child.traverse(cb,context)}return this},addChildrenToStorage:function(storage){for(var i=0;i<this._children.length;i++){var child=this._children[i];storage.addToStorage(child),child instanceof Group&&child.addChildrenToStorage(storage)}},delChildrenFromStorage:function(storage){for(var i=0;i<this._children.length;i++){var child=this._children[i];storage.delFromStorage(child),child instanceof Group&&child.delChildrenFromStorage(storage)}},dirty:function(){return this.__dirty=!0,this.__zr&&this.__zr.refresh(),this},getBoundingRect:function(includeChildren){for(var rect=null,tmpRect=new BoundingRect(0,0,0,0),children=includeChildren||this._children,tmpMat=[],i=0;i<children.length;i++){var childRect,transform,child=children[i];child.ignore||child.invisible||(childRect=child.getBoundingRect(),(transform=child.getLocalTransform(tmpMat))?(tmpRect.copy(childRect),tmpRect.applyTransform(transform),(rect=rect||tmpRect.clone()).union(tmpRect)):(rect=rect||childRect.clone()).union(childRect))}return rect||tmpRect}},inherits(Group,Element);var DEFAULT_MIN_MERGE=32,DEFAULT_MIN_GALLOPING=7;function makeAscendingRun(array,lo,hi,compare){var runHi=lo+1;if(runHi===hi)return 1;if(compare(array[runHi++],array[lo])<0){for(;runHi<hi&&compare(array[runHi],array[runHi-1])<0;)runHi++;!function(array,lo,hi){hi--;for(;lo<hi;){var t=array[lo];array[lo++]=array[hi],array[hi--]=t}}(array,lo,runHi)}else for(;runHi<hi&&0<=compare(array[runHi],array[runHi-1]);)runHi++;return runHi-lo}function binaryInsertionSort(array,lo,hi,start,compare){for(start===lo&&start++;start<hi;start++){for(var mid,pivot=array[start],left=lo,right=start;left<right;)compare(pivot,array[mid=left+right>>>1])<0?right=mid:left=1+mid;var n=start-left;switch(n){case 3:array[left+3]=array[left+2];case 2:array[left+2]=array[left+1];case 1:array[left+1]=array[left];break;default:for(;0<n;)array[left+n]=array[left+n-1],n--}array[left]=pivot}}function gallopLeft(value,array,start,length,hint,compare){var lastOffset=0,maxOffset=0,offset=1;if(0<compare(value,array[start+hint])){for(maxOffset=length-hint;offset<maxOffset&&0<compare(value,array[start+hint+offset]);)(offset=1+((lastOffset=offset)<<1))<=0&&(offset=maxOffset);maxOffset<offset&&(offset=maxOffset),lastOffset+=hint,offset+=hint}else{for(maxOffset=hint+1;offset<maxOffset&&compare(value,array[start+hint-offset])<=0;)(offset=1+((lastOffset=offset)<<1))<=0&&(offset=maxOffset);maxOffset<offset&&(offset=maxOffset);var tmp=lastOffset,lastOffset=hint-offset,offset=hint-tmp}for(lastOffset++;lastOffset<offset;){var m=lastOffset+(offset-lastOffset>>>1);0<compare(value,array[start+m])?lastOffset=m+1:offset=m}return offset}function gallopRight(value,array,start,length,hint,compare){var lastOffset=0,maxOffset=0,offset=1;if(compare(value,array[start+hint])<0){for(maxOffset=hint+1;offset<maxOffset&&compare(value,array[start+hint-offset])<0;)(offset=1+((lastOffset=offset)<<1))<=0&&(offset=maxOffset);maxOffset<offset&&(offset=maxOffset);var tmp=lastOffset,lastOffset=hint-offset,offset=hint-tmp}else{for(maxOffset=length-hint;offset<maxOffset&&0<=compare(value,array[start+hint+offset]);)(offset=1+((lastOffset=offset)<<1))<=0&&(offset=maxOffset);maxOffset<offset&&(offset=maxOffset),lastOffset+=hint,offset+=hint}for(lastOffset++;lastOffset<offset;){var m=lastOffset+(offset-lastOffset>>>1);compare(value,array[start+m])<0?offset=m:lastOffset=m+1}return offset}function TimSort(array,compare){var runStart,runLength,minGallop=DEFAULT_MIN_GALLOPING,stackSize=0,tmp=[];function mergeAt(i){var start1=runStart[i],length1=runLength[i],start2=runStart[i+1],length2=runLength[i+1];runLength[i]=length1+length2,i===stackSize-3&&(runStart[i+1]=runStart[i+2],runLength[i+1]=runLength[i+2]),stackSize--;var k=gallopRight(array[start2],array,start1,length1,0,compare);start1+=k,0!=(length1-=k)&&0!==(length2=gallopLeft(array[start1+length1-1],array,start2,length2,length2-1,compare))&&(length1<=length2?function(start1,length1,start2,length2){var i=0;for(i=0;i<length1;i++)tmp[i]=array[start1+i];var cursor1=0,cursor2=start2,dest=start1;if(array[dest++]=array[cursor2++],0==--length2){for(i=0;i<length1;i++)array[dest+i]=tmp[cursor1+i];return}if(1===length1){for(i=0;i<length2;i++)array[dest+i]=array[cursor2+i];return array[dest+length2]=tmp[cursor1]}var count1,count2,exit,_minGallop=minGallop;for(;;){count2=count1=0,exit=!1;do{if(compare(array[cursor2],tmp[cursor1])<0){if(array[dest++]=array[cursor2++],count2++,(count1=0)==--length2){exit=!0;break}}else if(array[dest++]=tmp[cursor1++],count1++,count2=0,1==--length1){exit=!0;break}}while((count1|count2)<_minGallop);if(exit)break;do{if(0!==(count1=gallopRight(array[cursor2],tmp,cursor1,length1,0,compare))){for(i=0;i<count1;i++)array[dest+i]=tmp[cursor1+i];if(dest+=count1,cursor1+=count1,(length1-=count1)<=1){exit=!0;break}}if(array[dest++]=array[cursor2++],0==--length2){exit=!0;break}if(0!==(count2=gallopLeft(tmp[cursor1],array,cursor2,length2,0,compare))){for(i=0;i<count2;i++)array[dest+i]=array[cursor2+i];if(dest+=count2,cursor2+=count2,0===(length2-=count2)){exit=!0;break}}if(array[dest++]=tmp[cursor1++],1==--length1){exit=!0;break}_minGallop--}while(DEFAULT_MIN_GALLOPING<=count1||DEFAULT_MIN_GALLOPING<=count2);if(exit)break;_minGallop<0&&(_minGallop=0),_minGallop+=2}if((minGallop=_minGallop)<1&&(minGallop=1),1===length1){for(i=0;i<length2;i++)array[dest+i]=array[cursor2+i];array[dest+length2]=tmp[cursor1]}else{if(0===length1)throw new Error;for(i=0;i<length1;i++)array[dest+i]=tmp[cursor1+i]}}:function(start1,length1,start2,length2){var i=0;for(i=0;i<length2;i++)tmp[i]=array[start2+i];var cursor1=start1+length1-1,cursor2=length2-1,dest=start2+length2-1,customCursor=0,customDest=0;if(array[dest--]=array[cursor1--],0==--length1){for(customCursor=dest-(length2-1),i=0;i<length2;i++)array[customCursor+i]=tmp[i];return}if(1===length2){for(customDest=(dest-=length1)+1,customCursor=(cursor1-=length1)+1,i=length1-1;0<=i;i--)array[customDest+i]=array[customCursor+i];return array[dest]=tmp[cursor2]}var _minGallop=minGallop;for(;;){var count1=0,count2=0,exit=!1;do{if(compare(tmp[cursor2],array[cursor1])<0){if(array[dest--]=array[cursor1--],count1++,(count2=0)==--length1){exit=!0;break}}else if(array[dest--]=tmp[cursor2--],count2++,count1=0,1==--length2){exit=!0;break}}while((count1|count2)<_minGallop);if(exit)break;do{if(0!==(count1=length1-gallopRight(tmp[cursor2],array,start1,length1,length1-1,compare))){for(length1-=count1,customDest=(dest-=count1)+1,customCursor=(cursor1-=count1)+1,i=count1-1;0<=i;i--)array[customDest+i]=array[customCursor+i];if(0===length1){exit=!0;break}}if(array[dest--]=tmp[cursor2--],1==--length2){exit=!0;break}if(0!==(count2=length2-gallopLeft(array[cursor1],tmp,0,length2,length2-1,compare))){for(length2-=count2,customDest=(dest-=count2)+1,customCursor=(cursor2-=count2)+1,i=0;i<count2;i++)array[customDest+i]=tmp[customCursor+i];if(length2<=1){exit=!0;break}}if(array[dest--]=array[cursor1--],0==--length1){exit=!0;break}_minGallop--}while(DEFAULT_MIN_GALLOPING<=count1||DEFAULT_MIN_GALLOPING<=count2);if(exit)break;_minGallop<0&&(_minGallop=0),_minGallop+=2}(minGallop=_minGallop)<1&&(minGallop=1);if(1===length2){for(customDest=(dest-=length1)+1,customCursor=(cursor1-=length1)+1,i=length1-1;0<=i;i--)array[customDest+i]=array[customCursor+i];array[dest]=tmp[cursor2]}else{if(0===length2)throw new Error;for(customCursor=dest-(length2-1),i=0;i<length2;i++)array[customCursor+i]=tmp[i]}})(start1,length1,start2,length2)}runStart=[],runLength=[],this.mergeRuns=function(){for(;1<stackSize;){var n=stackSize-2;if(1<=n&&runLength[n-1]<=runLength[n]+runLength[n+1]||2<=n&&runLength[n-2]<=runLength[n]+runLength[n-1])runLength[n-1]<runLength[n+1]&&n--;else if(runLength[n]>runLength[n+1])break;mergeAt(n)}},this.forceMergeRuns=function(){for(;1<stackSize;){var n=stackSize-2;0<n&&runLength[n-1]<runLength[n+1]&&n--,mergeAt(n)}},this.pushRun=function(_runStart,_runLength){runStart[stackSize]=_runStart,runLength[stackSize]=_runLength,stackSize+=1}}function sort(array,compare,lo,hi){lo=lo||0;var remaining=(hi=hi||array.length)-lo;if(!(remaining<2)){var runLength=0;if(remaining<DEFAULT_MIN_MERGE)binaryInsertionSort(array,lo,hi,lo+(runLength=makeAscendingRun(array,lo,hi,compare)),compare);else{var force,ts=new TimSort(array,compare),minRun=function(n){for(var r=0;DEFAULT_MIN_MERGE<=n;)r|=1&n,n>>=1;return n+r}(remaining);do{(runLength=makeAscendingRun(array,lo,hi,compare))<minRun&&(minRun<(force=remaining)&&(force=minRun),binaryInsertionSort(array,lo,lo+force,lo+runLength,compare),runLength=force),ts.pushRun(lo,runLength),ts.mergeRuns(),remaining-=runLength,lo+=runLength}while(0!==remaining);ts.forceMergeRuns()}}}function shapeCompareFunc(a,b){return a.zlevel===b.zlevel?a.z===b.z?a.z2-b.z2:a.z-b.z:a.zlevel-b.zlevel}function Storage(){this._roots=[],this._displayList=[],this._displayListLen=0}Storage.prototype={constructor:Storage,traverse:function(cb,context){for(var i=0;i<this._roots.length;i++)this._roots[i].traverse(cb,context)},getDisplayList:function(update,includeIgnore){return includeIgnore=includeIgnore||!1,update&&this.updateDisplayList(includeIgnore),this._displayList},updateDisplayList:function(includeIgnore){this._displayListLen=0;for(var roots=this._roots,displayList=this._displayList,i=0,len=roots.length;i<len;i++)this._updateAndAddDisplayable(roots[i],null,includeIgnore);displayList.length=this._displayListLen,env$1.canvasSupported&&sort(displayList,shapeCompareFunc)},_updateAndAddDisplayable:function(el,clipPaths,includeIgnore){if(!el.ignore||includeIgnore){el.beforeUpdate(),el.__dirty&&el.update(),el.afterUpdate();var userSetClipPath=el.clipPath;if(userSetClipPath){clipPaths=clipPaths?clipPaths.slice():[];for(var currentClipPath=userSetClipPath,parentClipPath=el;currentClipPath;)currentClipPath.parent=parentClipPath,currentClipPath.updateTransform(),clipPaths.push(currentClipPath),currentClipPath=(parentClipPath=currentClipPath).clipPath}if(el.isGroup){for(var children=el._children,i=0;i<children.length;i++){var child=children[i];el.__dirty&&(child.__dirty=!0),this._updateAndAddDisplayable(child,clipPaths,includeIgnore)}el.__dirty=!1}else el.__clipPaths=clipPaths,this._displayList[this._displayListLen++]=el}},addRoot:function(el){el.__storage!==this&&(el instanceof Group&&el.addChildrenToStorage(this),this.addToStorage(el),this._roots.push(el))},delRoot:function(el){if(null==el){for(var i=0;i<this._roots.length;i++){var root=this._roots[i];root instanceof Group&&root.delChildrenFromStorage(this)}return this._roots=[],this._displayList=[],void(this._displayListLen=0)}if(el instanceof Array)for(var i=0,l=el.length;i<l;i++)this.delRoot(el[i]);else{var idx=indexOf(this._roots,el);0<=idx&&(this.delFromStorage(el),this._roots.splice(idx,1),el instanceof Group&&el.delChildrenFromStorage(this))}},addToStorage:function(el){return el.__storage=this,el.dirty(!1),this},delFromStorage:function(el){return el&&(el.__storage=null),this},dispose:function(){this._renderList=this._roots=null},displayableSortFunc:shapeCompareFunc};var STYLE_COMMON_PROPS=[["shadowBlur",0],["shadowOffsetX",0],["shadowOffsetY",0],["shadowColor","#000"],["lineCap","butt"],["lineJoin","miter"],["miterLimit",10]],Style=function(opts,host){this.extendFrom(opts,!1),this.host=host};function createLinearGradient(ctx,obj,rect){var x=null==obj.x?0:obj.x,x2=null==obj.x2?1:obj.x2,y=null==obj.y?0:obj.y,y2=null==obj.y2?0:obj.y2;return obj.global||(x=x*rect.width+rect.x,x2=x2*rect.width+rect.x,y=y*rect.height+rect.y,y2=y2*rect.height+rect.y),ctx.createLinearGradient(x,y,x2,y2)}function createRadialGradient(ctx,obj,rect){var width=rect.width,height=rect.height,min=Math.min(width,height),x=null==obj.x?.5:obj.x,y=null==obj.y?.5:obj.y,r=null==obj.r?.5:obj.r;return obj.global||(x=x*width+rect.x,y=y*height+rect.y,r*=min),ctx.createRadialGradient(x,y,0,x,y,r)}Style.prototype={constructor:Style,host:null,fill:"#000",stroke:null,opacity:1,lineDash:null,lineDashOffset:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,lineWidth:1,strokeNoScale:!1,text:null,font:null,textFont:null,fontStyle:null,fontWeight:null,fontSize:null,fontFamily:null,textTag:null,textFill:"#000",textStroke:null,textWidth:null,textHeight:null,textStrokeWidth:0,textLineHeight:null,textPosition:"inside",textRect:null,textOffset:null,textAlign:null,textVerticalAlign:null,textDistance:5,textShadowColor:"transparent",textShadowBlur:0,textShadowOffsetX:0,textShadowOffsetY:0,textBoxShadowColor:"transparent",textBoxShadowBlur:0,textBoxShadowOffsetX:0,textBoxShadowOffsetY:0,transformText:!1,textRotation:0,textOrigin:null,textBackgroundColor:null,textBorderColor:null,textBorderWidth:0,textBorderRadius:0,textPadding:null,rich:null,truncate:null,blend:null,bind:function(ctx,el,prevEl){for(var lineWidth,prevStyle=prevEl&&prevEl.style,firstDraw=!prevStyle,i=0;i<STYLE_COMMON_PROPS.length;i++){var prop=STYLE_COMMON_PROPS[i],styleName=prop[0];!firstDraw&&this[styleName]===prevStyle[styleName]||(ctx[styleName]=this[styleName]||prop[1])}!firstDraw&&this.fill===prevStyle.fill||(ctx.fillStyle=this.fill),!firstDraw&&this.stroke===prevStyle.stroke||(ctx.strokeStyle=this.stroke),!firstDraw&&this.opacity===prevStyle.opacity||(ctx.globalAlpha=null==this.opacity?1:this.opacity),!firstDraw&&this.blend===prevStyle.blend||(ctx.globalCompositeOperation=this.blend||"source-over"),this.hasStroke()&&(lineWidth=this.lineWidth,ctx.lineWidth=lineWidth/(this.strokeNoScale&&el&&el.getLineScale?el.getLineScale():1))},hasFill:function(){var fill=this.fill;return null!=fill&&"none"!==fill},hasStroke:function(){var stroke=this.stroke;return null!=stroke&&"none"!==stroke&&0<this.lineWidth},extendFrom:function(otherStyle,overwrite){if(otherStyle)for(var name in otherStyle)!otherStyle.hasOwnProperty(name)||!0!==overwrite&&(!1===overwrite?this.hasOwnProperty(name):null==otherStyle[name])||(this[name]=otherStyle[name])},set:function(obj,value){"string"==typeof obj?this[obj]=value:this.extendFrom(obj,!0)},clone:function(){var newStyle=new this.constructor;return newStyle.extendFrom(this,!0),newStyle},getGradient:function(ctx,obj,rect){for(var canvasGradient=("radial"===obj.type?createRadialGradient:createLinearGradient)(ctx,obj,rect),colorStops=obj.colorStops,i=0;i<colorStops.length;i++)canvasGradient.addColorStop(colorStops[i].offset,colorStops[i].color);return canvasGradient}};for(var styleProto=Style.prototype,i=0;i<STYLE_COMMON_PROPS.length;i++){var prop=STYLE_COMMON_PROPS[i];prop[0]in styleProto||(styleProto[prop[0]]=prop[1])}Style.getGradient=styleProto.getGradient;function Pattern(image,repeat){this.image=image,this.repeat=repeat,this.type="pattern"}function returnFalse(){return!1}function createDom(id,painter,dpr){var newDom=createCanvas(),width=painter.getWidth(),height=painter.getHeight(),newDomStyle=newDom.style;return newDomStyle.position="absolute",newDomStyle.left=0,newDomStyle.top=0,newDomStyle.width=width+"px",newDomStyle.height=height+"px",newDom.width=width*dpr,newDom.height=height*dpr,newDom.setAttribute("data-zr-dom-id",id),newDom}Pattern.prototype.getCanvasPattern=function(ctx){return ctx.createPattern(this.image,this.repeat||"repeat")};function Layer(id,painter,dpr){var dom;dpr=dpr||devicePixelRatio,"string"==typeof id?dom=createDom(id,painter,dpr):isObject(id)&&(id=(dom=id).id),this.id=id;var domStyle=(this.dom=dom).style;domStyle&&(dom.onselectstart=returnFalse,domStyle["-webkit-user-select"]="none",domStyle["user-select"]="none",domStyle["-webkit-touch-callout"]="none",domStyle["-webkit-tap-highlight-color"]="rgba(0,0,0,0)",domStyle.padding=0,domStyle.margin=0,domStyle["border-width"]=0),this.domBack=null,this.ctxBack=null,this.painter=painter,this.config=null,this.clearColor=0,this.motionBlur=!1,this.lastFrameAlpha=.7,this.dpr=dpr}Layer.prototype={constructor:Layer,elCount:0,__dirty:!0,initContext:function(){this.ctx=this.dom.getContext("2d"),this.ctx.__currentValues={},this.ctx.dpr=this.dpr},createBackBuffer:function(){var dpr=this.dpr;this.domBack=createDom("back-"+this.id,this.painter,dpr),this.ctxBack=this.domBack.getContext("2d"),this.ctxBack.__currentValues={},1!=dpr&&this.ctxBack.scale(dpr,dpr)},resize:function(width,height){var dpr=this.dpr,dom=this.dom,domStyle=dom.style,domBack=this.domBack;domStyle.width=width+"px",domStyle.height=height+"px",dom.width=width*dpr,dom.height=height*dpr,domBack&&(domBack.width=width*dpr,domBack.height=height*dpr,1!=dpr&&this.ctxBack.scale(dpr,dpr))},clear:function(clearAll){var clearColorGradientOrPattern,domBack,dom=this.dom,ctx=this.ctx,width=dom.width,height=dom.height,clearColor=this.clearColor,haveMotionBLur=this.motionBlur&&!clearAll,lastFrameAlpha=this.lastFrameAlpha,dpr=this.dpr;haveMotionBLur&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(dom,0,0,width/dpr,height/dpr)),ctx.clearRect(0,0,width,height),clearColor&&(clearColor.colorStops?(clearColorGradientOrPattern=clearColor.__canvasGradient||Style.getGradient(ctx,clearColor,{x:0,y:0,width:width,height:height}),clearColor.__canvasGradient=clearColorGradientOrPattern):clearColor.image&&(clearColorGradientOrPattern=Pattern.prototype.getCanvasPattern.call(clearColor,ctx)),ctx.save(),ctx.fillStyle=clearColorGradientOrPattern||clearColor,ctx.fillRect(0,0,width,height),ctx.restore()),haveMotionBLur&&(domBack=this.domBack,ctx.save(),ctx.globalAlpha=lastFrameAlpha,ctx.drawImage(domBack,0,0,width,height),ctx.restore())}};var requestAnimationFrame="undefined"!=typeof window&&(window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.msRequestAnimationFrame&&window.msRequestAnimationFrame.bind(window)||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame)||function(func){setTimeout(func,16)},globalImageCache=new LRU(50);function createOrUpdateImage(newImageOrSrc,image,hostEl,cb,cbPayload){if(newImageOrSrc){if("string"!=typeof newImageOrSrc)return newImageOrSrc;if(image&&image.__zrImageSrc===newImageOrSrc||!hostEl)return image;var cachedImgObj=globalImageCache.get(newImageOrSrc),pendingWrap={hostEl:hostEl,cb:cb,cbPayload:cbPayload};return cachedImgObj?isImageReady(image=cachedImgObj.image)||cachedImgObj.pending.push(pendingWrap):((image=image||new Image).onload=imageOnLoad,globalImageCache.put(newImageOrSrc,image.__cachedImgObj={image:image,pending:[pendingWrap]}),image.src=image.__zrImageSrc=newImageOrSrc),image}return image}function imageOnLoad(){var cachedImgObj=this.__cachedImgObj;this.onload=this.__cachedImgObj=null;for(var i=0;i<cachedImgObj.pending.length;i++){var pendingWrap=cachedImgObj.pending[i],cb=pendingWrap.cb;cb&&cb(this,pendingWrap.cbPayload),pendingWrap.hostEl.dirty()}cachedImgObj.pending.length=0}function isImageReady(image){return image&&image.width&&image.height}var textWidthCache={},textWidthCacheCounter=0,TEXT_CACHE_MAX=5e3,STYLE_REG=/\{([a-zA-Z0-9_]+)\|([^}]*)\}/g,DEFAULT_FONT="12px sans-serif",methods$1={};function getWidth(text,font){var key=text+":"+(font=font||DEFAULT_FONT);if(textWidthCache[key])return textWidthCache[key];for(var textLines=(text+"").split("\n"),width=0,i=0,l=textLines.length;i<l;i++)width=Math.max(function(text,font){return methods$1.measureText(text,font)}(textLines[i],font).width,width);return TEXT_CACHE_MAX<textWidthCacheCounter&&(textWidthCacheCounter=0,textWidthCache={}),textWidthCacheCounter++,textWidthCache[key]=width}function getBoundingRect(text,font,textAlign,textVerticalAlign,textPadding,rich,truncate){return rich?function(text,font,textAlign,textVerticalAlign,textPadding,rich,truncate){var contentBlock=parseRichText(text,{rich:rich,truncate:truncate,font:font,textAlign:textAlign,textPadding:textPadding}),outerWidth=contentBlock.outerWidth,outerHeight=contentBlock.outerHeight,x=adjustTextX(0,outerWidth,textAlign),y=adjustTextY(0,outerHeight,textVerticalAlign);return new BoundingRect(x,y,outerWidth,outerHeight)}(text,font,textAlign,textVerticalAlign,textPadding,rich,truncate):function(text,font,textAlign,textVerticalAlign,textPadding,truncate){var contentBlock=parsePlainText(text,font,textPadding,truncate),outerWidth=getWidth(text,font);textPadding&&(outerWidth+=textPadding[1]+textPadding[3]);var outerHeight=contentBlock.outerHeight,x=adjustTextX(0,outerWidth,textAlign),y=adjustTextY(0,outerHeight,textVerticalAlign),rect=new BoundingRect(x,y,outerWidth,outerHeight);return rect.lineHeight=contentBlock.lineHeight,rect}(text,font,textAlign,textVerticalAlign,textPadding,truncate)}function adjustTextX(x,width,textAlign){return"right"===textAlign?x-=width:"center"===textAlign&&(x-=width/2),x}function adjustTextY(y,height,textVerticalAlign){return"middle"===textVerticalAlign?y-=height/2:"bottom"===textVerticalAlign&&(y-=height),y}function adjustTextPositionOnRect(textPosition,rect,distance){var x=rect.x,y=rect.y,height=rect.height,width=rect.width,halfHeight=height/2,textAlign="left",textVerticalAlign="top";switch(textPosition){case"left":x-=distance,y+=halfHeight,textAlign="right",textVerticalAlign="middle";break;case"right":x+=distance+width,y+=halfHeight,textVerticalAlign="middle";break;case"top":x+=width/2,y-=distance,textAlign="center",textVerticalAlign="bottom";break;case"bottom":x+=width/2,y+=height+distance,textAlign="center";break;case"inside":x+=width/2,y+=halfHeight,textAlign="center",textVerticalAlign="middle";break;case"insideLeft":x+=distance,y+=halfHeight,textVerticalAlign="middle";break;case"insideRight":x+=width-distance,y+=halfHeight,textAlign="right",textVerticalAlign="middle";break;case"insideTop":x+=width/2,y+=distance,textAlign="center";break;case"insideBottom":x+=width/2,y+=height-distance,textAlign="center",textVerticalAlign="bottom";break;case"insideTopLeft":x+=distance,y+=distance;break;case"insideTopRight":x+=width-distance,y+=distance,textAlign="right";break;case"insideBottomLeft":x+=distance,y+=height-distance,textVerticalAlign="bottom";break;case"insideBottomRight":x+=width-distance,y+=height-distance,textAlign="right",textVerticalAlign="bottom"}return{x:x,y:y,textAlign:textAlign,textVerticalAlign:textVerticalAlign}}function prepareTruncateOptions(containerWidth,font,ellipsis,options){(options=extend({},options)).font=font;ellipsis=retrieve2(ellipsis,"...");options.maxIterations=retrieve2(options.maxIterations,2);var minChar=options.minChar=retrieve2(options.minChar,0);options.cnCharWidth=getWidth("国",font);var ascCharWidth=options.ascCharWidth=getWidth("a",font);options.placeholder=retrieve2(options.placeholder,"");for(var contentWidth=containerWidth=Math.max(0,containerWidth-1),i=0;i<minChar&&ascCharWidth<=contentWidth;i++)contentWidth-=ascCharWidth;var ellipsisWidth=getWidth(ellipsis);return contentWidth<ellipsisWidth&&(ellipsis="",ellipsisWidth=0),contentWidth=containerWidth-ellipsisWidth,options.ellipsis=ellipsis,options.ellipsisWidth=ellipsisWidth,options.contentWidth=contentWidth,options.containerWidth=containerWidth,options}function truncateSingleLine(textLine,options){var containerWidth=options.containerWidth,font=options.font,contentWidth=options.contentWidth;if(!containerWidth)return"";if((lineWidth=getWidth(textLine,font))<=containerWidth)return textLine;for(var j=0;;j++){if(lineWidth<=contentWidth||j>=options.maxIterations){textLine+=options.ellipsis;break}var subLength=0===j?function(text,contentWidth,ascCharWidth,cnCharWidth){for(var width=0,i=0,len=text.length;i<len&&width<contentWidth;i++){var charCode=text.charCodeAt(i);width+=0<=charCode&&charCode<=127?ascCharWidth:cnCharWidth}return i}(textLine,contentWidth,options.ascCharWidth,options.cnCharWidth):0<lineWidth?Math.floor(textLine.length*contentWidth/lineWidth):0,lineWidth=getWidth(textLine=textLine.substr(0,subLength),font)}return""===textLine&&(textLine=options.placeholder),textLine}function getLineHeight(font){return getWidth("国",font)}function parsePlainText(text,font,padding,truncate){null!=text&&(text+="");var lineHeight=getLineHeight(font),lines=text?text.split("\n"):[],height=lines.length*lineHeight,outerHeight=height;if(padding&&(outerHeight+=padding[0]+padding[2]),text&&truncate){var truncOuterHeight=truncate.outerHeight,truncOuterWidth=truncate.outerWidth;if(null!=truncOuterHeight&&truncOuterHeight<outerHeight)text="",lines=[];else if(null!=truncOuterWidth)for(var options=prepareTruncateOptions(truncOuterWidth-(padding?padding[1]+padding[3]:0),font,truncate.ellipsis,{minChar:truncate.minChar,placeholder:truncate.placeholder}),i=0,len=lines.length;i<len;i++)lines[i]=truncateSingleLine(lines[i],options)}return{lines:lines,height:height,outerHeight:outerHeight,lineHeight:lineHeight}}function parseRichText(text,style){var contentBlock={lines:[],width:0,height:0};if(null!=text&&(text+=""),!text)return contentBlock;for(var result,lastIndex=STYLE_REG.lastIndex=0;null!=(result=STYLE_REG.exec(text));){var matchedIndex=result.index;lastIndex<matchedIndex&&pushTokens(contentBlock,text.substring(lastIndex,matchedIndex)),pushTokens(contentBlock,result[2],result[1]),lastIndex=STYLE_REG.lastIndex}lastIndex<text.length&&pushTokens(contentBlock,text.substring(lastIndex,text.length));var lines=contentBlock.lines,contentHeight=0,contentWidth=0,pendingList=[],stlPadding=style.textPadding,truncate=style.truncate,truncateWidth=truncate&&truncate.outerWidth,truncateHeight=truncate&&truncate.outerHeight;stlPadding&&(null!=truncateWidth&&(truncateWidth-=stlPadding[1]+stlPadding[3]),null!=truncateHeight&&(truncateHeight-=stlPadding[0]+stlPadding[2]));for(var i=0;i<lines.length;i++){for(var line=lines[i],lineHeight=0,lineWidth=0,j=0;j<line.tokens.length;j++){var tokenStyle=(token=line.tokens[j]).styleName&&style.rich[token.styleName]||{},textPadding=token.textPadding=tokenStyle.textPadding,font=token.font=tokenStyle.font||style.font,tokenHeight=token.textHeight=retrieve2(tokenStyle.textHeight,getLineHeight(font));if(textPadding&&(tokenHeight+=textPadding[0]+textPadding[2]),token.height=tokenHeight,token.lineHeight=retrieve3(tokenStyle.textLineHeight,style.textLineHeight,tokenHeight),token.textAlign=tokenStyle&&tokenStyle.textAlign||style.textAlign,token.textVerticalAlign=tokenStyle&&tokenStyle.textVerticalAlign||"middle",null!=truncateHeight&&contentHeight+token.lineHeight>truncateHeight)return{lines:[],width:0,height:0};token.textWidth=getWidth(token.text,font);var textBackgroundColor,bgImg,paddingW,remianTruncWidth,tokenWidth=tokenStyle.textWidth,tokenWidthNotSpecified=null==tokenWidth||"auto"===tokenWidth;"string"==typeof tokenWidth&&"%"===tokenWidth.charAt(tokenWidth.length-1)?(token.percentWidth=tokenWidth,pendingList.push(token),tokenWidth=0):(tokenWidthNotSpecified&&(tokenWidth=token.textWidth,(bgImg=(textBackgroundColor=tokenStyle.textBackgroundColor)&&textBackgroundColor.image)&&isImageReady(bgImg=function(newImageOrSrc){if("string"!=typeof newImageOrSrc)return newImageOrSrc;var cachedImgObj=globalImageCache.get(newImageOrSrc);return cachedImgObj&&cachedImgObj.image}(bgImg))&&(tokenWidth=Math.max(tokenWidth,bgImg.width*tokenHeight/bgImg.height))),tokenWidth+=paddingW=textPadding?textPadding[1]+textPadding[3]:0,null!=(remianTruncWidth=null!=truncateWidth?truncateWidth-lineWidth:null)&&remianTruncWidth<tokenWidth&&(!tokenWidthNotSpecified||remianTruncWidth<paddingW?(token.text="",token.textWidth=tokenWidth=0):(token.text=function(text,containerWidth,font,ellipsis,options){if(!containerWidth)return"";var textLines=(text+"").split("\n");options=prepareTruncateOptions(containerWidth,font,ellipsis,options);for(var i=0,len=textLines.length;i<len;i++)textLines[i]=truncateSingleLine(textLines[i],options);return textLines.join("\n")}(token.text,remianTruncWidth-paddingW,font,truncate.ellipsis,{minChar:truncate.minChar}),token.textWidth=getWidth(token.text,font),tokenWidth=token.textWidth+paddingW))),lineWidth+=token.width=tokenWidth,tokenStyle&&(lineHeight=Math.max(lineHeight,token.lineHeight))}line.width=lineWidth,contentHeight+=line.lineHeight=lineHeight,contentWidth=Math.max(contentWidth,lineWidth)}contentBlock.outerWidth=contentBlock.width=retrieve2(style.textWidth,contentWidth),contentBlock.outerHeight=contentBlock.height=retrieve2(style.textHeight,contentHeight),stlPadding&&(contentBlock.outerWidth+=stlPadding[1]+stlPadding[3],contentBlock.outerHeight+=stlPadding[0]+stlPadding[2]);for(i=0;i<pendingList.length;i++){var token,percentWidth=(token=pendingList[i]).percentWidth;token.width=parseInt(percentWidth,10)/100*contentWidth}return contentBlock}function pushTokens(block,str,styleName){for(var isEmptyStr=""===str,strs=str.split("\n"),lines=block.lines,i=0;i<strs.length;i++){var tokens,tokensLen,text=strs[i],token={styleName:styleName,text:text,isLineHolder:!text&&!isEmptyStr};i?lines.push({tokens:[token]}):1===(tokensLen=(tokens=(lines[lines.length-1]||(lines[0]={tokens:[]})).tokens).length)&&tokens[0].isLineHolder?tokens[0]=token:!text&&tokensLen&&!isEmptyStr||tokens.push(token)}}function buildPath(ctx,shape){var r1,r2,r3,r4,total,x=shape.x,y=shape.y,width=shape.width,height=shape.height,r=shape.r;width<0&&(x+=width,width=-width),height<0&&(y+=height,height=-height),"number"==typeof r?r1=r2=r3=r4=r:r instanceof Array?1===r.length?r1=r2=r3=r4=r[0]:2===r.length?(r1=r3=r[0],r2=r4=r[1]):3===r.length?(r1=r[0],r2=r4=r[1],r3=r[2]):(r1=r[0],r2=r[1],r3=r[2],r4=r[3]):r1=r2=r3=r4=0,width<r1+r2&&(r1*=width/(total=r1+r2),r2*=width/total),width<r3+r4&&(r3*=width/(total=r3+r4),r4*=width/total),height<r2+r3&&(r2*=height/(total=r2+r3),r3*=height/total),height<r1+r4&&(r1*=height/(total=r1+r4),r4*=height/total),ctx.moveTo(x+r1,y),ctx.lineTo(x+width-r2,y),0!==r2&&ctx.quadraticCurveTo(x+width,y,x+width,y+r2),ctx.lineTo(x+width,y+height-r3),0!==r3&&ctx.quadraticCurveTo(x+width,y+height,x+width-r3,y+height),ctx.lineTo(x+r4,y+height),0!==r4&&ctx.quadraticCurveTo(x,y+height,x,y+height-r4),ctx.lineTo(x,y+r1),0!==r1&&ctx.quadraticCurveTo(x,y,x+r1,y)}methods$1.measureText=function(text,font){var ctx=getContext();return ctx.font=font||DEFAULT_FONT,ctx.measureText(text)};var VALID_TEXT_ALIGN={left:1,right:1,center:1},VALID_TEXT_VERTICAL_ALIGN={top:1,bottom:1,middle:1};function normalizeTextStyle(style){return normalizeStyle(style),each(style.rich,normalizeStyle),style}function normalizeStyle(style){var textAlign,textVerticalAlign;style&&(style.font=function(style){return(style.fontSize||style.fontFamily)&&[style.fontStyle,style.fontWeight,(style.fontSize||12)+"px",style.fontFamily||"sans-serif"].join(" ")||style.textFont||style.font}(style),"middle"===(textAlign=style.textAlign)&&(textAlign="center"),style.textAlign=null==textAlign||VALID_TEXT_ALIGN[textAlign]?textAlign:"left","center"===(textVerticalAlign=style.textVerticalAlign||style.textBaseline)&&(textVerticalAlign="middle"),style.textVerticalAlign=null==textVerticalAlign||VALID_TEXT_VERTICAL_ALIGN[textVerticalAlign]?textVerticalAlign:"top",style.textPadding&&(style.textPadding=normalizeCssArray(style.textPadding)))}function renderText(hostEl,ctx,text,style,rect){(style.rich?function(hostEl,ctx,text,style,rect){var contentBlock=hostEl.__textCotentBlock;contentBlock&&!hostEl.__dirty||(contentBlock=hostEl.__textCotentBlock=parseRichText(text,style));!function(hostEl,ctx,contentBlock,style,rect){var contentWidth=contentBlock.width,outerWidth=contentBlock.outerWidth,outerHeight=contentBlock.outerHeight,textPadding=style.textPadding,boxPos=getBoxPosition(0,style,rect),baseX=boxPos.baseX,baseY=boxPos.baseY,textAlign=boxPos.textAlign,textVerticalAlign=boxPos.textVerticalAlign;applyTextRotation(ctx,style,rect,baseX,baseY);var boxX=adjustTextX(baseX,outerWidth,textAlign),boxY=adjustTextY(baseY,outerHeight,textVerticalAlign),xLeft=boxX,lineTop=boxY;textPadding&&(xLeft+=textPadding[3],lineTop+=textPadding[0]);var xRight=xLeft+contentWidth;needDrawBackground(style)&&drawBackground(hostEl,ctx,style,boxX,boxY,outerWidth,outerHeight);for(var token,i=0;i<contentBlock.lines.length;i++){for(var line=contentBlock.lines[i],tokens=line.tokens,tokenCount=tokens.length,lineHeight=line.lineHeight,usedWidth=line.width,leftIndex=0,lineXLeft=xLeft,lineXRight=xRight,rightIndex=tokenCount-1;leftIndex<tokenCount&&(!(token=tokens[leftIndex]).textAlign||"left"===token.textAlign);)placeToken(hostEl,ctx,token,style,lineHeight,lineTop,lineXLeft,"left"),usedWidth-=token.width,lineXLeft+=token.width,leftIndex++;for(;0<=rightIndex&&"right"===(token=tokens[rightIndex]).textAlign;)placeToken(hostEl,ctx,token,style,lineHeight,lineTop,lineXRight,"right"),usedWidth-=token.width,lineXRight-=token.width,rightIndex--;for(lineXLeft+=(contentWidth-(lineXLeft-xLeft)-(xRight-lineXRight)-usedWidth)/2;leftIndex<=rightIndex;)token=tokens[leftIndex],placeToken(hostEl,ctx,token,style,lineHeight,lineTop,lineXLeft+token.width/2,"center"),lineXLeft+=token.width,leftIndex++;lineTop+=lineHeight}}(hostEl,ctx,contentBlock,style,rect)}:function(hostEl,ctx,text,style,rect){var font=setCtx(ctx,"font",style.font||DEFAULT_FONT),textPadding=style.textPadding,contentBlock=hostEl.__textCotentBlock;contentBlock&&!hostEl.__dirty||(contentBlock=hostEl.__textCotentBlock=parsePlainText(text,font,textPadding,style.truncate));var outerHeight=contentBlock.outerHeight,textLines=contentBlock.lines,lineHeight=contentBlock.lineHeight,boxPos=getBoxPosition(0,style,rect),baseX=boxPos.baseX,baseY=boxPos.baseY,textAlign=boxPos.textAlign,textVerticalAlign=boxPos.textVerticalAlign;applyTextRotation(ctx,style,rect,baseX,baseY);var boxY=adjustTextY(baseY,outerHeight,textVerticalAlign),textX=baseX,textY=boxY,needDrawBg=needDrawBackground(style);{var outerWidth,boxX;(needDrawBg||textPadding)&&(outerWidth=getWidth(text,font),textPadding&&(outerWidth+=textPadding[1]+textPadding[3]),boxX=adjustTextX(baseX,outerWidth,textAlign),needDrawBg&&drawBackground(hostEl,ctx,style,boxX,boxY,outerWidth,outerHeight),textPadding&&(textX=getTextXForPadding(baseX,textAlign,textPadding),textY+=textPadding[0]))}setCtx(ctx,"textAlign",textAlign||"left"),setCtx(ctx,"textBaseline","middle"),setCtx(ctx,"shadowBlur",style.textShadowBlur||0),setCtx(ctx,"shadowColor",style.textShadowColor||"transparent"),setCtx(ctx,"shadowOffsetX",style.textShadowOffsetX||0),setCtx(ctx,"shadowOffsetY",style.textShadowOffsetY||0),textY+=lineHeight/2;var textStrokeWidth=style.textStrokeWidth,textStroke=getStroke(style.textStroke,textStrokeWidth),textFill=getFill(style.textFill);textStroke&&(setCtx(ctx,"lineWidth",textStrokeWidth),setCtx(ctx,"strokeStyle",textStroke));textFill&&setCtx(ctx,"fillStyle",textFill);for(var i=0;i<textLines.length;i++)textStroke&&ctx.strokeText(textLines[i],textX,textY),textFill&&ctx.fillText(textLines[i],textX,textY),textY+=lineHeight})(hostEl,ctx,text,style,rect)}function applyTextRotation(ctx,style,rect,x,y){var origin;rect&&style.textRotation&&("center"===(origin=style.textOrigin)?(x=rect.width/2+rect.x,y=rect.height/2+rect.y):origin&&(x=origin[0]+rect.x,y=origin[1]+rect.y),ctx.translate(x,y),ctx.rotate(-style.textRotation),ctx.translate(-x,-y))}function placeToken(hostEl,ctx,token,style,lineHeight,lineTop,x,textAlign){var tokenStyle=style.rich[token.styleName]||{},textVerticalAlign=token.textVerticalAlign,y=lineTop+lineHeight/2;"top"===textVerticalAlign?y=lineTop+token.height/2:"bottom"===textVerticalAlign&&(y=lineTop+lineHeight-token.height/2),!token.isLineHolder&&needDrawBackground(tokenStyle)&&drawBackground(hostEl,ctx,tokenStyle,"right"===textAlign?x-token.width:"center"===textAlign?x-token.width/2:x,y-token.height/2,token.width,token.height);var textPadding=token.textPadding;textPadding&&(x=getTextXForPadding(x,textAlign,textPadding),y-=token.height/2-textPadding[2]-token.textHeight/2),setCtx(ctx,"shadowBlur",retrieve3(tokenStyle.textShadowBlur,style.textShadowBlur,0)),setCtx(ctx,"shadowColor",tokenStyle.textShadowColor||style.textShadowColor||"transparent"),setCtx(ctx,"shadowOffsetX",retrieve3(tokenStyle.textShadowOffsetX,style.textShadowOffsetX,0)),setCtx(ctx,"shadowOffsetY",retrieve3(tokenStyle.textShadowOffsetY,style.textShadowOffsetY,0)),setCtx(ctx,"textAlign",textAlign),setCtx(ctx,"textBaseline","middle"),setCtx(ctx,"font",token.font||DEFAULT_FONT);var textStroke=getStroke(tokenStyle.textStroke||style.textStroke,void 0),textFill=getFill(tokenStyle.textFill||style.textFill),textStrokeWidth=retrieve2(tokenStyle.textStrokeWidth,style.textStrokeWidth);textStroke&&(setCtx(ctx,"lineWidth",textStrokeWidth),setCtx(ctx,"strokeStyle",textStroke),ctx.strokeText(token.text,x,y)),textFill&&(setCtx(ctx,"fillStyle",textFill),ctx.fillText(token.text,x,y))}function needDrawBackground(style){return style.textBackgroundColor||style.textBorderWidth&&style.textBorderColor}function drawBackground(hostEl,ctx,style,x,y,width,height){var textBorderRadius,image,textBackgroundColor=style.textBackgroundColor,textBorderWidth=style.textBorderWidth,textBorderColor=style.textBorderColor,isPlainBg=isString(textBackgroundColor);setCtx(ctx,"shadowBlur",style.textBoxShadowBlur||0),setCtx(ctx,"shadowColor",style.textBoxShadowColor||"transparent"),setCtx(ctx,"shadowOffsetX",style.textBoxShadowOffsetX||0),setCtx(ctx,"shadowOffsetY",style.textBoxShadowOffsetY||0),(isPlainBg||textBorderWidth&&textBorderColor)&&(ctx.beginPath(),(textBorderRadius=style.textBorderRadius)?buildPath(ctx,{x:x,y:y,width:width,height:height,r:textBorderRadius}):ctx.rect(x,y,width,height),ctx.closePath()),isPlainBg?(setCtx(ctx,"fillStyle",textBackgroundColor),ctx.fill()):!isObject(textBackgroundColor)||(image=createOrUpdateImage(image=textBackgroundColor.image,null,hostEl,onBgImageLoaded,textBackgroundColor))&&isImageReady(image)&&ctx.drawImage(image,x,y,width,height),textBorderWidth&&textBorderColor&&(setCtx(ctx,"lineWidth",textBorderWidth),setCtx(ctx,"strokeStyle",textBorderColor),ctx.stroke())}function onBgImageLoaded(image,textBackgroundColor){textBackgroundColor.image=image}function getBoxPosition(blockHeiht,style,rect){var textPosition,res,textOffset,baseX=style.x||0,baseY=style.y||0,textAlign=style.textAlign,textVerticalAlign=style.textVerticalAlign;return rect&&((textPosition=style.textPosition)instanceof Array?(baseX=rect.x+parsePercent(textPosition[0],rect.width),baseY=rect.y+parsePercent(textPosition[1],rect.height)):(baseX=(res=adjustTextPositionOnRect(textPosition,rect,style.textDistance)).x,baseY=res.y,textAlign=textAlign||res.textAlign,textVerticalAlign=textVerticalAlign||res.textVerticalAlign),(textOffset=style.textOffset)&&(baseX+=textOffset[0],baseY+=textOffset[1])),{baseX:baseX,baseY:baseY,textAlign:textAlign,textVerticalAlign:textVerticalAlign}}function setCtx(ctx,prop,value){return ctx[prop]=value,ctx[prop]}function getStroke(stroke,lineWidth){return null==stroke||lineWidth<=0||"transparent"===stroke||"none"===stroke?null:stroke.image||stroke.colorStops?"#000":stroke}function getFill(fill){return null==fill||"none"===fill?null:fill.image||fill.colorStops?"#000":fill}function parsePercent(value,maxValue){return"string"==typeof value?0<=value.lastIndexOf("%")?parseFloat(value)/100*maxValue:parseFloat(value):value}function getTextXForPadding(x,textAlign,textPadding){return"right"===textAlign?x-textPadding[1]:"center"===textAlign?x+textPadding[3]/2-textPadding[1]/2:x+textPadding[3]}function needDrawText(text,style){return null!=text&&(text||style.textBackgroundColor||style.textBorderWidth&&style.textBorderColor||style.textPadding)}function RectText(){}var tmpRect$1=new BoundingRect;function Displayable(opts){for(var name in opts=opts||{},Element.call(this,opts),opts)opts.hasOwnProperty(name)&&"style"!==name&&(this[name]=opts[name]);this.style=new Style(opts.style,this),this._rect=null,this.__clipPaths=[]}function ZImage(opts){Displayable.call(this,opts)}Displayable.prototype={constructor:Displayable,type:"displayable",__dirty:!0,invisible:!(RectText.prototype={constructor:RectText,drawRectText:function(ctx,rect){var style=this.style;rect=style.textRect||rect,this.__dirty&&normalizeTextStyle(style);var transform,text=style.text;null!=text&&(text+=""),needDrawText(text,style)&&(ctx.save(),transform=this.transform,style.transformText?this.setTransform(ctx):transform&&(tmpRect$1.copy(rect),tmpRect$1.applyTransform(transform),rect=tmpRect$1),renderText(this,ctx,text,style,rect),ctx.restore())}}),z:0,z2:0,zlevel:0,draggable:!1,dragging:!1,silent:!1,culling:!1,cursor:"pointer",rectHover:!1,progressive:-1,beforeBrush:function(ctx){},afterBrush:function(ctx){},brush:function(ctx,prevEl){},getBoundingRect:function(){},contain:function(x,y){return this.rectContain(x,y)},traverse:function(cb,context){cb.call(context,this)},rectContain:function(x,y){var coord=this.transformCoordToLocal(x,y);return this.getBoundingRect().contain(coord[0],coord[1])},dirty:function(){this.__dirty=!0,this._rect=null,this.__zr&&this.__zr.refresh()},animateStyle:function(loop){return this.animate("style",loop)},attrKV:function(key,value){"style"!==key?Element.prototype.attrKV.call(this,key,value):this.style.set(value)},setStyle:function(key,value){return this.style.set(key,value),this.dirty(!1),this},useStyle:function(obj){return this.style=new Style(obj,this),this.dirty(!1),this}},inherits(Displayable,Element),mixin(Displayable,RectText),ZImage.prototype={constructor:ZImage,type:"image",brush:function(ctx,prevEl){var style=this.style,src=style.image;style.bind(ctx,this,prevEl);var x,y,width,height,aspect,sx,sy,sWidth,sHeight,image=this._image=createOrUpdateImage(src,this._image,this,this.onload);image&&isImageReady(image)&&(x=style.x||0,y=style.y||0,width=style.width,height=style.height,aspect=image.width/image.height,null==width&&null!=height?width=height*aspect:null==height&&null!=width?height=width/aspect:null==width&&null==height&&(width=image.width,height=image.height),this.setTransform(ctx),style.sWidth&&style.sHeight?(sx=style.sx||0,sy=style.sy||0,ctx.drawImage(image,sx,sy,style.sWidth,style.sHeight,x,y,width,height)):style.sx&&style.sy?(sWidth=width-(sx=style.sx),sHeight=height-(sy=style.sy),ctx.drawImage(image,sx,sy,sWidth,sHeight,x,y,width,height)):ctx.drawImage(image,x,y,width,height),this.restoreTransform(ctx),null!=style.text&&this.drawRectText(ctx,this.getBoundingRect()))},getBoundingRect:function(){var style=this.style;return this._rect||(this._rect=new BoundingRect(style.x||0,style.y||0,style.width||0,style.height||0)),this._rect}},inherits(ZImage,Displayable);function parseInt10(val){return parseInt(val,10)}function preProcessLayer(layer){layer.__unusedCount++}function postProcessLayer(layer){1==layer.__unusedCount&&layer.clear()}var tmpRect=new BoundingRect(0,0,0,0),viewRect=new BoundingRect(0,0,0,0);function Painter(root,storage,opts){this.type="canvas";var singleCanvas=!root.nodeName||"CANVAS"===root.nodeName.toUpperCase();this._opts=opts=extend({},opts||{}),this.dpr=opts.devicePixelRatio||devicePixelRatio,this._singleCanvas=singleCanvas;var rootStyle=(this.root=root).style;rootStyle&&(rootStyle["-webkit-tap-highlight-color"]="transparent",rootStyle["-webkit-user-select"]=rootStyle["user-select"]=rootStyle["-webkit-touch-callout"]="none",root.innerHTML=""),this.storage=storage;var width,height,mainLayer,domRoot,zlevelList=this._zlevelList=[],layers=this._layers={};this._layerConfig={},singleCanvas?(null!=opts.width&&(root.width=opts.width),null!=opts.height&&(root.height=opts.height),width=root.width,height=root.height,this._width=width,this._height=height,(mainLayer=new Layer(root,this,1)).initContext(),layers[0]=mainLayer,zlevelList.push(0),this._domRoot=root):(this._width=this._getSize(0),this._height=this._getSize(1),domRoot=this._domRoot=function(width,height){var domRoot=document.createElement("div");return domRoot.style.cssText=["position:relative","overflow:hidden","width:"+width+"px","height:"+height+"px","padding:0","margin:0","border-width:0"].join(";")+";",domRoot}(this._width,this._height),root.appendChild(domRoot)),this._progressiveLayers=[],this._hoverlayer,this._hoverElements=[]}Painter.prototype={constructor:Painter,getType:function(){return"canvas"},isSingleCanvas:function(){return this._singleCanvas},getViewportRoot:function(){return this._domRoot},getViewportRootOffset:function(){var viewportRoot=this.getViewportRoot();if(viewportRoot)return{offsetLeft:viewportRoot.offsetLeft||0,offsetTop:viewportRoot.offsetTop||0}},refresh:function(paintAll){var list=this.storage.getDisplayList(!0),zlevelList=this._zlevelList;this._paintList(list,paintAll);for(var i=0;i<zlevelList.length;i++){var z=zlevelList[i],layer=this._layers[z];!layer.__builtin__&&layer.refresh&&layer.refresh()}return this.refreshHover(),this._progressiveLayers.length&&this._startProgessive(),this},addHover:function(el,hoverStyle){var elMirror;el.__hoverMir||((((elMirror=new el.constructor({style:el.style,shape:el.shape})).__from=el).__hoverMir=elMirror).setStyle(hoverStyle),this._hoverElements.push(elMirror))},removeHover:function(el){var elMirror=el.__hoverMir,hoverElements=this._hoverElements,idx=indexOf(hoverElements,elMirror);0<=idx&&hoverElements.splice(idx,1),el.__hoverMir=null},clearHover:function(el){for(var hoverElements=this._hoverElements,i=0;i<hoverElements.length;i++){var from=hoverElements[i].__from;from&&(from.__hoverMir=null)}hoverElements.length=0},refreshHover:function(){var hoverElements=this._hoverElements,len=hoverElements.length,hoverLayer=this._hoverlayer;if(hoverLayer&&hoverLayer.clear(),len){sort(hoverElements,this.storage.displayableSortFunc);var scope={};(hoverLayer=hoverLayer||(this._hoverlayer=this.getLayer(1e5))).ctx.save();for(var i=0;i<len;){var el=hoverElements[i],originalEl=el.__from;originalEl&&originalEl.__zr?(i++,originalEl.invisible||(el.transform=originalEl.transform,el.invTransform=originalEl.invTransform,el.__clipPaths=originalEl.__clipPaths,this._doPaintEl(el,hoverLayer,!0,scope))):(hoverElements.splice(i,1),originalEl.__hoverMir=null,len--)}hoverLayer.ctx.restore()}},_startProgessive:function(){var token,self=this;self._furtherProgressive&&(token=self._progressiveToken=+new Date,self._progress++,requestAnimationFrame(function step(){token===self._progressiveToken&&self.storage&&(self._doPaintList(self.storage.getDisplayList()),self._furtherProgressive?(self._progress++,requestAnimationFrame(step)):self._progressiveToken=-1)}))},_clearProgressive:function(){this._progressiveToken=-1,this._progress=0,each(this._progressiveLayers,function(layer){layer.__dirty&&layer.clear()})},_paintList:function(list,paintAll){null==paintAll&&(paintAll=!1),this._updateLayerStatus(list),this._clearProgressive(),this.eachBuiltinLayer(preProcessLayer),this._doPaintList(list,paintAll),this.eachBuiltinLayer(postProcessLayer)},_doPaintList:function(list,paintAll){var currentLayer,currentZLevel,ctx,scope,currentProgressiveLayer,layerProgress,progressiveLayerIdx=0,width=this._width,height=this._height,frame=this._progress;function flushProgressiveLayer(layer){var dpr=ctx.dpr||1;ctx.save(),ctx.globalAlpha=1,ctx.shadowBlur=0,currentLayer.__dirty=!0,ctx.setTransform(1,0,0,1,0,0),ctx.drawImage(layer.dom,0,0,width*dpr,height*dpr),ctx.restore()}for(var i=0,l=list.length;i<l;i++){var el=list[i],elZLevel=this._singleCanvas?0:el.zlevel,elFrame=el.__frame;if(elFrame<0&&currentProgressiveLayer&&(flushProgressiveLayer(currentProgressiveLayer),currentProgressiveLayer=null),currentZLevel!==elZLevel&&(ctx&&ctx.restore(),scope={},currentZLevel=elZLevel,(currentLayer=this.getLayer(currentZLevel)).__builtin__||zrLog("ZLevel "+currentZLevel+" has been used by unkown layer "+currentLayer.id),(ctx=currentLayer.ctx).save(),currentLayer.__unusedCount=0,(currentLayer.__dirty||paintAll)&&currentLayer.clear()),currentLayer.__dirty||paintAll){if(0<=elFrame){if(!currentProgressiveLayer){if((currentProgressiveLayer=this._progressiveLayers[Math.min(progressiveLayerIdx++,4)]).ctx.save(),currentProgressiveLayer.renderScope={},currentProgressiveLayer&&currentProgressiveLayer.__progress>currentProgressiveLayer.__maxProgress){i=currentProgressiveLayer.__nextIdxNotProg-1;continue}layerProgress=currentProgressiveLayer.__progress,currentProgressiveLayer.__dirty||(frame=layerProgress),currentProgressiveLayer.__progress=frame+1}elFrame===frame&&this._doPaintEl(el,currentProgressiveLayer,!0,currentProgressiveLayer.renderScope)}else this._doPaintEl(el,currentLayer,paintAll,scope);el.__dirty=!1}}currentProgressiveLayer&&flushProgressiveLayer(currentProgressiveLayer),ctx&&ctx.restore(),this._furtherProgressive=!1,each(this._progressiveLayers,function(layer){layer.__maxProgress>=layer.__progress&&(this._furtherProgressive=!0)},this)},_doPaintEl:function(el,currentLayer,forcePaint,scope){var clipPaths,ctx=currentLayer.ctx,m=el.transform;!currentLayer.__dirty&&!forcePaint||el.invisible||0===el.style.opacity||m&&!m[0]&&!m[3]||el.culling&&function(el,width,height){return tmpRect.copy(el.getBoundingRect()),el.transform&&tmpRect.applyTransform(el.transform),viewRect.width=width,viewRect.height=height,!tmpRect.intersect(viewRect)}(el,this._width,this._height)||(clipPaths=el.__clipPaths,scope.prevClipLayer===currentLayer&&!function(clipPaths,prevClipPaths){if(clipPaths!=prevClipPaths){if(!clipPaths||!prevClipPaths||clipPaths.length!==prevClipPaths.length)return 1;for(var i=0;i<clipPaths.length;i++)if(clipPaths[i]!==prevClipPaths[i])return 1}}(clipPaths,scope.prevElClipPaths)||(scope.prevElClipPaths&&(scope.prevClipLayer.ctx.restore(),scope.prevClipLayer=scope.prevElClipPaths=null,scope.prevEl=null),clipPaths&&(ctx.save(),function(clipPaths,ctx){for(var i=0;i<clipPaths.length;i++){var clipPath=clipPaths[i];clipPath.setTransform(ctx),ctx.beginPath(),clipPath.buildPath(ctx,clipPath.shape),ctx.clip(),clipPath.restoreTransform(ctx)}}(clipPaths,ctx),scope.prevClipLayer=currentLayer,scope.prevElClipPaths=clipPaths)),el.beforeBrush&&el.beforeBrush(ctx),el.brush(ctx,scope.prevEl||null),(scope.prevEl=el).afterBrush&&el.afterBrush(ctx))},getLayer:function(zlevel){if(this._singleCanvas)return this._layers[0];var layer=this._layers[zlevel];return layer||((layer=new Layer("zr_"+zlevel,this,this.dpr)).__builtin__=!0,this._layerConfig[zlevel]&&merge(layer,this._layerConfig[zlevel],!0),this.insertLayer(zlevel,layer),layer.initContext()),layer},insertLayer:function(zlevel,layer){var prevDom,layersMap=this._layers,zlevelList=this._zlevelList,len=zlevelList.length,prevLayer=null,i=-1,domRoot=this._domRoot;if(layersMap[zlevel])zrLog("ZLevel "+zlevel+" has been used already");else if(function(layer){if(layer){if(layer.__builtin__)return 1;if("function"==typeof layer.resize&&"function"==typeof layer.refresh)return 1}}(layer)){if(0<len&&zlevel>zlevelList[0]){for(i=0;i<len-1&&!(zlevelList[i]<zlevel&&zlevelList[i+1]>zlevel);i++);prevLayer=layersMap[zlevelList[i]]}zlevelList.splice(i+1,0,zlevel),(layersMap[zlevel]=layer).virtual||(prevLayer?(prevDom=prevLayer.dom).nextSibling?domRoot.insertBefore(layer.dom,prevDom.nextSibling):domRoot.appendChild(layer.dom):domRoot.firstChild?domRoot.insertBefore(layer.dom,domRoot.firstChild):domRoot.appendChild(layer.dom))}else zrLog("Layer of zlevel "+zlevel+" is not valid")},eachLayer:function(cb,context){for(var z,zlevelList=this._zlevelList,i=0;i<zlevelList.length;i++)z=zlevelList[i],cb.call(context,this._layers[z],z)},eachBuiltinLayer:function(cb,context){for(var layer,z,zlevelList=this._zlevelList,i=0;i<zlevelList.length;i++)z=zlevelList[i],(layer=this._layers[z]).__builtin__&&cb.call(context,layer,z)},eachOtherLayer:function(cb,context){for(var layer,z,zlevelList=this._zlevelList,i=0;i<zlevelList.length;i++)z=zlevelList[i],(layer=this._layers[z]).__builtin__||cb.call(context,layer,z)},getLayers:function(){return this._layers},_updateLayerStatus:function(list){var layers=this._layers,progressiveLayers=this._progressiveLayers,elCountsLastFrame={},progressiveElCountsLastFrame={};this.eachBuiltinLayer(function(layer,z){elCountsLastFrame[z]=layer.elCount,layer.elCount=0,layer.__dirty=!1}),each(progressiveLayers,function(layer,idx){progressiveElCountsLastFrame[idx]=layer.elCount,layer.elCount=0,layer.__dirty=!1});for(var lastProgressiveKey,progressiveLayerCount=0,frameCount=0,i=0,l=list.length;i<l;i++){var elFrame,idx,currentProgressiveLayer,el=list[i],layer=layers[this._singleCanvas?0:el.zlevel],elProgress=el.progressive;layer&&(layer.elCount++,layer.__dirty=layer.__dirty||el.__dirty),0<=elProgress?(lastProgressiveKey!==elProgress&&(lastProgressiveKey=elProgress,frameCount++),elFrame=el.__frame=frameCount-1,currentProgressiveLayer||((currentProgressiveLayer=progressiveLayers[idx=Math.min(progressiveLayerCount,4)])||(currentProgressiveLayer=progressiveLayers[idx]=new Layer("progressive",this,this.dpr)).initContext(),currentProgressiveLayer.__maxProgress=0),currentProgressiveLayer.__dirty=currentProgressiveLayer.__dirty||el.__dirty,currentProgressiveLayer.elCount++,currentProgressiveLayer.__maxProgress=Math.max(currentProgressiveLayer.__maxProgress,elFrame),currentProgressiveLayer.__maxProgress>=currentProgressiveLayer.__progress&&(layer.__dirty=!0)):(el.__frame=-1,currentProgressiveLayer&&(currentProgressiveLayer.__nextIdxNotProg=i,progressiveLayerCount++,currentProgressiveLayer=null))}currentProgressiveLayer&&(progressiveLayerCount++,currentProgressiveLayer.__nextIdxNotProg=i),this.eachBuiltinLayer(function(layer,z){elCountsLastFrame[z]!==layer.elCount&&(layer.__dirty=!0)}),progressiveLayers.length=Math.min(progressiveLayerCount,5),each(progressiveLayers,function(layer,idx){progressiveElCountsLastFrame[idx]!==layer.elCount&&(el.__dirty=!0),layer.__dirty&&(layer.__progress=0)})},clear:function(){return this.eachBuiltinLayer(this._clearLayer),this},_clearLayer:function(layer){layer.clear()},configLayer:function(zlevel,config){var layerConfig,layer;config&&((layerConfig=this._layerConfig)[zlevel]?merge(layerConfig[zlevel],config,!0):layerConfig[zlevel]=config,(layer=this._layers[zlevel])&&merge(layer,layerConfig[zlevel],!0))},delLayer:function(zlevel){var layers=this._layers,zlevelList=this._zlevelList,layer=layers[zlevel];layer&&(layer.dom.parentNode.removeChild(layer.dom),delete layers[zlevel],zlevelList.splice(indexOf(zlevelList,zlevel),1))},resize:function(width,height){var domRoot=this._domRoot;domRoot.style.display="none";var opts=this._opts;if(null!=width&&(opts.width=width),null!=height&&(opts.height=height),width=this._getSize(0),height=this._getSize(1),domRoot.style.display="",this._width!=width||height!=this._height){for(var id in domRoot.style.width=width+"px",domRoot.style.height=height+"px",this._layers)this._layers.hasOwnProperty(id)&&this._layers[id].resize(width,height);each(this._progressiveLayers,function(layer){layer.resize(width,height)}),this.refresh(!0)}return this._width=width,this._height=height,this},clearLayer:function(zlevel){var layer=this._layers[zlevel];layer&&layer.clear()},dispose:function(){this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},getRenderedCanvas:function(opts){if(opts=opts||{},this._singleCanvas)return this._layers[0].dom;var imageLayer=new Layer("image",this,opts.pixelRatio||this.dpr);imageLayer.initContext(),imageLayer.clearColor=opts.backgroundColor,imageLayer.clear();var zlevel,displayList=this.storage.getDisplayList(!0),scope={},self=this;function findAndDrawOtherLayer(smaller,larger){var intermediateLayer,zlevelList=self._zlevelList;null==smaller&&(smaller=-1/0);for(var i=0;i<zlevelList.length;i++){var z=zlevelList[i],layer=self._layers[z];if(!layer.__builtin__&&smaller<z&&z<larger){intermediateLayer=layer;break}}intermediateLayer&&intermediateLayer.renderToCanvas&&(imageLayer.ctx.save(),intermediateLayer.renderToCanvas(imageLayer.ctx),imageLayer.ctx.restore())}for(var i=0;i<displayList.length;i++){var el=displayList[i];el.zlevel!==zlevel&&(findAndDrawOtherLayer(zlevel,el.zlevel),zlevel=el.zlevel),this._doPaintEl(el,imageLayer,!0,scope)}return findAndDrawOtherLayer(zlevel,1/0),imageLayer.dom},getWidth:function(){return this._width},getHeight:function(){return this._height},_getSize:function(whIdx){var opts=this._opts,wh=["width","height"][whIdx],cwh=["clientWidth","clientHeight"][whIdx],plt=["paddingLeft","paddingTop"][whIdx],prb=["paddingRight","paddingBottom"][whIdx];if(null!=opts[wh]&&"auto"!==opts[wh])return parseFloat(opts[wh]);var root=this.root,stl=document.defaultView.getComputedStyle(root);return(root[cwh]||parseInt10(stl[wh])||parseInt10(root.style[wh]))-(parseInt10(stl[plt])||0)-(parseInt10(stl[prb])||0)|0},pathToImage:function(path,dpr){dpr=dpr||this.dpr;var canvas=document.createElement("canvas"),ctx=canvas.getContext("2d"),rect=path.getBoundingRect(),style=path.style,shadowBlurSize=style.shadowBlur,shadowOffsetX=style.shadowOffsetX,shadowOffsetY=style.shadowOffsetY,lineWidth=style.hasStroke()?style.lineWidth:0,leftMargin=Math.max(lineWidth/2,-shadowOffsetX+shadowBlurSize),rightMargin=Math.max(lineWidth/2,shadowOffsetX+shadowBlurSize),topMargin=Math.max(lineWidth/2,-shadowOffsetY+shadowBlurSize),bottomMargin=Math.max(lineWidth/2,shadowOffsetY+shadowBlurSize),width=rect.width+leftMargin+rightMargin,height=rect.height+topMargin+bottomMargin;canvas.width=width*dpr,canvas.height=height*dpr,ctx.scale(dpr,dpr),ctx.clearRect(0,0,width,height),ctx.dpr=dpr;var pathTransform={position:path.position,rotation:path.rotation,scale:path.scale};path.position=[leftMargin-rect.x,topMargin-rect.y],path.rotation=0,path.scale=[1,1],path.updateTransform(),path&&path.brush(ctx);var imgShape=new ZImage({style:{x:0,y:0,image:canvas}});return null!=pathTransform.position&&(imgShape.position=path.position=pathTransform.position),null!=pathTransform.rotation&&(imgShape.rotation=path.rotation=pathTransform.rotation),null!=pathTransform.scale&&(imgShape.scale=path.scale=pathTransform.scale),imgShape}};var isDomLevel2="undefined"!=typeof window&&!!window.addEventListener,MOUSE_EVENT_REG=/^(?:mouse|pointer|contextmenu|drag|drop)|click/;function clientToLocal(el,e,out,calculate){return out=out||{},calculate||!env$1.canvasSupported?defaultGetZrXY(el,e,out):env$1.browser.firefox&&null!=e.layerX&&e.layerX!==e.offsetX?(out.zrX=e.layerX,out.zrY=e.layerY):null!=e.offsetX?(out.zrX=e.offsetX,out.zrY=e.offsetY):defaultGetZrXY(el,e,out),out}function defaultGetZrXY(el,e,out){var box=function(el){return el.getBoundingClientRect?el.getBoundingClientRect():{left:0,top:0}}(el);out.zrX=e.clientX-box.left,out.zrY=e.clientY-box.top}function normalizeEvent(el,e,calculate){if(null!=(e=e||window.event).zrX)return e;var touch,eventType=e.type;eventType&&0<=eventType.indexOf("touch")?(touch="touchend"!=eventType?e.targetTouches[0]:e.changedTouches[0])&&clientToLocal(el,touch,e,calculate):(clientToLocal(el,e,e,calculate),e.zrDelta=e.wheelDelta?e.wheelDelta/120:-(e.detail||0)/3);var button=e.button;return null==e.which&&void 0!==button&&MOUSE_EVENT_REG.test(e.type)&&(e.which=1&button?1:2&button?3:4&button?2:0),e}function Animation(options){options=options||{},this.stage=options.stage||{},this.onframe=options.onframe||function(){},this._clips=[],this._running=!1,this._time,this._pausedTime,this._pauseStart,this._paused=!1,Eventful.call(this)}Animation.prototype={constructor:Animation,addClip:function(clip){this._clips.push(clip)},addAnimator:function(animator){animator.animation=this;for(var clips=animator.getClips(),i=0;i<clips.length;i++)this.addClip(clips[i])},removeClip:function(clip){var idx=indexOf(this._clips,clip);0<=idx&&this._clips.splice(idx,1)},removeAnimator:function(animator){for(var clips=animator.getClips(),i=0;i<clips.length;i++)this.removeClip(clips[i]);animator.animation=null},_update:function(){for(var time=(new Date).getTime()-this._pausedTime,delta=time-this._time,clips=this._clips,len=clips.length,deferredEvents=[],deferredClips=[],i=0;i<len;i++){var clip=clips[i],e=clip.step(time,delta);e&&(deferredEvents.push(e),deferredClips.push(clip))}for(i=0;i<len;)clips[i]._needsRemove?(clips[i]=clips[len-1],clips.pop(),len--):i++;len=deferredEvents.length;for(i=0;i<len;i++)deferredClips[i].fire(deferredEvents[i]);this._time=time,this.onframe(delta),this.trigger("frame",delta),this.stage.update&&this.stage.update()},_startLoop:function(){var self=this;this._running=!0,requestAnimationFrame(function step(){self._running&&(requestAnimationFrame(step),self._paused||self._update())})},start:function(){this._time=(new Date).getTime(),this._pausedTime=0,this._startLoop()},stop:function(){this._running=!1},pause:function(){this._paused||(this._pauseStart=(new Date).getTime(),this._paused=!0)},resume:function(){this._paused&&(this._pausedTime+=(new Date).getTime()-this._pauseStart,this._paused=!1)},clear:function(){this._clips=[]},animate:function(target,options){var animator=new Animator(target,(options=options||{}).loop,options.getter,options.setter);return this.addAnimator(animator),animator}},mixin(Animation,Eventful);function GestureMgr(){this._track=[]}function dist$1(pointPair){var dx=pointPair[1][0]-pointPair[0][0],dy=pointPair[1][1]-pointPair[0][1];return Math.sqrt(dx*dx+dy*dy)}GestureMgr.prototype={constructor:GestureMgr,recognize:function(event,target,root){return this._doTrack(event,target,root),this._recognize(event)},clear:function(){return this._track.length=0,this},_doTrack:function(event,target,root){var touches=event.touches;if(touches){for(var trackItem={points:[],touches:[],target:target,event:event},i=0,len=touches.length;i<len;i++){var touch=touches[i],pos=clientToLocal(root,touch,{});trackItem.points.push([pos.zrX,pos.zrY]),trackItem.touches.push(touch)}this._track.push(trackItem)}},_recognize:function(event){for(var eventName in recognizers)if(recognizers.hasOwnProperty(eventName)){var gestureInfo=recognizers[eventName](this._track,event);if(gestureInfo)return gestureInfo}}};var recognizers={pinch:function(track,event){var trackLen=track.length;if(trackLen){var pointPair,pinchEnd=(track[trackLen-1]||{}).points,pinchPre=(track[trackLen-2]||{}).points||pinchEnd;if(pinchPre&&1<pinchPre.length&&pinchEnd&&1<pinchEnd.length){var pinchScale=dist$1(pinchEnd)/dist$1(pinchPre);isFinite(pinchScale)||(pinchScale=1),event.pinchScale=pinchScale;var pinchCenter=[((pointPair=pinchEnd)[0][0]+pointPair[1][0])/2,(pointPair[0][1]+pointPair[1][1])/2];return event.pinchX=pinchCenter[0],event.pinchY=pinchCenter[1],{type:"pinch",target:track[0].target,event:event}}}}},mouseHandlerNames=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],touchHandlerNames=["touchstart","touchend","touchmove"],pointerEventNames={pointerdown:1,pointerup:1,pointermove:1,pointerout:1},pointerHandlerNames=map(mouseHandlerNames,function(name){var nm=name.replace("mouse","pointer");return pointerEventNames[nm]?nm:name});function eventNameFix(name){return"mousewheel"===name&&env$1.browser.firefox?"DOMMouseScroll":name}function processGesture(proxy,event,stage){var gestureMgr=proxy._gestureMgr;"start"===stage&&gestureMgr.clear();var type,gestureInfo=gestureMgr.recognize(event,proxy.handler.findHover(event.zrX,event.zrY,null).target,proxy.dom);"end"===stage&&gestureMgr.clear(),gestureInfo&&(type=gestureInfo.type,event.gestureEvent=type,proxy.handler.dispatchToElement({target:gestureInfo.target},type,gestureInfo.event))}function setTouchTimer(instance){instance._touching=!0,clearTimeout(instance._touchTimer),instance._touchTimer=setTimeout(function(){instance._touching=!1},700)}var domHandlers={mousemove:function(event){event=normalizeEvent(this.dom,event),this.trigger("mousemove",event)},mouseout:function(event){var element=(event=normalizeEvent(this.dom,event)).toElement||event.relatedTarget;if(element!=this.dom)for(;element&&9!=element.nodeType;){if(element===this.dom)return;element=element.parentNode}this.trigger("mouseout",event)},touchstart:function(event){(event=normalizeEvent(this.dom,event)).zrByTouch=!0,this._lastTouchMoment=new Date,processGesture(this,event,"start"),domHandlers.mousemove.call(this,event),domHandlers.mousedown.call(this,event),setTouchTimer(this)},touchmove:function(event){(event=normalizeEvent(this.dom,event)).zrByTouch=!0,processGesture(this,event,"change"),domHandlers.mousemove.call(this,event),setTouchTimer(this)},touchend:function(event){(event=normalizeEvent(this.dom,event)).zrByTouch=!0,processGesture(this,event,"end"),domHandlers.mouseup.call(this,event),new Date-this._lastTouchMoment<300&&domHandlers.click.call(this,event),setTouchTimer(this)},pointerdown:function(event){domHandlers.mousedown.call(this,event)},pointermove:function(event){isPointerFromTouch(event)||domHandlers.mousemove.call(this,event)},pointerup:function(event){domHandlers.mouseup.call(this,event)},pointerout:function(event){isPointerFromTouch(event)||domHandlers.mouseout.call(this,event)}};function isPointerFromTouch(event){var pointerType=event.pointerType;return"pen"===pointerType||"touch"===pointerType}function initDomHandler(instance){each(touchHandlerNames,function(name){instance._handlers[name]=bind(domHandlers[name],instance)}),each(pointerHandlerNames,function(name){instance._handlers[name]=bind(domHandlers[name],instance)}),each(mouseHandlerNames,function(name){instance._handlers[name]=function(fn,instance){return function(){if(!instance._touching)return fn.apply(instance,arguments)}}(domHandlers[name],instance)})}function HandlerDomProxy(dom){function mountHandlers(handlerNames,instance){each(handlerNames,function(name){!function(el,name,handler){isDomLevel2?el.addEventListener(name,handler):el.attachEvent("on"+name,handler)}(dom,eventNameFix(name),instance._handlers[name])},instance)}Eventful.call(this),this.dom=dom,this._touching=!1,this._touchTimer,this._gestureMgr=new GestureMgr,this._handlers={},initDomHandler(this),env$1.pointerEventsSupported?mountHandlers(pointerHandlerNames,this):(env$1.touchEventsSupported&&mountHandlers(touchHandlerNames,this),mountHandlers(mouseHandlerNames,this))}each(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],function(name){domHandlers[name]=function(event){event=normalizeEvent(this.dom,event),this.trigger(name,event)}});var handlerDomProxyProto=HandlerDomProxy.prototype;handlerDomProxyProto.dispose=function(){for(var handlerNames=mouseHandlerNames.concat(touchHandlerNames),i=0;i<handlerNames.length;i++){var name=handlerNames[i];!function(el,name,handler){isDomLevel2?el.removeEventListener(name,handler):el.detachEvent("on"+name,handler)}(this.dom,eventNameFix(name),this._handlers[name])}},handlerDomProxyProto.setCursor=function(cursorStyle){this.dom.style.cursor=cursorStyle||"default"},mixin(HandlerDomProxy,Eventful);var useVML=!env$1.canvasSupported,painterCtors={canvas:Painter},instances={};function registerPainter(name,Ctor){painterCtors[name]=Ctor}function ZRender(id,dom,opts){opts=opts||{},this.dom=dom,this.id=id;var self=this,storage=new Storage,rendererType=opts.renderer;if(useVML){if(!painterCtors.vml)throw new Error("You need to require 'zrender/vml/vml' to support IE8");rendererType="vml"}else rendererType&&painterCtors[rendererType]||(rendererType="canvas");var painter=new painterCtors[rendererType](dom,storage,opts);this.storage=storage,this.painter=painter;var handerProxy=env$1.node?null:new HandlerDomProxy(painter.getViewportRoot());this.handler=new Handler(storage,painter,handerProxy,painter.root),this.animation=new Animation({stage:{update:bind(this.flush,this)}}),this.animation.start(),this._needsRefresh;var oldDelFromStorage=storage.delFromStorage,oldAddToStorage=storage.addToStorage;storage.delFromStorage=function(el){oldDelFromStorage.call(storage,el),el&&el.removeSelfFromZr(self)},storage.addToStorage=function(el){oldAddToStorage.call(storage,el),el.addSelfToZr(self)}}ZRender.prototype={constructor:ZRender,getId:function(){return this.id},add:function(el){this.storage.addRoot(el),this._needsRefresh=!0},remove:function(el){this.storage.delRoot(el),this._needsRefresh=!0},configLayer:function(zLevel,config){this.painter.configLayer(zLevel,config),this._needsRefresh=!0},refreshImmediately:function(){this._needsRefresh=!1,this.painter.refresh(),this._needsRefresh=!1},refresh:function(){this._needsRefresh=!0},flush:function(){this._needsRefresh&&this.refreshImmediately(),this._needsRefreshHover&&this.refreshHoverImmediately()},addHover:function(el,style){this.painter.addHover&&(this.painter.addHover(el,style),this.refreshHover())},removeHover:function(el){this.painter.removeHover&&(this.painter.removeHover(el),this.refreshHover())},clearHover:function(){this.painter.clearHover&&(this.painter.clearHover(),this.refreshHover())},refreshHover:function(){this._needsRefreshHover=!0},refreshHoverImmediately:function(){this._needsRefreshHover=!1,this.painter.refreshHover&&this.painter.refreshHover()},resize:function(opts){opts=opts||{},this.painter.resize(opts.width,opts.height),this.handler.resize()},clearAnimation:function(){this.animation.clear()},getWidth:function(){return this.painter.getWidth()},getHeight:function(){return this.painter.getHeight()},pathToImage:function(e,dpr){return this.painter.pathToImage(e,dpr)},setCursorStyle:function(cursorStyle){this.handler.setCursorStyle(cursorStyle)},findHover:function(x,y){return this.handler.findHover(x,y)},on:function(eventName,eventHandler,context){this.handler.on(eventName,eventHandler,context)},off:function(eventName,eventHandler){this.handler.off(eventName,eventHandler)},trigger:function(eventName,event){this.handler.trigger(eventName,event)},clear:function(){this.storage.delRoot(),this.painter.clear()},dispose:function(){var id;this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=this.storage=this.painter=this.handler=null,id=this.id,delete instances[id]}};var mathPow=Math.pow,mathSqrt$2=Math.sqrt,EPSILON$1=1e-8,EPSILON_NUMERIC=1e-4,THREE_SQRT=mathSqrt$2(3),ONE_THIRD=1/3,_v0=create(),_v1=create(),_v2=create();function isAroundZero(val){return-EPSILON$1<val&&val<EPSILON$1}function isNotAroundZero$1(val){return EPSILON$1<val||val<-EPSILON$1}function cubicAt(p0,p1,p2,p3,t){var onet=1-t;return onet*onet*(onet*p0+3*t*p1)+t*t*(t*p3+3*onet*p2)}function cubicDerivativeAt(p0,p1,p2,p3,t){var onet=1-t;return 3*(((p1-p0)*onet+2*(p2-p1)*t)*onet+(p3-p2)*t*t)}function cubicExtrema(p0,p1,p2,p3,extrema){var disc,discSqrt,t1,t2,b=6*p2-12*p1+6*p0,a=9*p1+3*p3-3*p0-9*p2,c=3*p1-3*p0,n=0;return isAroundZero(a)?isNotAroundZero$1(b)&&0<=(t1=-c/b)&&t1<=1&&(extrema[n++]=t1):isAroundZero(disc=b*b-4*a*c)?extrema[0]=-b/(2*a):0<disc&&(t2=(-b-(discSqrt=mathSqrt$2(disc)))/(2*a),0<=(t1=(-b+discSqrt)/(2*a))&&t1<=1&&(extrema[n++]=t1),0<=t2&&t2<=1&&(extrema[n++]=t2)),n}function cubicSubdivide(p0,p1,p2,p3,t,out){var p01=(p1-p0)*t+p0,p12=(p2-p1)*t+p1,p23=(p3-p2)*t+p2,p012=(p12-p01)*t+p01,p123=(p23-p12)*t+p12,p0123=(p123-p012)*t+p012;out[0]=p0,out[1]=p01,out[2]=p012,out[3]=p0123,out[4]=p0123,out[5]=p123,out[6]=p23,out[7]=p3}function quadraticAt(p0,p1,p2,t){var onet=1-t;return onet*(onet*p0+2*t*p1)+t*t*p2}function quadraticDerivativeAt(p0,p1,p2,t){return 2*((1-t)*(p1-p0)+t*(p2-p1))}function quadraticExtremum(p0,p1,p2){var divider=p0+p2-2*p1;return 0==divider?.5:(p0-p1)/divider}function quadraticSubdivide(p0,p1,p2,t,out){var p01=(p1-p0)*t+p0,p12=(p2-p1)*t+p1,p012=(p12-p01)*t+p01;out[0]=p0,out[1]=p01,out[2]=p012,out[3]=p012,out[4]=p12,out[5]=p2}var mathMin$2=Math.min,mathMax$2=Math.max,mathSin$2=Math.sin,mathCos$2=Math.cos,PI2=2*Math.PI,start=create(),end=create(),extremity=create();function fromLine(x0,y0,x1,y1,min$$1,max$$1){min$$1[0]=mathMin$2(x0,x1),min$$1[1]=mathMin$2(y0,y1),max$$1[0]=mathMax$2(x0,x1),max$$1[1]=mathMax$2(y0,y1)}var xDim=[],yDim=[];var CMD={M:1,L:2,C:3,Q:4,A:5,Z:6,R:7},min$1=[],max$1=[],min2=[],max2=[],mathMin$1=Math.min,mathMax$1=Math.max,mathCos$1=Math.cos,mathSin$1=Math.sin,mathSqrt$1=Math.sqrt,mathAbs=Math.abs,hasTypedArray="undefined"!=typeof Float32Array,PathProxy=function(notSaveData){this._saveData=!notSaveData,this._saveData&&(this.data=[]),this._ctx=null};function containStroke$1(x0,y0,x1,y1,lineWidth,x,y){if(0!==lineWidth){var _l=lineWidth,_a=0;if(!(y0+_l<y&&y1+_l<y||y<y0-_l&&y<y1-_l||x0+_l<x&&x1+_l<x||x<x0-_l&&x<x1-_l)){if(x0===x1)return Math.abs(x-x0)<=_l/2;var tmp=(_a=(y0-y1)/(x0-x1))*x-y+(x0*y1-x1*y0)/(x0-x1);return tmp*tmp/(_a*_a+1)<=_l/2*_l/2}}}function containStroke$2(x0,y0,x1,y1,x2,y2,x3,y3,lineWidth,x,y){if(0!==lineWidth){var _l=lineWidth;if(!(y0+_l<y&&y1+_l<y&&y2+_l<y&&y3+_l<y||y<y0-_l&&y<y1-_l&&y<y2-_l&&y<y3-_l||x0+_l<x&&x1+_l<x&&x2+_l<x&&x3+_l<x||x<x0-_l&&x<x1-_l&&x<x2-_l&&x<x3-_l))return function(x0,y0,x1,y1,x2,y2,x3,y3,x,y,out){var t,prev,next,d1,d2,interval=.005,d=1/0;_v0[0]=x,_v0[1]=y;for(var _t=0;_t<1;_t+=.05)_v1[0]=cubicAt(x0,x1,x2,x3,_t),_v1[1]=cubicAt(y0,y1,y2,y3,_t),(d1=distSquare(_v0,_v1))<d&&(t=_t,d=d1);d=1/0;for(var i=0;i<32&&!(interval<EPSILON_NUMERIC);i++)prev=t-interval,next=t+interval,_v1[0]=cubicAt(x0,x1,x2,x3,prev),_v1[1]=cubicAt(y0,y1,y2,y3,prev),d1=distSquare(_v1,_v0),0<=prev&&d1<d?(t=prev,d=d1):(_v2[0]=cubicAt(x0,x1,x2,x3,next),_v2[1]=cubicAt(y0,y1,y2,y3,next),d2=distSquare(_v2,_v0),next<=1&&d2<d?(t=next,d=d2):interval*=.5);return out&&(out[0]=cubicAt(x0,x1,x2,x3,t),out[1]=cubicAt(y0,y1,y2,y3,t)),mathSqrt$2(d)}(x0,y0,x1,y1,x2,y2,x3,y3,x,y,null)<=_l/2}}function containStroke$3(x0,y0,x1,y1,x2,y2,lineWidth,x,y){if(0!==lineWidth){var _l=lineWidth;if(!(y0+_l<y&&y1+_l<y&&y2+_l<y||y<y0-_l&&y<y1-_l&&y<y2-_l||x0+_l<x&&x1+_l<x&&x2+_l<x||x<x0-_l&&x<x1-_l&&x<x2-_l))return function(x0,y0,x1,y1,x2,y2,x,y,out){var t,interval=.005,d=1/0;_v0[0]=x,_v0[1]=y;for(var _t=0;_t<1;_t+=.05){_v1[0]=quadraticAt(x0,x1,x2,_t),_v1[1]=quadraticAt(y0,y1,y2,_t),(d1=distSquare(_v0,_v1))<d&&(t=_t,d=d1)}d=1/0;for(var i=0;i<32&&!(interval<EPSILON_NUMERIC);i++){var prev=t-interval,next=t+interval;_v1[0]=quadraticAt(x0,x1,x2,prev),_v1[1]=quadraticAt(y0,y1,y2,prev);var d2,d1=distSquare(_v1,_v0);0<=prev&&d1<d?(t=prev,d=d1):(_v2[0]=quadraticAt(x0,x1,x2,next),_v2[1]=quadraticAt(y0,y1,y2,next),d2=distSquare(_v2,_v0),next<=1&&d2<d?(t=next,d=d2):interval*=.5)}return out&&(out[0]=quadraticAt(x0,x1,x2,t),out[1]=quadraticAt(y0,y1,y2,t)),mathSqrt$2(d)}(x0,y0,x1,y1,x2,y2,x,y,null)<=_l/2}}PathProxy.prototype={constructor:PathProxy,_xi:0,_yi:0,_x0:0,_y0:0,_ux:0,_uy:0,_len:0,_lineDash:null,_dashOffset:0,_dashIdx:0,_dashSum:0,setScale:function(sx,sy){this._ux=mathAbs(1/devicePixelRatio/sx)||0,this._uy=mathAbs(1/devicePixelRatio/sy)||0},getContext:function(){return this._ctx},beginPath:function(ctx){return(this._ctx=ctx)&&ctx.beginPath(),ctx&&(this.dpr=ctx.dpr),this._saveData&&(this._len=0),this._lineDash&&(this._lineDash=null,this._dashOffset=0),this},moveTo:function(x,y){return this.addData(CMD.M,x,y),this._ctx&&this._ctx.moveTo(x,y),this._x0=x,this._y0=y,this._xi=x,this._yi=y,this},lineTo:function(x,y){var exceedUnit=mathAbs(x-this._xi)>this._ux||mathAbs(y-this._yi)>this._uy||this._len<5;return this.addData(CMD.L,x,y),this._ctx&&exceedUnit&&(this._needsDash()?this._dashedLineTo(x,y):this._ctx.lineTo(x,y)),exceedUnit&&(this._xi=x,this._yi=y),this},bezierCurveTo:function(x1,y1,x2,y2,x3,y3){return this.addData(CMD.C,x1,y1,x2,y2,x3,y3),this._ctx&&(this._needsDash()?this._dashedBezierTo(x1,y1,x2,y2,x3,y3):this._ctx.bezierCurveTo(x1,y1,x2,y2,x3,y3)),this._xi=x3,this._yi=y3,this},quadraticCurveTo:function(x1,y1,x2,y2){return this.addData(CMD.Q,x1,y1,x2,y2),this._ctx&&(this._needsDash()?this._dashedQuadraticTo(x1,y1,x2,y2):this._ctx.quadraticCurveTo(x1,y1,x2,y2)),this._xi=x2,this._yi=y2,this},arc:function(cx,cy,r,startAngle,endAngle,anticlockwise){return this.addData(CMD.A,cx,cy,r,r,startAngle,endAngle-startAngle,0,anticlockwise?0:1),this._ctx&&this._ctx.arc(cx,cy,r,startAngle,endAngle,anticlockwise),this._xi=mathCos$1(endAngle)*r+cx,this._yi=mathSin$1(endAngle)*r+cx,this},arcTo:function(x1,y1,x2,y2,radius){return this._ctx&&this._ctx.arcTo(x1,y1,x2,y2,radius),this},rect:function(x,y,w,h){return this._ctx&&this._ctx.rect(x,y,w,h),this.addData(CMD.R,x,y,w,h),this},closePath:function(){this.addData(CMD.Z);var ctx=this._ctx,x0=this._x0,y0=this._y0;return ctx&&(this._needsDash()&&this._dashedLineTo(x0,y0),ctx.closePath()),this._xi=x0,this._yi=y0,this},fill:function(ctx){ctx&&ctx.fill(),this.toStatic()},stroke:function(ctx){ctx&&ctx.stroke(),this.toStatic()},setLineDash:function(lineDash){if(lineDash instanceof Array){this._lineDash=lineDash;for(var lineDashSum=this._dashIdx=0,i=0;i<lineDash.length;i++)lineDashSum+=lineDash[i];this._dashSum=lineDashSum}return this},setLineDashOffset:function(offset){return this._dashOffset=offset,this},len:function(){return this._len},setData:function(data){var len$$1=data.length;this.data&&this.data.length==len$$1||!hasTypedArray||(this.data=new Float32Array(len$$1));for(var i=0;i<len$$1;i++)this.data[i]=data[i];this._len=len$$1},appendPath:function(path){path instanceof Array||(path=[path]);for(var len$$1=path.length,appendSize=0,offset=this._len,i=0;i<len$$1;i++)appendSize+=path[i].len();hasTypedArray&&this.data instanceof Float32Array&&(this.data=new Float32Array(offset+appendSize));for(i=0;i<len$$1;i++)for(var appendPathData=path[i].data,k=0;k<appendPathData.length;k++)this.data[offset++]=appendPathData[k];this._len=offset},addData:function(cmd){if(this._saveData){var data=this.data;this._len+arguments.length>data.length&&(this._expandData(),data=this.data);for(var i=0;i<arguments.length;i++)data[this._len++]=arguments[i];this._prevCmd=cmd}},_expandData:function(){if(!(this.data instanceof Array)){for(var newData=[],i=0;i<this._len;i++)newData[i]=this.data[i];this.data=newData}},_needsDash:function(){return this._lineDash},_dashedLineTo:function(x1,y1){var dash,idx,dashSum=this._dashSum,offset=this._dashOffset,lineDash=this._lineDash,ctx=this._ctx,x0=this._xi,y0=this._yi,dx=x1-x0,dy=y1-y0,dist$$1=mathSqrt$1(dx*dx+dy*dy),x=x0,y=y0,nDash=lineDash.length;for(offset<0&&(offset=dashSum+offset),x-=(offset%=dashSum)*(dx/=dist$$1),y-=offset*(dy/=dist$$1);0<dx&&x<=x1||dx<0&&x1<=x||0==dx&&(0<dy&&y<=y1||dy<0&&y1<=y);)x+=dx*(dash=lineDash[idx=this._dashIdx]),y+=dy*dash,this._dashIdx=(idx+1)%nDash,0<dx&&x<x0||dx<0&&x0<x||0<dy&&y<y0||dy<0&&y0<y||ctx[idx%2?"moveTo":"lineTo"]((0<=dx?mathMin$1:mathMax$1)(x,x1),(0<=dy?mathMin$1:mathMax$1)(y,y1));dx=x-x1,dy=y-y1,this._dashOffset=-mathSqrt$1(dx*dx+dy*dy)},_dashedBezierTo:function(x1,y1,x2,y2,x3,y3){var t,dx,dy,x,y,dashSum=this._dashSum,offset=this._dashOffset,lineDash=this._lineDash,ctx=this._ctx,x0=this._xi,y0=this._yi,cubicAt$$1=cubicAt,bezierLen=0,idx=this._dashIdx,nDash=lineDash.length,tmpLen=0;for(offset<0&&(offset=dashSum+offset),offset%=dashSum,t=0;t<1;t+=.1)dx=cubicAt$$1(x0,x1,x2,x3,t+.1)-cubicAt$$1(x0,x1,x2,x3,t),dy=cubicAt$$1(y0,y1,y2,y3,t+.1)-cubicAt$$1(y0,y1,y2,y3,t),bezierLen+=mathSqrt$1(dx*dx+dy*dy);for(;idx<nDash&&!(offset<(tmpLen+=lineDash[idx]));idx++);for(t=(tmpLen-offset)/bezierLen;t<=1;)x=cubicAt$$1(x0,x1,x2,x3,t),y=cubicAt$$1(y0,y1,y2,y3,t),idx%2?ctx.moveTo(x,y):ctx.lineTo(x,y),t+=lineDash[idx]/bezierLen,idx=(idx+1)%nDash;idx%2!=0&&ctx.lineTo(x3,y3),dx=x3-x,dy=y3-y,this._dashOffset=-mathSqrt$1(dx*dx+dy*dy)},_dashedQuadraticTo:function(x1,y1,x2,y2){var x3=x2,y3=y2;x2=(x2+2*x1)/3,y2=(y2+2*y1)/3,x1=(this._xi+2*x1)/3,y1=(this._yi+2*y1)/3,this._dashedBezierTo(x1,y1,x2,y2,x3,y3)},toStatic:function(){var data=this.data;data instanceof Array&&(data.length=this._len,hasTypedArray&&(this.data=new Float32Array(data)))},getBoundingRect:function(){min$1[0]=min$1[1]=min2[0]=min2[1]=Number.MAX_VALUE,max$1[0]=max$1[1]=max2[0]=max2[1]=-Number.MAX_VALUE;for(var data=this.data,xi=0,yi=0,x0=0,y0=0,i=0;i<data.length;){var cmd=data[i++];switch(1==i&&(x0=xi=data[i],y0=yi=data[i+1]),cmd){case CMD.M:xi=x0=data[i++],yi=y0=data[i++],min2[0]=x0,min2[1]=y0,max2[0]=x0,max2[1]=y0;break;case CMD.L:fromLine(xi,yi,data[i],data[i+1],min2,max2),xi=data[i++],yi=data[i++];break;case CMD.C:!function(x0,y0,x1,y1,x2,y2,x3,y3,min$$1,max$$1){var i,cubicExtrema$$1=cubicExtrema,cubicAt$$1=cubicAt,n=cubicExtrema$$1(x0,x1,x2,x3,xDim);for(min$$1[0]=1/0,min$$1[1]=1/0,max$$1[0]=-1/0,max$$1[1]=-1/0,i=0;i<n;i++){var x=cubicAt$$1(x0,x1,x2,x3,xDim[i]);min$$1[0]=mathMin$2(x,min$$1[0]),max$$1[0]=mathMax$2(x,max$$1[0])}for(n=cubicExtrema$$1(y0,y1,y2,y3,yDim),i=0;i<n;i++){var y=cubicAt$$1(y0,y1,y2,y3,yDim[i]);min$$1[1]=mathMin$2(y,min$$1[1]),max$$1[1]=mathMax$2(y,max$$1[1])}min$$1[0]=mathMin$2(x0,min$$1[0]),max$$1[0]=mathMax$2(x0,max$$1[0]),min$$1[0]=mathMin$2(x3,min$$1[0]),max$$1[0]=mathMax$2(x3,max$$1[0]),min$$1[1]=mathMin$2(y0,min$$1[1]),max$$1[1]=mathMax$2(y0,max$$1[1]),min$$1[1]=mathMin$2(y3,min$$1[1]),max$$1[1]=mathMax$2(y3,max$$1[1])}(xi,yi,data[i++],data[i++],data[i++],data[i++],data[i],data[i+1],min2,max2),xi=data[i++],yi=data[i++];break;case CMD.Q:!function(x0,y0,x1,y1,x2,y2,min$$1,max$$1){var quadraticExtremum$$1=quadraticExtremum,quadraticAt$$1=quadraticAt,tx=mathMax$2(mathMin$2(quadraticExtremum$$1(x0,x1,x2),1),0),ty=mathMax$2(mathMin$2(quadraticExtremum$$1(y0,y1,y2),1),0),x=quadraticAt$$1(x0,x1,x2,tx),y=quadraticAt$$1(y0,y1,y2,ty);min$$1[0]=mathMin$2(x0,x2,x),min$$1[1]=mathMin$2(y0,y2,y),max$$1[0]=mathMax$2(x0,x2,x),max$$1[1]=mathMax$2(y0,y2,y)}(xi,yi,data[i++],data[i++],data[i],data[i+1],min2,max2),xi=data[i++],yi=data[i++];break;case CMD.A:var cx=data[i++],cy=data[i++],rx=data[i++],ry=data[i++],startAngle=data[i++],endAngle=data[i++]+startAngle,anticlockwise=(data[i++],1-data[i++]);1==i&&(x0=mathCos$1(startAngle)*rx+cx,y0=mathSin$1(startAngle)*ry+cy),function(x,y,rx,ry,startAngle,endAngle,anticlockwise,min$$1,max$$1){var tmp,vec2Min=min,vec2Max=max,diff=Math.abs(startAngle-endAngle);if(diff%PI2<1e-4&&1e-4<diff)return min$$1[0]=x-rx,min$$1[1]=y-ry,max$$1[0]=x+rx,max$$1[1]=y+ry;start[0]=mathCos$2(startAngle)*rx+x,start[1]=mathSin$2(startAngle)*ry+y,end[0]=mathCos$2(endAngle)*rx+x,end[1]=mathSin$2(endAngle)*ry+y,vec2Min(min$$1,start,end),vec2Max(max$$1,start,end),(startAngle%=PI2)<0&&(startAngle+=PI2),(endAngle%=PI2)<0&&(endAngle+=PI2),endAngle<startAngle&&!anticlockwise?endAngle+=PI2:startAngle<endAngle&&anticlockwise&&(startAngle+=PI2),anticlockwise&&(tmp=endAngle,endAngle=startAngle,startAngle=tmp);for(var angle=0;angle<endAngle;angle+=Math.PI/2)startAngle<angle&&(extremity[0]=mathCos$2(angle)*rx+x,extremity[1]=mathSin$2(angle)*ry+y,vec2Min(min$$1,extremity,min$$1),vec2Max(max$$1,extremity,max$$1))}(cx,cy,rx,ry,startAngle,endAngle,anticlockwise,min2,max2),xi=mathCos$1(endAngle)*rx+cx,yi=mathSin$1(endAngle)*ry+cy;break;case CMD.R:fromLine(x0=xi=data[i++],y0=yi=data[i++],x0+data[i++],y0+data[i++],min2,max2);break;case CMD.Z:xi=x0,yi=y0}min(min$1,min$1,min2),max(max$1,max$1,max2)}return 0===i&&(min$1[0]=min$1[1]=max$1[0]=max$1[1]=0),new BoundingRect(min$1[0],min$1[1],max$1[0]-min$1[0],max$1[1]-min$1[1])},rebuildPath:function(ctx){for(var x0,y0,xi,yi,x,y,d=this.data,ux=this._ux,uy=this._uy,len$$1=this._len,i=0;i<len$$1;){var cmd=d[i++];switch(1==i&&(x0=xi=d[i],y0=yi=d[i+1]),cmd){case CMD.M:x0=xi=d[i++],y0=yi=d[i++],ctx.moveTo(xi,yi);break;case CMD.L:x=d[i++],y=d[i++],(mathAbs(x-xi)>ux||mathAbs(y-yi)>uy||i===len$$1-1)&&(ctx.lineTo(x,y),xi=x,yi=y);break;case CMD.C:ctx.bezierCurveTo(d[i++],d[i++],d[i++],d[i++],d[i++],d[i++]),xi=d[i-2],yi=d[i-1];break;case CMD.Q:ctx.quadraticCurveTo(d[i++],d[i++],d[i++],d[i++]),xi=d[i-2],yi=d[i-1];break;case CMD.A:var cx=d[i++],cy=d[i++],rx=d[i++],ry=d[i++],theta=d[i++],dTheta=d[i++],psi=d[i++],fs=d[i++],r=ry<rx?rx:ry,scaleX=ry<rx?1:rx/ry,scaleY=ry<rx?ry/rx:1,endAngle=theta+dTheta;.001<Math.abs(rx-ry)?(ctx.translate(cx,cy),ctx.rotate(psi),ctx.scale(scaleX,scaleY),ctx.arc(0,0,r,theta,endAngle,1-fs),ctx.scale(1/scaleX,1/scaleY),ctx.rotate(-psi),ctx.translate(-cx,-cy)):ctx.arc(cx,cy,r,theta,endAngle,1-fs),1==i&&(x0=mathCos$1(theta)*rx+cx,y0=mathSin$1(theta)*ry+cy),xi=mathCos$1(endAngle)*rx+cx,yi=mathSin$1(endAngle)*ry+cy;break;case CMD.R:x0=xi=d[i],y0=yi=d[i+1],ctx.rect(d[i++],d[i++],d[i++],d[i++]);break;case CMD.Z:ctx.closePath(),xi=x0,yi=y0}}}},PathProxy.CMD=CMD;var PI2$3=2*Math.PI;function normalizeRadian(angle){return(angle%=PI2$3)<0&&(angle+=PI2$3),angle}var PI2$2=2*Math.PI;function windingLine(x0,y0,x1,y1,x,y){if(y0<y&&y1<y||y<y0&&y<y1)return 0;if(y1===y0)return 0;var dir=y1<y0?1:-1,t=(y-y0)/(y1-y0);return 1!=t&&0!=t||(dir=y1<y0?.5:-.5),x<t*(x1-x0)+x0?dir:0}var CMD$1=PathProxy.CMD,PI2$1=2*Math.PI,EPSILON$2=1e-4;var roots=[-1,-1,-1],extrema=[-1,-1];function windingCubic(x0,y0,x1,y1,x2,y2,x3,y3,x,y){if(y0<y&&y1<y&&y2<y&&y3<y||y<y0&&y<y1&&y<y2&&y<y3)return 0;var nRoots=function(p0,p1,p2,p3,val,roots){var disc,K,discSqrt,Y1,Y2,T,theta,ASqrt,tmp,t1,t2,t3,a=p3+3*(p1-p2)-p0,b=3*(p2-2*p1+p0),c=3*(p1-p0),d=p0-val,A=b*b-3*a*c,B=b*c-9*a*d,C=c*c-3*b*d,n=0;return isAroundZero(A)&&isAroundZero(B)?isAroundZero(b)?roots[0]=0:0<=(t1=-c/b)&&t1<=1&&(roots[n++]=t1):isAroundZero(disc=B*B-4*A*C)?(t2=-(K=B/A)/2,0<=(t1=-b/a+K)&&t1<=1&&(roots[n++]=t1),0<=t2&&t2<=1&&(roots[n++]=t2)):0<disc?(Y2=A*b+1.5*a*(-B-(discSqrt=mathSqrt$2(disc))),0<=(t1=(-b-((Y1=(Y1=A*b+1.5*a*(-B+discSqrt))<0?-mathPow(-Y1,ONE_THIRD):mathPow(Y1,ONE_THIRD))+(Y2=Y2<0?-mathPow(-Y2,ONE_THIRD):mathPow(Y2,ONE_THIRD))))/(3*a))&&t1<=1&&(roots[n++]=t1)):(T=(2*A*b-3*a*B)/(2*mathSqrt$2(A*A*A)),theta=Math.acos(T)/3,t1=(-b-2*(ASqrt=mathSqrt$2(A))*(tmp=Math.cos(theta)))/(3*a),t2=(-b+ASqrt*(tmp+THREE_SQRT*Math.sin(theta)))/(3*a),t3=(-b+ASqrt*(tmp-THREE_SQRT*Math.sin(theta)))/(3*a),0<=t1&&t1<=1&&(roots[n++]=t1),0<=t2&&t2<=1&&(roots[n++]=t2),0<=t3&&t3<=1&&(roots[n++]=t3)),n}(y0,y1,y2,y3,y,roots);if(0===nRoots)return 0;for(var y0_,y1_,tmp,w=0,nExtrema=-1,i=0;i<nRoots;i++){var t=roots[i],unit=0===t||1===t?.5:1;cubicAt(x0,x1,x2,x3,t)<x||(nExtrema<0&&(nExtrema=cubicExtrema(y0,y1,y2,y3,extrema),extrema[1]<extrema[0]&&1<nExtrema&&(tmp=void 0,tmp=extrema[0],extrema[0]=extrema[1],extrema[1]=tmp),y0_=cubicAt(y0,y1,y2,y3,extrema[0]),1<nExtrema&&(y1_=cubicAt(y0,y1,y2,y3,extrema[1]))),2==nExtrema?t<extrema[0]?w+=y0_<y0?unit:-unit:t<extrema[1]?w+=y1_<y0_?unit:-unit:w+=y3<y1_?unit:-unit:t<extrema[0]?w+=y0_<y0?unit:-unit:w+=y3<y0_?unit:-unit)}return w}function windingQuadratic(x0,y0,x1,y1,x2,y2,x,y){if(y0<y&&y1<y&&y2<y||y<y0&&y<y1&&y<y2)return 0;var nRoots=function(p0,p1,p2,val,roots){var disc,discSqrt,t1,t2,a=p0-2*p1+p2,b=2*(p1-p0),c=p0-val,n=0;return isAroundZero(a)?isNotAroundZero$1(b)&&0<=(t1=-c/b)&&t1<=1&&(roots[n++]=t1):isAroundZero(disc=b*b-4*a*c)?0<=(t1=-b/(2*a))&&t1<=1&&(roots[n++]=t1):0<disc&&(t2=(-b-(discSqrt=mathSqrt$2(disc)))/(2*a),0<=(t1=(-b+discSqrt)/(2*a))&&t1<=1&&(roots[n++]=t1),0<=t2&&t2<=1&&(roots[n++]=t2)),n}(y0,y1,y2,y,roots);if(0===nRoots)return 0;var t=quadraticExtremum(y0,y1,y2);if(0<=t&&t<=1){for(var w=0,y_=quadraticAt(y0,y1,y2,t),i=0;i<nRoots;i++){var unit=0===roots[i]||1===roots[i]?.5:1;quadraticAt(x0,x1,x2,roots[i])<x||(roots[i]<t?w+=y_<y0?unit:-unit:w+=y2<y_?unit:-unit)}return w}unit=0===roots[0]||1===roots[0]?.5:1;return quadraticAt(x0,x1,x2,roots[0])<x?0:y2<y0?unit:-unit}function containPath(data,lineWidth,isStroke,x,y){for(var a,b,w=0,xi=0,yi=0,x0=0,y0=0,i=0;i<data.length;){var cmd=data[i++];switch(cmd===CMD$1.M&&1<i&&(isStroke||(w+=windingLine(xi,yi,x0,y0,x,y))),1==i&&(x0=xi=data[i],y0=yi=data[i+1]),cmd){case CMD$1.M:xi=x0=data[i++],yi=y0=data[i++];break;case CMD$1.L:if(isStroke){if(containStroke$1(xi,yi,data[i],data[i+1],lineWidth,x,y))return!0}else w+=windingLine(xi,yi,data[i],data[i+1],x,y)||0;xi=data[i++],yi=data[i++];break;case CMD$1.C:if(isStroke){if(containStroke$2(xi,yi,data[i++],data[i++],data[i++],data[i++],data[i],data[i+1],lineWidth,x,y))return!0}else w+=windingCubic(xi,yi,data[i++],data[i++],data[i++],data[i++],data[i],data[i+1],x,y)||0;xi=data[i++],yi=data[i++];break;case CMD$1.Q:if(isStroke){if(containStroke$3(xi,yi,data[i++],data[i++],data[i],data[i+1],lineWidth,x,y))return!0}else w+=windingQuadratic(xi,yi,data[i++],data[i++],data[i],data[i+1],x,y)||0;xi=data[i++],yi=data[i++];break;case CMD$1.A:var cx=data[i++],cy=data[i++],rx=data[i++],ry=data[i++],theta=data[i++],dTheta=data[i++],anticlockwise=(data[i++],1-data[i++]),x1=Math.cos(theta)*rx+cx,y1=Math.sin(theta)*ry+cy;1<i?w+=windingLine(xi,yi,x1,y1,x,y):(x0=x1,y0=y1);var _x=(x-cx)*ry/rx+cx;if(isStroke){if(function(cx,cy,r,startAngle,endAngle,anticlockwise,lineWidth,x,y){if(0!==lineWidth){var _l=lineWidth;x-=cx,y-=cy;var tmp,d=Math.sqrt(x*x+y*y);if(!(r<d-_l||d+_l<r)){if(Math.abs(startAngle-endAngle)%PI2$2<1e-4)return 1;(endAngle=anticlockwise?(tmp=startAngle,startAngle=normalizeRadian(endAngle),normalizeRadian(tmp)):(startAngle=normalizeRadian(startAngle),normalizeRadian(endAngle)))<startAngle&&(endAngle+=PI2$2);var angle=Math.atan2(y,x);return angle<0&&(angle+=PI2$2),startAngle<=angle&&angle<=endAngle||startAngle<=angle+PI2$2&&angle+PI2$2<=endAngle}}}(cx,cy,ry,theta,theta+dTheta,anticlockwise,lineWidth,_x,y))return!0}else w+=function(cx,cy,r,startAngle,endAngle,anticlockwise,x,y){if(r<(y-=cy)||y<-r)return 0;var tmp=Math.sqrt(r*r-y*y);roots[0]=-tmp,roots[1]=tmp;var diff=Math.abs(startAngle-endAngle);if(diff<1e-4)return 0;if(diff%PI2$1<1e-4){endAngle=PI2$1;var dir=anticlockwise?1:-1;return x>=roots[startAngle=0]+cx&&x<=roots[1]+cx?dir:0}(endAngle=anticlockwise?(tmp=startAngle,startAngle=normalizeRadian(endAngle),normalizeRadian(tmp)):(startAngle=normalizeRadian(startAngle),normalizeRadian(endAngle)))<startAngle&&(endAngle+=PI2$1);for(var w=0,i=0;i<2;i++){var angle,x_=roots[i];x<x_+cx&&(dir=anticlockwise?1:-1,(angle=Math.atan2(y,x_))<0&&(angle=PI2$1+angle),(startAngle<=angle&&angle<=endAngle||startAngle<=angle+PI2$1&&angle+PI2$1<=endAngle)&&(angle>Math.PI/2&&angle<1.5*Math.PI&&(dir=-dir),w+=dir))}return w}(cx,cy,ry,theta,theta+dTheta,anticlockwise,_x,y);xi=Math.cos(theta+dTheta)*rx+cx,yi=Math.sin(theta+dTheta)*ry+cy;break;case CMD$1.R:x0=xi=data[i++],y0=yi=data[i++];x1=x0+data[i++],y1=y0+data[i++];if(isStroke){if(containStroke$1(x0,y0,x1,y0,lineWidth,x,y)||containStroke$1(x1,y0,x1,y1,lineWidth,x,y)||containStroke$1(x1,y1,x0,y1,lineWidth,x,y)||containStroke$1(x0,y1,x0,y0,lineWidth,x,y))return!0}else w+=windingLine(x1,y0,x1,y1,x,y),w+=windingLine(x0,y1,x0,y0,x,y);break;case CMD$1.Z:if(isStroke){if(containStroke$1(xi,yi,x0,y0,lineWidth,x,y))return!0}else w+=windingLine(xi,yi,x0,y0,x,y);xi=x0,yi=y0}}return isStroke||(a=yi,b=y0,Math.abs(a-b)<EPSILON$2)||(w+=windingLine(xi,yi,x0,y0,x,y)||0),0!==w}var getCanvasPattern=Pattern.prototype.getCanvasPattern,abs=Math.abs,pathProxyForDraw=new PathProxy(!0);function Path(opts){Displayable.call(this,opts),this.path=null}Path.prototype={constructor:Path,type:"path",__dirtyPath:!0,strokeContainThreshold:5,brush:function(ctx,prevEl){var rect,style=this.style,path=this.path||pathProxyForDraw,hasStroke=style.hasStroke(),hasFill=style.hasFill(),fill=style.fill,stroke=style.stroke,hasFillGradient=hasFill&&!!fill.colorStops,hasStrokeGradient=hasStroke&&!!stroke.colorStops,hasFillPattern=hasFill&&!!fill.image,hasStrokePattern=hasStroke&&!!stroke.image;style.bind(ctx,this,prevEl),this.setTransform(ctx),this.__dirty&&(hasFillGradient&&(rect=rect||this.getBoundingRect(),this._fillGradient=style.getGradient(ctx,fill,rect)),hasStrokeGradient&&(rect=rect||this.getBoundingRect(),this._strokeGradient=style.getGradient(ctx,stroke,rect))),hasFillGradient?ctx.fillStyle=this._fillGradient:hasFillPattern&&(ctx.fillStyle=getCanvasPattern.call(fill,ctx)),hasStrokeGradient?ctx.strokeStyle=this._strokeGradient:hasStrokePattern&&(ctx.strokeStyle=getCanvasPattern.call(stroke,ctx));var lineDash=style.lineDash,lineDashOffset=style.lineDashOffset,ctxLineDash=!!ctx.setLineDash,scale=this.getGlobalScale();path.setScale(scale[0],scale[1]),this.__dirtyPath||lineDash&&!ctxLineDash&&hasStroke?(path.beginPath(ctx),lineDash&&!ctxLineDash&&(path.setLineDash(lineDash),path.setLineDashOffset(lineDashOffset)),this.buildPath(path,this.shape,!1),this.path&&(this.__dirtyPath=!1)):(ctx.beginPath(),this.path.rebuildPath(ctx)),hasFill&&path.fill(ctx),lineDash&&ctxLineDash&&(ctx.setLineDash(lineDash),ctx.lineDashOffset=lineDashOffset),hasStroke&&path.stroke(ctx),lineDash&&ctxLineDash&&ctx.setLineDash([]),this.restoreTransform(ctx),null!=style.text&&this.drawRectText(ctx,this.getBoundingRect())},buildPath:function(ctx,shapeCfg,inBundle){},createPathProxy:function(){this.path=new PathProxy},getBoundingRect:function(){var path,rect=this._rect,style=this.style,needsUpdateRect=!rect;if(needsUpdateRect&&(path=(path=this.path)||(this.path=new PathProxy),this.__dirtyPath&&(path.beginPath(),this.buildPath(path,this.shape,!1)),rect=path.getBoundingRect()),this._rect=rect,style.hasStroke()){var w,lineScale,rectWithStroke=this._rectWithStroke||(this._rectWithStroke=rect.clone());return(this.__dirty||needsUpdateRect)&&(rectWithStroke.copy(rect),w=style.lineWidth,lineScale=style.strokeNoScale?this.getLineScale():1,style.hasFill()||(w=Math.max(w,this.strokeContainThreshold||4)),1e-10<lineScale&&(rectWithStroke.width+=w/lineScale,rectWithStroke.height+=w/lineScale,rectWithStroke.x-=w/lineScale/2,rectWithStroke.y-=w/lineScale/2)),rectWithStroke}return rect},contain:function(x,y){var localPos=this.transformCoordToLocal(x,y),rect=this.getBoundingRect(),style=this.style;if(x=localPos[0],y=localPos[1],rect.contain(x,y)){var pathData=this.path.data;if(style.hasStroke()){var lineWidth=style.lineWidth,lineScale=style.strokeNoScale?this.getLineScale():1;if(1e-10<lineScale&&(style.hasFill()||(lineWidth=Math.max(lineWidth,this.strokeContainThreshold)),function(pathData,lineWidth,x,y){return containPath(pathData,lineWidth,!0,x,y)}(pathData,lineWidth/lineScale,x,y)))return!0}if(style.hasFill())return function(pathData,x,y){return containPath(pathData,0,!1,x,y)}(pathData,x,y)}return!1},dirty:function(dirtyPath){null==dirtyPath&&(dirtyPath=!0),dirtyPath&&(this.__dirtyPath=dirtyPath,this._rect=null),this.__dirty=!0,this.__zr&&this.__zr.refresh(),this.__clipTarget&&this.__clipTarget.dirty()},animateShape:function(loop){return this.animate("shape",loop)},attrKV:function(key,value){"shape"===key?(this.setShape(value),this.__dirtyPath=!0,this._rect=null):Displayable.prototype.attrKV.call(this,key,value)},setShape:function(key,value){var shape=this.shape;if(shape){if(isObject(key))for(var name in key)key.hasOwnProperty(name)&&(shape[name]=key[name]);else shape[key]=value;this.dirty(!0)}return this},getLineScale:function(){var m=this.transform;return m&&1e-10<abs(m[0]-1)&&1e-10<abs(m[3]-1)?Math.sqrt(abs(m[0]*m[3]-m[2]*m[1])):1}},Path.extend=function(defaults$$1){function Sub(opts){Path.call(this,opts),defaults$$1.style&&this.style.extendFrom(defaults$$1.style,!1);var defaultShape=defaults$$1.shape;if(defaultShape){this.shape=this.shape||{};var name,thisShape=this.shape;for(name in defaultShape)!thisShape.hasOwnProperty(name)&&defaultShape.hasOwnProperty(name)&&(thisShape[name]=defaultShape[name])}defaults$$1.init&&defaults$$1.init.call(this,opts)}for(var name in inherits(Sub,Path),defaults$$1)"style"!==name&&"shape"!==name&&(Sub.prototype[name]=defaults$$1[name]);return Sub},inherits(Path,Displayable);function vMag(v){return Math.sqrt(v[0]*v[0]+v[1]*v[1])}var CMD$2=PathProxy.CMD,points=[[],[],[]],mathSqrt$3=Math.sqrt,mathAtan2=Math.atan2,transformPath=function(path,m){for(var cmd,nPoint,k,p,data=path.data,M=CMD$2.M,C=CMD$2.C,L=CMD$2.L,R=CMD$2.R,A=CMD$2.A,Q=CMD$2.Q,i=0,j=0;i<data.length;){switch(cmd=data[i++],j=i,nPoint=0,cmd){case M:case L:nPoint=1;break;case C:nPoint=3;break;case Q:nPoint=2;break;case A:var x=m[4],y=m[5],sx=mathSqrt$3(m[0]*m[0]+m[1]*m[1]),sy=mathSqrt$3(m[2]*m[2]+m[3]*m[3]),angle=mathAtan2(-m[1]/sy,m[0]/sx);data[i]*=sx,data[i++]+=x,data[i]*=sy,data[i++]+=y,data[i++]*=sx,data[i++]*=sy,data[i++]+=angle,data[i++]+=angle,j=i+=2;break;case R:p[0]=data[i++],p[1]=data[i++],applyTransform(p,p,m),data[j++]=p[0],data[j++]=p[1],p[0]+=data[i++],p[1]+=data[i++],applyTransform(p,p,m),data[j++]=p[0],data[j++]=p[1]}for(k=0;k<nPoint;k++){(p=points[k])[0]=data[i++],p[1]=data[i++],applyTransform(p,p,m),data[j++]=p[0],data[j++]=p[1]}}},cc=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"],mathSqrt=Math.sqrt,mathSin=Math.sin,mathCos=Math.cos,PI=Math.PI,vRatio=function(u,v){return(u[0]*v[0]+u[1]*v[1])/(vMag(u)*vMag(v))},vAngle=function(u,v){return(u[0]*v[1]<u[1]*v[0]?-1:1)*Math.acos(vRatio(u,v))};function processArc(x1,y1,x2,y2,fa,fs,rx,ry,psiDeg,cmd,path){var psi=psiDeg*(PI/180),xp=mathCos(psi)*(x1-x2)/2+mathSin(psi)*(y1-y2)/2,yp=-1*mathSin(psi)*(x1-x2)/2+mathCos(psi)*(y1-y2)/2,lambda=xp*xp/(rx*rx)+yp*yp/(ry*ry);1<lambda&&(rx*=mathSqrt(lambda),ry*=mathSqrt(lambda));var f=(fa===fs?-1:1)*mathSqrt((rx*rx*(ry*ry)-rx*rx*(yp*yp)-ry*ry*(xp*xp))/(rx*rx*(yp*yp)+ry*ry*(xp*xp)))||0,cxp=f*rx*yp/ry,cyp=f*-ry*xp/rx,cx=(x1+x2)/2+mathCos(psi)*cxp-mathSin(psi)*cyp,cy=(y1+y2)/2+mathSin(psi)*cxp+mathCos(psi)*cyp,theta=vAngle([1,0],[(xp-cxp)/rx,(yp-cyp)/ry]),u=[(xp-cxp)/rx,(yp-cyp)/ry],v=[(-1*xp-cxp)/rx,(-1*yp-cyp)/ry],dTheta=vAngle(u,v);vRatio(u,v)<=-1&&(dTheta=PI),1<=vRatio(u,v)&&(dTheta=0),0===fs&&0<dTheta&&(dTheta-=2*PI),1===fs&&dTheta<0&&(dTheta+=2*PI),path.addData(cmd,cx,cy,rx,ry,theta,dTheta,psi,fs)}function createPathOptions(str,opts){var pathProxy=function(data){if(!data)return[];for(var cs=data.replace(/-/g," -").replace(/  /g," ").replace(/ /g,",").replace(/,,/g,","),n=0;n<cc.length;n++)cs=cs.replace(new RegExp(cc[n],"g"),"|"+cc[n]);var prevCmd,arr=cs.split("|"),cpx=0,cpy=0,path=new PathProxy,CMD=PathProxy.CMD;for(n=1;n<arr.length;n++){var cmd,str=arr[n],c=str.charAt(0),off=0,p=str.slice(1).replace(/e,-/g,"e-").split(",");0<p.length&&""===p[0]&&p.shift();for(var i=0;i<p.length;i++)p[i]=parseFloat(p[i]);for(;off<p.length&&!isNaN(p[off])&&!isNaN(p[0]);){var ctlPtx,ctlPty,rx,ry,psi,fa,fs,x1=cpx,y1=cpy;switch(c){case"l":cpx+=p[off++],cpy+=p[off++],cmd=CMD.L,path.addData(cmd,cpx,cpy);break;case"L":cpx=p[off++],cpy=p[off++],cmd=CMD.L,path.addData(cmd,cpx,cpy);break;case"m":cpx+=p[off++],cpy+=p[off++],cmd=CMD.M,path.addData(cmd,cpx,cpy),c="l";break;case"M":cpx=p[off++],cpy=p[off++],cmd=CMD.M,path.addData(cmd,cpx,cpy),c="L";break;case"h":cpx+=p[off++],cmd=CMD.L,path.addData(cmd,cpx,cpy);break;case"H":cpx=p[off++],cmd=CMD.L,path.addData(cmd,cpx,cpy);break;case"v":cpy+=p[off++],cmd=CMD.L,path.addData(cmd,cpx,cpy);break;case"V":cpy=p[off++],cmd=CMD.L,path.addData(cmd,cpx,cpy);break;case"C":cmd=CMD.C,path.addData(cmd,p[off++],p[off++],p[off++],p[off++],p[off++],p[off++]),cpx=p[off-2],cpy=p[off-1];break;case"c":cmd=CMD.C,path.addData(cmd,p[off++]+cpx,p[off++]+cpy,p[off++]+cpx,p[off++]+cpy,p[off++]+cpx,p[off++]+cpy),cpx+=p[off-2],cpy+=p[off-1];break;case"S":ctlPtx=cpx,ctlPty=cpy;var len=path.len(),pathData=path.data;prevCmd===CMD.C&&(ctlPtx+=cpx-pathData[len-4],ctlPty+=cpy-pathData[len-3]),cmd=CMD.C,x1=p[off++],y1=p[off++],cpx=p[off++],cpy=p[off++],path.addData(cmd,ctlPtx,ctlPty,x1,y1,cpx,cpy);break;case"s":ctlPtx=cpx,ctlPty=cpy;len=path.len(),pathData=path.data;prevCmd===CMD.C&&(ctlPtx+=cpx-pathData[len-4],ctlPty+=cpy-pathData[len-3]),cmd=CMD.C,x1=cpx+p[off++],y1=cpy+p[off++],cpx+=p[off++],cpy+=p[off++],path.addData(cmd,ctlPtx,ctlPty,x1,y1,cpx,cpy);break;case"Q":x1=p[off++],y1=p[off++],cpx=p[off++],cpy=p[off++],cmd=CMD.Q,path.addData(cmd,x1,y1,cpx,cpy);break;case"q":x1=p[off++]+cpx,y1=p[off++]+cpy,cpx+=p[off++],cpy+=p[off++],cmd=CMD.Q,path.addData(cmd,x1,y1,cpx,cpy);break;case"T":ctlPtx=cpx,ctlPty=cpy;len=path.len(),pathData=path.data;prevCmd===CMD.Q&&(ctlPtx+=cpx-pathData[len-4],ctlPty+=cpy-pathData[len-3]),cpx=p[off++],cpy=p[off++],cmd=CMD.Q,path.addData(cmd,ctlPtx,ctlPty,cpx,cpy);break;case"t":ctlPtx=cpx,ctlPty=cpy;len=path.len(),pathData=path.data;prevCmd===CMD.Q&&(ctlPtx+=cpx-pathData[len-4],ctlPty+=cpy-pathData[len-3]),cpx+=p[off++],cpy+=p[off++],cmd=CMD.Q,path.addData(cmd,ctlPtx,ctlPty,cpx,cpy);break;case"A":rx=p[off++],ry=p[off++],psi=p[off++],fa=p[off++],fs=p[off++],processArc(x1=cpx,y1=cpy,cpx=p[off++],cpy=p[off++],fa,fs,rx,ry,psi,cmd=CMD.A,path);break;case"a":rx=p[off++],ry=p[off++],psi=p[off++],fa=p[off++],fs=p[off++],processArc(x1=cpx,y1=cpy,cpx+=p[off++],cpy+=p[off++],fa,fs,rx,ry,psi,cmd=CMD.A,path)}}"z"!==c&&"Z"!==c||(cmd=CMD.Z,path.addData(cmd)),prevCmd=cmd}return path.toStatic(),path}(str);return(opts=opts||{}).buildPath=function(path){var ctx;path.setData?(path.setData(pathProxy.data),(ctx=path.getContext())&&path.rebuildPath(ctx)):(ctx=path,pathProxy.rebuildPath(ctx))},opts.applyTransform=function(m){transformPath(pathProxy,m),this.dirty(!0)},opts}var path=(Object.freeze||Object)({createFromString:function(str,opts){return new Path(createPathOptions(str,opts))},extendFromString:function(str,opts){return Path.extend(createPathOptions(str,opts))},mergePath:function(pathEls,opts){for(var pathList=[],len=pathEls.length,i=0;i<len;i++){var pathEl=pathEls[i];pathEl.path||pathEl.createPathProxy(),pathEl.__dirtyPath&&pathEl.buildPath(pathEl.path,pathEl.shape,!0),pathList.push(pathEl.path)}var pathBundle=new Path(opts);return pathBundle.createPathProxy(),pathBundle.buildPath=function(path){path.appendPath(pathList);var ctx=path.getContext();ctx&&path.rebuildPath(ctx)},pathBundle}}),CompoundPath=Path.extend({type:"compound",shape:{paths:null},_updatePathDirty:function(){for(var dirtyPath=this.__dirtyPath,paths=this.shape.paths,i=0;i<paths.length;i++)dirtyPath=dirtyPath||paths[i].__dirtyPath;this.__dirtyPath=dirtyPath,this.__dirty=this.__dirty||dirtyPath},beforeBrush:function(){this._updatePathDirty();for(var paths=this.shape.paths||[],scale=this.getGlobalScale(),i=0;i<paths.length;i++)paths[i].path||paths[i].createPathProxy(),paths[i].path.setScale(scale[0],scale[1])},buildPath:function(ctx,shape){for(var paths=shape.paths||[],i=0;i<paths.length;i++)paths[i].buildPath(ctx,paths[i].shape,!0)},afterBrush:function(){for(var paths=this.shape.paths||[],i=0;i<paths.length;i++)paths[i].__dirtyPath=!1},getBoundingRect:function(){return this._updatePathDirty(),Path.prototype.getBoundingRect.call(this)}}),Text=function(opts){Displayable.call(this,opts)};Text.prototype={constructor:Text,type:"text",brush:function(ctx,prevEl){var style=this.style;this.__dirty&&normalizeTextStyle(style),style.fill=style.stroke=style.shadowBlur=style.shadowColor=style.shadowOffsetX=style.shadowOffsetY=null;var text=style.text;null!=text&&(text+=""),style.bind(ctx,this,prevEl),needDrawText(text,style)&&(this.setTransform(ctx),renderText(this,ctx,text,style),this.restoreTransform(ctx))},getBoundingRect:function(){var rect,w,style=this.style;return this.__dirty&&normalizeTextStyle(style),this._rect||(null!=style.text?0:0,(rect=getBoundingRect(style.text+"",style.font,style.textAlign,style.textVerticalAlign,style.textPadding,style.rich)).x+=style.x||0,rect.y+=style.y||0,getStroke(style.textStroke,style.textStrokeWidth)&&(w=style.textStrokeWidth,rect.x-=w/2,rect.y-=w/2,rect.width+=w,rect.height+=w),this._rect=rect),this._rect}},inherits(Text,Displayable);var Arc=Path.extend({type:"arc",shape:{cx:0,cy:0,r:0,startAngle:0,endAngle:2*Math.PI,clockwise:!0},style:{stroke:"#000",fill:null},buildPath:function(ctx,shape){var x=shape.cx,y=shape.cy,r=Math.max(shape.r,0),startAngle=shape.startAngle,endAngle=shape.endAngle,clockwise=shape.clockwise,unitX=Math.cos(startAngle),unitY=Math.sin(startAngle);ctx.moveTo(unitX*r+x,unitY*r+y),ctx.arc(x,y,r,startAngle,endAngle,!clockwise)}}),out=[];function someVectorAt(shape,t,isTangent){var cpx2=shape.cpx2,cpy2=shape.cpy2;return null===cpx2||null===cpy2?[(isTangent?cubicDerivativeAt:cubicAt)(shape.x1,shape.cpx1,shape.cpx2,shape.x2,t),(isTangent?cubicDerivativeAt:cubicAt)(shape.y1,shape.cpy1,shape.cpy2,shape.y2,t)]:[(isTangent?quadraticDerivativeAt:quadraticAt)(shape.x1,shape.cpx1,shape.x2,t),(isTangent?quadraticDerivativeAt:quadraticAt)(shape.y1,shape.cpy1,shape.y2,t)]}var BezierCurve=Path.extend({type:"bezier-curve",shape:{x1:0,y1:0,x2:0,y2:0,cpx1:0,cpy1:0,percent:1},style:{stroke:"#000",fill:null},buildPath:function(ctx,shape){var x1=shape.x1,y1=shape.y1,x2=shape.x2,y2=shape.y2,cpx1=shape.cpx1,cpy1=shape.cpy1,cpx2=shape.cpx2,cpy2=shape.cpy2,percent=shape.percent;0!==percent&&(ctx.moveTo(x1,y1),null==cpx2||null==cpy2?(percent<1&&(quadraticSubdivide(x1,cpx1,x2,percent,out),cpx1=out[1],x2=out[2],quadraticSubdivide(y1,cpy1,y2,percent,out),cpy1=out[1],y2=out[2]),ctx.quadraticCurveTo(cpx1,cpy1,x2,y2)):(percent<1&&(cubicSubdivide(x1,cpx1,cpx2,x2,percent,out),cpx1=out[1],cpx2=out[2],x2=out[3],cubicSubdivide(y1,cpy1,cpy2,y2,percent,out),cpy1=out[1],cpy2=out[2],y2=out[3]),ctx.bezierCurveTo(cpx1,cpy1,cpx2,cpy2,x2,y2)))},pointAt:function(t){return someVectorAt(this.shape,t,!1)},tangentAt:function(t){var p=someVectorAt(this.shape,t,!0);return normalize(p,p)}}),Circle=Path.extend({type:"circle",shape:{cx:0,cy:0,r:0},buildPath:function(ctx,shape,inBundle){inBundle&&ctx.moveTo(shape.cx+shape.r,shape.cy),ctx.arc(shape.cx,shape.cy,shape.r,0,2*Math.PI,!0)}}),Droplet=Path.extend({type:"droplet",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(ctx,shape){var x=shape.cx,y=shape.cy,a=shape.width,b=shape.height;ctx.moveTo(x,y+a),ctx.bezierCurveTo(x+a,y+a,x+3*a/2,y-a/3,x,y-b),ctx.bezierCurveTo(x-3*a/2,y-a/3,x-a,y+a,x,y+a),ctx.closePath()}}),Ellipse=Path.extend({type:"ellipse",shape:{cx:0,cy:0,rx:0,ry:0},buildPath:function(ctx,shape){var k=.5522848,x=shape.cx,y=shape.cy,a=shape.rx,b=shape.ry,ox=a*k,oy=b*k;ctx.moveTo(x-a,y),ctx.bezierCurveTo(x-a,y-oy,x-ox,y-b,x,y-b),ctx.bezierCurveTo(x+ox,y-b,x+a,y-oy,x+a,y),ctx.bezierCurveTo(x+a,y+oy,x+ox,y+b,x,y+b),ctx.bezierCurveTo(x-ox,y+b,x-a,y+oy,x-a,y),ctx.closePath()}}),Heart=Path.extend({type:"heart",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(ctx,shape){var x=shape.cx,y=shape.cy,a=shape.width,b=shape.height;ctx.moveTo(x,y),ctx.bezierCurveTo(x+a/2,y-2*b/3,x+2*a,y+b/3,x,y+b),ctx.bezierCurveTo(x-2*a,y+b/3,x-a/2,y-2*b/3,x,y)}}),PI$1=Math.PI,sin=Math.sin,cos=Math.cos,Isogon=Path.extend({type:"isogon",shape:{x:0,y:0,r:0,n:0},buildPath:function(ctx,shape){var n=shape.n;if(n&&!(n<2)){var x=shape.x,y=shape.y,r=shape.r,dStep=2*PI$1/n,deg=-PI$1/2;ctx.moveTo(x+r*cos(deg),y+r*sin(deg));for(var i=0,end=n-1;i<end;i++)deg+=dStep,ctx.lineTo(x+r*cos(deg),y+r*sin(deg));ctx.closePath()}}}),Line=Path.extend({type:"line",shape:{x1:0,y1:0,x2:0,y2:0,percent:1},style:{stroke:"#000",fill:null},buildPath:function(ctx,shape){var x1=shape.x1,y1=shape.y1,x2=shape.x2,y2=shape.y2,percent=shape.percent;0!==percent&&(ctx.moveTo(x1,y1),percent<1&&(x2=x1*(1-percent)+x2*percent,y2=y1*(1-percent)+y2*percent),ctx.lineTo(x2,y2))},pointAt:function(p){var shape=this.shape;return[shape.x1*(1-p)+shape.x2*p,shape.y1*(1-p)+shape.y2*p]}});function interpolate(p0,p1,p2,p3,t,t2,t3){var v0=.5*(p2-p0),v1=.5*(p3-p1);return(2*(p1-p2)+v0+v1)*t3+(-3*(p1-p2)-2*v0-v1)*t2+v0*t+p1}function buildPath$1(ctx,shape,closePath){var points=shape.points,smooth=shape.smooth;if(points&&2<=points.length){if(smooth&&"spline"!==smooth){var controlPoints=function(points,smooth,isLoop,constraint){var prevPoint,nextPoint,min$$1,max$$1,cps=[],v=[],v1=[],v2=[];if(constraint){min$$1=[1/0,1/0],max$$1=[-1/0,-1/0];for(var i=0,len$$1=points.length;i<len$$1;i++)min(min$$1,min$$1,points[i]),max(max$$1,max$$1,points[i]);min(min$$1,min$$1,constraint[0]),max(max$$1,max$$1,constraint[1])}for(i=0,len$$1=points.length;i<len$$1;i++){var point=points[i];if(isLoop)prevPoint=points[i?i-1:len$$1-1],nextPoint=points[(i+1)%len$$1];else{if(0===i||i===len$$1-1){cps.push(clone$1(points[i]));continue}prevPoint=points[i-1],nextPoint=points[i+1]}sub(v,nextPoint,prevPoint),scale(v,v,smooth);var d0=distance(point,prevPoint),d1=distance(point,nextPoint),sum=d0+d1;0!==sum&&(d0/=sum,d1/=sum),scale(v1,v,-d0),scale(v2,v,d1);var cp0=add([],point,v1),cp1=add([],point,v2);constraint&&(max(cp0,cp0,min$$1),min(cp0,cp0,max$$1),max(cp1,cp1,min$$1),min(cp1,cp1,max$$1)),cps.push(cp0),cps.push(cp1)}return isLoop&&cps.push(cps.shift()),cps}(points,smooth,closePath,shape.smoothConstraint);ctx.moveTo(points[0][0],points[0][1]);for(var len=points.length,i=0;i<(closePath?len:len-1);i++){var cp1=controlPoints[2*i],cp2=controlPoints[2*i+1],p=points[(i+1)%len];ctx.bezierCurveTo(cp1[0],cp1[1],cp2[0],cp2[1],p[0],p[1])}}else{"spline"===smooth&&(points=function(points,isLoop){for(var len$$1=points.length,ret=[],distance$$1=0,i=1;i<len$$1;i++)distance$$1+=distance(points[i-1],points[i]);for(var segs=(segs=distance$$1/2)<len$$1?len$$1:segs,i=0;i<segs;i++){var p0,p2,pos=i/(segs-1)*(isLoop?len$$1:len$$1-1),idx=Math.floor(pos),w=pos-idx,p1=points[idx%len$$1],p3=isLoop?(p0=points[(idx-1+len$$1)%len$$1],p2=points[(idx+1)%len$$1],points[(idx+2)%len$$1]):(p0=points[0===idx?idx:idx-1],p2=points[len$$1-2<idx?len$$1-1:idx+1],points[len$$1-3<idx?len$$1-1:idx+2]),w2=w*w,w3=w*w2;ret.push([interpolate(p0[0],p1[0],p2[0],p3[0],w,w2,w3),interpolate(p0[1],p1[1],p2[1],p3[1],w,w2,w3)])}return ret}(points,closePath)),ctx.moveTo(points[0][0],points[0][1]);for(var i=1,l=points.length;i<l;i++)ctx.lineTo(points[i][0],points[i][1])}closePath&&ctx.closePath()}}function Gradient(colorStops){this.colorStops=colorStops||[]}var orignalBrush,Polygon=Path.extend({type:"polygon",shape:{points:null,smooth:!1,smoothConstraint:null},buildPath:function(ctx,shape){buildPath$1(ctx,shape,!0)}}),Polyline=Path.extend({type:"polyline",shape:{points:null,smooth:!1,smoothConstraint:null},style:{stroke:"#000",fill:null},buildPath:function(ctx,shape){buildPath$1(ctx,shape,!1)}}),Rect=Path.extend({type:"rect",shape:{r:0,x:0,y:0,width:0,height:0},buildPath:function(ctx,shape){var x=shape.x,y=shape.y,width=shape.width,height=shape.height;shape.r?buildPath(ctx,shape):ctx.rect(x,y,width,height),ctx.closePath()}}),Ring=Path.extend({type:"ring",shape:{cx:0,cy:0,r:0,r0:0},buildPath:function(ctx,shape){var x=shape.cx,y=shape.cy,PI2=2*Math.PI;ctx.moveTo(x+shape.r,y),ctx.arc(x,y,shape.r,0,PI2,!1),ctx.moveTo(x+shape.r0,y),ctx.arc(x,y,shape.r0,0,PI2,!0)}}),sin$1=Math.sin,cos$1=Math.cos,radian=Math.PI/180,Rose=Path.extend({type:"rose",shape:{cx:0,cy:0,r:[],k:0,n:1},style:{stroke:"#000",fill:null},buildPath:function(ctx,shape){var x,y,r,R=shape.r,k=shape.k,n=shape.n,x0=shape.cx,y0=shape.cy;ctx.moveTo(x0,y0);for(var i=0,len=R.length;i<len;i++){r=R[i];for(var j=0;j<=360*n;j++)x=r*sin$1(k/n*j%360*radian)*cos$1(j*radian)+x0,y=r*sin$1(k/n*j%360*radian)*sin$1(j*radian)+y0,ctx.lineTo(x,y)}}}),shadowTemp=[["shadowBlur",0],["shadowColor","#000"],["shadowOffsetX",0],["shadowOffsetY",0]],Sector=Path.extend({type:"sector",shape:{cx:0,cy:0,r0:0,r:0,startAngle:0,endAngle:2*Math.PI,clockwise:!0},brush:(orignalBrush=Path.prototype.brush,env$1.browser.ie&&11<=env$1.browser.version?function(){var modified,clipPaths=this.__clipPaths,style=this.style;if(clipPaths)for(var i=0;i<clipPaths.length;i++){var clipPath=clipPaths[i],shape=clipPath&&clipPath.shape,type=clipPath&&clipPath.type;if(shape&&("sector"===type&&shape.startAngle===shape.endAngle||"rect"===type&&(!shape.width||!shape.height))){for(var j=0;j<shadowTemp.length;j++)shadowTemp[j][2]=style[shadowTemp[j][0]],style[shadowTemp[j][0]]=shadowTemp[j][1];modified=!0;break}}if(orignalBrush.apply(this,arguments),modified)for(j=0;j<shadowTemp.length;j++)style[shadowTemp[j][0]]=shadowTemp[j][2]}:orignalBrush),buildPath:function(ctx,shape){var x=shape.cx,y=shape.cy,r0=Math.max(shape.r0||0,0),r=Math.max(shape.r,0),startAngle=shape.startAngle,endAngle=shape.endAngle,clockwise=shape.clockwise,unitX=Math.cos(startAngle),unitY=Math.sin(startAngle);ctx.moveTo(unitX*r0+x,unitY*r0+y),ctx.lineTo(unitX*r+x,unitY*r+y),ctx.arc(x,y,r,startAngle,endAngle,!clockwise),ctx.lineTo(Math.cos(endAngle)*r0+x,Math.sin(endAngle)*r0+y),0!==r0&&ctx.arc(x,y,r0,endAngle,startAngle,clockwise),ctx.closePath()}}),PI$2=Math.PI,cos$2=Math.cos,sin$2=Math.sin,Star=Path.extend({type:"star",shape:{cx:0,cy:0,n:3,r0:null,r:0},buildPath:function(ctx,shape){var n=shape.n;if(n&&!(n<2)){var x=shape.cx,y=shape.cy,r=shape.r,r0=shape.r0;null==r0&&(r0=4<n?r*cos$2(2*PI$2/n)/cos$2(PI$2/n):r/3);var dStep=PI$2/n,deg=-PI$2/2,xStart=x+r*cos$2(deg),yStart=y+r*sin$2(deg);deg+=dStep,ctx.moveTo(xStart,yStart);for(var ri,i=0,end=2*n-1;i<end;i++)ri=i%2==0?r0:r,ctx.lineTo(x+ri*cos$2(deg),y+ri*sin$2(deg)),deg+=dStep;ctx.closePath()}}}),cos$3=Math.cos,sin$3=Math.sin,Trochoid=Path.extend({type:"trochoid",shape:{cx:0,cy:0,r:0,r0:0,d:0,location:"out"},style:{stroke:"#000",fill:null},buildPath:function(ctx,shape){var x2,y2,R=shape.r,r=shape.r0,d=shape.d,offsetX=shape.cx,offsetY=shape.cy,delta="out"==shape.location?1:-1;if(!(shape.location&&R<=r)){var theta,num=0,i=1,x1=(R+delta*r)*cos$3(0)-delta*d*cos$3(0)+offsetX,y1=(R+delta*r)*sin$3(0)-d*sin$3(0)+offsetY;for(ctx.moveTo(x1,y1);r*++num%(R+delta*r)!=0;);for(;theta=Math.PI/180*i,x2=(R+delta*r)*cos$3(theta)-delta*d*cos$3((R/r+delta)*theta)+offsetX,y2=(R+delta*r)*sin$3(theta)-d*sin$3((R/r+delta)*theta)+offsetY,ctx.lineTo(x2,y2),++i<=r*num/(R+delta*r)*360;);}}});Gradient.prototype={constructor:Gradient,addColorStop:function(offset,color){this.colorStops.push({offset:offset,color:color})}};function LinearGradient(x,y,x2,y2,colorStops,globalCoord){this.x=null==x?0:x,this.y=null==y?0:y,this.x2=null==x2?1:x2,this.y2=null==y2?0:y2,this.type="linear",this.global=globalCoord||!1,Gradient.call(this,colorStops)}LinearGradient.prototype={constructor:LinearGradient},inherits(LinearGradient,Gradient);function RadialGradient(x,y,r,colorStops,globalCoord){this.x=null==x?.5:x,this.y=null==y?.5:y,this.r=null==r?.5:r,this.type="radial",this.global=globalCoord||!1,Gradient.call(this,colorStops)}RadialGradient.prototype={constructor:RadialGradient},inherits(RadialGradient,Gradient);function createElement(name){return document.createElementNS("http://www.w3.org/2000/svg",name)}var CMD$3=PathProxy.CMD,arrayJoin=Array.prototype.join,NONE="none",mathRound=Math.round,mathSin$3=Math.sin,mathCos$3=Math.cos,PI$3=Math.PI,PI2$4=2*Math.PI,degree=180/PI$3,EPSILON$3=1e-4;function round4(val){return mathRound(1e4*val)/1e4}function isAroundZero$1(val){return val<EPSILON$3&&-EPSILON$3<val}function setTransform(svgEl,m){m&&attr(svgEl,"transform","matrix("+arrayJoin.call(m,",")+")")}function attr(el,key,val){val&&("linear"===val.type||"radial"===val.type)||el.setAttribute(key,val)}function bindStyle(svgEl,style,isText){var fill,stroke;!function(style,isText){var fill=isText?style.textFill:style.fill;return null!=fill&&fill!==NONE}(style,isText)?attr(svgEl,"fill",NONE):(fill="transparent"===(fill=isText?style.textFill:style.fill)?NONE:fill,"none"!==svgEl.getAttribute("clip-path")&&fill===NONE&&(fill="rgba(0, 0, 0, 0.002)"),attr(svgEl,"fill",fill),attr(svgEl,"fill-opacity",style.opacity)),!function(style,isText){var stroke=isText?style.textStroke:style.stroke;return null!=stroke&&stroke!==NONE}(style,isText)?attr(svgEl,"stroke",NONE):(attr(svgEl,"stroke",stroke="transparent"===(stroke=isText?style.textStroke:style.stroke)?NONE:stroke),attr(svgEl,"stroke-width",(isText?style.textStrokeWidth:style.lineWidth)/(style.strokeNoScale?style.host.getLineScale():1)),attr(svgEl,"paint-order","stroke"),attr(svgEl,"stroke-opacity",style.opacity),style.lineDash?(attr(svgEl,"stroke-dasharray",style.lineDash.join(",")),attr(svgEl,"stroke-dashoffset",mathRound(style.lineDashOffset||0))):attr(svgEl,"stroke-dasharray",""),style.lineCap&&attr(svgEl,"stroke-linecap",style.lineCap),style.lineJoin&&attr(svgEl,"stroke-linejoin",style.lineJoin),style.miterLimit&&attr(svgEl,"stroke-miterlimit",style.miterLimit))}var svgPath={};svgPath.brush=function(el){var style=el.style,svgEl=el.__svgEl;svgEl||(svgEl=createElement("path"),el.__svgEl=svgEl),el.path||el.createPathProxy();var pathStr,path=el.path;el.__dirtyPath&&(path.beginPath(),el.buildPath(path,el.shape),el.__dirtyPath=!1,(pathStr=function(path){for(var str=[],data=path.data,dataLength=path.len(),i=0;i<dataLength;){var cmdStr="",nData=0;switch(data[i++]){case CMD$3.M:cmdStr="M",nData=2;break;case CMD$3.L:cmdStr="L",nData=2;break;case CMD$3.Q:cmdStr="Q",nData=4;break;case CMD$3.C:cmdStr="C",nData=6;break;case CMD$3.A:var cx=data[i++],cy=data[i++],rx=data[i++],ry=data[i++],theta=data[i++],dTheta=data[i++],psi=data[i++],clockwise=data[i++],dThetaPositive=Math.abs(dTheta),isCircle=isAroundZero$1(dThetaPositive%PI2$4)&&!isAroundZero$1(dThetaPositive),large=!1,large=PI2$4<=dThetaPositive||!isAroundZero$1(dThetaPositive)&&(-PI$3<dTheta&&dTheta<0||PI$3<dTheta)==!!clockwise,x0=round4(cx+rx*mathCos$3(theta)),y0=round4(cy+ry*mathSin$3(theta));isCircle&&(dTheta=clockwise?PI2$4-1e-4:1e-4-PI2$4,large=!0,9===i&&str.push("M",x0,y0));var x=round4(cx+rx*mathCos$3(theta+dTheta)),y=round4(cy+ry*mathSin$3(theta+dTheta));str.push("A",round4(rx),round4(ry),mathRound(psi*degree),+large,+clockwise,x,y);break;case CMD$3.Z:cmdStr="Z";break;case CMD$3.R:var x=round4(data[i++]),y=round4(data[i++]),w=round4(data[i++]),h=round4(data[i++]);str.push("M",x,y,"L",x+w,y,"L",x+w,y+h,"L",x,y+h,"L",x,y)}cmdStr&&str.push(cmdStr);for(var j=0;j<nData;j++)str.push(round4(data[i++]))}return str.join(" ")}(path)).indexOf("NaN")<0&&attr(svgEl,"d",pathStr)),bindStyle(svgEl,style),setTransform(svgEl,el.transform),null!=style.text&&svgTextDrawRectText(el,el.getBoundingRect())};var svgImage={};svgImage.brush=function(el){var x,y,dw,dh,svgEl,style=el.style,image=style.image;image instanceof HTMLImageElement&&(image=image.src),image&&(x=style.x||0,y=style.y||0,dw=style.width,dh=style.height,(svgEl=el.__svgEl)||(svgEl=createElement("image"),el.__svgEl=svgEl),image!==el.__imageSrc&&(function(el,key,val){el.setAttributeNS("http://www.w3.org/1999/xlink",key,val)}(svgEl,"href",image),el.__imageSrc=image),attr(svgEl,"width",dw),attr(svgEl,"height",dh),attr(svgEl,"x",x),attr(svgEl,"y",y),setTransform(svgEl,el.transform),null!=style.text&&svgTextDrawRectText(el,el.getBoundingRect()))};var svgText={},tmpRect$2=new BoundingRect,svgTextDrawRectText=function(el,rect,textRect){var style=el.style;el.__dirty&&normalizeTextStyle(style);var text=style.text;if(null!=text){text+="";var pos,textSvgEl=el.__textSvgEl;textSvgEl||(textSvgEl=createElement("text"),el.__textSvgEl=textSvgEl),bindStyle(textSvgEl,style,!0),el instanceof Text||el.style.transformText?setTransform(textSvgEl,el.transform):el.transform?(tmpRect$2.copy(rect),tmpRect$2.applyTransform(el.transform),rect=tmpRect$2):(pos=el.transformCoordToGlobal(rect.x,rect.y),rect.x=pos[0],rect.y=pos[1]);var textPosition=style.textPosition,distance=style.textDistance,align=style.textAlign||"left";"number"==typeof style.fontSize&&(style.fontSize+="px");var newPos,x,y,font=style.font||[style.fontStyle||"",style.fontWeight||"",style.fontSize||"",style.fontFamily||""].join(" ")||DEFAULT_FONT,verticalAlign=getVerticalAlignForSvg(style.textVerticalAlign),lineHeight=(textRect=getBoundingRect(text,font,align,verticalAlign)).lineHeight;textPosition instanceof Array?(x=rect.x+textPosition[0],y=rect.y+textPosition[1]):(x=(newPos=adjustTextPositionOnRect(textPosition,rect,distance)).x,y=newPos.y,verticalAlign=getVerticalAlignForSvg(newPos.textVerticalAlign),align=newPos.textAlign),attr(textSvgEl,"alignment-baseline",verticalAlign),font&&(textSvgEl.style.font=font);var textPadding=style.textPadding;attr(textSvgEl,"x",x),attr(textSvgEl,"y",y);var textLines=text.split("\n"),nTextLines=textLines.length,textAnchor=align;"left"===textAnchor?(textAnchor="start",textPadding&&(x+=textPadding[3])):"right"===textAnchor?(textAnchor="end",textPadding&&(x-=textPadding[1])):"center"===textAnchor&&(textAnchor="middle",textPadding&&(x+=(textPadding[3]-textPadding[1])/2));var dy=0;if("baseline"===verticalAlign?(dy=-textRect.height+lineHeight,textPadding&&(dy-=textPadding[2])):"middle"===verticalAlign?(dy=(-textRect.height+lineHeight)/2,textPadding&&(y+=(textPadding[0]-textPadding[2])/2)):textPadding&&(dy+=textPadding[0]),el.__text!==text||el.__textFont!==font){var tspanList=el.__tspanList||[];el.__tspanList=tspanList;for(var i=0;i<nTextLines;i++){(tspan=tspanList[i])?tspan.innerHTML="":(tspan=tspanList[i]=createElement("tspan"),textSvgEl.appendChild(tspan),attr(tspan,"alignment-baseline",verticalAlign),attr(tspan,"text-anchor",textAnchor)),attr(tspan,"x",x),attr(tspan,"y",y+i*lineHeight+dy),tspan.appendChild(document.createTextNode(textLines[i]))}for(;i<tspanList.length;i++)textSvgEl.removeChild(tspanList[i]);tspanList.length=nTextLines,el.__text=text,el.__textFont=font}else if(el.__tspanList.length)for(var tspan,len=el.__tspanList.length,i=0;i<len;++i){(tspan=el.__tspanList[i])&&(attr(tspan,"x",x),attr(tspan,"y",y+i*lineHeight+dy))}}};function getVerticalAlignForSvg(verticalAlign){return"middle"===verticalAlign?"middle":"bottom"===verticalAlign?"baseline":"hanging"}function Diff(){}svgText.drawRectText=svgTextDrawRectText,svgText.brush=function(el){var style=el.style;null!=style.text&&(style.textPosition=[0,0],svgTextDrawRectText(el,{x:style.x||0,y:style.y||0,width:0,height:0},el.getBoundingRect()))},Diff.prototype={diff:function(oldArr,newArr,equals){equals=equals||function(a,b){return a===b},this.equals=equals;var self=this;oldArr=oldArr.slice();var newLen=(newArr=newArr.slice()).length,oldLen=oldArr.length,editLength=1,maxEditLength=newLen+oldLen,bestPath=[{newPos:-1,components:[]}],oldPos=this.extractCommon(bestPath[0],newArr,oldArr,0);if(bestPath[0].newPos+1>=newLen&&oldLen<=oldPos+1){for(var indices=[],i=0;i<newArr.length;i++)indices.push(i);return[{indices:indices,count:newArr.length}]}for(;editLength<=maxEditLength;){var ret=function(){for(var path,diagonalPath=-1*editLength;diagonalPath<=editLength;diagonalPath+=2){var basePath,addPath=bestPath[diagonalPath-1],removePath=bestPath[diagonalPath+1],oldPos=(removePath?removePath.newPos:0)-diagonalPath;addPath&&(bestPath[diagonalPath-1]=void 0);var canAdd=addPath&&addPath.newPos+1<newLen,canRemove=removePath&&0<=oldPos&&oldPos<oldLen;if(canAdd||canRemove){if(!canAdd||canRemove&&addPath.newPos<removePath.newPos?(basePath={newPos:(path=removePath).newPos,components:path.components.slice(0)},self.pushComponent(basePath.components,void 0,!0)):((basePath=addPath).newPos++,self.pushComponent(basePath.components,!0,void 0)),oldPos=self.extractCommon(basePath,newArr,oldArr,diagonalPath),basePath.newPos+1>=newLen&&oldLen<=oldPos+1)return function(components){for(var componentPos=0,componentLen=components.length,newPos=0,oldPos=0;componentPos<componentLen;componentPos++){var component=components[componentPos];if(component.removed){for(indices=[],i=oldPos;i<oldPos+component.count;i++)indices.push(i);component.indices=indices,oldPos+=component.count}else{for(var indices=[],i=newPos;i<newPos+component.count;i++)indices.push(i);component.indices=indices,newPos+=component.count,component.added||(oldPos+=component.count)}}return components}(basePath.components);bestPath[diagonalPath]=basePath}else bestPath[diagonalPath]=void 0}editLength++}();if(ret)return ret}},pushComponent:function(components,added,removed){var last=components[components.length-1];last&&last.added===added&&last.removed===removed?components[components.length-1]={count:last.count+1,added:added,removed:removed}:components.push({count:1,added:added,removed:removed})},extractCommon:function(basePath,newArr,oldArr,diagonalPath){for(var newLen=newArr.length,oldLen=oldArr.length,newPos=basePath.newPos,oldPos=newPos-diagonalPath,commonCount=0;newPos+1<newLen&&oldPos+1<oldLen&&this.equals(newArr[newPos+1],oldArr[oldPos+1]);)newPos++,oldPos++,commonCount++;return commonCount&&basePath.components.push({count:commonCount}),basePath.newPos=newPos,oldPos},tokenize:function(value){return value.slice()},join:function(value){return value.slice()}};var arrayDiff=new Diff;function Definable(svgRoot,tagNames,markLabel){this._svgRoot=svgRoot,this._tagNames="string"==typeof tagNames?[tagNames]:tagNames,this._markLabel=markLabel,this.nextId=0}function GradientManager(svgRoot){Definable.call(this,svgRoot,["linearGradient","radialGradient"],"__gradient_in_use__")}function ClippathManager(svgRoot){Definable.call(this,svgRoot,"clipPath","__clippath_in_use__")}function parseInt10$1(val){return parseInt(val,10)}function checkParentAvailable(parent,child){return child&&parent&&child.parentNode!==parent}function insertAfter(parent,child,prevSibling){var nextSibling;checkParentAvailable(parent,child)&&prevSibling&&((nextSibling=prevSibling.nextSibling)?parent.insertBefore(child,nextSibling):parent.appendChild(child))}function prepend(parent,child){var firstChild;checkParentAvailable(parent,child)&&((firstChild=parent.firstChild)?parent.insertBefore(child,firstChild):parent.appendChild(child))}function remove(parent,child){child&&parent&&child.parentNode===parent&&parent.removeChild(child)}Definable.prototype.createElement=createElement,Definable.prototype.getDefs=function(isForceCreating){var svgRoot=this._svgRoot,defs=this._svgRoot.getElementsByTagName("defs");return 0===defs.length?isForceCreating?((defs=svgRoot.insertBefore(this.createElement("defs"),svgRoot.firstChild)).contains||(defs.contains=function(el){var children=defs.children;if(!children)return!1;for(var i=children.length-1;0<=i;--i)if(children[i]===el)return!0;return!1}),defs):null:defs[0]},Definable.prototype.update=function(element,onUpdate){var defs,dom;element&&(defs=this.getDefs(!1),element._dom&&defs.contains(element._dom)?"function"==typeof onUpdate&&onUpdate():(dom=this.add(element))&&(element._dom=dom))},Definable.prototype.addDom=function(dom){this.getDefs(!0).appendChild(dom)},Definable.prototype.removeDom=function(element){this.getDefs(!1).removeChild(element._dom)},Definable.prototype.getDoms=function(){var defs=this.getDefs(!1);if(!defs)return[];var doms=[];return each(this._tagNames,function(tagName){var tags=defs.getElementsByTagName(tagName);doms=doms.concat([].slice.call(tags))}),doms},Definable.prototype.markAllUnused=function(){var doms=this.getDoms(),that=this;each(doms,function(dom){dom[that._markLabel]="0"})},Definable.prototype.markUsed=function(dom){dom&&(dom[this._markLabel]="1")},Definable.prototype.removeUnused=function(){var doms,that,defs=this.getDefs(!1);defs&&(doms=this.getDoms(),that=this,each(doms,function(dom){"1"!==dom[that._markLabel]&&defs.removeChild(dom)}))},Definable.prototype.getSvgProxy=function(displayable){return displayable instanceof Path?svgPath:displayable instanceof ZImage?svgImage:displayable instanceof Text?svgText:svgPath},Definable.prototype.getTextSvgElement=function(displayable){return displayable.__textSvgEl},Definable.prototype.getSvgElement=function(displayable){return displayable.__svgEl},inherits(GradientManager,Definable),GradientManager.prototype.addWithoutUpdate=function(svgElement,displayable){var that;displayable&&displayable.style&&(that=this,each(["fill","stroke"],function(fillOrStroke){var gradient,defs,dom,id;!displayable.style[fillOrStroke]||"linear"!==displayable.style[fillOrStroke].type&&"radial"!==displayable.style[fillOrStroke].type||(gradient=displayable.style[fillOrStroke],defs=that.getDefs(!0),gradient._dom?(dom=gradient._dom,defs.contains(gradient._dom)||that.addDom(dom)):dom=that.add(gradient),that.markUsed(displayable),id=dom.getAttribute("id"),svgElement.setAttribute(fillOrStroke,"url(#"+id+")"))}))},GradientManager.prototype.add=function(gradient){var dom;if("linear"===gradient.type)dom=this.createElement("linearGradient");else{if("radial"!==gradient.type)return zrLog("Illegal gradient type."),null;dom=this.createElement("radialGradient")}return gradient.id=gradient.id||this.nextId++,dom.setAttribute("id","zr-gradient-"+gradient.id),this.updateDom(gradient,dom),this.addDom(dom),dom},GradientManager.prototype.update=function(gradient){var that=this;Definable.prototype.update.call(this,gradient,function(){var type=gradient.type,tagName=gradient._dom.tagName;"linear"===type&&"linearGradient"===tagName||"radial"===type&&"radialGradient"===tagName?that.updateDom(gradient,gradient._dom):(that.removeDom(gradient),that.add(gradient))})},GradientManager.prototype.updateDom=function(gradient,dom){if("linear"===gradient.type)dom.setAttribute("x1",gradient.x),dom.setAttribute("y1",gradient.y),dom.setAttribute("x2",gradient.x2),dom.setAttribute("y2",gradient.y2);else{if("radial"!==gradient.type)return void zrLog("Illegal gradient type.");dom.setAttribute("cx",gradient.x),dom.setAttribute("cy",gradient.y),dom.setAttribute("r",gradient.r)}gradient.global?dom.setAttribute("gradientUnits","userSpaceOnUse"):dom.setAttribute("gradientUnits","objectBoundingBox"),dom.innerHTML="";for(var colors=gradient.colorStops,i=0,len=colors.length;i<len;++i){var stop=this.createElement("stop");stop.setAttribute("offset",100*colors[i].offset+"%"),stop.setAttribute("stop-color",colors[i].color),dom.appendChild(stop)}gradient._dom=dom},GradientManager.prototype.markUsed=function(displayable){var gradient;displayable.style&&((gradient=displayable.style.fill)&&gradient._dom&&Definable.prototype.markUsed.call(this,gradient._dom),(gradient=displayable.style.stroke)&&gradient._dom&&Definable.prototype.markUsed.call(this,gradient._dom))},inherits(ClippathManager,Definable),ClippathManager.prototype.update=function(displayable){var svgEl=this.getSvgElement(displayable);svgEl&&this.updateDom(svgEl,displayable.__clipPaths,!1);var textEl=this.getTextSvgElement(displayable);textEl&&this.updateDom(textEl,displayable.__clipPaths,!0),this.markUsed(displayable)},ClippathManager.prototype.updateDom=function(parentEl,clipPaths,isText){var defs,clipPath,clipPathEl,id,dom,svgProxy,transform,pathEl;clipPaths&&0<clipPaths.length?(defs=this.getDefs(!0),(clipPath=clipPaths[0])[dom=isText?"_textDom":"_dom"]?(id=clipPath[dom].getAttribute("id"),clipPathEl=clipPath[dom],defs.contains(clipPathEl)||defs.appendChild(clipPathEl)):(id="zr-clip-"+this.nextId,++this.nextId,(clipPathEl=this.createElement("clipPath")).setAttribute("id",id),defs.appendChild(clipPathEl),clipPath[dom]=clipPathEl),svgProxy=this.getSvgProxy(clipPath),clipPath.transform&&clipPath.parent.invTransform&&!isText?(transform=Array.prototype.slice.call(clipPath.transform),mul$1(clipPath.transform,clipPath.parent.invTransform,clipPath.transform),svgProxy.brush(clipPath),clipPath.transform=transform):svgProxy.brush(clipPath),pathEl=this.getSvgElement(clipPath),clipPathEl.appendChild(pathEl.cloneNode()),parentEl.setAttribute("clip-path","url(#"+id+")"),1<clipPaths.length&&this.updateDom(clipPathEl,clipPaths.slice(1),isText)):parentEl&&parentEl.setAttribute("clip-path","none")},ClippathManager.prototype.markUsed=function(displayable){var that=this;displayable.__clipPaths&&0<displayable.__clipPaths.length&&each(displayable.__clipPaths,function(clipPath){clipPath._dom&&Definable.prototype.markUsed.call(that,clipPath._dom),clipPath._textDom&&Definable.prototype.markUsed.call(that,clipPath._textDom)})};function SVGPainter(root,storage,opts){this.root=root,this.storage=storage,this._opts=opts=extend({},opts||{});var svgRoot=createElement("svg");svgRoot.setAttribute("xmlns","http://www.w3.org/2000/svg"),svgRoot.setAttribute("version","1.1"),svgRoot.setAttribute("baseProfile","full"),svgRoot.style["user-select"]="none",svgRoot.style.cssText="position:absolute;left:0;top:0;",this.gradientManager=new GradientManager(svgRoot),this.clipPathManager=new ClippathManager(svgRoot);var viewport=document.createElement("div");viewport.style.cssText="overflow:hidden;position:relative",this._svgRoot=svgRoot,this._viewport=viewport,root.appendChild(viewport),viewport.appendChild(svgRoot),this.resize(opts.width,opts.height),this._visibleList=[]}SVGPainter.prototype={constructor:SVGPainter,getType:function(){return"svg"},getViewportRoot:function(){return this._viewport},getViewportRootOffset:function(){var viewportRoot=this.getViewportRoot();if(viewportRoot)return{offsetLeft:viewportRoot.offsetLeft||0,offsetTop:viewportRoot.offsetTop||0}},refresh:function(){var list=this.storage.getDisplayList(!0);this._paintList(list)},_paintList:function(list){this.gradientManager.markAllUnused(),this.clipPathManager.markAllUnused();for(var el,svgRoot=this._svgRoot,visibleList=this._visibleList,listLen=list.length,newVisibleList=[],i=0;i<listLen;i++){var displayable=list[i],svgProxy=(el=displayable)instanceof Path?svgPath:el instanceof ZImage?svgImage:el instanceof Text?svgText:svgPath;displayable.invisible||(displayable.__dirty&&(svgProxy&&svgProxy.brush(displayable),this.clipPathManager.update(displayable),displayable.style&&(this.gradientManager.update(displayable.style.fill),this.gradientManager.update(displayable.style.stroke)),displayable.__dirty=!1),newVisibleList.push(displayable))}var oldArr,newArr,callback,item,diff=(oldArr=visibleList,newArr=newVisibleList,arrayDiff.diff(oldArr,newArr,callback));for(i=0;i<diff.length;i++){if((item=diff[i]).removed)for(var k=0;k<item.count;k++){var svgElement=(displayable=visibleList[item.indices[k]]).__svgEl,textSvgElement=displayable.__textSvgEl;remove(svgRoot,svgElement),remove(svgRoot,textSvgElement)}}for(i=0;i<diff.length;i++){if((item=diff[i]).added)for(k=0;k<item.count;k++){svgElement=(displayable=newVisibleList[item.indices[k]]).__svgEl,textSvgElement=displayable.__textSvgEl;prevSvgElement?insertAfter(svgRoot,svgElement,prevSvgElement):prepend(svgRoot,svgElement),svgElement?insertAfter(svgRoot,textSvgElement,svgElement):prevSvgElement?insertAfter(svgRoot,textSvgElement,prevSvgElement):prepend(svgRoot,textSvgElement),insertAfter(svgRoot,textSvgElement,svgElement),prevSvgElement=textSvgElement||svgElement||prevSvgElement,this.gradientManager.addWithoutUpdate(svgElement,displayable),this.clipPathManager.markUsed(displayable)}else if(!item.removed)for(k=0;k<item.count;k++){var prevSvgElement=svgElement=(displayable=newVisibleList[item.indices[k]]).__textSvgEl||displayable.__svgEl||prevSvgElement;this.gradientManager.markUsed(displayable),this.gradientManager.addWithoutUpdate(svgElement,displayable),this.clipPathManager.markUsed(displayable)}}this.gradientManager.removeUnused(),this.clipPathManager.removeUnused(),this._visibleList=newVisibleList},_getDefs:function(isForceCreating){var svgRoot=this._svgRoot,defs=this._svgRoot.getElementsByTagName("defs");return 0!==defs.length?defs[0]:isForceCreating?((defs=svgRoot.insertBefore(createElement("defs"),svgRoot.firstChild)).contains||(defs.contains=function(el){var children=defs.children;if(!children)return!1;for(var i=children.length-1;0<=i;--i)if(children[i]===el)return!0;return!1}),defs):null},resize:function(width,height){var viewport=this._viewport;viewport.style.display="none";var viewportStyle,svgRoot,opts=this._opts;null!=width&&(opts.width=width),null!=height&&(opts.height=height),width=this._getSize(0),height=this._getSize(1),viewport.style.display="",this._width!==width&&this._height!==height&&(this._width=width,this._height=height,(viewportStyle=viewport.style).width=width+"px",viewportStyle.height=height+"px",(svgRoot=this._svgRoot).setAttribute("width",width),svgRoot.setAttribute("height",height))},getWidth:function(){return this._width},getHeight:function(){return this._height},_getSize:function(whIdx){var opts=this._opts,wh=["width","height"][whIdx],cwh=["clientWidth","clientHeight"][whIdx],plt=["paddingLeft","paddingTop"][whIdx],prb=["paddingRight","paddingBottom"][whIdx];if(null!=opts[wh]&&"auto"!==opts[wh])return parseFloat(opts[wh]);var root=this.root,stl=document.defaultView.getComputedStyle(root);return(root[cwh]||parseInt10$1(stl[wh])||parseInt10$1(root.style[wh]))-(parseInt10$1(stl[plt])||0)-(parseInt10$1(stl[prb])||0)|0},dispose:function(){this.root.innerHTML="",this._svgRoot=this._viewport=this.storage=null},clear:function(){this._viewport&&this.root.removeChild(this._viewport)},pathToSvg:function(){this.refresh();var html=this._svgRoot.outerHTML;return"data:img/svg+xml;utf-8,"+unescape(html)}},each(["getLayer","insertLayer","eachLayer","eachBuiltinLayer","eachOtherLayer","getLayers","modLayer","delLayer","clearLayer","toDataURL","pathToImage"],function(name){var method;SVGPainter.prototype[name]=(method=name,function(){zrLog('In SVG mode painter not support method "'+method+'"')})}),registerPainter("svg",SVGPainter);var doCreateNode,urn="urn:schemas-microsoft-com:vml",win="undefined"==typeof window?null:window,vmlInited=!1,doc=win&&win.document;function createNode(tagName){return doCreateNode(tagName)}if(doc&&!env$1.canvasSupported)try{doc.namespaces.zrvml||doc.namespaces.add("zrvml",urn),doCreateNode=function(tagName){return doc.createElement("<zrvml:"+tagName+' class="zrvml">')}}catch(e){doCreateNode=function(tagName){return doc.createElement("<"+tagName+' xmlns="'+urn+'" class="zrvml">')}}var CMD$4=PathProxy.CMD,round=Math.round,sqrt=Math.sqrt,abs$1=Math.abs,cos$4=Math.cos,sin$4=Math.sin,mathMax$3=Math.max;if(!env$1.canvasSupported){var Z=21600,Z2=Z/2,initRootElStyle=function(el){el.style.cssText="position:absolute;left:0;top:0;width:1px;height:1px;",el.coordsize=Z+","+Z,el.coordorigin="0,0"},rgb2Str=function(r,g,b){return"rgb("+[r,g,b].join(",")+")"},append$1=function(parent,child){child&&parent&&child.parentNode!==parent&&parent.appendChild(child)},remove$1=function(parent,child){child&&parent&&child.parentNode===parent&&parent.removeChild(child)},getZIndex=function(zlevel,z,z2){return 1e5*(parseFloat(zlevel)||0)+1e3*(parseFloat(z)||0)+z2},parsePercent$1=function(value,maxValue){return"string"==typeof value?0<=value.lastIndexOf("%")?parseFloat(value)/100*maxValue:parseFloat(value):value},setColorAndOpacity=function(el,color,opacity){var colorArr=parse(color);opacity=+opacity,isNaN(opacity)&&(opacity=1),colorArr&&(el.color=rgb2Str(colorArr[0],colorArr[1],colorArr[2]),el.opacity=opacity*colorArr[3])},updateFillNode=function(el,style,zrEl){var color,colorArr,fill=style.fill;if(null!=fill)if(fill instanceof Gradient){var gradientType,p1,dx,dy,p0,transform,scale$$1,width,height,dimension,angle=0,focus=[0,0],shift=0,expansion=1,rect=zrEl.getBoundingRect(),rectWidth=rect.width,rectHeight=rect.height;"linear"===fill.type?(gradientType="gradient",transform=zrEl.transform,p0=[fill.x*rectWidth,fill.y*rectHeight],p1=[fill.x2*rectWidth,fill.y2*rectHeight],transform&&(applyTransform(p0,p0,transform),applyTransform(p1,p1,transform)),dx=p1[0]-p0[0],dy=p1[1]-p0[1],(angle=180*Math.atan2(dx,dy)/Math.PI)<0&&(angle+=360),angle<1e-6&&(angle=0)):(gradientType="gradientradial",p0=[fill.x*rectWidth,fill.y*rectHeight],transform=zrEl.transform,scale$$1=zrEl.scale,width=rectWidth,height=rectHeight,focus=[(p0[0]-rect.x)/width,(p0[1]-rect.y)/height],transform&&applyTransform(p0,p0,transform),width/=scale$$1[0]*Z,height/=scale$$1[1]*Z,shift=0/(dimension=mathMax$3(width,height)),expansion=2*fill.r/dimension-shift);var stops=fill.colorStops.slice();stops.sort(function(cs1,cs2){return cs1.offset-cs2.offset});for(var color1,color2,opacity1,opacity2,length$$1=stops.length,colorAndAlphaList=[],colors=[],i=0;i<length$$1;i++){var stop=stops[i],colorAndAlpha=(color=stop.color,colorArr=void 0,colorArr=parse(color),[rgb2Str(colorArr[0],colorArr[1],colorArr[2]),colorArr[3]]);colors.push(stop.offset*expansion+shift+" "+colorAndAlpha[0]),0!==i&&i!==length$$1-1||colorAndAlphaList.push(colorAndAlpha)}2<=length$$1&&(color1=colorAndAlphaList[0][0],color2=colorAndAlphaList[1][0],opacity1=colorAndAlphaList[0][1]*style.opacity,opacity2=colorAndAlphaList[1][1]*style.opacity,el.type=gradientType,el.method="none",el.focus="100%",el.angle=angle,el.color=color1,el.color2=color2,el.colors=colors.join(","),el.opacity=opacity2,el.opacity2=opacity1),"radial"===gradientType&&(el.focusposition=focus.join(","))}else setColorAndOpacity(el,fill,style.opacity)},updateFillAndStroke=function(vmlEl,type,style,zrEl){var isFill="fill"==type,el=vmlEl.getElementsByTagName(type)[0];null!=style[type]&&"none"!==style[type]&&(isFill||!isFill&&style.lineWidth)?(vmlEl[isFill?"filled":"stroked"]="true",style[type]instanceof Gradient&&remove$1(vmlEl,el),el=el||createNode(type),isFill?updateFillNode(el,style,zrEl):function(el,style){null!=style.lineDash&&(el.dashstyle=style.lineDash.join(" ")),null==style.stroke||style.stroke instanceof Gradient||setColorAndOpacity(el,style.stroke,style.opacity)}(el,style),append$1(vmlEl,el)):(vmlEl[isFill?"filled":"stroked"]="false",remove$1(vmlEl,el))},points$1=[[],[],[]];Path.prototype.brushVML=function(vmlRoot){var style=this.style,vmlEl=this._vmlEl;vmlEl||(vmlEl=createNode("shape"),initRootElStyle(vmlEl),this._vmlEl=vmlEl),updateFillAndStroke(vmlEl,"fill",style,this),updateFillAndStroke(vmlEl,"stroke",style,this);var lineWidth,det,m=this.transform,needTransform=null!=m,strokeEl=vmlEl.getElementsByTagName("stroke")[0];strokeEl&&(lineWidth=style.lineWidth,needTransform&&!style.strokeNoScale&&(det=m[0]*m[3]-m[1]*m[2],lineWidth*=sqrt(abs$1(det))),strokeEl.weight=lineWidth+"px");var path=this.path||(this.path=new PathProxy);this.__dirtyPath&&(path.beginPath(),this.buildPath(path,this.shape),path.toStatic(),this.__dirtyPath=!1),vmlEl.path=function(path,m){for(var nPoint,cmdStr,cmd,xi,yi,M=CMD$4.M,C=CMD$4.C,L=CMD$4.L,A=CMD$4.A,Q=CMD$4.Q,str=[],data=path.data,dataLength=path.len(),i=0;i<dataLength;){switch(cmdStr="",nPoint=0,cmd=data[i++]){case M:cmdStr=" m ",nPoint=1,xi=data[i++],yi=data[i++],points$1[0][0]=xi,points$1[0][1]=yi;break;case L:cmdStr=" l ",nPoint=1,xi=data[i++],yi=data[i++],points$1[0][0]=xi,points$1[0][1]=yi;break;case Q:case C:cmdStr=" c ",nPoint=3;var x3,y3,x1=data[i++],y1=data[i++],x2=data[i++],y2=data[i++];cmd===Q?(x2=((x3=x2)+2*x1)/3,y2=((y3=y2)+2*y1)/3,x1=(xi+2*x1)/3,y1=(yi+2*y1)/3):(x3=data[i++],y3=data[i++]),points$1[0][0]=x1,points$1[0][1]=y1,points$1[1][0]=x2,points$1[1][1]=y2,xi=points$1[2][0]=x3,yi=points$1[2][1]=y3;break;case A:var x=0,y=0,sx=1,sy=1,angle=0;m&&(x=m[4],y=m[5],sx=sqrt(m[0]*m[0]+m[1]*m[1]),sy=sqrt(m[2]*m[2]+m[3]*m[3]),angle=Math.atan2(-m[1]/sy,m[0]/sx));var cx=data[i++],cy=data[i++],rx=data[i++],ry=data[i++],startAngle=data[i++]+angle,endAngle=data[i++]+startAngle+angle;i++;var clockwise=data[i++],x0=cx+cos$4(startAngle)*rx,y0=cy+sin$4(startAngle)*ry,x1=cx+cos$4(endAngle)*rx,y1=cy+sin$4(endAngle)*ry,type=clockwise?" wa ":" at ";Math.abs(x0-x1)<1e-4&&(.01<Math.abs(endAngle-startAngle)?clockwise&&(x0+=.0125):Math.abs(y0-cy)<1e-4?clockwise&&x0<cx||!clockwise&&cx<x0?y1-=.0125:y1+=.0125:clockwise&&y0<cy||!clockwise&&cy<y0?x1+=.0125:x1-=.0125),str.push(type,round(((cx-rx)*sx+x)*Z-Z2),",",round(((cy-ry)*sy+y)*Z-Z2),",",round(((cx+rx)*sx+x)*Z-Z2),",",round(((cy+ry)*sy+y)*Z-Z2),",",round((x0*sx+x)*Z-Z2),",",round((y0*sy+y)*Z-Z2),",",round((x1*sx+x)*Z-Z2),",",round((y1*sy+y)*Z-Z2)),xi=x1,yi=y1;break;case CMD$4.R:var p0=points$1[0],p1=points$1[1];p0[0]=data[i++],p0[1]=data[i++],p1[0]=p0[0]+data[i++],p1[1]=p0[1]+data[i++],m&&(applyTransform(p0,p0,m),applyTransform(p1,p1,m)),p0[0]=round(p0[0]*Z-Z2),p1[0]=round(p1[0]*Z-Z2),p0[1]=round(p0[1]*Z-Z2),p1[1]=round(p1[1]*Z-Z2),str.push(" m ",p0[0],",",p0[1]," l ",p1[0],",",p0[1]," l ",p1[0],",",p1[1]," l ",p0[0],",",p1[1]);break;case CMD$4.Z:str.push(" x ")}if(0<nPoint){str.push(cmdStr);for(var k=0;k<nPoint;k++){var p=points$1[k];m&&applyTransform(p,p,m),str.push(round(p[0]*Z-Z2),",",round(p[1]*Z-Z2),k<nPoint-1?",":"")}}}return str.join("")}(path,this.transform),vmlEl.style.zIndex=getZIndex(this.zlevel,this.z,this.z2),append$1(vmlRoot,vmlEl),null!=style.text?this.drawRectText(vmlRoot,this.getBoundingRect()):this.removeRectText(vmlRoot)},Path.prototype.onRemove=function(vmlRoot){remove$1(vmlRoot,this._vmlEl),this.removeRectText(vmlRoot)},Path.prototype.onAdd=function(vmlRoot){append$1(vmlRoot,this._vmlEl),this.appendRectText(vmlRoot)};ZImage.prototype.brushVML=function(vmlRoot){var ow,oh,src,imageRuntimeStyle,oldRuntimeWidth,oldRuntimeHeight,img,x,y,dw,dh,sw,sh,sx,sy,hasCrop,vmlEl,vmlElStyle,hasRotation,m,scaleX,scaleY,p0,p1,p2,p3,maxX,maxY,transformFilter,imageEl,cropEl,imageELStyle,tmpImage,self,cropElStyle,filterStr,alpha,style=this.style,image=style.image;"object"==typeof(img=image)&&img.tagName&&"IMG"===img.tagName.toUpperCase()?((src=image.src)===this._imageSrc?(ow=this._imageWidth,oh=this._imageHeight):(oldRuntimeWidth=(imageRuntimeStyle=image.runtimeStyle).width,oldRuntimeHeight=imageRuntimeStyle.height,imageRuntimeStyle.width="auto",imageRuntimeStyle.height="auto",ow=image.width,oh=image.height,imageRuntimeStyle.width=oldRuntimeWidth,imageRuntimeStyle.height=oldRuntimeHeight,this._imageSrc=src,this._imageWidth=ow,this._imageHeight=oh),image=src):image===this._imageSrc&&(ow=this._imageWidth,oh=this._imageHeight),image&&(x=style.x||0,y=style.y||0,dw=style.width,dh=style.height,sw=style.sWidth,sh=style.sHeight,sx=style.sx||0,sy=style.sy||0,hasCrop=sw&&sh,(vmlEl=this._vmlEl)||(vmlEl=doc.createElement("div"),initRootElStyle(vmlEl),this._vmlEl=vmlEl),vmlElStyle=vmlEl.style,hasRotation=!1,scaleY=scaleX=1,this.transform&&(m=this.transform,scaleX=sqrt(m[0]*m[0]+m[1]*m[1]),scaleY=sqrt(m[2]*m[2]+m[3]*m[3]),hasRotation=m[1]||m[2]),hasRotation?(p1=[x+dw,y],p2=[x,y+dh],p3=[x+dw,y+dh],applyTransform(p0=[x,y],p0,m),applyTransform(p1,p1,m),applyTransform(p2,p2,m),applyTransform(p3,p3,m),maxX=mathMax$3(p0[0],p1[0],p2[0],p3[0]),maxY=mathMax$3(p0[1],p1[1],p2[1],p3[1]),(transformFilter=[]).push("M11=",m[0]/scaleX,",","M12=",m[2]/scaleY,",","M21=",m[1]/scaleX,",","M22=",m[3]/scaleY,",","Dx=",round(x*scaleX+m[4]),",","Dy=",round(y*scaleY+m[5])),vmlElStyle.padding="0 "+round(maxX)+"px "+round(maxY)+"px 0",vmlElStyle.filter="progid:DXImageTransform.Microsoft.Matrix("+transformFilter.join("")+", SizingMethod=clip)"):(m&&(x=x*scaleX+m[4],y=y*scaleY+m[5]),vmlElStyle.filter="",vmlElStyle.left=round(x)+"px",vmlElStyle.top=round(y)+"px"),imageEl=this._imageEl,cropEl=this._cropEl,imageEl||(imageEl=doc.createElement("div"),this._imageEl=imageEl),imageELStyle=imageEl.style,hasCrop?(ow&&oh?(imageELStyle.width=round(scaleX*ow*dw/sw)+"px",imageELStyle.height=round(scaleY*oh*dh/sh)+"px"):(tmpImage=new Image,self=this,tmpImage.onload=function(){tmpImage.onload=null,ow=tmpImage.width,oh=tmpImage.height,imageELStyle.width=round(scaleX*ow*dw/sw)+"px",imageELStyle.height=round(scaleY*oh*dh/sh)+"px",self._imageWidth=ow,self._imageHeight=oh,self._imageSrc=image},tmpImage.src=image),cropEl||((cropEl=doc.createElement("div")).style.overflow="hidden",this._cropEl=cropEl),(cropElStyle=cropEl.style).width=round((dw+sx*dw/sw)*scaleX),cropElStyle.height=round((dh+sy*dh/sh)*scaleY),cropElStyle.filter="progid:DXImageTransform.Microsoft.Matrix(Dx="+-sx*dw/sw*scaleX+",Dy="+-sy*dh/sh*scaleY+")",cropEl.parentNode||vmlEl.appendChild(cropEl),imageEl.parentNode!=cropEl&&cropEl.appendChild(imageEl)):(imageELStyle.width=round(scaleX*dw)+"px",imageELStyle.height=round(scaleY*dh)+"px",vmlEl.appendChild(imageEl),cropEl&&cropEl.parentNode&&(vmlEl.removeChild(cropEl),this._cropEl=null)),filterStr="",(alpha=style.opacity)<1&&(filterStr+=".Alpha(opacity="+round(100*alpha)+") "),filterStr+="progid:DXImageTransform.Microsoft.AlphaImageLoader(src="+image+", SizingMethod=scale)",imageELStyle.filter=filterStr,vmlEl.style.zIndex=getZIndex(this.zlevel,this.z,this.z2),append$1(vmlRoot,vmlEl),null!=style.text&&this.drawRectText(vmlRoot,this.getBoundingRect()))},ZImage.prototype.onRemove=function(vmlRoot){remove$1(vmlRoot,this._vmlEl),this._vmlEl=null,this._cropEl=null,this._imageEl=null,this.removeRectText(vmlRoot)},ZImage.prototype.onAdd=function(vmlRoot){append$1(vmlRoot,this._vmlEl),this.appendRectText(vmlRoot)};var textMeasureEl,fontStyleCache={},fontStyleCacheCount=0,fontEl=document.createElement("div");methods$1.measureText=function(text,textFont){var doc$$1=doc;textMeasureEl||((textMeasureEl=doc$$1.createElement("div")).style.cssText="position:absolute;top:-20000px;left:0;padding:0;margin:0;border:none;white-space:pre;",doc.body.appendChild(textMeasureEl));try{textMeasureEl.style.font=textFont}catch(ex){}return textMeasureEl.innerHTML="",textMeasureEl.appendChild(doc$$1.createTextNode(text)),{width:textMeasureEl.offsetWidth}};for(var tmpRect$3=new BoundingRect,drawRectText=function(vmlRoot,rect,textRect,fromTextEl){var style=this.style;if(this.__dirty&&normalizeTextStyle(style),null!=(text=style.text)&&(text+=""),text){if(style.rich){for(var contentBlock=parseRichText(text,style),text=[],i=0;i<contentBlock.lines.length;i++){for(var tokens=contentBlock.lines[i].tokens,textLine=[],j=0;j<tokens.length;j++)textLine.push(tokens[j].text);text.push(textLine.join(""))}text=text.join("\n")}var align=style.textAlign,verticalAlign=style.textVerticalAlign,fontStyle=function(fontString){var fontStyle=fontStyleCache[fontString];if(!fontStyle){100<fontStyleCacheCount&&(fontStyleCacheCount=0,fontStyleCache={});var fontFamily,style=fontEl.style;try{style.font=fontString,fontFamily=style.fontFamily.split(",")[0]}catch(e){}fontStyle={style:style.fontStyle||"normal",variant:style.fontVariant||"normal",weight:style.fontWeight||"normal",size:0|parseFloat(style.fontSize||12),family:fontFamily||"Microsoft YaHei"},fontStyleCache[fontString]=fontStyle,fontStyleCacheCount++}return fontStyle}(style.font),font=fontStyle.style+" "+fontStyle.variant+" "+fontStyle.weight+" "+fontStyle.size+'px "'+fontStyle.family+'"';textRect=textRect||getBoundingRect(text,font,align,verticalAlign);var textPosition,distance$$1,res,x,y,m=this.transform;m&&!fromTextEl&&(tmpRect$3.copy(rect),tmpRect$3.applyTransform(m),rect=tmpRect$3),fromTextEl?(x=rect.x,y=rect.y):(textPosition=style.textPosition,distance$$1=style.textDistance,textPosition instanceof Array?(x=rect.x+parsePercent$1(textPosition[0],rect.width),y=rect.y+parsePercent$1(textPosition[1],rect.height),align=align||"left"):(x=(res=adjustTextPositionOnRect(textPosition,rect,distance$$1)).x,y=res.y,align=align||res.textAlign,verticalAlign=verticalAlign||res.textVerticalAlign)),x=adjustTextX(x,textRect.width,align),y=adjustTextY(y,textRect.height,verticalAlign),y+=textRect.height/2;var pathEl,textPathEl,skewEl,createNode$$1=createNode,textVmlEl=this._textVmlEl;textVmlEl?textPathEl=(pathEl=(skewEl=textVmlEl.firstChild).nextSibling).nextSibling:(textVmlEl=createNode$$1("line"),pathEl=createNode$$1("path"),textPathEl=createNode$$1("textpath"),skewEl=createNode$$1("skew"),textPathEl.style["v-text-align"]="left",initRootElStyle(textVmlEl),pathEl.textpathok=!0,textPathEl.on=!0,textVmlEl.from="0 0",textVmlEl.to="1000 0.05",append$1(textVmlEl,skewEl),append$1(textVmlEl,pathEl),append$1(textVmlEl,textPathEl),this._textVmlEl=textVmlEl);var coords=[x,y],textVmlElStyle=textVmlEl.style;m&&fromTextEl?(applyTransform(coords,coords,m),skewEl.on=!0,skewEl.matrix=m[0].toFixed(3)+","+m[2].toFixed(3)+","+m[1].toFixed(3)+","+m[3].toFixed(3)+",0,0",skewEl.offset=(round(coords[0])||0)+","+(round(coords[1])||0),skewEl.origin="0 0",textVmlElStyle.left="0px",textVmlElStyle.top="0px"):(skewEl.on=!1,textVmlElStyle.left=round(x)+"px",textVmlElStyle.top=round(y)+"px"),textPathEl.string=String(text).replace(/&/g,"&amp;").replace(/"/g,"&quot;");try{textPathEl.style.font=font}catch(e){}updateFillAndStroke(textVmlEl,"fill",{fill:style.textFill,opacity:style.opacity},this),updateFillAndStroke(textVmlEl,"stroke",{stroke:style.textStroke,opacity:style.opacity,lineDash:style.lineDash},this),textVmlEl.style.zIndex=getZIndex(this.zlevel,this.z,this.z2),append$1(vmlRoot,textVmlEl)}},removeRectText=function(vmlRoot){remove$1(vmlRoot,this._textVmlEl),this._textVmlEl=null},appendRectText=function(vmlRoot){append$1(vmlRoot,this._textVmlEl)},list=[RectText,Displayable,ZImage,Path,Text],i$1=0;i$1<list.length;i$1++){var proto=list[i$1].prototype;proto.drawRectText=drawRectText,proto.removeRectText=removeRectText,proto.appendRectText=appendRectText}Text.prototype.brushVML=function(vmlRoot){var style=this.style;null!=style.text?this.drawRectText(vmlRoot,{x:style.x||0,y:style.y||0,width:0,height:0},this.getBoundingRect(),!0):this.removeRectText(vmlRoot)},Text.prototype.onRemove=function(vmlRoot){this.removeRectText(vmlRoot)},Text.prototype.onAdd=function(vmlRoot){this.appendRectText(vmlRoot)}}function parseInt10$2(val){return parseInt(val,10)}function VMLPainter(root,storage){var styleSheets;!vmlInited&&doc&&(vmlInited=!0,(styleSheets=doc.styleSheets).length<31?doc.createStyleSheet().addRule(".zrvml","behavior:url(#default#VML)"):styleSheets[0].addRule(".zrvml","behavior:url(#default#VML)")),this.root=root,this.storage=storage;var vmlViewport=document.createElement("div"),vmlRoot=document.createElement("div");vmlViewport.style.cssText="display:inline-block;overflow:hidden;position:relative;width:300px;height:150px;",vmlRoot.style.cssText="position:absolute;left:0;top:0;",root.appendChild(vmlViewport),this._vmlRoot=vmlRoot,this._vmlViewport=vmlViewport,this.resize();var oldDelFromStorage=storage.delFromStorage,oldAddToStorage=storage.addToStorage;storage.delFromStorage=function(el){oldDelFromStorage.call(storage,el),el&&el.onRemove&&el.onRemove(vmlRoot)},storage.addToStorage=function(el){el.onAdd&&el.onAdd(vmlRoot),oldAddToStorage.call(storage,el)},this._firstPaint=!0}VMLPainter.prototype={constructor:VMLPainter,getType:function(){return"vml"},getViewportRoot:function(){return this._vmlViewport},getViewportRootOffset:function(){var viewportRoot=this.getViewportRoot();if(viewportRoot)return{offsetLeft:viewportRoot.offsetLeft||0,offsetTop:viewportRoot.offsetTop||0}},refresh:function(){var list=this.storage.getDisplayList(!0,!0);this._paintList(list)},_paintList:function(list){for(var vmlRoot=this._vmlRoot,i=0;i<list.length;i++){var el=list[i];el.invisible||el.ignore?(el.__alreadyNotVisible||el.onRemove(vmlRoot),el.__alreadyNotVisible=!0):(el.__alreadyNotVisible&&el.onAdd(vmlRoot),el.__alreadyNotVisible=!1,el.__dirty&&(el.beforeBrush&&el.beforeBrush(),(el.brushVML||el.brush).call(el,vmlRoot),el.afterBrush&&el.afterBrush())),el.__dirty=!1}this._firstPaint&&(this._vmlViewport.appendChild(vmlRoot),this._firstPaint=!1)},resize:function(width,height){var vmlViewportStyle,width=null==width?this._getWidth():width,height=null==height?this._getHeight():height;this._width==width&&this._height==height||(this._width=width,this._height=height,(vmlViewportStyle=this._vmlViewport.style).width=width+"px",vmlViewportStyle.height=height+"px")},dispose:function(){this.root.innerHTML="",this._vmlRoot=this._vmlViewport=this.storage=null},getWidth:function(){return this._width},getHeight:function(){return this._height},clear:function(){this._vmlViewport&&this.root.removeChild(this._vmlViewport)},_getWidth:function(){var root=this.root,stl=root.currentStyle;return(root.clientWidth||parseInt10$2(stl.width))-parseInt10$2(stl.paddingLeft)-parseInt10$2(stl.paddingRight)|0},_getHeight:function(){var root=this.root,stl=root.currentStyle;return(root.clientHeight||parseInt10$2(stl.height))-parseInt10$2(stl.paddingTop)-parseInt10$2(stl.paddingBottom)|0}},each(["getLayer","insertLayer","eachLayer","eachBuiltinLayer","eachOtherLayer","getLayers","modLayer","delLayer","clearLayer","toDataURL","pathToImage"],function(name){var method;VMLPainter.prototype[name]=(method=name,function(){zrLog('In IE8.0 VML mode painter not support method "'+method+'"')})}),registerPainter("vml",VMLPainter),exports.version="3.7.4",exports.init=function(dom,opts){var zr=new ZRender(guid(),dom,opts);return instances[zr.id]=zr},exports.dispose=function(zr){if(zr)zr.dispose();else{for(var key in instances)instances.hasOwnProperty(key)&&instances[key].dispose();instances={}}return this},exports.getInstance=function(id){return instances[id]},exports.registerPainter=registerPainter,exports.matrix=matrix,exports.vector=vector,exports.color=color,exports.path=path,exports.util=util,exports.Group=Group,exports.Path=Path,exports.Image=ZImage,exports.CompoundPath=CompoundPath,exports.Text=Text,exports.Arc=Arc,exports.BezierCurve=BezierCurve,exports.Circle=Circle,exports.Droplet=Droplet,exports.Ellipse=Ellipse,exports.Heart=Heart,exports.Isogon=Isogon,exports.Line=Line,exports.Polygon=Polygon,exports.Polyline=Polyline,exports.Rect=Rect,exports.Ring=Ring,exports.Rose=Rose,exports.Sector=Sector,exports.Star=Star,exports.Trochoid=Trochoid,exports.LinearGradient=LinearGradient,exports.RadialGradient=RadialGradient,exports.Pattern=Pattern,exports.BoundingRect=BoundingRect});var CgszrenderEx=function(zrender){zrender.Group.prototype.setChildsAttr=function(key,value){!function setEach(elGroup){elGroup.eachChild(function(el){el instanceof zrender.Group?setEach(el):el.attr(key,value)})}(this)},zrender.Group.prototype.setChildsAttrWithAnime=function(options){var opts={attr:{},animeTime:300,delayTime:0};_.assign(opts,options);var animePromise=function(el){return new Promise(function(ok){el.animateTo(opts.attr,opts.animeTime,opts.delayTime,function(){ok()})})},animes=[];return function setEach(elGroup){elGroup.eachChild(function(el){el instanceof zrender.Group?setEach(el):animes.push(animePromise(el))})}(this),Promise.all(animes)}}(Cgszrender);!function(context){var HeatmapConfig,Store,Canvas2dRenderer,Renderer,Util,Heatmap;context.h337=(HeatmapConfig={defaultRadius:40,defaultRenderer:"canvas2d",defaultGradient:{.25:"rgb(0,0,255)",.55:"rgb(0,255,0)",.85:"yellow",1:"rgb(255,0,0)"},defaultMaxOpacity:1,defaultMinOpacity:0,defaultBlur:.85,defaultXField:"x",defaultYField:"y",defaultValueField:"value",plugins:{}},Store=function(){var Store=function(config){this._coordinator={},this._data=[],this._radi=[],this._min=10,this._max=1,this._xField=config.xField||config.defaultXField,this._yField=config.yField||config.defaultYField,this._valueField=config.valueField||config.defaultValueField,config.radius&&(this._cfgRadius=config.radius)},defaultRadius=HeatmapConfig.defaultRadius;return Store.prototype={_organiseData:function(dataPoint,forceRender){var x=dataPoint[this._xField],y=dataPoint[this._yField],radi=this._radi,store=this._data,max=this._max,min=this._min,value=dataPoint[this._valueField]||1,radius=dataPoint.radius||this._cfgRadius||defaultRadius;store[x]||(store[x]=[],radi[x]=[]),store[x][y]?store[x][y]+=value:(store[x][y]=value,radi[x][y]=radius);var storedVal=store[x][y];return max<storedVal?(forceRender?this.setDataMax(storedVal):this._max=storedVal,!1):storedVal<min?(forceRender?this.setDataMin(storedVal):this._min=storedVal,!1):{x:x,y:y,value:value,radius:radius,min:min,max:max}},_unOrganizeData:function(){var x,unorganizedData=[],data=this._data,radi=this._radi;for(x in data)for(var y in data[x])unorganizedData.push({x:x,y:y,radius:radi[x][y],value:data[x][y]});return{min:this._min,max:this._max,data:unorganizedData}},_onExtremaChange:function(){this._coordinator.emit("extremachange",{min:this._min,max:this._max})},addData:function(){if(0<arguments[0].length)for(var dataArr=arguments[0],dataLen=dataArr.length;dataLen--;)this.addData.call(this,dataArr[dataLen]);else{var organisedEntry=this._organiseData(arguments[0],!0);organisedEntry&&(0===this._data.length&&(this._min=this._max=organisedEntry.value),this._coordinator.emit("renderpartial",{min:this._min,max:this._max,data:[organisedEntry]}))}return this},setData:function(data){var dataPoints=data.data,pointsLen=dataPoints.length;this._data=[],this._radi=[];for(var i=0;i<pointsLen;i++)this._organiseData(dataPoints[i],!1);return this._max=data.max,this._min=data.min||0,this._onExtremaChange(),this._coordinator.emit("renderall",this._getInternalData()),this},removeData:function(){},setDataMax:function(max){return this._max=max,this._onExtremaChange(),this._coordinator.emit("renderall",this._getInternalData()),this},setDataMin:function(min){return this._min=min,this._onExtremaChange(),this._coordinator.emit("renderall",this._getInternalData()),this},setCoordinator:function(coordinator){this._coordinator=coordinator},_getInternalData:function(){return{max:this._max,min:this._min,data:this._data,radi:this._radi}},getData:function(){return this._unOrganizeData()}},Store}(),Canvas2dRenderer=function(){function _getColorPalette(config){var gradientConfig=config.gradient||config.defaultGradient,paletteCanvas=document.createElement("canvas"),paletteCtx=paletteCanvas.getContext("2d");paletteCanvas.width=256,paletteCanvas.height=1;var key,gradient=paletteCtx.createLinearGradient(0,0,256,1);for(key in gradientConfig)gradient.addColorStop(key,gradientConfig[key]);return paletteCtx.fillStyle=gradient,paletteCtx.fillRect(0,0,256,1),paletteCtx.getImageData(0,0,256,1).data}function Canvas2dRenderer(config){var container=config.container,shadowCanvas=this.shadowCanvas=document.createElement("canvas"),canvas=this.canvas=config.canvas||document.createElement("canvas"),computed=(this._renderBoundaries=[1e4,1e4,0,0],getComputedStyle(config.container)||{});canvas.className="heatmap-canvas",this._width=canvas.width=shadowCanvas.width=config.width||+computed.width.replace(/px/,""),this._height=canvas.height=shadowCanvas.height=config.height||+computed.height.replace(/px/,""),this.shadowCtx=shadowCanvas.getContext("2d"),this.ctx=canvas.getContext("2d"),canvas.style.cssText=shadowCanvas.style.cssText="position:absolute;left:0;top:0;",container.style.position="relative",container.appendChild(canvas),config.onCanvasAdded&&config.onCanvasAdded(canvas),this._palette=_getColorPalette(config),this._templates={},this._setStyles(config)}return Canvas2dRenderer.prototype={renderPartial:function(data){0<data.data.length&&(this._drawAlpha(data),this._colorize())},renderAll:function(data){this._clear(),0<data.data.length&&(this._drawAlpha(function(data){for(var renderData=[],min=data.min,max=data.max,radi=data.radi,data=data.data,xValues=Object.keys(data),xValuesLen=xValues.length;xValuesLen--;)for(var xValue=xValues[xValuesLen],yValues=Object.keys(data[xValue]),yValuesLen=yValues.length;yValuesLen--;){var yValue=yValues[yValuesLen],value=data[xValue][yValue],radius=radi[xValue][yValue];renderData.push({x:xValue,y:yValue,value:value,radius:radius})}return{min:min,max:max,data:renderData}}(data)),this._colorize())},_updateGradient:function(config){this._palette=_getColorPalette(config)},updateConfig:function(config){config.gradient&&this._updateGradient(config),this._setStyles(config)},setDimensions:function(width,height){this._width=width,this._height=height,this.canvas.width=this.shadowCanvas.width=width,this.canvas.height=this.shadowCanvas.height=height},_clear:function(){this.shadowCtx.clearRect(0,0,this._width,this._height),this.ctx.clearRect(0,0,this._width,this._height)},_setStyles:function(config){this._blur=0==config.blur?0:config.blur||config.defaultBlur,config.backgroundColor&&(this.canvas.style.backgroundColor=config.backgroundColor),this._width=this.canvas.width=this.shadowCanvas.width=config.width||this._width,this._height=this.canvas.height=this.shadowCanvas.height=config.height||this._height,this._opacity=255*(config.opacity||0),this._maxOpacity=255*(config.maxOpacity||config.defaultMaxOpacity),this._minOpacity=255*(config.minOpacity||config.defaultMinOpacity),this._useGradientOpacity=!!config.useGradientOpacity},_drawAlpha:function(data){for(var min=this._min=data.min,max=this._max=data.max,dataLen=(data=data.data||[]).length,blur=1-this._blur;dataLen--;){var tpl,point=data[dataLen],x=point.x,y=point.y,radius=point.radius,value=Math.min(point.value,max),rectX=x-radius,rectY=y-radius,shadowCtx=this.shadowCtx;this._templates[radius]?tpl=this._templates[radius]:this._templates[radius]=tpl=function(radius,blurFactor){var gradient,tplCanvas=document.createElement("canvas"),tplCtx=tplCanvas.getContext("2d"),x=radius,y=radius;return tplCanvas.width=tplCanvas.height=2*radius,1==blurFactor?(tplCtx.beginPath(),tplCtx.arc(x,y,radius,0,2*Math.PI,!1),tplCtx.fillStyle="rgba(0,0,0,1)",tplCtx.fill()):((gradient=tplCtx.createRadialGradient(x,y,radius*blurFactor,x,y,radius)).addColorStop(0,"rgba(0,0,0,1)"),gradient.addColorStop(1,"rgba(0,0,0,0)"),tplCtx.fillStyle=gradient,tplCtx.fillRect(0,0,2*radius,2*radius)),tplCanvas}(radius,blur);var templateAlpha=(value-min)/(max-min);shadowCtx.globalAlpha=templateAlpha<.01?.01:templateAlpha,shadowCtx.drawImage(tpl,rectX,rectY),rectX<this._renderBoundaries[0]&&(this._renderBoundaries[0]=rectX),rectY<this._renderBoundaries[1]&&(this._renderBoundaries[1]=rectY),rectX+2*radius>this._renderBoundaries[2]&&(this._renderBoundaries[2]=rectX+2*radius),rectY+2*radius>this._renderBoundaries[3]&&(this._renderBoundaries[3]=rectY+2*radius)}},_colorize:function(){var x=this._renderBoundaries[0],y=this._renderBoundaries[1],width=this._renderBoundaries[2]-x,height=this._renderBoundaries[3]-y,maxWidth=this._width,maxHeight=this._height,opacity=this._opacity,maxOpacity=this._maxOpacity,minOpacity=this._minOpacity,useGradientOpacity=this._useGradientOpacity;x<0&&(x=0),y<0&&(y=0),maxWidth<x+width&&(width=maxWidth-x),maxHeight<y+height&&(height=maxHeight-y);for(var img=this.shadowCtx.getImageData(x,y,width,height),imgData=img.data,len=imgData.length,palette=this._palette,i=3;i<len;i+=4){var finalAlpha,alpha=imgData[i],offset=4*alpha;offset&&(finalAlpha=0<opacity?opacity:alpha<maxOpacity?alpha<minOpacity?minOpacity:alpha:maxOpacity,imgData[i-3]=palette[offset],imgData[i-2]=palette[1+offset],imgData[i-1]=palette[2+offset],imgData[i]=useGradientOpacity?palette[3+offset]:finalAlpha)}img.data=imgData,this.ctx.putImageData(img,x,y),this._renderBoundaries=[1e3,1e3,0,0]},getValueAt:function(point){var data=this.shadowCtx.getImageData(point.x,point.y,1,1).data[3],max=this._max,min=this._min;return Math.abs(max-min)*(data/255)>>0},getDataURL:function(){return this.canvas.toDataURL()}},Canvas2dRenderer}(),Renderer=function(){var rendererFn=!1;return"canvas2d"===HeatmapConfig.defaultRenderer&&(rendererFn=Canvas2dRenderer),rendererFn}(),Util={merge:function(){for(var merged={},argsLen=arguments.length,i=0;i<argsLen;i++){var key,obj=arguments[i];for(key in obj)merged[key]=obj[key]}return merged}},Heatmap=function(){var Coordinator=function(){function Coordinator(){this.cStore={}}return Coordinator.prototype={on:function(evtName,callback,scope){var cStore=this.cStore;cStore[evtName]||(cStore[evtName]=[]),cStore[evtName].push(function(data){return callback.call(scope,data)})},emit:function(evtName,data){var cStore=this.cStore;if(cStore[evtName])for(var len=cStore[evtName].length,i=0;i<len;i++){(0,cStore[evtName][i])(data)}}},Coordinator}();function Heatmap(){var scope,renderer,coordinator,store,config=this._config=Util.merge(HeatmapConfig,arguments[0]||{});if(this._coordinator=new Coordinator,config.plugin){var pluginToLoad=config.plugin;if(!HeatmapConfig.plugins[pluginToLoad])throw new Error("Plugin '"+pluginToLoad+"' not found. Maybe it was not registered.");var plugin=HeatmapConfig.plugins[pluginToLoad];this._renderer=new plugin.renderer(config),this._store=new plugin.store(config)}else this._renderer=new Renderer(config),this._store=new Store(config);renderer=(scope=this)._renderer,coordinator=scope._coordinator,store=scope._store,coordinator.on("renderpartial",renderer.renderPartial,renderer),coordinator.on("renderall",renderer.renderAll,renderer),coordinator.on("extremachange",function(data){scope._config.onExtremaChange&&scope._config.onExtremaChange({min:data.min,max:data.max,gradient:scope._config.gradient||scope._config.defaultGradient})}),store.setCoordinator(coordinator)}return Heatmap.prototype={addData:function(){return this._store.addData.apply(this._store,arguments),this},removeData:function(){return this._store.removeData&&this._store.removeData.apply(this._store,arguments),this},setData:function(){return this._store.setData.apply(this._store,arguments),this},setDataMax:function(){return this._store.setDataMax.apply(this._store,arguments),this},setDataMin:function(){return this._store.setDataMin.apply(this._store,arguments),this},configure:function(config){return this._config=Util.merge(this._config,config),this._renderer.updateConfig(this._config),this._coordinator.emit("renderall",this._store._getInternalData()),this},repaint:function(){return this._coordinator.emit("renderall",this._store._getInternalData()),this},getData:function(){return this._store.getData()},getDataURL:function(){return this._renderer.getDataURL()},getValueAt:function(point){return this._store.getValueAt?this._store.getValueAt(point):this._renderer.getValueAt?this._renderer.getValueAt(point):null}},Heatmap}(),{create:function(config){return new Heatmap(config)},register:function(pluginKey,plugin){HeatmapConfig.plugins[pluginKey]=plugin}})}(this);var Windy=function(params){this.fillColor=params.fillColor,this.particleCount=params.lineCount,this.maxParticleAge=params.speed;var builder,grid,date,λ0,φ0,Δλ,Δφ,ni,nj,particles,animationLoop,that=this,VELOCITY_SCALE=.005*(Math.pow(window.devicePixelRatio,1/3)||1),MAX_PARTICLE_AGE=90,PARTICLE_REDUCTION=Math.pow(window.devicePixelRatio,1/3)||1.6,NULL_WIND_VECTOR=[NaN,NaN,null],bilinearInterpolateVector=function(x,y,g00,g10,g01,g11){var rx=1-x,ry=1-y,a=rx*ry,b=x*ry,c=rx*y,d=x*y;return[g00[0]*a+g10[0]*b+g01[0]*c+g11[0]*d,g00[1]*a+g10[1]*b+g01[1]*c+g11[1]*d,g00[2]*a+g10[2]*b+g01[2]*c+g11[2]*d]},createBuilder=function(data){var uComp=null,vComp=null,temp=null;return data.forEach(function(record){switch(record.header.parameterCategory+","+record.header.parameterNumber){case"2,2":uComp=record;break;case"2,3":vComp=record;break;case"0,0":temp=record;break;default:0}}),function(uComp,vComp,temp){var uData=uComp.data,vData=vComp.data;return{header:uComp.header,data:function(i){return temp?[uData[i],vData[i],temp.data[i]]:[uData[i],vData[i],0]},interpolate:bilinearInterpolateVector}}(uComp,vComp,temp)},interpolate=function(λ,φ){if(!grid)return null;var row,i=floorMod(λ-λ0,360)/Δλ,j=(φ0-φ)/Δφ,fi=Math.floor(i),ci=fi+1,fj=Math.floor(j),cj=fj+1;if(row=grid[fj]){var g00=row[fi],g10=row[ci];if(isValue(g00)&&isValue(g10)&&(row=grid[cj])){var g01=row[fi],g11=row[ci];if(isValue(g01)&&isValue(g11))return builder.interpolate(i-fi,j-fj,g00,g10,g01,g11)}}return null},isValue=function(x){return null!=x},floorMod=function(a,n){return a-n*Math.floor(a/n)},distortion=function(projection,λ,φ,x,y,windy){var τ=2*Math.PI,H=Math.pow(10,-5.2),hλ=λ<0?H:-H,hφ=φ<0?H:-H,pλ=project(φ,λ+hλ,windy),pφ=project(φ+hφ,λ,windy),k=Math.cos(φ/360*τ);return[(pλ[0]-x)/hλ/k,(pλ[1]-y)/hλ/k,(pφ[0]-x)/hφ,(pφ[1]-y)/hφ]},createField=function(columns,bounds,callback){function field(x,y){if(!columns)return[NaN,NaN,null];var column=columns[Math.round(x)];return column&&column[Math.round(y)]||NULL_WIND_VECTOR}field.release=function(){columns=[]},field.randomize=function(o){for(var x,y,safetyNet=0;null===field(x=Math.round(Math.floor(Math.random()*bounds.width)+bounds.x),y=Math.round(Math.floor(Math.random()*bounds.height)+bounds.y))[2]&&safetyNet++<30;);return o.x=x,o.y=y,o},callback(bounds,field)},deg2rad=function(deg){return deg/180*Math.PI},rad2deg=function(ang){return ang/(Math.PI/180)},mercY=function(lat){return Math.log(Math.tan(lat/2+Math.PI/4))},project=function(lat,lon,windy){var ymin=mercY(windy.south),ymax=mercY(windy.north),xFactor=windy.width/(windy.east-windy.west),yFactor=windy.height/(ymax-ymin),y=mercY(deg2rad(lat));return[(deg2rad(lon)-windy.west)*xFactor,y=(ymax-y)*yFactor]},interpolateField=function(grid,bounds,extent,callback){var projection={},mapArea=(extent.south-extent.north)*(extent.west-extent.east),velocityScale=VELOCITY_SCALE*Math.pow(mapArea,.3),columns=[],x=bounds.x;function interpolateColumn(x){for(var column=[],y=bounds.y;y<=bounds.yMax;y+=2){var λ,φ,wind,coord=function(x,y,windy){var mapLonDelta=windy.east-windy.west,worldMapRadius=windy.width/rad2deg(mapLonDelta)*360/(2*Math.PI),mapOffsetY=worldMapRadius/2*Math.log((1+Math.sin(windy.south))/(1-Math.sin(windy.south))),a=(windy.height+mapOffsetY-y)/worldMapRadius,lat=180/Math.PI*(2*Math.atan(Math.exp(a))-Math.PI/2);return[rad2deg(windy.west)+x/windy.width*rad2deg(mapLonDelta),lat]}(x,y,extent);coord&&(λ=coord[0],φ=coord[1],!isFinite(λ)||(wind=grid.interpolate(λ,φ))&&(wind=function(projection,λ,φ,x,y,scale,wind,windy){var u=wind[0]*scale,v=wind[1]*scale,d=distortion(projection,λ,φ,x,y,windy);return wind[0]=d[0]*u+d[2]*v,wind[1]=d[1]*u+d[3]*v,wind}(projection,λ,φ,x,y,velocityScale,wind,extent),column[y+1]=column[y]=wind))}columns[x+1]=columns[x]=column}for(;x<bounds.width;x+=2)interpolateColumn(x);createField(columns,bounds,callback)},animate=function(bounds,field,extent){var minTemp,maxTemp,result,particleCount,colorStyles=(minTemp=261.15,maxTemp=317.15,(result=["rgb(36,104, 180)","rgb(60,157, 194)","rgb(128,205,193 )","rgb(151,218,168 )","rgb(198,231,181)","rgb(238,247,217)","rgb(255,238,159)","rgb(252,217,125)","rgb(255,182,100)","rgb(252,150,75)","rgb(250,112,52)","rgb(245,64,32)","rgb(237,45,28)","rgb(220,24,32)","rgb(180,0,35)"]).indexFor=function(m){return Math.max(0,Math.min(result.length-1,Math.round((m-minTemp)/(maxTemp-minTemp)*(result.length-1))))},result),buckets=colorStyles.map(function(){return[]}),mapArea=(extent.south-extent.north)*(extent.west-extent.east);particleCount=that.particleCount?that.particleCount:Math.round(bounds.width*bounds.height*.005*Math.pow(mapArea,.24)),/android|blackberry|iemobile|ipad|iphone|ipod|opera mini|webos/i.test(navigator.userAgent)&&(particleCount/=PARTICLE_REDUCTION),(particles=particles||[]).length>particleCount&&(particles=particles.slice(0,particleCount));for(var i=particles.length;i<particleCount;i++)particles.push(field.randomize({age:~~(Math.random()*MAX_PARTICLE_AGE)}));var g=params.canvas.getContext("2d");g.lineWidth=1;var then=Date.now();!function frame(){animationLoop=requestAnimationFrame(frame);var now=Date.now(),delta=now-then;1e3/15<delta&&(then=now-delta%(1e3/15),buckets.forEach(function(bucket){bucket.length=0}),particles.forEach(function(particle){particle.age>MAX_PARTICLE_AGE&&(field.randomize(particle).age=~~(Math.random()*MAX_PARTICLE_AGE/2));var xt,yt,x=particle.x,y=particle.y,v=field(x,y),m=v[2];null===m?particle.age=MAX_PARTICLE_AGE:(xt=x+v[0],yt=y+v[1],null!==field(xt,yt)[0]?(particle.xt=xt,particle.yt=yt,buckets[colorStyles.indexFor(m)].push(particle)):(particle.x=xt,particle.y=yt)),particle.age+=1}),g.save(),g.globalAlpha=.16,g.globalCompositeOperation="destination-out",g.fillStyle="#000",g.fillRect(bounds.x,bounds.y,bounds.width,bounds.height),g.restore(),buckets.forEach(function(bucket,i){0<bucket.length&&(g.beginPath(),that.fillColor?g.strokeStyle=that.fillColor:g.strokeStyle=colorStyles[i],bucket.forEach(function(particle){g.moveTo(particle.x,particle.y),g.lineTo(particle.xt,particle.yt),particle.x=particle.xt,particle.y=particle.yt}),g.stroke())}))}()},start=function(bounds,width,height,extent){var mapBounds={south:deg2rad(extent[0][1]),north:deg2rad(extent[1][1]),east:deg2rad(extent[1][0]),west:deg2rad(extent[0][0]),width:width,height:height};stop(),that.maxParticleAge&&(MAX_PARTICLE_AGE=that.maxParticleAge),function(data,callback){var header=(builder=createBuilder(data)).header;λ0=header.lo1,φ0=header.la1,Δλ=header.dx,Δφ=header.dy,ni=header.nx,nj=header.ny,(date=new Date(header.refTime)).setHours(date.getHours()+header.forecastTime),grid=[];for(var p=0,isContinuous=360<=Math.floor(ni*Δλ),j=0;j<nj;j++){for(var row=[],i=0;i<ni;i++,p++)row[i]=builder.data(p);isContinuous&&row.push(row[0]),grid[j]=row}callback({date:date,interpolate:interpolate})}(params.data,function(grid){interpolateField(grid,function(bounds,width,height){var upperLeft=bounds[0],lowerRight=bounds[1],x=Math.round(upperLeft[0]),y=Math.max(Math.floor(upperLeft[1],0),0);Math.min(Math.ceil(lowerRight[0],width),width-1);return{x:x,y:y,xMax:width,yMax:Math.min(Math.ceil(lowerRight[1],height),height-1),width:width,height:height}}(bounds,width,height),mapBounds,function(bounds,field){windy.field=field,animate(bounds,field,mapBounds)})})},stop=function(){windy.field&&windy.field.release(),animationLoop&&cancelAnimationFrame(animationLoop)},windy={params:params,start:start,stop:stop,update:function(data,bounds,width,height,extent){delete params.data,params.data=data,extent&&start(bounds,width,height,extent)},shift:function(dx,dy){var canvas=params.canvas,w=canvas.width,h=canvas.height,ctx=canvas.getContext("2d");if(dx<w&&dy<h){var clamp=function(high,value){return Math.max(0,Math.min(high,value))},imageData=ctx.getImageData(clamp(w,-dx),clamp(h,-dy),clamp(w,w-dx),clamp(h,h-dy));ctx.clearRect(0,0,w,h),ctx.putImageData(imageData,clamp(w,dx),clamp(h,dy));for(var i=0,pLength=particles.length;i<pLength;i++)particles[i].x+=dx,particles[i].y+=dy}},createField:createField,interpolatePoint:interpolate,setFillColor:function(fillColor){that.fillColor=fillColor},setParticleCount:function(lineCount){that.particleCount=lineCount},setMaxParticleAge:function(speed){that.maxParticleAge=speed}};return windy};!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.turf={})}(this,function(t){"use strict";function e(t,e,n){if(!I(n=n||{}))throw new Error("options is invalid");var r=n.bbox,i=n.id;if(void 0===t)throw new Error("geometry is required");if(e&&e.constructor!==Object)throw new Error("properties must be an Object");r&&N(r),i&&C(i);var o={type:"Feature"};return i&&(o.id=i),r&&(o.bbox=r),o.properties=e||{},o.geometry=t,o}function n(t,e,n){if(!I(n=n||{}))throw new Error("options is invalid");var s,i=n.bbox;if(!t)throw new Error("type is required");if(!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");switch(i&&N(i),t){case"Point":s=r(e).geometry;break;case"LineString":s=a(e).geometry;break;case"Polygon":s=o(e).geometry;break;case"MultiPoint":s=l(e).geometry;break;case"MultiLineString":s=h(e).geometry;break;case"MultiPolygon":s=p(e).geometry;break;default:throw new Error(t+" is invalid")}return i&&(s.bbox=i),s}function r(t,n,r){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!b(t[0])||!b(t[1]))throw new Error("coordinates must contain numbers");return e({type:"Point",coordinates:t},n,r)}function i(t,e,n){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");return c(t.map(function(t){return r(t,e)}),n)}function o(t,n,r){if(!t)throw new Error("coordinates is required");for(var i=0;i<t.length;i++){var o=t[i];if(o.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var s=0;s<o[o.length-1].length;s++){if(0===i&&0===s&&!b(o[0][0])||!b(o[0][1]))throw new Error("coordinates must contain numbers");if(o[o.length-1][s]!==o[0][s])throw new Error("First and last Position are not equivalent.")}}return e({type:"Polygon",coordinates:t},n,r)}function s(t,e,n){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");return c(t.map(function(t){return o(t,e)}),n)}function a(t,n,r){if(!t)throw new Error("coordinates is required");if(t.length<2)throw new Error("coordinates must be an array of two or more positions");if(!b(t[0][1])||!b(t[0][1]))throw new Error("coordinates must contain numbers");return e({type:"LineString",coordinates:t},n,r)}function u(t,e,n){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");return c(t.map(function(t){return a(t,e)}),n)}function c(t,e){if(!I(e=e||{}))throw new Error("options is invalid");var n=e.bbox,r=e.id;if(!t)throw new Error("No features passed");if(!Array.isArray(t))throw new Error("features must be an Array");n&&N(n),r&&C(r);var i={type:"FeatureCollection"};return r&&(i.id=r),n&&(i.bbox=n),i.features=t,i}function h(t,n,r){if(!t)throw new Error("coordinates is required");return e({type:"MultiLineString",coordinates:t},n,r)}function l(t,n,r){if(!t)throw new Error("coordinates is required");return e({type:"MultiPoint",coordinates:t},n,r)}function p(t,n,r){if(!t)throw new Error("coordinates is required");return e({type:"MultiPolygon",coordinates:t},n,r)}function f(t,n,r){if(!t)throw new Error("geometries is required");if(!Array.isArray(t))throw new Error("geometries must be an Array");return e({type:"GeometryCollection",geometries:t},n,r)}function g(t,e){if(null==t||isNaN(t))throw new Error("num is required");if(e&&!(0<=e))throw new Error("precision must be a positive number");var n=Math.pow(10,e||0);return Math.round(t*n)/n}function d(t,e){if(null==t)throw new Error("radians is required");if(e&&"string"!=typeof e)throw new Error("units must be a string");var n=qo[e||"kilometers"];if(!n)throw new Error(e+" units is invalid");return t*n}function y(t,e){if(null==t)throw new Error("distance is required");if(e&&"string"!=typeof e)throw new Error("units must be a string");var n=qo[e||"kilometers"];if(!n)throw new Error(e+" units is invalid");return t/n}function _(t,e){return v(y(t,e))}function m(t){if(null==t)throw new Error("bearing is required");var e=t%360;return e<0&&(e+=360),e}function v(t){if(null==t)throw new Error("radians is required");return t%(2*Math.PI)*180/Math.PI}function x(t){if(null==t)throw new Error("degrees is required");return t%360*Math.PI/180}function E(t,e,n){if(null==t)throw new Error("length is required");if(!(0<=t))throw new Error("length must be a positive number");return d(y(t,e),n||"kilometers")}function w(t,e,n){if(null==t)throw new Error("area is required");if(!(0<=t))throw new Error("area must be a positive number");var r=Bo[e||"meters"];if(!r)throw new Error("invalid original units");var i=Bo[n||"kilometers"];if(!i)throw new Error("invalid final units");return t/r*i}function b(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function I(t){return!!t&&t.constructor===Object}function N(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach(function(t){if(!b(t))throw new Error("bbox must only contain numbers")})}function C(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")}function S(t,e,n){if(null!==t)for(var r,i,o,s,a,u,c,h,p=0,f=t.type,g="FeatureCollection"===f,d="Feature"===f,y=g?t.features.length:1,_=0;_<y;_++){a=(h=!!(c=g?t.features[_].geometry:d?t.geometry:t)&&"GeometryCollection"===c.type)?c.geometries.length:1;for(var m=0;m<a;m++){var v=0,x=0;if(null!==(s=h?c.geometries[m]:c)){u=s.coordinates;var E=s.type,l=!n||"Polygon"!==E&&"MultiPolygon"!==E?0:1;switch(E){case null:break;case"Point":e(u,p,_,v,x),p++,v++;break;case"LineString":case"MultiPoint":for(r=0;r<u.length;r++)e(u[r],p,_,v,x),p++,"MultiPoint"===E&&v++;"LineString"===E&&v++;break;case"Polygon":case"MultiLineString":for(r=0;r<u.length;r++){for(i=0;i<u[r].length-l;i++)e(u[r][i],p,_,v,x),p++;"MultiLineString"===E&&v++,"Polygon"===E&&x++}"Polygon"===E&&v++;break;case"MultiPolygon":for(r=0;r<u.length;r++){for("MultiPolygon"===E&&(x=0),i=0;i<u[r].length;i++){for(o=0;o<u[r][i].length-l;o++)e(u[r][i][o],p,_,v,x),p++;x++}v++}break;case"GeometryCollection":for(r=0;r<s.geometries.length;r++)S(s.geometries[r],e,n);break;default:throw new Error("Unknown Geometry Type")}}}}}function M(t,e,n,r){var i=n;return S(t,function(t,r,o,s,a){i=0===r&&void 0===n?t:e(i,t,r,o,s,a)},r),i}function L(t,e){var n;switch(t.type){case"FeatureCollection":for(n=0;n<t.features.length;n++)e(t.features[n].properties,n);break;case"Feature":e(t.properties,0)}}function P(t,e,n){var r=n;return L(t,function(t,i){r=0===i&&void 0===n?t:e(r,t,i)}),r}function O(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var n=0;n<t.features.length;n++)e(t.features[n],n)}function R(t,e,n){var r=n;return O(t,function(t,i){r=0===i&&void 0===n?t:e(r,t,i)}),r}function T(t){var e=[];return S(t,function(t){e.push(t)}),e}function A(t,e){for(var r,i,o,s,a,u,c,h,l,p=0,f="FeatureCollection"===t.type,g="Feature"===t.type,d=f?t.features.length:1,n=0;n<d;n++){for(a=f?t.features[n].geometry:g?t.geometry:t,c=f?t.features[n].properties:g?t.properties:{},h=f?t.features[n].bbox:g?t.bbox:void 0,l=f?t.features[n].id:g?t.id:void 0,s=(u=!!a&&"GeometryCollection"===a.type)?a.geometries.length:1,i=0;i<s;i++)if(null!==(o=u?a.geometries[i]:a))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":e(o,p,c,h,l);break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)e(o.geometries[r],p,c,h,l);break;default:throw new Error("Unknown Geometry Type")}else e(null,p,c,h,l);p++}}function D(t,e,n){var r=n;return A(t,function(t,i,o,s,a){r=0===i&&void 0===n?t:e(r,t,i,o,s,a)}),r}function F(t,n){A(t,function(t,r,i,o,s){var u,a=null===t?null:t.type;switch(a){case null:case"Point":case"LineString":case"Polygon":return n(e(t,i,{bbox:o,id:s}),r,0),0}switch(a){case"MultiPoint":u="Point";break;case"MultiLineString":u="LineString";break;case"MultiPolygon":u="Polygon"}t.coordinates.forEach(function(t,o){n(e({type:u,coordinates:t},i),r,o)})})}function q(t,e,n){var r=n;return F(t,function(t,i,o){r=0===i&&0===o&&void 0===n?t:e(r,t,i,o)}),r}function G(t,e){F(t,function(t,n,r){var o,i=0;!t.geometry||"Point"!==(o=t.geometry.type)&&"MultiPoint"!==o&&M(t,function(o,s,u,c,h,l){var p=a([o,s],t.properties);return e(p,n,r,l,i),i++,s})})}function B(t,e,n){var r=n,i=!1;return G(t,function(t,o,s,a,u){r=!1===i&&void 0===n?t:e(r,t,o,s,a,u),i=!0}),r}function k(t,e){if(!t)throw new Error("geojson is required");F(t,function(t,n,r){if(null!==t.geometry){var i=t.geometry.type,o=t.geometry.coordinates;switch(i){case"LineString":e(t,n,r,0,0);break;case"Polygon":for(var s=0;s<o.length;s++)e(a(o[s],t.properties),n,r,s)}}})}function z(t,e,n){var r=n;return k(t,function(t,i,o,s){r=0===i&&void 0===n?t:e(r,t,i,o,s)}),r}function j(t){var e=[1/0,1/0,-1/0,-1/0];return S(t,function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])}),e}function X(t){if(!t)throw new Error("obj is required");var e=U(t);if(1<e.length&&b(e[0])&&b(e[1]))return e;throw new Error("Coordinate is not a valid Point")}function U(t){if(!t)throw new Error("obj is required");var e;if(t.length?e=t:t.coordinates?e=t.coordinates:t.geometry&&t.geometry.coordinates&&(e=t.geometry.coordinates),e)return Y(e),e;throw new Error("No valid coordinates")}function Y(t){if(1<t.length&&b(t[0])&&b(t[1]))return!0;if(Array.isArray(t[0])&&t[0].length)return Y(t[0]);throw new Error("coordinates must only contain numbers")}function V(t,e,n){if(!e||!n)throw new Error("type and name required");if(!t||t.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+t.type)}function H(t,e,n){if(!t)throw new Error("No feature passed");if(!n)throw new Error(".featureOf() requires a name");if(!t||"Feature"!==t.type||!t.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!t.geometry||t.geometry.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+t.geometry.type)}function W(t,e,n){if(!t)throw new Error("No featureCollection passed");if(!n)throw new Error(".collectionOf() requires a name");if(!t||"FeatureCollection"!==t.type)throw new Error("Invalid input to "+n+", FeatureCollection required");for(var r=0;r<t.features.length;r++){var i=t.features[r];if(!i||"Feature"!==i.type||!i.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!i.geometry||i.geometry.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+i.geometry.type)}}function J(t){if(!t)throw new Error("geojson is required");if(void 0!==t.geometry)return t.geometry;if(t.coordinates||t.geometries)return t;throw new Error("geojson must be a valid Feature or Geometry Object")}function Z(){throw new Error("invariant.getGeomType has been deprecated in v5.0 in favor of invariant.getType")}function K(t,e){if(!t)throw new Error((e||"geojson")+" is required");if(t.geometry&&t.geometry.type)return t.geometry.type;if(t.type)return t.type;throw new Error((e||"geojson")+" is invalid")}function $(t,e,n){return(t-e)/(n-e)}function tt(t){return 0===t.cval||15===t.cval}function et(t){tt(t)||5===t.cval||10===t.cval||(t.cval=15)}function nt(t,e){return"top"===e?[t.top,1]:"bottom"===e?[t.bottom,0]:"right"===e?[1,t.right]:"left"===e?[0,t.left]:void 0}function ot(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function st(t,e){if(!(this instanceof st))return new st(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&this._initFormat(e),this.clear()}function at(t,e){ut(t,0,t.children.length,e,t)}function ut(t,e,n,r,i){(i=i||yt(null)).minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var o,s=e;s<n;s++)o=t.children[s],ct(i,t.leaf?r(o):o);return i}function ct(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function ht(t,e){return t.minX-e.minX}function lt(t,e){return t.minY-e.minY}function pt(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function ft(t){return t.maxX-t.minX+(t.maxY-t.minY)}function gt(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function dt(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function yt(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function _t(t,e,n,r,i){for(var o,s=[e,n];s.length;)(n=s.pop())-(e=s.pop())<=r||(o=e+Math.ceil((n-e)/r/2)*r,Yo(t,o,e,n,i),s.push(e,o,o,n))}function mt(t,e){return t(e={exports:{}},e.exports),e.exports}function vt(t,e){if(!(this instanceof vt))return new vt(t,e);if(this.data=t||[],this.length=this.data.length,this.compare=e||function(t,e){return t<e?-1:e<t?1:0},0<this.length)for(var n=(this.length>>1)-1;0<=n;n--)this._down(n)}function xt(t,e,n){e=Math.max(0,void 0===e?2:e),n=n||0;for(var r,i=function(t){for(var e=t[0],n=t[0],r=t[0],i=t[0],o=0;o<t.length;o++){var s=t[o];s[0]<e[0]&&(e=s),s[0]>r[0]&&(r=s),s[1]<n[1]&&(n=s),s[1]>i[1]&&(i=s)}for(var a=[e,n,r,i],u=a.slice(),o=0;o<t.length;o++)!function(t,e){for(var n=t[0],r=t[1],i=!1,o=0,s=e.length-1;o<e.length;s=o++){var a=e[o][0],u=e[o][1],c=e[s][0],h=e[s][1];u>r!=h>r&&n<(c-a)*(r-u)/(h-u)+a&&(i=!i)}return i}(t[o],a)&&u.push(t[o]);var c=function(t){var e=t.length;if(e<3){for(var n=new Array(e),r=0;r<e;++r)n[r]=r;return 2===e&&t[0][0]===t[1][0]&&t[0][1]===t[1][1]?[0]:n}var i=new Array(e);for(r=0;r<e;++r)i[r]=r;i.sort(function(e,n){var r=t[e][0]-t[n][0];return r||t[e][1]-t[n][1]});var o=[i[0],i[1]],s=[i[0],i[1]];for(r=2;r<e;++r){for(var a=i[r],u=t[a],c=o.length;c>1&&es(t[o[c-2]],t[o[c-1]],u)<=0;)c-=1,o.pop();for(o.push(a),c=s.length;c>1&&es(t[s[c-2]],t[s[c-1]],u)>=0;)c-=1,s.pop();s.push(a)}n=new Array(s.length+o.length-2);for(var h=0,l=(r=0,o.length);r<l;++r)n[h++]=o[r];for(var p=s.length-2;p>0;--p)n[h++]=s[p];return n}(u),h=[];for(o=0;o<c.length;o++)h.push(u[c[o]]);return h}(t),o=Vo(16,["[0]","[1]","[0]","[1]"]).load(t),s=[],a=0;a<i.length;a++){var u=i[a];o.remove(u),r=Nt(u,r),s.push(r)}for(var c=Vo(16),a=0;a<s.length;a++)c.insert(It(s[a]));for(var h=e*e,l=n*n;s.length;){var y,p=s.shift(),f=p.p,g=p.next.p,d=Ct(f,g);d<l||(y=d/h,(u=function(t,e,n,r,i,o,s){for(var a=new ns(null,Et),u=t.data;u;){for(var c=0;c<u.children.length;c++){var h=u.children[c],l=u.leaf?St(h,n,r):function(t,e,n){if(wt(t,n)||wt(e,n))return 0;var r=Mt(t[0],t[1],e[0],e[1],n.minX,n.minY,n.maxX,n.minY);if(0===r)return 0;var i=Mt(t[0],t[1],e[0],e[1],n.minX,n.minY,n.minX,n.maxY);if(0===i)return 0;var o=Mt(t[0],t[1],e[0],e[1],n.maxX,n.minY,n.maxX,n.maxY);if(0===o)return 0;var s=Mt(t[0],t[1],e[0],e[1],n.minX,n.maxY,n.maxX,n.maxY);return 0===s?0:Math.min(r,i,o,s)}(n,r,h);o<l||a.push({node:h,dist:l})}for(;a.length&&!a.peek().node.children;){var p=a.pop(),f=p.node,g=St(f,e,n),d=St(f,r,i);if(p.dist<g&&p.dist<d&&bt(n,f,s)&&bt(r,f,s))return f}(u=a.pop())&&(u=u.node)}return null}(o,p.prev.p,f,g,p.next.next.p,y,c))&&Math.min(Ct(u,f),Ct(u,g))<=y&&(s.push(p),s.push(Nt(u,p)),o.remove(u),c.remove(p),c.insert(It(p)),c.insert(It(p.next))))}p=r;for(var _=[];_.push(p.p),(p=p.next)!==r;);return _.push(p.p),_}function Et(t,e){return t.dist-e.dist}function wt(t,e){return t[0]>=e.minX&&t[0]<=e.maxX&&t[1]>=e.minY&&t[1]<=e.maxY}function bt(t,e,n){for(var r=Math.min(t[0],e[0]),i=Math.min(t[1],e[1]),o=Math.max(t[0],e[0]),s=Math.max(t[1],e[1]),a=n.search({minX:r,minY:i,maxX:o,maxY:s}),u=0;u<a.length;u++)if(function(t,e,n,r){return t!==r&&e!==n&&0<os(t,e,n)!=0<os(t,e,r)&&0<os(n,r,t)!=0<os(n,r,e)}(a[u].p,a[u].next.p,t,e))return;return 1}function It(t){var e=t.p,n=t.next.p;return t.minX=Math.min(e[0],n[0]),t.minY=Math.min(e[1],n[1]),t.maxX=Math.max(e[0],n[0]),t.maxY=Math.max(e[1],n[1]),t}function Nt(t,e){var n={p:t,prev:null,next:null,minX:0,minY:0,maxX:0,maxY:0};return e?(n.next=e.next,(n.prev=e).next.prev=n,e.next=n):(n.prev=n).next=n,n}function Ct(t,e){var n=t[0]-e[0],r=t[1]-e[1];return n*n+r*r}function St(t,e,n){var a,r=e[0],i=e[1],o=n[0]-r,s=n[1]-i;return 0===o&&0===s||(1<(a=((t[0]-r)*o+(t[1]-i)*s)/(o*o+s*s))?(r=n[0],i=n[1]):0<a&&(r+=o*a,i+=s*a)),(o=t[0]-r)*o+(s=t[1]-i)*s}function Mt(t,e,n,r,i,o,s,a){var u,c,h,l,p=n-t,f=r-e,g=s-i,d=a-o,y=t-i,_=e-o,m=p*p+f*f,v=p*g+f*d,x=g*g+d*d,E=p*y+f*_,w=g*y+d*_,b=m*x-v*v,I=b,N=b;0==b?(c=0,I=1,l=w,N=x):(l=m*w-v*E,(c=v*w-x*E)<0?(c=0,l=w,N=x):I<c&&(c=I,l=w+v,N=x)),l<0?-E<(l=0)?c=0:m<-E?c=I:(c=-E,I=m):N<l&&(l=N,v-E<0?c=0:m<v-E?c=I:(c=v-E,I=m));var C=(1-(h=0===l?0:l/N))*i+h*s-((1-(u=0===c?0:c/I))*t+u*n),S=(1-h)*o+h*a-((1-u)*e+u*r);return C*C+S*S}function Lt(t,e){if(!I(e=e||{}))throw new Error("options is invalid");var n=e.concavity||1/0,r=[];if(S(t,function(t){r.push([t[0],t[1]])}),!r.length)return null;var i=ss(r,n);return 3<i.length?o([i]):null}function Pt(t,e,n){if("object"!=typeof(n=n||{}))throw new Error("options is invalid");var r=n.ignoreBoundary;if(!t)throw new Error("point is required");if(!e)throw new Error("polygon is required");var i=X(t),o=U(e),s=e.geometry?e.geometry.type:e.type,a=e.bbox;if(a&&!1==(a[0]<=i[0]&&a[1]<=i[1]&&a[2]>=i[0]&&a[3]>=i[1]))return!1;"Polygon"===s&&(o=[o]);for(var u=0,c=!1;u<o.length&&!c;u++)if(Ot(i,o[u][0],r)){for(var h=!1,l=1;l<o[u].length&&!h;)Ot(i,o[u][l],!r)&&(h=!0),l++;h||(c=!0)}return c}function Ot(t,e,n){var r=!1;e[0][0]===e[e.length-1][0]&&e[0][1]===e[e.length-1][1]&&(e=e.slice(0,e.length-1));for(var i=0,o=e.length-1;i<e.length;o=i++){var s=e[i][0],a=e[i][1],u=e[o][0],c=e[o][1];if(t[1]*(s-u)+a*(u-t[0])+c*(t[0]-s)==0&&(s-t[0])*(u-t[0])<=0&&(a-t[1])*(c-t[1])<=0)return!n;a>t[1]!=c>t[1]&&t[0]<(u-s)*(t[1]-a)/(c-a)+s&&(r=!r)}return r}function Rt(t,e){var n=[];return A(e,function(e){O(t,function(t){Pt(t,e)&&n.push(t)})}),c(n)}function Tt(t,e){if("FeatureCollection"!==t.type)throw new Error("points must be a FeatureCollection");var n=!1;return c(function(t){if(t.length<3)return[];t.sort(Dt);for(var e,n,r,i,o,s,u=t[a=t.length-1].x,c=t[0].x,h=t[a].y,l=h;a--;)t[a].y<h&&(h=t[a].y),t[a].y>l&&(l=t[a].y);for(var p,f=c-u,g=l-h,d=g<f?f:g,y=.5*(c+u),_=.5*(l+h),m=[new At({x:y-20*d,y:_-d,__sentinel:!0},{x:y,y:_+20*d,__sentinel:!0},{x:y+20*d,y:_-d,__sentinel:!0})],v=[],x=[],a=t.length;a--;){for(x.length=0,p=m.length;p--;)0<(f=t[a].x-m[p].x)&&f*f>m[p].r?(v.push(m[p]),m.splice(p,1)):f*f+(g=t[a].y-m[p].y)*g>m[p].r||(x.push(m[p].a,m[p].b,m[p].b,m[p].c,m[p].c,m[p].a),m.splice(p,1));for(function(t){var e,n,r,i,o,s=t.length;t:for(;s;)for(n=t[--s],e=t[--s],r=s;r;)if(o=t[--r],i=t[--r],e===i&&n===o||e===o&&n===i){t.splice(s,2),t.splice(r,2),s-=2;continue t}}(x),p=x.length;p;)n=x[--p],e=x[--p],r=t[a],i=n.x-e.x,o=n.y-e.y,s=2*(i*(r.y-n.y)-o*(r.x-n.x)),1e-12<Math.abs(s)&&m.push(new At(e,n,r))}for(Array.prototype.push.apply(v,m),a=v.length;a--;)(v[a].a.__sentinel||v[a].b.__sentinel||v[a].c.__sentinel)&&v.splice(a,1);return v}(t.features.map(function(t){var r={x:t.geometry.coordinates[0],y:t.geometry.coordinates[1]};return e?r.z=t.properties[e]:3===t.geometry.coordinates.length&&(n=!0,r.z=t.geometry.coordinates[2]),r})).map(function(t){var e=[t.a.x,t.a.y],r=[t.b.x,t.b.y],i=[t.c.x,t.c.y],s={};return n?(e.push(t.a.z),r.push(t.b.z),i.push(t.c.z)):s={a:t.a.z,b:t.b.z,c:t.c.z},o([[e,r,i,e]],s)}))}function At(t,e,n){this.a=t,this.b=e,this.c=n;var r,i,o=e.x-t.x,s=e.y-t.y,a=n.x-t.x,u=n.y-t.y,c=o*(t.x+e.x)+s*(t.y+e.y),h=a*(t.x+n.x)+u*(t.y+n.y),l=2*(o*(n.y-e.y)-s*(n.x-e.x));this.x=(u*c-s*h)/l,this.y=(o*h-a*c)/l,r=this.x-t.x,i=this.y-t.y,this.r=r*r+i*i}function Dt(t,e){return e.x-t.x}function qt(t,e,n){if(!I(n=n||{}))throw new Error("options is invalid");var r=n.units,i=X(t),o=X(e),s=x(o[1]-i[1]),a=x(o[0]-i[0]),u=x(i[1]),c=x(o[1]),h=Math.pow(Math.sin(s/2),2)+Math.pow(Math.sin(a/2),2)*Math.cos(u)*Math.cos(c);return d(2*Math.atan2(Math.sqrt(h),Math.sqrt(1-h)),r)}function Gt(t){if(!t)throw new Error("geojson is required");switch(t.type){case"Feature":return Bt(t);case"FeatureCollection":return function(t){var e={type:"FeatureCollection"};return Object.keys(t).forEach(function(n){switch(n){case"type":case"features":return;default:e[n]=t[n]}}),e.features=t.features.map(Bt),e}(t);case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":return zt(t);default:throw new Error("unknown GeoJSON type")}}function Bt(t){var e={type:"Feature"};return Object.keys(t).forEach(function(n){switch(n){case"type":case"properties":case"geometry":return;default:e[n]=t[n]}}),e.properties=function kt(t){var e={};return t&&Object.keys(t).forEach(function(n){var r=t[n];"object"==typeof r?null===r?e[n]=null:r.length?e[n]=r.map(function(t){return t}):e[n]=kt(r):e[n]=r}),e}(t.properties),e.geometry=zt(t.geometry),e}function zt(t){var e={type:t.type};return t.bbox&&(e.bbox=t.bbox),"GeometryCollection"===t.type?e.geometries=t.geometries.map(zt):e.coordinates=function jt(t){return"object"!=typeof t[0]?t.slice():t.map(function(t){return jt(t)})}(t.coordinates),e}function Xt(t,e){function r(t){return u(t)}function i(t){for(var e=[],r=0,i=t.length;r<i;++r)!function(t,e){e.length&&e.pop();for(var n=c[t<0?~t:t],r=0,i=n.length;r<i;++r)e.push(u(n[r],r));t<0&&hs(e,i)}(t[r],e);return e.length<2&&e.push(e[0]),e}function o(t){for(var e=i(t);e.length<4;)e.push(e[0]);return e}function s(t){return t.map(o)}var u=cs(t.transform),c=t.arcs;return function a(t){var e,n=t.type;switch(n){case"GeometryCollection":return{type:n,geometries:t.geometries.map(a)};case"Point":e=r(t.coordinates);break;case"MultiPoint":e=t.coordinates.map(r);break;case"LineString":e=i(t.arcs);break;case"MultiLineString":e=t.arcs.map(i);break;case"Polygon":e=s(t.arcs);break;case"MultiPolygon":e=t.arcs.map(s);break;default:return null}return{type:n,coordinates:e}}(e)}function Ut(t,e){function r(t){t.forEach(function(e){e.forEach(function(e){(o[e=e<0?~e:e]||(o[e]=[])).push(t)})}),s.push(t)}function i(e){return function(t){for(var e,n=-1,r=t.length,i=t[r-1],o=0;++n<r;)e=i,i=t[n],o+=e[0]*i[1]-e[1]*i[0];return Math.abs(o)}(Xt(t,{type:"Polygon",arcs:[e]}).coordinates[0])}var o={},s=[],a=[];return e.forEach(function n(t){switch(t.type){case"GeometryCollection":t.geometries.forEach(n);break;case"Polygon":r(t.arcs);break;case"MultiPolygon":t.arcs.forEach(r)}}),s.forEach(function(t){if(!t._){var e=[],n=[t];for(t._=1,a.push(e);t=n.pop();)e.push(t),t.forEach(function(t){t.forEach(function(t){o[t<0?~t:t].forEach(function(t){t._||(t._=1,n.push(t))})})})}}),s.forEach(function(t){delete t._}),{type:"MultiPolygon",arcs:a.map(function(e){var n,r=[];if(e.forEach(function(t){t.forEach(function(t){t.forEach(function(t){o[t<0?~t:t].length<2&&r.push(t)})})}),1<(n=(r=function(t,e){function n(t,e){for(var n in t){var i=t[n];delete e[i.start],delete i.start,delete i.end,i.forEach(function(t){r[t<0?~t:t]=1}),s.push(i)}}var r={},i={},o={},s=[],a=-1;return e.forEach(function(n,r){var i,o=t.arcs[n<0?~n:n];o.length<3&&!o[1][0]&&!o[1][1]&&(i=e[++a],e[a]=n,e[r]=i)}),e.forEach(function(e){var n,r,s=function(e){var n,r=t.arcs[e<0?~e:e],i=r[0];return t.transform?(n=[0,0],r.forEach(function(t){n[0]+=t[0],n[1]+=t[1]})):n=r[r.length-1],e<0?[n,i]:[i,n]}(e),a=s[0],u=s[1];if(n=o[a])if(delete o[n.end],n.push(e),n.end=u,r=i[u]){delete i[r.start];var c=r===n?n:n.concat(r);i[c.start=n.start]=o[c.end=r.end]=c}else i[n.start]=o[n.end]=n;else if(n=i[u])if(delete i[n.start],n.unshift(e),n.start=a,r=o[a]){delete o[r.end];var h=r===n?n:r.concat(n);i[h.start=r.start]=o[h.end=n.end]=h}else i[n.start]=o[n.end]=n;else i[(n=[e]).start=a]=o[n.end=u]=n}),n(o,i),n(i,o),e.forEach(function(t){r[t<0?~t:t]||s.push([t])}),s}(t,r)).length))for(var s,a,u=1,c=i(r[0]);u<n;++u)(s=i(r[u]))>c&&(a=r[0],r[0]=r[u],r[u]=a,c=s);return r})}}function Yt(t,e,n){for(var r,i=e+(n---e>>1);e<i;++e,--n)r=t[e],t[e]=t[n],t[n]=r}function Vt(t){return null==t?{type:null}:("FeatureCollection"===t.type?function(t){var e={type:"GeometryCollection",geometries:t.features.map(Ht)};return null!=t.bbox&&(e.bbox=t.bbox),e}:"Feature"===t.type?Ht:Wt)(t)}function Ht(t){var e,n=Wt(t.geometry);for(e in null!=t.id&&(n.id=t.id),null!=t.bbox&&(n.bbox=t.bbox),t.properties){n.properties=t.properties;break}return n}function Wt(t){if(null==t)return{type:null};var e="GeometryCollection"===t.type?{type:"GeometryCollection",geometries:t.geometries.map(Wt)}:"Point"===t.type||"MultiPoint"===t.type?{type:t.type,coordinates:t.coordinates}:{type:t.type,arcs:t.coordinates};return null!=t.bbox&&(e.bbox=t.bbox),e}function Jt(t){var e,n=t[0],r=t[1];return r<n&&(e=n,n=r,r=e),n+31*r}function Zt(t,e){var n,r=t[0],i=t[1],o=e[0],s=e[1];return i<r&&(n=r,r=i,i=n),s<o&&(n=o,o=s,s=n),r===o&&i===s}function Qt(t){return t[0].toString()+","+t[1].toString()}function $t(t,e){if(!I(e=e||{}))throw new Error("options is invalid");var n=e.mutate;if("FeatureCollection"!==K(t))throw new Error("geojson must be a FeatureCollection");if(!t.features.length)throw new Error("geojson is empty");!1!==n&&void 0!==n||(t=Gt(t));var r=function(t){var e={};F(t,function(t){e[t.geometry.type]=!0});var n=Object.keys(e);return 1===n.length?n[0]:null}(t);if(!r)throw new Error("geojson must be homogenous");switch(r){case"LineString":return function(t,e){if(!I(e=e||{}))throw new Error("options is invalid");var n=e.mutate;if("FeatureCollection"!==K(t))throw new Error("geojson must be a FeatureCollection");if(!t.features.length)throw new Error("geojson is empty");!1!==n&&void 0!==n||(t=Gt(t));var r=[],i=z(t,function(t,e){return function(t,e){var n,r=t.geometry.coordinates,i=e.geometry.coordinates,o=Qt(r[0]),s=Qt(r[r.length-1]),u=Qt(i[0]),c=Qt(i[i.length-1]);if(o===c)n=i.concat(r.slice(1));else if(u===s)n=r.concat(i.slice(1));else if(o===u)n=r.slice(1).reverse().concat(i);else{if(s!==c)return null;n=r.concat(i.reverse().slice(1))}return a(n)}(t,e)||(r.push(t),e)});return i&&r.push(i),r.length?1===r.length?r[0]:h(r.map(function(t){return t.coordinates})):null}(t,e);case"Polygon":return function(t,e){if(!I(e=e||{}))throw new Error("options is invalid");var n=e.mutate;if("FeatureCollection"!==K(t))throw new Error("geojson must be a FeatureCollection");if(!t.features.length)throw new Error("geojson is empty");!1!==n&&void 0!==n||(t=Gt(t));var r=[];F(t,function(t){r.push(t.geometry)});var i=function(t,e){function n(t){t&&h.hasOwnProperty(t.type)&&h[t.type](t)}function r(t){var e=[];do{var n=c.get(t);e.push(t[0]<t[1]?n:~n)}while(t=t.next);return e}function i(t){return t.map(r)}var o=function(t){function e(t){null!=t&&c.hasOwnProperty(t.type)&&c[t.type](t)}function n(t){var e=t[0],n=t[1];e<o&&(o=e),e>a&&(a=e),n<s&&(s=n),n>u&&(u=n)}function r(t){t.forEach(n)}function i(t){t.forEach(r)}var o=1/0,s=1/0,a=-1/0,u=-1/0,c={GeometryCollection:function(t){t.geometries.forEach(e)},Point:function(t){n(t.coordinates)},MultiPoint:function(t){t.coordinates.forEach(n)},LineString:function(t){r(t.arcs)},MultiLineString:function(t){t.arcs.forEach(r)},Polygon:function(t){t.arcs.forEach(r)},MultiPolygon:function(t){t.arcs.forEach(i)}};for(var h in t)e(t[h]);return a>=o&&u>=s?[o,s,a,u]:void 0}(t=function(t){var e,n={};for(e in t)n[e]=Vt(t[e]);return n}(t)),s=e>0&&o&&function(t,e,n){function r(t){return[Math.round((t[0]-c)*f),Math.round((t[1]-h)*g)]}function i(t,e){for(var n,r,i,o,s,a=-1,u=0,l=t.length,p=new Array(l);++a<l;)n=t[a],o=Math.round((n[0]-c)*f),s=Math.round((n[1]-h)*g),o===r&&s===i||(p[u++]=[r=o,i=s]);for(p.length=u;u<e;)u=p.push([p[0][0],p[0][1]]);return p}function o(t){return i(t,2)}function s(t){return i(t,4)}function a(t){return t.map(s)}function u(t){null!=t&&d.hasOwnProperty(t.type)&&d[t.type](t)}var c=e[0],h=e[1],l=e[2],p=e[3],f=l-c?(n-1)/(l-c):1,g=p-h?(n-1)/(p-h):1,d={GeometryCollection:function(t){t.geometries.forEach(u)},Point:function(t){t.coordinates=r(t.coordinates)},MultiPoint:function(t){t.coordinates=t.coordinates.map(r)},LineString:function(t){t.arcs=o(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(o)},Polygon:function(t){t.arcs=a(t.arcs)},MultiPolygon:function(t){t.arcs=t.arcs.map(a)}};for(var y in t)u(t[y]);return{scale:[1/f,1/g],translate:[c,h]}}(t,o,e),a=Es(xs(function(t){function e(t){t&&c.hasOwnProperty(t.type)&&c[t.type](t)}function n(t){for(var e=0,n=t.length;e<n;++e)u[++o]=t[e];var r={0:o-n+1,1:o};return s.push(r),r}function r(t){for(var e=0,n=t.length;e<n;++e)u[++o]=t[e];var r={0:o-n+1,1:o};return a.push(r),r}function i(t){return t.map(r)}var o=-1,s=[],a=[],u=[],c={GeometryCollection:function(t){t.geometries.forEach(e)},LineString:function(t){t.arcs=n(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(n)},Polygon:function(t){t.arcs=t.arcs.map(r)},MultiPolygon:function(t){t.arcs=t.arcs.map(i)}};for(var h in t)e(t[h]);return{type:"Topology",coordinates:u,lines:s,rings:a,objects:t}}(t))),u=a.coordinates,c=fs(1.4*a.arcs.length,Jt,Zt);t=a.objects,a.bbox=o,a.arcs=a.arcs.map(function(t,e){return c.set(t,e),u.slice(t[0],t[1]+1)}),delete a.coordinates,u=null;var h={GeometryCollection:function(t){t.geometries.forEach(n)},LineString:function(t){t.arcs=r(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(r)},Polygon:function(t){t.arcs=t.arcs.map(r)},MultiPolygon:function(t){t.arcs=t.arcs.map(i)}},l;for(l in t)n(t[l]);return s&&(a.transform=s,a.arcs=function(t){for(var e=-1,n=t.length;++e<n;){for(var r,i,o=t[e],s=0,a=1,u=o.length,c=o[0],h=c[0],l=c[1];++s<u;)r=(c=o[s])[0],i=c[1],r===h&&i===l||(o[a++]=[r-h,i-l],h=r,l=i);1===a&&(o[a++]=[0,0]),o.length=a}return t}(a.arcs)),a}({geoms:f(r).geometry});return function(t){return Xt(t,Ut.apply(this,arguments))}(i,i.objects.geoms.geometries)}(t,e);default:throw new Error(r+" is not supported")}}function te(t,n){var r="object"==typeof n?n.mutate:n;if(!t)throw new Error("geojson is required");var i=K(t),o=[];switch(i){case"LineString":o=ee(t);break;case"MultiLineString":case"Polygon":U(t).forEach(function(t){o.push(ee(t))});break;case"MultiPolygon":U(t).forEach(function(t){var e=[];t.forEach(function(t){e.push(ee(t))}),o.push(e)});break;case"Point":return t;case"MultiPoint":var s={};U(t).forEach(function(t){var e=t.join("-");s.hasOwnProperty(e)||(o.push(t),s[e]=!0)});break;default:throw new Error(i+" geometry not supported")}return t.coordinates?!0===r?(t.coordinates=o,t):{type:i,coordinates:o}:!0===r?(t.geometry.coordinates=o,t):e({type:i,coordinates:o},t.properties,t.bbox,t.id)}function ee(t){var e=U(t);if(2===e.length&&!function(t,e){return t[0]===e[0]&&t[1]===e[1]}(e[0],e[1]))return e;var n,r,i,o=[],s=e.length-1;o.push(e[0]);for(var a=1;a<s;a++)n=e[a-1],r=e[a],function(t,e,n){var r=n[0],i=n[1],o=t[0],s=t[1],a=e[0],u=e[1],c=a-o,h=u-s;return(r-o)*h-(i-s)*c==0&&(Math.abs(c)>=Math.abs(h)?0<c?o<=r&&r<=a:a<=r&&r<=o:0<h?s<=i&&i<=u:u<=i&&i<=s)}(n,i=e[a+1],r)||o.push(r);return o.push(i),o}function oe(t,e,n){if(t.length<=2)return t;var r=void 0!==e?e*e:1;return function(t,e){var n=t.length-1,r=[t[0]];return function ie(t,e,n,r,i){for(var o,s=r,a=e+1;a<n;a++){var u=function(t,e,n){var a,r=e.x,i=e.y,o=n.x-r,s=n.y-i;return 0===o&&0===s||(1<(a=((t.x-r)*o+(t.y-i)*s)/(o*o+s*s))?(r=n.x,i=n.y):0<a&&(r+=o*a,i+=s*a)),(o=t.x-r)*o+(s=t.y-i)*s}(t[a],t[e],t[n]);s<u&&(o=a,s=u)}r<s&&(1<o-e&&ie(t,e,o,r,i),i.push(t[o]),1<n-o&&ie(t,o,n,r,i))}(t,0,n,e,r),r.push(t[n]),r}(t=n?t:function(t,e){for(var n,r=t[0],i=[r],o=1,s=t.length;o<s;o++)(function(t,e){var n=t.x-e.x,r=t.y-e.y;return n*n+r*r})(n=t[o],r)>e&&(i.push(n),r=n);return r!==n&&i.push(n),i}(t,r),r)}function se(t,e,n){return oe(t.map(function(t){return{x:t[0],y:t[1],z:t[2]}}),e,n).map(function(t){return t.z?[t.x,t.y,t.z]:[t.x,t.y]})}function ae(t,e,n){return t.map(function(t){var r=t.map(function(t){return{x:t[0],y:t[1]}});if(r.length<4)throw new Error("invalid polygon");for(var i=oe(r,e,n).map(function(t){return[t.x,t.y]});i.length<3||3===i.length&&i[2][0]===i[0][0]&&i[2][1]===i[0][1];)i=oe(r,e-=.01*e,n).map(function(t){return[t.x,t.y]});return i[i.length-1][0]===i[0][0]&&i[i.length-1][1]===i[0][1]||i.push(i[0]),i})}function ue(t,e){if(!I(e=e||{}))throw new Error("options is invalid");var n=e.resolution||1e4,r=e.sharpness||.85;if(!t)throw new Error("line is required");if(!b(n))throw new Error("resolution must be an number");if(!b(r))throw new Error("sharpness must be an number");for(var i=[],o=new bs({points:J(t).coordinates.map(function(t){return{x:t[0],y:t[1]}}),duration:n,sharpness:r}),s=0;s<o.duration;s+=10){var u=o.pos(s);Math.floor(s/100)%2==0&&i.push([u.x,u.y])}return a(i,t.properties)}function ce(t){N(t);var e=Number(t[0]),n=Number(t[1]),r=Number(t[2]),i=Number(t[3]);if(6===t.length)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");var s=[e,n];return o([[s,[r,n],[r,i],[e,i],s]])}function he(t){return ce(j(t))}function le(t){var e=t[0],n=t[1],r=t[2],i=t[3];if(qt(t.slice(0,2),[r,n])>=qt(t.slice(0,2),[e,i])){var o=(n+i)/2;return[e,o-(r-e)/2,r,o+(r-e)/2]}var s=(e+r)/2;return[s-(i-n)/2,n,s+(i-n)/2,i]}function pe(t,e,n,i){if(!I(i=i||{}))throw new Error("options is invalid");var o=i.units,s=i.properties,a=X(t),u=x(a[0]),c=x(a[1]),h=x(n),l=y(e,o),p=Math.asin(Math.sin(c)*Math.cos(l)+Math.cos(c)*Math.sin(l)*Math.cos(h));return r([v(u+Math.atan2(Math.sin(h)*Math.sin(l)*Math.cos(c),Math.cos(l)-Math.sin(c)*Math.sin(p))),v(p)],s)}function fe(t,e,n){var r=(n=n||{}).steps||64,i=n.properties;if(!t)throw new Error("center is required");if(!e)throw new Error("radius is required");if("object"!=typeof n)throw new Error("options must be an object");if("number"!=typeof r)throw new Error("steps must be a number");r=r||64,i=i||t.properties||{};for(var s=[],a=0;a<r;a++)s.push(pe(t,e,-360*a/r,n).geometry.coordinates);return s.push(s[0]),o([s],i)}function ge(t,e,n){if(!I(n=n||{}))throw new Error("options is invalid");if(!0===n.final)return function(t,e){var n=ge(e,t);return(n+180)%360}(t,e);var r=X(t),i=X(e),o=x(r[0]),s=x(i[0]),a=x(r[1]),u=x(i[1]),c=Math.sin(s-o)*Math.cos(u),h=Math.cos(a)*Math.sin(u)-Math.sin(a)*Math.cos(u)*Math.cos(s-o);return v(Math.atan2(c,h))}function de(t,e){if(!I(e=e||{}))throw new Error("options is invalid");var n=e.properties;if(!t)throw new Error("geojson is required");var i=j(t);return r([(i[0]+i[2])/2,(i[1]+i[3])/2],n)}function ye(t,e){var n=0,i=0,o=0;return S(t,function(t){n+=t[0],i+=t[1],o++},!0),r([n/o,i/o],e)}function me(t){var e=[];return"FeatureCollection"===t.type?O(t,function(t){S(t,function(n){e.push(r(n,t.properties))})}):S(t,function(n){e.push(r(n,t.properties))}),c(e)}function ve(t,e,n){n=n||2;var a,u,c,h,l,p,f,r=e&&e.length,i=r?e[0]*n:t.length,o=xe(t,0,i,n,!0),s=[];if(!o)return s;if(r&&(o=function(t,e,n,r){for(var u,c=[],i=0,o=e.length;i<o;i++)(u=xe(t,e[i]*r,i<o-1?e[i+1]*r:t.length,r,!1))===u.next&&(u.steiner=!0),c.push(function(t){for(var e=t,n=t;e.x<n.x&&(n=e),(e=e.next)!==t;);return n}(u));for(c.sort(be),i=0;i<c.length;i++)!function(t,e){var n;(e=function(t,e){var n,r=e,i=t.x,o=t.y,s=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var a=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(a<=i&&s<a){if((s=a)===i){if(o===r.y)return r;if(o===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==e);if(!n)return null;if(i===s)return n.prev;for(var u,c=n,h=n.x,l=n.y,p=1/0,r=n.next;r!==c;)i>=r.x&&r.x>=h&&i!==r.x&&Ne(o<l?i:s,o,h,l,o<l?s:i,o,r.x,r.y)&&((u=Math.abs(o-r.y)/(i-r.x))<p||u===p&&r.x>n.x)&&Le(r,t)&&(n=r,p=u),r=r.next;return n}(t,e))&&Ee(n=Pe(e,t),n.next)}(c[i],n),n=Ee(n,n.next);return n}(t,e,o,n)),t.length>80*n){a=c=t[0],u=h=t[1];for(var g=n;g<i;g+=n)(l=t[g])<a&&(a=l),(p=t[g+1])<u&&(u=p),c<l&&(c=l),h<p&&(h=p);f=0!==(f=Math.max(c-a,h-u))?1/f:0}return function we(t,e,n,r,i,o,s){if(t){!s&&o&&function(t,e,n,r){for(var i=t;null===i.z&&(i.z=Ie(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,(i=i.next)!==t;);i.prevZ.nextZ=null,i.prevZ=null,function(t){var e,n,r,i,o,s,a,u,c=1;do{for(n=t,o=t=null,s=0;n;){for(s++,r=n,e=a=0;e<c&&(a++,r=r.nextZ);e++);for(u=c;0<a||0<u&&r;)0!==a&&(0===u||!r||n.z<=r.z)?(n=(i=n).nextZ,a--):(r=(i=r).nextZ,u--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;n=r}o.nextZ=null,c*=2}while(1<s)}(i)}(t,r,i,o);for(var a,u,c=t;t.prev!==t.next;)if(a=t.prev,u=t.next,o?function(t,e,n,r){var i=t.prev,o=t,s=t.next;if(!(0<=Ce(i,o,s))){for(var a=i.x<o.x?i.x<s.x?i.x:s.x:o.x<s.x?o.x:s.x,u=i.y<o.y?i.y<s.y?i.y:s.y:o.y<s.y?o.y:s.y,c=i.x>o.x?i.x>s.x?i.x:s.x:o.x>s.x?o.x:s.x,h=i.y>o.y?i.y>s.y?i.y:s.y:o.y>s.y?o.y:s.y,l=Ie(a,u,e,n,r),p=Ie(c,h,e,n,r),f=t.nextZ;f&&f.z<=p;){if(f!==t.prev&&f!==t.next&&Ne(i.x,i.y,o.x,o.y,s.x,s.y,f.x,f.y)&&0<=Ce(f.prev,f,f.next))return;f=f.nextZ}for(f=t.prevZ;f&&f.z>=l;){if(f!==t.prev&&f!==t.next&&Ne(i.x,i.y,o.x,o.y,s.x,s.y,f.x,f.y)&&0<=Ce(f.prev,f,f.next))return;f=f.prevZ}return 1}}(t,r,i,o):function(t){var e=t.prev,n=t,r=t.next;if(!(0<=Ce(e,n,r))){for(var i=t.next.next;i!==t.prev;){if(Ne(e.x,e.y,n.x,n.y,r.x,r.y,i.x,i.y)&&0<=Ce(i.prev,i,i.next))return;i=i.next}return 1}}(t))e.push(a.i/n),e.push(t.i/n),e.push(u.i/n),Re(t),t=u.next,c=u.next;else if((t=u)===c){s?1===s?we(t=function(t,e,n){var r=t;do{var i=r.prev,o=r.next.next;!Se(i,o)&&Me(i,r,r.next,o)&&Le(i,o)&&Le(o,i)&&(e.push(i.i/n),e.push(r.i/n),e.push(o.i/n),Re(r),Re(r.next),r=t=o),r=r.next}while(r!==t);return r}(t,e,n),e,n,r,i,o,2):2===s&&function(t,e,n,r,i,o){var s=t;do{for(var a=s.next.next;a!==s.prev;){if(s.i!==a.i&&function(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&Me(n,n.next,t,e))return 1;n=n.next}while(n!==t)}(t,e)&&Le(t,e)&&Le(e,t)&&function(t,e){for(var n=t,r=!1,i=(t.x+e.x)/2,o=(t.y+e.y)/2;n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),(n=n.next)!==t;);return r}(t,e)}(s,a)){var u=Pe(s,a);return s=Ee(s,s.next),u=Ee(u,u.next),we(s,e,n,r,i,o),we(u,e,n,r,i,o)}a=a.next}s=s.next}while(s!==t)}(t,e,n,r,i,o):we(Ee(t),e,n,r,i,o,1);break}}}(o,s,n,a,u,f),s}function xe(t,e,n,r,i){var o,s;if(i===0<Ae(t,e,n,r))for(o=e;o<n;o+=r)s=Oe(o,t[o],t[o+1],s);else for(o=n-r;e<=o;o-=r)s=Oe(o,t[o],t[o+1],s);return s&&Se(s,s.next)&&(Re(s),s=s.next),s}function Ee(t,e){if(!t)return t;e=e||t;var n,r=t;do{if(n=!1,r.steiner||!Se(r,r.next)&&0!==Ce(r.prev,r,r.next))r=r.next;else{if(Re(r),(r=e=r.prev)===r.next)break;n=!0}}while(n||r!==e);return e}function be(t,e){return t.x-e.x}function Ie(t,e,n,r,i){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*i)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*i)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function Ne(t,e,n,r,i,o,s,a){return 0<=(i-s)*(e-a)-(t-s)*(o-a)&&0<=(t-s)*(r-a)-(n-s)*(e-a)&&0<=(n-s)*(o-a)-(i-s)*(r-a)}function Ce(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function Se(t,e){return t.x===e.x&&t.y===e.y}function Me(t,e,n,r){return Se(t,e)&&Se(n,r)||Se(t,r)&&Se(n,e)||0<Ce(t,e,n)!=0<Ce(t,e,r)&&0<Ce(n,r,t)!=0<Ce(n,r,e)}function Le(t,e){return Ce(t.prev,t,t.next)<0?0<=Ce(t,e,t.next)&&0<=Ce(t,t.prev,e):Ce(t,e,t.prev)<0||Ce(t,t.next,e)<0}function Pe(t,e){var n=new Te(t.i,t.x,t.y),r=new Te(e.i,e.x,e.y),i=t.next,o=e.prev;return(t.next=e).prev=t,(n.next=i).prev=n,(r.next=n).prev=r,(o.next=r).prev=o,r}function Oe(t,e,n,r){var i=new Te(t,e,n);return r?(i.next=r.next,(i.prev=r).next.prev=i,r.next=i):(i.prev=i).next=i,i}function Re(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Te(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Ae(t,e,n,r){for(var i=0,o=e,s=n-r;o<n;o+=r)i+=(t[s]-t[o])*(t[o+1]+t[s+1]),s=o;return i}function De(t){var e=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var s=0;s<e;s++)n.vertices.push(t[i][o][s]);0<i&&(r+=t[i-1].length,n.holes.push(r))}return n}(t),n=Is(e.vertices,e.holes,2),r=[],i=[];n.forEach(function(t,r){var o=n[r];i.push([e.vertices[2*o],e.vertices[2*o+1]])});for(var s=0;s<i.length;s+=3){var a=i.slice(s,s+3);a.push(i[s]),r.push(o([a]))}return r}function Fe(t,e){if(!t)throw new Error("targetPoint is required");if(!e)throw new Error("points is required");var n,r=1/0;return O(e,function(e,i){var o=qt(t,e);o<r&&((n=Gt(e)).properties.featureIndex=i,n.properties.distanceToPoint=o,r=o)}),n}function qe(t,e,n,r,i){!function Ge(t,e,n,r,i){for(;n<r;){var o,s,a,u,c;600<r-n&&(o=r-n+1,s=e-n+1,a=Math.log(o),u=.5*Math.exp(2*a/3),c=.5*Math.sqrt(a*u*(o-u)/o)*(s-o/2<0?-1:1),Ge(t,e,Math.max(n,Math.floor(e-s*u/o+c)),Math.min(r,Math.floor(e+(o-s)*u/o+c)),i));var h=t[e],l=n,p=r;for(Be(t,n,e),0<i(t[r],h)&&Be(t,n,r);l<p;){for(Be(t,l,p),l++,p--;i(t[l],h)<0;)l++;for(;0<i(t[p],h);)p--}0===i(t[n],h)?Be(t,n,p):Be(t,++p,r),p<=e&&(n=p+1),e<=p&&(r=p-1)}}(t,e,n||0,r||t.length-1,i||function(t,e){return t<e?-1:e<t?1:0})}function Be(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function ke(t,e){if(!(this instanceof ke))return new ke(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&this._initFormat(e),this.clear()}function ze(t,e){je(t,0,t.children.length,e,t)}function je(t,e,n,r,i){(i=i||Ze(null)).minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var o,s=e;s<n;s++)o=t.children[s],Xe(i,t.leaf?r(o):o);return i}function Xe(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function Ue(t,e){return t.minX-e.minX}function Ye(t,e){return t.minY-e.minY}function Ve(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function He(t){return t.maxX-t.minX+(t.maxY-t.minY)}function We(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function Je(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function Ze(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Ke(t,e,n,r,i){for(var o,s=[e,n];s.length;)(n=s.pop())-(e=s.pop())<=r||(qe(t,o=e+Math.ceil((n-e)/r/2)*r,e,n,i),s.push(e,o,o,n))}function Qe(t){var e=ke(t);return e.insert=function(t){var e;return Array.isArray(t)?(t=$e(e=t)).bbox=e:t.bbox=t.bbox?t.bbox:tn(t),ke.prototype.insert.call(this,t)},e.load=function(t){var e=[];return Array.isArray(t)?t.forEach(function(t){var n=$e(t);n.bbox=t,e.push(n)}):O(t,function(t){t.bbox=t.bbox?t.bbox:tn(t),e.push(t)}),ke.prototype.load.call(this,e)},e.remove=function(t){var e;return Array.isArray(t)&&((t=$e(e=t)).bbox=e),ke.prototype.remove.call(this,t)},e.clear=function(){return ke.prototype.clear.call(this)},e.search=function(t){return{type:"FeatureCollection",features:ke.prototype.search.call(this,this.toBBox(t))}},e.collides=function(t){return ke.prototype.collides.call(this,this.toBBox(t))},e.all=function(){return{type:"FeatureCollection",features:ke.prototype.all.call(this)}},e.toJSON=function(){return ke.prototype.toJSON.call(this)},e.fromJSON=function(t){return ke.prototype.fromJSON.call(this,t)},e.toBBox=function(t){var e=t.bbox?t.bbox:Array.isArray(t)&&4===t.length?t:tn(t);return{minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}},e}function $e(t){var e=[t[0],t[1]],n=[t[0],t[3]],r=[t[2],t[3]];return{type:"Feature",bbox:t,properties:{},geometry:{type:"Polygon",coordinates:[[e,[t[2],t[1]],r,n,e]]}}}function tn(t){var e=[1/0,1/0,-1/0,-1/0];return S(t,function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])}),e}function en(t){if(!t)throw new Error("geojson is required");var e=[];return F(t,function(t){!function(t,e){var n=[],r=t.geometry;switch(r.type){case"Polygon":n=U(r);break;case"LineString":n=[U(r)]}n.forEach(function(n){(function(t,e){var n=[];return t.reduce(function(t,r){var i=a([t,r],e);return i.bbox=function(t,e){var n=t[0],r=t[1],i=e[0],o=e[1];return[n<i?n:i,r<o?r:o,i<n?n:i,o<r?r:o]}(t,r),n.push(i),r}),n})(n,t.properties).forEach(function(t){t.id=e.length,e.push(t)})})}(t,e)}),c(e)}function nn(t,n){var r={},i=[];if("LineString"===t.type&&(t=e(t)),"LineString"===n.type&&(n=e(n)),"Feature"===t.type&&"Feature"===n.type&&"LineString"===t.geometry.type&&"LineString"===n.geometry.type&&2===t.geometry.coordinates.length&&2===n.geometry.coordinates.length){var o=rn(t,n);return o&&i.push(o),c(i)}var s=Qe();return s.load(en(n)),O(en(t),function(t){O(s.search(t),function(e){var o,n=rn(t,e);n&&(o=U(n).join(","),r[o]||(r[o]=!0,i.push(n)))})}),c(i)}function rn(t,e){var n=U(t),i=U(e);if(2!==n.length)throw new Error("<intersects> line1 must only contain 2 coordinates");if(2!==i.length)throw new Error("<intersects> line2 must only contain 2 coordinates");var o=n[0][0],s=n[0][1],a=n[1][0],u=n[1][1],c=i[0][0],h=i[0][1],l=i[1][0],p=i[1][1],f=(p-h)*(a-o)-(l-c)*(u-s);if(0==f)return null;var y=((l-c)*(s-h)-(p-h)*(o-c))/f,_=((a-o)*(s-h)-(u-s)*(o-c))/f;return 0<=y&&y<=1&&0<=_&&_<=1?r([o+y*(a-o),s+y*(u-s)]):null}function on(t,e,n){if(!I(n=n||{}))throw new Error("options is invalid");var i=t.geometry?t.geometry.type:t.type;if("LineString"!==i&&"MultiLineString"!==i)throw new Error("lines must be LineString or MultiLineString");var o=r([1/0,1/0],{dist:1/0}),s=0;return F(t,function(t){for(var i=U(t),u=0;u<i.length-1;u++){var c=r(i[u]);c.properties.dist=qt(e,c,n);var h=r(i[u+1]);h.properties.dist=qt(e,h,n);var l=qt(c,h,n),p=Math.max(c.properties.dist,h.properties.dist),f=ge(c,h),g=pe(e,p,f+90,n),d=pe(e,p,f-90,n),y=nn(a([g.geometry.coordinates,d.geometry.coordinates]),a([c.geometry.coordinates,h.geometry.coordinates])),_=null;0<y.features.length&&((_=y.features[0]).properties.dist=qt(e,_,n),_.properties.location=s+qt(c,_,n)),c.properties.dist<o.properties.dist&&((o=c).properties.index=u,o.properties.location=s),h.properties.dist<o.properties.dist&&((o=h).properties.index=u+1,o.properties.location=s+l),_&&_.properties.dist<o.properties.dist&&((o=_).properties.index=u),s+=l}}),o}function sn(t,e,n){if(!I(n=n||{}))throw new Error("options is invalid");var i,r=n.final;if(!t)throw new Error("start point is required");if(!e)throw new Error("end point is required");return 180<(i=r?an(X(e),X(t)):an(X(t),X(e)))?-(360-i):i}function an(t,e){var n=x(t[1]),r=x(e[1]),i=x(e[0]-t[0]);i>Math.PI&&(i-=2*Math.PI),i<-Math.PI&&(i+=2*Math.PI);var o=Math.log(Math.tan(r/2+Math.PI/4)/Math.tan(n/2+Math.PI/4));return(v(Math.atan2(i,o))+360)%360}function un(t,e,n){if(!I(n=n||{}))throw new Error("options is invalid");var r=n.units;if(!t)throw new Error("from point is required");if(!e)throw new Error("to point is required");var i=X(t),o=X(e);return o[0]+=180<o[0]-i[0]?-360:180<i[0]-o[0]?360:0,E(function(t,e,n){var r=n=void 0===n?Fo:Number(n),i=t[1]*Math.PI/180,o=e[1]*Math.PI/180,s=o-i,a=Math.abs(e[0]-t[0])*Math.PI/180;a>Math.PI&&(a-=2*Math.PI);var u=Math.log(Math.tan(o/2+Math.PI/4)/Math.tan(i/2+Math.PI/4)),c=1e-11<Math.abs(u)?s/u:Math.cos(i);return Math.sqrt(s*s+c*c*a*a)*r}(i,o),"meters",r)}function cn(t,e){return ln(t,"mercator",e)}function hn(t,e){return ln(t,"wgs84",e)}function ln(t,e,n){if(!I(n=n||{}))throw new Error("options is invalid");var r=n.mutate;if(!t)throw new Error("geojson is required");return Array.isArray(t)&&b(t[0])?t=("mercator"===e?pn:fn)(t):(!0!==r&&(t=Gt(t)),S(t,function(t){var n=("mercator"===e?pn:fn)(t);t[0]=n[0],t[1]=n[1]})),t}function pn(t){var e=Math.PI/180,n=20037508.342789244,r=[6378137*(Math.abs(t[0])<=180?t[0]:t[0]-360*function(t){return t<0?-1:0<t?1:0}(t[0]))*e,6378137*Math.log(Math.tan(.25*Math.PI+.5*t[1]*e))];return r[0]>n&&(r[0]=n),r[0]<-n&&(r[0]=-n),r[1]>n&&(r[1]=n),r[1]<-n&&(r[1]=-n),r}function fn(t){var e=180/Math.PI;return[t[0]*e/6378137,(.5*Math.PI-2*Math.atan(Math.exp(-t[1]/6378137)))*e]}function gn(t,n,i){if(!I(i=i||{}))throw new Error("options is invalid");if(!t)throw new Error("pt is required");if(Array.isArray(t)?t=r(t):"Point"===t.type?t=e(t):H(t,"Point","point"),!n)throw new Error("line is required");Array.isArray(n)?n=a(n):"LineString"===n.type?n=e(n):H(n,"LineString","line");var o=1/0,s=t.geometry.coordinates;return G(n,function(t){var e=t.geometry.coordinates[0],n=t.geometry.coordinates[1],a=function(t,e,n,i){var o=i.mercator,s=(!0!==o?qt:dn)(e,t,i),a=m((!0!==o?ge:sn)(e,t)),u=m((!0!==o?ge:sn)(e,n)),c=Math.abs(a-u);if(90<c)return s;var h=(u+180)%360,l=m((!0!==o?ge:sn)(n,t)),p=Math.abs(l-h);return 180<p&&(p=Math.abs(p-360)),90<p?(!0!==o?qt:dn)(t,n,i):!0!==o?s*Math.sin(x(c)):function(t,e,n,i){var o=0;(180<=Math.abs(t[0])||180<=Math.abs(e[0])||180<=Math.abs(n[0]))&&(o=0<t[0]||0<e[0]||0<n[0]?-180:180);var s=r(n),h=hn(function(t,e,n){var r=t[0],i=t[1],c=e[0]-r,h=e[1]-i,l=((n[0]-r)*c+(n[1]-i)*h)/(c*c+h*h);return[r+l*c,i+l*h]}(cn([t[0]+o,t[1]]),cn([e[0]+o,e[1]]),cn([n[0]+o,n[1]])));return 0!==o&&(h[0]-=o),un(s,h,i)}(e,n,t,i)}(s,e,n,i);a<o&&(o=a)}),o}function dn(t,e,n){var r=n.units,i=0;180<=Math.abs(t[0])&&(i=0<t[0]?-180:180),180<=Math.abs(e[0])&&(i=0<e[0]?-180:180);function a(t){return t*t}var o=cn([t[0]+i,t[1]]),s=cn([e[0]+i,e[1]]),u=a(o[0]-s[0])+a(o[1]-s[1]);return E(Math.sqrt(u),"meters",r)}function yn(t){for(var n=function(t){return"FeatureCollection"!==t.type?"Feature"!==t.type?c([e(t)]):c([t]):t}(t),i=de(n),o=!1,s=0;!o&&s<n.features.length;){var u=n.features[s].geometry,h=!1;if("Point"===u.type)i.geometry.coordinates[0]===u.coordinates[0]&&i.geometry.coordinates[1]===u.coordinates[1]&&(o=!0);else if("MultiPoint"===u.type)for(var l=!1,a=0;!l&&a<u.coordinates.length;)i.geometry.coordinates[0]===u.coordinates[a][0]&&i.geometry.coordinates[1]===u.coordinates[a][1]&&(l=o=!0),a++;else if("LineString"===u.type)for(a=0;!h&&a<u.coordinates.length-1;)_n(i.geometry.coordinates[0],i.geometry.coordinates[1],u.coordinates[a][0],u.coordinates[a][1],u.coordinates[a+1][0],u.coordinates[a+1][1])&&(o=h=!0),a++;else if("MultiLineString"===u.type)for(var p=0;p<u.coordinates.length;){h=!1,a=0;for(var f=u.coordinates[p];!h&&a<f.length-1;)_n(i.geometry.coordinates[0],i.geometry.coordinates[1],f[a][0],f[a][1],f[a+1][0],f[a+1][1])&&(o=h=!0),a++;p++}else"Polygon"!==u.type&&"MultiPolygon"!==u.type||Pt(i,u)&&(o=!0);s++}if(o)return i;for(var g=c([]),s=0;s<n.features.length;s++)g.features=g.features.concat(me(n.features[s]).features);return r(Fe(i,g).geometry.coordinates)}function _n(t,e,n,r,i,o){return Math.sqrt((i-n)*(i-n)+(o-r)*(o-r))===Math.sqrt((t-n)*(t-n)+(e-r)*(e-r))+Math.sqrt((i-t)*(i-t)+(o-e)*(o-e))}function mn(t){return D(t,function(t,e){return t+function vn(t){var e,n=0;switch(t.type){case"Polygon":return xn(t.coordinates);case"MultiPolygon":for(e=0;e<t.coordinates.length;e++)n+=xn(t.coordinates[e]);return n;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(e=0;e<t.geometries.length;e++)n+=vn(t.geometries[e]);return n}}(e)},0)}function xn(t){var e=0;if(t&&0<t.length){e+=Math.abs(En(t[0]));for(var n=1;n<t.length;n++)e-=Math.abs(En(t[n]))}return e}function En(t){var e,n,r,i,o,s,a=0,u=t.length;if(2<u){for(s=0;s<u;s++)o=s===u-2?(r=u-2,i=u-1,0):s===u-1?(r=u-1,i=0,1):(i=(r=s)+1,s+2),e=t[r],n=t[i],a+=(wn(t[o][0])-wn(e[0]))*Math.sin(wn(n[1]));a=a*Ss*Ss/2}return a}function wn(t){return t*Math.PI/180}function bn(t,e){if(!I(e=e||{}))throw new Error("options is invalid");if(!t)throw new Error("geojson is required");return B(t,function(t,n){var r=n.geometry.coordinates;return t+qt(r[0],r[1],e)},0)}function In(t,e,n,r){if(!I(r=r||{}))throw new Error("options is invalid");var i,o=[];if("Feature"===t.type)i=t.geometry.coordinates;else{if("LineString"!==t.type)throw new Error("input must be a LineString Feature or Geometry");i=t.coordinates}for(var s,u,c,h=0,l=0;l<i.length&&!(h<=e&&l===i.length-1);l++){if(e<h&&0===o.length){if(!(s=e-h))return o.push(i[l]),a(o);u=ge(i[l],i[l-1])-180,c=pe(i[l],s,u,r),o.push(c.geometry.coordinates)}if(n<=h)return(s=n-h)?(u=ge(i[l],i[l-1])-180,c=pe(i[l],s,u,r),o.push(c.geometry.coordinates)):o.push(i[l]),a(o);if(e<=h&&o.push(i[l]),l===i.length-1)return a(o);h+=qt(i[l],i[l+1],r)}return a(i[i.length-1])}function Nn(t,e,n){var r=(n=n||{}).ignoreEndVertices;if(!I(n))throw new Error("invalid options");if(!t)throw new Error("pt is required");if(!e)throw new Error("line is required");for(var i=X(t),o=U(e),s=0;s<o.length-1;s++){var a=!1;if(r&&(0===s&&(a="start"),s===o.length-2&&(a="end"),0===s&&s+1===o.length-1&&(a="both")),function(t,e,n,r){var i=n[0],o=n[1],s=t[0],a=t[1],u=e[0],c=e[1],p=u-s,f=c-a;return(n[0]-s)*f-(n[1]-a)*p==0&&(r?"start"===r?Math.abs(p)>=Math.abs(f)?0<p?s<i&&i<=u:u<=i&&i<s:0<f?a<o&&o<=c:c<=o&&o<a:"end"===r?Math.abs(p)>=Math.abs(f)?0<p?s<=i&&i<u:u<i&&i<=s:0<f?a<=o&&o<c:c<o&&o<=a:"both"===r&&(Math.abs(p)>=Math.abs(f)?0<p?s<i&&i<u:u<i&&i<s:0<f?a<o&&o<c:c<o&&o<a):Math.abs(p)>=Math.abs(f)?0<p?s<=i&&i<=u:u<=i&&i<=s:0<f?a<=o&&o<=c:c<=o&&o<=a)}(o[s],o[s+1],i,a))return!0}return!1}function Cn(t,e){var n=K(t),r=K(e),i=J(t),o=J(e);switch(n){case"Point":switch(r){case"MultiPoint":return function(t,e){for(var r=!1,n=0;n<e.coordinates.length;n++)if(Mn(e.coordinates[n],t.coordinates)){r=!0;break}return r}(i,o);case"LineString":return Nn(i,o,{ignoreEndVertices:!0});case"Polygon":return Pt(i,o,{ignoreBoundary:!0});default:throw new Error("feature2 "+r+" geometry not supported")}case"MultiPoint":switch(r){case"MultiPoint":return function(t,e){for(var n=0;n<t.coordinates.length;n++){for(var r=!1,i=0;i<e.coordinates.length;i++)Mn(t.coordinates[n],e.coordinates[i])&&(r=!0);if(!r)return!1}return!0}(i,o);case"LineString":return function(t,e){for(var n=!1,r=0;r<t.coordinates.length;r++){if(!Nn(t.coordinates[r],e))return!1;n=n||Nn(t.coordinates[r],e,{ignoreEndVertices:!0})}return n}(i,o);case"Polygon":return function(t,e){for(var n=!0,r=0;r<t.coordinates.length;r++){var i=Pt(t.coordinates[1],e);if(!i){n=!1;break}i=Pt(t.coordinates[1],e,{ignoreBoundary:!0})}return n&&i}(i,o);default:throw new Error("feature2 "+r+" geometry not supported")}case"LineString":switch(r){case"LineString":return function(t,e){for(var n=0;n<t.coordinates.length;n++)if(!Nn(t.coordinates[n],e))return!1;return!0}(i,o);case"Polygon":return function(t,e){if(!Sn(j(e),j(t)))return!1;for(var i=!1,o=0;o<t.coordinates.length-1;o++){if(!Pt(t.coordinates[o],e))return!1;(i=i||Pt(t.coordinates[o],e,{ignoreBoundary:!0}))||(i=Pt(function(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2]}(t.coordinates[o],t.coordinates[o+1]),e,{ignoreBoundary:!0}))}return i}(i,o);default:throw new Error("feature2 "+r+" geometry not supported")}case"Polygon":if("Polygon"!==r)throw new Error("feature2 "+r+" geometry not supported");return function(t,e){var n=j(t);if(!Sn(j(e),n))return!1;for(var r=0;r<t.coordinates[0].length;r++)if(!Pt(t.coordinates[0][r],e))return!1;return!0}(i,o);default:throw new Error("feature1 "+n+" geometry not supported")}}function Sn(t,e){return!(t[0]>e[0]||t[2]<e[2]||t[1]>e[1]||t[3]<e[3])}function Mn(t,e){return t[0]===e[0]&&t[1]===e[1]}function Ln(t,e,n){if(!I(n=n||{}))throw new Error("options is invalid");var i=n.mask,o=n.properties,s=[];if(null==e)throw new Error("cellSide is required");if(!b(e))throw new Error("cellSide is invalid");if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be array");if(4!==t.length)throw new Error("bbox must contain 4 numbers");if(i&&-1===["Polygon","MultiPolygon"].indexOf(K(i)))throw new Error("options.mask must be a (Multi)Polygon");for(var a=t[0],u=t[1],h=t[2],l=t[3],p=e/qt([a,u],[h,u],n)*(h-a),f=e/qt([a,u],[a,l],n)*(l-u),g=h-a,d=l-u,y=Math.floor(g/p),_=(d-Math.floor(d/f)*f)/2,m=a+(g-y*p)/2;m<=h;){for(var v=u+_;v<=l;){var x=r([m,v],o);i&&!Cn(x,i)||s.push(x),v+=f}m+=p}return c(s)}function Pn(t,e){if(!I(e=e||{}))throw new Error("options is invalid");var n=e.precision,r=e.coordinates,i=e.mutate,n=null==n||isNaN(n)?6:n,r=null==r||isNaN(r)?3:r;if(!t)throw new Error("<geojson> is required");if("number"!=typeof n)throw new Error("<precision> must be a number");if("number"!=typeof r)throw new Error("<coordinates> must be a number");!1!==i&&void 0!==i||(t=JSON.parse(JSON.stringify(t)));var o=Math.pow(10,n);return S(t,function(t){!function(t,e,n){t.length>n&&t.splice(n,t.length);for(var r=0;r<t.length;r++)t[r]=Math.round(t[r]*e)/e}(t,o,r)}),t}function On(t,e){if(t&&e&&t.length===e.length){for(var n=0,r=t.length;n<r;n++)if(t[n]instanceof Array&&e[n]instanceof Array){if(!On(t[n],e[n]))return}else if(t[n]!==e[n])return;return 1}}function Rn(t,e){if(void 0===e&&(e=!0),3!=t.length)throw new Error("This function requires an array of three points [x,y]");return 0<=(t[1][0]-t[0][0])*(t[2][1]-t[0][1])-(t[1][1]-t[0][1])*(t[2][0]-t[0][0])==e}function Tn(t,e){if(t&&e&&t.length==e.length){for(var n=0,r=t.length;n<r;n++)if(t[n]instanceof Array&&e[n]instanceof Array){if(!Tn(t[n],e[n]))return}else if(t[n]!=e[n])return;return 1}}function An(t,e){var n=[],r=Qe();return F(e,function(e){var i,o;n.forEach(function(t,e){t.id=e}),n.length?(i=r.search(e)).features.length&&(o=Fn(e,i),n=n.filter(function(t){return t.id!==o.id}),r.remove(o),O(Dn(o,e),function(t){n.push(t),r.insert(t)})):((n=Dn(t,e).features).forEach(function(t){t.bbox||(t.bbox=le(j(t)))}),r.load(c(n)))}),c(n)}function Dn(t,e){var n=[],r=U(t)[0],i=U(t)[t.geometry.coordinates.length-1];if(qn(r,X(e))||qn(i,X(e)))return c([t]);var o=Qe(),s=en(t);o.load(s);var u=o.search(e);if(!u.features.length)return c([t]);var h=Fn(e,u),l=R(s,function(t,r,i){var o=U(r)[1],s=X(e);return i===h.id?(t.push(s),n.push(a(t)),qn(s,o)?[s]:[s,o]):(t.push(o),t)},[r]);return 1<l.length&&n.push(a(l)),c(n)}function Fn(t,e){if(!e.features.length)throw new Error("lines must contain features");if(1===e.features.length)return e.features[0];var n,r=1/0;return O(e,function(e){var i=on(e,t).properties.dist;i<r&&(n=e,r=i)}),n}function qn(t,e){return t[0]===e[0]&&t[1]===e[1]}function Gn(t,e,n,r,i){if(!I(i=i||{}))throw new Error("options is invalid");var o=i.steps,s=i.units;if(!t)throw new Error("center is required");if(!e)throw new Error("radius is required");if(null==n)throw new Error("bearing1 is required");if(null==r)throw new Error("bearing2 is required");if("object"!=typeof i)throw new Error("options must be an object");o=o||64;var u=Bn(n),c=Bn(r),h=t.properties;if(u===c)return a(fe(t,e,i).geometry.coordinates[0],h);for(var l=u,p=u<c?c:c+360,f=l,g=[],d=0;f<p;)g.push(pe(t,e,f,s).geometry.coordinates),f=l+360*++d/o;return p<f&&g.push(pe(t,e,p,s).geometry.coordinates),a(g,h)}function Bn(t){var e=t%360;return e<0&&(e+=360),e}function kn(t,e){if(!I(e=e||{}))throw new Error("options is invalid");var n=e.properties,r=K(t),i=U(t),n=n||t.properties||{};if(!i.length)throw new Error("polygon must contain coordinates");switch(r){case"Polygon":return zn(i,n);case"MultiPolygon":var o=[];return i.forEach(function(t){o.push(zn(t,n))}),c(o);default:throw new Error("geom "+r+" not supported")}}function zn(t,e){return 1<t.length?h(t,e):a(t[0],e)}function jn(t,e){if(!I(e=e||{}))throw new Error("options is invalid");var n=e.properties,r=e.autoComplete,i=e.orderCoords;if(!t)throw new Error("lines is required");switch(r=void 0===r||r,i=void 0===i||i,K(t)){case"FeatureCollection":case"GeometryCollection":var o=[];return(t.features?t.features:t.geometries).forEach(function(t){o.push(U(Xn(t,{},r,i)))}),p(o,n)}return Xn(t,n,r,i)}function Xn(t,e,n,r){e=e||t.properties||{};var i=U(t),s=K(t);if(!i.length)throw new Error("line must contain coordinates");switch(s){case"LineString":return n&&(i=Un(i)),o([i],e);case"MultiLineString":var u=[],c=0;return i.forEach(function(t){var e;n&&(t=Un(t)),r?(e=function(t){var e=t[0],n=t[1],r=t[2],i=t[3];return Math.abs(e-r)*Math.abs(n-i)}(j(a(t))),c<e?(u.unshift(t),c=e):u.push(t)):u.push(t)}),o(u,e);default:throw new Error("geometry type "+s+" is not supported")}}function Un(t){var e=t[0],n=e[0],r=e[1],i=t[t.length-1],o=i[0],s=i[1];return n===o&&r===s||t.push(e),t}function Yn(t,e,n){var r,i,o,s,a,u=t.length,c=Hn(t[0],e),h=[];for(n=n||[],r=1;r<u;r++){for(i=t[r-1],s=a=Hn(o=t[r],e);;){if(!(c|s)){h.push(i),s!==a?(h.push(o),r<u-1&&(n.push(h),h=[])):r===u-1&&h.push(o);break}if(c&s)break;c?c=Hn(i=Vn(i,o,c,e),e):s=Hn(o=Vn(i,o,s,e),e)}c=a}return h.length&&n.push(h),n}function Vn(t,e,n,r){return 8&n?[t[0]+(e[0]-t[0])*(r[3]-t[1])/(e[1]-t[1]),r[3]]:4&n?[t[0]+(e[0]-t[0])*(r[1]-t[1])/(e[1]-t[1]),r[1]]:2&n?[r[2],t[1]+(e[1]-t[1])*(r[2]-t[0])/(e[0]-t[0])]:1&n?[r[0],t[1]+(e[1]-t[1])*(r[0]-t[0])/(e[0]-t[0])]:null}function Hn(t,e){var n=0;return t[0]<e[0]?n|=1:t[0]>e[2]&&(n|=2),t[1]<e[1]?n|=4:t[1]>e[3]&&(n|=8),n}function Wn(t,e){for(var n=[],r=0;r<t.length;r++){var i=Gs.polygon(t[r],e);0<i.length&&(i[0][0]===i[i.length-1][0]&&i[0][1]===i[i.length-1][1]||i.push(i[0]),4<=i.length&&n.push(i))}return n}function Jn(t){return"[object Arguments]"===Object.prototype.toString.call(t)}function Zn(t,e,n){return n=n||{},t===e||(t instanceof Date&&e instanceof Date?t.getTime()===e.getTime():!t||!e||"object"!=typeof t&&"object"!=typeof e?(n.strict,t===e):function(t,e,n){var r,i;if(Kn(t)||Kn(e))return!1;if(t.prototype!==e.prototype)return!1;if(Jn(t))return!!Jn(e)&&Zn(t=Bs.call(t),e=Bs.call(e),n);if(Qn(t)){if(!Qn(e))return!1;if(t.length!==e.length)return!1;for(r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}try{var o=Object.keys(t),s=Object.keys(e)}catch(t){return!1}if(o.length!==s.length)return!1;for(o.sort(),s.sort(),r=o.length-1;0<=r;r--)if(o[r]!==s[r])return!1;for(r=o.length-1;0<=r;r--)if(!Zn(t[i=o[r]],e[i],n))return!1;return typeof t==typeof e}(t,e,n))}function Kn(t){return null==t}function Qn(t){return t&&"object"==typeof t&&"number"==typeof t.length&&"function"==typeof t.copy&&"function"==typeof t.slice&&!(0<t.length&&"number"!=typeof t[0])}function $n(t,e,n){if(!I(n=n||{}))throw new Error("options is invalid");var s,r=n.tolerance||0,i=[],o=Qe();return o.load(en(t)),G(e,function(t){var e=!1;O(o.search(t),function(n){var i,o;!1===e&&(Zn(i=U(t).sort(),o=U(n).sort())||(0===r?Nn(i[0],n)&&Nn(i[1],n):on(n,i[0]).properties.dist<=r&&on(n,i[1]).properties.dist<=r)?(e=!0,s=s?tr(s,t):t):(0===r?Nn(o[0],t)&&Nn(o[1],t):on(t,o[0]).properties.dist<=r&&on(t,o[1]).properties.dist<=r)&&(s=s?tr(s,n):n))}),!1===e&&s&&(i.push(s),s=void 0)}),s&&i.push(s),c(i)}function tr(t,e){var n=U(e),r=U(t),i=r[0],o=r[r.length-1],s=t.geometry.coordinates;return Zn(n[0],i)?s.unshift(n[1]):Zn(n[0],o)?s.push(n[1]):Zn(n[1],i)?s.unshift(n[0]):Zn(n[1],o)&&s.push(n[0]),t}function er(t){var e=t%360;return e<0&&(e+=360),e}function nr(t,e,n,i){if(!I(i=i||{}))throw new Error("options is invalid");var o=i.units,s=i.properties;if(!t)throw new Error("origin is required");if(null==e)throw new Error("distance is required");if(null==n)throw new Error("bearing is required");if(!(0<=e))throw new Error("distance must be greater than 0");var a=E(e,o,"meters"),u=X(t),c=function(t,e,n,r){var i=e/(r=void 0===r?Fo:Number(r)),o=t[0]*Math.PI/180,s=x(t[1]),a=x(n),u=i*Math.cos(a),c=s+u;Math.abs(c)>Math.PI/2&&(c=0<c?Math.PI-c:-Math.PI-c);var h=Math.log(Math.tan(c/2+Math.PI/4)/Math.tan(s/2+Math.PI/4)),l=1e-11<Math.abs(h)?u/h:Math.cos(s);return[(180*(o+i*Math.sin(a)/l)/Math.PI+540)%360-180,180*c/Math.PI]}(u,a,n);return c[0]+=180<c[0]-u[0]?-360:180<u[0]-c[0]?360:0,r(c,s)}function rr(t,e,n,r,i,o){for(var s=0;s<t.length;s++){var a=t[s],u=t[s+1];s===t.length-1&&(u=t[0]),r=ir(a,u,e),n<=0&&0<r?function(t){return ir(t,a,i)<0}(e)||(i=a):0<n&&r<=0&&(function(t){return 0<ir(t,a,o)}(e)||(o=a)),n=r}return[i,o]}function ir(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(n[0]-t[0])*(e[1]-t[1])}function or(t){if(!t)throw new Error("line is required");var e=t.geometry?t.geometry.type:t.type;if(!Array.isArray(t)&&"LineString"!==e)throw new Error("geometry must be a LineString");for(var n,r,i=U(t),o=0,s=1;s<i.length;)n=r||i[0],o+=((r=i[s])[0]-n[0])*(r[1]+n[1]),s++;return 0<o}function sr(t,e){switch("Feature"===t.type?t.geometry.type:t.type){case"GeometryCollection":return A(t,function(t){sr(t,e)}),t;case"LineString":return ar(U(t),e),t;case"Polygon":return ur(U(t),e),t;case"MultiLineString":return U(t).forEach(function(t){ar(t,e)}),t;case"MultiPolygon":return U(t).forEach(function(t){ur(t,e)}),t;case"Point":case"MultiPoint":return t}}function ar(t,e){or(t)===e&&t.reverse()}function ur(t,e){or(t[0])!==e&&t[0].reverse();for(var n=1;n<t.length;n++)or(t[n])===e&&t[n].reverse()}function lr(t,e,n){return(t-e)/(n-e)}function pr(t){return-1<t.constructor.toString().indexOf("Array")}function fr(t,e,n){if(!I(n=n||{}))throw new Error("options is invalid");var r=n.pivot,i=n.mutate;if(!t)throw new Error("geojson is required");if(null==e||isNaN(e))throw new Error("angle is required");return 0===e||(r=r||ye(t),!1!==i&&void 0!==i||(t=Gt(t)),S(t,function(t){var n=sn(r,t)+e,i=un(r,t),o=U(nr(r,i,n));t[0]=o[0],t[1]=o[1]})),t}function gr(t,e,n){if(!I(n=n||{}))throw new Error("options is invalid");var r=n.origin,i=n.mutate;if(!t)throw new Error("geojson required");if("number"!=typeof e||0===e)throw new Error("invalid factor");var o=Array.isArray(r)||"object"==typeof r;return!0!==i&&(t=Gt(t)),"FeatureCollection"!==t.type||o?dr(t,e,r):(O(t,function(n,i){t.features[i]=dr(n,e,r)}),t)}function dr(t,e,n){var i="Point"===K(t);return n=function(t,e){if(null!=e||(e="centroid"),Array.isArray(e)||"object"==typeof e)return X(e);var n=t.bbox?t.bbox:j(t),i=n[0],o=n[1],s=n[2],a=n[3];switch(e){case"sw":case"southwest":case"westsouth":case"bottomleft":return r([i,o]);case"se":case"southeast":case"eastsouth":case"bottomright":return r([s,o]);case"nw":case"northwest":case"westnorth":case"topleft":return r([i,a]);case"ne":case"northeast":case"eastnorth":case"topright":return r([s,a]);case"center":return de(t);case void 0:case null:case"centroid":return ye(t);default:throw new Error("invalid origin")}}(t,n),1===e||i||S(t,function(t){var r=un(n,t),i=sn(n,t),o=U(nr(n,r*e,i));t[0]=o[0],t[1]=o[1],3===t.length&&(t[2]*=e)}),t}function yr(t){var e=t[0],n=t[1];return[n[0]-e[0],n[1]-e[1]]}function _r(t,e){return t[0]*e[1]-e[0]*t[1]}function vr(t,e,n){var r=[],i=_(e,n),o=U(t),s=[];return o.forEach(function(t,e){var n,a,u;e!==o.length-1&&(n=function(t,e,n){var r=Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1])),i=t[0]+n*(e[1]-t[1])/r,o=e[0]+n*(e[1]-t[1])/r;return[[i,t[1]+n*(t[0]-e[0])/r],[o,e[1]+n*(t[0]-e[0])/r]]}(t,o[e+1],i),r.push(n),0<e&&(!1!==(u=function(t,e){return!function(t,e){return 0===_r(yr(t),yr(e))}(t,e)&&function(t,e){var n=t[0],r=yr(t),i=e[0],o=yr(e),s=_r(r,o);return function(t,e){return[t[0]+e[0],t[1]+e[1]]}(n,function(t){return[t*r[0],t*r[1]]}(_r([i[0]-n[0],i[1]-n[1]],o)/s))}(t,e)}(n,a=r[e-1]))&&(a[1]=u,n[0]=u),s.push(a[0]),e===o.length-2&&(s.push(n[0]),s.push(n[1]))),2===o.length&&(s.push(n[0]),s.push(n[1])))}),a(s,t.properties)}function xr(t,e,n){var r=e[0]-t[0],i=e[1]-t[1],o=n[0]-e[0],s=n[1]-e[1];return Math.sign(r*s-o*i)}function Er(t,e){return e.geometry.coordinates[0].every(function(e){return Pt(r(e),t)})}function wr(t,e){for(var n=0;n<t.coordinates.length-1;n++)if(function(t,e,n){var r=n[0]-t[0],i=n[1]-t[1],o=e[0]-t[0],s=e[1]-t[1];return r*s-i*o==0&&(Math.abs(o)>=Math.abs(s)?0<o?t[0]<=n[0]&&n[0]<=e[0]:e[0]<=n[0]&&n[0]<=t[0]:0<s?t[1]<=n[1]&&n[1]<=e[1]:e[1]<=n[1]&&n[1]<=t[1])}(t.coordinates[n],t.coordinates[n+1],e.coordinates))return 1}function br(t,e){return 0<nn(e,kn(t)).features.length}function Ir(t,e){return!(t[0]>e[0]||t[2]<e[2]||t[1]>e[1]||t[3]<e[3])}function Nr(t,e){return t[0]===e[0]&&t[1]===e[1]}function Cr(t,e){for(var n=!1,r=!1,i=t.coordinates.length,o=0;o<i&&!n&&!r;){for(var s=0;s<e.coordinates.length-1;s++){var a=!0;0!==s&&s!==e.coordinates.length-2||(a=!1),Lr(e.coordinates[s],e.coordinates[s+1],t.coordinates[o],a)?n=!0:r=!0}o++}return n&&r}function Sr(t,e){return 0<nn(t,kn(e)).features.length}function Mr(t,e){for(var n=!1,i=!1,o=t.coordinates[0].length,s=0;s<o&&n&&i;)Pt(r(t.coordinates[0][s]),e)?n=!0:i=!0,s++;return i&&i}function Lr(t,e,n,r){var i=n[0]-t[0],o=n[1]-t[1],s=e[0]-t[0],a=e[1]-t[1];return 0==i*a-o*s&&(r?Math.abs(s)>=Math.abs(a)?0<s?t[0]<=n[0]&&n[0]<=e[0]:e[0]<=n[0]&&n[0]<=t[0]:0<a?t[1]<=n[1]&&n[1]<=e[1]:e[1]<=n[1]&&n[1]<=t[1]:Math.abs(s)>=Math.abs(a)?0<s?t[0]<n[0]&&n[0]<e[0]:e[0]<n[0]&&n[0]<t[0]:0<a?t[1]<n[1]&&n[1]<e[1]:e[1]<n[1]&&n[1]<t[1])}function Pr(t){return t.coordinates.map(function(e){return{type:t.type.replace("Multi",""),coordinates:e}})}function Or(t,e){return t.hasOwnProperty("coordinates")?t.coordinates.length===e.coordinates.length:t.length===e.length}function Rr(t,e){return ka(t,e,{strict:!0})}function Tr(t,e){if(!t)throw new Error("feature1 is required");if(!e)throw new Error("feature2 is required");var n=K(t);if(n!==K(e))throw new Error("features must be of the same type");if("Point"===n)throw new Error("Point geometry not supported");if(new ja({precision:6}).compare(t,e))return!1;var r=0;switch(n){case"MultiPoint":var i=T(t),o=T(e);i.forEach(function(t){o.forEach(function(e){t[0]===e[0]&&t[1]===e[1]&&r++})});break;case"LineString":case"MultiLineString":G(t,function(t){G(e,function(e){$n(t,e).features.length&&r++})});break;case"Polygon":case"MultiPolygon":G(t,function(t){G(e,function(e){nn(t,e).features.length&&r++})})}return 0<r}function Ar(t,e,n){n=n||[];for(var r=0;r<t;r++)n[r]=e;return n}function Dr(t,e){if(t.geometry&&t.geometry.type)return t.geometry.type;if(t.type)return t.type;throw new Error("Invalid GeoJSON object for "+e)}function Fr(t){for(var e=t,n=[];e.parent;)n.unshift(e),e=e.parent;return n}function qr(t,e){e=e||{},this.nodes=[],this.diagonal=!!e.diagonal,this.grid=[];for(var n=0;n<t.length;n++){this.grid[n]=[];for(var r=0,i=t[n];r<i.length;r++){var o=new Gr(n,r,i[r]);this.grid[n][r]=o,this.nodes.push(o)}}this.init()}function Gr(t,e,n){this.x=t,this.y=e,this.weight=n}function Br(t){this.content=[],this.scoreFunction=t}function kr(t){return t[0]}function zr(t){return t[1]}function jr(){this._=null}function Xr(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function Ur(t,e){var n=e,r=e.R,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function Yr(t,e){var n=e,r=e.L,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function Vr(t){for(;t.L;)t=t.L;return t}function Hr(t,e,n,r){var i=[null,null],o=uu.push(i)-1;return i.left=t,i.right=e,n&&Jr(i,t,e,n),r&&Jr(i,e,t,r),su[t.index].halfedges.push(o),su[e.index].halfedges.push(o),i}function Wr(t,e,n){var r=[e,n];return r.left=t,r}function Jr(t,e,n,r){t[0]||t[1]?t.left===n?t[1]=r:t[0]=r:(t[0]=r,t.left=e,t.right=n)}function $r(t,e){return e[+(e.left!==t.site)]}function ei(t){var e=t.P,n=t.N;if(e&&n){var r=e.site,i=t.site,o=n.site;if(r!==o){var s=i[0],a=i[1],u=r[0]-s,c=r[1]-a,h=o[0]-s,l=o[1]-a,p=2*(u*l-c*h);if(!(-pu<=p)){var f=u*u+c*c,g=h*h+l*l,d=(l*f-c*g)/p,y=(u*g-h*f)/p,_=cu.pop()||new function(){Xr(this),this.x=this.y=this.arc=this.site=this.cy=null};_.arc=t,_.site=i,_.x=d+s,_.y=(_.cy=y+a)+Math.sqrt(d*d+y*y),t.circle=_;for(var m=null,v=au._;v;)if(_.y<v.y||_.y===v.y&&_.x<=v.x){if(!v.L){m=v.P;break}v=v.L}else{if(!v.R){m=v;break}v=v.R}au.insert(m,_),m||(iu=_)}}}}function ni(t){var e=t.circle;e&&(e.P||(iu=e.N),au.remove(e),cu.push(e),Xr(e),t.circle=null)}function ri(t){var e=hu.pop()||new function(){Xr(this),this.edge=this.site=this.circle=null};return e.site=t,e}function ii(t){ni(t),ou.remove(t),hu.push(t),Xr(t)}function ai(t,e){var n=t.site,r=n[0],i=n[1],o=i-e;if(!o)return r;var s=t.P;if(!s)return-1/0;var a=(n=s.site)[0],u=n[1],c=u-e;if(!c)return a;var h=a-r,l=1/o-1/c,p=h/c;return l?(-p+Math.sqrt(p*p-2*l*(h*h/(-2*c)-u+c/2+i-o/2)))/l+r:(r+a)/2}function ci(t,e){return e[1]-t[1]||e[0]-t[0]}function hi(t,e){var n,r,i,s,a,u,c,o=t.sort(ci).pop();for(uu=[],su=new Array(t.length),ou=new jr,au=new jr;;)if(i=iu,o&&(!i||o[1]<i.y||o[1]===i.y&&o[0]<i.x))o[0]===n&&o[1]===r||(function(t){for(var e,n,r,i,o=t[0],s=t[1],a=ou._;a;)if((r=ai(a,s)-o)>lu)a=a.L;else{if(!((i=o-function(t,e){var n=t.N;if(n)return ai(n,e);var r=t.site;return r[1]===e?r[0]:1/0}(a,s))>lu)){-lu<r?(e=a.P,n=a):-lu<i?n=(e=a).N:e=n=a;break}if(!a.R){e=a;break}a=a.R}!function(t){su[t.index]={site:t,halfedges:[]}}(t);var c,h,l,p,f,g,d,y,_,m,v,x,u=ri(t);if(ou.insert(e,u),e||n){if(e===n)return ni(e),n=ri(e.site),ou.insert(u,n),u.edge=n.edge=Hr(e.site,u.site),ei(e),ei(n);n?(ni(e),ni(n),h=(c=e.site)[0],l=c[1],p=t[0]-h,f=t[1]-l,d=(g=n.site)[0]-h,x=[((y=g[1]-l)*(m=p*p+f*f)-f*(v=d*d+y*y))/(_=2*(p*y-f*d))+h,(p*v-d*m)/_+l],Jr(n.edge,c,g,x),u.edge=Hr(c,t,null,x),n.edge=Hr(t,g,null,x),ei(e),ei(n)):u.edge=Hr(e.site,u.site)}}(o),n=o[0],r=o[1]),o=t.pop();else{if(!i)break;!function(t){var e=t.circle,n=e.x,r=e.cy,i=[n,r],o=t.P,s=t.N,a=[t];ii(t);for(var u=o;u.circle&&Math.abs(n-u.circle.x)<lu&&Math.abs(r-u.circle.cy)<lu;)o=u.P,a.unshift(u),ii(u),u=o;a.unshift(u),ni(u);for(var c=s;c.circle&&Math.abs(n-c.circle.x)<lu&&Math.abs(r-c.circle.cy)<lu;)s=c.N,a.push(c),ii(c),c=s;a.push(c),ni(c);for(var l=a.length,h=1;h<l;++h)c=a[h],u=a[h-1],Jr(c.edge,u.site,c.site,i);u=a[0],(c=a[l-1]).edge=Hr(u.site,c.site,null,i),ei(u),ei(c)}(i.arc)}(function(){for(var t,e,r,i=0,o=su.length;i<o;++i)if((t=su[i])&&(r=(e=t.halfedges).length)){for(var s=new Array(r),a=new Array(r),n=0;n<r;++n)s[n]=n,a[n]=function(t,e){var n=t.site,r=e.left,i=e.right;return n===i&&(i=r,r=n),i?Math.atan2(i[1]-r[1],i[0]-r[0]):(i=n===r?(r=e[1],e[0]):(r=e[0],e[1]),Math.atan2(r[0]-i[0],i[1]-r[1]))}(t,uu[e[n]]);for(s.sort(function(t,e){return a[e]-a[t]}),n=0;n<r;++n)a[n]=e[s[n]];for(n=0;n<r;++n)e[n]=a[n]}})(),e&&(function(t,e,n,r){for(var i,o=uu.length;o--;)(function(t,e,n,r,i){var o=t[1];if(o)return 1;var s,a,u=t[0],c=t.left,h=t.right,l=c[0],p=c[1],f=h[0],g=h[1],d=(l+f)/2,y=(p+g)/2;if(g===p){if(d<e||r<=d)return;if(f<l){if(u){if(u[1]>=i)return}else u=[d,n];o=[d,i]}else{if(u){if(u[1]<n)return}else u=[d,i];o=[d,n]}}else if(a=y-(s=(l-f)/(g-p))*d,s<-1||1<s)if(f<l){if(u){if(u[1]>=i)return}else u=[(n-a)/s,n];o=[(i-a)/s,i]}else{if(u){if(u[1]<n)return}else u=[(i-a)/s,i];o=[(n-a)/s,n]}else if(p<g){if(u){if(u[0]>=r)return}else u=[e,s*e+a];o=[r,s*r+a]}else{if(u){if(u[0]<e)return}else u=[r,s*r+a];o=[e,s*e+a]}return t[0]=u,t[1]=o,1})(i=uu[o],t,e,n,r)&&function(t,e,n,r,i){var s=t[0],a=t[1],u=s[0],c=s[1],h=0,l=1,p=a[0]-u,f=a[1]-c,o=e-u;if(p||!(0<o)){if(o/=p,p<0){if(o<h)return;o<l&&(l=o)}else if(0<p){if(l<o)return;h<o&&(h=o)}if(o=r-u,p||!(o<0)){if(o/=p,p<0){if(l<o)return;h<o&&(h=o)}else if(0<p){if(o<h)return;o<l&&(l=o)}if(o=n-c,f||!(0<o)){if(o/=f,f<0){if(o<h)return;o<l&&(l=o)}else if(0<f){if(l<o)return;h<o&&(h=o)}if(o=i-c,f||!(o<0)){if(o/=f,f<0){if(l<o)return;h<o&&(h=o)}else if(0<f){if(o<h)return;o<l&&(l=o)}return!(0<h||l<1)||(0<h&&(t[0]=[u+h*p,c+h*f]),l<1&&(t[1]=[u+l*p,c+l*f]),1)}}}}}(i,t,e,n,r)&&(Math.abs(i[0][0]-i[1][0])>lu||Math.abs(i[0][1]-i[1][1])>lu)||delete uu[o]}(s=+e[0][0],a=+e[0][1],u=+e[1][0],c=+e[1][1]),function(t,e,n,r){var o,s,a,u,c,h,l,p,f,g,d,y=su.length,_=!0;for(i=0;i<y;++i)if(o=su[i]){for(s=o.site,a=(u=o.halfedges).length;a--;)uu[u[a]]||u.splice(a,1);for(a=0,c=u.length;a<c;)g=(f=function(t,e){return e[+(e.left===t.site)]}(o,uu[u[a]]))[0],d=f[1],l=(h=$r(o,uu[u[++a%c]]))[0],p=h[1],(Math.abs(g-l)>lu||Math.abs(d-p)>lu)&&(u.splice(a,0,uu.push(Wr(s,f,Math.abs(g-t)<lu&&lu<r-d?[t,Math.abs(l-t)<lu?p:r]:Math.abs(d-r)<lu&&lu<n-g?[Math.abs(p-r)<lu?l:n,r]:Math.abs(g-n)<lu&&lu<d-e?[n,Math.abs(l-n)<lu?p:e]:Math.abs(d-e)<lu&&lu<g-t?[Math.abs(p-e)<lu?l:t,e]:null))-1),++c);c&&(_=!1)}if(_){for(var m,v,x,w,b,I,N,E=1/0,i=0,_=null;i<y;++i)(o=su[i])&&(x=(m=(s=o.site)[0]-t)*m+(v=s[1]-e)*v)<E&&(E=x,_=o);_&&(w=[t,e],b=[t,r],I=[n,r],N=[n,e],_.halfedges.push(uu.push(Wr(s=_.site,w,b))-1,uu.push(Wr(s,b,I))-1,uu.push(Wr(s,I,N))-1,uu.push(Wr(s,N,w))-1))}for(i=0;i<y;++i)(o=su[i])&&(o.halfedges.length||delete su[i])}(s,a,u,c)),this.edges=uu,this.cells=su,ou=au=uu=su=null}function li(t){return(t=t.slice()).push(t[0]),o([t])}function pi(t,e,n,r){var i=(r=r||{}).steps||64,s=r.units||"kilometers",a=r.angle||0,u=r.pivot||t,c=r.properties||t.properties||{};if(!t)throw new Error("center is required");if(!e)throw new Error("xSemiAxis is required");if(!n)throw new Error("ySemiAxis is required");if(!I(r))throw new Error("options must be an object");if(!b(i))throw new Error("steps must be a number");if(!b(a))throw new Error("angle must be a number");var l,h=X(t);"degrees"===s?l=x(a):(e=nr(t,e,90,{units:s}),n=nr(t,n,0,{units:s}),e=X(e)[0]-h[0],n=X(n)[1]-h[1]);for(var p=[],f=0;f<i;f+=1){var _,m,g=-360*f/i,d=e*n/Math.sqrt(Math.pow(n,2)+Math.pow(e,2)*Math.pow(fi(g),2)),y=e*n/Math.sqrt(Math.pow(e,2)+Math.pow(n,2)/Math.pow(fi(g),2));g<-90&&-270<=g&&(d=-d),g<-180&&-360<=g&&(y=-y),"degrees"===s&&(_=d*Math.cos(l)+y*Math.sin(l),m=y*Math.cos(l)-d*Math.sin(l),d=_,y=m),p.push([d+h[0],y+h[1]])}return p.push(p[0]),"degrees"===s?o([p],c):fr(o([p],c),a,{pivot:u})}function fi(t){var e=t*Math.PI/180;return Math.tan(e)}function gi(t,e){if(!I(e=e||{}))throw new Error("options is invalid");var n=e.properties,i=e.weight;if(!t)throw new Error("geojson is required");var o=0,s=0,a=0;return A(t,function(t,e,n){var r=n[i];if(!b(r=null==r?1:r))throw new Error("weight value must be a number for feature index "+e);0<(r=Number(r))&&S(t,function(t){o+=t[0]*r,s+=t[1]*r,a+=r})}),r([o/a,s/a],n)}function di(t,e,n,i){var o=n.properties.tolerance||.001,s=0,a=0,u=0,c=0;if(O(n,function(e){var i,o,n=e.properties.weight,r=null==n?1:n;if(!b(r=Number(r)))throw new Error("weight value must be a number");0<r&&(c+=1,0===(i=r*qt(e,t))&&(i=1),o=r/i,s+=e.geometry.coordinates[0]*o,a+=e.geometry.coordinates[1]*o,u+=o)}),c<1)throw new Error("no features to measure");var h=s/u,l=a/u;return 1===c||0===i||Math.abs(h-e[0])<o&&Math.abs(l-e[1])<o?r([h,l],{medianCandidates:n.properties.medianCandidates}):(n.properties.medianCandidates.push([h,l]),di([h,l],t,n,i-1))}function yi(t,e){return{x:t[0]-e[0],y:t[1]-e[1]}}function _i(t){if(I(t)&&(t=t.bbox),t&&!Array.isArray(t))throw new Error("bbox is invalid");return t?function(t){return[Math.random()*(t[2]-t[0])+t[0],Math.random()*(t[3]-t[1])+t[1]]}(t):[360*Ei(),180*Ei()]}function mi(t,e){if(!I(e=e||{}))throw new Error("options is invalid");var n=e.bbox;null!=t||(t=1);for(var i=[],o=0;o<t;o++)i.push(r(_i(n)));return c(i)}function vi(t,e){if(!I(e=e||{}))throw new Error("options is invalid");var n=e.bbox,r=e.num_vertices,i=e.max_radial_length;null!=t||(t=1),b(r)||(r=10),b(i)||(i=10);for(var s=[],a=0;a<t;a++){var u=[],h=Array.apply(null,new Array(r+1)).map(Math.random);h.forEach(function(t,e,n){n[e]=0<e?t+n[e-1]:t}),h.forEach(function(t){t=2*t*Math.PI/h[h.length-1];var e=Math.random();u.push([e*i*Math.sin(t),e*i*Math.cos(t)])}),u[u.length-1]=u[0],u=u.map(function(t){return function(e){return[e[0]+t[0],e[1]+t[1]]}}(_i(n))),s.push(o([u]))}return c(s)}function xi(t,e){if(!I(e=e||{}))throw new Error("options is invalid");var n=e.bbox,r=e.num_vertices,i=e.max_length,o=e.max_rotation;null!=t||(t=1),(!b(r)||r<2)&&(r=10),b(i)||(i=1e-4),b(o)||(o=Math.PI/8);for(var s=[],u=0;u<t;u++){for(var h=[_i(n)],l=0;l<r-1;l++){var p=(0===l?2*Math.random()*Math.PI:Math.tan((h[l][1]-h[l-1][1])/(h[l][0]-h[l-1][0])))+(Math.random()-.5)*o*2,f=Math.random()*i;h.push([h[l][0]+f*Math.cos(p),h[l][1]+f*Math.sin(p)])}s.push(a(h))}return c(s)}function Ei(){return Math.random()-.5}function wi(t,e){if(!t)throw new Error("geojson is required");if("FeatureCollection"!==t.type)throw new Error("geojson must be a FeatureCollection");if(null==e)throw new Error("filter is required");var n=[];return O(t,function(t){Ci(t.properties,e)&&n.push(t)}),c(n)}function bi(t,e,n){if(!t)throw new Error("geojson is required");if("FeatureCollection"!==t.type)throw new Error("geojson must be a FeatureCollection");if(null==e)throw new Error("property is required");for(var r=Ni(t,e),i=Object.keys(r),o=0;o<i.length;o++){for(var s=i[o],a=r[s],u=[],h=0;h<a.length;h++)u.push(t.features[a[h]]);n(c(u),s,o)}}function Ii(t,e,n,r){var i=r;return bi(t,e,function(t,e,o){i=0===o&&void 0===r?t:n(i,t,e,o)}),i}function Ni(t,e){var n={};return O(t,function(t,r){var o,i=t.properties||{};i.hasOwnProperty(e)&&(o=i[e],n.hasOwnProperty(o)?n[o].push(r):n[o]=[r])}),n}function Ci(t,e){if(void 0===t)return!1;var n=typeof e;if("number"==n||"string"==n)return t.hasOwnProperty(e);if(Array.isArray(e)){for(var r=0;r<e.length;r++)if(!Ci(t,e[r]))return!1;return!0}return Si(t,e)}function Si(t,e){for(var n=Object.keys(e),r=0;r<n.length;r++){var i=n[r];if(t[i]!==e[i])return!1}return!0}function Mi(t,e){if(!e)return{};if(!e.length)return{};for(var n={},r=0;r<e.length;r++){var i=e[r];t.hasOwnProperty(i)&&(n[i]=t[i])}return n}function Li(){}function Pi(t){this.message=t||""}function Oi(t){this.message=t||""}function Ri(){}function Ti(t){return null===t?Ac:t.color}function Ai(t){return null===t?null:t.parent}function Di(t,e){null!==t&&(t.color=e)}function Fi(t){return null===t?null:t.left}function qi(t){return null===t?null:t.right}function Gi(){this.root_=null,this.size_=0}function Bi(){}function ki(){this.array_=[],arguments[0]instanceof vc&&this.addAll(arguments[0])}function zi(){}function ji(t){this.message=t||""}function Xi(){this.array_=[]}function Ui(t){switch(t.type){case"Polygon":return 1<mn(t)?t:null;case"MultiPolygon":var e=[];if(F(t,function(t){1<mn(t)&&e.push(t.geometry.coordinates)}),e.length)return{type:"MultiPolygon",coordinates:e}}}function Yi(){this.reset()}function Vi(t,e,n){var r=t.s=e+n,i=r-e,o=r-i;t.t=e-o+(n-i)}function Hi(t){return 1<t?kf:t<-1?-kf:Math.asin(t)}function Wi(){}function Ji(t,e){t&&eg.hasOwnProperty(t.type)&&eg[t.type](t,e)}function Zi(t,e,n){var r,i=-1,o=t.length-n;for(e.lineStart();++i<o;)r=t[i],e.point(r[0],r[1],r[2]);e.lineEnd()}function Ki(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)Zi(t[n],e,1);e.polygonEnd()}function Qi(t){return[Hf(t[1],t[0]),Hi(t[2])]}function $i(t){var e=t[0],n=t[1],r=Wf(n);return[r*Wf(e),r*Kf(e),Kf(n)]}function to(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function eo(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function no(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function ro(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function io(t){var e=Qf(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function oo(t,e){return[Bf<t?t-jf:t<-Bf?t+jf:t,e]}function so(t,e,n){return(t%=jf)?e||n?rg(uo(t),co(e,n)):uo(t):e||n?co(e,n):oo}function ao(t){return function(e,n){return[Bf<(e+=t)?e-jf:e<-Bf?e+jf:e,n]}}function uo(t){var e=ao(t);return e.invert=ao(-t),e}function co(t,e){function n(t,e){var n=Wf(e),a=Wf(t)*n,u=Kf(t)*n,c=Kf(e),h=c*r+a*i;return[Hf(u*o-h*s,a*r-c*i),Hi(h*o+u*s)]}var r=Wf(t),i=Kf(t),o=Wf(e),s=Kf(e);return n.invert=function(t,e){var n=Wf(e),a=Wf(t)*n,u=Kf(t)*n,c=Kf(e),h=c*o-u*s;return[Hf(u*o+c*s,a*r+h*i),Hi(h*r-a*i)]},n}function ho(t,e){(e=$i(e))[0]-=t,io(e);var n=function(t){return 1<t?0:t<-1?Bf:Math.acos(t)}(-e[1]);return((-e[2]<0?-n:n)+jf-Gf)%jf}function lo(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function po(t){if(e=t.length){for(var e,n,r=0,i=t[0];++r<e;)i.n=n=t[r],n.p=i,i=n;i.n=n=t[0],n.p=i}}function go(t){return 1<t.length}function yo(t,e){return((t=t.x)[0]<0?t[1]-kf-Gf:kf-t[1])-((e=e.x)[0]<0?e[1]-kf-Gf:kf-e[1])}function _o(t){return function(e){var r,n=new mo;for(r in t)n[r]=t[r];return n.stream=e,n}}function mo(){}function vo(t,e,n){var r=e[1][0]-e[0][0],i=e[1][1]-e[0][1],o=t.clipExtent&&t.clipExtent();t.scale(150).translate([0,0]),null!=o&&t.clipExtent(null),ng(n,t.stream(vg));var s=vg.result(),a=Math.min(r/(s[1][0]-s[0][0]),i/(s[1][1]-s[0][1])),u=+e[0][0]+(r-a*(s[1][0]+s[0][0]))/2,c=+e[0][1]+(i-a*(s[1][1]+s[0][1]))/2;return null!=o&&t.clipExtent(o),t.scale(150*a).translate([u,c])}function xo(t){return function(t){function e(t){return[(t=c(t[0]*Uf,t[1]*Uf))[0]*d+s,a-t[1]*d]}function n(t,e){return[(t=o(t,e))[0]*d+s,a-t[1]*d]}function r(){c=rg(u=so(x,E,w),o);var t=o(m,v);return s=y-t[0]*d,a=_+t[1]*d,i()}function i(){return f=g=null,e}var o,s,a,u,c,h,l,p,f,g,d=150,y=480,_=250,m=0,v=0,x=0,E=0,w=0,b=null,I=Eg,N=null,C=gg,S=.5,M=Ng(n,S);return e.stream=function(t){return f&&g===t?f:f=Cg(I(u,M(C(g=t))))},e.clipAngle=function(t){return arguments.length?(I=+t?function(t,e){function n(t,e){return Wf(t)*Wf(e)>o}function r(t,e,n){var r=[1,0,0],i=eo($i(t),$i(e)),s=to(i,i),a=i[0],u=s-a*a;if(!u)return!n&&t;var c=o*s/u,h=-o*a/u,l=eo(r,i),p=ro(r,c);no(p,ro(i,h));var f=l,g=to(p,f),d=to(f,f),y=g*g-d*(to(p,p)-1);if(!(y<0)){var _=Qf(y),m=ro(f,(-g-_)/d);if(no(m,p),m=Qi(m),!n)return m;var v,x=t[0],E=e[0],w=t[1],b=e[1];E<x&&(v=x,x=E,E=v);var I=E-x,N=Yf(I-Bf)<Gf;if(!N&&b<w&&(v=w,w=b,b=v),N||I<Gf?N?w+b>0^m[1]<(Yf(m[0]-x)<Gf?w:b):w<=m[1]&&m[1]<=b:I>Bf^(x<=m[0]&&m[0]<=E)){var C=ro(f,(-g+_)/d);return no(C,p),[m,Qi(C)]}}}function i(e,n){var r=s?t:Bf-t,i=0;return e<-r?i|=1:e>r&&(i|=2),n<-r?i|=4:n>r&&(i|=8),i}var o=Wf(t),s=o>0,a=Yf(o)>Gf;return xg(n,function(t){var e,o,u,c,h;return{lineStart:function(){c=u=!1,h=1},point:function(l,p){var f,g=[l,p],d=n(l,p),y=s?d?0:i(l,p):d?i(l+(l<0?Bf:-Bf),p):0;if(!e&&(c=u=d)&&t.lineStart(),d!==u&&(!(f=r(e,g))||ag(e,f)||ag(g,f))&&(g[0]+=Gf,g[1]+=Gf,d=n(g[0],g[1])),d!==u)h=0,d?(t.lineStart(),f=r(g,e),t.point(f[0],f[1])):(f=r(e,g),t.point(f[0],f[1]),t.lineEnd()),e=f;else if(a&&e&&s^d){var _;y&o||!(_=r(g,e,!0))||(h=0,s?(t.lineStart(),t.point(_[0][0],_[0][1]),t.point(_[1][0],_[1][1]),t.lineEnd()):(t.point(_[1][0],_[1][1]),t.lineEnd(),t.lineStart(),t.point(_[0][0],_[0][1])))}!d||e&&ag(e,g)||t.point(g[0],g[1]),e=g,u=d,o=y},lineEnd:function(){u&&t.lineEnd(),e=null},clean:function(){return h|(c&&u)<<1}}},function(n,r,i,o){!function(t,e,n,r,i,o){if(n){var s=Wf(e),a=Kf(e),u=r*n;null==i?(i=e+r*jf,o=e-u/2):(i=ho(s,i),o=ho(s,o),(r>0?i<o:i>o)&&(i+=r*jf));for(var c,h=i;r>0?h>o:h<o;h-=u)c=Qi([s,-a*Wf(h),-a*Kf(h)]),t.point(c[0],c[1])}}(o,t,e,i,n,r)},s?[0,-t]:[-Bf,t-Bf])}(b=t*Uf,6*Uf):(b=null,Eg),i()):b*Xf},e.clipExtent=function(t){return arguments.length?(C=null==t?(N=h=l=p=null,gg):function(t,e,n,r){function i(i,o){return t<=i&&i<=n&&e<=o&&o<=r}function o(i,o,a,c){var h=0,l=0;if(null==i||(h=s(i,a))!==(l=s(o,a))||u(i,o)<0^0<a)for(;c.point(0===h||3===h?t:n,1<h?r:e),(h=(h+a+4)%4)!==l;);else c.point(o[0],o[1])}function s(r,i){return Yf(r[0]-t)<Gf?0<i?0:3:Yf(r[0]-n)<Gf?0<i?2:1:Yf(r[1]-e)<Gf?0<i?1:0:0<i?3:2}function a(t,e){return u(t.x,e.x)}function u(t,e){var n=s(t,1),r=s(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(s){function u(t,e){i(t,e)&&E.point(t,e)}function c(o,s){var u,c,a=i(o,s);l&&p.push([o,s]),v?(f=o,g=s,v=!1,(d=a)&&(E.lineStart(),E.point(o,s))):a&&m?E.point(o,s):(u=[y=Math.max(pg,Math.min(lg,y)),_=Math.max(pg,Math.min(lg,_))],c=[o=Math.max(pg,Math.min(lg,o)),s=Math.max(pg,Math.min(lg,s))],sg(u,c,t,e,n,r)?(m||(E.lineStart(),E.point(u[0],u[1])),E.point(c[0],c[1]),a||E.lineEnd(),x=!1):a&&(E.lineStart(),E.point(o,s),x=!1)),y=o,_=s,m=a}var h,l,p,f,g,d,y,_,m,v,x,E=s,w=og(),b={point:u,lineStart:function(){b.point=c,l&&l.push(p=[]),m=!(v=!0),y=_=NaN},lineEnd:function(){h&&(c(f,g),d&&m&&w.rejoin(),h.push(w.result())),b.point=u,m&&E.lineEnd()},polygonStart:function(){E=w,h=[],l=[],x=!0},polygonEnd:function(){var e=function(){for(var e=0,n=0,i=l.length;n<i;++n)for(var o,s,a=l[n],u=1,c=a.length,h=a[0],p=h[0],f=h[1];u<c;++u)o=p,s=f,p=(h=a[u])[0],f=h[1],s<=r?r<f&&(f-s)*(t-o)<(p-o)*(r-s)&&++e:f<=r&&(p-o)*(r-s)<(f-s)*(t-o)&&--e;return e}(),n=x&&e,i=(h=hg(h)).length;(n||i)&&(s.polygonStart(),n&&(s.lineStart(),o(null,null,1,s),s.lineEnd()),i&&ug(h,a,e,o,s),s.polygonEnd()),E=s,h=l=p=null}};return b}}(N=+t[0][0],h=+t[0][1],l=+t[1][0],p=+t[1][1]),i()):null==N?null:[[N,h],[l,p]]},e.scale=function(t){return arguments.length?(d=+t,r()):d},e.translate=function(t){return arguments.length?(y=+t[0],_=+t[1],r()):[y,_]},e.center=function(t){return arguments.length?(m=t[0]%360*Uf,v=t[1]%360*Uf,r()):[m*Xf,v*Xf]},e.rotate=function(t){return arguments.length?(x=t[0]%360*Uf,E=t[1]%360*Uf,w=2<t.length?t[2]%360*Uf:0,r()):[x*Xf,E*Xf,w*Xf]},e.precision=function(t){return arguments.length?(M=Ng(n,S=t*t),i()):Qf(S)},e.fitExtent=function(t,n){return vo(e,t,n)},e.fitSize=function(t,n){return function(t,e,n){return vo(t,[[0,0],e],n)}(e,t,n)},function(){return o=t.apply(this,arguments),e.invert=o.invert&&function(t){return(t=c.invert((t[0]-s)/d,(a-t[1])/d))&&[t[0]*Xf,t[1]*Xf]},r()}}(function(){return t})()}function Eo(t,e){return[t,Zf($f((kf+e)/2))]}function wo(t,e){return[Zf($f((kf+e)/2)),-t]}function bo(t,n,r,i){var o=t.properties||{},s="Feature"===t.type?t.geometry:t;if("GeometryCollection"===s.type){var a=[];return A(t,function(t){var e=bo(t,n,r,i);e&&a.push(e)}),c(a)}var _,h=j(t),l=50<h[1]&&50<h[3],u=l?{type:s.type,coordinates:function No(t,e){return"object"!=typeof t[0]?e(t):t.map(function(t){return No(t,e)})}(s.coordinates,So(s))}:cn(s),p=(new bh).read(u),f=d(y(n,r),"meters"),g=gp.bufferOp(p,f);if(!function Io(t){return(Array.isArray(t[0])?Io:isNaN)(t[0])}((g=(new Ih).write(g)).coordinates))return(_=l?{type:g.type,coordinates:function Co(t,e){return"object"!=typeof t[0]?e.invert(t):t.map(function(t){return Co(t,e)})}(g.coordinates,So(s))}:hn(g)).geometry?_:e(_,o)}function So(t){var e=de(t).geometry.coordinates.reverse(),n=e.map(function(t){return-t});return Sg().center(e).rotate(n).scale(Fo)}function Mo(){for(var t=new bh,e=t.read(JSON.stringify(arguments[0].geometry)),n=1;n<arguments.length;n++)e=Df.union(e,t.read(JSON.stringify(arguments[n].geometry)));return{type:"Feature",geometry:e=(new Ih).write(e),properties:arguments[0].properties}}function Lo(t,n){var r=J(t),i=J(n);if(te(Pn(i,{precision:4})).coordinates[0].length<4)return null;if(te(Pn(r,{precision:4})).coordinates[0].length<4)return null;var o=new bh,s=o.read(Pn(r)),a=o.read(Pn(i)),u=Cf.intersection(s,a);return u.isEmpty()?null:e((new Ih).write(u))}function Oo(t,e,n){if(!I(n=n||{}))throw new Error("options is invalid");var r=n.properties||{},i=n.triangles,s=n.mask;if(null==e)throw new Error("cellSide is required");if(!b(e))throw new Error("cellSide is invalid");if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be array");if(4!==t.length)throw new Error("bbox must contain 4 numbers");if(s&&-1===["Polygon","MultiPolygon"].indexOf(K(s)))throw new Error("options.mask must be a (Multi)Polygon");var a=t[0],u=t[1],h=t[2],l=t[3],p=(u+l)/2,f=(a+h)/2,g=2*e/qt([a,p],[h,p],n)*(h-a),d=2*e/qt([f,u],[f,l],n)*(l-u),y=g/2,_=2*y,m=Math.sqrt(3)/2*d,v=h-a,x=l-u,E=.75*_,w=m,N=(v-_)/(_-y/2),C=Math.floor(N),S=(C*E-y/2-v)/2-y/2+E/2,M=Math.floor((x-m)/m),L=(x-M*m)/2,P=m/2<M*m-x;P&&(L-=m/4);for(var O=[],R=[],T=0;T<6;T++){var A=2*Math.PI/6*T;O.push(Math.cos(A)),R.push(Math.sin(A))}for(var D=[],F=0;F<=C;F++)for(var q=0;q<=M;q++){var B,k,z,G=F%2==1;0===q&&G||0===q&&P||(B=F*E+a-S,k=q*w+u+L,G&&(k-=m/2),!0===i?function(t,e,n,r,i,s){for(var a=[],u=0;u<6;u++){var c=[];c.push(t),c.push([t[0]+e*i[u],t[1]+n*s[u]]),c.push([t[0]+e*i[(u+1)%6],t[1]+n*s[(u+1)%6]]),c.push(t),a.push(o([c],r))}return a}([B,k],g/2,d/2,r,O,R).forEach(function(t){s&&!Lo(s,t)||D.push(t)}):(z=function(t,e,n,r,i,s){for(var a=[],u=0;u<6;u++){var c=t[0]+e*i[u],h=t[1]+n*s[u];a.push([c,h])}return a.push(a[0].slice()),o([a],r)}([B,k],g/2,d/2,r,O,R),s&&!Lo(s,z)||D.push(z)))}return c(D)}function Ro(t){if(t.features.length<=1)return t;var e=function(t){var e=Vo(),n=[];return F(t,function(t,e){var r=j(t);n.push({minX:r[0],minY:r[1],maxX:r[2],maxY:r[3],geojson:t,index:e})}),e.load(n),e}(t),n=[],r={};return F(t,function(t,i){if(r[i])return!0;for(e.remove({index:i},To),r[i]=!0;;){var a,o=j(t),s=e.search({minX:o[0],minY:o[1],maxX:o[2],maxY:o[3]});if(0<s.length&&((a=s.map(function(t){return r[t.index]=!0,e.remove({index:t.index},To),t.geojson})).push(t),t=Mo.apply(this,a)),0===s.length)break}n.push(t)}),c(n)}function To(t,e){return t.index===e.index}function Ao(t,e,n){if(!I(n=n||{}))throw new Error("options is invalid");var r=n.properties,i=n.mask,s=[];if(null==e)throw new Error("cellSide is required");if(!b(e))throw new Error("cellSide is invalid");if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be array");if(4!==t.length)throw new Error("bbox must contain 4 numbers");if(i&&-1===["Polygon","MultiPolygon"].indexOf(K(i)))throw new Error("options.mask must be a (Multi)Polygon");for(var a=t[0],u=t[1],h=t[2],l=t[3],p=e/qt([a,u],[h,u],n)*(h-a),f=e/qt([a,u],[a,l],n)*(l-u),g=h-a,d=l-u,y=Math.floor(g/p),_=Math.floor(d/f),m=(d-_*f)/2,v=a+(g-y*p)/2,x=0;x<y;x++){for(var E=u+m,w=0;w<_;w++){var N=o([[[v,E],[v,E+f],[v+p,E+f],[v+p,E],[v,E]]],r);i&&!Lo(i,N)||s.push(N),E+=f}v+=p}return c(s)}function Do(t,e,n){if(!I(n=n||{}))throw new Error("options is invalid");var r=n.properties,i=n.mask,s=[];if(null==e)throw new Error("cellSide is required");if(!b(e))throw new Error("cellSide is invalid");if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be array");if(4!==t.length)throw new Error("bbox must contain 4 numbers");if(i&&-1===["Polygon","MultiPolygon"].indexOf(K(i)))throw new Error("options.mask must be a (Multi)Polygon");for(var a=e/qt([t[0],t[1]],[t[2],t[1]],n)*(t[2]-t[0]),u=e/qt([t[0],t[1]],[t[0],t[3]],n)*(t[3]-t[1]),h=0,l=t[0];l<=t[2];){for(var p=0,f=t[1];f<=t[3];){var g=null,d=null;h%2==0&&p%2==0?(g=o([[[l,f],[l,f+u],[l+a,f],[l,f]]],r),d=o([[[l,f+u],[l+a,f+u],[l+a,f],[l,f+u]]],r)):h%2==0&&p%2==1?(g=o([[[l,f],[l+a,f+u],[l+a,f],[l,f]]],r),d=o([[[l,f],[l,f+u],[l+a,f+u],[l,f]]],r)):p%2==0&&h%2==1?(g=o([[[l,f],[l,f+u],[l+a,f+u],[l,f]]],r),d=o([[[l,f],[l+a,f+u],[l+a,f],[l,f]]],r)):p%2==1&&h%2==1&&(g=o([[[l,f],[l,f+u],[l+a,f],[l,f]]],r),d=o([[[l,f+u],[l+a,f+u],[l+a,f],[l,f+u]]],r)),i?(Lo(i,g)&&s.push(g),Lo(i,d)&&s.push(d)):(s.push(g),s.push(d)),f+=u,p++}h++,l+=a}return c(s)}var Fo=6371008.8,qo={meters:Fo,metres:Fo,millimeters:1e3*Fo,millimetres:1e3*Fo,centimeters:100*Fo,centimetres:100*Fo,kilometers:Fo/1e3,kilometres:Fo/1e3,miles:Fo/1609.344,nauticalmiles:Fo/1852,inches:39.37*Fo,yards:Fo/1.0936,feet:3.28084*Fo,radians:1,degrees:Fo/111325},Go={meters:1,metres:1,millimeters:1e3,millimetres:1e3,centimeters:100,centimetres:100,kilometers:.001,kilometres:.001,miles:1/1609.344,nauticalmiles:1/1852,inches:39.37,yards:1/1.0936,feet:3.28084,radians:1/Fo,degrees:1/111325},Bo={meters:1,metres:1,millimeters:1e6,millimetres:1e6,centimeters:1e4,centimetres:1e4,kilometers:1e-6,kilometres:1e-6,acres:247105e-9,miles:386e-9,yards:1.195990046,feet:10.763910417,inches:1550.003100006},ko=Object.freeze({earthRadius:Fo,factors:qo,unitsFactors:Go,areaFactors:Bo,feature:e,geometry:n,point:r,points:i,polygon:o,polygons:s,lineString:a,lineStrings:u,featureCollection:c,multiLineString:h,multiPoint:l,multiPolygon:p,geometryCollection:f,round:g,radiansToLength:d,lengthToRadians:y,lengthToDegrees:_,bearingToAzimuth:m,radiansToDegrees:v,degreesToRadians:x,convertLength:E,convertArea:w,isNumber:b,isObject:I,validateBBox:N,validateId:C,radians2degrees:function(){throw new Error("method has been renamed to `radiansToDegrees`")},degrees2radians:function(){throw new Error("method has been renamed to `degreesToRadians`")},distanceToDegrees:function(){throw new Error("method has been renamed to `lengthToDegrees`")},distanceToRadians:function(){throw new Error("method has been renamed to `lengthToRadians`")},radiansToDistance:function(){throw new Error("method has been renamed to `radiansToLength`")},bearingToAngle:function(){throw new Error("method has been renamed to `bearingToAzimuth`")},convertDistance:function(){throw new Error("method has been renamed to `convertLength`")}}),zo=Object.freeze({coordEach:S,coordReduce:M,propEach:L,propReduce:P,featureEach:O,featureReduce:R,coordAll:T,geomEach:A,geomReduce:D,flattenEach:F,flattenReduce:q,segmentEach:G,segmentReduce:B,lineEach:k,lineReduce:z}),jo=Object.freeze({getCoord:X,getCoords:U,containsNumber:Y,geojsonType:V,featureOf:H,collectionOf:W,getGeom:J,getGeomType:Z,getType:K}),Xo={successCallback:null,verbose:!1},Uo={},Yo=function it(t,e,n,r,i){for(n=n||0,r=r||t.length-1,i=i||function(t,e){return t<e?-1:e<t?1:0};n<r;){var o,s,a,u,c;600<r-n&&(o=r-n+1,s=e-n+1,a=Math.log(o),u=.5*Math.exp(2*a/3),c=.5*Math.sqrt(a*u*(o-u)/o)*(s-o/2<0?-1:1),it(t,e,Math.max(n,Math.floor(e-s*u/o+c)),Math.min(r,Math.floor(e+(o-s)*u/o+c)),i));var h=t[e],l=n,p=r;for(ot(t,n,e),0<i(t[r],h)&&ot(t,n,r);l<p;){for(ot(t,l,p),l++,p--;i(t[l],h)<0;)l++;for(;0<i(t[p],h);)p--}0===i(t[n],h)?ot(t,n,p):ot(t,++p,r),p<=e&&(n=p+1),e<=p&&(r=p-1)}},Vo=st;st.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,n=[],r=this.toBBox;if(!dt(t,e))return n;for(var i,o,s,a,u=[];e;){for(i=0,o=e.children.length;i<o;i++)s=e.children[i],dt(t,a=e.leaf?r(s):s)&&(e.leaf?n.push(s):gt(t,a)?this._all(s,n):u.push(s));e=u.pop()}return n},collides:function(t){var e=this.data,n=this.toBBox;if(!dt(t,e))return!1;for(var r,i,o,s,a=[];e;){for(r=0,i=e.children.length;r<i;r++)if(o=e.children[r],dt(t,s=e.leaf?n(o):o)){if(e.leaf||gt(t,s))return!0;a.push(o)}e=a.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,n=t.length;e<n;e++)this.insert(t[e]);return this}var i,r=this._build(t.slice(),0,t.length-1,0);return this.data.children.length?this.data.height===r.height?this._splitRoot(this.data,r):(this.data.height<r.height&&(i=this.data,this.data=r,r=i),this._insert(r,this.data.height-r.height-1,!0)):this.data=r,this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=yt([]),this},remove:function(t,e){if(!t)return this;for(var n,r,i,o,s=this.data,a=this.toBBox(t),u=[],c=[];s||u.length;){if(s||(s=u.pop(),r=u[u.length-1],n=c.pop(),o=!0),s.leaf&&-1!==(i=function(t,e,n){if(!n)return e.indexOf(t);for(var r=0;r<e.length;r++)if(n(t,e[r]))return r;return-1}(t,s.children,e)))return s.children.splice(i,1),u.push(s),this._condense(u),this;o||s.leaf||!gt(s,a)?r?(n++,s=r.children[n],o=!1):s=null:(u.push(s),c.push(n),n=0,s=(r=s).children[0])}return this},toBBox:function(t){return t},compareMinX:ht,compareMinY:lt,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,t.children):n.push.apply(n,t.children),t=n.pop();return e},_build:function(t,e,n,r){var i,o=n-e+1,s=this._maxEntries;if(o<=s)return at(i=yt(t.slice(e,n+1)),this.toBBox),i;r||(r=Math.ceil(Math.log(o)/Math.log(s)),s=Math.ceil(o/Math.pow(s,r-1))),(i=yt([])).leaf=!1,i.height=r;var a,u,c,h,l=Math.ceil(o/s),p=l*Math.ceil(Math.sqrt(s));for(_t(t,e,n,p,this.compareMinX),a=e;a<=n;a+=p)for(_t(t,a,c=Math.min(a+p-1,n),l,this.compareMinY),u=a;u<=c;u+=l)h=Math.min(u+l-1,c),i.children.push(this._build(t,u,h,r-1));return at(i,this.toBBox),i},_chooseSubtree:function(t,e,n,r){for(var i,o,s,a,u,c,h,l;r.push(e),!e.leaf&&r.length-1!==n;){for(h=l=1/0,i=0,o=e.children.length;i<o;i++)u=pt(s=e.children[i]),(c=function(t,e){return(Math.max(e.maxX,t.maxX)-Math.min(e.minX,t.minX))*(Math.max(e.maxY,t.maxY)-Math.min(e.minY,t.minY))}(t,s)-u)<l?(l=c,h=u<h?u:h,a=s):c===l&&u<h&&(h=u,a=s);e=a||e.children[0]}return e},_insert:function(t,e,n){var r=this.toBBox,i=n?t:r(t),o=[],s=this._chooseSubtree(i,this.data,e,o);for(s.children.push(t),ct(s,i);0<=e&&o[e].children.length>this._maxEntries;)this._split(o,e),e--;this._adjustParentBBoxes(i,o,e)},_split:function(t,e){var n=t[e],r=n.children.length,i=this._minEntries;this._chooseSplitAxis(n,i,r);var o=this._chooseSplitIndex(n,i,r),s=yt(n.children.splice(o,n.children.length-o));s.height=n.height,s.leaf=n.leaf,at(n,this.toBBox),at(s,this.toBBox),e?t[e-1].children.push(s):this._splitRoot(n,s)},_splitRoot:function(t,e){this.data=yt([t,e]),this.data.height=t.height+1,this.data.leaf=!1,at(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,n){for(var i,o,s,a,c,h,u=c=1/0,r=e;r<=n-e;r++)s=function(t,e){var n=Math.max(t.minX,e.minX),r=Math.max(t.minY,e.minY),i=Math.min(t.maxX,e.maxX),o=Math.min(t.maxY,e.maxY);return Math.max(0,i-n)*Math.max(0,o-r)}(i=ut(t,0,r,this.toBBox),o=ut(t,r,n,this.toBBox)),a=pt(i)+pt(o),s<u?(u=s,h=r,c=a<c?a:c):s===u&&a<c&&(c=a,h=r);return h},_chooseSplitAxis:function(t,e,n){var r=t.leaf?this.compareMinX:ht,i=t.leaf?this.compareMinY:lt;this._allDistMargin(t,e,n,r)<this._allDistMargin(t,e,n,i)&&t.children.sort(r)},_allDistMargin:function(t,e,n,r){t.children.sort(r);for(var o,s=this.toBBox,a=ut(t,0,e,s),u=ut(t,n-e,n,s),c=ft(a)+ft(u),i=e;i<n-e;i++)o=t.children[i],ct(a,t.leaf?s(o):o),c+=ft(a);for(i=n-e-1;e<=i;i--)o=t.children[i],ct(u,t.leaf?s(o):o),c+=ft(u);return c},_adjustParentBBoxes:function(t,e,n){for(var r=n;0<=r;r--)ct(e[r],t)},_condense:function(t){for(var e,n=t.length-1;0<=n;n--)0===t[n].children.length?0<n?(e=t[n-1].children).splice(e.indexOf(t[n]),1):this.clear():at(t[n],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}};function Ho(t,e,n){var r=t*e,i=Wo*t,o=i-(i-t),s=t-o,a=Wo*e,u=a-(a-e),c=e-u,h=s*c-(r-o*u-s*u-o*c);return n?(n[0]=h,n[1]=r,n):[h,r]}function Jo(t,e){var n=0|t.length,r=0|e.length;if(1==n&&1==r)return function(t,e){var n=t+e,r=n-t,i=t-(n-r)+(e-r);return i?[i,n]:[n]}(t[0],e[0]);var i,o,a=new Array(n+r),u=0,c=0,h=0,l=Math.abs,p=t[c],f=l(p),g=e[h],d=l(g);f<d?(o=p,(c+=1)<n&&(f=l(p=t[c]))):(o=g,(h+=1)<r&&(d=l(g=e[h]))),c<n&&f<d||r<=h?(i=p,(c+=1)<n&&(f=l(p=t[c]))):(i=g,(h+=1)<r&&(d=l(g=e[h])));for(var y,_,m=i+o,x=o-(m-i),E=x,w=m;c<n&&h<r;)f<d?(i=p,(c+=1)<n&&(f=l(p=t[c]))):(i=g,(h+=1)<r&&(d=l(g=e[h]))),(x=(o=E)-((m=i+o)-i))&&(a[u++]=x),E=w-((y=w+m)-(_=y-w))+(m-_),w=y;for(;c<n;)(x=(o=E)-((m=(i=p)+o)-i))&&(a[u++]=x),E=w-((y=w+m)-(_=y-w))+(m-_),w=y,(c+=1)<n&&(p=t[c]);for(;h<r;)(x=(o=E)-((m=(i=g)+o)-i))&&(a[u++]=x),E=w-((y=w+m)-(_=y-w))+(m-_),w=y,(h+=1)<r&&(g=e[h]);return E&&(a[u++]=E),w&&(a[u++]=w),u||(a[u++]=0),a.length=u,a}function Ko(t,e){var n=t.length;if(1===n){var r=Ho(t[0],e);return r[0]?r:[r[1]]}var i=new Array(2*n),o=[.1,.1],s=[.1,.1],a=0;Ho(t[0],e,o),o[0]&&(i[a++]=o[0]);for(var u=1;u<n;++u){Ho(t[u],e,s),function(t,e,n){var r=t+e,i=r-t,o=e-i,s=t-(r-i);n&&(n[0]=s+o,n[1]=r)}(o[1],s[0],o),o[0]&&(i[a++]=o[0]);var h=s[1],l=o[1],p=h+l,f=l-(p-h);o[1]=p,f&&(i[a++]=f)}return o[1]&&(i[a++]=o[1]),0===a&&(i[a++]=0),i.length=a,i}function Qo(t,e){var n=0|t.length,r=0|e.length;if(1==n&&1==r)return function(t,e){var n=t+e,r=n-t,i=t-(n-r)+(e-r);return i?[i,n]:[n]}(t[0],-e[0]);var i,o,a=new Array(n+r),u=0,c=0,h=0,l=Math.abs,p=t[c],f=l(p),g=-e[h],d=l(g);f<d?(o=p,(c+=1)<n&&(f=l(p=t[c]))):(o=g,(h+=1)<r&&(d=l(g=-e[h]))),c<n&&f<d||r<=h?(i=p,(c+=1)<n&&(f=l(p=t[c]))):(i=g,(h+=1)<r&&(d=l(g=-e[h])));for(var y,_,m=i+o,x=o-(m-i),E=x,w=m;c<n&&h<r;)f<d?(i=p,(c+=1)<n&&(f=l(p=t[c]))):(i=g,(h+=1)<r&&(d=l(g=-e[h]))),(x=(o=E)-((m=i+o)-i))&&(a[u++]=x),E=w-((y=w+m)-(_=y-w))+(m-_),w=y;for(;c<n;)(x=(o=E)-((m=(i=p)+o)-i))&&(a[u++]=x),E=w-((y=w+m)-(_=y-w))+(m-_),w=y,(c+=1)<n&&(p=t[c]);for(;h<r;)(x=(o=E)-((m=(i=g)+o)-i))&&(a[u++]=x),E=w-((y=w+m)-(_=y-w))+(m-_),w=y,(h+=1)<r&&(g=-e[h]);return E&&(a[u++]=E),w&&(a[u++]=w),u||(a[u++]=0),a.length=u,a}var Wo=+(Math.pow(2,27)+1),$o=mt(function(t){function e(t,e){for(var n=new Array(t.length-1),r=1;r<t.length;++r)for(var i=n[r-1]=new Array(t.length-1),o=0,s=0;o<t.length;++o)o!==e&&(i[s++]=t[r][o]);return n}function r(t){if(1===t.length)return t[0];if(2===t.length)return["sum(",t[0],",",t[1],")"].join("");var e=t.length>>1;return["sum(",r(t.slice(0,e)),",",r(t.slice(e)),")"].join("")}function i(t){if(2===t.length)return[["sum(prod(",t[0][0],",",t[1][1],"),prod(-",t[0][1],",",t[1][0],"))"].join("")];for(var o=[],s=0;s<t.length;++s)o.push(["scale(",r(i(e(t,s))),",",1&s?"-":"",t[0][s],")"].join(""));return o}function o(t){for(var n=[],o=[],s=function(t){for(var e=new Array(t),n=0;n<t;++n){e[n]=new Array(t);for(var r=0;r<t;++r)e[n][r]=["m",r,"[",t-n-1,"]"].join("")}return e}(t),a=[],u=0;u<t;++u)0==(1&u)?n.push.apply(n,i(e(s,u))):o.push.apply(o,i(e(s,u))),a.push("m"+u);var c=r(n),h=r(o),l="orientation"+t+"Exact",p=["function ",l,"(",a.join(),"){var p=",c,",n=",h,",d=sub(p,n);return d[d.length-1];};return ",l].join("");return new Function("sum","prod","scale","sub",p)(Jo,Ho,Ko,Qo)}var a=o(3),u=o(4),c=[function(){return 0},function(){return 0},function(t,e){return e[0]-t[0]},function(t,e,n){var r,i=(t[1]-n[1])*(e[0]-n[0]),o=(t[0]-n[0])*(e[1]-n[1]),s=i-o;if(0<i){if(o<=0)return s;r=i+o}else{if(!(i<0))return s;if(0<=o)return s;r=-(i+o)}var u=33306690738754716e-32*r;return u<=s||s<=-u?s:a(t,e,n)},function(t,e,n,r){var i=t[0]-r[0],o=e[0]-r[0],s=n[0]-r[0],a=t[1]-r[1],c=e[1]-r[1],h=n[1]-r[1],l=t[2]-r[2],p=e[2]-r[2],f=n[2]-r[2],g=o*h,d=s*c,y=s*a,_=i*h,m=i*c,v=o*a,x=l*(g-d)+p*(y-_)+f*(m-v),E=7771561172376103e-31*((Math.abs(g)+Math.abs(d))*Math.abs(l)+(Math.abs(y)+Math.abs(_))*Math.abs(p)+(Math.abs(m)+Math.abs(v))*Math.abs(f));return E<x||E<-x?x:u(t,e,n,r)}];!function(){for(;c.length<=5;)c.push(o(c.length));for(var e=[],n=["slow"],r=0;r<=5;++r)e.push("a"+r),n.push("o"+r);for(var i=["function getOrientation(",e.join(),"){switch(arguments.length){case 0:case 1:return 0;"],r=2;r<=5;++r)i.push("case ",r,":return o",r,"(",e.slice(0,r).join(),");");i.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return getOrientation"),n.push(i.join(""));var a=Function.apply(void 0,n);for(t.exports=a.apply(void 0,[function(t){return(c[t.length]||(c[t.length]=o(t.length))).apply(void 0,t)}].concat(c)),r=0;r<=5;++r)t.exports[r]=c[r]}()}),es=$o[3],ns=vt,rs=vt;vt.prototype={push:function(t){this.data.push(t),this.length++,this._up(this.length-1)},pop:function(){if(0!==this.length){var t=this.data[0];return this.length--,0<this.length&&(this.data[0]=this.data[this.length],this._down(0)),this.data.pop(),t}},peek:function(){return this.data[0]},_up:function(t){for(var e=this.data,n=this.compare,r=e[t];0<t;){var i=t-1>>1,o=e[i];if(0<=n(r,o))break;e[t]=o,t=i}e[t]=r},_down:function(t){for(var e=this.data,n=this.compare,r=this.length>>1,i=e[t];t<r;){var o=1+(t<<1),s=o+1,a=e[o];if(s<this.length&&n(e[s],a)<0&&(a=e[o=s]),0<=n(a,i))break;e[t]=a,t=o}e[t]=i}},ns.default=rs;var os=$o[3],ss=xt;ss.default=xt;function us(t){return t}function fs(t,e,n,r,i,o){3===arguments.length&&(r=o=Array,i=null);for(var s=new r(t=1<<Math.max(4,Math.ceil(Math.log(t)/Math.LN2))),a=new o(t),u=t-1,c=0;c<t;++c)s[c]=i;return{set:function(r,o){for(var c=e(r)&u,h=s[c],l=0;h!=i;){if(n(h,r))return a[c]=o;if(++l>=t)throw new Error("full hashmap");h=s[c=c+1&u]}return s[c]=r,a[c]=o},maybeSet:function(r,o){for(var c=e(r)&u,h=s[c],l=0;h!=i;){if(n(h,r))return a[c];if(++l>=t)throw new Error("full hashmap");h=s[c=c+1&u]}return s[c]=r,a[c]=o},get:function(r,o){for(var c=e(r)&u,h=s[c],l=0;h!=i;){if(n(h,r))return a[c];if(++l>=t)break;h=s[c=c+1&u]}return o},keys:function(){for(var t=[],e=0,n=s.length;e<n;++e){var r=s[e];r!=i&&t.push(r)}return t}}}function gs(t,e){return t[0]===e[0]&&t[1]===e[1]}function ms(t){ys[0]=t[0],ys[1]=t[1];var e=_s[0]^_s[1];return 2147483647&(e<<5^e>>7^_s[2]^_s[3])}function xs(t){for(var e,i=function(t){function e(t,e,n,r){var i,o;p[n]!==t&&(p[n]=t,0<=(i=f[n])?(o=g[n],i===e&&o===r||i===r&&o===e||(++y,d[n]=1)):(f[n]=e,g[n]=r))}function n(t){return ms(u[t])}function r(t,e){return gs(u[t],u[e])}for(var u=t.coordinates,c=t.lines,h=t.rings,l=function(){for(var t=fs(1.4*u.length,n,r,Int32Array,-1,Int32Array),e=new Int32Array(u.length),i=0,o=u.length;i<o;++i)e[i]=t.maybeSet(i,i);return e}(),p=new Int32Array(u.length),f=new Int32Array(u.length),g=new Int32Array(u.length),d=new Int8Array(u.length),y=0,i=0,o=u.length;i<o;++i)p[i]=f[i]=g[i]=-1;for(i=0,o=c.length;i<o;++i){var _=c[i],m=_[0],v=_[1],s=l[m],a=l[++m];for(++y,d[s]=1;++m<=v;)e(i,s,s=a,a=l[m]);++y,d[a]=1}for(i=0,o=u.length;i<o;++i)p[i]=-1;for(i=0,o=h.length;i<o;++i){var x=h[i],E=x[0]+1,w=x[1];for(e(i,l[w-1],s=l[E-1],a=l[E]);++E<=w;)e(i,s,s=a,a=l[E])}p=f=g=null;var b,I=function(t,e,n,r,i){3===arguments.length&&(r=Array,i=null);for(var o=new r(t=1<<Math.max(4,Math.ceil(Math.log(t)/Math.LN2))),s=t-1,a=0;a<t;++a)o[a]=i;return{add:function(r){for(var a=e(r)&s,u=o[a],c=0;u!=i;){if(n(u,r))return!0;if(++c>=t)throw new Error("full hashset");u=o[a=a+1&s]}return o[a]=r,!0},has:function(r){for(var a=e(r)&s,u=o[a],c=0;u!=i;){if(n(u,r))return!0;if(++c>=t)break;u=o[a=a+1&s]}return!1},values:function(){for(var t=[],e=0,n=o.length;e<n;++e){var r=o[e];r!=i&&t.push(r)}return t}}}(1.4*y,ms,gs);for(i=0,o=u.length;i<o;++i)d[b=l[i]]&&I.add(u[b]);return I}(t),o=t.coordinates,s=t.lines,a=t.rings,n=0,r=s.length;n<r;++n)for(var u=s[n],c=u[0],h=u[1];++c<h;)i.has(o[c])&&(e={0:c,1:u[1]},u[1]=c,u=u.next=e);for(n=0,r=a.length;n<r;++n)for(var l=a[n],p=l[0],f=p,g=l[1],d=i.has(o[p]);++f<g;)i.has(o[f])&&(d?(e={0:f,1:l[1]},l[1]=f,l=l.next=e):(function(t,e,n,r){Yt(t,e,n),Yt(t,e,e+r),Yt(t,e+r,n)}(o,p,g,g-f),o[g]=o[p],d=!0,f=p));return t}function Es(t){function e(t){var e,n,r,i,o,s,a,u;if(r=f.get(e=c[t[0]]))for(a=0,u=r.length;a<u;++a)if(function(t,e){var n=t[0],r=e[0],i=t[1];if(n-i==r-e[1]){for(;n<=i;++n,++r)if(!gs(c[n],c[r]))return;return 1}}(i=r[a],t))return t[0]=i[0],t[1]=i[1],0;if(o=f.get(n=c[t[1]]))for(a=0,u=o.length;a<u;++a)if(function(t,e){var n=t[0],r=e[0],i=t[1],o=e[1];if(n-i==r-o){for(;n<=i;++n,--o)if(!gs(c[n],c[o]))return;return 1}}(s=o[a],t))return t[1]=s[0],t[0]=s[1],0;r?r.push(t):f.set(e,[t]),o?o.push(t):f.set(n,[t]),g.push(t)}function n(t,e){var n=t[0],r=e[0],o=t[1]-n;if(o==e[1]-r){for(var s=i(t),a=i(e),u=0;u<o;++u)if(!gs(c[n+(u+s)%o],c[r+(u+a)%o]))return;return 1}}function r(t,e){var n=t[0],r=e[0],o=t[1],s=e[1],a=o-n;if(a==s-r){for(var u=i(t),h=a-i(e),l=0;l<a;++l)if(!gs(c[n+(l+u)%a],c[s-(l+h)%a]))return;return 1}}function i(t){for(var e=t[0],n=t[1],r=e,i=r,o=c[r];++r<n;){var s=c[r];(s[0]<o[0]||s[0]===o[0]&&s[1]<o[1])&&(i=r,o=s)}return i-e}var o,s,c=t.coordinates,h=t.lines,l=t.rings,p=h.length+l.length;for(delete t.lines,delete t.rings,a=0,u=h.length;a<u;++a)for(o=h[a];o=o.next;)++p;for(a=0,u=l.length;a<u;++a)for(s=l[a];s=s.next;)++p;for(var f=fs(2*p*1.4,ms,gs),g=t.arcs=[],a=0,u=h.length;a<u;++a)for(o=h[a];e(o),o=o.next;);for(a=0,u=l.length;a<u;++a)if((s=l[a]).next)for(;e(s),s=s.next;);else!function(t){var e,o,s,a,u;if(o=f.get(c[t[0]]))for(a=0,u=o.length;a<u;++a){if(n(s=o[a],t))return t[0]=s[0],t[1]=s[1];if(r(s,t))return t[0]=s[1],t[1]=s[0]}if(o=f.get(e=c[t[0]+i(t)]))for(a=0,u=o.length;a<u;++a){if(n(s=o[a],t))return t[0]=s[0],t[1]=s[1];if(r(s,t))return t[0]=s[1],t[1]=s[0]}o?o.push(t):f.set(e,[t]),g.push(t)}(s);return t}function bs(t){this.points=t.points||[],this.duration=t.duration||1e4,this.sharpness=t.sharpness||.85,this.centers=[],this.controls=[],this.stepLength=t.stepLength||60,this.length=this.points.length;for(var e=this.delay=0;e<this.length;e++)this.points[e].z=this.points[e].z||0;for(e=0;e<this.length-1;e++){var n=this.points[e],r=this.points[e+1];this.centers.push({x:(n.x+r.x)/2,y:(n.y+r.y)/2,z:(n.z+r.z)/2})}for(this.controls.push([this.points[0],this.points[0]]),e=0;e<this.centers.length-1;e++){n=this.centers[e],r=this.centers[e+1];var i=this.points[e+1].x-(this.centers[e].x+this.centers[e+1].x)/2,o=this.points[e+1].y-(this.centers[e].y+this.centers[e+1].y)/2,s=this.points[e+1].z-(this.centers[e].y+this.centers[e+1].z)/2;this.controls.push([{x:(1-this.sharpness)*this.points[e+1].x+this.sharpness*(this.centers[e].x+i),y:(1-this.sharpness)*this.points[e+1].y+this.sharpness*(this.centers[e].y+o),z:(1-this.sharpness)*this.points[e+1].z+this.sharpness*(this.centers[e].z+s)},{x:(1-this.sharpness)*this.points[e+1].x+this.sharpness*(this.centers[e+1].x+i),y:(1-this.sharpness)*this.points[e+1].y+this.sharpness*(this.centers[e+1].y+o),z:(1-this.sharpness)*this.points[e+1].z+this.sharpness*(this.centers[e+1].z+s)}])}return this.controls.push([this.points[this.length-1],this.points[this.length-1]]),this.steps=this.cacheSteps(this.stepLength),this}var cs=function(t){if(null==t)return us;var e,n,r=t.scale[0],i=t.scale[1],o=t.translate[0],s=t.translate[1];return function(t,a){a||(e=n=0);var u=2,c=t.length,h=new Array(c);for(h[0]=(e+=t[0])*r+o,h[1]=(n+=t[1])*i+s;u<c;)h[u]=t[u],++u;return h}},hs=function(t,e){for(var n,r=t.length,i=r-e;i<--r;)n=t[i],t[i++]=t[r],t[r]=n},ds=new ArrayBuffer(16),ys=new Float64Array(ds),_s=new Uint32Array(ds);bs.prototype.cacheSteps=function(t){var e=[],n=this.pos(0);e.push(0);for(var r=0;r<this.duration;r+=10){var i=this.pos(r);Math.sqrt((i.x-n.x)*(i.x-n.x)+(i.y-n.y)*(i.y-n.y)+(i.z-n.z)*(i.z-n.z))>t&&(e.push(r),n=i)}return e},bs.prototype.vector=function(t){var e=this.pos(t+10),n=this.pos(t-10);return{angle:180*Math.atan2(e.y-n.y,e.x-n.x)/3.14,speed:Math.sqrt((n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y)+(n.z-e.z)*(n.z-e.z))}},bs.prototype.pos=function(t){var e=t-this.delay;e<0&&(e=0),e>this.duration&&(e=this.duration-1);var n=e/this.duration;if(1<=n)return this.points[this.length-1];var r=Math.floor((this.points.length-1)*n);return function(t,e,n,r,i){var o=function(t){var e=t*t;return[e*t,3*e*(1-t),3*t*(1-t)*(1-t),(1-t)*(1-t)*(1-t)]}(t);return{x:i.x*o[0]+r.x*o[1]+n.x*o[2]+e.x*o[3],y:i.y*o[0]+r.y*o[1]+n.y*o[2]+e.y*o[3],z:i.z*o[0]+r.z*o[1]+n.z*o[2]+e.z*o[3]}}((this.length-1)*n-r,this.points[r],this.controls[r][1],this.controls[r+1][0],this.points[r+1])};var Is=ve,Ns=ve;ve.deviation=function(t,e,n,r){var i=e&&e.length,o=i?e[0]*n:t.length,s=Math.abs(Ae(t,0,o,n));if(i)for(var a=0,u=e.length;a<u;a++){var c=e[a]*n,h=a<u-1?e[a+1]*n:t.length;s-=Math.abs(Ae(t,c,h,n))}for(var l=0,a=0;a<r.length;a+=3){var p=r[a]*n,f=r[a+1]*n,g=r[a+2]*n;l+=Math.abs((t[p]-t[g])*(t[1+f]-t[1+p])-(t[p]-t[f])*(t[1+g]-t[1+p]))}return 0===s&&0===l?0:Math.abs((l-s)/s)},ve.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var s=0;s<e;s++)n.vertices.push(t[i][o][s]);0<i&&(r+=t[i-1].length,n.holes.push(r))}return n},Is.default=Ns,ke.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,n=[],r=this.toBBox;if(!Je(t,e))return n;for(var i,o,s,a,u=[];e;){for(i=0,o=e.children.length;i<o;i++)s=e.children[i],Je(t,a=e.leaf?r(s):s)&&(e.leaf?n.push(s):We(t,a)?this._all(s,n):u.push(s));e=u.pop()}return n},collides:function(t){var e=this.data,n=this.toBBox;if(!Je(t,e))return!1;for(var r,i,o,s,a=[];e;){for(r=0,i=e.children.length;r<i;r++)if(o=e.children[r],Je(t,s=e.leaf?n(o):o)){if(e.leaf||We(t,s))return!0;a.push(o)}e=a.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,n=t.length;e<n;e++)this.insert(t[e]);return this}var i,r=this._build(t.slice(),0,t.length-1,0);return this.data.children.length?this.data.height===r.height?this._splitRoot(this.data,r):(this.data.height<r.height&&(i=this.data,this.data=r,r=i),this._insert(r,this.data.height-r.height-1,!0)):this.data=r,this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=Ze([]),this},remove:function(t,e){if(!t)return this;for(var n,r,i,o,s=this.data,a=this.toBBox(t),u=[],c=[];s||u.length;){if(s||(s=u.pop(),r=u[u.length-1],n=c.pop(),o=!0),s.leaf&&-1!==(i=function(t,e,n){if(!n)return e.indexOf(t);for(var r=0;r<e.length;r++)if(n(t,e[r]))return r;return-1}(t,s.children,e)))return s.children.splice(i,1),u.push(s),this._condense(u),this;o||s.leaf||!We(s,a)?r?(n++,s=r.children[n],o=!1):s=null:(u.push(s),c.push(n),n=0,s=(r=s).children[0])}return this},toBBox:function(t){return t},compareMinX:Ue,compareMinY:Ye,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,t.children):n.push.apply(n,t.children),t=n.pop();return e},_build:function(t,e,n,r){var i,o=n-e+1,s=this._maxEntries;if(o<=s)return ze(i=Ze(t.slice(e,n+1)),this.toBBox),i;r||(r=Math.ceil(Math.log(o)/Math.log(s)),s=Math.ceil(o/Math.pow(s,r-1))),(i=Ze([])).leaf=!1,i.height=r;var a,u,c,h,l=Math.ceil(o/s),p=l*Math.ceil(Math.sqrt(s));for(Ke(t,e,n,p,this.compareMinX),a=e;a<=n;a+=p)for(Ke(t,a,c=Math.min(a+p-1,n),l,this.compareMinY),u=a;u<=c;u+=l)h=Math.min(u+l-1,c),i.children.push(this._build(t,u,h,r-1));return ze(i,this.toBBox),i},_chooseSubtree:function(t,e,n,r){for(var i,o,s,a,u,c,h,l;r.push(e),!e.leaf&&r.length-1!==n;){for(h=l=1/0,i=0,o=e.children.length;i<o;i++)u=Ve(s=e.children[i]),(c=function(t,e){return(Math.max(e.maxX,t.maxX)-Math.min(e.minX,t.minX))*(Math.max(e.maxY,t.maxY)-Math.min(e.minY,t.minY))}(t,s)-u)<l?(l=c,h=u<h?u:h,a=s):c===l&&u<h&&(h=u,a=s);e=a||e.children[0]}return e},_insert:function(t,e,n){var r=this.toBBox,i=n?t:r(t),o=[],s=this._chooseSubtree(i,this.data,e,o);for(s.children.push(t),Xe(s,i);0<=e&&o[e].children.length>this._maxEntries;)this._split(o,e),e--;this._adjustParentBBoxes(i,o,e)},_split:function(t,e){var n=t[e],r=n.children.length,i=this._minEntries;this._chooseSplitAxis(n,i,r);var o=this._chooseSplitIndex(n,i,r),s=Ze(n.children.splice(o,n.children.length-o));s.height=n.height,s.leaf=n.leaf,ze(n,this.toBBox),ze(s,this.toBBox),e?t[e-1].children.push(s):this._splitRoot(n,s)},_splitRoot:function(t,e){this.data=Ze([t,e]),this.data.height=t.height+1,this.data.leaf=!1,ze(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,n){for(var i,o,s,a,c,h,u=c=1/0,r=e;r<=n-e;r++)s=function(t,e){var n=Math.max(t.minX,e.minX),r=Math.max(t.minY,e.minY),i=Math.min(t.maxX,e.maxX),o=Math.min(t.maxY,e.maxY);return Math.max(0,i-n)*Math.max(0,o-r)}(i=je(t,0,r,this.toBBox),o=je(t,r,n,this.toBBox)),a=Ve(i)+Ve(o),s<u?(u=s,h=r,c=a<c?a:c):s===u&&a<c&&(c=a,h=r);return h},_chooseSplitAxis:function(t,e,n){var r=t.leaf?this.compareMinX:Ue,i=t.leaf?this.compareMinY:Ye;this._allDistMargin(t,e,n,r)<this._allDistMargin(t,e,n,i)&&t.children.sort(r)},_allDistMargin:function(t,e,n,r){t.children.sort(r);for(var o,s=this.toBBox,a=je(t,0,e,s),u=je(t,n-e,n,s),c=He(a)+He(u),i=e;i<n-e;i++)o=t.children[i],Xe(a,t.leaf?s(o):o),c+=He(a);for(i=n-e-1;e<=i;i--)o=t.children[i],Xe(u,t.leaf?s(o):o),c+=He(u);return c},_adjustParentBBoxes:function(t,e,n){for(var r=n;0<=r;r--)Xe(e[r],t)},_condense:function(t){for(var e,n=t.length-1;0<=n;n--)0===t[n].children.length?0<n?(e=t[n-1].children).splice(e.indexOf(t[n]),1):this.clear():ze(t[n],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}};function Ls(t){function e(){for(var t=[],e=0;e<g.features.length;e++)-1==g.features[e].properties.parent&&t.push(e);if(1<t.length)for(e=0;e<t.length;e++){for(var n=-1,r=0;r<g.features.length;r++)t[e]!=r&&Pt(g.features[t[e]].geometry.coordinates[0][0],g.features[r],{ignoreBoundary:!0})&&mn(g.features[r])<1/0&&(n=r);g.features[t[e]].properties.parent=n}}function n(){for(var e,t=0;t<g.features.length;t++){-1==g.features[t].properties.parent&&(e=g.features[t].properties.winding,function r(t,e){for(var n=0;n<g.features.length;n++){var i;g.features[n].properties.parent==t&&(i=e+g.features[n].properties.winding,g.features[n].properties.netWinding=i,r(n,i))}}(t,g.features[t].properties.netWinding=e))}}if("Feature"!=t.type)throw new Error("The input must a geojson object of type Feature");if(void 0===t.geometry||null==t.geometry)throw new Error("The input must a geojson object with a non-empty geometry");if("Polygon"!=t.geometry.type)throw new Error("The input must be a geojson Polygon");for(var i=t.geometry.coordinates.length,s=[],a=0;a<i;a++){var u=t.geometry.coordinates[a];Tn(u[0],u[u.length-1])||u.push(u[0]),s.push.apply(s,u.slice(0,u.length-1))}if(!function(t){for(var e={},n=1,r=0,i=t.length;r<i;++r){if(e.hasOwnProperty(t[r])){n=0;break}e[t[r]]=1}return n}(s))throw new Error("The input polygon may not have duplicate vertices (except for the first and last vertex of each ring)");var h=s.length,l=function(t,e,n){function r(t,n,r,i){var y,f,g,u=o[t][n],c=o[t][n+1],h=o[r][i],l=o[r][i+1],p=function(t,e,n,r){if(On(t,n)||On(t,r)||On(e,n)||On(r,n))return null;var i=t[0],o=t[1],s=e[0],a=e[1],u=n[0],c=n[1],h=r[0],l=r[1],p=(i-s)*(c-l)-(o-a)*(u-h);return 0==p?null:[((i*a-o*s)*(u-h)-(i-s)*(u*l-c*h))/p,((i*a-o*s)*(c-l)-(o-a)*(u*l-c*h))/p]}(u,c,h,l);null!==p&&(f=c[0]!==u[0]?(p[0]-u[0])/(c[0]-u[0]):(p[1]-u[1])/(c[1]-u[1]),g=l[0]!==h[0]?(p[0]-h[0])/(l[0]-h[0]):(p[1]-h[1])/(l[1]-h[1]),1<=f||f<=0||1<=g||g<=0||((y=!a[p])&&(a[p]=!0),e?s.push(e(p,t,n,u,c,f,r,i,h,l,g,y)):s.push(p)))}function i(t,e){var n,i,a=o[t][e],u=o[t][e+1],r=a[0]<u[0]?(n=a[0],u[0]):(n=u[0],a[0]),s=a[1]<u[1]?(i=a[1],u[1]):(i=u[1],a[1]);return{minX:n,minY:i,maxX:r,maxY:s,ring:t,edge:e}}if("Polygon"!==t.geometry.type)throw new Error("The input feature must be a Polygon");void 0===n&&(n=1);var o=t.geometry.coordinates,s=[],a={};if(n){for(var u=[],c=0;c<o.length;c++)for(var h=0;h<o[c].length-1;h++)u.push(i(c,h));var l=Vo();l.load(u)}for(var p=0;p<o.length;p++)for(var f=0;f<o[p].length-1;f++)if(n)l.search(i(p,f)).forEach(function(t){var e=t.ring,n=t.edge;r(p,f,e,n)});else for(var g=0;g<o.length;g++)for(var d=0;d<o[g].length-1;d++)r(p,f,g,d);return e||(s={type:"Feature",geometry:{type:"MultiPoint",coordinates:s}}),s}(t,function(t,e,n,r,i,o,s,a,u,c,h,l){return[t,e,n,r,i,o,s,a,u,c,h,l]}),p=l.length;if(0==p){for(var f=[],a=0;a<i;a++)f.push(o([t.geometry.coordinates[a]],{parent:-1,winding:function(t){for(var e=0,n=0;n<t.length-1;n++)t[n][0]<t[e][0]&&(e=n);return Rn([t[(e-1).modulo(t.length-1)],t[e],t[(e+1).modulo(t.length-1)]],!0)?1:-1}(t.geometry.coordinates[a])}));var g=c(f);return e(),n(),g}var d=[],y=[];for(a=0;a<i;a++){d.push([]);for(var _=0;_<t.geometry.coordinates[a].length-1;_++)d[a].push([new Ps(t.geometry.coordinates[a][(_+1).modulo(t.geometry.coordinates[a].length-1)],1,[a,_],[a,(_+1).modulo(t.geometry.coordinates[a].length-1)],void 0)]),y.push(new Os(t.geometry.coordinates[a][_],[a,(_-1).modulo(t.geometry.coordinates[a].length-1)],[a,_],void 0,void 0,!1,!0))}for(a=0;a<p;a++)d[l[a][1]][l[a][2]].push(new Ps(l[a][0],l[a][5],[l[a][1],l[a][2]],[l[a][6],l[a][7]],void 0)),l[a][11]&&y.push(new Os(l[a][0],[l[a][1],l[a][2]],[l[a][6],l[a][7]],void 0,void 0,!0,!0));var m=y.length;for(a=0;a<d.length;a++)for(_=0;_<d[a].length;_++)d[a][_].sort(function(t,e){return t.param<e.param?-1:1});var v=[];for(a=0;a<m;a++)v.push({minX:y[a].coord[0],minY:y[a].coord[1],maxX:y[a].coord[0],maxY:y[a].coord[1],index:a});var x=Vo();for(x.load(v),a=0;a<d.length;a++)for(_=0;_<d[a].length;_++)for(var E=0;E<d[a][_].length;E++){b=E==d[a][_].length-1?d[a][(_+1).modulo(t.geometry.coordinates[a].length-1)][0].coord:d[a][_][E+1].coord;var w=x.search({minX:b[0],minY:b[1],maxX:b[0],maxY:b[1]})[0];d[a][_][E].nxtIsectAlongEdgeIn=w.index}for(a=0;a<d.length;a++)for(_=0;_<d[a].length;_++)for(E=0;E<d[a][_].length;E++){var b=d[a][_][E].coord,I=(w=x.search({minX:b[0],minY:b[1],maxX:b[0],maxY:b[1]})[0]).index;!(I<h)&&Tn(y[I].ringAndEdge1,d[a][_][E].ringAndEdgeIn)?y[I].nxtIsectAlongRingAndEdge1=d[a][_][E].nxtIsectAlongEdgeIn:y[I].nxtIsectAlongRingAndEdge2=d[a][_][E].nxtIsectAlongEdgeIn}for(var N=[],_=a=0;_<i;_++){for(var C=a,E=0;E<t.geometry.coordinates[_].length-1;E++)y[a].coord[0]<y[C].coord[0]&&(C=a),a++;var S=y[C].nxtIsectAlongRingAndEdge2;for(E=0;E<y.length;E++)if(y[E].nxtIsectAlongRingAndEdge1==C||y[E].nxtIsectAlongRingAndEdge2==C){var M=E;break}var L=Rn([y[M].coord,y[C].coord,y[S].coord],!0)?1:-1;N.push({isect:C,parent:-1,winding:L})}for(N.sort(function(t,e){return y[t.isect].coord>y[e.isect].coord?-1:1}),f=[];0<N.length;){for(var P=N.pop(),O=P.isect,R=P.parent,T=P.winding,A=f.length,D=[y[O].coord],F=O,G=y[O].ringAndEdge1Walkable?(q=y[O].ringAndEdge1,y[O].nxtIsectAlongRingAndEdge1):(q=y[O].ringAndEdge2,y[O].nxtIsectAlongRingAndEdge2);!Tn(y[O].coord,y[G].coord);){D.push(y[G].coord);var k,q,B=void 0;for(a=0;a<N.length;a++)if(N[a].isect==G){B=a;break}null!=B&&N.splice(B,1),G=Tn(q,y[G].ringAndEdge1)?(q=y[G].ringAndEdge2,y[G].ringAndEdge2Walkable=!1,y[G].ringAndEdge1Walkable&&(k={isect:G},Rn([y[F].coord,y[G].coord,y[y[G].nxtIsectAlongRingAndEdge2].coord],1==T)?(k.parent=R,k.winding=-T):(k.parent=A,k.winding=T),N.push(k)),y[F=G].nxtIsectAlongRingAndEdge2):(q=y[G].ringAndEdge1,y[G].ringAndEdge1Walkable=!1,y[G].ringAndEdge2Walkable&&(k={isect:G},Rn([y[F].coord,y[G].coord,y[y[G].nxtIsectAlongRingAndEdge1].coord],1==T)?(k.parent=R,k.winding=-T):(k.parent=A,k.winding=T),N.push(k)),y[F=G].nxtIsectAlongRingAndEdge1)}D.push(y[G].coord),f.push(o([D],{index:A,parent:R,winding:T,netWinding:void 0}))}return g=c(f),e(),n(),g}var Cs=Object.freeze({toMercator:cn,toWgs84:hn}),Ss=6378137,Ps=function(t,e,n,r,i){this.coord=t,this.param=e,this.ringAndEdgeIn=n,this.ringAndEdgeOut=r,this.nxtIsectAlongEdgeIn=i},Os=function(t,e,n,r,i,o,s){this.coord=t,this.ringAndEdge1=e,this.ringAndEdge2=n,this.nxtIsectAlongRingAndEdge1=r,this.nxtIsectAlongRingAndEdge2=i,this.ringAndEdge1Walkable=o,this.ringAndEdge2Walkable=s};Number.prototype.modulo=function(t){return(this%t+t)%t};function As(t,e){this.lon=t,this.lat=e,this.x=Rs*t,this.y=Rs*e}var Rs=Math.PI/180,Ts=180/Math.PI;As.prototype.view=function(){return String(this.lon).slice(0,4)+","+String(this.lat).slice(0,4)},As.prototype.antipode=function(){var t=-1*this.lat,e=this.lon<0?180+this.lon:-1*(180-this.lon);return new As(e,t)};function Ds(){this.coords=[],this.length=0}Ds.prototype.move_to=function(t){this.length++,this.coords.push(t)};function Fs(t){this.properties=t||{},this.geometries=[]}Fs.prototype.json=function(){if(this.geometries.length<=0)return{geometry:{type:"LineString",coordinates:null},type:"Feature",properties:this.properties};if(1===this.geometries.length)return{geometry:{type:"LineString",coordinates:this.geometries[0].coords},type:"Feature",properties:this.properties};for(var t=[],e=0;e<this.geometries.length;e++)t.push(this.geometries[e].coords);return{geometry:{type:"MultiLineString",coordinates:t},type:"Feature",properties:this.properties}},Fs.prototype.wkt=function(){for(var t="",e="LINESTRING(",n=function(t){e+=t[0]+" "+t[1]+","},r=0;r<this.geometries.length;r++){if(0===this.geometries[r].coords.length)return"LINESTRING(empty)";this.geometries[r].coords.forEach(n),t+=e.substring(0,e.length-1)+")"}return t};function qs(t,e,n){if(!t||void 0===t.x||void 0===t.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");if(!e||void 0===e.x||void 0===e.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");this.start=new As(t.x,t.y),this.end=new As(e.x,e.y),this.properties=n||{};var r=this.start.x-this.end.x,i=this.start.y-this.end.y,o=Math.pow(Math.sin(i/2),2)+Math.cos(this.start.y)*Math.cos(this.end.y)*Math.pow(Math.sin(r/2),2);if(this.g=2*Math.asin(Math.sqrt(o)),this.g===Math.PI)throw new Error("it appears "+t.view()+" and "+e.view()+" are 'antipodal', e.g diametrically opposite, thus there is no single route but rather infinite");if(isNaN(this.g))throw new Error("could not calculate great circle between "+t+" and "+e)}qs.prototype.interpolate=function(t){var e=Math.sin((1-t)*this.g)/Math.sin(this.g),n=Math.sin(t*this.g)/Math.sin(this.g),r=e*Math.cos(this.start.y)*Math.cos(this.start.x)+n*Math.cos(this.end.y)*Math.cos(this.end.x),i=e*Math.cos(this.start.y)*Math.sin(this.start.x)+n*Math.cos(this.end.y)*Math.sin(this.end.x),o=e*Math.sin(this.start.y)+n*Math.sin(this.end.y),s=Ts*Math.atan2(o,Math.sqrt(Math.pow(r,2)+Math.pow(i,2)));return[Ts*Math.atan2(i,r),s]},qs.prototype.Arc=function(t,e){var n=[];if(!t||t<=2)n.push([this.start.lon,this.start.lat]),n.push([this.end.lon,this.end.lat]);else for(var r=1/(t-1),i=0;i<t;++i){var o=r*i,s=this.interpolate(o);n.push(s)}for(var a=!1,u=0,c=e&&e.offset?e.offset:10,h=180-c,l=-180+c,p=360-c,f=1;f<n.length;++f){var g=n[f-1][0],d=n[f][0],y=Math.abs(d-g);p<y&&(h<d&&g<l||h<g&&d<l)?a=!0:u<y&&(u=y)}var _=[];if(a&&u<c){var m=[];_.push(m);for(var v=0;v<n.length;++v){var x=parseFloat(n[v][0]);if(0<v&&Math.abs(x-n[v-1][0])>p){var N,C,S,M,E=parseFloat(n[v-1][0]),w=parseFloat(n[v-1][1]),b=parseFloat(n[v][0]),I=parseFloat(n[v][1]);if(-180<E&&E<l&&180===b&&v+1<n.length&&-180<n[v-1][0]&&n[v-1][0]<l){m.push([-180,n[v][1]]),v++,m.push([n[v][0],n[v][1]]);continue}if(h<E&&E<180&&-180===b&&v+1<n.length&&n[v-1][0]>h&&n[v-1][0]<180){m.push([180,n[v][1]]),v++,m.push([n[v][0],n[v][1]]);continue}E<l&&h<b&&(N=E,E=b,b=N,C=w,w=I,I=C),h<E&&b<l&&(b+=360),E<=180&&180<=b&&E<b?(M=(S=(180-E)/(b-E))*I+(1-S)*w,m.push([n[v-1][0]>h?180:-180,M]),(m=[]).push([n[v-1][0]>h?-180:180,M])):m=[],_.push(m),m.push([x,n[v][1]])}else m.push([n[v][0],n[v][1]])}}else{var L=[];_.push(L);for(var P=0;P<n.length;++P)L.push([n[P][0],n[P][1]])}for(var O=new Fs(this.properties),R=0;R<_.length;++R){var T=new Ds;O.geometries.push(T);for(var A=_[R],D=0;D<A.length;++D)T.move_to(A[D])}return O};var Gs=Yn;(Yn.polyline=Yn).polygon=function(t,e){for(var n,i,o,s,a,u,r=1;r<=8;r*=2){for(n=[],o=!(Hn(i=t[t.length-1],e)&r),s=0;s<t.length;s++)(u=!(Hn(a=t[s],e)&r))!==o&&n.push(Vn(i,a,r,e)),u&&n.push(a),i=a,o=u;if(!(t=n).length)break}return n};var Bs=Array.prototype.slice,ks={successCallback:null,verbose:!1,polygons:!1},zs={},js=64,Xs=16,Us=4,Ys=1,Vs=[],Hs=[],Ws=[],Js=[],Zs=[],Ks=[],Qs=[],$s=[],ta=[],ea=[],na=[],ra=[],ia=[],oa=[],sa=[],aa=[],ua=[],ca=[],ha=[],la=[],pa=[],fa=[],ga=[],da=[];Qs[85]=ea[85]=-1,$s[85]=na[85]=0,ta[85]=ra[85]=1,ha[85]=fa[85]=1,la[85]=ga[85]=0,pa[85]=da[85]=1,Vs[85]=Js[85]=0,Hs[85]=Zs[85]=-1,Ws[85]=sa[85]=0,aa[85]=ia[85]=0,ua[85]=oa[85]=1,Ks[85]=ca[85]=1,fa[1]=fa[169]=0,ga[1]=ga[169]=-1,da[1]=da[169]=0,ia[1]=ia[169]=-1,oa[1]=oa[169]=0,sa[1]=sa[169]=0,ea[4]=ea[166]=0,na[4]=na[166]=-1,ra[4]=ra[166]=1,aa[4]=aa[166]=1,ua[4]=ua[166]=0,ca[4]=ca[166]=0,Qs[16]=Qs[154]=0,$s[16]=$s[154]=1,ta[16]=ta[154]=1,Js[16]=Js[154]=1,Zs[16]=Zs[154]=0,Ks[16]=Ks[154]=1,ha[64]=ha[106]=0,la[64]=la[106]=1,pa[64]=pa[106]=0,Vs[64]=Vs[106]=-1,Hs[64]=Hs[106]=0,Ws[64]=Ws[106]=1,ha[2]=ha[168]=0,la[2]=la[168]=-1,pa[2]=pa[168]=1,fa[2]=fa[168]=0,ga[2]=ga[168]=-1,da[2]=da[168]=0,ia[2]=ia[168]=-1,oa[2]=oa[168]=0,sa[2]=sa[168]=0,aa[2]=aa[168]=-1,ua[2]=ua[168]=0,ca[2]=ca[168]=1,Qs[8]=Qs[162]=0,$s[8]=$s[162]=-1,ta[8]=ta[162]=0,ea[8]=ea[162]=0,na[8]=na[162]=-1,ra[8]=ra[162]=1,ia[8]=ia[162]=1,oa[8]=oa[162]=0,sa[8]=sa[162]=1,aa[8]=aa[162]=1,ua[8]=ua[162]=0,ca[8]=ca[162]=0,Qs[32]=Qs[138]=0,$s[32]=$s[138]=1,ta[32]=ta[138]=1,ea[32]=ea[138]=0,na[32]=na[138]=1,ra[32]=ra[138]=0,Vs[32]=Vs[138]=1,Hs[32]=Hs[138]=0,Ws[32]=Ws[138]=0,Js[32]=Js[138]=1,Zs[32]=Zs[138]=0,Ks[32]=Ks[138]=1,fa[128]=fa[42]=0,ga[128]=ga[42]=1,da[128]=da[42]=1,ha[128]=ha[42]=0,la[128]=la[42]=1,pa[128]=pa[42]=0,Vs[128]=Vs[42]=-1,Hs[128]=Hs[42]=0,Ws[128]=Ws[42]=1,Js[128]=Js[42]=-1,Zs[128]=Zs[42]=0,Ks[128]=Ks[42]=0,ea[5]=ea[165]=-1,na[5]=na[165]=0,ra[5]=ra[165]=0,fa[5]=fa[165]=1,ga[5]=ga[165]=0,da[5]=da[165]=0,aa[20]=aa[150]=0,ua[20]=ua[150]=1,ca[20]=ca[150]=1,Js[20]=Js[150]=0,Zs[20]=Zs[150]=-1,Ks[20]=Ks[150]=1,Qs[80]=Qs[90]=-1,$s[80]=$s[90]=0,ta[80]=ta[90]=1,ha[80]=ha[90]=1,la[80]=la[90]=0,pa[80]=pa[90]=1,ia[65]=ia[105]=0,oa[65]=oa[105]=1,sa[65]=sa[105]=0,Vs[65]=Vs[105]=0,Hs[65]=Hs[105]=-1,Ws[65]=Ws[105]=0,Qs[160]=Qs[10]=-1,$s[160]=$s[10]=0,ta[160]=ta[10]=1,ea[160]=ea[10]=-1,na[160]=na[10]=0,ra[160]=ra[10]=0,fa[160]=fa[10]=1,ga[160]=ga[10]=0,da[160]=da[10]=0,ha[160]=ha[10]=1,la[160]=la[10]=0,pa[160]=pa[10]=1,aa[130]=aa[40]=0,ua[130]=ua[40]=1,ca[130]=ca[40]=1,ia[130]=ia[40]=0,oa[130]=oa[40]=1,sa[130]=sa[40]=0,Vs[130]=Vs[40]=0,Hs[130]=Hs[40]=-1,Ws[130]=Ws[40]=0,Js[130]=Js[40]=0,Zs[130]=Zs[40]=-1,Ks[130]=Ks[40]=1,ea[37]=ea[133]=0,na[37]=na[133]=1,ra[37]=ra[133]=1,fa[37]=fa[133]=0,ga[37]=ga[133]=1,da[37]=da[133]=0,Vs[37]=Vs[133]=-1,Hs[37]=Hs[133]=0,Ws[37]=Ws[133]=0,Js[37]=Js[133]=1,Zs[37]=Zs[133]=0,Ks[37]=Ks[133]=0,aa[148]=aa[22]=-1,ua[148]=ua[22]=0,ca[148]=ca[22]=0,fa[148]=fa[22]=0,ga[148]=ga[22]=-1,da[148]=da[22]=1,ha[148]=ha[22]=0,la[148]=la[22]=1,pa[148]=pa[22]=1,Js[148]=Js[22]=-1,Zs[148]=Zs[22]=0,Ks[148]=Ks[22]=1,Qs[82]=Qs[88]=0,$s[82]=$s[88]=-1,ta[82]=ta[88]=1,aa[82]=aa[88]=1,ua[82]=ua[88]=0,ca[82]=ca[88]=1,ia[82]=ia[88]=-1,oa[82]=oa[88]=0,sa[82]=sa[88]=1,ha[82]=ha[88]=0,la[82]=la[88]=-1,pa[82]=pa[88]=0,Qs[73]=Qs[97]=0,$s[73]=$s[97]=1,ta[73]=ta[97]=0,ea[73]=ea[97]=0,na[73]=na[97]=-1,ra[73]=ra[97]=0,ia[73]=ia[97]=1,oa[73]=oa[97]=0,sa[73]=sa[97]=0,Vs[73]=Vs[97]=1,Hs[73]=Hs[97]=0,Ws[73]=Ws[97]=1,Qs[145]=Qs[25]=0,$s[145]=$s[25]=-1,ta[145]=ta[25]=0,ia[145]=ia[25]=1,oa[145]=oa[25]=0,sa[145]=sa[25]=1,fa[145]=fa[25]=0,ga[145]=ga[25]=1,da[145]=da[25]=1,Js[145]=Js[25]=-1,Zs[145]=Zs[25]=0,Ks[145]=Ks[25]=0,ea[70]=ea[100]=0,na[70]=na[100]=1,ra[70]=ra[100]=0,aa[70]=aa[100]=-1,ua[70]=ua[100]=0,ca[70]=ca[100]=1,ha[70]=ha[100]=0,la[70]=la[100]=-1,pa[70]=pa[100]=1,Vs[70]=Vs[100]=1,Hs[70]=Hs[100]=0,Ws[70]=Ws[100]=0,ea[101]=ea[69]=0,na[101]=na[69]=1,ra[101]=ra[69]=0,Vs[101]=Vs[69]=1,Hs[101]=Hs[69]=0,Ws[101]=Ws[69]=0,fa[149]=fa[21]=0,ga[149]=ga[21]=1,da[149]=da[21]=1,Js[149]=Js[21]=-1,Zs[149]=Zs[21]=0,Ks[149]=Ks[21]=0,aa[86]=aa[84]=-1,ua[86]=ua[84]=0,ca[86]=ca[84]=1,ha[86]=ha[84]=0,la[86]=la[84]=-1,pa[86]=pa[84]=1,Qs[89]=Qs[81]=0,$s[89]=$s[81]=-1,ta[89]=ta[81]=0,ia[89]=ia[81]=1,oa[89]=oa[81]=0,sa[89]=sa[81]=1,Qs[96]=Qs[74]=0,$s[96]=$s[74]=1,ta[96]=ta[74]=0,ea[96]=ea[74]=-1,na[96]=na[74]=0,ra[96]=ra[74]=1,ha[96]=ha[74]=1,la[96]=la[74]=0,pa[96]=pa[74]=0,Vs[96]=Vs[74]=1,Hs[96]=Hs[74]=0,Ws[96]=Ws[74]=1,Qs[24]=Qs[146]=0,$s[24]=$s[146]=-1,ta[24]=ta[146]=1,aa[24]=aa[146]=1,ua[24]=ua[146]=0,ca[24]=ca[146]=1,ia[24]=ia[146]=0,oa[24]=oa[146]=1,sa[24]=sa[146]=1,Js[24]=Js[146]=0,Zs[24]=Zs[146]=-1,Ks[24]=Ks[146]=0,ea[6]=ea[164]=-1,na[6]=na[164]=0,ra[6]=ra[164]=1,aa[6]=aa[164]=-1,ua[6]=ua[164]=0,ca[6]=ca[164]=0,fa[6]=fa[164]=0,ga[6]=ga[164]=-1,da[6]=da[164]=1,ha[6]=ha[164]=1,la[6]=la[164]=0,pa[6]=pa[164]=0,ia[129]=ia[41]=0,oa[129]=oa[41]=1,sa[129]=sa[41]=1,fa[129]=fa[41]=0,ga[129]=ga[41]=1,da[129]=da[41]=0,Vs[129]=Vs[41]=-1,Hs[129]=Hs[41]=0,Ws[129]=Ws[41]=0,Js[129]=Js[41]=0,Zs[129]=Zs[41]=-1,Ks[129]=Ks[41]=0,aa[66]=aa[104]=0,ua[66]=ua[104]=1,ca[66]=ca[104]=0,ia[66]=ia[104]=-1,oa[66]=oa[104]=0,sa[66]=sa[104]=1,ha[66]=ha[104]=0,la[66]=la[104]=-1,pa[66]=pa[104]=0,Vs[66]=Vs[104]=0,Hs[66]=Hs[104]=-1,Ws[66]=Ws[104]=1,Qs[144]=Qs[26]=-1,$s[144]=$s[26]=0,ta[144]=ta[26]=0,fa[144]=fa[26]=1,ga[144]=ga[26]=0,da[144]=da[26]=1,ha[144]=ha[26]=0,la[144]=la[26]=1,pa[144]=pa[26]=1,Js[144]=Js[26]=-1,Zs[144]=Zs[26]=0,Ks[144]=Ks[26]=1,ea[36]=ea[134]=0,na[36]=na[134]=1,ra[36]=ra[134]=1,aa[36]=aa[134]=0,ua[36]=ua[134]=1,ca[36]=ca[134]=0,Vs[36]=Vs[134]=0,Hs[36]=Hs[134]=-1,Ws[36]=Ws[134]=1,Js[36]=Js[134]=1,Zs[36]=Zs[134]=0,Ks[36]=Ks[134]=0,Qs[9]=Qs[161]=-1,$s[9]=$s[161]=0,ta[9]=ta[161]=0,ea[9]=ea[161]=0,na[9]=na[161]=-1,ra[9]=ra[161]=0,ia[9]=ia[161]=1,oa[9]=oa[161]=0,sa[9]=sa[161]=0,fa[9]=fa[161]=1,ga[9]=ga[161]=0,da[9]=da[161]=1,Qs[136]=0,$s[136]=1,ta[136]=1,ea[136]=0,na[136]=1,ra[136]=0,aa[136]=-1,ua[136]=0,ca[136]=1,ia[136]=-1,oa[136]=0,sa[136]=0,fa[136]=0,ga[136]=-1,da[136]=0,ha[136]=0,la[136]=-1,pa[136]=1,Vs[136]=1,Hs[136]=0,Ws[136]=0,Js[136]=1,Zs[136]=0,Ks[136]=1,Qs[34]=0,$s[34]=-1,ta[34]=0,ea[34]=0,na[34]=-1,ra[34]=1,aa[34]=1,ua[34]=0,ca[34]=0,ia[34]=1,oa[34]=0,sa[34]=1,fa[34]=0,ga[34]=1,da[34]=1,ha[34]=0,la[34]=1,pa[34]=0,Vs[34]=-1,Hs[34]=0,Ws[34]=1,Js[34]=-1,Zs[34]=0,Ks[34]=0,Qs[35]=0,$s[35]=1,ta[35]=1,ea[35]=0,na[35]=-1,ra[35]=1,aa[35]=1,ua[35]=0,ca[35]=0,ia[35]=-1,oa[35]=0,sa[35]=0,fa[35]=0,ga[35]=-1,da[35]=0,ha[35]=0,la[35]=1,pa[35]=0,Vs[35]=-1,Hs[35]=0,Ws[35]=1,Js[35]=1,Zs[35]=0,Ks[35]=1,Qs[153]=0,$s[153]=1,ta[153]=1,ia[153]=-1,oa[153]=0,sa[153]=0,fa[153]=0,ga[153]=-1,da[153]=0,Js[153]=1,Zs[153]=0,Ks[153]=1,ea[102]=0,na[102]=-1,ra[102]=1,aa[102]=1,ua[102]=0,ca[102]=0,ha[102]=0,la[102]=1,pa[102]=0,Vs[102]=-1,Hs[102]=0,Ws[102]=1,Qs[155]=0,$s[155]=-1,ta[155]=0,ia[155]=1,oa[155]=0,sa[155]=1,fa[155]=0,ga[155]=1,da[155]=1,Js[155]=-1,Zs[155]=0,Ks[155]=0,ea[103]=0,na[103]=1,ra[103]=0,aa[103]=-1,ua[103]=0,ca[103]=1,ha[103]=0,la[103]=-1,pa[103]=1,Vs[103]=1,Hs[103]=0,Ws[103]=0,Qs[152]=0,$s[152]=1,ta[152]=1,aa[152]=-1,ua[152]=0,ca[152]=1,ia[152]=-1,oa[152]=0,sa[152]=0,fa[152]=0,ga[152]=-1,da[152]=0,ha[152]=0,la[152]=-1,pa[152]=1,Js[152]=1,Zs[152]=0,Ks[152]=1,Qs[156]=0,$s[156]=-1,ta[156]=1,aa[156]=1,ua[156]=0,ca[156]=1,ia[156]=-1,oa[156]=0,sa[156]=0,fa[156]=0,ga[156]=-1,da[156]=0,ha[156]=0,la[156]=1,pa[156]=1,Js[156]=-1,Zs[156]=0,Ks[156]=1,Qs[137]=0,$s[137]=1,ta[137]=1,ea[137]=0,na[137]=1,ra[137]=0,ia[137]=-1,oa[137]=0,sa[137]=0,fa[137]=0,ga[137]=-1,da[137]=0,Vs[137]=1,Hs[137]=0,Ws[137]=0,Js[137]=1,Zs[137]=0,Ks[137]=1,Qs[139]=0,$s[139]=1,ta[139]=1,ea[139]=0,na[139]=-1,ra[139]=0,ia[139]=1,oa[139]=0,sa[139]=0,fa[139]=0,ga[139]=1,da[139]=0,Vs[139]=-1,Hs[139]=0,Ws[139]=0,Js[139]=1,Zs[139]=0,Ks[139]=1,Qs[98]=0,$s[98]=-1,ta[98]=0,ea[98]=0,na[98]=-1,ra[98]=1,aa[98]=1,ua[98]=0,ca[98]=0,ia[98]=1,oa[98]=0,sa[98]=1,ha[98]=0,la[98]=1,pa[98]=0,Vs[98]=-1,Hs[98]=0,Ws[98]=1,Qs[99]=0,$s[99]=1,ta[99]=0,ea[99]=0,na[99]=-1,ra[99]=1,aa[99]=1,ua[99]=0,ca[99]=0,ia[99]=-1,oa[99]=0,sa[99]=1,ha[99]=0,la[99]=-1,pa[99]=0,Vs[99]=1,Hs[99]=0,Ws[99]=1,ea[38]=0,na[38]=-1,ra[38]=1,aa[38]=1,ua[38]=0,ca[38]=0,fa[38]=0,ga[38]=1,da[38]=1,ha[38]=0,la[38]=1,pa[38]=0,Vs[38]=-1,Hs[38]=0,Ws[38]=1,Js[38]=-1,Zs[38]=0,Ks[38]=0,ea[39]=0,na[39]=1,ra[39]=1,aa[39]=-1,ua[39]=0,ca[39]=0,fa[39]=0,ga[39]=-1,da[39]=1,ha[39]=0,la[39]=1,pa[39]=0,Vs[39]=-1,Hs[39]=0,Ws[39]=1,Js[39]=1,Zs[39]=0,Ks[39]=0;function ya(t){return[[t.bottomleft,0],[0,0],[0,t.leftbottom]]}function _a(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0]]}function ma(t){return[[t.topright,1],[1,1],[1,t.righttop]]}function va(t){return[[0,t.lefttop],[0,1],[t.topleft,1]]}function xa(t){return[[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop]]}function Ea(t){return[[t.bottomright,0],[t.bottomleft,0],[1,t.righttop],[1,t.rightbottom]]}function wa(t){return[[1,t.righttop],[1,t.rightbottom],[t.topleft,1],[t.topright,1]]}function ba(t){return[[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]}var Ia=[],Na=[],Ca=[],Sa=[],Ma=[],La=[],Pa=[],Oa=[];Sa[1]=Ma[1]=18,Sa[169]=Ma[169]=18,Ca[4]=Na[4]=12,Ca[166]=Na[166]=12,Ia[16]=Oa[16]=4,Ia[154]=Oa[154]=4,La[64]=Pa[64]=22,La[106]=Pa[106]=22,Ca[2]=La[2]=17,Sa[2]=Ma[2]=18,Ca[168]=La[168]=17,Sa[168]=Ma[168]=18,Ia[8]=Sa[8]=9,Na[8]=Ca[8]=12,Ia[162]=Sa[162]=9,Na[162]=Ca[162]=12,Ia[32]=Oa[32]=4,Na[32]=Pa[32]=1,Ia[138]=Oa[138]=4,Na[138]=Pa[138]=1,Ma[128]=Oa[128]=21,La[128]=Pa[128]=22,Ma[42]=Oa[42]=21,La[42]=Pa[42]=22,Na[5]=Ma[5]=14,Na[165]=Ma[165]=14,Ca[20]=Oa[20]=6,Ca[150]=Oa[150]=6,Ia[80]=La[80]=11,Ia[90]=La[90]=11,Sa[65]=Pa[65]=3,Sa[105]=Pa[105]=3,Ia[160]=La[160]=11,Na[160]=Ma[160]=14,Ia[10]=La[10]=11,Na[10]=Ma[10]=14,Ca[130]=Oa[130]=6,Sa[130]=Pa[130]=3,Ca[40]=Oa[40]=6,Sa[40]=Pa[40]=3,Na[101]=Pa[101]=1,Na[69]=Pa[69]=1,Ma[149]=Oa[149]=21,Ma[21]=Oa[21]=21,Ca[86]=La[86]=17,Ca[84]=La[84]=17,Ia[89]=Sa[89]=9,Ia[81]=Sa[81]=9,Ia[96]=Pa[96]=0,Na[96]=La[96]=15,Ia[74]=Pa[74]=0,Na[74]=La[74]=15,Ia[24]=Ca[24]=8,Sa[24]=Oa[24]=7,Ia[146]=Ca[146]=8,Sa[146]=Oa[146]=7,Na[6]=La[6]=15,Ca[6]=Ma[6]=16,Na[164]=La[164]=15,Ca[164]=Ma[164]=16,Sa[129]=Oa[129]=7,Ma[129]=Pa[129]=20,Sa[41]=Oa[41]=7,Ma[41]=Pa[41]=20,Ca[66]=Pa[66]=2,Sa[66]=La[66]=19,Ca[104]=Pa[104]=2,Sa[104]=La[104]=19,Ia[144]=Ma[144]=10,La[144]=Oa[144]=23,Ia[26]=Ma[26]=10,La[26]=Oa[26]=23,Na[36]=Oa[36]=5,Ca[36]=Pa[36]=2,Na[134]=Oa[134]=5,Ca[134]=Pa[134]=2,Ia[9]=Ma[9]=10,Na[9]=Sa[9]=13,Ia[161]=Ma[161]=10,Na[161]=Sa[161]=13,Na[37]=Oa[37]=5,Ma[37]=Pa[37]=20,Na[133]=Oa[133]=5,Ma[133]=Pa[133]=20,Ca[148]=Ma[148]=16,La[148]=Oa[148]=23,Ca[22]=Ma[22]=16,La[22]=Oa[22]=23,Ia[82]=Ca[82]=8,Sa[82]=La[82]=19,Ia[88]=Ca[88]=8,Sa[88]=La[88]=19,Ia[73]=Pa[73]=0,Na[73]=Sa[73]=13,Ia[97]=Pa[97]=0,Na[97]=Sa[97]=13,Ia[145]=Sa[145]=9,Ma[145]=Oa[145]=21,Ia[25]=Sa[25]=9,Ma[25]=Oa[25]=21,Na[70]=Pa[70]=1,Ca[70]=La[70]=17,Na[100]=Pa[100]=1,Ca[100]=La[100]=17,Ia[34]=Sa[34]=9,Na[34]=Ca[34]=12,Ma[34]=Oa[34]=21,La[34]=Pa[34]=22,Ia[136]=Oa[136]=4,Na[136]=Pa[136]=1,Ca[136]=La[136]=17,Sa[136]=Ma[136]=18,Ia[35]=Oa[35]=4,Na[35]=Ca[35]=12,Sa[35]=Ma[35]=18,La[35]=Pa[35]=22,Ia[153]=Oa[153]=4,Sa[153]=Ma[153]=18,Na[102]=Ca[102]=12,La[102]=Pa[102]=22,Ia[155]=Sa[155]=9,Ma[155]=Oa[155]=23,Na[103]=Pa[103]=1,Ca[103]=La[103]=17,Ia[152]=Oa[152]=4,Ca[152]=La[152]=17,Sa[152]=Ma[152]=18,Ia[156]=Ca[156]=8,Sa[156]=Ma[156]=18,La[156]=Oa[156]=23,Ia[137]=Oa[137]=4,Na[137]=Pa[137]=1,Sa[137]=Ma[137]=18,Ia[139]=Oa[139]=4,Na[139]=Sa[139]=13,Ma[139]=Pa[139]=20,Ia[98]=Sa[98]=9,Na[98]=Ca[98]=12,La[98]=Pa[98]=22,Ia[99]=Pa[99]=0,Na[99]=Ca[99]=12,Sa[99]=La[99]=19,Na[38]=Ca[38]=12,Ma[38]=Oa[38]=21,La[38]=Pa[38]=22,Na[39]=Oa[39]=5,Ca[39]=Ma[39]=16,La[39]=Pa[39]=22;var Ra=[];Ra[1]=Ra[169]=ya,Ra[4]=Ra[166]=_a,Ra[16]=Ra[154]=ma,Ra[64]=Ra[106]=va,Ra[168]=Ra[2]=xa,Ra[162]=Ra[8]=Ea,Ra[138]=Ra[32]=wa,Ra[42]=Ra[128]=ba,Ra[5]=Ra[165]=function(t){return[[0,0],[0,t.leftbottom],[1,t.rightbottom],[1,0]]},Ra[20]=Ra[150]=function(t){return[[1,0],[t.bottomright,0],[t.topright,1],[1,1]]},Ra[80]=Ra[90]=function(t){return[[1,1],[1,t.righttop],[0,t.lefttop],[0,1]]},Ra[65]=Ra[105]=function(t){return[[t.bottomleft,0],[0,0],[0,1],[t.topleft,1]]},Ra[160]=Ra[10]=function(t){return[[1,t.righttop],[1,t.rightbottom],[0,t.leftbottom],[0,t.lefttop]]},Ra[130]=Ra[40]=function(t){return[[t.topleft,1],[t.topright,1],[t.bottomright,0],[t.bottomleft,0]]},Ra[85]=function(){return[[0,0],[0,1],[1,1],[1,0]]},Ra[101]=Ra[69]=function(t){return[[1,t.rightbottom],[1,0],[0,0],[0,1],[t.topleft,1]]},Ra[149]=Ra[21]=function(t){return[[t.topright,1],[1,1],[1,0],[0,0],[0,t.leftbottom]]},Ra[86]=Ra[84]=function(t){return[[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[1,1]]},Ra[89]=Ra[81]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,1]]},Ra[96]=Ra[74]=function(t){return[[1,t.righttop],[1,t.rightbottom],[0,t.lefttop],[0,1],[t.topleft,1]]},Ra[24]=Ra[146]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[t.topright,1]]},Ra[6]=Ra[164]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop]]},Ra[129]=Ra[41]=function(t){return[[t.topright,1],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topleft,1]]},Ra[66]=Ra[104]=function(t){return[[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1],[t.topleft,1]]},Ra[144]=Ra[26]=function(t){return[[1,1],[1,t.righttop],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},Ra[36]=Ra[134]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[t.topleft,1],[t.topright,1]]},Ra[9]=Ra[161]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,t.leftbottom]]},Ra[37]=Ra[133]=function(t){return[[1,t.rightbottom],[1,0],[0,0],[0,t.leftbottom],[t.topleft,1],[t.topright,1]]},Ra[148]=Ra[22]=function(t){return[[1,1],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},Ra[82]=Ra[88]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1]]},Ra[73]=Ra[97]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,1],[t.topleft,1]]},Ra[145]=Ra[25]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topright,1]]},Ra[70]=Ra[100]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[t.topleft,1]]},Ra[34]=function(t){return[ba(t),Ea(t)]},Ra[35]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]},Ra[136]=function(t){return[wa(t),xa(t)]},Ra[153]=function(t){return[ma(t),ya(t)]},Ra[102]=function(t){return[_a(t),va(t)]},Ra[155]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topright,1]]},Ra[103]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[t.topleft,1]]},Ra[152]=function(t){return[ma(t),xa(t)]},Ra[156]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},Ra[137]=function(t){return[wa(t),ya(t)]},Ra[139]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topleft,1],[t.topright,1]]},Ra[98]=function(t){return[Ea(t),va(t)]},Ra[99]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1],[t.topleft,1]]},Ra[38]=function(t){return[_a(t),ba(t)]},Ra[39]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]};function Ta(e){this.id=Ta.buildId(e),this.coordinates=e,this.innerEdges=[],this.outerEdges=[],this.outerEdgesSorted=!1}Ta.buildId=function(t){return t.join(",")},Ta.prototype.removeInnerEdge=function(t){this.innerEdges=this.innerEdges.filter(function(e){return e.from.id!==t.from.id})},Ta.prototype.removeOuterEdge=function(t){this.outerEdges=this.outerEdges.filter(function(e){return e.to.id!==t.to.id})},Ta.prototype.addOuterEdge=function(t){this.outerEdges.push(t),this.outerEdgesSorted=!1},Ta.prototype.sortOuterEdges=function(){var t=this;this.outerEdgesSorted||(this.outerEdges.sort(function(e,n){var r=e.to,i=n.to;if(0<=r.coordinates[0]-t.coordinates[0]&&i.coordinates[0]-t.coordinates[0]<0)return 1;if(r.coordinates[0]-t.coordinates[0]<0&&0<=i.coordinates[0]-t.coordinates[0])return-1;if(r.coordinates[0]-t.coordinates[0]==0&&i.coordinates[0]-t.coordinates[0]==0)return 0<=r.coordinates[1]-t.coordinates[1]||0<=i.coordinates[1]-t.coordinates[1]?r.coordinates[1]-i.coordinates[1]:i.coordinates[1]-r.coordinates[1];var o=xr(t.coordinates,r.coordinates,i.coordinates);return o<0?1:0<o?-1:Math.pow(r.coordinates[0]-t.coordinates[0],2)+Math.pow(r.coordinates[1]-t.coordinates[1],2)-(Math.pow(i.coordinates[0]-t.coordinates[0],2)+Math.pow(i.coordinates[1]-t.coordinates[1],2))}),this.outerEdgesSorted=!0)},Ta.prototype.getOuterEdges=function(){return this.sortOuterEdges(),this.outerEdges},Ta.prototype.getOuterEdge=function(t){return this.sortOuterEdges(),this.outerEdges[t]},Ta.prototype.addInnerEdge=function(t){this.innerEdges.push(t)};function Aa(t,e){this.from=t,this.to=e,this.next=void 0,this.label=void 0,this.symetric=void 0,this.ring=void 0,this.from.addOuterEdge(this),this.to.addInnerEdge(this)}Aa.prototype.getSymetric=function(){return this.symetric||(this.symetric=new Aa(this.to,this.from),this.symetric.symetric=this),this.symetric},Aa.prototype.deleteEdge=function(){this.from.removeOuterEdge(this),this.to.removeInnerEdge(this)},Aa.prototype.isEqual=function(t){return this.from.id===t.from.id&&this.to.id===t.to.id},Aa.prototype.toString=function(){return"Edge { "+this.from.id+" -> "+this.to.id+" }"},Aa.prototype.toLineString=function(){return a([this.from.coordinates,this.to.coordinates])},Aa.prototype.compareTo=function(t){return xr(t.from.coordinates,t.to.coordinates,this.to.coordinates)};function Da(){this.edges=[],this.polygon=void 0,this.envelope=void 0}var Fa={length:{configurable:!0}};Da.prototype.push=function(t){this[this.edges.length]=t,this.edges.push(t),this.polygon=this.envelope=void 0},Da.prototype.get=function(t){return this.edges[t]},Fa.length.get=function(){return this.edges.length},Da.prototype.forEach=function(t){this.edges.forEach(t)},Da.prototype.map=function(t){return this.edges.map(t)},Da.prototype.some=function(t){return this.edges.some(t)},Da.prototype.isValid=function(){return!0},Da.prototype.isHole=function(){var t=this,e=this.edges.reduce(function(e,n,r){return n.from.coordinates[1]>t.edges[e].from.coordinates[1]&&(e=r),e},0),n=(0===e?this.length:e)-1,r=(e+1)%this.length,i=xr(this.edges[n].from.coordinates,this.edges[e].from.coordinates,this.edges[r].from.coordinates);return 0===i?this.edges[n].from.coordinates[0]>this.edges[r].from.coordinates[0]:0<i},Da.prototype.toMultiPoint=function(){return l(this.edges.map(function(t){return t.from.coordinates}))},Da.prototype.toPolygon=function(){if(this.polygon)return this.polygon;var t=this.edges.map(function(t){return t.from.coordinates});return t.push(this.edges[0].from.coordinates),this.polygon=o([t])},Da.prototype.getEnvelope=function(){return this.envelope?this.envelope:this.envelope=he(this.toPolygon())},Da.findEdgeRingContaining=function(t,e){var n,i,o=t.getEnvelope();return e.forEach(function(e){var a,s=e.getEnvelope();i&&(n=i.getEnvelope()),!function(t,e){var n=t.geometry.coordinates.map(function(t){return t[0]}),r=t.geometry.coordinates.map(function(t){return t[1]}),i=e.geometry.coordinates.map(function(t){return t[0]}),o=e.geometry.coordinates.map(function(t){return t[1]});return Math.max(null,n)===Math.max(null,i)&&Math.max(null,r)===Math.max(null,o)&&Math.min(null,n)===Math.min(null,i)&&Math.min(null,r)===Math.min(null,o)}(s,o)&&Er(s,o)&&(a=t.map(function(t){return t.from.coordinates}).find(function(t){return!e.some(function(e){return function(t,e){return t[0]===e[0]&&t[1]===e[1]}(t,e.from.coordinates)})}))&&e.inside(r(a))&&(i&&!Er(n,s)||(i=e))}),i},Da.prototype.inside=function(t){return Pt(t,this.toPolygon())},Object.defineProperties(Da.prototype,Fa);function qa(){this.edges=[],this.nodes={}}qa.fromGeoJson=function(t){!function(t){if(!t)throw new Error("No geojson passed");if("FeatureCollection"!==t.type&&"GeometryCollection"!==t.type&&"MultiLineString"!==t.type&&"LineString"!==t.type&&"Feature"!==t.type)throw new Error("Invalid input type '"+t.type+"'. Geojson must be FeatureCollection, GeometryCollection, LineString, MultiLineString or Feature")}(t);var e=new qa;return F(t,function(t){H(t,"LineString","Graph::fromGeoJson"),M(t,function(t,n){var r,i;return t&&(r=e.getNode(t),i=e.getNode(n),e.addEdge(r,i)),n})}),e},qa.prototype.getNode=function(t){var e=Ta.buildId(t);return this.nodes[e]||(this.nodes[e]=new Ta(t))},qa.prototype.addEdge=function(t,e){var n=new Aa(t,e),r=n.getSymetric();this.edges.push(n),this.edges.push(r)},qa.prototype.deleteDangles=function(){var t=this;Object.keys(this.nodes).map(function(e){return t.nodes[e]}).forEach(function(e){return t._removeIfDangle(e)})},qa.prototype._removeIfDangle=function(t){var n,e=this;t.innerEdges.length<=1&&(n=t.getOuterEdges().map(function(t){return t.to}),this.removeNode(t),n.forEach(function(t){return e._removeIfDangle(t)}))},qa.prototype.deleteCutEdges=function(){var t=this;this._computeNextCWEdges(),this._findLabeledEdgeRings(),this.edges.forEach(function(e){e.label===e.symetric.label&&(t.removeEdge(e.symetric),t.removeEdge(e))})},qa.prototype._computeNextCWEdges=function(t){var e=this;void 0===t?Object.keys(this.nodes).forEach(function(t){return e._computeNextCWEdges(e.nodes[t])}):t.getOuterEdges().forEach(function(e,n){t.getOuterEdge((0===n?t.getOuterEdges().length:n)-1).symetric.next=e})},qa.prototype._computeNextCCWEdges=function(t,e){for(var n,r,i=t.getOuterEdges(),o=i.length-1;0<=o;--o){var s=i[o],a=s.symetric,u=void 0,c=void 0;s.label===e&&(u=s),a.label===e&&(c=a),u&&c&&(c&&(r=c),u&&(r&&(r.next=u,r=void 0),n=n||u))}r&&(r.next=n)},qa.prototype._findLabeledEdgeRings=function(){var t=[],e=0;return this.edges.forEach(function(n){if(!(0<=n.label)){t.push(n);for(var r=n;r.label=e,r=r.next,!n.isEqual(r););e++}}),t},qa.prototype.getEdgeRings=function(){var t=this;this._computeNextCWEdges(),this.edges.forEach(function(t){t.label=void 0}),this._findLabeledEdgeRings().forEach(function(e){t._findIntersectionNodes(e).forEach(function(n){t._computeNextCCWEdges(n,e.label)})});var e=[];return this.edges.forEach(function(n){n.ring||e.push(t._findEdgeRing(n))}),e},qa.prototype._findIntersectionNodes=function(t){for(var e=[],n=t;function(){var r=0;n.from.getOuterEdges().forEach(function(e){e.label===t.label&&++r}),1<r&&e.push(n.from),n=n.next}(),!t.isEqual(n););return e},qa.prototype._findEdgeRing=function(t){for(var e=t,n=new Da;n.push(e),e.ring=n,e=e.next,!t.isEqual(e););return n},qa.prototype.removeNode=function(t){var e=this;t.getOuterEdges().forEach(function(t){return e.removeEdge(t)}),t.innerEdges.forEach(function(t){return e.removeEdge(t)}),delete this.nodes[t.id]},qa.prototype.removeEdge=function(t){this.edges=this.edges.filter(function(e){return!e.isEqual(t)}),t.deleteEdge()};function za(t){this.precision=t&&t.precision?t.precision:17,this.direction=!(!t||!t.direction)&&t.direction,this.pseudoNode=!(!t||!t.pseudoNode)&&t.pseudoNode,this.objectComparator=t&&t.objectComparator?t.objectComparator:Rr}var Ga=mt(function(t,e){function n(t){var n,e=[];for(n in t)e.push(n);return e}(t.exports="function"==typeof Object.keys?Object.keys:n).shim=n}),Ba=(Ga.shim,mt(function(t,e){function n(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function r(t){return t&&"object"==typeof t&&"number"==typeof t.length&&Object.prototype.hasOwnProperty.call(t,"callee")&&!Object.prototype.propertyIsEnumerable.call(t,"callee")||!1}var i="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();(e=t.exports=i?n:r).supported=n,e.unsupported=r})),ka=(Ba.supported,Ba.unsupported,mt(function(t){function e(t){return null==t}function n(t){return t&&"object"==typeof t&&"number"==typeof t.length&&"function"==typeof t.copy&&"function"==typeof t.slice&&!(0<t.length&&"number"!=typeof t[0])}var r=Array.prototype.slice,i=t.exports=function(t,o,s){return s=s||{},t===o||(t instanceof Date&&o instanceof Date?t.getTime()===o.getTime():!t||!o||"object"!=typeof t&&"object"!=typeof o?s.strict?t===o:t==o:function(t,o,s){var a,u;if(e(t)||e(o))return!1;if(t.prototype!==o.prototype)return!1;if(Ba(t))return!!Ba(o)&&(t=r.call(t),o=r.call(o),i(t,o,s));if(n(t)){if(!n(o))return!1;if(t.length!==o.length)return!1;for(a=0;a<t.length;a++)if(t[a]!==o[a])return!1;return!0}try{var c=Ga(t),h=Ga(o)}catch(t){return!1}if(c.length!=h.length)return!1;for(c.sort(),h.sort(),a=c.length-1;0<=a;a--)if(c[a]!=h[a])return!1;for(a=c.length-1;0<=a;a--)if(u=c[a],!i(t[u],o[u],s))return!1;return typeof t==typeof o}(t,o,s))}}));za.prototype.compare=function(t,e){if(t.type!==e.type||!Or(t,e))return!1;switch(t.type){case"Point":return this.compareCoord(t.coordinates,e.coordinates);case"LineString":return this.compareLine(t.coordinates,e.coordinates,0,!1);case"Polygon":return this.comparePolygon(t,e);case"Feature":return this.compareFeature(t,e);default:if(0===t.type.indexOf("Multi")){var n=this,r=Pr(t),i=Pr(e);return r.every(function(t){return this.some(function(e){return n.compare(t,e)})},i)}}return!1},za.prototype.compareCoord=function(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n].toFixed(this.precision)!==e[n].toFixed(this.precision))return!1;return!0},za.prototype.compareLine=function(t,e,n,r){if(!Or(t,e))return!1;var i=this.pseudoNode?t:this.removePseudo(t),o=this.pseudoNode?e:this.removePseudo(e);if(!r||this.compareCoord(i[0],o[0])||(o=this.fixStartIndex(o,i))){var s=this.compareCoord(i[n],o[n]);return this.direction||s?this.comparePath(i,o):!!this.compareCoord(i[n],o[o.length-(1+n)])&&this.comparePath(i.slice().reverse(),o)}},za.prototype.fixStartIndex=function(t,e){for(var n,r=-1,i=0;i<t.length;i++)if(this.compareCoord(t[i],e[0])){r=i;break}return 0<=r&&(n=[].concat(t.slice(r,t.length),t.slice(1,r+1))),n},za.prototype.comparePath=function(t,e){var n=this;return t.every(function(t,e){return n.compareCoord(t,this[e])},e)},za.prototype.comparePolygon=function(t,e){if(this.compareLine(t.coordinates[0],e.coordinates[0],1,!0)){var n=t.coordinates.slice(1,t.coordinates.length),r=e.coordinates.slice(1,e.coordinates.length),i=this;return n.every(function(t){return this.some(function(e){return i.compareLine(t,e,1,!0)})},r)}return!1},za.prototype.compareFeature=function(t,e){return!(t.id!==e.id||!this.objectComparator(t.properties,e.properties)||!this.compareBBox(t,e))&&this.compare(t.geometry,e.geometry)},za.prototype.compareBBox=function(t,e){return!!(!t.bbox&&!e.bbox||t.bbox&&e.bbox&&this.compareCoord(t.bbox,e.bbox))},za.prototype.removePseudo=function(t){return t};function Za(t,e,n){var r=Math.abs(t-e);return n?r:r*r}function eu(t,e,n,r){var a,i=[],o=[],s=[],u=!1,c=r||1e4,h=t.length,l=t[0].length,p=0<l,f=[];if(n)i="kmrand"==n?function(t,e){for(var n={},r=[],i=e<<2,o=t.length,s=0<t[0].length;r.length<e&&0<i--;){var a=t[Math.floor(Math.random()*o)],u=s?a.join("_"):""+a;n[u]||(n[u]=!0,r.push(a))}if(r.length<e)throw new Error("Error initializating clusters");return r}(t,e):"kmpp"==n?function(t,e){var n=t[0].length?Ja:Za,r=[],i=t.length,o=0<t[0].length,s=t[Math.floor(Math.random()*i)];for(o&&s.join("_"),r.push(s);r.length<e;){for(var a=[],u=r.length,c=0,h=[],l=0;l<i;l++){for(var p=1/0,f=0;f<u;f++){var g=n(t[l],r[f]);g<=p&&(p=g)}a[l]=p}for(var d=0;d<i;d++)c+=a[d];for(var y=0;y<i;y++)h[y]={i:y,v:t[y],pr:a[y]/c,cs:0};h.sort(function(t,e){return t.pr-e.pr}),h[0].cs=h[0].pr;for(var _=1;_<i;_++)h[_].cs=h[_-1].cs+h[_].pr;for(var m=Math.random(),v=0;v<i-1&&h[v++].cs<m;);r.push(h[v-1].v)}return r}(t,e):n;else for(var g={};i.length<e;){var d=Math.floor(Math.random()*h);g[d]||(g[d]=!0,i.push(t[d]))}do{Ar(e,0,f);for(var y=0;y<h;y++){for(var _=1/0,m=0,v=0;v<e;v++)(a=p?Ka(t[y],i[v]):Math.abs(t[y]-i[v]))<=_&&(_=a,m=v);f[s[y]=m]++}for(var x=[],E=(o=[],0);E<e;E++)x[E]=p?Ar(l,0,x[E]):0,o[E]=i[E];if(p){for(var w=0;w<e;w++)i[w]=[];for(var b=0;b<h;b++)for(var I=x[s[b]],N=t[b],C=0;C<l;C++)I[C]+=N[C];u=!0;for(var S=0;S<e;S++){for(var M=i[S],L=x[S],P=o[S],O=f[S],R=0;R<l;R++)M[R]=L[R]/O||0;if(u)for(var T=0;T<l;T++)if(P[T]!=M[T]){u=!1;break}}}else{for(var A=0;A<h;A++)x[s[A]]+=t[A];for(var D=0;D<e;D++)i[D]=x[D]/f[D]||0;u=!0;for(var F=0;F<e;F++)if(o[F]!=i[F]){u=!1;break}}u=u||--c<=0}while(!u);return{it:1e4-c,k:e,idxs:s,centroids:i}}var ja=za,Xa=mt(function(t){function e(t,e,n,r){this.dataset=[],this.epsilon=1,this.minPts=2,this.distance=this._euclideanDistance,this.clusters=[],this.noise=[],this._visited=[],this._assigned=[],this._datasetLength=0,this._init(t,e,n,r)}e.prototype.run=function(t,e,n,r){this._init(t,e,n,r);for(var o,s,i=0;i<this._datasetLength;i++){1!==this._visited[i]&&(this._visited[i]=1,(o=this._regionQuery(i)).length<this.minPts?this.noise.push(i):(s=this.clusters.length,this.clusters.push([]),this._addToCluster(i,s),this._expandCluster(s,o)))}return this.clusters},e.prototype._init=function(t,e,n,r){if(t){if(!(t instanceof Array))throw Error("Dataset must be of type array, "+typeof t+" given");this.dataset=t,this.clusters=[],this.noise=[],this._datasetLength=t.length,this._visited=new Array(this._datasetLength),this._assigned=new Array(this._datasetLength)}e&&(this.epsilon=e),n&&(this.minPts=n),r&&(this.distance=r)},e.prototype._expandCluster=function(t,e){for(var n=0;n<e.length;n++){var i,r=e[n];1!==this._visited[r]&&(this._visited[r]=1,(i=this._regionQuery(r)).length>=this.minPts&&(e=this._mergeArrays(e,i))),1!==this._assigned[r]&&this._addToCluster(r,t)}},e.prototype._addToCluster=function(t,e){this.clusters[e].push(t),this._assigned[t]=1},e.prototype._regionQuery=function(t){for(var e=[],n=0;n<this._datasetLength;n++)this.distance(this.dataset[t],this.dataset[n])<this.epsilon&&e.push(n);return e},e.prototype._mergeArrays=function(t,e){for(var n=e.length,r=0;r<n;r++){var i=e[r];t.indexOf(i)<0&&t.push(i)}return t},e.prototype._euclideanDistance=function(t,e){for(var n=0,r=Math.min(t.length,e.length);r--;)n+=(t[r]-e[r])*(t[r]-e[r]);return Math.sqrt(n)},t.exports&&(t.exports=e)}),Ua=mt(function(t){function e(t,e,n){this.k=3,this.dataset=[],this.assignments=[],this.centroids=[],this.init(t,e,n)}e.prototype.init=function(t,e,n){this.assignments=[],this.centroids=[],void 0!==t&&(this.dataset=t),void 0!==e&&(this.k=e),void 0!==n&&(this.distance=n)},e.prototype.run=function(t,e){this.init(t,e);for(var n=this.dataset.length,r=0;r<this.k;r++)this.centroids[r]=this.randomCentroid();for(var i=!0;i;){i=this.assign();for(var o=0;o<this.k;o++){for(var s=new Array(h),a=0,u=0;u<h;u++)s[u]=0;for(var c=0;c<n;c++){var h=this.dataset[c].length;if(o===this.assignments[c]){for(u=0;u<h;u++)s[u]+=this.dataset[c][u];a++}}if(0<a){for(u=0;u<h;u++)s[u]/=a;this.centroids[o]=s}else this.centroids[o]=this.randomCentroid(),i=!0}}return this.getClusters()},e.prototype.randomCentroid=function(){for(var t,e,n=this.dataset.length-1;e=Math.round(Math.random()*n),t=this.dataset[e],0<=this.centroids.indexOf(t););return t},e.prototype.assign=function(){for(var t,e=!1,n=this.dataset.length,r=0;r<n;r++)(t=this.argmin(this.dataset[r],this.centroids,this.distance))!=this.assignments[r]&&(this.assignments[r]=t,e=!0);return e},e.prototype.getClusters=function(){for(var t,e=new Array(this.k),n=0;n<this.assignments.length;n++)void 0===e[t=this.assignments[n]]&&(e[t]=[]),e[t].push(n);return e},e.prototype.argmin=function(t,e,n){for(var r,i=Number.MAX_VALUE,o=0,s=e.length,a=0;a<s;a++)(r=n(t,e[a]))<i&&(i=r,o=a);return o},e.prototype.distance=function(t,e){for(var n=0,r=Math.min(t.length,e.length);r--;){var i=t[r]-e[r];n+=i*i}return Math.sqrt(n)},t.exports&&(t.exports=e)}),Ya=mt(function(t){function e(t,e,n){this._queue=[],this._priorities=[],this._sorting="desc",this._init(t,e,n)}e.prototype.insert=function(t,e){for(var n=this._queue.length,r=n;r--;){var i=this._priorities[r];"desc"===this._sorting?i<e&&(n=r):e<i&&(n=r)}this._insertAt(t,e,n)},e.prototype.remove=function(t){for(var e=this._queue.length;e--;)if(t===this._queue[e]){this._queue.splice(e,1),this._priorities.splice(e,1);break}},e.prototype.forEach=function(t){this._queue.forEach(t)},e.prototype.getElements=function(){return this._queue},e.prototype.getElementPriority=function(t){return this._priorities[t]},e.prototype.getPriorities=function(){return this._priorities},e.prototype.getElementsWithPriorities=function(){for(var t=[],e=0,n=this._queue.length;e<n;e++)t.push([this._queue[e],this._priorities[e]]);return t},e.prototype._init=function(t,e,n){if(t&&e){if(this._queue=[],this._priorities=[],t.length!==e.length)throw new Error("Arrays must have the same length");for(var r=0;r<t.length;r++)this.insert(t[r],e[r])}n&&(this._sorting=n)},e.prototype._insertAt=function(t,e,n){this._queue.length===n?(this._queue.push(t),this._priorities.push(e)):(this._queue.splice(n,0,t),this._priorities.splice(n,0,e))},t.exports&&(t.exports=e)}),Va=mt(function(t){function e(t,e,n,r){this.epsilon=1,this.minPts=1,this.distance=this._euclideanDistance,this._reachability=[],this._processed=[],this._coreDistance=0,this._orderedList=[],this._init(t,e,n,r)}var n;t.exports&&(n=Ya),e.prototype.run=function(t,e,r,i){this._init(t,e,r,i);for(var a,u,c,o=0,s=this.dataset.length;o<s;o++){1!==this._processed[o]&&(this._processed[o]=1,this.clusters.push([o]),a=this.clusters.length-1,this._orderedList.push(o),u=new n(null,null,"asc"),c=this._regionQuery(o),void 0!==this._distanceToCore(o)&&(this._updateQueue(o,c,u),this._expandCluster(a,u)))}return this.clusters},e.prototype.getReachabilityPlot=function(){for(var t=[],e=0,n=this._orderedList.length;e<n;e++){var r=this._orderedList[e],i=this._reachability[r];t.push([r,i])}return t},e.prototype._init=function(t,e,n,r){if(t){if(!(t instanceof Array))throw Error("Dataset must be of type array, "+typeof t+" given");this.dataset=t,this.clusters=[],this._reachability=new Array(this.dataset.length),this._processed=new Array(this.dataset.length),this._coreDistance=0,this._orderedList=[]}e&&(this.epsilon=e),n&&(this.minPts=n),r&&(this.distance=r)},e.prototype._updateQueue=function(t,e,n){var r=this;this._coreDistance=this._distanceToCore(t),e.forEach(function(e){var i,o;void 0===r._processed[e]&&(i=r.distance(r.dataset[t],r.dataset[e]),o=Math.max(r._coreDistance,i),void 0===r._reachability[e]?(r._reachability[e]=o,n.insert(e,o)):o<r._reachability[e]&&(r._reachability[e]=o,n.remove(e),n.insert(e,o)))})},e.prototype._expandCluster=function(t,e){for(var n=e.getElements(),r=0,i=n.length;r<i;r++){var s,o=n[r];void 0===this._processed[o]&&(s=this._regionQuery(o),this._processed[o]=1,this.clusters[t].push(o),this._orderedList.push(o),void 0!==this._distanceToCore(o)&&(this._updateQueue(o,s,e),this._expandCluster(t,e)))}},e.prototype._distanceToCore=function(t){for(var e=this.epsilon,n=0;n<e;n++)if(this._regionQuery(t,n).length>=this.minPts)return n},e.prototype._regionQuery=function(t,e){e=e||this.epsilon;for(var n=[],r=0,i=this.dataset.length;r<i;r++)this.distance(this.dataset[t],this.dataset[r])<e&&n.push(r);return n},e.prototype._euclideanDistance=function(t,e){for(var n=0,r=Math.min(t.length,e.length);r--;)n+=(t[r]-e[r])*(t[r]-e[r]);return Math.sqrt(n)},t.exports&&(t.exports=e)}),Ha=mt(function(t){t.exports&&(t.exports={DBSCAN:Xa,KMEANS:Ua,OPTICS:Va,PriorityQueue:Ya})}),Wa=(Ha.DBSCAN,Ha.KMEANS,Ha.OPTICS,Ha.PriorityQueue,function(t,e,n){for(var r=t.length,i=0,o=0;o<r;o++){var s=(t[o]||0)-(e[o]||0);i+=s*s}return n?Math.sqrt(i):i}),Ja=Wa,Ka=Wa,nu={search:function(t,e,n,r){t.cleanDirty();var i=(r=r||{}).heuristic||nu.heuristics.manhattan,o=r.closest||!1,s=new Br(function(t){return t.f}),a=e;for(e.h=i(e,n),s.push(e);0<s.size();){var u=s.pop();if(u===n)return Fr(u);u.closed=!0;for(var c=t.neighbors(u),h=0,l=c.length;h<l;++h){var f,g,p=c[h];p.closed||p.isWall()||(f=u.g+p.getCost(u),(!(g=p.visited)||f<p.g)&&(p.visited=!0,p.parent=u,p.h=p.h||i(p,n),p.g=f,p.f=p.g+p.h,t.markDirty(p),o&&(p.h<a.h||p.h===a.h&&p.g<a.g)&&(a=p),g?s.rescoreElement(p):s.push(p)))}}return o?Fr(a):[]},heuristics:{manhattan:function(t,e){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)},diagonal:function(t,e){var n=Math.sqrt(2),r=Math.abs(e.x-t.x),i=Math.abs(e.y-t.y);return+(r+i)+(n-2)*Math.min(r,i)}},cleanNode:function(t){t.f=0,t.g=0,t.h=0,t.visited=!1,t.closed=!1,t.parent=null}};qr.prototype.init=function(){this.dirtyNodes=[];for(var t=0;t<this.nodes.length;t++)nu.cleanNode(this.nodes[t])},qr.prototype.cleanDirty=function(){for(var t=0;t<this.dirtyNodes.length;t++)nu.cleanNode(this.dirtyNodes[t]);this.dirtyNodes=[]},qr.prototype.markDirty=function(t){this.dirtyNodes.push(t)},qr.prototype.neighbors=function(t){var e=[],n=t.x,r=t.y,i=this.grid;return i[n-1]&&i[n-1][r]&&e.push(i[n-1][r]),i[n+1]&&i[n+1][r]&&e.push(i[n+1][r]),i[n]&&i[n][r-1]&&e.push(i[n][r-1]),i[n]&&i[n][r+1]&&e.push(i[n][r+1]),this.diagonal&&(i[n-1]&&i[n-1][r-1]&&e.push(i[n-1][r-1]),i[n+1]&&i[n+1][r-1]&&e.push(i[n+1][r-1]),i[n-1]&&i[n-1][r+1]&&e.push(i[n-1][r+1]),i[n+1]&&i[n+1][r+1]&&e.push(i[n+1][r+1])),e},qr.prototype.toString=function(){for(var t,e,n,r,i=[],o=this.grid,s=0,a=o.length;s<a;s++){for(t=[],n=0,r=(e=o[s]).length;n<r;n++)t.push(e[n].weight);i.push(t.join(" "))}return i.join("\n")},Gr.prototype.toString=function(){return"["+this.x+" "+this.y+"]"},Gr.prototype.getCost=function(t){return t&&t.x!==this.x&&t.y!==this.y?1.41421*this.weight:this.weight},Gr.prototype.isWall=function(){return 0===this.weight},Br.prototype={push:function(t){this.content.push(t),this.sinkDown(this.content.length-1)},pop:function(){var t=this.content[0],e=this.content.pop();return 0<this.content.length&&(this.content[0]=e,this.bubbleUp(0)),t},remove:function(t){var e=this.content.indexOf(t),n=this.content.pop();e!==this.content.length-1&&(this.content[e]=n,this.scoreFunction(n)<this.scoreFunction(t)?this.sinkDown(e):this.bubbleUp(e))},size:function(){return this.content.length},rescoreElement:function(t){this.sinkDown(this.content.indexOf(t))},sinkDown:function(t){for(var e=this.content[t];0<t;){var n=(t+1>>1)-1,r=this.content[n];if(!(this.scoreFunction(e)<this.scoreFunction(r)))break;this.content[n]=e,this.content[t]=r,t=n}},bubbleUp:function(t){for(var e=this.content.length,n=this.content[t],r=this.scoreFunction(n);;){var i,u,c,o=t+1<<1,s=o-1,a=null;if(s<e&&(u=this.content[s],(i=this.scoreFunction(u))<r&&(a=s)),o<e&&(c=this.content[o],this.scoreFunction(c)<(null===a?r:i)&&(a=o)),null===a)break;this.content[t]=this.content[a],this.content[a]=n,t=a}}};function ru(t){return function(){return t}}jr.prototype={constructor:jr,insert:function(t,e){var n,r,i;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else n=this._?(t=Vr(this._),e.P=null,(e.N=t).P=t.L=e,t):(e.P=e.N=null,this._=e,null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)n===(r=n.U).L?(i=r.R)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.R&&(Ur(this,n),n=(t=n).U),n.C=!1,r.C=!0,Yr(this,r)):(i=r.L)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.L&&(Yr(this,n),n=(t=n).U),n.C=!1,r.C=!0,Ur(this,r)),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,r,i=t.U,o=t.L,s=t.R,n=o?s?Vr(s):o:s;if(i?i.L===t?i.L=n:i.R=n:this._=n,o&&s?(r=n.C,n.C=t.C,((n.L=o).U=n)!==s?(i=n.U,n.U=t.U,t=n.R,i.L=t,(n.R=s).U=n):(n.U=i,t=(i=n).R)):(r=t.C,t=n),t&&(t.U=i),!r)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===i.L){if((e=i.R).C&&(e.C=!1,i.C=!0,Ur(this,i),e=i.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,Yr(this,e),e=i.R),e.C=i.C,i.C=e.R.C=!1,Ur(this,i),t=this._;break}}else if((e=i.L).C&&(e.C=!1,i.C=!0,Yr(this,i),e=i.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,Ur(this,e),e=i.L),e.C=i.C,i.C=e.L.C=!1,Yr(this,i),t=this._;break}e.C=!0,i=(t=i).U}while(!t.C);t&&(t.C=!1)}}};var iu,ou,su,au,uu,cu=[],hu=[],lu=1e-6,pu=1e-12;hi.prototype={constructor:hi,polygons:function(){var t=this.edges;return this.cells.map(function(e){var n=e.halfedges.map(function(n){return $r(e,t[n])});return n.data=e.site.data,n})},triangles:function(){var t=[],e=this.edges;return this.cells.forEach(function(n,r){if(o=(i=n.halfedges).length)for(var i,o,s,a=n.site,u=-1,c=e[i[o-1]],h=c.left===a?c.right:c.left;++u<o;)s=h,h=(c=e[i[u]]).left===a?c.right:c.left,s&&h&&r<s.index&&r<h.index&&function(t,e,n){return(t[0]-n[0])*(e[1]-t[1])-(t[0]-e[0])*(n[1]-t[1])}(a,s,h)<0&&t.push([a.data,s.data,h.data])}),t},links:function(){return this.edges.filter(function(t){return t.right}).map(function(t){return{source:t.left.data,target:t.right.data}})},find:function(t,e,n){for(var r,i,o=this,s=o._found||0,a=o.cells.length;!(i=o.cells[s]);)if(++s>=a)return null;for(var u=t-i.site[0],c=e-i.site[1],h=u*u+c*c;i=o.cells[r=s],s=null,i.halfedges.forEach(function(n){var u,c,l,r=o.edges[n],a=r.left;!(a!==i.site&&a||(a=r.right))||(l=(u=t-a[0])*u+(c=e-a[1])*c)<h&&(h=l,s=a.index)}),null!==s;);return o._found=r,null==n||h<=n*n?i.site:null}};var gu=Object.freeze({randomPosition:_i,randomPoint:mi,randomPolygon:vi,randomLineString:xi}),du=Object.freeze({getCluster:wi,clusterEach:bi,clusterReduce:Ii,createBins:Ni,applyFilter:Ci,propertiesContainsFilter:Si,filterProperties:Mi});"fill"in Array.prototype||Object.defineProperty(Array.prototype,"fill",{configurable:!0,value:function(t){if(null==this)throw new TypeError(this+" is not an object");for(var e=Object(this),n=Math.max(Math.min(e.length,9007199254740991),0)||0,r=((r=1 in arguments&&parseInt(Number(arguments[1]),10)||0)<0?Math.max(n+r,0):Math.min(r,n)),i=((i=2 in arguments&&void 0!==arguments[2]?parseInt(Number(arguments[2]),10)||0:n)<0?Math.max(n+arguments[2],0):Math.min(i,n));r<i;)e[r]=t,++r;return e},writable:!0}),Number.isFinite=Number.isFinite||function(t){return"number"==typeof t&&isFinite(t)},Number.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},Number.parseFloat=Number.parseFloat||parseFloat,Number.isNaN=Number.isNaN||function(t){return t!=t},Math.trunc=Math.trunc||function(t){return t<0?Math.ceil(t):Math.floor(t)};function yu(){}yu.prototype.interfaces_=function(){return[]},yu.prototype.getClass=function(){return yu},yu.prototype.equalsWithTolerance=function(t,e,n){return Math.abs(t-e)<=n};function _u(){}function mu(){}var vu={MAX_VALUE:{configurable:!0}};mu.isNaN=function(t){return Number.isNaN(t)},mu.doubleToLongBits=function(t){return t},mu.longBitsToDouble=function(t){return t},mu.isInfinite=function(t){return!Number.isFinite(t)},vu.MAX_VALUE.get=function(){return Number.MAX_VALUE},Object.defineProperties(mu,vu);function xu(){}function Eu(){}function wu(){}var bu=function t(){var e;this.x=null,this.y=null,this.z=null,0===arguments.length?(this.x=0,this.y=0,this.z=t.NULL_ORDINATE):1===arguments.length?(e=arguments[0],this.x=e.x,this.y=e.y,this.z=e.z):2===arguments.length?(this.x=arguments[0],this.y=arguments[1],this.z=t.NULL_ORDINATE):3===arguments.length&&(this.x=arguments[0],this.y=arguments[1],this.z=arguments[2])},Iu={DimensionalComparator:{configurable:!0},serialVersionUID:{configurable:!0},NULL_ORDINATE:{configurable:!0},X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0}};bu.prototype.setOrdinate=function(t,e){switch(t){case bu.X:this.x=e;break;case bu.Y:this.y=e;break;case bu.Z:this.z=e;break;default:throw new _u}},bu.prototype.equals2D=function(){if(1===arguments.length){var t=arguments[0];return this.x===t.x&&this.y===t.y}if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!yu.equalsWithTolerance(this.x,e.x,n)&&!!yu.equalsWithTolerance(this.y,e.y,n)}},bu.prototype.getOrdinate=function(t){switch(t){case bu.X:return this.x;case bu.Y:return this.y;case bu.Z:return this.z}throw new _u},bu.prototype.equals3D=function(t){return this.x===t.x&&this.y===t.y&&(this.z===t.z||mu.isNaN(this.z))&&mu.isNaN(t.z)},bu.prototype.equals=function(t){return t instanceof bu&&this.equals2D(t)},bu.prototype.equalInZ=function(t,e){return yu.equalsWithTolerance(this.z,t.z,e)},bu.prototype.compareTo=function(t){return this.x<t.x?-1:this.x>t.x?1:this.y<t.y?-1:this.y>t.y?1:0},bu.prototype.clone=function(){},bu.prototype.copy=function(){return new bu(this)},bu.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"},bu.prototype.distance3D=function(t){var e=this.x-t.x,n=this.y-t.y,r=this.z-t.z;return Math.sqrt(e*e+n*n+r*r)},bu.prototype.distance=function(t){var e=this.x-t.x,n=this.y-t.y;return Math.sqrt(e*e+n*n)},bu.prototype.hashCode=function(){return 37*(629+bu.hashCode(this.x))+bu.hashCode(this.y)},bu.prototype.setCoordinate=function(t){this.x=t.x,this.y=t.y,this.z=t.z},bu.prototype.interfaces_=function(){return[xu,Eu,Li]},bu.prototype.getClass=function(){return bu},bu.hashCode=function(){if(1===arguments.length){var e=mu.doubleToLongBits(arguments[0]);return Math.trunc((e^e)>>>32)}},Iu.DimensionalComparator.get=function(){return Nu},Iu.serialVersionUID.get=function(){return 0x5cbf2c235c7e5800},Iu.NULL_ORDINATE.get=function(){return mu.NaN},Iu.X.get=function(){return 0},Iu.Y.get=function(){return 1},Iu.Z.get=function(){return 2},Object.defineProperties(bu,Iu);var Nu=function(t){if(this._dimensionsToTest=2,0!==arguments.length&&1===arguments.length){if(2!==t&&3!==t)throw new _u;this._dimensionsToTest=t}};Nu.prototype.compare=function(t,e){var n=t,r=e,i=Nu.compare(n.x,r.x);if(0!==i)return i;var o=Nu.compare(n.y,r.y);return 0!==o?o:this._dimensionsToTest<=2?0:Nu.compare(n.z,r.z)},Nu.prototype.interfaces_=function(){return[wu]},Nu.prototype.getClass=function(){return Nu},Nu.compare=function(t,e){return t<e?-1:e<t?1:mu.isNaN(t)?mu.isNaN(e)?0:-1:mu.isNaN(e)?1:0};function Cu(){}Cu.prototype.create=function(){},Cu.prototype.interfaces_=function(){return[]},Cu.prototype.getClass=function(){return Cu};function Su(){}var Mu={INTERIOR:{configurable:!0},BOUNDARY:{configurable:!0},EXTERIOR:{configurable:!0},NONE:{configurable:!0}};Su.prototype.interfaces_=function(){return[]},Su.prototype.getClass=function(){return Su},Su.toLocationSymbol=function(t){switch(t){case Su.EXTERIOR:return"e";case Su.BOUNDARY:return"b";case Su.INTERIOR:return"i";case Su.NONE:return"-"}throw new _u},Mu.INTERIOR.get=function(){return 0},Mu.BOUNDARY.get=function(){return 1},Mu.EXTERIOR.get=function(){return 2},Mu.NONE.get=function(){return-1},Object.defineProperties(Su,Mu);function Lu(t,e){return t.interfaces_&&-1<t.interfaces_().indexOf(e)}function Pu(){}var Ou={LOG_10:{configurable:!0}};Pu.prototype.interfaces_=function(){return[]},Pu.prototype.getClass=function(){return Pu},Pu.log10=function(t){var e=Math.log(t);return mu.isInfinite(e)||mu.isNaN(e)?e:e/Pu.LOG_10},Pu.min=function(t,e,n,r){var i=t;return e<i&&(i=e),n<i&&(i=n),r<i&&(i=r),i},Pu.clamp=function(){if("number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1],n=arguments[2];return t<e?e:n<t?n:t}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var r=arguments[0],i=arguments[1],o=arguments[2];return r<i?i:o<r?o:r}},Pu.wrap=function(t,e){return t<0?e- -t%e:t%e},Pu.max=function(){if(3===arguments.length){var e=arguments[1],n=arguments[2],r=arguments[0];return r<e&&(r=e),r<n&&(r=n),r}if(4===arguments.length){var o=arguments[1],s=arguments[2],a=arguments[3],u=arguments[0];return u<o&&(u=o),u<s&&(u=s),u<a&&(u=a),u}},Pu.average=function(t,e){return(t+e)/2},Ou.LOG_10.get=function(){return Math.log(10)},Object.defineProperties(Pu,Ou);function Ru(t){this.str=t}Ru.prototype.append=function(t){this.str+=t},Ru.prototype.setCharAt=function(t,e){this.str=this.str.substr(0,t)+e+this.str.substr(t+1)},Ru.prototype.toString=function(t){return this.str};function Tu(t){this.value=t}Tu.prototype.intValue=function(){return this.value},Tu.prototype.compareTo=function(t){return this.value<t?-1:this.value>t?1:0},Tu.isNaN=function(t){return Number.isNaN(t)};function Au(){}Au.isWhitespace=function(t){return t<=32&&0<=t||127===t},Au.toUpperCase=function(t){return t.toUpperCase()};function Du(){var e,n,i,o;this._hi=0,(this._lo=0)===arguments.length?this.init(0):1===arguments.length?"number"==typeof arguments[0]?(e=arguments[0],this.init(e)):arguments[0]instanceof Du?(n=arguments[0],this.init(n)):"string"==typeof arguments[0]&&Du.call(this,Du.parse(arguments[0])):2===arguments.length&&(i=arguments[0],o=arguments[1],this.init(i,o))}var Fu={PI:{configurable:!0},TWO_PI:{configurable:!0},PI_2:{configurable:!0},E:{configurable:!0},NaN:{configurable:!0},EPS:{configurable:!0},SPLIT:{configurable:!0},MAX_PRINT_DIGITS:{configurable:!0},TEN:{configurable:!0},ONE:{configurable:!0},SCI_NOT_EXPONENT_CHAR:{configurable:!0},SCI_NOT_ZERO:{configurable:!0}};Du.prototype.le=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<=t._lo},Du.prototype.extractSignificantDigits=function(t,e){var n=this.abs(),r=Du.magnitude(n._hi),i=Du.TEN.pow(r);(n=n.divide(i)).gt(Du.TEN)?(n=n.divide(Du.TEN),r+=1):n.lt(Du.ONE)&&(n=n.multiply(Du.TEN),--r);for(var o=r+1,s=new Ru,a=Du.MAX_PRINT_DIGITS-1,u=0;u<=a;u++){t&&u===o&&s.append(".");var c=Math.trunc(n._hi);if(c<0)break;var h=!1,l=0,l=9<c?(h=!0,"9"):"0"+c;s.append(l),n=n.subtract(Du.valueOf(c)).multiply(Du.TEN),h&&n.selfAdd(Du.TEN);var p=!0,f=Du.magnitude(n._hi);if(f<0&&Math.abs(f)>=a-u&&(p=!1),!p)break}return e[0]=r,s.toString()},Du.prototype.sqr=function(){return this.multiply(this)},Du.prototype.doubleValue=function(){return this._hi+this._lo},Du.prototype.subtract=function(){if(arguments[0]instanceof Du){var t=arguments[0];return this.add(t.negate())}if("number"==typeof arguments[0]){var e=arguments[0];return this.add(-e)}},Du.prototype.equals=function(){if(1===arguments.length){var t=arguments[0];return this._hi===t._hi&&this._lo===t._lo}},Du.prototype.isZero=function(){return 0===this._hi&&0===this._lo},Du.prototype.selfSubtract=function(){if(arguments[0]instanceof Du){var t=arguments[0];return this.isNaN()?this:this.selfAdd(-t._hi,-t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.isNaN()?this:this.selfAdd(-e,0)}},Du.prototype.getSpecialNumberString=function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null},Du.prototype.min=function(t){return this.le(t)?this:t},Du.prototype.selfDivide=function(){if(1===arguments.length){if(arguments[0]instanceof Du){var t=arguments[0];return this.selfDivide(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfDivide(e,0)}}else if(2===arguments.length){var o,s,a,h,n=arguments[0],r=arguments[1],i=null,c=null,l=null,u=this._hi/n;return l=(i=(c=Du.SPLIT*u)-(i=c-u))*(s=(l=Du.SPLIT*n)-(l-n))-(h=u*n)+i*(a=n-s)+(o=u-i)*s+o*a,l=u+(c=(this._hi-h-l+this._lo-u*r)/n),this._hi=l,this._lo=u-l+c,this}},Du.prototype.dump=function(){return"DD<"+this._hi+", "+this._lo+">"},Du.prototype.divide=function(){if(arguments[0]instanceof Du){var i,o,a,t=arguments[0],e=null,r=null,n=(o=this._hi/t._hi)-(e=(s=Du.SPLIT*o)-(s-o)),u=e*(r=(u=Du.SPLIT*t._hi)-(u-t._hi))-(a=o*t._hi)+e*(i=t._hi-r)+n*r+n*i,s=(this._hi-a-u+this._lo-o*t._lo)/t._hi;return new Du(u=o+s,o-u+s)}if("number"==typeof arguments[0]){var c=arguments[0];return mu.isNaN(c)?Du.createNaN():Du.copy(this).selfDivide(c,0)}},Du.prototype.ge=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>=t._lo},Du.prototype.pow=function(t){if(0===t)return Du.valueOf(1);var e=new Du(this),n=Du.valueOf(1),r=Math.abs(t);if(1<r)for(;0<r;)r%2==1&&n.selfMultiply(e),0<(r/=2)&&(e=e.sqr());else n=e;return t<0?n.reciprocal():n},Du.prototype.ceil=function(){if(this.isNaN())return Du.NaN;var t=Math.ceil(this._hi),e=0;return t===this._hi&&(e=Math.ceil(this._lo)),new Du(t,e)},Du.prototype.compareTo=function(t){return this._hi<t._hi?-1:this._hi>t._hi?1:this._lo<t._lo?-1:this._lo>t._lo?1:0},Du.prototype.rint=function(){return this.isNaN()?this:this.add(.5).floor()},Du.prototype.setValue=function(){if(arguments[0]instanceof Du){var t=arguments[0];return this.init(t),this}if("number"==typeof arguments[0]){var e=arguments[0];return this.init(e),this}},Du.prototype.max=function(t){return this.ge(t)?this:t},Du.prototype.sqrt=function(){if(this.isZero())return Du.valueOf(0);if(this.isNegative())return Du.NaN;var t=1/Math.sqrt(this._hi),e=this._hi*t,n=Du.valueOf(e),r=this.subtract(n.sqr())._hi*(.5*t);return n.add(r)},Du.prototype.selfAdd=function(){if(1===arguments.length){if(arguments[0]instanceof Du){var t=arguments[0];return this.selfAdd(t._hi,t._lo)}if("number"==typeof arguments[0]){var n,a,e=arguments[0],i=null,s=null,o=(i=this._hi+e)-(s=i-this._hi),r=(a=e-s+(this._hi-o)+this._lo)+(i-(n=i+a));return this._hi=n+r,this._lo=r+(n-this._hi),this}}else if(2===arguments.length){var h,d,y,u=arguments[0],c=arguments[1],f=this._hi+u,l=this._lo+c,g=f-(d=f-this._hi),p=l-(y=l-this._lo),_=(h=f+(d=u-d+(this._hi-g)+l))+(d=c-y+(this._lo-p)+(d+(f-h))),m=d+(h-_);return this._hi=_,this._lo=m,this}},Du.prototype.selfMultiply=function(){if(1===arguments.length){if(arguments[0]instanceof Du){var t=arguments[0];return this.selfMultiply(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfMultiply(e,0)}}else if(2===arguments.length){var o,s,a,u,n=arguments[0],r=arguments[1],i=(u=Du.SPLIT*this._hi)-this._hi,c=Du.SPLIT*n;i=u-i,o=this._hi-i,s=c-n;var h=(u=this._hi*n)+(c=i*(s=c-s)-u+i*(a=n-s)+o*s+o*a+(this._hi*r+this._lo*n)),l=c+(u-h);return this._hi=h,this._lo=l,this}},Du.prototype.selfSqr=function(){return this.selfMultiply(this)},Du.prototype.floor=function(){if(this.isNaN())return Du.NaN;var t=Math.floor(this._hi),e=0;return t===this._hi&&(e=Math.floor(this._lo)),new Du(t,e)},Du.prototype.negate=function(){return this.isNaN()?this:new Du(-this._hi,-this._lo)},Du.prototype.clone=function(){},Du.prototype.multiply=function(){if(arguments[0]instanceof Du){var t=arguments[0];return t.isNaN()?Du.createNaN():Du.copy(this).selfMultiply(t)}if("number"==typeof arguments[0]){var e=arguments[0];return mu.isNaN(e)?Du.createNaN():Du.copy(this).selfMultiply(e,0)}},Du.prototype.isNaN=function(){return mu.isNaN(this._hi)},Du.prototype.intValue=function(){return Math.trunc(this._hi)},Du.prototype.toString=function(){var t=Du.magnitude(this._hi);return-3<=t&&t<=20?this.toStandardNotation():this.toSciNotation()},Du.prototype.toStandardNotation=function(){var t=this.getSpecialNumberString();if(null!==t)return t;var o,e=new Array(1).fill(null),n=this.extractSignificantDigits(!0,e),r=e[0]+1,i=n;return"."===n.charAt(0)?i="0"+n:r<0?i="0."+Du.stringOfChar("0",-r)+n:-1===n.indexOf(".")&&(o=r-n.length,i=n+Du.stringOfChar("0",o)+".0"),this.isNegative()?"-"+i:i},Du.prototype.reciprocal=function(){var r,i,o,s,a,t=null,e=(i=1/this._hi)-(t=(o=Du.SPLIT*i)-(o-i)),n=(a=Du.SPLIT*this._hi)-this._hi,u=i+(o=(1-(s=i*this._hi)-(t*(n=a-n)-s+t*(r=this._hi-n)+e*n+e*r)-i*this._lo)/this._hi);return new Du(u,i-u+o)},Du.prototype.toSciNotation=function(){if(this.isZero())return Du.SCI_NOT_ZERO;var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!1,e),r=Du.SCI_NOT_EXPONENT_CHAR+e[0];if("0"===n.charAt(0))throw new Error("Found leading zero: "+n);var i="";1<n.length&&(i=n.substring(1));var o=n.charAt(0)+"."+i;return this.isNegative()?"-"+o+r:o+r},Du.prototype.abs=function(){return this.isNaN()?Du.NaN:this.isNegative()?this.negate():new Du(this)},Du.prototype.isPositive=function(){return(0<this._hi||0===this._hi)&&0<this._lo},Du.prototype.lt=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<t._lo},Du.prototype.add=function(){if(arguments[0]instanceof Du){var t=arguments[0];return Du.copy(this).selfAdd(t)}if("number"==typeof arguments[0]){var e=arguments[0];return Du.copy(this).selfAdd(e)}},Du.prototype.init=function(){var t,e,n,r;1===arguments.length?"number"==typeof arguments[0]?(t=arguments[0],this._hi=t,this._lo=0):arguments[0]instanceof Du&&(e=arguments[0],this._hi=e._hi,this._lo=e._lo):2===arguments.length&&(n=arguments[0],r=arguments[1],this._hi=n,this._lo=r)},Du.prototype.gt=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>t._lo},Du.prototype.isNegative=function(){return(this._hi<0||0===this._hi)&&this._lo<0},Du.prototype.trunc=function(){return this.isNaN()?Du.NaN:this.isPositive()?this.floor():this.ceil()},Du.prototype.signum=function(){return 0<this._hi?1:this._hi<0?-1:0<this._lo?1:this._lo<0?-1:0},Du.prototype.interfaces_=function(){return[Li,xu,Eu]},Du.prototype.getClass=function(){return Du},Du.sqr=function(t){return Du.valueOf(t).selfMultiply(t)},Du.valueOf=function(){return"string"==typeof arguments[0]?Du.parse(arguments[0]):"number"==typeof arguments[0]?new Du(arguments[0]):void 0},Du.sqrt=function(t){return Du.valueOf(t).sqrt()},Du.parse=function(t){for(var e=0,n=t.length;Au.isWhitespace(t.charAt(e));)e++;var i,r=!1;e<n&&("-"!==(i=t.charAt(e))&&"+"!==i||(e++,"-"===i&&(r=!0)));for(var o=new Du,s=0,a=0,u=0;!(n<=e);){var c=t.charAt(e);if(e++,Au.isDigit(c)){var h=c-"0";o.selfMultiply(Du.TEN),o.selfAdd(h),s++}else{if("."!==c){if("e"!==c&&"E"!==c)throw new Error("Unexpected character '"+c+"' at position "+e+" in string "+t);var l=t.substring(e);try{u=Tu.parseInt(l)}catch(e){throw e instanceof Error?new Error("Invalid exponent "+l+" in string "+t):e}break}a=s}}var g,d,p=o,f=s-a-u;return 0==f?p=o:0<f?(g=Du.TEN.pow(f),p=o.divide(g)):f<0&&(d=Du.TEN.pow(-f),p=o.multiply(d)),r?p.negate():p},Du.createNaN=function(){return new Du(mu.NaN,mu.NaN)},Du.copy=function(t){return new Du(t)},Du.magnitude=function(t){var e=Math.abs(t),n=Math.log(e)/Math.log(10),r=Math.trunc(Math.floor(n));return 10*Math.pow(10,r)<=e&&(r+=1),r},Du.stringOfChar=function(t,e){for(var n=new Ru,r=0;r<e;r++)n.append(t);return n.toString()},Fu.PI.get=function(){return new Du(3.141592653589793,12246467991473532e-32)},Fu.TWO_PI.get=function(){return new Du(6.283185307179586,24492935982947064e-32)},Fu.PI_2.get=function(){return new Du(1.5707963267948966,6123233995736766e-32)},Fu.E.get=function(){return new Du(2.718281828459045,14456468917292502e-32)},Fu.NaN.get=function(){return new Du(mu.NaN,mu.NaN)},Fu.EPS.get=function(){return 123259516440783e-46},Fu.SPLIT.get=function(){return 134217729},Fu.MAX_PRINT_DIGITS.get=function(){return 32},Fu.TEN.get=function(){return Du.valueOf(10)},Fu.ONE.get=function(){return Du.valueOf(1)},Fu.SCI_NOT_EXPONENT_CHAR.get=function(){return"E"},Fu.SCI_NOT_ZERO.get=function(){return"0.0E0"},Object.defineProperties(Du,Fu);function qu(){}var Gu={DP_SAFE_EPSILON:{configurable:!0}};qu.prototype.interfaces_=function(){return[]},qu.prototype.getClass=function(){return qu},qu.orientationIndex=function(t,e,n){var r=qu.orientationIndexFilter(t,e,n);if(r<=1)return r;var i=Du.valueOf(e.x).selfAdd(-t.x),o=Du.valueOf(e.y).selfAdd(-t.y),s=Du.valueOf(n.x).selfAdd(-e.x),a=Du.valueOf(n.y).selfAdd(-e.y);return i.selfMultiply(a).selfSubtract(o.selfMultiply(s)).signum()},qu.signOfDet2x2=function(t,e,n,r){return t.multiply(r).selfSubtract(e.multiply(n)).signum()},qu.intersection=function(t,e,n,r){var i=Du.valueOf(r.y).selfSubtract(n.y).selfMultiply(Du.valueOf(e.x).selfSubtract(t.x)),o=Du.valueOf(r.x).selfSubtract(n.x).selfMultiply(Du.valueOf(e.y).selfSubtract(t.y)),s=i.subtract(o),a=Du.valueOf(r.x).selfSubtract(n.x).selfMultiply(Du.valueOf(t.y).selfSubtract(n.y)),u=Du.valueOf(r.y).selfSubtract(n.y).selfMultiply(Du.valueOf(t.x).selfSubtract(n.x)),c=a.subtract(u).selfDivide(s).doubleValue(),h=Du.valueOf(t.x).selfAdd(Du.valueOf(e.x).selfSubtract(t.x).selfMultiply(c)).doubleValue(),l=Du.valueOf(e.x).selfSubtract(t.x).selfMultiply(Du.valueOf(t.y).selfSubtract(n.y)),p=Du.valueOf(e.y).selfSubtract(t.y).selfMultiply(Du.valueOf(t.x).selfSubtract(n.x)),f=l.subtract(p).selfDivide(s).doubleValue(),g=Du.valueOf(n.y).selfAdd(Du.valueOf(r.y).selfSubtract(n.y).selfMultiply(f)).doubleValue();return new bu(h,g)},qu.orientationIndexFilter=function(t,e,n){var r=null,i=(t.x-n.x)*(e.y-n.y),o=(t.y-n.y)*(e.x-n.x),s=i-o;if(0<i){if(o<=0)return qu.signum(s);r=i+o}else{if(!(i<0))return qu.signum(s);if(0<=o)return qu.signum(s);r=-i-o}var a=qu.DP_SAFE_EPSILON*r;return a<=s||a<=-s?qu.signum(s):2},qu.signum=function(t){return 0<t?1:t<0?-1:0},Gu.DP_SAFE_EPSILON.get=function(){return 1e-15},Object.defineProperties(qu,Gu);function Bu(){}var ku={X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0},M:{configurable:!0}};ku.X.get=function(){return 0},ku.Y.get=function(){return 1},ku.Z.get=function(){return 2},ku.M.get=function(){return 3},Bu.prototype.setOrdinate=function(t,e,n){},Bu.prototype.size=function(){},Bu.prototype.getOrdinate=function(t,e){},Bu.prototype.getCoordinate=function(){},Bu.prototype.getCoordinateCopy=function(t){},Bu.prototype.getDimension=function(){},Bu.prototype.getX=function(t){},Bu.prototype.clone=function(){},Bu.prototype.expandEnvelope=function(t){},Bu.prototype.copy=function(){},Bu.prototype.getY=function(t){},Bu.prototype.toCoordinateArray=function(){},Bu.prototype.interfaces_=function(){return[Eu]},Bu.prototype.getClass=function(){return Bu},Object.defineProperties(Bu,ku);function zu(){}function Xu(){}var ju=function(t){function e(){t.call(this,"Projective point not representable on the Cartesian plane.")}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(zu);Xu.arraycopy=function(t,e,n,r,i){for(var o=0,s=e;s<e+i;s++)n[r+o]=t[s],o++},Xu.getProperty=function(t){return{"line.separator":"\n"}[t]};function Uu(){var e,n,r,i,o,s,a,u,c,h,l,p,f,g,d,y,_,m,v,x;this.x=null,this.y=null,this.w=null,0===arguments.length?(this.x=0,this.y=0,this.w=1):1===arguments.length?(e=arguments[0],this.x=e.x,this.y=e.y,this.w=1):2===arguments.length?"number"==typeof arguments[0]&&"number"==typeof arguments[1]?(n=arguments[0],r=arguments[1],this.x=n,this.y=r,this.w=1):arguments[0]instanceof Uu&&arguments[1]instanceof Uu?(i=arguments[0],o=arguments[1],this.x=i.y*o.w-o.y*i.w,this.y=o.x*i.w-i.x*o.w,this.w=i.x*o.y-o.x*i.y):arguments[0]instanceof bu&&arguments[1]instanceof bu&&(s=arguments[0],a=arguments[1],this.x=s.y-a.y,this.y=a.x-s.x,this.w=s.x*a.y-a.x*s.y):3===arguments.length?(u=arguments[0],c=arguments[1],h=arguments[2],this.x=u,this.y=c,this.w=h):4===arguments.length&&(p=arguments[1],f=arguments[2],g=arguments[3],d=(l=arguments[0]).y-p.y,y=p.x-l.x,_=l.x*p.y-p.x*l.y,m=f.y-g.y,v=g.x-f.x,x=f.x*g.y-g.x*f.y,this.x=y*x-v*_,this.y=m*_-d*x,this.w=d*v-m*y)}Uu.prototype.getY=function(){var t=this.y/this.w;if(mu.isNaN(t)||mu.isInfinite(t))throw new ju;return t},Uu.prototype.getX=function(){var t=this.x/this.w;if(mu.isNaN(t)||mu.isInfinite(t))throw new ju;return t},Uu.prototype.getCoordinate=function(){var t=new bu;return t.x=this.getX(),t.y=this.getY(),t},Uu.prototype.interfaces_=function(){return[]},Uu.prototype.getClass=function(){return Uu},Uu.intersection=function(t,e,n,r){var i=t.y-e.y,o=e.x-t.x,s=t.x*e.y-e.x*t.y,a=n.y-r.y,u=r.x-n.x,c=n.x*r.y-r.x*n.y,h=i*u-a*o,l=(o*c-u*s)/h,p=(a*s-i*c)/h;if(mu.isNaN(l)||mu.isInfinite(l)||mu.isNaN(p)||mu.isInfinite(p))throw new ju;return new bu(l,p)};function Yu(){var e,n,r,i,o,s,a,u;this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,0===arguments.length?this.init():1===arguments.length?arguments[0]instanceof bu?(e=arguments[0],this.init(e.x,e.x,e.y,e.y)):arguments[0]instanceof Yu&&(n=arguments[0],this.init(n)):2===arguments.length?(r=arguments[0],i=arguments[1],this.init(r.x,i.x,r.y,i.y)):4===arguments.length&&(o=arguments[0],s=arguments[1],a=arguments[2],u=arguments[3],this.init(o,s,a,u))}var Vu={serialVersionUID:{configurable:!0}};Yu.prototype.getArea=function(){return this.getWidth()*this.getHeight()},Yu.prototype.equals=function(t){if(!(t instanceof Yu))return!1;var e=t;return this.isNull()?e.isNull():this._maxx===e.getMaxX()&&this._maxy===e.getMaxY()&&this._minx===e.getMinX()&&this._miny===e.getMinY()},Yu.prototype.intersection=function(t){if(this.isNull()||t.isNull()||!this.intersects(t))return new Yu;var e=this._minx>t._minx?this._minx:t._minx,n=this._miny>t._miny?this._miny:t._miny,r=this._maxx<t._maxx?this._maxx:t._maxx,i=this._maxy<t._maxy?this._maxy:t._maxy;return new Yu(e,r,n,i)},Yu.prototype.isNull=function(){return this._maxx<this._minx},Yu.prototype.getMaxX=function(){return this._maxx},Yu.prototype.covers=function(){if(1===arguments.length){if(arguments[0]instanceof bu){var t=arguments[0];return this.covers(t.x,t.y)}if(arguments[0]instanceof Yu){var e=arguments[0];return!this.isNull()&&!e.isNull()&&e.getMinX()>=this._minx&&e.getMaxX()<=this._maxx&&e.getMinY()>=this._miny&&e.getMaxY()<=this._maxy}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return!this.isNull()&&n>=this._minx&&n<=this._maxx&&r>=this._miny&&r<=this._maxy}},Yu.prototype.intersects=function(){if(1===arguments.length){if(arguments[0]instanceof Yu){var t=arguments[0];return!this.isNull()&&!t.isNull()&&!(t._minx>this._maxx||t._maxx<this._minx||t._miny>this._maxy||t._maxy<this._miny)}if(arguments[0]instanceof bu){var e=arguments[0];return this.intersects(e.x,e.y)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return!this.isNull()&&!(n>this._maxx||n<this._minx||r>this._maxy||r<this._miny)}},Yu.prototype.getMinY=function(){return this._miny},Yu.prototype.getMinX=function(){return this._minx},Yu.prototype.expandToInclude=function(){var n,r;if(1===arguments.length){if(arguments[0]instanceof bu){var t=arguments[0];this.expandToInclude(t.x,t.y)}else if(arguments[0]instanceof Yu){var e=arguments[0];if(e.isNull())return null;this.isNull()?(this._minx=e.getMinX(),this._maxx=e.getMaxX(),this._miny=e.getMinY(),this._maxy=e.getMaxY()):(e._minx<this._minx&&(this._minx=e._minx),e._maxx>this._maxx&&(this._maxx=e._maxx),e._miny<this._miny&&(this._miny=e._miny),e._maxy>this._maxy&&(this._maxy=e._maxy))}}else 2===arguments.length&&(n=arguments[0],r=arguments[1],this.isNull()?(this._minx=n,this._maxx=n,this._miny=r,this._maxy=r):(n<this._minx&&(this._minx=n),n>this._maxx&&(this._maxx=n),r<this._miny&&(this._miny=r),r>this._maxy&&(this._maxy=r)))},Yu.prototype.minExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t<e?t:e},Yu.prototype.getWidth=function(){return this.isNull()?0:this._maxx-this._minx},Yu.prototype.compareTo=function(t){var e=t;return this.isNull()?e.isNull()?0:-1:e.isNull()?1:this._minx<e._minx?-1:this._minx>e._minx?1:this._miny<e._miny?-1:this._miny>e._miny?1:this._maxx<e._maxx?-1:this._maxx>e._maxx?1:this._maxy<e._maxy?-1:this._maxy>e._maxy?1:0},Yu.prototype.translate=function(t,e){if(this.isNull())return null;this.init(this.getMinX()+t,this.getMaxX()+t,this.getMinY()+e,this.getMaxY()+e)},Yu.prototype.toString=function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"},Yu.prototype.setToNull=function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1},Yu.prototype.getHeight=function(){return this.isNull()?0:this._maxy-this._miny},Yu.prototype.maxExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return e<t?t:e},Yu.prototype.expandBy=function(){if(1===arguments.length){var t=arguments[0];this.expandBy(t,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this.isNull())return null;this._minx-=e,this._maxx+=e,this._miny-=n,this._maxy+=n,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}},Yu.prototype.contains=function(){if(1===arguments.length){if(arguments[0]instanceof Yu){var t=arguments[0];return this.covers(t)}if(arguments[0]instanceof bu){var e=arguments[0];return this.covers(e)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return this.covers(n,r)}},Yu.prototype.centre=function(){return this.isNull()?null:new bu((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)},Yu.prototype.init=function(){var t,e,n,r,i,o,s,a;0===arguments.length?this.setToNull():1===arguments.length?arguments[0]instanceof bu?(t=arguments[0],this.init(t.x,t.x,t.y,t.y)):arguments[0]instanceof Yu&&(e=arguments[0],this._minx=e._minx,this._maxx=e._maxx,this._miny=e._miny,this._maxy=e._maxy):2===arguments.length?(n=arguments[0],r=arguments[1],this.init(n.x,r.x,n.y,r.y)):4===arguments.length&&(s=arguments[2],a=arguments[3],(i=arguments[0])<(o=arguments[1])?(this._minx=i,this._maxx=o):(this._minx=o,this._maxx=i),s<a?(this._miny=s,this._maxy=a):(this._miny=a,this._maxy=s))},Yu.prototype.getMaxY=function(){return this._maxy},Yu.prototype.distance=function(t){if(this.intersects(t))return 0;var e=0;this._maxx<t._minx?e=t._minx-this._maxx:this._minx>t._maxx&&(e=this._minx-t._maxx);var n=0;return this._maxy<t._miny?n=t._miny-this._maxy:this._miny>t._maxy&&(n=this._miny-t._maxy),0===e?n:0===n?e:Math.sqrt(e*e+n*n)},Yu.prototype.hashCode=function(){return 37*(37*(37*(629+bu.hashCode(this._minx))+bu.hashCode(this._maxx))+bu.hashCode(this._miny))+bu.hashCode(this._maxy)},Yu.prototype.interfaces_=function(){return[xu,Li]},Yu.prototype.getClass=function(){return Yu},Yu.intersects=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2];return n.x>=(t.x<e.x?t.x:e.x)&&n.x<=(t.x>e.x?t.x:e.x)&&n.y>=(t.y<e.y?t.y:e.y)&&n.y<=(t.y>e.y?t.y:e.y)}if(4===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2],s=arguments[3],a=Math.min(o.x,s.x),u=Math.max(o.x,s.x),c=Math.min(r.x,i.x),h=Math.max(r.x,i.x);return!(u<c||h<a||(a=Math.min(o.y,s.y),u=Math.max(o.y,s.y),c=Math.min(r.y,i.y),h=Math.max(r.y,i.y),u<c||h<a))}},Vu.serialVersionUID.get=function(){return 0x51845cd552189800},Object.defineProperties(Yu,Vu);function Wu(t){this.geometryFactory=t||new _h}var Hu={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/};Wu.prototype.read=function(t){var e,n,r;t=t.replace(/[\n\r]/g," ");var i=Hu.typeStr.exec(t);if(-1!==t.search("EMPTY")&&((i=Hu.emptyTypeStr.exec(t))[2]=void 0),i&&(n=i[1].toLowerCase(),r=i[2],Zu[n]&&(e=Zu[n].apply(this,[r]))),void 0===e)throw new Error("Could not parse WKT "+t);return e},Wu.prototype.write=function(t){return this.extractGeometry(t)},Wu.prototype.extractGeometry=function(t){var e=t.getGeometryType().toLowerCase();if(!Ju[e])return null;var n=e.toUpperCase();return t.isEmpty()?n+" EMPTY":n+"("+Ju[e].apply(this,[t])+")"};function Ku(t){this.parser=new Wu(t)}var Ju={coordinate:function(t){return t.x+" "+t.y},point:function(t){return Ju.coordinate.call(this,t._coordinates._coordinates[0])},multipoint:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push("("+Ju.point.apply(this,[t._geometries[n]])+")");return e.join(",")},linestring:function(t){for(var e=[],n=0,r=t._points._coordinates.length;n<r;++n)e.push(Ju.coordinate.apply(this,[t._points._coordinates[n]]));return e.join(",")},linearring:function(t){for(var e=[],n=0,r=t._points._coordinates.length;n<r;++n)e.push(Ju.coordinate.apply(this,[t._points._coordinates[n]]));return e.join(",")},multilinestring:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push("("+Ju.linestring.apply(this,[t._geometries[n]])+")");return e.join(",")},polygon:function(t){var e=[];e.push("("+Ju.linestring.apply(this,[t._shell])+")");for(var n=0,r=t._holes.length;n<r;++n)e.push("("+Ju.linestring.apply(this,[t._holes[n]])+")");return e.join(",")},multipolygon:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push("("+Ju.polygon.apply(this,[t._geometries[n]])+")");return e.join(",")},geometrycollection:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push(this.extractGeometry(t._geometries[n]));return e.join(",")}},Zu={point:function(t){if(void 0===t)return this.geometryFactory.createPoint();var e=t.trim().split(Hu.spaces);return this.geometryFactory.createPoint(new bu(Number.parseFloat(e[0]),Number.parseFloat(e[1])))},multipoint:function(t){if(void 0===t)return this.geometryFactory.createMultiPoint();for(var e,n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(Hu.trimParens,"$1"),r.push(Zu.point.apply(this,[e]));return this.geometryFactory.createMultiPoint(r)},linestring:function(t){if(void 0===t)return this.geometryFactory.createLineString();for(var e,n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].trim().split(Hu.spaces),r.push(new bu(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLineString(r)},linearring:function(t){if(void 0===t)return this.geometryFactory.createLinearRing();for(var e,n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].trim().split(Hu.spaces),r.push(new bu(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLinearRing(r)},multilinestring:function(t){if(void 0===t)return this.geometryFactory.createMultiLineString();for(var e,n=t.trim().split(Hu.parenComma),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(Hu.trimParens,"$1"),r.push(Zu.linestring.apply(this,[e]));return this.geometryFactory.createMultiLineString(r)},polygon:function(t){if(void 0===t)return this.geometryFactory.createPolygon();for(var e,n,r,i,o=t.trim().split(Hu.parenComma),s=[],a=0,u=o.length;a<u;++a)e=o[a].replace(Hu.trimParens,"$1"),n=Zu.linestring.apply(this,[e]),r=this.geometryFactory.createLinearRing(n._points),0===a?i=r:s.push(r);return this.geometryFactory.createPolygon(i,s)},multipolygon:function(t){if(void 0===t)return this.geometryFactory.createMultiPolygon();for(var e,n=t.trim().split(Hu.doubleParenComma),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(Hu.trimParens,"$1"),r.push(Zu.polygon.apply(this,[e]));return this.geometryFactory.createMultiPolygon(r)},geometrycollection:function(t){if(void 0===t)return this.geometryFactory.createGeometryCollection();for(var e=(t=t.replace(/,\s*([A-Za-z])/g,"|$1")).trim().split("|"),n=[],r=0,i=e.length;r<i;++r)n.push(this.read(e[r]));return this.geometryFactory.createGeometryCollection(n)}};Ku.prototype.write=function(t){return this.parser.write(t)},Ku.toLineString=function(t,e){if(2!==arguments.length)throw new Error("Not implemented");return"LINESTRING ( "+t.x+" "+t.y+", "+e.x+" "+e.y+" )"};function tc(){}var Qu=function(t){function e(e){t.call(this,e),this.name="RuntimeException",this.message=e,this.stack=(new t).stack}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e}(Error),$u=function(t){function e(){var e;t.call(this),0===arguments.length?t.call(this):1===arguments.length&&(e=arguments[0],t.call(this,e))}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Qu);tc.prototype.interfaces_=function(){return[]},tc.prototype.getClass=function(){return tc},tc.shouldNeverReachHere=function(){if(0===arguments.length)tc.shouldNeverReachHere(null);else if(1===arguments.length){var t=arguments[0];throw new $u("Should never reach here"+(null!==t?": "+t:""))}},tc.isTrue=function(){var e;if(1===arguments.length)tc.isTrue(arguments[0],null);else if(2===arguments.length&&(e=arguments[1],!arguments[0]))throw null===e?new $u:new $u(e)},tc.equals=function(){var t,e,n;if(2===arguments.length)tc.equals(t=arguments[0],e=arguments[1],null);else if(3===arguments.length&&(t=arguments[0],n=arguments[2],!(e=arguments[1]).equals(t)))throw new $u("Expected "+t+" but encountered "+e+(null!==n?": "+n:""))};function ec(){this._result=null,this._inputLines=Array(2).fill().map(function(){return Array(2)}),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new bu,this._intPt[1]=new bu,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0}var nc={DONT_INTERSECT:{configurable:!0},DO_INTERSECT:{configurable:!0},COLLINEAR:{configurable:!0},NO_INTERSECTION:{configurable:!0},POINT_INTERSECTION:{configurable:!0},COLLINEAR_INTERSECTION:{configurable:!0}};ec.prototype.getIndexAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intLineIndex[t][e]},ec.prototype.getTopologySummary=function(){var t=new Ru;return this.isEndPoint()&&t.append(" endpoint"),this._isProper&&t.append(" proper"),this.isCollinear()&&t.append(" collinear"),t.toString()},ec.prototype.computeIntersection=function(t,e,n,r){this._inputLines[0][0]=t,this._inputLines[0][1]=e,this._inputLines[1][0]=n,this._inputLines[1][1]=r,this._result=this.computeIntersect(t,e,n,r)},ec.prototype.getIntersectionNum=function(){return this._result},ec.prototype.computeIntLineIndex=function(){var t;0===arguments.length?null===this._intLineIndex&&(this._intLineIndex=Array(2).fill().map(function(){return Array(2)}),this.computeIntLineIndex(0),this.computeIntLineIndex(1)):1===arguments.length&&(t=arguments[0],this.getEdgeDistance(t,0)>this.getEdgeDistance(t,1)?(this._intLineIndex[t][0]=0,this._intLineIndex[t][1]=1):(this._intLineIndex[t][0]=1,this._intLineIndex[t][1]=0))},ec.prototype.isProper=function(){return this.hasIntersection()&&this._isProper},ec.prototype.setPrecisionModel=function(t){this._precisionModel=t},ec.prototype.isInteriorIntersection=function(){if(0===arguments.length)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(1===arguments.length){for(var t=arguments[0],e=0;e<this._result;e++)if(!this._intPt[e].equals2D(this._inputLines[t][0])&&!this._intPt[e].equals2D(this._inputLines[t][1]))return!0;return!1}},ec.prototype.getIntersection=function(t){return this._intPt[t]},ec.prototype.isEndPoint=function(){return this.hasIntersection()&&!this._isProper},ec.prototype.hasIntersection=function(){return this._result!==ec.NO_INTERSECTION},ec.prototype.getEdgeDistance=function(t,e){return ec.computeEdgeDistance(this._intPt[e],this._inputLines[t][0],this._inputLines[t][1])},ec.prototype.isCollinear=function(){return this._result===ec.COLLINEAR_INTERSECTION},ec.prototype.toString=function(){return Ku.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+Ku.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()},ec.prototype.getEndpoint=function(t,e){return this._inputLines[t][e]},ec.prototype.isIntersection=function(t){for(var e=0;e<this._result;e++)if(this._intPt[e].equals2D(t))return!0;return!1},ec.prototype.getIntersectionAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[t][e]]},ec.prototype.interfaces_=function(){return[]},ec.prototype.getClass=function(){return ec},ec.computeEdgeDistance=function(t,e,n){var s,a,r=Math.abs(n.x-e.x),i=Math.abs(n.y-e.y),o=-1;return t.equals(e)?o=0:t.equals(n)?o=i<r?r:i:(s=Math.abs(t.x-e.x),a=Math.abs(t.y-e.y),0!==(o=i<r?s:a)||t.equals(e)||(o=Math.max(s,a))),tc.isTrue(!(0===o&&!t.equals(e)),"Bad distance calculation"),o},ec.nonRobustComputeEdgeDistance=function(t,e,n){var r=t.x-e.x,i=t.y-e.y,o=Math.sqrt(r*r+i*i);return tc.isTrue(!(0===o&&!t.equals(e)),"Invalid distance calculation"),o},nc.DONT_INTERSECT.get=function(){return 0},nc.DO_INTERSECT.get=function(){return 1},nc.COLLINEAR.get=function(){return 2},nc.NO_INTERSECTION.get=function(){return 0},nc.POINT_INTERSECTION.get=function(){return 1},nc.COLLINEAR_INTERSECTION.get=function(){return 2},Object.defineProperties(ec,nc);function ic(){}var rc=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.isInSegmentEnvelopes=function(t){var e=new Yu(this._inputLines[0][0],this._inputLines[0][1]),n=new Yu(this._inputLines[1][0],this._inputLines[1][1]);return e.contains(t)&&n.contains(t)},e.prototype.computeIntersection=function(){if(3!==arguments.length)return t.prototype.computeIntersection.apply(this,arguments);var e=arguments[0],n=arguments[1],r=arguments[2];if(this._isProper=!1,Yu.intersects(n,r,e)&&0===sc.orientationIndex(n,r,e)&&0===sc.orientationIndex(r,n,e))return this._isProper=!0,(e.equals(n)||e.equals(r))&&(this._isProper=!1),this._result=t.POINT_INTERSECTION,null;this._result=t.NO_INTERSECTION},e.prototype.normalizeToMinimum=function(t,e,n,r,i){i.x=this.smallestInAbsValue(t.x,e.x,n.x,r.x),i.y=this.smallestInAbsValue(t.y,e.y,n.y,r.y),t.x-=i.x,t.y-=i.y,e.x-=i.x,e.y-=i.y,n.x-=i.x,n.y-=i.y,r.x-=i.x,r.y-=i.y},e.prototype.safeHCoordinateIntersection=function(t,n,r,i){var o=null;try{o=Uu.intersection(t,n,r,i)}catch(s){if(!(s instanceof ju))throw s;o=e.nearestEndpoint(t,n,r,i)}return o},e.prototype.intersection=function(t,n,r,i){var o=this.intersectionWithNormalization(t,n,r,i);return this.isInSegmentEnvelopes(o)||(o=new bu(e.nearestEndpoint(t,n,r,i))),null!==this._precisionModel&&this._precisionModel.makePrecise(o),o},e.prototype.smallestInAbsValue=function(t,e,n,r){var i=t,o=Math.abs(i);return Math.abs(e)<o&&(i=e,o=Math.abs(e)),Math.abs(n)<o&&(i=n,o=Math.abs(n)),Math.abs(r)<o&&(i=r),i},e.prototype.checkDD=function(t,e,n,r,i){var o=qu.intersection(t,e,n,r),s=this.isInSegmentEnvelopes(o);Xu.out.println("DD in env = "+s+"  --------------------- "+o),1e-4<i.distance(o)&&Xu.out.println("Distance = "+i.distance(o))},e.prototype.intersectionWithNormalization=function(t,e,n,r){var i=new bu(t),o=new bu(e),s=new bu(n),a=new bu(r),u=new bu;this.normalizeToEnvCentre(i,o,s,a,u);var c=this.safeHCoordinateIntersection(i,o,s,a);return c.x+=u.x,c.y+=u.y,c},e.prototype.computeCollinearIntersection=function(e,n,r,i){var o=Yu.intersects(e,n,r),s=Yu.intersects(e,n,i),a=Yu.intersects(r,i,e),u=Yu.intersects(r,i,n);return o&&s?(this._intPt[0]=r,this._intPt[1]=i,t.COLLINEAR_INTERSECTION):a&&u?(this._intPt[0]=e,this._intPt[1]=n,t.COLLINEAR_INTERSECTION):o&&a?(this._intPt[0]=r,this._intPt[1]=e,!r.equals(e)||s||u?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):o&&u?(this._intPt[0]=r,this._intPt[1]=n,!r.equals(n)||s||a?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):s&&a?(this._intPt[0]=i,this._intPt[1]=e,!i.equals(e)||o||u?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):s&&u?(this._intPt[0]=i,this._intPt[1]=n,!i.equals(n)||o||a?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):t.NO_INTERSECTION},e.prototype.normalizeToEnvCentre=function(t,e,n,r,i){var o=t.x<e.x?t.x:e.x,s=t.y<e.y?t.y:e.y,a=t.x>e.x?t.x:e.x,u=t.y>e.y?t.y:e.y,c=n.x<r.x?n.x:r.x,h=n.y<r.y?n.y:r.y,l=n.x>r.x?n.x:r.x,p=n.y>r.y?n.y:r.y,f=((c<o?o:c)+(a<l?a:l))/2,g=((h<s?s:h)+(u<p?u:p))/2;i.x=f,i.y=g,t.x-=i.x,t.y-=i.y,e.x-=i.x,e.y-=i.y,n.x-=i.x,n.y-=i.y,r.x-=i.x,r.y-=i.y},e.prototype.computeIntersect=function(e,n,r,i){if(this._isProper=!1,!Yu.intersects(e,n,r,i))return t.NO_INTERSECTION;var o=sc.orientationIndex(e,n,r),s=sc.orientationIndex(e,n,i);if(0<o&&0<s||o<0&&s<0)return t.NO_INTERSECTION;var a=sc.orientationIndex(r,i,e),u=sc.orientationIndex(r,i,n);return 0<a&&0<u||a<0&&u<0?t.NO_INTERSECTION:0===o&&0===s&&0===a&&0===u?this.computeCollinearIntersection(e,n,r,i):(0===o||0===s||0===a||0===u?(this._isProper=!1,e.equals2D(r)||e.equals2D(i)?this._intPt[0]=e:n.equals2D(r)||n.equals2D(i)?this._intPt[0]=n:0===o?this._intPt[0]=new bu(r):0===s?this._intPt[0]=new bu(i):0===a?this._intPt[0]=new bu(e):0===u&&(this._intPt[0]=new bu(n))):(this._isProper=!0,this._intPt[0]=this.intersection(e,n,r,i)),t.POINT_INTERSECTION)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.nearestEndpoint=function(t,e,n,r){var i=t,o=sc.distancePointLine(t,n,r),s=sc.distancePointLine(e,n,r);return s<o&&(o=s,i=e),(s=sc.distancePointLine(n,t,e))<o&&(o=s,i=n),(s=sc.distancePointLine(r,t,e))<o&&(o=s,i=r),i},e}(ec);ic.prototype.interfaces_=function(){return[]},ic.prototype.getClass=function(){return ic},ic.orientationIndex=function(t,e,n){var r=e.x-t.x,i=e.y-t.y,o=n.x-e.x,s=n.y-e.y;return ic.signOfDet2x2(r,i,o,s)},ic.signOfDet2x2=function(t,e,n,r){var s,i=null,o=null,i=1;if(0===t||0===r)return 0===e||0===n?0:0<e?0<n?-i:i:0<n?i:-i;if(0===e||0===n)return 0<r?0<t?i:-i:0<t?-i:i;if(0<e?0<r?e<=r||(i=-i,o=t,t=n,n=o,o=e,e=r,r=o):r=e<=-r?(i=-i,n=-n,-r):(o=t,t=-n,n=o,o=e,e=-r,o):0<r?-e<=r?(i=-i,t=-t,e=-e):(o=-t,t=n,n=o,o=-e,e=r,r=o):r=r<=e?(t=-t,e=-e,n=-n,-r):(i=-i,o=-t,t=-n,n=o,o=-e,e=-r,o),0<t){if(!(0<n))return i;if(!(t<=n))return i}else{if(0<n)return-i;if(!(n<=t))return-i;i=-i,t=-t,n=-n}for(;;){if((r-=(s=Math.floor(n/t))*e)<0)return-i;if(e<r)return i;if((n-=s*t)+n<t){if(e<r+r)return i}else{if(r+r<e)return-i;n=t-n,r=e-r,i=-i}if(0===r)return 0===n?0:-i;if(0===n)return i;if((e-=(s=Math.floor(t/n))*r)<0)return i;if(r<e)return-i;if((t-=s*n)+t<n){if(r<e+e)return-i}else{if(e+e<r)return i;t=n-t,e=r-e,i=-i}if(0===e)return 0===t?0:i;if(0===t)return-i}};function oc(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;var t=arguments[0];this._p=t}oc.prototype.countSegment=function(t,e){if(t.x<this._p.x&&e.x<this._p.x)return null;if(this._p.x===e.x&&this._p.y===e.y)return this._isPointOnSegment=!0,null;if(t.y===this._p.y&&e.y===this._p.y){var n=t.x,r=e.x;return r<n&&(n=e.x,r=t.x),this._p.x>=n&&this._p.x<=r&&(this._isPointOnSegment=!0),null}if(t.y>this._p.y&&e.y<=this._p.y||e.y>this._p.y&&t.y<=this._p.y){var i=t.x-this._p.x,o=t.y-this._p.y,s=e.x-this._p.x,a=e.y-this._p.y,u=ic.signOfDet2x2(i,o,s,a);if(0===u)return this._isPointOnSegment=!0,null;a<o&&(u=-u),0<u&&this._crossingCount++}},oc.prototype.isPointInPolygon=function(){return this.getLocation()!==Su.EXTERIOR},oc.prototype.getLocation=function(){return this._isPointOnSegment?Su.BOUNDARY:this._crossingCount%2==1?Su.INTERIOR:Su.EXTERIOR},oc.prototype.isOnSegment=function(){return this._isPointOnSegment},oc.prototype.interfaces_=function(){return[]},oc.prototype.getClass=function(){return oc},oc.locatePointInRing=function(){if(arguments[0]instanceof bu&&Lu(arguments[1],Bu)){for(var e=arguments[1],n=new oc(arguments[0]),r=new bu,i=new bu,o=1;o<e.size();o++)if(e.getCoordinate(o,r),e.getCoordinate(o-1,i),n.countSegment(r,i),n.isOnSegment())return n.getLocation();return n.getLocation()}if(arguments[0]instanceof bu&&arguments[1]instanceof Array){for(var a=arguments[1],u=new oc(arguments[0]),c=1;c<a.length;c++){var h=a[c],l=a[c-1];if(u.countSegment(h,l),u.isOnSegment())return u.getLocation()}return u.getLocation()}};var sc=function(){},ac={CLOCKWISE:{configurable:!0},RIGHT:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},LEFT:{configurable:!0},COLLINEAR:{configurable:!0},STRAIGHT:{configurable:!0}};sc.prototype.interfaces_=function(){return[]},sc.prototype.getClass=function(){return sc},sc.orientationIndex=function(t,e,n){return qu.orientationIndex(t,e,n)},sc.signedArea=function(){if(arguments[0]instanceof Array){var t=arguments[0];if(t.length<3)return 0;for(var e=0,n=t[0].x,r=1;r<t.length-1;r++){var i=t[r].x-n,o=t[r+1].y;e+=i*(t[r-1].y-o)}return e/2}if(Lu(arguments[0],Bu)){var s=arguments[0],a=s.size();if(a<3)return 0;var u=new bu,c=new bu,h=new bu;s.getCoordinate(0,c),s.getCoordinate(1,h);var l=c.x;h.x-=l;for(var p=0,f=1;f<a-1;f++)u.y=c.y,c.x=h.x,c.y=h.y,s.getCoordinate(f+1,h),h.x-=l,p+=c.x*(u.y-h.y);return p/2}},sc.distanceLineLine=function(t,e,n,r){if(t.equals(e))return sc.distancePointLine(t,n,r);if(n.equals(r))return sc.distancePointLine(r,t,e);var o,s,a,u,i=!1;return!Yu.intersects(t,e,n,r)||0==(o=(e.x-t.x)*(r.y-n.y)-(e.y-t.y)*(r.x-n.x))?i=!0:(s=(t.y-n.y)*(r.x-n.x)-(t.x-n.x)*(r.y-n.y),a=((t.y-n.y)*(e.x-t.x)-(t.x-n.x)*(e.y-t.y))/o,((u=s/o)<0||1<u||a<0||1<a)&&(i=!0)),i?Pu.min(sc.distancePointLine(t,n,r),sc.distancePointLine(e,n,r),sc.distancePointLine(n,t,e),sc.distancePointLine(r,t,e)):0},sc.isPointInRing=function(t,e){return sc.locatePointInRing(t,e)!==Su.EXTERIOR},sc.computeLength=function(t){var e=t.size();if(e<=1)return 0;var n=0,r=new bu;t.getCoordinate(0,r);for(var i=r.x,o=r.y,s=1;s<e;s++){t.getCoordinate(s,r);var a=r.x,u=r.y,c=a-i,h=u-o;n+=Math.sqrt(c*c+h*h),i=a,o=u}return n},sc.isCCW=function(t){var e=t.length-1;if(e<3)throw new _u;for(var n=t[0],r=0,i=1;i<=e;i++){var o=t[i];o.y>n.y&&(n=o,r=i)}for(var s=r;--s<0&&(s=e),t[s].equals2D(n)&&s!==r;);for(var a=r;t[a=(a+1)%e].equals2D(n)&&a!==r;);var u=t[s],c=t[a];if(u.equals2D(n)||c.equals2D(n)||u.equals2D(c))return!1;var h=sc.computeOrientation(u,n,c);return 0===h?u.x>c.x:0<h},sc.locatePointInRing=function(t,e){return oc.locatePointInRing(t,e)},sc.distancePointLinePerpendicular=function(t,e,n){var r=(n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y),i=((e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y))/r;return Math.abs(i)*Math.sqrt(r)},sc.computeOrientation=function(t,e,n){return sc.orientationIndex(t,e,n)},sc.distancePointLine=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(0===e.length)throw new _u;for(var n=t.distance(e[0]),r=0;r<e.length-1;r++){var i=sc.distancePointLine(t,e[r],e[r+1]);i<n&&(n=i)}return n}if(3===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2];if(s.x===a.x&&s.y===a.y)return o.distance(s);var u=(a.x-s.x)*(a.x-s.x)+(a.y-s.y)*(a.y-s.y),c=((o.x-s.x)*(a.x-s.x)+(o.y-s.y)*(a.y-s.y))/u;if(c<=0)return o.distance(s);if(1<=c)return o.distance(a);var h=((s.y-o.y)*(a.x-s.x)-(s.x-o.x)*(a.y-s.y))/u;return Math.abs(h)*Math.sqrt(u)}},sc.isOnLine=function(t,e){for(var n=new rc,r=1;r<e.length;r++){var i=e[r-1],o=e[r];if(n.computeIntersection(t,i,o),n.hasIntersection())return!0}return!1},ac.CLOCKWISE.get=function(){return-1},ac.RIGHT.get=function(){return sc.CLOCKWISE},ac.COUNTERCLOCKWISE.get=function(){return 1},ac.LEFT.get=function(){return sc.COUNTERCLOCKWISE},ac.COLLINEAR.get=function(){return 0},ac.STRAIGHT.get=function(){return sc.COLLINEAR},Object.defineProperties(sc,ac);function uc(){}uc.prototype.filter=function(t){},uc.prototype.interfaces_=function(){return[]},uc.prototype.getClass=function(){return uc};function cc(){var t=arguments[0];this._envelope=null,this._factory=null,this._SRID=null,this._userData=null,this._factory=t,this._SRID=t.getSRID()}var hc={serialVersionUID:{configurable:!0},SORTINDEX_POINT:{configurable:!0},SORTINDEX_MULTIPOINT:{configurable:!0},SORTINDEX_LINESTRING:{configurable:!0},SORTINDEX_LINEARRING:{configurable:!0},SORTINDEX_MULTILINESTRING:{configurable:!0},SORTINDEX_POLYGON:{configurable:!0},SORTINDEX_MULTIPOLYGON:{configurable:!0},SORTINDEX_GEOMETRYCOLLECTION:{configurable:!0},geometryChangedFilter:{configurable:!0}};cc.prototype.isGeometryCollection=function(){return this.getSortIndex()===cc.SORTINDEX_GEOMETRYCOLLECTION},cc.prototype.getFactory=function(){return this._factory},cc.prototype.getGeometryN=function(t){return this},cc.prototype.getArea=function(){return 0},cc.prototype.isRectangle=function(){return!1},cc.prototype.equals=function(){if(arguments[0]instanceof cc){var t=arguments[0];return null!==t&&this.equalsTopo(t)}if(arguments[0]instanceof Object){var e=arguments[0];if(!(e instanceof cc))return!1;return this.equalsExact(e)}},cc.prototype.equalsExact=function(t){return this===t||this.equalsExact(t,0)},cc.prototype.geometryChanged=function(){this.apply(cc.geometryChangedFilter)},cc.prototype.geometryChangedAction=function(){this._envelope=null},cc.prototype.equalsNorm=function(t){return null!==t&&this.norm().equalsExact(t.norm())},cc.prototype.getLength=function(){return 0},cc.prototype.getNumGeometries=function(){return 1},cc.prototype.compareTo=function(){if(1===arguments.length){var t=arguments[0],e=t;return this.getSortIndex()!==e.getSortIndex()?this.getSortIndex()-e.getSortIndex():this.isEmpty()&&e.isEmpty()?0:this.isEmpty()?-1:e.isEmpty()?1:this.compareToSameClass(t)}if(2===arguments.length){var n=arguments[0],r=arguments[1];return this.getSortIndex()!==n.getSortIndex()?this.getSortIndex()-n.getSortIndex():this.isEmpty()&&n.isEmpty()?0:this.isEmpty()?-1:n.isEmpty()?1:this.compareToSameClass(n,r)}},cc.prototype.getUserData=function(){return this._userData},cc.prototype.getSRID=function(){return this._SRID},cc.prototype.getEnvelope=function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())},cc.prototype.checkNotGeometryCollection=function(t){if(t.getSortIndex()===cc.SORTINDEX_GEOMETRYCOLLECTION)throw new _u},cc.prototype.equal=function(t,e,n){return 0===n?t.equals(e):t.distance(e)<=n},cc.prototype.norm=function(){var t=this.copy();return t.normalize(),t},cc.prototype.getPrecisionModel=function(){return this._factory.getPrecisionModel()},cc.prototype.getEnvelopeInternal=function(){return null===this._envelope&&(this._envelope=this.computeEnvelopeInternal()),new Yu(this._envelope)},cc.prototype.setSRID=function(t){this._SRID=t},cc.prototype.setUserData=function(t){this._userData=t},cc.prototype.compare=function(t,e){for(var n=t.iterator(),r=e.iterator();n.hasNext()&&r.hasNext();){var i=n.next(),o=r.next(),s=i.compareTo(o);if(0!==s)return s}return n.hasNext()?1:r.hasNext()?-1:0},cc.prototype.hashCode=function(){return this.getEnvelopeInternal().hashCode()},cc.prototype.isGeometryCollectionOrDerived=function(){return this.getSortIndex()===cc.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===cc.SORTINDEX_MULTIPOINT||this.getSortIndex()===cc.SORTINDEX_MULTILINESTRING||this.getSortIndex()===cc.SORTINDEX_MULTIPOLYGON},cc.prototype.interfaces_=function(){return[Eu,xu,Li]},cc.prototype.getClass=function(){return cc},cc.hasNonEmptyElements=function(t){for(var e=0;e<t.length;e++)if(!t[e].isEmpty())return!0;return!1},cc.hasNullElements=function(t){for(var e=0;e<t.length;e++)if(null===t[e])return!0;return!1},hc.serialVersionUID.get=function(){return 0x799ea46522854c00},hc.SORTINDEX_POINT.get=function(){return 0},hc.SORTINDEX_MULTIPOINT.get=function(){return 1},hc.SORTINDEX_LINESTRING.get=function(){return 2},hc.SORTINDEX_LINEARRING.get=function(){return 3},hc.SORTINDEX_MULTILINESTRING.get=function(){return 4},hc.SORTINDEX_POLYGON.get=function(){return 5},hc.SORTINDEX_MULTIPOLYGON.get=function(){return 6},hc.SORTINDEX_GEOMETRYCOLLECTION.get=function(){return 7},hc.geometryChangedFilter.get=function(){return lc},Object.defineProperties(cc,hc);var lc=function(){};lc.interfaces_=function(){return[uc]},lc.filter=function(t){t.geometryChangedAction()};function pc(){}pc.prototype.filter=function(t){},pc.prototype.interfaces_=function(){return[]},pc.prototype.getClass=function(){return pc};function fc(){}var gc={Mod2BoundaryNodeRule:{configurable:!0},EndPointBoundaryNodeRule:{configurable:!0},MultiValentEndPointBoundaryNodeRule:{configurable:!0},MonoValentEndPointBoundaryNodeRule:{configurable:!0},MOD2_BOUNDARY_RULE:{configurable:!0},ENDPOINT_BOUNDARY_RULE:{configurable:!0},MULTIVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},MONOVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},OGC_SFS_BOUNDARY_RULE:{configurable:!0}};fc.prototype.isInBoundary=function(t){},fc.prototype.interfaces_=function(){return[]},fc.prototype.getClass=function(){return fc},gc.Mod2BoundaryNodeRule.get=function(){return dc},gc.EndPointBoundaryNodeRule.get=function(){return yc},gc.MultiValentEndPointBoundaryNodeRule.get=function(){return _c},gc.MonoValentEndPointBoundaryNodeRule.get=function(){return mc},gc.MOD2_BOUNDARY_RULE.get=function(){return new dc},gc.ENDPOINT_BOUNDARY_RULE.get=function(){return new yc},gc.MULTIVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new _c},gc.MONOVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new mc},gc.OGC_SFS_BOUNDARY_RULE.get=function(){return fc.MOD2_BOUNDARY_RULE},Object.defineProperties(fc,gc);var dc=function(){};dc.prototype.isInBoundary=function(t){return t%2==1},dc.prototype.interfaces_=function(){return[fc]},dc.prototype.getClass=function(){return dc};var yc=function(){};yc.prototype.isInBoundary=function(t){return 0<t},yc.prototype.interfaces_=function(){return[fc]},yc.prototype.getClass=function(){return yc};var _c=function(){};_c.prototype.isInBoundary=function(t){return 1<t},_c.prototype.interfaces_=function(){return[fc]},_c.prototype.getClass=function(){return _c};var mc=function(){};mc.prototype.isInBoundary=function(t){return 1===t},mc.prototype.interfaces_=function(){return[fc]},mc.prototype.getClass=function(){return mc};function vc(){}vc.prototype.add=function(){},vc.prototype.addAll=function(){},vc.prototype.isEmpty=function(){},vc.prototype.iterator=function(){},vc.prototype.size=function(){},vc.prototype.toArray=function(){},vc.prototype.remove=function(){};function Ec(){}var xc=function(t){function e(e){t.call(this),this.message=e||""}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={name:{configurable:!0}};return n.name.get=function(){return"IndexOutOfBoundsException"},Object.defineProperties(e,n),e}(Error);Ec.prototype.hasNext=function(){},Ec.prototype.next=function(){},Ec.prototype.remove=function(){};var wc=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.get=function(){},e.prototype.set=function(){},e.prototype.isEmpty=function(){},e}(vc);(Pi.prototype=new Error).name="NoSuchElementException";function Cc(){}var bc=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof vc&&this.addAll(arguments[0])}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.ensureCapacity=function(){},e.prototype.interfaces_=function(){return[t,vc]},e.prototype.add=function(t){return 1===arguments.length?this.array_.push(t):this.array_.splice(t,arguments[1]),!0},e.prototype.clear=function(){this.array_=[]},e.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},e.prototype.set=function(t,e){var n=this.array_[t];return this.array_[t]=e,n},e.prototype.iterator=function(){return new Ic(this)},e.prototype.get=function(t){if(t<0||t>=this.size())throw new xc;return this.array_[t]},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.size=function(){return this.array_.length},e.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},e.prototype.remove=function(t){for(var e=!1,n=0,r=this.array_.length;n<r;n++)if(this.array_[n]===t){this.array_.splice(n,1),e=!0;break}return e},e}(wc),Ic=function(t){function e(e){t.call(this),this.arrayList_=e,this.position_=0}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.next=function(){if(this.position_===this.arrayList_.size())throw new Pi;return this.arrayList_.get(this.position_++)},e.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},e.prototype.set=function(t){return this.arrayList_.set(this.position_-1,t)},e.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_))},e}(Ec),Nc=function(t){function e(){var e,n,r;t.call(this),0===arguments.length||(1===arguments.length?(e=arguments[0],this.ensureCapacity(e.length),this.add(e,!0)):2===arguments.length&&(n=arguments[0],r=arguments[1],this.ensureCapacity(n.length),this.add(n,r)))}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={coordArrayType:{configurable:!0}};return n.coordArrayType.get=function(){return new Array(0).fill(null)},e.prototype.getCoordinate=function(t){return this.get(t)},e.prototype.addAll=function(){if(2!==arguments.length)return t.prototype.addAll.apply(this,arguments);for(var n=arguments[1],r=!1,i=arguments[0].iterator();i.hasNext();)this.add(i.next(),n),r=!0;return r},e.prototype.clone=function(){for(var e=t.prototype.clone.call(this),n=0;n<this.size();n++)e.add(n,this.get(n).copy());return e},e.prototype.toCoordinateArray=function(){return this.toArray(e.coordArrayType)},e.prototype.add=function(){if(1===arguments.length){var e=arguments[0];t.prototype.add.call(this,e)}else if(2===arguments.length){if(arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var n=arguments[0],r=arguments[1];return this.add(n,r,!0),!0}if(arguments[0]instanceof bu&&"boolean"==typeof arguments[1]){var i=arguments[0];if(!arguments[1]&&1<=this.size()&&this.get(this.size()-1).equals2D(i))return null;t.prototype.add.call(this,i)}else if(arguments[0]instanceof Object&&"boolean"==typeof arguments[1]){var o=arguments[0],s=arguments[1];return this.add(o,s),!0}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var a=arguments[0],u=arguments[1];if(arguments[2])for(var c=0;c<a.length;c++)this.add(a[c],u);else for(var h=a.length-1;0<=h;h--)this.add(a[h],u);return!0}if("boolean"==typeof arguments[2]&&Number.isInteger(arguments[0])&&arguments[1]instanceof bu){var l=arguments[0],p=arguments[1];if(!arguments[2]){var f=this.size();if(0<f){if(0<l&&this.get(l-1).equals2D(p))return null;if(l<f&&this.get(l).equals2D(p))return null}}t.prototype.add.call(this,l,p)}}else if(4===arguments.length){var g=arguments[0],d=arguments[1],y=arguments[2],_=arguments[3],m=1;_<y&&(m=-1);for(var v=y;v!==_;v+=m)this.add(g[v],d);return!0}},e.prototype.closeRing=function(){0<this.size()&&this.add(new bu(this.get(0)),!1)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},Object.defineProperties(e,n),e}(bc),Sc={ForwardComparator:{configurable:!0},BidirectionalComparator:{configurable:!0},coordArrayType:{configurable:!0}};Sc.ForwardComparator.get=function(){return Mc},Sc.BidirectionalComparator.get=function(){return Lc},Sc.coordArrayType.get=function(){return new Array(0).fill(null)},Cc.prototype.interfaces_=function(){return[]},Cc.prototype.getClass=function(){return Cc},Cc.isRing=function(t){return!(t.length<4||!t[0].equals2D(t[t.length-1]))},Cc.ptNotInList=function(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(Cc.indexOf(r,e)<0)return r}return null},Cc.scroll=function(t,e){var n=Cc.indexOf(e,t);if(n<0)return null;var r=new Array(t.length).fill(null);Xu.arraycopy(t,n,r,0,t.length-n),Xu.arraycopy(t,0,r,t.length-n,n),Xu.arraycopy(r,0,t,0,t.length)},Cc.equals=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(t===e)return!0;if(null===t||null===e)return!1;if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].equals(e[n]))return!1;return!0}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];if(r===i)return!0;if(null===r||null===i)return!1;if(r.length!==i.length)return!1;for(var s=0;s<r.length;s++)if(0!==o.compare(r[s],i[s]))return!1;return!0}},Cc.intersection=function(t,e){for(var n=new Nc,r=0;r<t.length;r++)e.intersects(t[r])&&n.add(t[r],!0);return n.toCoordinateArray()},Cc.hasRepeatedPoints=function(t){for(var e=1;e<t.length;e++)if(t[e-1].equals(t[e]))return!0;return!1},Cc.removeRepeatedPoints=function(t){return Cc.hasRepeatedPoints(t)?new Nc(t,!1).toCoordinateArray():t},Cc.reverse=function(t){for(var e=t.length-1,n=Math.trunc(e/2),r=0;r<=n;r++){var i=t[r];t[r]=t[e-r],t[e-r]=i}},Cc.removeNull=function(t){for(var e=0,n=0;n<t.length;n++)null!==t[n]&&e++;var r=new Array(e).fill(null);if(0===e)return r;for(var i=0,o=0;o<t.length;o++)null!==t[o]&&(r[i++]=t[o]);return r},Cc.copyDeep=function(){if(1===arguments.length){for(var t=arguments[0],e=new Array(t.length).fill(null),n=0;n<t.length;n++)e[n]=new bu(t[n]);return e}if(5===arguments.length)for(var r=arguments[0],i=arguments[1],o=arguments[2],s=arguments[3],a=arguments[4],u=0;u<a;u++)o[s+u]=new bu(r[i+u])},Cc.isEqualReversed=function(t,e){for(var n=0;n<t.length;n++){var r=t[n],i=e[t.length-n-1];if(0!==r.compareTo(i))return!1}return!0},Cc.envelope=function(t){for(var e=new Yu,n=0;n<t.length;n++)e.expandToInclude(t[n]);return e},Cc.toCoordinateArray=function(t){return t.toArray(Cc.coordArrayType)},Cc.atLeastNCoordinatesOrNothing=function(t,e){return e.length>=t?e:[]},Cc.indexOf=function(t,e){for(var n=0;n<e.length;n++)if(t.equals(e[n]))return n;return-1},Cc.increasingDirection=function(t){for(var e=0;e<Math.trunc(t.length/2);e++){var n=t.length-1-e,r=t[e].compareTo(t[n]);if(0!==r)return r}return 1},Cc.compare=function(t,e){for(var n=0;n<t.length&&n<e.length;){var r=t[n].compareTo(e[n]);if(0!==r)return r;n++}return n<e.length?-1:n<t.length?1:0},Cc.minCoordinate=function(t){for(var e=null,n=0;n<t.length;n++)(null===e||0<e.compareTo(t[n]))&&(e=t[n]);return e},Cc.extract=function(t,e,n){e=Pu.clamp(e,0,t.length);var r=(n=Pu.clamp(n,-1,t.length))-e+1;n<0&&(r=0),e>=t.length&&(r=0),n<e&&(r=0);var i=new Array(r).fill(null);if(0===r)return i;for(var o=0,s=e;s<=n;s++)i[o++]=t[s];return i},Object.defineProperties(Cc,Sc);var Mc=function(){};Mc.prototype.compare=function(t,e){return Cc.compare(t,e)},Mc.prototype.interfaces_=function(){return[wu]},Mc.prototype.getClass=function(){return Mc};var Lc=function(){};Lc.prototype.compare=function(t,e){var n=t,r=e;if(n.length<r.length)return-1;if(n.length>r.length)return 1;if(0===n.length)return 0;var i=Cc.compare(n,r);return Cc.isEqualReversed(n,r)?0:i},Lc.prototype.OLDcompare=function(t,e){var n=t,r=e;if(n.length<r.length)return-1;if(n.length>r.length)return 1;if(0===n.length)return 0;for(var i=Cc.increasingDirection(n),o=Cc.increasingDirection(r),s=0<i?0:n.length-1,a=0<o?0:n.length-1,u=0;u<n.length;u++){var c=n[s].compareTo(r[a]);if(0!==c)return c;s+=i,a+=o}return 0},Lc.prototype.interfaces_=function(){return[wu]},Lc.prototype.getClass=function(){return Lc};function Pc(){}Pc.prototype.get=function(){},Pc.prototype.put=function(){},Pc.prototype.size=function(){},Pc.prototype.values=function(){},Pc.prototype.entrySet=function(){};var Oc=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e}(Pc);(Oi.prototype=new Error).name="OperationNotSupported",(Ri.prototype=new vc).contains=function(){};var Rc=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof vc&&this.addAll(arguments[0])}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.contains=function(t){for(var e=0,n=this.array_.length;e<n;e++)if(this.array_[e]===t)return!0;return!1},e.prototype.add=function(t){return!this.contains(t)&&(this.array_.push(t),!0)},e.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},e.prototype.remove=function(t){throw new Error},e.prototype.size=function(){return this.array_.length},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},e.prototype.iterator=function(){return new Tc(this)},e}(Ri),Tc=function(t){function e(e){t.call(this),this.hashSet_=e,this.position_=0}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.next=function(){if(this.position_===this.hashSet_.size())throw new Pi;return this.hashSet_.array_[this.position_++]},e.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},e.prototype.remove=function(){throw new Oi},e}(Ec),Ac=0;(Gi.prototype=new Oc).get=function(t){for(var e=this.root_;null!==e;){var n=t.compareTo(e.key);if(n<0)e=e.left;else{if(!(0<n))return e.value;e=e.right}}return null},Gi.prototype.put=function(t,e){if(null===this.root_)return this.root_={key:t,value:e,left:null,right:null,parent:null,color:Ac,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var n,r,i=this.root_;do{if(n=i,(r=t.compareTo(i.key))<0)i=i.left;else{if(!(0<r)){var o=i.value;return i.value=e,o}i=i.right}}while(null!==i);var s={key:t,left:null,right:null,value:e,parent:n,color:Ac,getValue:function(){return this.value},getKey:function(){return this.key}};return r<0?n.left=s:n.right=s,this.fixAfterInsertion(s),this.size_++,null},Gi.prototype.fixAfterInsertion=function(t){for(t.color=1;null!=t&&t!==this.root_&&1===t.parent.color;){var e,n;Ai(t)===Fi(Ai(Ai(t)))?1===Ti(e=qi(Ai(Ai(t))))?(Di(Ai(t),Ac),Di(e,Ac),Di(Ai(Ai(t)),1),t=Ai(Ai(t))):(t===qi(Ai(t))&&(t=Ai(t),this.rotateLeft(t)),Di(Ai(t),Ac),Di(Ai(Ai(t)),1),this.rotateRight(Ai(Ai(t)))):1===Ti(n=Fi(Ai(Ai(t))))?(Di(Ai(t),Ac),Di(n,Ac),Di(Ai(Ai(t)),1),t=Ai(Ai(t))):(t===Fi(Ai(t))&&(t=Ai(t),this.rotateRight(t)),Di(Ai(t),Ac),Di(Ai(Ai(t)),1),this.rotateLeft(Ai(Ai(t))))}this.root_.color=Ac},Gi.prototype.values=function(){var t=new bc,e=this.getFirstEntry();if(null!==e)for(t.add(e.value);null!==(e=Gi.successor(e));)t.add(e.value);return t},Gi.prototype.entrySet=function(){var t=new Rc,e=this.getFirstEntry();if(null!==e)for(t.add(e);null!==(e=Gi.successor(e));)t.add(e);return t},Gi.prototype.rotateLeft=function(t){var e;null!=t&&(e=t.right,t.right=e.left,null!=e.left&&(e.left.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.left===t?t.parent.left=e:t.parent.right=e,(e.left=t).parent=e)},Gi.prototype.rotateRight=function(t){var e;null!=t&&(e=t.left,t.left=e.right,null!=e.right&&(e.right.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.right===t?t.parent.right=e:t.parent.left=e,(e.right=t).parent=e)},Gi.prototype.getFirstEntry=function(){var t=this.root_;if(null!=t)for(;null!=t.left;)t=t.left;return t},Gi.successor=function(t){if(null===t)return null;if(null!==t.right){for(var e=t.right;null!==e.left;)e=e.left;return e}for(var n=t.parent,r=t;null!==n&&r===n.right;)n=(r=n).parent;return n},Gi.prototype.size=function(){return this.size_};function Dc(){}Dc.prototype.interfaces_=function(){return[]},Dc.prototype.getClass=function(){return Dc},Bi.prototype=new Ri,(ki.prototype=new Bi).contains=function(t){for(var e=0,n=this.array_.length;e<n;e++)if(0===this.array_[e].compareTo(t))return!0;return!1},ki.prototype.add=function(t){if(this.contains(t))return!1;for(var e=0,n=this.array_.length;e<n;e++)if(1===this.array_[e].compareTo(t))return this.array_.splice(e,0,t),!0;return this.array_.push(t),!0},ki.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},ki.prototype.remove=function(t){throw new Oi},ki.prototype.size=function(){return this.array_.length},ki.prototype.isEmpty=function(){return 0===this.array_.length},ki.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},ki.prototype.iterator=function(){return new Fc(this)};var Fc=function(t){this.treeSet_=t,this.position_=0};Fc.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new Pi;return this.treeSet_.array_[this.position_++]},Fc.prototype.hasNext=function(){return this.position_<this.treeSet_.size()},Fc.prototype.remove=function(){throw new Oi};function qc(){}qc.sort=function(){var t,e,n,r,i=arguments[0];if(1===arguments.length)r=function(t,e){return t.compareTo(e)},i.sort(r);else if(2===arguments.length)n=arguments[1],r=function(t,e){return n.compare(t,e)},i.sort(r);else if(3===arguments.length){(e=i.slice(arguments[1],arguments[2])).sort();var o=i.slice(0,arguments[1]).concat(e,i.slice(arguments[2],i.length));for(i.splice(0,i.length),t=0;t<o.length;t++)i.push(o[t])}else if(4===arguments.length)for(e=i.slice(arguments[1],arguments[2]),n=arguments[3],r=function(t,e){return n.compare(t,e)},e.sort(r),o=i.slice(0,arguments[1]).concat(e,i.slice(arguments[2],i.length)),i.splice(0,i.length),t=0;t<o.length;t++)i.push(o[t])},qc.asList=function(t){for(var e=new bc,n=0,r=t.length;n<r;n++)e.add(t[n]);return e};function Gc(){}var Bc={P:{configurable:!0},L:{configurable:!0},A:{configurable:!0},FALSE:{configurable:!0},TRUE:{configurable:!0},DONTCARE:{configurable:!0},SYM_FALSE:{configurable:!0},SYM_TRUE:{configurable:!0},SYM_DONTCARE:{configurable:!0},SYM_P:{configurable:!0},SYM_L:{configurable:!0},SYM_A:{configurable:!0}};Bc.P.get=function(){return 0},Bc.L.get=function(){return 1},Bc.A.get=function(){return 2},Bc.FALSE.get=function(){return-1},Bc.TRUE.get=function(){return-2},Bc.DONTCARE.get=function(){return-3},Bc.SYM_FALSE.get=function(){return"F"},Bc.SYM_TRUE.get=function(){return"T"},Bc.SYM_DONTCARE.get=function(){return"*"},Bc.SYM_P.get=function(){return"0"},Bc.SYM_L.get=function(){return"1"},Bc.SYM_A.get=function(){return"2"},Gc.prototype.interfaces_=function(){return[]},Gc.prototype.getClass=function(){return Gc},Gc.toDimensionSymbol=function(t){switch(t){case Gc.FALSE:return Gc.SYM_FALSE;case Gc.TRUE:return Gc.SYM_TRUE;case Gc.DONTCARE:return Gc.SYM_DONTCARE;case Gc.P:return Gc.SYM_P;case Gc.L:return Gc.SYM_L;case Gc.A:return Gc.SYM_A}throw new _u},Gc.toDimensionValue=function(t){switch(Au.toUpperCase(t)){case Gc.SYM_FALSE:return Gc.FALSE;case Gc.SYM_TRUE:return Gc.TRUE;case Gc.SYM_DONTCARE:return Gc.DONTCARE;case Gc.SYM_P:return Gc.P;case Gc.SYM_L:return Gc.L;case Gc.SYM_A:return Gc.A}throw new _u},Object.defineProperties(Gc,Bc);function kc(){}kc.prototype.filter=function(t){},kc.prototype.interfaces_=function(){return[]},kc.prototype.getClass=function(){return kc};function zc(){}zc.prototype.filter=function(t,e){},zc.prototype.isDone=function(){},zc.prototype.isGeometryChanged=function(){},zc.prototype.interfaces_=function(){return[]},zc.prototype.getClass=function(){return zc};var jc=function(t){function e(e,n){if(t.call(this,n),this._geometries=e||[],t.hasNullElements(this._geometries))throw new _u}t&&(e.__proto__=t);var n={serialVersionUID:{configurable:!0}};return((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.computeEnvelopeInternal=function(){for(var t=new Yu,e=0;e<this._geometries.length;e++)t.expandToInclude(this._geometries[e].getEnvelopeInternal());return t},e.prototype.getGeometryN=function(t){return this._geometries[t]},e.prototype.getSortIndex=function(){return t.SORTINDEX_GEOMETRYCOLLECTION},e.prototype.getCoordinates=function(){for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=0;n<this._geometries.length;n++)for(var r=this._geometries[n].getCoordinates(),i=0;i<r.length;i++)t[++e]=r[i];return t},e.prototype.getArea=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getArea();return t},e.prototype.equalsExact=function(){if(2!==arguments.length)return t.prototype.equalsExact.apply(this,arguments);var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e))return!1;var r=e;if(this._geometries.length!==r._geometries.length)return!1;for(var i=0;i<this._geometries.length;i++)if(!this._geometries[i].equalsExact(r._geometries[i],n))return!1;return!0},e.prototype.normalize=function(){for(var t=0;t<this._geometries.length;t++)this._geometries[t].normalize();qc.sort(this._geometries)},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()},e.prototype.getBoundaryDimension=function(){for(var t=Gc.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getBoundaryDimension());return t},e.prototype.getDimension=function(){for(var t=Gc.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getDimension());return t},e.prototype.getLength=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getLength();return t},e.prototype.getNumPoints=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getNumPoints();return t},e.prototype.getNumGeometries=function(){return this._geometries.length},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[n]=this._geometries[n].reverse();return this.getFactory().createGeometryCollection(e)},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0],e=new ki(qc.asList(this._geometries)),n=new ki(qc.asList(t._geometries));return this.compare(e,n)}if(2===arguments.length){for(var i=arguments[1],o=arguments[0],s=this.getNumGeometries(),a=o.getNumGeometries(),u=0;u<s&&u<a;){var c=this.getGeometryN(u),h=o.getGeometryN(u),l=c.compareToSameClass(h,i);if(0!==l)return l;u++}return u<s?1:u<a?-1:0}},e.prototype.apply=function(){if(Lu(arguments[0],pc))for(var t=arguments[0],e=0;e<this._geometries.length;e++)this._geometries[e].apply(t);else if(Lu(arguments[0],zc)){var n=arguments[0];if(0===this._geometries.length)return null;for(var r=0;r<this._geometries.length&&(this._geometries[r].apply(n),!n.isDone());r++);n.isGeometryChanged()&&this.geometryChanged()}else if(Lu(arguments[0],kc)){var i=arguments[0];i.filter(this);for(var o=0;o<this._geometries.length;o++)this._geometries[o].apply(i)}else if(Lu(arguments[0],uc)){var s=arguments[0];s.filter(this);for(var a=0;a<this._geometries.length;a++)this._geometries[a].apply(s)}},e.prototype.getBoundary=function(){return this.checkNotGeometryCollection(this),tc.shouldNeverReachHere(),null},e.prototype.clone=function(){var e=t.prototype.clone.call(this);e._geometries=new Array(this._geometries.length).fill(null);for(var n=0;n<this._geometries.length;n++)e._geometries[n]=this._geometries[n].clone();return e},e.prototype.getGeometryType=function(){return"GeometryCollection"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.isEmpty=function(){for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isEmpty())return!1;return!0},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x4f07bcb1f857d800},Object.defineProperties(e,n),e}(cc),Xc=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t);var n={serialVersionUID:{configurable:!0}};return((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.getSortIndex=function(){return cc.SORTINDEX_MULTILINESTRING},e.prototype.equalsExact=function(){if(2!==arguments.length)return t.prototype.equalsExact.apply(this,arguments);var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?Gc.FALSE:0},e.prototype.isClosed=function(){if(this.isEmpty())return!1;for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isClosed())return!1;return!0},e.prototype.getDimension=function(){return 1},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[t-1-n]=this._geometries[n].reverse();return this.getFactory().createMultiLineString(e)},e.prototype.getBoundary=function(){return new Uc(this).getBoundary()},e.prototype.getGeometryType=function(){return"MultiLineString"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[Dc]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x7155d2ab4afa8000},Object.defineProperties(e,n),e}(jc),Uc=function(){var t,e,n,r;this._geom=null,this._geomFact=null,this._bnRule=null,this._endpointMap=null,1===arguments.length?(t=arguments[0],e=fc.MOD2_BOUNDARY_RULE,this._geom=t,this._geomFact=t.getFactory(),this._bnRule=e):2===arguments.length&&(n=arguments[0],r=arguments[1],this._geom=n,this._geomFact=n.getFactory(),this._bnRule=r)};Uc.prototype.boundaryMultiLineString=function(t){if(this._geom.isEmpty())return this.getEmptyMultiPoint();var e=this.computeBoundaryCoordinates(t);return 1===e.length?this._geomFact.createPoint(e[0]):this._geomFact.createMultiPointFromCoords(e)},Uc.prototype.getBoundary=function(){return this._geom instanceof Jc?this.boundaryLineString(this._geom):this._geom instanceof Xc?this.boundaryMultiLineString(this._geom):this._geom.getBoundary()},Uc.prototype.boundaryLineString=function(t){return this._geom.isEmpty()?this.getEmptyMultiPoint():t.isClosed()?this._bnRule.isInBoundary(2)?t.getStartPoint():this._geomFact.createMultiPoint():this._geomFact.createMultiPoint([t.getStartPoint(),t.getEndPoint()])},Uc.prototype.getEmptyMultiPoint=function(){return this._geomFact.createMultiPoint()},Uc.prototype.computeBoundaryCoordinates=function(t){var e=new bc;this._endpointMap=new Gi;for(var n=0;n<t.getNumGeometries();n++){var r=t.getGeometryN(n);0!==r.getNumPoints()&&(this.addEndpoint(r.getCoordinateN(0)),this.addEndpoint(r.getCoordinateN(r.getNumPoints()-1)))}for(var i=this._endpointMap.entrySet().iterator();i.hasNext();){var o=i.next(),s=o.getValue().count;this._bnRule.isInBoundary(s)&&e.add(o.getKey())}return Cc.toCoordinateArray(e)},Uc.prototype.addEndpoint=function(t){var e=this._endpointMap.get(t);null===e&&(e=new Yc,this._endpointMap.put(t,e)),e.count++},Uc.prototype.interfaces_=function(){return[]},Uc.prototype.getClass=function(){return Uc},Uc.getBoundary=function(){return 1===arguments.length?new Uc(arguments[0]).getBoundary():2===arguments.length?new Uc(arguments[0],arguments[1]).getBoundary():void 0};var Yc=function(){this.count=null};Yc.prototype.interfaces_=function(){return[]},Yc.prototype.getClass=function(){return Yc};function Vc(){}var Hc={NEWLINE:{configurable:!0},SIMPLE_ORDINATE_FORMAT:{configurable:!0}};Vc.prototype.interfaces_=function(){return[]},Vc.prototype.getClass=function(){return Vc},Vc.chars=function(t,e){for(var n=new Array(e).fill(null),r=0;r<e;r++)n[r]=t;return String(n)},Vc.getStackTrace=function(){if(1===arguments.length){var e=new function(){},n=new function(){};return arguments[0].printStackTrace(n),e.toString()}if(2===arguments.length){for(var i=arguments[1],o="",s=new function(){}(new function(){}(Vc.getStackTrace(arguments[0]))),a=0;a<i;a++)try{o+=s.readLine()+Vc.NEWLINE}catch(t){if(!(t instanceof zi))throw t;tc.shouldNeverReachHere()}return o}},Vc.split=function(t,e){for(var n=e.length,r=new bc,i=""+t,o=i.indexOf(e);0<=o;){var s=i.substring(0,o);r.add(s),o=(i=i.substring(o+n)).indexOf(e)}0<i.length&&r.add(i);for(var a=new Array(r.size()).fill(null),u=0;u<a.length;u++)a[u]=r.get(u);return a},Vc.toString=function(){if(1===arguments.length){var t=arguments[0];return Vc.SIMPLE_ORDINATE_FORMAT.format(t)}},Vc.spaces=function(t){return Vc.chars(" ",t)},Hc.NEWLINE.get=function(){return Xu.getProperty("line.separator")},Hc.SIMPLE_ORDINATE_FORMAT.get=function(){return new function(){}},Object.defineProperties(Vc,Hc);function Wc(){}Wc.prototype.interfaces_=function(){return[]},Wc.prototype.getClass=function(){return Wc},Wc.copyCoord=function(t,e,n,r){for(var i=Math.min(t.getDimension(),n.getDimension()),o=0;o<i;o++)n.setOrdinate(r,o,t.getOrdinate(e,o))},Wc.isRing=function(t){var e=t.size();return 0===e||!(e<=3)&&t.getOrdinate(0,Bu.X)===t.getOrdinate(e-1,Bu.X)&&t.getOrdinate(0,Bu.Y)===t.getOrdinate(e-1,Bu.Y)},Wc.isEqual=function(t,e){var n=t.size();if(n!==e.size())return!1;for(var r=Math.min(t.getDimension(),e.getDimension()),i=0;i<n;i++)for(var o=0;o<r;o++){var s=t.getOrdinate(i,o),a=e.getOrdinate(i,o);if(!(t.getOrdinate(i,o)===e.getOrdinate(i,o)||mu.isNaN(s)&&mu.isNaN(a)))return!1}return!0},Wc.extend=function(t,e,n){var r=t.create(n,e.getDimension()),i=e.size();if(Wc.copy(e,0,r,0,i),0<i)for(var o=i;o<n;o++)Wc.copy(e,i-1,r,o,1);return r},Wc.reverse=function(t){for(var e=t.size()-1,n=Math.trunc(e/2),r=0;r<=n;r++)Wc.swap(t,r,e-r)},Wc.swap=function(t,e,n){if(e===n)return null;for(var r=0;r<t.getDimension();r++){var i=t.getOrdinate(e,r);t.setOrdinate(e,r,t.getOrdinate(n,r)),t.setOrdinate(n,r,i)}},Wc.copy=function(t,e,n,r,i){for(var o=0;o<i;o++)Wc.copyCoord(t,e+o,n,r+o)},Wc.toString=function(){if(1===arguments.length){var t=arguments[0],e=t.size();if(0===e)return"()";var n=t.getDimension(),r=new Ru;r.append("(");for(var i=0;i<e;i++){0<i&&r.append(" ");for(var o=0;o<n;o++)0<o&&r.append(","),r.append(Vc.toString(t.getOrdinate(i,o)))}return r.append(")"),r.toString()}},Wc.ensureValidRing=function(t,e){var n=e.size();return 0===n?e:n<=3?Wc.createClosedRing(t,e,4):e.getOrdinate(0,Bu.X)===e.getOrdinate(n-1,Bu.X)&&e.getOrdinate(0,Bu.Y)===e.getOrdinate(n-1,Bu.Y)?e:Wc.createClosedRing(t,e,n+1)},Wc.createClosedRing=function(t,e,n){var r=t.create(n,e.getDimension()),i=e.size();Wc.copy(e,0,r,0,i);for(var o=i;o<n;o++)Wc.copy(e,0,r,o,1);return r};function Zc(){}var Jc=function(t){function e(e,n){t.call(this,n),this._points=null,this.init(e)}t&&(e.__proto__=t);var n={serialVersionUID:{configurable:!0}};return((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.computeEnvelopeInternal=function(){return this.isEmpty()?new Yu:this._points.expandEnvelope(new Yu)},e.prototype.isRing=function(){return this.isClosed()&&this.isSimple()},e.prototype.getSortIndex=function(){return t.SORTINDEX_LINESTRING},e.prototype.getCoordinates=function(){return this._points.toCoordinateArray()},e.prototype.equalsExact=function(){if(2!==arguments.length)return t.prototype.equalsExact.apply(this,arguments);var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e))return!1;var r=e;if(this._points.size()!==r._points.size())return!1;for(var i=0;i<this._points.size();i++)if(!this.equal(this._points.getCoordinate(i),r._points.getCoordinate(i),n))return!1;return!0},e.prototype.normalize=function(){for(var t=0;t<Math.trunc(this._points.size()/2);t++){var e=this._points.size()-1-t;if(!this._points.getCoordinate(t).equals(this._points.getCoordinate(e)))return 0<this._points.getCoordinate(t).compareTo(this._points.getCoordinate(e))&&Wc.reverse(this._points),null}},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._points.getCoordinate(0)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?Gc.FALSE:0},e.prototype.isClosed=function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},e.prototype.getEndPoint=function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},e.prototype.getDimension=function(){return 1},e.prototype.getLength=function(){return sc.computeLength(this._points)},e.prototype.getNumPoints=function(){return this._points.size()},e.prototype.reverse=function(){var t=this._points.copy();return Wc.reverse(t),this.getFactory().createLineString(t)},e.prototype.compareToSameClass=function(){if(1===arguments.length){for(var t=arguments[0],e=0,n=0;e<this._points.size()&&n<t._points.size();){var r=this._points.getCoordinate(e).compareTo(t._points.getCoordinate(n));if(0!==r)return r;e++,n++}return e<this._points.size()?1:n<t._points.size()?-1:0}if(2===arguments.length){var i=arguments[0];return arguments[1].compare(this._points,i._points)}},e.prototype.apply=function(){if(Lu(arguments[0],pc))for(var t=arguments[0],e=0;e<this._points.size();e++)t.filter(this._points.getCoordinate(e));else if(Lu(arguments[0],zc)){var n=arguments[0];if(0===this._points.size())return null;for(var r=0;r<this._points.size()&&(n.filter(this._points,r),!n.isDone());r++);n.isGeometryChanged()&&this.geometryChanged()}else(Lu(arguments[0],kc)||Lu(arguments[0],uc))&&arguments[0].filter(this)},e.prototype.getBoundary=function(){return new Uc(this).getBoundary()},e.prototype.isEquivalentClass=function(t){return t instanceof e},e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e._points=this._points.clone(),e},e.prototype.getCoordinateN=function(t){return this._points.getCoordinate(t)},e.prototype.getGeometryType=function(){return"LineString"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._points},e.prototype.isEmpty=function(){return 0===this._points.size()},e.prototype.init=function(t){if(null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),1===t.size())throw new _u(t.size());this._points=t},e.prototype.isCoordinate=function(t){for(var e=0;e<this._points.size();e++)if(this._points.getCoordinate(e).equals(t))return!0;return!1},e.prototype.getStartPoint=function(){return this.isEmpty()?null:this.getPointN(0)},e.prototype.getPointN=function(t){return this.getFactory().createPoint(this._points.getCoordinate(t))},e.prototype.interfaces_=function(){return[Dc]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x2b2b51ba435c8e00},Object.defineProperties(e,n),e}(cc);Zc.prototype.interfaces_=function(){return[]},Zc.prototype.getClass=function(){return Zc};function Qc(){}var Kc=function(t){function e(e,n){t.call(this,n),this._coordinates=e||null,this.init(this._coordinates)}t&&(e.__proto__=t);var n={serialVersionUID:{configurable:!0}};return((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.computeEnvelopeInternal=function(){if(this.isEmpty())return new Yu;var t=new Yu;return t.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),t},e.prototype.getSortIndex=function(){return t.SORTINDEX_POINT},e.prototype.getCoordinates=function(){return this.isEmpty()?[]:[this.getCoordinate()]},e.prototype.equalsExact=function(){if(2!==arguments.length)return t.prototype.equalsExact.apply(this,arguments);var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&(!(!this.isEmpty()||!e.isEmpty())||this.isEmpty()===e.isEmpty()&&this.equal(e.getCoordinate(),this.getCoordinate(),n))},e.prototype.normalize=function(){},e.prototype.getCoordinate=function(){return 0!==this._coordinates.size()?this._coordinates.getCoordinate(0):null},e.prototype.getBoundaryDimension=function(){return Gc.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getNumPoints=function(){return this.isEmpty()?0:1},e.prototype.reverse=function(){return this.copy()},e.prototype.getX=function(){if(null===this.getCoordinate())throw new Error("getX called on empty Point");return this.getCoordinate().x},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0];return this.getCoordinate().compareTo(t.getCoordinate())}if(2===arguments.length){var e=arguments[0];return arguments[1].compare(this._coordinates,e._coordinates)}},e.prototype.apply=function(){if(Lu(arguments[0],pc)){var t=arguments[0];if(this.isEmpty())return null;t.filter(this.getCoordinate())}else if(Lu(arguments[0],zc)){var e=arguments[0];if(this.isEmpty())return null;e.filter(this._coordinates,0),e.isGeometryChanged()&&this.geometryChanged()}else(Lu(arguments[0],kc)||Lu(arguments[0],uc))&&arguments[0].filter(this)},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e._coordinates=this._coordinates.clone(),e},e.prototype.getGeometryType=function(){return"Point"},e.prototype.copy=function(){return new e(this._coordinates.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._coordinates},e.prototype.getY=function(){if(null===this.getCoordinate())throw new Error("getY called on empty Point");return this.getCoordinate().y},e.prototype.isEmpty=function(){return 0===this._coordinates.size()},e.prototype.init=function(t){null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),tc.isTrue(t.size()<=1),this._coordinates=t},e.prototype.isSimple=function(){return!0},e.prototype.interfaces_=function(){return[Zc]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x44077bad161cbc00},Object.defineProperties(e,n),e}(cc);Qc.prototype.interfaces_=function(){return[]},Qc.prototype.getClass=function(){return Qc};function rh(t){this._factory=t||null,this._isUserDataCopied=!1}var $c=function(t){function e(e,n,r){if(t.call(this,r),this._shell=null,(this._holes=null)===e&&(e=this.getFactory().createLinearRing()),null===n&&(n=[]),t.hasNullElements(n))throw new _u;if(e.isEmpty()&&t.hasNonEmptyElements(n))throw new _u;this._shell=e,this._holes=n}t&&(e.__proto__=t);var n={serialVersionUID:{configurable:!0}};return((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.computeEnvelopeInternal=function(){return this._shell.getEnvelopeInternal()},e.prototype.getSortIndex=function(){return t.SORTINDEX_POLYGON},e.prototype.getCoordinates=function(){if(this.isEmpty())return[];for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=this._shell.getCoordinates(),r=0;r<n.length;r++)t[++e]=n[r];for(var i=0;i<this._holes.length;i++)for(var o=this._holes[i].getCoordinates(),s=0;s<o.length;s++)t[++e]=o[s];return t},e.prototype.getArea=function(){var t=0;t+=Math.abs(sc.signedArea(this._shell.getCoordinateSequence()));for(var e=0;e<this._holes.length;e++)t-=Math.abs(sc.signedArea(this._holes[e].getCoordinateSequence()));return t},e.prototype.isRectangle=function(){if(0!==this.getNumInteriorRing())return!1;if(null===this._shell)return!1;if(5!==this._shell.getNumPoints())return!1;for(var t=this._shell.getCoordinateSequence(),e=this.getEnvelopeInternal(),n=0;n<5;n++){var r=t.getX(n);if(r!==e.getMinX()&&r!==e.getMaxX())return!1;var i=t.getY(n);if(i!==e.getMinY()&&i!==e.getMaxY())return!1}for(var o=t.getX(0),s=t.getY(0),a=1;a<=4;a++){var u=t.getX(a),c=t.getY(a);if(u!==o==(c!==s))return!1;o=u,s=c}return!0},e.prototype.equalsExact=function(){if(2!==arguments.length)return t.prototype.equalsExact.apply(this,arguments);var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e))return!1;var r=e,i=this._shell,o=r._shell;if(!i.equalsExact(o,n))return!1;if(this._holes.length!==r._holes.length)return!1;for(var s=0;s<this._holes.length;s++)if(!this._holes[s].equalsExact(r._holes[s],n))return!1;return!0},e.prototype.normalize=function(){if(0===arguments.length){this.normalize(this._shell,!0);for(var t=0;t<this._holes.length;t++)this.normalize(this._holes[t],!1);qc.sort(this._holes)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(e.isEmpty())return null;var r=new Array(e.getCoordinates().length-1).fill(null);Xu.arraycopy(e.getCoordinates(),0,r,0,r.length);var i=Cc.minCoordinate(e.getCoordinates());Cc.scroll(r,i),Xu.arraycopy(r,0,e.getCoordinates(),0,r.length),e.getCoordinates()[r.length]=r[0],sc.isCCW(e.getCoordinates())===n&&Cc.reverse(e.getCoordinates())}},e.prototype.getCoordinate=function(){return this._shell.getCoordinate()},e.prototype.getNumInteriorRing=function(){return this._holes.length},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.getLength=function(){var t=0;t+=this._shell.getLength();for(var e=0;e<this._holes.length;e++)t+=this._holes[e].getLength();return t},e.prototype.getNumPoints=function(){for(var t=this._shell.getNumPoints(),e=0;e<this._holes.length;e++)t+=this._holes[e].getNumPoints();return t},e.prototype.reverse=function(){var t=this.copy();t._shell=this._shell.copy().reverse(),t._holes=new Array(this._holes.length).fill(null);for(var e=0;e<this._holes.length;e++)t._holes[e]=this._holes[e].copy().reverse();return t},e.prototype.convexHull=function(){return this.getExteriorRing().convexHull()},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0],e=this._shell,n=t._shell;return e.compareToSameClass(n)}if(2===arguments.length){var i=arguments[1],o=arguments[0],s=this._shell,a=o._shell,u=s.compareToSameClass(a,i);if(0!==u)return u;for(var c=this.getNumInteriorRing(),h=o.getNumInteriorRing(),l=0;l<c&&l<h;){var p=this.getInteriorRingN(l),f=o.getInteriorRingN(l),g=p.compareToSameClass(f,i);if(0!==g)return g;l++}return l<c?1:l<h?-1:0}},e.prototype.apply=function(t){if(Lu(t,pc)){this._shell.apply(t);for(var e=0;e<this._holes.length;e++)this._holes[e].apply(t)}else if(Lu(t,zc)){if(this._shell.apply(t),!t.isDone())for(var n=0;n<this._holes.length&&(this._holes[n].apply(t),!t.isDone());n++);t.isGeometryChanged()&&this.geometryChanged()}else if(Lu(t,kc))t.filter(this);else if(Lu(t,uc)){t.filter(this),this._shell.apply(t);for(var r=0;r<this._holes.length;r++)this._holes[r].apply(t)}},e.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var t=new Array(this._holes.length+1).fill(null);t[0]=this._shell;for(var e=0;e<this._holes.length;e++)t[e+1]=this._holes[e];return t.length<=1?this.getFactory().createLinearRing(t[0].getCoordinateSequence()):this.getFactory().createMultiLineString(t)},e.prototype.clone=function(){var e=t.prototype.clone.call(this);e._shell=this._shell.clone(),e._holes=new Array(this._holes.length).fill(null);for(var n=0;n<this._holes.length;n++)e._holes[n]=this._holes[n].clone();return e},e.prototype.getGeometryType=function(){return"Polygon"},e.prototype.copy=function(){for(var t=this._shell.copy(),n=new Array(this._holes.length).fill(null),r=0;r<n.length;r++)n[r]=this._holes[r].copy();return new e(t,n,this._factory)},e.prototype.getExteriorRing=function(){return this._shell},e.prototype.isEmpty=function(){return this._shell.isEmpty()},e.prototype.getInteriorRingN=function(t){return this._holes[t]},e.prototype.interfaces_=function(){return[Qc]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x307ffefd8dc97200},Object.defineProperties(e,n),e}(cc),th=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t);var n={serialVersionUID:{configurable:!0}};return((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.getSortIndex=function(){return cc.SORTINDEX_MULTIPOINT},e.prototype.isValid=function(){return!0},e.prototype.equalsExact=function(){if(2!==arguments.length)return t.prototype.equalsExact.apply(this,arguments);var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)},e.prototype.getCoordinate=function(){if(1!==arguments.length)return t.prototype.getCoordinate.apply(this,arguments);var e=arguments[0];return this._geometries[e].getCoordinate()},e.prototype.getBoundaryDimension=function(){return Gc.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.getGeometryType=function(){return"MultiPoint"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[Zc]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x6fb1ed4162e0fc00},Object.defineProperties(e,n),e}(jc),eh=function(t){function e(e,n){e instanceof bu&&n instanceof _h&&(e=n.getCoordinateSequenceFactory().create(e)),t.call(this,e,n),this.validateConstruction()}t&&(e.__proto__=t);var n={MINIMUM_VALID_SIZE:{configurable:!0},serialVersionUID:{configurable:!0}};return((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.getSortIndex=function(){return cc.SORTINDEX_LINEARRING},e.prototype.getBoundaryDimension=function(){return Gc.FALSE},e.prototype.isClosed=function(){return!!this.isEmpty()||t.prototype.isClosed.call(this)},e.prototype.reverse=function(){var t=this._points.copy();return Wc.reverse(t),this.getFactory().createLinearRing(t)},e.prototype.validateConstruction=function(){if(!this.isEmpty()&&!t.prototype.isClosed.call(this))throw new _u;if(1<=this.getCoordinateSequence().size()&&this.getCoordinateSequence().size()<e.MINIMUM_VALID_SIZE)throw new _u(this.getCoordinateSequence().size())},e.prototype.getGeometryType=function(){return"LinearRing"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.MINIMUM_VALID_SIZE.get=function(){return 4},n.serialVersionUID.get=function(){return-0x3b229e262367a600},Object.defineProperties(e,n),e}(Jc),nh=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t);var n={serialVersionUID:{configurable:!0}};return((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.getSortIndex=function(){return cc.SORTINDEX_MULTIPOLYGON},e.prototype.equalsExact=function(){if(2!==arguments.length)return t.prototype.equalsExact.apply(this,arguments);var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[n]=this._geometries[n].reverse();return this.getFactory().createMultiPolygon(e)},e.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var t=new bc,e=0;e<this._geometries.length;e++)for(var n=this._geometries[e].getBoundary(),r=0;r<n.getNumGeometries();r++)t.add(n.getGeometryN(r));var i=new Array(t.size()).fill(null);return this.getFactory().createMultiLineString(t.toArray(i))},e.prototype.getGeometryType=function(){return"MultiPolygon"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[Qc]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x7a5aa1369171980},Object.defineProperties(e,n),e}(jc),ih={NoOpGeometryOperation:{configurable:!0},CoordinateOperation:{configurable:!0},CoordinateSequenceOperation:{configurable:!0}};rh.prototype.setCopyUserData=function(t){this._isUserDataCopied=t},rh.prototype.edit=function(t,e){if(null===t)return null;var n=this.editInternal(t,e);return this._isUserDataCopied&&n.setUserData(t.getUserData()),n},rh.prototype.editInternal=function(t,e){return null===this._factory&&(this._factory=t.getFactory()),t instanceof jc?this.editGeometryCollection(t,e):t instanceof $c?this.editPolygon(t,e):t instanceof Kc||t instanceof Jc?e.edit(t,this._factory):(tc.shouldNeverReachHere("Unsupported Geometry class: "+t.getClass().getName()),null)},rh.prototype.editGeometryCollection=function(t,e){for(var n=e.edit(t,this._factory),r=new bc,i=0;i<n.getNumGeometries();i++){var o=this.edit(n.getGeometryN(i),e);null===o||o.isEmpty()||r.add(o)}return n.getClass()===th?this._factory.createMultiPoint(r.toArray([])):n.getClass()===Xc?this._factory.createMultiLineString(r.toArray([])):n.getClass()===nh?this._factory.createMultiPolygon(r.toArray([])):this._factory.createGeometryCollection(r.toArray([]))},rh.prototype.editPolygon=function(t,e){var n=e.edit(t,this._factory);if(null===n&&(n=this._factory.createPolygon(null)),n.isEmpty())return n;var r=this.edit(n.getExteriorRing(),e);if(null===r||r.isEmpty())return this._factory.createPolygon();for(var i=new bc,o=0;o<n.getNumInteriorRing();o++){var s=this.edit(n.getInteriorRingN(o),e);null===s||s.isEmpty()||i.add(s)}return this._factory.createPolygon(r,i.toArray([]))},rh.prototype.interfaces_=function(){return[]},rh.prototype.getClass=function(){return rh},rh.GeometryEditorOperation=function(){},ih.NoOpGeometryOperation.get=function(){return oh},ih.CoordinateOperation.get=function(){return sh},ih.CoordinateSequenceOperation.get=function(){return ah},Object.defineProperties(rh,ih);var oh=function(){};oh.prototype.edit=function(t,e){return t},oh.prototype.interfaces_=function(){return[rh.GeometryEditorOperation]},oh.prototype.getClass=function(){return oh};var sh=function(){};sh.prototype.edit=function(t,e){var n=this.editCoordinates(t.getCoordinates(),t);return null===n?t:t instanceof eh?e.createLinearRing(n):t instanceof Jc?e.createLineString(n):t instanceof Kc?0<n.length?e.createPoint(n[0]):e.createPoint():t},sh.prototype.interfaces_=function(){return[rh.GeometryEditorOperation]},sh.prototype.getClass=function(){return sh};var ah=function(){};ah.prototype.edit=function(t,e){return t instanceof eh?e.createLinearRing(this.edit(t.getCoordinateSequence(),t)):t instanceof Jc?e.createLineString(this.edit(t.getCoordinateSequence(),t)):t instanceof Kc?e.createPoint(this.edit(t.getCoordinateSequence(),t)):t},ah.prototype.interfaces_=function(){return[rh.GeometryEditorOperation]},ah.prototype.getClass=function(){return ah};function uh(){if(this._dimension=3,this._coordinates=null,1===arguments.length){if(arguments[0]instanceof Array)this._coordinates=arguments[0],this._dimension=3;else if(Number.isInteger(arguments[0])){var t=arguments[0];this._coordinates=new Array(t).fill(null);for(var e=0;e<t;e++)this._coordinates[e]=new bu}else if(Lu(arguments[0],Bu)){var n=arguments[0];if(null===n)return this._coordinates=new Array(0).fill(null),null;this._dimension=n.getDimension(),this._coordinates=new Array(n.size()).fill(null);for(var r=0;r<this._coordinates.length;r++)this._coordinates[r]=n.getCoordinateCopy(r)}}else if(2===arguments.length)if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var i=arguments[0],o=arguments[1];this._coordinates=i,this._dimension=o,null===i&&(this._coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var s=arguments[0],a=arguments[1];this._coordinates=new Array(s).fill(null),this._dimension=a;for(var u=0;u<s;u++)this._coordinates[u]=new bu}}var ch={serialVersionUID:{configurable:!0}};uh.prototype.setOrdinate=function(t,e,n){switch(e){case Bu.X:this._coordinates[t].x=n;break;case Bu.Y:this._coordinates[t].y=n;break;case Bu.Z:this._coordinates[t].z=n;break;default:throw new _u}},uh.prototype.size=function(){return this._coordinates.length},uh.prototype.getOrdinate=function(t,e){switch(e){case Bu.X:return this._coordinates[t].x;case Bu.Y:return this._coordinates[t].y;case Bu.Z:return this._coordinates[t].z}return mu.NaN},uh.prototype.getCoordinate=function(){if(1===arguments.length){var t=arguments[0];return this._coordinates[t]}var e,n;2===arguments.length&&(e=arguments[0],(n=arguments[1]).x=this._coordinates[e].x,n.y=this._coordinates[e].y,n.z=this._coordinates[e].z)},uh.prototype.getCoordinateCopy=function(t){return new bu(this._coordinates[t])},uh.prototype.getDimension=function(){return this._dimension},uh.prototype.getX=function(t){return this._coordinates[t].x},uh.prototype.clone=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].clone();return new uh(t,this._dimension)},uh.prototype.expandEnvelope=function(t){for(var e=0;e<this._coordinates.length;e++)t.expandToInclude(this._coordinates[e]);return t},uh.prototype.copy=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].copy();return new uh(t,this._dimension)},uh.prototype.toString=function(){if(0<this._coordinates.length){var t=new Ru(17*this._coordinates.length);t.append("("),t.append(this._coordinates[0]);for(var e=1;e<this._coordinates.length;e++)t.append(", "),t.append(this._coordinates[e]);return t.append(")"),t.toString()}return"()"},uh.prototype.getY=function(t){return this._coordinates[t].y},uh.prototype.toCoordinateArray=function(){return this._coordinates},uh.prototype.interfaces_=function(){return[Bu,Li]},uh.prototype.getClass=function(){return uh},ch.serialVersionUID.get=function(){return-0xcb44a778db18e00},Object.defineProperties(uh,ch);function hh(){}var lh={serialVersionUID:{configurable:!0},instanceObject:{configurable:!0}};hh.prototype.readResolve=function(){return hh.instance()},hh.prototype.create=function(){if(1===arguments.length){if(arguments[0]instanceof Array)return new uh(arguments[0]);if(Lu(arguments[0],Bu))return new uh(arguments[0])}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return 3<r&&(r=3),r<2?new uh(n):new uh(n,r)}},hh.prototype.interfaces_=function(){return[Cu,Li]},hh.prototype.getClass=function(){return hh},hh.instance=function(){return hh.instanceObject},lh.serialVersionUID.get=function(){return-0x38e49fa6cf6f2e00},lh.instanceObject.get=function(){return new hh},Object.defineProperties(hh,lh);function fh(){var e,n,r;this._modelType=null,this._scale=null,0===arguments.length?this._modelType=fh.FLOATING:1===arguments.length&&(arguments[0]instanceof dh?(e=arguments[0],(this._modelType=e)===fh.FIXED&&this.setScale(1)):"number"==typeof arguments[0]?(n=arguments[0],this._modelType=fh.FIXED,this.setScale(n)):arguments[0]instanceof fh&&(r=arguments[0],this._modelType=r._modelType,this._scale=r._scale))}var ph=function(t){function e(){t.call(this),this.map_=new Map}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.get=function(t){return this.map_.get(t)||null},e.prototype.put=function(t,e){return this.map_.set(t,e),e},e.prototype.values=function(){for(var t=new bc,e=this.map_.values(),n=e.next();!n.done;)t.add(n.value),n=e.next();return t},e.prototype.entrySet=function(){var t=new Rc;return this.map_.entries().forEach(function(e){return t.add(e)}),t},e.prototype.size=function(){return this.map_.size()},e}(Pc),gh={serialVersionUID:{configurable:!0},maximumPreciseValue:{configurable:!0}};fh.prototype.equals=function(t){if(!(t instanceof fh))return!1;return this._modelType===t._modelType&&this._scale===t._scale},fh.prototype.compareTo=function(t){var e=t,n=this.getMaximumSignificantDigits(),r=e.getMaximumSignificantDigits();return new Tu(n).compareTo(new Tu(r))},fh.prototype.getScale=function(){return this._scale},fh.prototype.isFloating=function(){return this._modelType===fh.FLOATING||this._modelType===fh.FLOATING_SINGLE},fh.prototype.getType=function(){return this._modelType},fh.prototype.toString=function(){var t="UNKNOWN";return this._modelType===fh.FLOATING?t="Floating":this._modelType===fh.FLOATING_SINGLE?t="Floating-Single":this._modelType===fh.FIXED&&(t="Fixed (Scale="+this.getScale()+")"),t},fh.prototype.makePrecise=function(){if("number"==typeof arguments[0]){var t=arguments[0];return mu.isNaN(t)?t:this._modelType!==fh.FLOATING_SINGLE&&this._modelType===fh.FIXED?Math.round(t*this._scale)/this._scale:t}if(arguments[0]instanceof bu){var e=arguments[0];if(this._modelType===fh.FLOATING)return null;e.x=this.makePrecise(e.x),e.y=this.makePrecise(e.y)}},fh.prototype.getMaximumSignificantDigits=function(){var t=16;return this._modelType===fh.FLOATING?t=16:this._modelType===fh.FLOATING_SINGLE?t=6:this._modelType===fh.FIXED&&(t=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),t},fh.prototype.setScale=function(t){this._scale=Math.abs(t)},fh.prototype.interfaces_=function(){return[Li,xu]},fh.prototype.getClass=function(){return fh},fh.mostPrecise=function(t,e){return 0<=t.compareTo(e)?t:e},gh.serialVersionUID.get=function(){return 0x6bee6404e9a25c00},gh.maximumPreciseValue.get=function(){return 9007199254740992},Object.defineProperties(fh,gh);var dh=function t(e){this._name=e||null,t.nameToTypeMap.put(e,this)},yh={serialVersionUID:{configurable:!0},nameToTypeMap:{configurable:!0}};dh.prototype.readResolve=function(){return dh.nameToTypeMap.get(this._name)},dh.prototype.toString=function(){return this._name},dh.prototype.interfaces_=function(){return[Li]},dh.prototype.getClass=function(){return dh},yh.serialVersionUID.get=function(){return-552860263173159e4},yh.nameToTypeMap.get=function(){return new ph},Object.defineProperties(dh,yh),fh.Type=dh,fh.FIXED=new dh("FIXED"),fh.FLOATING=new dh("FLOATING"),fh.FLOATING_SINGLE=new dh("FLOATING SINGLE");var _h=function t(){this._precisionModel=new fh,this._SRID=0,this._coordinateSequenceFactory=t.getDefaultCoordinateSequenceFactory(),0===arguments.length||(1===arguments.length?Lu(arguments[0],Cu)?this._coordinateSequenceFactory=arguments[0]:arguments[0]instanceof fh&&(this._precisionModel=arguments[0]):2===arguments.length?(this._precisionModel=arguments[0],this._SRID=arguments[1]):3===arguments.length&&(this._precisionModel=arguments[0],this._SRID=arguments[1],this._coordinateSequenceFactory=arguments[2]))},mh={serialVersionUID:{configurable:!0}};_h.prototype.toGeometry=function(t){return t.isNull()?this.createPoint(null):t.getMinX()===t.getMaxX()&&t.getMinY()===t.getMaxY()?this.createPoint(new bu(t.getMinX(),t.getMinY())):t.getMinX()===t.getMaxX()||t.getMinY()===t.getMaxY()?this.createLineString([new bu(t.getMinX(),t.getMinY()),new bu(t.getMaxX(),t.getMaxY())]):this.createPolygon(this.createLinearRing([new bu(t.getMinX(),t.getMinY()),new bu(t.getMinX(),t.getMaxY()),new bu(t.getMaxX(),t.getMaxY()),new bu(t.getMaxX(),t.getMinY()),new bu(t.getMinX(),t.getMinY())]),null)},_h.prototype.createLineString=function(t){return t?t instanceof Array?new Jc(this.getCoordinateSequenceFactory().create(t),this):Lu(t,Bu)?new Jc(t,this):void 0:new Jc(this.getCoordinateSequenceFactory().create([]),this)},_h.prototype.createMultiLineString=function(){return 0===arguments.length?new Xc(null,this):1===arguments.length?new Xc(arguments[0],this):void 0},_h.prototype.buildGeometry=function(t){for(var e=null,n=!1,r=!1,i=t.iterator();i.hasNext();){var o=i.next(),s=o.getClass();null===e&&(e=s),s!==e&&(n=!0),o.isGeometryCollectionOrDerived()&&(r=!0)}if(null===e)return this.createGeometryCollection();if(n||r)return this.createGeometryCollection(_h.toGeometryArray(t));var a=t.iterator().next();if(1<t.size()){if(a instanceof $c)return this.createMultiPolygon(_h.toPolygonArray(t));if(a instanceof Jc)return this.createMultiLineString(_h.toLineStringArray(t));if(a instanceof Kc)return this.createMultiPoint(_h.toPointArray(t));tc.shouldNeverReachHere("Unhandled class: "+a.getClass().getName())}return a},_h.prototype.createMultiPointFromCoords=function(t){return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)},_h.prototype.createPoint=function(){if(0===arguments.length)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof bu){var t=arguments[0];return this.createPoint(null!==t?this.getCoordinateSequenceFactory().create([t]):null)}if(Lu(arguments[0],Bu))return new Kc(arguments[0],this)}},_h.prototype.getCoordinateSequenceFactory=function(){return this._coordinateSequenceFactory},_h.prototype.createPolygon=function(){if(0===arguments.length)return new $c(null,null,this);if(1===arguments.length){if(Lu(arguments[0],Bu)){var t=arguments[0];return this.createPolygon(this.createLinearRing(t))}if(arguments[0]instanceof Array){var e=arguments[0];return this.createPolygon(this.createLinearRing(e))}if(arguments[0]instanceof eh){var n=arguments[0];return this.createPolygon(n,null)}}else if(2===arguments.length){return new $c(arguments[0],arguments[1],this)}},_h.prototype.getSRID=function(){return this._SRID},_h.prototype.createGeometryCollection=function(){return 0===arguments.length?new jc(null,this):1===arguments.length?new jc(arguments[0],this):void 0},_h.prototype.createGeometry=function(t){return new rh(this).edit(t,{edit:function(){if(2===arguments.length){var t=arguments[0];return this._coordinateSequenceFactory.create(t)}}})},_h.prototype.getPrecisionModel=function(){return this._precisionModel},_h.prototype.createLinearRing=function(){if(0===arguments.length)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLinearRing(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(Lu(arguments[0],Bu))return new eh(arguments[0],this)}},_h.prototype.createMultiPolygon=function(){return 0===arguments.length?new nh(null,this):1===arguments.length?new nh(arguments[0],this):void 0},_h.prototype.createMultiPoint=function(){if(0===arguments.length)return new th(null,this);if(1===arguments.length){if(arguments[0]instanceof Array)return new th(arguments[0],this);if(arguments[0]instanceof Array){var e=arguments[0];return this.createMultiPoint(null!==e?this.getCoordinateSequenceFactory().create(e):null)}if(Lu(arguments[0],Bu)){var n=arguments[0];if(null===n)return this.createMultiPoint(new Array(0).fill(null));for(var r=new Array(n.size()).fill(null),i=0;i<n.size();i++){var o=this.getCoordinateSequenceFactory().create(1,n.getDimension());Wc.copy(n,i,o,0,1),r[i]=this.createPoint(o)}return this.createMultiPoint(r)}}},_h.prototype.interfaces_=function(){return[Li]},_h.prototype.getClass=function(){return _h},_h.toMultiPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},_h.toGeometryArray=function(t){if(null===t)return null;var e=new Array(t.size()).fill(null);return t.toArray(e)},_h.getDefaultCoordinateSequenceFactory=function(){return hh.instance()},_h.toMultiLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},_h.toLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},_h.toMultiPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},_h.toLinearRingArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},_h.toPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},_h.toPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},_h.createPointFromInternalCoord=function(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)},mh.serialVersionUID.get=function(){return-0x5ea75f2051eeb400},Object.defineProperties(_h,mh);function xh(t){this.geometryFactory=t||new _h}var vh=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"];xh.prototype.read=function(t){var e,n=(e="string"==typeof t?JSON.parse(t):t).type;if(!Eh[n])throw new Error("Unknown GeoJSON type: "+e.type);return-1!==vh.indexOf(n)?Eh[n].apply(this,[e.coordinates]):"GeometryCollection"===n?Eh[n].apply(this,[e.geometries]):Eh[n].apply(this,[e])},xh.prototype.write=function(t){var e=t.getGeometryType();if(!wh[e])throw new Error("Geometry is not supported");return wh[e].apply(this,[t])};var Eh={Feature:function(t){var n,e={};for(n in t)e[n]=t[n];if(t.geometry){var r=t.geometry.type;if(!Eh[r])throw new Error("Unknown GeoJSON type: "+t.type);e.geometry=this.read(t.geometry)}return t.bbox&&(e.bbox=Eh.bbox.apply(this,[t.bbox])),e},FeatureCollection:function(t){var e={};if(t.features){e.features=[];for(var n=0;n<t.features.length;++n)e.features.push(this.read(t.features[n]))}return t.bbox&&(e.bbox=this.parse.bbox.apply(this,[t.bbox])),e},coordinates:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(new bu(r[0],r[1]))}return e},bbox:function(t){return this.geometryFactory.createLinearRing([new bu(t[0],t[1]),new bu(t[2],t[1]),new bu(t[2],t[3]),new bu(t[0],t[3]),new bu(t[0],t[1])])},Point:function(t){var e=new bu(t[0],t[1]);return this.geometryFactory.createPoint(e)},MultiPoint:function(t){for(var e=[],n=0;n<t.length;++n)e.push(Eh.Point.apply(this,[t[n]]));return this.geometryFactory.createMultiPoint(e)},LineString:function(t){var e=Eh.coordinates.apply(this,[t]);return this.geometryFactory.createLineString(e)},MultiLineString:function(t){for(var e=[],n=0;n<t.length;++n)e.push(Eh.LineString.apply(this,[t[n]]));return this.geometryFactory.createMultiLineString(e)},Polygon:function(t){for(var e=Eh.coordinates.apply(this,[t[0]]),n=this.geometryFactory.createLinearRing(e),r=[],i=1;i<t.length;++i){var o=t[i],s=Eh.coordinates.apply(this,[o]),a=this.geometryFactory.createLinearRing(s);r.push(a)}return this.geometryFactory.createPolygon(n,r)},MultiPolygon:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(Eh.Polygon.apply(this,[r]))}return this.geometryFactory.createMultiPolygon(e)},GeometryCollection:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(this.read(r))}return this.geometryFactory.createGeometryCollection(e)}},wh={coordinate:function(t){return[t.x,t.y]},Point:function(t){return{type:"Point",coordinates:wh.coordinate.apply(this,[t.getCoordinate()])}},MultiPoint:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=wh.Point.apply(this,[r]);e.push(i.coordinates)}return{type:"MultiPoint",coordinates:e}},LineString:function(t){for(var e=[],n=t.getCoordinates(),r=0;r<n.length;++r){var i=n[r];e.push(wh.coordinate.apply(this,[i]))}return{type:"LineString",coordinates:e}},MultiLineString:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=wh.LineString.apply(this,[r]);e.push(i.coordinates)}return{type:"MultiLineString",coordinates:e}},Polygon:function(t){var e=[],n=wh.LineString.apply(this,[t._shell]);e.push(n.coordinates);for(var r=0;r<t._holes.length;++r){var i=t._holes[r],o=wh.LineString.apply(this,[i]);e.push(o.coordinates)}return{type:"Polygon",coordinates:e}},MultiPolygon:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=wh.Polygon.apply(this,[r]);e.push(i.coordinates)}return{type:"MultiPolygon",coordinates:e}},GeometryCollection:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=r.getGeometryType();e.push(wh[i].apply(this,[r]))}return{type:"GeometryCollection",geometries:e}}},bh=function(t){this.geometryFactory=t||new _h,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new xh(this.geometryFactory)};bh.prototype.read=function(t){var e=this.parser.read(t);return this.precisionModel.getType()===fh.FIXED&&this.reducePrecision(e),e},bh.prototype.reducePrecision=function(t){var e,n;if(t.coordinate)this.precisionModel.makePrecise(t.coordinate);else if(t.points)for(e=0,n=t.points.length;e<n;e++)this.precisionModel.makePrecise(t.points[e]);else if(t.geometries)for(e=0,n=t.geometries.length;e<n;e++)this.reducePrecision(t.geometries[e])};var Ih=function(){this.parser=new xh(this.geometryFactory)};Ih.prototype.write=function(t){return this.parser.write(t)};function Nh(){}var Ch={ON:{configurable:!0},LEFT:{configurable:!0},RIGHT:{configurable:!0}};Nh.prototype.interfaces_=function(){return[]},Nh.prototype.getClass=function(){return Nh},Nh.opposite=function(t){return t===Nh.LEFT?Nh.RIGHT:t===Nh.RIGHT?Nh.LEFT:t},Ch.ON.get=function(){return 0},Ch.LEFT.get=function(){return 1},Ch.RIGHT.get=function(){return 2},Object.defineProperties(Nh,Ch),(ji.prototype=new Error).name="EmptyStackException",(Xi.prototype=new wc).add=function(t){return this.array_.push(t),!0},Xi.prototype.get=function(t){if(t<0||t>=this.size())throw new Error;return this.array_[t]},Xi.prototype.push=function(t){return this.array_.push(t),t},Xi.prototype.pop=function(t){if(0===this.array_.length)throw new ji;return this.array_.pop()},Xi.prototype.peek=function(){if(0===this.array_.length)throw new ji;return this.array_[this.array_.length-1]},Xi.prototype.empty=function(){return 0===this.array_.length},Xi.prototype.isEmpty=function(){return this.empty()},Xi.prototype.search=function(t){return this.array_.indexOf(t)},Xi.prototype.size=function(){return this.array_.length},Xi.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t};function Sh(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null}Sh.prototype.getCoordinate=function(){return this._minCoord},Sh.prototype.getRightmostSide=function(t,e){var n=this.getRightmostSideOfSegment(t,e);return n<0&&(n=this.getRightmostSideOfSegment(t,e-1)),n<0&&(this._minCoord=null,this.checkForRightmostCoordinate(t)),n},Sh.prototype.findRightmostEdgeAtVertex=function(){var t=this._minDe.getEdge().getCoordinates();tc.isTrue(0<this._minIndex&&this._minIndex<t.length,"rightmost point expected to be interior vertex of edge");var e=t[this._minIndex-1],n=t[this._minIndex+1],r=sc.computeOrientation(this._minCoord,n,e),i=!1;(e.y<this._minCoord.y&&n.y<this._minCoord.y&&r===sc.COUNTERCLOCKWISE||e.y>this._minCoord.y&&n.y>this._minCoord.y&&r===sc.CLOCKWISE)&&(i=!0),i&&(this._minIndex=this._minIndex-1)},Sh.prototype.getRightmostSideOfSegment=function(t,e){var n=t.getEdge().getCoordinates();if(e<0||e+1>=n.length)return-1;if(n[e].y===n[e+1].y)return-1;var r=Nh.LEFT;return n[e].y<n[e+1].y&&(r=Nh.RIGHT),r},Sh.prototype.getEdge=function(){return this._orientedDe},Sh.prototype.checkForRightmostCoordinate=function(t){for(var e=t.getEdge().getCoordinates(),n=0;n<e.length-1;n++)(null===this._minCoord||e[n].x>this._minCoord.x)&&(this._minDe=t,this._minIndex=n,this._minCoord=e[n])},Sh.prototype.findRightmostEdgeAtNode=function(){var t=this._minDe.getNode().getEdges();this._minDe=t.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)},Sh.prototype.findEdge=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();n.isForward()&&this.checkForRightmostCoordinate(n)}tc.isTrue(0!==this._minIndex||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),0===this._minIndex?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe,this.getRightmostSide(this._minDe,this._minIndex)===Nh.LEFT&&(this._orientedDe=this._minDe.getSym())},Sh.prototype.interfaces_=function(){return[]},Sh.prototype.getClass=function(){return Sh};function Lh(){this.array_=[]}var Mh=function(t){function e(n,r){t.call(this,e.msgWithCoord(n,r)),this.pt=r?new bu(r):null,this.name="TopologyException"}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),(e.prototype.constructor=e).prototype.getCoordinate=function(){return this.pt},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.msgWithCoord=function(t,e){return e?t:t+" [ "+e+" ]"},e}(Qu);Lh.prototype.addLast=function(t){this.array_.push(t)},Lh.prototype.removeFirst=function(){return this.array_.shift()},Lh.prototype.isEmpty=function(){return 0===this.array_.length};function Ph(){this._finder=null,this._dirEdgeList=new bc,this._nodes=new bc,this._rightMostCoord=null,this._env=null,this._finder=new Sh}Ph.prototype.clearVisitedEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();)t.next().setVisited(!1)},Ph.prototype.getRightmostCoordinate=function(){return this._rightMostCoord},Ph.prototype.computeNodeDepth=function(t){for(var e=null,n=t.getEdges().iterator();n.hasNext();){var r=n.next();if(r.isVisited()||r.getSym().isVisited()){e=r;break}}if(null===e)throw new Mh("unable to find edge to compute depths at "+t.getCoordinate());t.getEdges().computeDepths(e);for(var i=t.getEdges().iterator();i.hasNext();){var o=i.next();o.setVisited(!0),this.copySymDepths(o)}},Ph.prototype.computeDepth=function(t){this.clearVisitedEdges();var e=this._finder.getEdge();e.setEdgeDepths(Nh.RIGHT,t),this.copySymDepths(e),this.computeDepths(e)},Ph.prototype.create=function(t){this.addReachable(t),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()},Ph.prototype.findResultEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();){var e=t.next();1<=e.getDepth(Nh.RIGHT)&&e.getDepth(Nh.LEFT)<=0&&!e.isInteriorAreaEdge()&&e.setInResult(!0)}},Ph.prototype.computeDepths=function(t){var e=new Rc,n=new Lh,r=t.getNode();for(n.addLast(r),e.add(r),t.setVisited(!0);!n.isEmpty();){var i=n.removeFirst();e.add(i),this.computeNodeDepth(i);for(var o=i.getEdges().iterator();o.hasNext();){var a,s=o.next().getSym();s.isVisited()||(a=s.getNode(),e.contains(a)||(n.addLast(a),e.add(a)))}}},Ph.prototype.compareTo=function(t){return this._rightMostCoord.x<t._rightMostCoord.x?-1:this._rightMostCoord.x>t._rightMostCoord.x?1:0},Ph.prototype.getEnvelope=function(){if(null===this._env){for(var t=new Yu,e=this._dirEdgeList.iterator();e.hasNext();)for(var n=e.next().getEdge().getCoordinates(),r=0;r<n.length-1;r++)t.expandToInclude(n[r]);this._env=t}return this._env},Ph.prototype.addReachable=function(t){var e=new Xi;for(e.add(t);!e.empty();){var n=e.pop();this.add(n,e)}},Ph.prototype.copySymDepths=function(t){var e=t.getSym();e.setDepth(Nh.LEFT,t.getDepth(Nh.RIGHT)),e.setDepth(Nh.RIGHT,t.getDepth(Nh.LEFT))},Ph.prototype.add=function(t,e){t.setVisited(!0),this._nodes.add(t);for(var n=t.getEdges().iterator();n.hasNext();){var r=n.next();this._dirEdgeList.add(r);var i=r.getSym().getNode();i.isVisited()||e.push(i)}},Ph.prototype.getNodes=function(){return this._nodes},Ph.prototype.getDirectedEdges=function(){return this._dirEdgeList},Ph.prototype.interfaces_=function(){return[xu]},Ph.prototype.getClass=function(){return Ph};function Oh(){var o,s,a;if(this.location=null,1===arguments.length){if(arguments[0]instanceof Array){var e=arguments[0];this.init(e.length)}else if(Number.isInteger(arguments[0])){var n=arguments[0];this.init(1),this.location[Nh.ON]=n}else if(arguments[0]instanceof Oh){var r=arguments[0];if(this.init(r.location.length),null!==r)for(var i=0;i<this.location.length;i++)this.location[i]=r.location[i]}}else 3===arguments.length&&(o=arguments[0],s=arguments[1],a=arguments[2],this.init(3),this.location[Nh.ON]=o,this.location[Nh.LEFT]=s,this.location[Nh.RIGHT]=a)}Oh.prototype.setAllLocations=function(t){for(var e=0;e<this.location.length;e++)this.location[e]=t},Oh.prototype.isNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]!==Su.NONE)return!1;return!0},Oh.prototype.setAllLocationsIfNull=function(t){for(var e=0;e<this.location.length;e++)this.location[e]===Su.NONE&&(this.location[e]=t)},Oh.prototype.isLine=function(){return 1===this.location.length},Oh.prototype.merge=function(t){var e;t.location.length>this.location.length&&((e=new Array(3).fill(null))[Nh.ON]=this.location[Nh.ON],e[Nh.LEFT]=Su.NONE,e[Nh.RIGHT]=Su.NONE,this.location=e);for(var n=0;n<this.location.length;n++)this.location[n]===Su.NONE&&n<t.location.length&&(this.location[n]=t.location[n])},Oh.prototype.getLocations=function(){return this.location},Oh.prototype.flip=function(){if(this.location.length<=1)return null;var t=this.location[Nh.LEFT];this.location[Nh.LEFT]=this.location[Nh.RIGHT],this.location[Nh.RIGHT]=t},Oh.prototype.toString=function(){var t=new Ru;return 1<this.location.length&&t.append(Su.toLocationSymbol(this.location[Nh.LEFT])),t.append(Su.toLocationSymbol(this.location[Nh.ON])),1<this.location.length&&t.append(Su.toLocationSymbol(this.location[Nh.RIGHT])),t.toString()},Oh.prototype.setLocations=function(t,e,n){this.location[Nh.ON]=t,this.location[Nh.LEFT]=e,this.location[Nh.RIGHT]=n},Oh.prototype.get=function(t){return t<this.location.length?this.location[t]:Su.NONE},Oh.prototype.isArea=function(){return 1<this.location.length},Oh.prototype.isAnyNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]===Su.NONE)return!0;return!1},Oh.prototype.setLocation=function(){var t,e,n;1===arguments.length?(t=arguments[0],this.setLocation(Nh.ON,t)):2===arguments.length&&(e=arguments[0],n=arguments[1],this.location[e]=n)},Oh.prototype.init=function(t){this.location=new Array(t).fill(null),this.setAllLocations(Su.NONE)},Oh.prototype.isEqualOnSide=function(t,e){return this.location[e]===t.location[e]},Oh.prototype.allPositionsEqual=function(t){for(var e=0;e<this.location.length;e++)if(this.location[e]!==t)return!1;return!0},Oh.prototype.interfaces_=function(){return[]},Oh.prototype.getClass=function(){return Oh};function Rh(){var e,n,r,i,o,s,a,u,c,h,l;this.elt=new Array(2).fill(null),1===arguments.length?Number.isInteger(arguments[0])?(e=arguments[0],this.elt[0]=new Oh(e),this.elt[1]=new Oh(e)):arguments[0]instanceof Rh&&(n=arguments[0],this.elt[0]=new Oh(n.elt[0]),this.elt[1]=new Oh(n.elt[1])):2===arguments.length?(r=arguments[0],i=arguments[1],this.elt[0]=new Oh(Su.NONE),this.elt[1]=new Oh(Su.NONE),this.elt[r].setLocation(i)):3===arguments.length?(o=arguments[0],s=arguments[1],a=arguments[2],this.elt[0]=new Oh(o,s,a),this.elt[1]=new Oh(o,s,a)):4===arguments.length&&(u=arguments[0],c=arguments[1],h=arguments[2],l=arguments[3],this.elt[0]=new Oh(Su.NONE,Su.NONE,Su.NONE),this.elt[1]=new Oh(Su.NONE,Su.NONE,Su.NONE),this.elt[u].setLocations(c,h,l))}Rh.prototype.getGeometryCount=function(){var t=0;return this.elt[0].isNull()||t++,this.elt[1].isNull()||t++,t},Rh.prototype.setAllLocations=function(t,e){this.elt[t].setAllLocations(e)},Rh.prototype.isNull=function(t){return this.elt[t].isNull()},Rh.prototype.setAllLocationsIfNull=function(){var t,e,n;1===arguments.length?(t=arguments[0],this.setAllLocationsIfNull(0,t),this.setAllLocationsIfNull(1,t)):2===arguments.length&&(e=arguments[0],n=arguments[1],this.elt[e].setAllLocationsIfNull(n))},Rh.prototype.isLine=function(t){return this.elt[t].isLine()},Rh.prototype.merge=function(t){for(var e=0;e<2;e++)null===this.elt[e]&&null!==t.elt[e]?this.elt[e]=new Oh(t.elt[e]):this.elt[e].merge(t.elt[e])},Rh.prototype.flip=function(){this.elt[0].flip(),this.elt[1].flip()},Rh.prototype.getLocation=function(){if(1===arguments.length){var t=arguments[0];return this.elt[t].get(Nh.ON)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return this.elt[e].get(n)}},Rh.prototype.toString=function(){var t=new Ru;return null!==this.elt[0]&&(t.append("A:"),t.append(this.elt[0].toString())),null!==this.elt[1]&&(t.append(" B:"),t.append(this.elt[1].toString())),t.toString()},Rh.prototype.isArea=function(){if(0===arguments.length)return this.elt[0].isArea()||this.elt[1].isArea();if(1===arguments.length){var t=arguments[0];return this.elt[t].isArea()}},Rh.prototype.isAnyNull=function(t){return this.elt[t].isAnyNull()},Rh.prototype.setLocation=function(){var t,e,n,r,i;2===arguments.length?(t=arguments[0],e=arguments[1],this.elt[t].setLocation(Nh.ON,e)):3===arguments.length&&(n=arguments[0],r=arguments[1],i=arguments[2],this.elt[n].setLocation(r,i))},Rh.prototype.isEqualOnSide=function(t,e){return this.elt[0].isEqualOnSide(t.elt[0],e)&&this.elt[1].isEqualOnSide(t.elt[1],e)},Rh.prototype.allPositionsEqual=function(t,e){return this.elt[t].allPositionsEqual(e)},Rh.prototype.toLine=function(t){this.elt[t].isArea()&&(this.elt[t]=new Oh(this.elt[t].location[0]))},Rh.prototype.interfaces_=function(){return[]},Rh.prototype.getClass=function(){return Rh},Rh.toLineLabel=function(t){for(var e=new Rh(Su.NONE),n=0;n<2;n++)e.setLocation(n,t.getLocation(n));return e};function Th(){this._startDe=null,this._maxNodeDegree=-1,this._edges=new bc,this._pts=new bc,this._label=new Rh(Su.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new bc,this._geometryFactory=null;var t=arguments[0],e=arguments[1];this._geometryFactory=e,this.computePoints(t),this.computeRing()}Th.prototype.computeRing=function(){if(null!==this._ring)return null;for(var t=new Array(this._pts.size()).fill(null),e=0;e<this._pts.size();e++)t[e]=this._pts.get(e);this._ring=this._geometryFactory.createLinearRing(t),this._isHole=sc.isCCW(this._ring.getCoordinates())},Th.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},Th.prototype.computePoints=function(t){var e=this._startDe=t,n=!0;do{if(null===e)throw new Mh("Found null DirectedEdge");if(e.getEdgeRing()===this)throw new Mh("Directed Edge visited twice during ring-building at "+e.getCoordinate());this._edges.add(e);var r=e.getLabel();tc.isTrue(r.isArea()),this.mergeLabel(r),this.addPoints(e.getEdge(),e.isForward(),n),n=!1,this.setEdgeRing(e,this),e=this.getNext(e)}while(e!==this._startDe)},Th.prototype.getLinearRing=function(){return this._ring},Th.prototype.getCoordinate=function(t){return this._pts.get(t)},Th.prototype.computeMaxNodeDegree=function(){this._maxNodeDegree=0;var t=this._startDe;do{var e=t.getNode().getEdges().getOutgoingDegree(this);e>this._maxNodeDegree&&(this._maxNodeDegree=e),t=this.getNext(t)}while(t!==this._startDe);this._maxNodeDegree*=2},Th.prototype.addPoints=function(t,e,n){var r=t.getCoordinates();if(e){var i=1;n&&(i=0);for(var o=i;o<r.length;o++)this._pts.add(r[o])}else{var s=r.length-2;n&&(s=r.length-1);for(var a=s;0<=a;a--)this._pts.add(r[a])}},Th.prototype.isHole=function(){return this._isHole},Th.prototype.setInResult=function(){for(var t=this._startDe;t.getEdge().setInResult(!0),(t=t.getNext())!==this._startDe;);},Th.prototype.containsPoint=function(t){var e=this.getLinearRing();if(!e.getEnvelopeInternal().contains(t))return!1;if(!sc.isPointInRing(t,e.getCoordinates()))return!1;for(var n=this._holes.iterator();n.hasNext();)if(n.next().containsPoint(t))return!1;return!0},Th.prototype.addHole=function(t){this._holes.add(t)},Th.prototype.isShell=function(){return null===this._shell},Th.prototype.getLabel=function(){return this._label},Th.prototype.getEdges=function(){return this._edges},Th.prototype.getMaxNodeDegree=function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree},Th.prototype.getShell=function(){return this._shell},Th.prototype.mergeLabel=function(){if(1===arguments.length){var t=arguments[0];this.mergeLabel(t,0),this.mergeLabel(t,1)}else if(2===arguments.length){var n=arguments[1],r=arguments[0].getLocation(n,Nh.RIGHT);if(r===Su.NONE)return null;if(this._label.getLocation(n)===Su.NONE)return this._label.setLocation(n,r),null}},Th.prototype.setShell=function(t){null!==(this._shell=t)&&t.addHole(this)},Th.prototype.toPolygon=function(t){for(var e=new Array(this._holes.size()).fill(null),n=0;n<this._holes.size();n++)e[n]=this._holes.get(n).getLinearRing();return t.createPolygon(this.getLinearRing(),e)},Th.prototype.interfaces_=function(){return[]},Th.prototype.getClass=function(){return Th};function Fh(){var t;this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,0===arguments.length||1===arguments.length&&(t=arguments[0],this._label=t)}var Ah=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.setEdgeRing=function(t,e){t.setMinEdgeRing(e)},e.prototype.getNext=function(t){return t.getNextMin()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Th),Dh=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.buildMinimalRings=function(){var n,t=new bc,e=this._startDe;do{null===e.getMinEdgeRing()&&(n=new Ah(e,this._geometryFactory),t.add(n)),e=e.getNext()}while(e!==this._startDe);return t},e.prototype.setEdgeRing=function(t,e){t.setEdgeRing(e)},e.prototype.linkDirectedEdgesForMinimalEdgeRings=function(){for(var t=this._startDe;t.getNode().getEdges().linkMinimalDirectedEdges(this),(t=t.getNext())!==this._startDe;);},e.prototype.getNext=function(t){return t.getNext()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Th);Fh.prototype.setVisited=function(t){this._isVisited=t},Fh.prototype.setInResult=function(t){this._isInResult=t},Fh.prototype.isCovered=function(){return this._isCovered},Fh.prototype.isCoveredSet=function(){return this._isCoveredSet},Fh.prototype.setLabel=function(t){this._label=t},Fh.prototype.getLabel=function(){return this._label},Fh.prototype.setCovered=function(t){this._isCovered=t,this._isCoveredSet=!0},Fh.prototype.updateIM=function(t){tc.isTrue(2<=this._label.getGeometryCount(),"found partial label"),this.computeIM(t)},Fh.prototype.isInResult=function(){return this._isInResult},Fh.prototype.isVisited=function(){return this._isVisited},Fh.prototype.interfaces_=function(){return[]},Fh.prototype.getClass=function(){return Fh};function Gh(){this.nodeMap=new Gi,this.nodeFact=null;var t=arguments[0];this.nodeFact=t}var qh=function(t){function e(){t.call(this),this._coord=null,this._edges=null;var e=arguments[0],n=arguments[1];this._coord=e,this._edges=n,this._label=new Rh(0,Su.NONE)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.isIncidentEdgeInResult=function(){for(var t=this.getEdges().getEdges().iterator();t.hasNext();)if(t.next().getEdge().isInResult())return!0;return!1},e.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},e.prototype.getCoordinate=function(){return this._coord},e.prototype.print=function(t){t.println("node "+this._coord+" lbl: "+this._label)},e.prototype.computeIM=function(t){},e.prototype.computeMergedLocation=function(t,e){var r,n=Su.NONE,n=this._label.getLocation(e);return t.isNull(e)||(r=t.getLocation(e),n!==Su.BOUNDARY&&(n=r)),n},e.prototype.setLabel=function(){if(2!==arguments.length)return t.prototype.setLabel.apply(this,arguments);var e=arguments[0],n=arguments[1];null===this._label?this._label=new Rh(e,n):this._label.setLocation(e,n)},e.prototype.getEdges=function(){return this._edges},e.prototype.mergeLabel=function(){if(arguments[0]instanceof e){var t=arguments[0];this.mergeLabel(t._label)}else if(arguments[0]instanceof Rh)for(var n=arguments[0],r=0;r<2;r++){var i=this.computeMergedLocation(n,r);this._label.getLocation(r)===Su.NONE&&this._label.setLocation(r,i)}},e.prototype.add=function(t){this._edges.insert(t),t.setNode(this)},e.prototype.setLabelBoundary=function(t){if(null===this._label)return null;var e=Su.NONE;null!==this._label&&(e=this._label.getLocation(t));var n=null;switch(e){case Su.BOUNDARY:n=Su.INTERIOR;break;case Su.INTERIOR:default:n=Su.BOUNDARY}this._label.setLocation(t,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Fh);Gh.prototype.find=function(t){return this.nodeMap.get(t)},Gh.prototype.addNode=function(){if(arguments[0]instanceof bu){var t=arguments[0],e=this.nodeMap.get(t);return null===e&&(e=this.nodeFact.createNode(t),this.nodeMap.put(t,e)),e}if(arguments[0]instanceof qh){var n=arguments[0],r=this.nodeMap.get(n.getCoordinate());return null===r?(this.nodeMap.put(n.getCoordinate(),n),n):(r.mergeLabel(n),r)}},Gh.prototype.print=function(t){for(var e=this.iterator();e.hasNext();)e.next().print(t)},Gh.prototype.iterator=function(){return this.nodeMap.values().iterator()},Gh.prototype.values=function(){return this.nodeMap.values()},Gh.prototype.getBoundaryNodes=function(t){for(var e=new bc,n=this.iterator();n.hasNext();){var r=n.next();r.getLabel().getLocation(t)===Su.BOUNDARY&&e.add(r)}return e},Gh.prototype.add=function(t){var e=t.getCoordinate();this.addNode(e).add(t)},Gh.prototype.interfaces_=function(){return[]},Gh.prototype.getClass=function(){return Gh};function Bh(){}var kh={NE:{configurable:!0},NW:{configurable:!0},SW:{configurable:!0},SE:{configurable:!0}};Bh.prototype.interfaces_=function(){return[]},Bh.prototype.getClass=function(){return Bh},Bh.isNorthern=function(t){return t===Bh.NE||t===Bh.NW},Bh.isOpposite=function(t,e){return t!==e&&2==(t-e+4)%4},Bh.commonHalfPlane=function(t,e){if(t===e)return t;if(2==(t-e+4)%4)return-1;var n=t<e?t:e;return 0===n&&3===(e<t?t:e)?3:n},Bh.isInHalfPlane=function(t,e){return e===Bh.SE?t===Bh.SE||t===Bh.SW:t===e||t===e+1},Bh.quadrant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new _u;return 0<=t?0<=e?Bh.NE:Bh.SE:0<=e?Bh.NW:Bh.SW}if(arguments[0]instanceof bu&&arguments[1]instanceof bu){var n=arguments[0],r=arguments[1];if(r.x===n.x&&r.y===n.y)throw new _u;return r.x>=n.x?r.y>=n.y?Bh.NE:Bh.SE:r.y>=n.y?Bh.NW:Bh.SW}},kh.NE.get=function(){return 0},kh.NW.get=function(){return 1},kh.SW.get=function(){return 2},kh.SE.get=function(){return 3},Object.defineProperties(Bh,kh);function zh(){var t,e,n,r,i,o,s,a;this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,1===arguments.length?(t=arguments[0],this._edge=t):3===arguments.length?(e=arguments[0],n=arguments[1],r=arguments[2],this._edge=e,this.init(n,r),this._label=null):4===arguments.length&&(i=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3],this._edge=i,this.init(o,s),this._label=a)}zh.prototype.compareDirection=function(t){return this._dx===t._dx&&this._dy===t._dy?0:this._quadrant>t._quadrant?1:this._quadrant<t._quadrant?-1:sc.computeOrientation(t._p0,t._p1,this._p1)},zh.prototype.getDy=function(){return this._dy},zh.prototype.getCoordinate=function(){return this._p0},zh.prototype.setNode=function(t){this._node=t},zh.prototype.print=function(t){var e=Math.atan2(this._dy,this._dx),n=this.getClass().getName(),r=n.lastIndexOf("."),i=n.substring(r+1);t.print("  "+i+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+e+"   "+this._label)},zh.prototype.compareTo=function(t){return this.compareDirection(t)},zh.prototype.getDirectedCoordinate=function(){return this._p1},zh.prototype.getDx=function(){return this._dx},zh.prototype.getLabel=function(){return this._label},zh.prototype.getEdge=function(){return this._edge},zh.prototype.getQuadrant=function(){return this._quadrant},zh.prototype.getNode=function(){return this._node},zh.prototype.toString=function(){var t=Math.atan2(this._dy,this._dx),e=this.getClass().getName(),n=e.lastIndexOf(".");return"  "+e.substring(n+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+t+"   "+this._label},zh.prototype.computeLabel=function(t){},zh.prototype.init=function(t,e){this._p0=t,this._p1=e,this._dx=e.x-t.x,this._dy=e.y-t.y,this._quadrant=Bh.quadrant(this._dx,this._dy),tc.isTrue(!(0===this._dx&&0===this._dy),"EdgeEnd with identical endpoints found")},zh.prototype.interfaces_=function(){return[xu]},zh.prototype.getClass=function(){return zh};function Xh(){}var jh=function(t){function e(){var r,e=arguments[0],n=arguments[1];t.call(this,e),this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999],(this._isForward=n)?this.init(e.getCoordinate(0),e.getCoordinate(1)):(r=e.getNumPoints()-1,this.init(e.getCoordinate(r),e.getCoordinate(r-1))),this.computeDirectedLabel()}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.getNextMin=function(){return this._nextMin},e.prototype.getDepth=function(t){return this._depth[t]},e.prototype.setVisited=function(t){this._isVisited=t},e.prototype.computeDirectedLabel=function(){this._label=new Rh(this._edge.getLabel()),this._isForward||this._label.flip()},e.prototype.getNext=function(){return this._next},e.prototype.setDepth=function(t,e){if(-999!==this._depth[t]&&this._depth[t]!==e)throw new Mh("assigned depths do not match",this.getCoordinate());this._depth[t]=e},e.prototype.isInteriorAreaEdge=function(){for(var t=!0,e=0;e<2;e++)this._label.isArea(e)&&this._label.getLocation(e,Nh.LEFT)===Su.INTERIOR&&this._label.getLocation(e,Nh.RIGHT)===Su.INTERIOR||(t=!1);return t},e.prototype.setNextMin=function(t){this._nextMin=t},e.prototype.print=function(e){t.prototype.print.call(this,e),e.print(" "+this._depth[Nh.LEFT]+"/"+this._depth[Nh.RIGHT]),e.print(" ("+this.getDepthDelta()+")"),this._isInResult&&e.print(" inResult")},e.prototype.setMinEdgeRing=function(t){this._minEdgeRing=t},e.prototype.isLineEdge=function(){var t=this._label.isLine(0)||this._label.isLine(1),e=!this._label.isArea(0)||this._label.allPositionsEqual(0,Su.EXTERIOR),n=!this._label.isArea(1)||this._label.allPositionsEqual(1,Su.EXTERIOR);return t&&e&&n},e.prototype.setEdgeRing=function(t){this._edgeRing=t},e.prototype.getMinEdgeRing=function(){return this._minEdgeRing},e.prototype.getDepthDelta=function(){var t=this._edge.getDepthDelta();return this._isForward||(t=-t),t},e.prototype.setInResult=function(t){this._isInResult=t},e.prototype.getSym=function(){return this._sym},e.prototype.isForward=function(){return this._isForward},e.prototype.getEdge=function(){return this._edge},e.prototype.printEdge=function(t){this.print(t),t.print(" "),this._isForward?this._edge.print(t):this._edge.printReverse(t)},e.prototype.setSym=function(t){this._sym=t},e.prototype.setVisitedEdge=function(t){this.setVisited(t),this._sym.setVisited(t)},e.prototype.setEdgeDepths=function(t,e){var n=this.getEdge().getDepthDelta();this._isForward||(n=-n);var r=1;t===Nh.LEFT&&(r=-1);var i=Nh.opposite(t),o=e+n*r;this.setDepth(t,e),this.setDepth(i,o)},e.prototype.getEdgeRing=function(){return this._edgeRing},e.prototype.isInResult=function(){return this._isInResult},e.prototype.setNext=function(t){this._next=t},e.prototype.isVisited=function(){return this._isVisited},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.depthFactor=function(t,e){return t===Su.EXTERIOR&&e===Su.INTERIOR?1:t===Su.INTERIOR&&e===Su.EXTERIOR?-1:0},e}(zh);Xh.prototype.createNode=function(t){return new qh(t,null)},Xh.prototype.interfaces_=function(){return[]},Xh.prototype.getClass=function(){return Xh};function Uh(){var t;this._edges=new bc,this._nodes=null,this._edgeEndList=new bc,0===arguments.length?this._nodes=new Gh(new Xh):1===arguments.length&&(t=arguments[0],this._nodes=new Gh(t))}Uh.prototype.printEdges=function(t){t.println("Edges:");for(var e=0;e<this._edges.size();e++){t.println("edge "+e+":");var n=this._edges.get(e);n.print(t),n.eiList.print(t)}},Uh.prototype.find=function(t){return this._nodes.find(t)},Uh.prototype.addNode=function(){if(arguments[0]instanceof qh){var t=arguments[0];return this._nodes.addNode(t)}if(arguments[0]instanceof bu){var e=arguments[0];return this._nodes.addNode(e)}},Uh.prototype.getNodeIterator=function(){return this._nodes.iterator()},Uh.prototype.linkResultDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkResultDirectedEdges()},Uh.prototype.debugPrintln=function(t){Xu.out.println(t)},Uh.prototype.isBoundaryNode=function(t,e){var n=this._nodes.find(e);if(null===n)return!1;var r=n.getLabel();return null!==r&&r.getLocation(t)===Su.BOUNDARY},Uh.prototype.linkAllDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkAllDirectedEdges()},Uh.prototype.matchInSameDirection=function(t,e,n,r){return!!t.equals(n)&&sc.computeOrientation(t,e,r)===sc.COLLINEAR&&Bh.quadrant(t,e)===Bh.quadrant(n,r)},Uh.prototype.getEdgeEnds=function(){return this._edgeEndList},Uh.prototype.debugPrint=function(t){Xu.out.print(t)},Uh.prototype.getEdgeIterator=function(){return this._edges.iterator()},Uh.prototype.findEdgeInSameDirection=function(t,e){for(var n=0;n<this._edges.size();n++){var r=this._edges.get(n),i=r.getCoordinates();if(this.matchInSameDirection(t,e,i[0],i[1]))return r;if(this.matchInSameDirection(t,e,i[i.length-1],i[i.length-2]))return r}return null},Uh.prototype.insertEdge=function(t){this._edges.add(t)},Uh.prototype.findEdgeEnd=function(t){for(var e=this.getEdgeEnds().iterator();e.hasNext();){var n=e.next();if(n.getEdge()===t)return n}return null},Uh.prototype.addEdges=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this._edges.add(n);var r=new jh(n,!0),i=new jh(n,!1);r.setSym(i),i.setSym(r),this.add(r),this.add(i)}},Uh.prototype.add=function(t){this._nodes.add(t),this._edgeEndList.add(t)},Uh.prototype.getNodes=function(){return this._nodes.values()},Uh.prototype.findEdge=function(t,e){for(var n=0;n<this._edges.size();n++){var r=this._edges.get(n),i=r.getCoordinates();if(t.equals(i[0])&&e.equals(i[1]))return r}return null},Uh.prototype.interfaces_=function(){return[]},Uh.prototype.getClass=function(){return Uh},Uh.linkResultDirectedEdges=function(t){for(var e=t.iterator();e.hasNext();)e.next().getEdges().linkResultDirectedEdges()};function Yh(){this._geometryFactory=null,this._shellList=new bc;var t=arguments[0];this._geometryFactory=t}Yh.prototype.sortShellsAndHoles=function(t,e,n){for(var r=t.iterator();r.hasNext();){var i=r.next();i.isHole()?n.add(i):e.add(i)}},Yh.prototype.computePolygons=function(t){for(var e=new bc,n=t.iterator();n.hasNext();){var r=n.next().toPolygon(this._geometryFactory);e.add(r)}return e},Yh.prototype.placeFreeHoles=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();if(null===r.getShell()){var i=this.findEdgeRingContaining(r,t);if(null===i)throw new Mh("unable to assign hole to a shell",r.getCoordinate(0));r.setShell(i)}}},Yh.prototype.buildMinimalEdgeRings=function(t,e,n){for(var r=new bc,i=t.iterator();i.hasNext();){var s,a,o=i.next();2<o.getMaxNodeDegree()?(o.linkDirectedEdgesForMinimalEdgeRings(),s=o.buildMinimalRings(),null!==(a=this.findShell(s))?(this.placePolygonHoles(a,s),e.add(a)):n.addAll(s)):r.add(o)}return r},Yh.prototype.containsPoint=function(t){for(var e=this._shellList.iterator();e.hasNext();)if(e.next().containsPoint(t))return!0;return!1},Yh.prototype.buildMaximalEdgeRings=function(t){for(var e=new bc,n=t.iterator();n.hasNext();){var i,r=n.next();r.isInResult()&&r.getLabel().isArea()&&null===r.getEdgeRing()&&(i=new Dh(r,this._geometryFactory),e.add(i),i.setInResult())}return e},Yh.prototype.placePolygonHoles=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();r.isHole()&&r.setShell(t)}},Yh.prototype.getPolygons=function(){return this.computePolygons(this._shellList)},Yh.prototype.findEdgeRingContaining=function(t,e){for(var n=t.getLinearRing(),r=n.getEnvelopeInternal(),i=n.getCoordinateN(0),o=null,s=null,a=e.iterator();a.hasNext();){var u=a.next(),c=u.getLinearRing(),h=c.getEnvelopeInternal();null!==o&&(s=o.getLinearRing().getEnvelopeInternal());var l=!1;h.contains(r)&&sc.isPointInRing(i,c.getCoordinates())&&(l=!0),l&&(null===o||s.contains(h))&&(o=u)}return o},Yh.prototype.findShell=function(t){for(var e=0,n=null,r=t.iterator();r.hasNext();){var i=r.next();i.isHole()||(n=i,e++)}return tc.isTrue(e<=1,"found two shells in MinimalEdgeRing list"),n},Yh.prototype.add=function(){var t,e,r,i,o;1===arguments.length?(t=arguments[0],this.add(t.getEdgeEnds(),t.getNodes())):2===arguments.length&&(e=arguments[0],Uh.linkResultDirectedEdges(arguments[1]),r=this.buildMaximalEdgeRings(e),i=new bc,o=this.buildMinimalEdgeRings(r,this._shellList,i),this.sortShellsAndHoles(o,this._shellList,i),this.placeFreeHoles(this._shellList,i))},Yh.prototype.interfaces_=function(){return[]},Yh.prototype.getClass=function(){return Yh};function Vh(){}Vh.prototype.getBounds=function(){},Vh.prototype.interfaces_=function(){return[]},Vh.prototype.getClass=function(){return Vh};function Hh(){this._bounds=null,this._item=null;var t=arguments[0],e=arguments[1];this._bounds=t,this._item=e}Hh.prototype.getItem=function(){return this._item},Hh.prototype.getBounds=function(){return this._bounds},Hh.prototype.interfaces_=function(){return[Vh,Li]},Hh.prototype.getClass=function(){return Hh};function Wh(){this._size=null,this._items=null,this._size=0,this._items=new bc,this._items.add(null)}Wh.prototype.poll=function(){if(this.isEmpty())return null;var t=this._items.get(1);return this._items.set(1,this._items.get(this._size)),--this._size,this.reorder(1),t},Wh.prototype.size=function(){return this._size},Wh.prototype.reorder=function(t){for(var e=null,n=this._items.get(t);2*t<=this._size&&((e=2*t)!==this._size&&this._items.get(e+1).compareTo(this._items.get(e))<0&&e++,this._items.get(e).compareTo(n)<0);t=e)this._items.set(t,this._items.get(e));this._items.set(t,n)},Wh.prototype.clear=function(){this._size=0,this._items.clear()},Wh.prototype.isEmpty=function(){return 0===this._size},Wh.prototype.add=function(t){this._items.add(null),this._size+=1;var e=this._size;for(this._items.set(0,t);t.compareTo(this._items.get(Math.trunc(e/2)))<0;e/=2)this._items.set(e,this._items.get(Math.trunc(e/2)));this._items.set(e,t)},Wh.prototype.interfaces_=function(){return[]},Wh.prototype.getClass=function(){return Wh};function Jh(){}Jh.prototype.visitItem=function(t){},Jh.prototype.interfaces_=function(){return[]},Jh.prototype.getClass=function(){return Jh};function Zh(){}Zh.prototype.insert=function(t,e){},Zh.prototype.remove=function(t,e){},Zh.prototype.query=function(){},Zh.prototype.interfaces_=function(){return[]},Zh.prototype.getClass=function(){return Zh};function Kh(){var t;this._childBoundables=new bc,this._bounds=null,this._level=null,0===arguments.length||1===arguments.length&&(t=arguments[0],this._level=t)}var Qh={serialVersionUID:{configurable:!0}};Kh.prototype.getLevel=function(){return this._level},Kh.prototype.size=function(){return this._childBoundables.size()},Kh.prototype.getChildBoundables=function(){return this._childBoundables},Kh.prototype.addChildBoundable=function(t){tc.isTrue(null===this._bounds),this._childBoundables.add(t)},Kh.prototype.isEmpty=function(){return this._childBoundables.isEmpty()},Kh.prototype.getBounds=function(){return null===this._bounds&&(this._bounds=this.computeBounds()),this._bounds},Kh.prototype.interfaces_=function(){return[Vh,Li]},Kh.prototype.getClass=function(){return Kh},Qh.serialVersionUID.get=function(){return 0x5a1e55ec41369800},Object.defineProperties(Kh,Qh);function $h(){}$h.reverseOrder=function(){return{compare:function(t,e){return e.compareTo(t)}}},$h.min=function(t){return $h.sort(t),t.get(0)},$h.sort=function(t,e){var n=t.toArray();e?qc.sort(n,e):qc.sort(n);for(var r=t.iterator(),i=0,o=n.length;i<o;i++)r.next(),r.set(n[i])},$h.singletonList=function(t){var e=new bc;return e.add(t),e};function tl(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var t=arguments[0],e=arguments[1],n=arguments[2];this._boundable1=t,this._boundable2=e,this._itemDistance=n,this._distance=this.distance()}tl.prototype.expandToQueue=function(t,e){var n=tl.isComposite(this._boundable1),r=tl.isComposite(this._boundable2);if(n&&r)return tl.area(this._boundable1)>tl.area(this._boundable2)?this.expand(this._boundable1,this._boundable2,t,e):this.expand(this._boundable2,this._boundable1,t,e),null;if(n)return this.expand(this._boundable1,this._boundable2,t,e),null;if(r)return this.expand(this._boundable2,this._boundable1,t,e),null;throw new _u},tl.prototype.isLeaves=function(){return!(tl.isComposite(this._boundable1)||tl.isComposite(this._boundable2))},tl.prototype.compareTo=function(t){return this._distance<t._distance?-1:this._distance>t._distance?1:0},tl.prototype.expand=function(t,e,n,r){for(var i=t.getChildBoundables().iterator();i.hasNext();){var o=i.next(),s=new tl(o,e,this._itemDistance);s.getDistance()<r&&n.add(s)}},tl.prototype.getBoundable=function(t){return 0===t?this._boundable1:this._boundable2},tl.prototype.getDistance=function(){return this._distance},tl.prototype.distance=function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())},tl.prototype.interfaces_=function(){return[xu]},tl.prototype.getClass=function(){return tl},tl.area=function(t){return t.getBounds().getArea()},tl.isComposite=function(t){return t instanceof Kh};function el(){var e,n;this._root=null,this._built=!1,this._itemBoundables=new bc,this._nodeCapacity=null,0===arguments.length?(e=el.DEFAULT_NODE_CAPACITY,this._nodeCapacity=e):1===arguments.length&&(tc.isTrue(1<(n=arguments[0]),"Node capacity must be greater than 1"),this._nodeCapacity=n)}var nl={IntersectsOp:{configurable:!0},serialVersionUID:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};el.prototype.getNodeCapacity=function(){return this._nodeCapacity},el.prototype.lastNode=function(t){return t.get(t.size()-1)},el.prototype.size=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.size(this._root));if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var n=e.next();n instanceof Kh?t+=this.size(n):n instanceof Hh&&(t+=1)}return t}},el.prototype.removeItem=function(t,e){for(var n=null,r=t.getChildBoundables().iterator();r.hasNext();){var i=r.next();i instanceof Hh&&i.getItem()===e&&(n=i)}return null!==n&&(t.getChildBoundables().remove(n),!0)},el.prototype.itemsTree=function(){if(0===arguments.length){this.build();var t=this.itemsTree(this._root);return null===t?new bc:t}if(1===arguments.length){for(var e=arguments[0],n=new bc,r=e.getChildBoundables().iterator();r.hasNext();){var o,i=r.next();i instanceof Kh?null!==(o=this.itemsTree(i))&&n.add(o):i instanceof Hh?n.add(i.getItem()):tc.shouldNeverReachHere()}return n.size()<=0?null:n}},el.prototype.insert=function(t,e){tc.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new Hh(t,e))},el.prototype.boundablesAtLevel=function(){if(1===arguments.length){var t=arguments[0],e=new bc;return this.boundablesAtLevel(t,this._root,e),e}if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];if(tc.isTrue(-2<n),r.getLevel()===n)return i.add(r),null;for(var o=r.getChildBoundables().iterator();o.hasNext();){var s=o.next();s instanceof Kh?this.boundablesAtLevel(n,s,i):(tc.isTrue(s instanceof Hh),-1===n&&i.add(s))}return null}},el.prototype.query=function(){if(1===arguments.length){var t=arguments[0];this.build();var e=new bc;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.query(t,this._root,e),e}if(2===arguments.length){var n=arguments[0],r=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),n)&&this.query(n,this._root,r)}else if(3===arguments.length)if(Lu(arguments[2],Jh)&&arguments[0]instanceof Object&&arguments[1]instanceof Kh)for(var i=arguments[0],s=arguments[2],a=arguments[1].getChildBoundables(),u=0;u<a.size();u++){var c=a.get(u);this.getIntersectsOp().intersects(c.getBounds(),i)&&(c instanceof Kh?this.query(i,c,s):c instanceof Hh?s.visitItem(c.getItem()):tc.shouldNeverReachHere())}else if(Lu(arguments[2],wc)&&arguments[0]instanceof Object&&arguments[1]instanceof Kh)for(var h=arguments[0],p=arguments[2],f=arguments[1].getChildBoundables(),g=0;g<f.size();g++){var d=f.get(g);this.getIntersectsOp().intersects(d.getBounds(),h)&&(d instanceof Kh?this.query(h,d,p):d instanceof Hh?p.add(d.getItem()):tc.shouldNeverReachHere())}},el.prototype.build=function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0},el.prototype.getRoot=function(){return this.build(),this._root},el.prototype.remove=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.remove(t,this._root,e)}if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2],o=this.removeItem(r,i);if(o)return!0;for(var s=null,a=r.getChildBoundables().iterator();a.hasNext();){var u=a.next();if(this.getIntersectsOp().intersects(u.getBounds(),n)&&u instanceof Kh&&(o=this.remove(n,u,i))){s=u;break}}return null!==s&&s.getChildBoundables().isEmpty()&&r.getChildBoundables().remove(s),o}},el.prototype.createHigherLevels=function(t,e){tc.isTrue(!t.isEmpty());var n=this.createParentBoundables(t,e+1);return 1===n.size()?n.get(0):this.createHigherLevels(n,e+1)},el.prototype.depth=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var r,n=e.next();n instanceof Kh&&(t<(r=this.depth(n))&&(t=r))}return t+1}},el.prototype.createParentBoundables=function(t,e){tc.isTrue(!t.isEmpty());var n=new bc;n.add(this.createNode(e));var r=new bc(t);$h.sort(r,this.getComparator());for(var i=r.iterator();i.hasNext();){var o=i.next();this.lastNode(n).getChildBoundables().size()===this.getNodeCapacity()&&n.add(this.createNode(e)),this.lastNode(n).addChildBoundable(o)}return n},el.prototype.isEmpty=function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()},el.prototype.interfaces_=function(){return[Li]},el.prototype.getClass=function(){return el},el.compareDoubles=function(t,e){return e<t?1:t<e?-1:0},nl.IntersectsOp.get=function(){return rl},nl.serialVersionUID.get=function(){return-0x35ef64c82d4c5400},nl.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(el,nl);function il(){}var rl=function(){};il.prototype.distance=function(t,e){},il.prototype.interfaces_=function(){return[]},il.prototype.getClass=function(){return il};function al(){}var ol=function(t){function e(n){n=n||e.DEFAULT_NODE_CAPACITY,t.call(this,n)}t&&(e.__proto__=t);var n={STRtreeNode:{configurable:!0},serialVersionUID:{configurable:!0},xComparator:{configurable:!0},yComparator:{configurable:!0},intersectsOp:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};return((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.createParentBoundablesFromVerticalSlices=function(t,e){tc.isTrue(0<t.length);for(var n=new bc,r=0;r<t.length;r++)n.addAll(this.createParentBoundablesFromVerticalSlice(t[r],e));return n},e.prototype.createNode=function(t){return new sl(t)},e.prototype.size=function(){return 0===arguments.length?t.prototype.size.call(this):t.prototype.size.apply(this,arguments)},e.prototype.insert=function(){if(2!==arguments.length)return t.prototype.insert.apply(this,arguments);var e=arguments[0],n=arguments[1];if(e.isNull())return null;t.prototype.insert.call(this,e,n)},e.prototype.getIntersectsOp=function(){return e.intersectsOp},e.prototype.verticalSlices=function(t,e){for(var n=Math.trunc(Math.ceil(t.size()/e)),r=new Array(e).fill(null),i=t.iterator(),o=0;o<e;o++){r[o]=new bc;for(var s=0;i.hasNext()&&s<n;){var a=i.next();r[o].add(a),s++}}return r},e.prototype.query=function(){if(1===arguments.length){var e=arguments[0];return t.prototype.query.call(this,e)}var n,r,i,o,s,a,u,c;2===arguments.length?(n=arguments[0],r=arguments[1],t.prototype.query.call(this,n,r)):3===arguments.length&&(Lu(arguments[2],Jh)&&arguments[0]instanceof Object&&arguments[1]instanceof Kh?(i=arguments[0],o=arguments[1],s=arguments[2],t.prototype.query.call(this,i,o,s)):Lu(arguments[2],wc)&&arguments[0]instanceof Object&&arguments[1]instanceof Kh&&(a=arguments[0],u=arguments[1],c=arguments[2],t.prototype.query.call(this,a,u,c)))},e.prototype.getComparator=function(){return e.yComparator},e.prototype.createParentBoundablesFromVerticalSlice=function(e,n){return t.prototype.createParentBoundables.call(this,e,n)},e.prototype.remove=function(){if(2!==arguments.length)return t.prototype.remove.apply(this,arguments);var e=arguments[0],n=arguments[1];return t.prototype.remove.call(this,e,n)},e.prototype.depth=function(){return 0===arguments.length?t.prototype.depth.call(this):t.prototype.depth.apply(this,arguments)},e.prototype.createParentBoundables=function(t,n){tc.isTrue(!t.isEmpty());var r=Math.trunc(Math.ceil(t.size()/this.getNodeCapacity())),i=new bc(t);$h.sort(i,e.xComparator);var o=this.verticalSlices(i,Math.trunc(Math.ceil(Math.sqrt(r))));return this.createParentBoundablesFromVerticalSlices(o,n)},e.prototype.nearestNeighbour=function(){if(1===arguments.length){if(Lu(arguments[0],il)){var t=arguments[0],n=new tl(this.getRoot(),this.getRoot(),t);return this.nearestNeighbour(n)}if(arguments[0]instanceof tl){var r=arguments[0];return this.nearestNeighbour(r,mu.POSITIVE_INFINITY)}}else if(2===arguments.length){if(arguments[0]instanceof e&&Lu(arguments[1],il)){var i=arguments[0],o=arguments[1],s=new tl(this.getRoot(),i.getRoot(),o);return this.nearestNeighbour(s)}if(arguments[0]instanceof tl&&"number"==typeof arguments[1]){var a=arguments[0],u=arguments[1],c=null,h=new Wh;for(h.add(a);!h.isEmpty()&&0<u;){var l=h.poll(),p=l.getDistance();if(u<=p)break;l.isLeaves()?(u=p,c=l):l.expandToQueue(h,u)}return[c.getBoundable(0).getItem(),c.getBoundable(1).getItem()]}}else if(3===arguments.length){var d=arguments[2],y=new Hh(arguments[0],arguments[1]),_=new tl(this.getRoot(),y,d);return this.nearestNeighbour(_)[0]}},e.prototype.interfaces_=function(){return[Zh,Li]},e.prototype.getClass=function(){return e},e.centreX=function(t){return e.avg(t.getMinX(),t.getMaxX())},e.avg=function(t,e){return(t+e)/2},e.centreY=function(t){return e.avg(t.getMinY(),t.getMaxY())},n.STRtreeNode.get=function(){return sl},n.serialVersionUID.get=function(){return 0x39920f7d5f261e0},n.xComparator.get=function(){return{interfaces_:function(){return[wu]},compare:function(n,r){return t.compareDoubles(e.centreX(n.getBounds()),e.centreX(r.getBounds()))}}},n.yComparator.get=function(){return{interfaces_:function(){return[wu]},compare:function(n,r){return t.compareDoubles(e.centreY(n.getBounds()),e.centreY(r.getBounds()))}}},n.intersectsOp.get=function(){return{interfaces_:function(){return[t.IntersectsOp]},intersects:function(t,e){return t.intersects(e)}}},n.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(e,n),e}(el),sl=function(t){function e(){var e=arguments[0];t.call(this,e)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.computeBounds=function(){for(var t=null,e=this.getChildBoundables().iterator();e.hasNext();){var n=e.next();null===t?t=new Yu(n.getBounds()):t.expandToInclude(n.getBounds())}return t},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Kh);al.prototype.interfaces_=function(){return[]},al.prototype.getClass=function(){return al},al.relativeSign=function(t,e){return t<e?-1:e<t?1:0},al.compare=function(t,e,n){if(e.equals2D(n))return 0;var r=al.relativeSign(e.x,n.x),i=al.relativeSign(e.y,n.y);switch(t){case 0:return al.compareValue(r,i);case 1:return al.compareValue(i,r);case 2:return al.compareValue(i,-r);case 3:return al.compareValue(-r,i);case 4:return al.compareValue(-r,-i);case 5:return al.compareValue(-i,-r);case 6:return al.compareValue(-i,r);case 7:return al.compareValue(r,-i)}return tc.shouldNeverReachHere("invalid octant value"),0},al.compareValue=function(t,e){return t<0?-1:0<t?1:e<0?-1:0<e?1:0};function ul(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this._segString=t,this.coord=new bu(e),this.segmentIndex=n,this._segmentOctant=r,this._isInterior=!e.equals2D(t.getCoordinate(n))}ul.prototype.getCoordinate=function(){return this.coord},ul.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex)},ul.prototype.compareTo=function(t){var e=t;return this.segmentIndex<e.segmentIndex?-1:this.segmentIndex>e.segmentIndex?1:this.coord.equals2D(e.coord)?0:al.compare(this._segmentOctant,this.coord,e.coord)},ul.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&!this._isInterior||this.segmentIndex===t},ul.prototype.isInterior=function(){return this._isInterior},ul.prototype.interfaces_=function(){return[xu]},ul.prototype.getClass=function(){return ul};function cl(){this._nodeMap=new Gi,this._edge=null;var t=arguments[0];this._edge=t}cl.prototype.getSplitCoordinates=function(){var t=new Nc;this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next();this.addEdgeCoordinates(n,r,t),n=r}return t.toCoordinateArray()},cl.prototype.addCollapsedNodes=function(){var t=new bc;this.findCollapsesFromInsertedNodes(t),this.findCollapsesFromExistingVertices(t);for(var e=t.iterator();e.hasNext();){var n=e.next().intValue();this.add(this._edge.getCoordinate(n),n)}},cl.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)},cl.prototype.findCollapsesFromExistingVertices=function(t){for(var e=0;e<this._edge.size()-2;e++){var n=this._edge.getCoordinate(e),r=this._edge.getCoordinate(e+2);n.equals2D(r)&&t.add(new Tu(e+1))}},cl.prototype.addEdgeCoordinates=function(t,e,n){var r=this._edge.getCoordinate(e.segmentIndex),i=e.isInterior()||!e.coord.equals2D(r);n.add(new bu(t.coord),!1);for(var o=t.segmentIndex+1;o<=e.segmentIndex;o++)n.add(this._edge.getCoordinate(o));i&&n.add(new bu(e.coord))},cl.prototype.iterator=function(){return this._nodeMap.values().iterator()},cl.prototype.addSplitEdges=function(t){this.addEndpoints(),this.addCollapsedNodes();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next(),i=this.createSplitEdge(n,r);t.add(i),n=r}},cl.prototype.findCollapseIndex=function(t,e,n){if(!t.coord.equals2D(e.coord))return!1;var r=e.segmentIndex-t.segmentIndex;return e.isInterior()||r--,1===r&&(n[0]=t.segmentIndex+1,!0)},cl.prototype.findCollapsesFromInsertedNodes=function(t){for(var e=new Array(1).fill(null),n=this.iterator(),r=n.next();n.hasNext();){var i=n.next();this.findCollapseIndex(r,i,e)&&t.add(new Tu(e[0])),r=i}},cl.prototype.getEdge=function(){return this._edge},cl.prototype.addEndpoints=function(){var t=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(t),t)},cl.prototype.createSplitEdge=function(t,e){var n=e.segmentIndex-t.segmentIndex+2,r=this._edge.getCoordinate(e.segmentIndex),i=e.isInterior()||!e.coord.equals2D(r);i||n--;var o=new Array(n).fill(null),s=0;o[s++]=new bu(t.coord);for(var a=t.segmentIndex+1;a<=e.segmentIndex;a++)o[s++]=this._edge.getCoordinate(a);return i&&(o[s]=new bu(e.coord)),new fl(o,this._edge.getData())},cl.prototype.add=function(t,e){var n=new ul(this._edge,t,e,this._edge.getSegmentOctant(e)),r=this._nodeMap.get(n);return null!==r?(tc.isTrue(r.coord.equals2D(t),"Found equal nodes with different coordinates"),r):(this._nodeMap.put(n,n),n)},cl.prototype.checkSplitEdgesCorrectness=function(t){var e=this._edge.getCoordinates(),n=t.get(0).getCoordinate(0);if(!n.equals2D(e[0]))throw new Qu("bad split edge start point at "+n);var r=t.get(t.size()-1).getCoordinates(),i=r[r.length-1];if(!i.equals2D(e[e.length-1]))throw new Qu("bad split edge end point at "+i)},cl.prototype.interfaces_=function(){return[]},cl.prototype.getClass=function(){return cl};function hl(){}hl.prototype.interfaces_=function(){return[]},hl.prototype.getClass=function(){return hl},hl.octant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new _u;var n=Math.abs(t),r=Math.abs(e);return 0<=t?0<=e?r<=n?0:1:r<=n?7:6:0<=e?r<=n?3:2:r<=n?4:5}if(arguments[0]instanceof bu&&arguments[1]instanceof bu){var i=arguments[0],o=arguments[1],s=o.x-i.x,a=o.y-i.y;if(0==s&&0==a)throw new _u;return hl.octant(s,a)}};function ll(){}ll.prototype.getCoordinates=function(){},ll.prototype.size=function(){},ll.prototype.getCoordinate=function(t){},ll.prototype.isClosed=function(){},ll.prototype.setData=function(t){},ll.prototype.getData=function(){},ll.prototype.interfaces_=function(){return[]},ll.prototype.getClass=function(){return ll};function pl(){}pl.prototype.addIntersection=function(t,e){},pl.prototype.interfaces_=function(){return[ll]},pl.prototype.getClass=function(){return pl};var fl=function(){this._nodeList=new cl(this),this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e};fl.prototype.getCoordinates=function(){return this._pts},fl.prototype.size=function(){return this._pts.length},fl.prototype.getCoordinate=function(t){return this._pts[t]},fl.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},fl.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(t),this.getCoordinate(t+1))},fl.prototype.setData=function(t){this._data=t},fl.prototype.safeOctant=function(t,e){return t.equals2D(e)?0:hl.octant(t,e)},fl.prototype.getData=function(){return this._data},fl.prototype.addIntersection=function(){var t,e,r,i,o;2===arguments.length?(t=arguments[0],e=arguments[1],this.addIntersectionNode(t,e)):4===arguments.length&&(r=arguments[1],i=arguments[3],o=new bu(arguments[0].getIntersection(i)),this.addIntersection(o,r))},fl.prototype.toString=function(){return Ku.toLineString(new uh(this._pts))},fl.prototype.getNodeList=function(){return this._nodeList},fl.prototype.addIntersectionNode=function(t,e){var i,n=e,r=n+1;return r<this._pts.length&&(i=this._pts[r],t.equals2D(i)&&(n=r)),this._nodeList.add(t,n)},fl.prototype.addIntersections=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++)this.addIntersection(t,e,n,r)},fl.prototype.interfaces_=function(){return[pl]},fl.prototype.getClass=function(){return fl},fl.getNodedSubstrings=function(){if(1===arguments.length){var t=arguments[0],e=new bc;return fl.getNodedSubstrings(t,e),e}if(2===arguments.length)for(var r=arguments[1],i=arguments[0].iterator();i.hasNext();)i.next().getNodeList().addSplitEdges(r)};function gl(){var t,e,n,r,i;this.p0=null,this.p1=null,0===arguments.length?(this.p0=new bu,this.p1=new bu):1===arguments.length?(t=arguments[0],this.p0=new bu(t.p0),this.p1=new bu(t.p1)):2===arguments.length?(this.p0=arguments[0],this.p1=arguments[1]):4===arguments.length&&(e=arguments[0],n=arguments[1],r=arguments[2],i=arguments[3],this.p0=new bu(e,n),this.p1=new bu(r,i))}var dl={serialVersionUID:{configurable:!0}};gl.prototype.minX=function(){return Math.min(this.p0.x,this.p1.x)},gl.prototype.orientationIndex=function(){if(arguments[0]instanceof gl){var t=arguments[0],e=sc.orientationIndex(this.p0,this.p1,t.p0),n=sc.orientationIndex(this.p0,this.p1,t.p1);return 0<=e&&0<=n||e<=0&&n<=0?Math.max(e,n):0}if(arguments[0]instanceof bu){var r=arguments[0];return sc.orientationIndex(this.p0,this.p1,r)}},gl.prototype.toGeometry=function(t){return t.createLineString([this.p0,this.p1])},gl.prototype.isVertical=function(){return this.p0.x===this.p1.x},gl.prototype.equals=function(t){if(!(t instanceof gl))return!1;var e=t;return this.p0.equals(e.p0)&&this.p1.equals(e.p1)},gl.prototype.intersection=function(t){var e=new rc;return e.computeIntersection(this.p0,this.p1,t.p0,t.p1),e.hasIntersection()?e.getIntersection(0):null},gl.prototype.project=function(){if(arguments[0]instanceof bu){var t=arguments[0];if(t.equals(this.p0)||t.equals(this.p1))return new bu(t);var e=this.projectionFactor(t),n=new bu;return n.x=this.p0.x+e*(this.p1.x-this.p0.x),n.y=this.p0.y+e*(this.p1.y-this.p0.y),n}if(arguments[0]instanceof gl){var r=arguments[0],i=this.projectionFactor(r.p0),o=this.projectionFactor(r.p1);if(1<=i&&1<=o)return null;if(i<=0&&o<=0)return null;var s=this.project(r.p0);i<0&&(s=this.p0),1<i&&(s=this.p1);var a=this.project(r.p1);return o<0&&(a=this.p0),1<o&&(a=this.p1),new gl(s,a)}},gl.prototype.normalize=function(){this.p1.compareTo(this.p0)<0&&this.reverse()},gl.prototype.angle=function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)},gl.prototype.getCoordinate=function(t){return 0===t?this.p0:this.p1},gl.prototype.distancePerpendicular=function(t){return sc.distancePointLinePerpendicular(t,this.p0,this.p1)},gl.prototype.minY=function(){return Math.min(this.p0.y,this.p1.y)},gl.prototype.midPoint=function(){return gl.midPoint(this.p0,this.p1)},gl.prototype.projectionFactor=function(t){if(t.equals(this.p0))return 0;if(t.equals(this.p1))return 1;var e=this.p1.x-this.p0.x,n=this.p1.y-this.p0.y,r=e*e+n*n;return r<=0?mu.NaN:((t.x-this.p0.x)*e+(t.y-this.p0.y)*n)/r},gl.prototype.closestPoints=function(t){var e=this.intersection(t);if(null!==e)return[e,e];var n=new Array(2).fill(null),r=mu.MAX_VALUE,i=null,o=this.closestPoint(t.p0),r=o.distance(t.p0);n[0]=o,n[1]=t.p0;var s=this.closestPoint(t.p1);(i=s.distance(t.p1))<r&&(r=i,n[0]=s,n[1]=t.p1);var a=t.closestPoint(this.p0);(i=a.distance(this.p0))<r&&(r=i,n[0]=this.p0,n[1]=a);var u=t.closestPoint(this.p1);return(i=u.distance(this.p1))<r&&(r=i,n[0]=this.p1,n[1]=u),n},gl.prototype.closestPoint=function(t){var e=this.projectionFactor(t);return 0<e&&e<1?this.project(t):this.p0.distance(t)<this.p1.distance(t)?this.p0:this.p1},gl.prototype.maxX=function(){return Math.max(this.p0.x,this.p1.x)},gl.prototype.getLength=function(){return this.p0.distance(this.p1)},gl.prototype.compareTo=function(t){var e=t,n=this.p0.compareTo(e.p0);return 0!==n?n:this.p1.compareTo(e.p1)},gl.prototype.reverse=function(){var t=this.p0;this.p0=this.p1,this.p1=t},gl.prototype.equalsTopo=function(t){return this.p0.equals(t.p0)&&(this.p1.equals(t.p1)||this.p0.equals(t.p1))&&this.p1.equals(t.p0)},gl.prototype.lineIntersection=function(t){try{return Uu.intersection(this.p0,this.p1,t.p0,t.p1)}catch(t){if(!(t instanceof ju))throw t}return null},gl.prototype.maxY=function(){return Math.max(this.p0.y,this.p1.y)},gl.prototype.pointAlongOffset=function(t,e){var n=this.p0.x+t*(this.p1.x-this.p0.x),r=this.p0.y+t*(this.p1.y-this.p0.y),i=this.p1.x-this.p0.x,o=this.p1.y-this.p0.y,s=Math.sqrt(i*i+o*o),a=0,u=0;if(0!==e){if(s<=0)throw new Error("Cannot compute offset from zero-length line segment");a=e*i/s,u=e*o/s}return new bu(n-u,r+a)},gl.prototype.setCoordinates=function(){var t,e,n;1===arguments.length?(t=arguments[0],this.setCoordinates(t.p0,t.p1)):2===arguments.length&&(e=arguments[0],n=arguments[1],this.p0.x=e.x,this.p0.y=e.y,this.p1.x=n.x,this.p1.y=n.y)},gl.prototype.segmentFraction=function(t){var e=this.projectionFactor(t);return e<0?e=0:(1<e||mu.isNaN(e))&&(e=1),e},gl.prototype.toString=function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"},gl.prototype.isHorizontal=function(){return this.p0.y===this.p1.y},gl.prototype.distance=function(){if(arguments[0]instanceof gl){var t=arguments[0];return sc.distanceLineLine(this.p0,this.p1,t.p0,t.p1)}if(arguments[0]instanceof bu){var e=arguments[0];return sc.distancePointLine(e,this.p0,this.p1)}},gl.prototype.pointAlong=function(t){var e=new bu;return e.x=this.p0.x+t*(this.p1.x-this.p0.x),e.y=this.p0.y+t*(this.p1.y-this.p0.y),e},gl.prototype.hashCode=function(){var t=mu.doubleToLongBits(this.p0.x);t^=31*mu.doubleToLongBits(this.p0.y);var e=Math.trunc(t)^Math.trunc(t>>32),n=mu.doubleToLongBits(this.p1.x);return n^=31*mu.doubleToLongBits(this.p1.y),e^(Math.trunc(n)^Math.trunc(n>>32))},gl.prototype.interfaces_=function(){return[xu,Li]},gl.prototype.getClass=function(){return gl},gl.midPoint=function(t,e){return new bu((t.x+e.x)/2,(t.y+e.y)/2)},dl.serialVersionUID.get=function(){return 0x2d2172135f411c00},Object.defineProperties(gl,dl);function yl(){this.tempEnv1=new Yu,this.tempEnv2=new Yu,this._overlapSeg1=new gl,this._overlapSeg2=new gl}yl.prototype.overlap=function(){var e,n,r;2===arguments.length||4===arguments.length&&(e=arguments[1],n=arguments[2],r=arguments[3],arguments[0].getLineSegment(e,this._overlapSeg1),n.getLineSegment(r,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2))},yl.prototype.interfaces_=function(){return[]},yl.prototype.getClass=function(){return yl};function _l(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this._pts=t,this._start=e,this._end=n,this._context=r}_l.prototype.getLineSegment=function(t,e){e.p0=this._pts[t],e.p1=this._pts[t+1]},_l.prototype.computeSelect=function(t,e,n,r){var i=this._pts[e],o=this._pts[n];if(r.tempEnv1.init(i,o),n-e==1)return r.select(this,e),null;if(!t.intersects(r.tempEnv1))return null;var s=Math.trunc((e+n)/2);e<s&&this.computeSelect(t,e,s,r),s<n&&this.computeSelect(t,s,n,r)},_l.prototype.getCoordinates=function(){for(var t=new Array(this._end-this._start+1).fill(null),e=0,n=this._start;n<=this._end;n++)t[e++]=this._pts[n];return t},_l.prototype.computeOverlaps=function(t,e){this.computeOverlapsInternal(this._start,this._end,t,t._start,t._end,e)},_l.prototype.setId=function(t){this._id=t},_l.prototype.select=function(t,e){this.computeSelect(t,this._start,this._end,e)},_l.prototype.getEnvelope=function(){var t,e;return null===this._env&&(t=this._pts[this._start],e=this._pts[this._end],this._env=new Yu(t,e)),this._env},_l.prototype.getEndIndex=function(){return this._end},_l.prototype.getStartIndex=function(){return this._start},_l.prototype.getContext=function(){return this._context},_l.prototype.getId=function(){return this._id},_l.prototype.computeOverlapsInternal=function(t,e,n,r,i,o){var s=this._pts[t],a=this._pts[e],u=n._pts[r],c=n._pts[i];if(e-t==1&&i-r==1)return o.overlap(this,t,n,r),null;if(o.tempEnv1.init(s,a),o.tempEnv2.init(u,c),!o.tempEnv1.intersects(o.tempEnv2))return null;var h=Math.trunc((t+e)/2),l=Math.trunc((r+i)/2);t<h&&(r<l&&this.computeOverlapsInternal(t,h,n,r,l,o),l<i&&this.computeOverlapsInternal(t,h,n,l,i,o)),h<e&&(r<l&&this.computeOverlapsInternal(h,e,n,r,l,o),l<i&&this.computeOverlapsInternal(h,e,n,l,i,o))},_l.prototype.interfaces_=function(){return[]},_l.prototype.getClass=function(){return _l};function ml(){}ml.prototype.interfaces_=function(){return[]},ml.prototype.getClass=function(){return ml},ml.getChainStartIndices=function(t){var e=0,n=new bc;n.add(new Tu(e));do{var r=ml.findChainEnd(t,e);n.add(new Tu(r)),e=r}while(e<t.length-1);return ml.toIntArray(n)},ml.findChainEnd=function(t,e){for(var n=e;n<t.length-1&&t[n].equals2D(t[n+1]);)n++;if(n>=t.length-1)return t.length-1;for(var r=Bh.quadrant(t[n],t[n+1]),i=e+1;i<t.length&&(t[i-1].equals2D(t[i])||Bh.quadrant(t[i-1],t[i])===r);)i++;return i-1},ml.getChains=function(){if(1===arguments.length)return ml.getChains(arguments[0],null);if(2===arguments.length){for(var e=arguments[0],n=arguments[1],r=new bc,i=ml.getChainStartIndices(e),o=0;o<i.length-1;o++){var s=new _l(e,i[o],i[o+1],n);r.add(s)}return r}},ml.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e};function vl(){}vl.prototype.computeNodes=function(t){},vl.prototype.getNodedSubstrings=function(){},vl.prototype.interfaces_=function(){return[]},vl.prototype.getClass=function(){return vl};function xl(){var t;this._segInt=null,0===arguments.length||1===arguments.length&&(t=arguments[0],this.setSegmentIntersector(t))}xl.prototype.setSegmentIntersector=function(t){this._segInt=t},xl.prototype.interfaces_=function(){return[vl]},xl.prototype.getClass=function(){return xl};function bl(){var e,n,r,i,o,s,a;this._quadrantSegments=bl.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=bl.CAP_ROUND,this._joinStyle=bl.JOIN_ROUND,this._mitreLimit=bl.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=bl.DEFAULT_SIMPLIFY_FACTOR,0===arguments.length||(1===arguments.length?(e=arguments[0],this.setQuadrantSegments(e)):2===arguments.length?(n=arguments[0],r=arguments[1],this.setQuadrantSegments(n),this.setEndCapStyle(r)):4===arguments.length&&(i=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3],this.setQuadrantSegments(i),this.setEndCapStyle(o),this.setJoinStyle(s),this.setMitreLimit(a)))}var El=function(t){function e(e){e?t.call(this,e):t.call(this),this._monoChains=new bc,this._index=new ol,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0}t&&(e.__proto__=t);var n={SegmentOverlapAction:{configurable:!0}};return((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.getMonotoneChains=function(){return this._monoChains},e.prototype.getNodedSubstrings=function(){return fl.getNodedSubstrings(this._nodedSegStrings)},e.prototype.getIndex=function(){return this._index},e.prototype.add=function(t){for(var e=ml.getChains(t.getCoordinates(),t).iterator();e.hasNext();){var n=e.next();n.setId(this._idCounter++),this._index.insert(n.getEnvelope(),n),this._monoChains.add(n)}},e.prototype.computeNodes=function(t){for(var e=(this._nodedSegStrings=t).iterator();e.hasNext();)this.add(e.next());this.intersectChains()},e.prototype.intersectChains=function(){for(var t=new wl(this._segInt),e=this._monoChains.iterator();e.hasNext();)for(var n=e.next(),r=this._index.query(n.getEnvelope()).iterator();r.hasNext();){var i=r.next();if(i.getId()>n.getId()&&(n.computeOverlaps(i,t),this._nOverlaps++),this._segInt.isDone())return null}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.SegmentOverlapAction.get=function(){return wl},Object.defineProperties(e,n),e}(xl),wl=function(t){function e(){t.call(this),this._si=null;var e=arguments[0];this._si=e}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.overlap=function(){if(4!==arguments.length)return t.prototype.overlap.apply(this,arguments);var n=arguments[1],r=arguments[2],i=arguments[3],o=arguments[0].getContext(),s=r.getContext();this._si.processIntersections(o,n,s,i)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(yl),Il={CAP_ROUND:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},JOIN_ROUND:{configurable:!0},JOIN_MITRE:{configurable:!0},JOIN_BEVEL:{configurable:!0},DEFAULT_QUADRANT_SEGMENTS:{configurable:!0},DEFAULT_MITRE_LIMIT:{configurable:!0},DEFAULT_SIMPLIFY_FACTOR:{configurable:!0}};bl.prototype.getEndCapStyle=function(){return this._endCapStyle},bl.prototype.isSingleSided=function(){return this._isSingleSided},bl.prototype.setQuadrantSegments=function(t){this._quadrantSegments=t,0===this._quadrantSegments&&(this._joinStyle=bl.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=bl.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),t<=0&&(this._quadrantSegments=1),this._joinStyle!==bl.JOIN_ROUND&&(this._quadrantSegments=bl.DEFAULT_QUADRANT_SEGMENTS)},bl.prototype.getJoinStyle=function(){return this._joinStyle},bl.prototype.setJoinStyle=function(t){this._joinStyle=t},bl.prototype.setSimplifyFactor=function(t){this._simplifyFactor=t<0?0:t},bl.prototype.getSimplifyFactor=function(){return this._simplifyFactor},bl.prototype.getQuadrantSegments=function(){return this._quadrantSegments},bl.prototype.setEndCapStyle=function(t){this._endCapStyle=t},bl.prototype.getMitreLimit=function(){return this._mitreLimit},bl.prototype.setMitreLimit=function(t){this._mitreLimit=t},bl.prototype.setSingleSided=function(t){this._isSingleSided=t},bl.prototype.interfaces_=function(){return[]},bl.prototype.getClass=function(){return bl},bl.bufferDistanceError=function(t){var e=Math.PI/2/t;return 1-Math.cos(e/2)},Il.CAP_ROUND.get=function(){return 1},Il.CAP_FLAT.get=function(){return 2},Il.CAP_SQUARE.get=function(){return 3},Il.JOIN_ROUND.get=function(){return 1},Il.JOIN_MITRE.get=function(){return 2},Il.JOIN_BEVEL.get=function(){return 3},Il.DEFAULT_QUADRANT_SEGMENTS.get=function(){return 8},Il.DEFAULT_MITRE_LIMIT.get=function(){return 5},Il.DEFAULT_SIMPLIFY_FACTOR.get=function(){return.01},Object.defineProperties(bl,Il);function Nl(t){this._distanceTol=null,this._isDeleted=null,this._angleOrientation=sc.COUNTERCLOCKWISE,this._inputLine=t||null}var Cl={INIT:{configurable:!0},DELETE:{configurable:!0},KEEP:{configurable:!0},NUM_PTS_TO_CHECK:{configurable:!0}};Nl.prototype.isDeletable=function(t,e,n,r){var i=this._inputLine[t],o=this._inputLine[e],s=this._inputLine[n];return!!this.isConcave(i,o,s)&&!!this.isShallow(i,o,s,r)&&this.isShallowSampled(i,o,t,n,r)},Nl.prototype.deleteShallowConcavities=function(){for(var t=1,e=this.findNextNonDeletedIndex(t),n=this.findNextNonDeletedIndex(e),r=!1;n<this._inputLine.length;){var i=!1;this.isDeletable(t,e,n,this._distanceTol)&&(this._isDeleted[e]=Nl.DELETE,r=i=!0),t=i?n:e,e=this.findNextNonDeletedIndex(t),n=this.findNextNonDeletedIndex(e)}return r},Nl.prototype.isShallowConcavity=function(t,e,n,r){return sc.computeOrientation(t,e,n)===this._angleOrientation&&sc.distancePointLine(e,t,n)<r},Nl.prototype.isShallowSampled=function(t,e,n,r,i){var o=Math.trunc((r-n)/Nl.NUM_PTS_TO_CHECK);o<=0&&(o=1);for(var s=n;s<r;s+=o)if(!this.isShallow(t,e,this._inputLine[s],i))return!1;return!0},Nl.prototype.isConcave=function(t,e,n){return sc.computeOrientation(t,e,n)===this._angleOrientation},Nl.prototype.simplify=function(t){this._distanceTol=Math.abs(t),t<0&&(this._angleOrientation=sc.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);for(;this.deleteShallowConcavities(););return this.collapseLine()},Nl.prototype.findNextNonDeletedIndex=function(t){for(var e=t+1;e<this._inputLine.length&&this._isDeleted[e]===Nl.DELETE;)e++;return e},Nl.prototype.isShallow=function(t,e,n,r){return sc.distancePointLine(e,t,n)<r},Nl.prototype.collapseLine=function(){for(var t=new Nc,e=0;e<this._inputLine.length;e++)this._isDeleted[e]!==Nl.DELETE&&t.add(this._inputLine[e]);return t.toCoordinateArray()},Nl.prototype.interfaces_=function(){return[]},Nl.prototype.getClass=function(){return Nl},Nl.simplify=function(t,e){return new Nl(t).simplify(e)},Cl.INIT.get=function(){return 0},Cl.DELETE.get=function(){return 1},Cl.KEEP.get=function(){return 1},Cl.NUM_PTS_TO_CHECK.get=function(){return 10},Object.defineProperties(Nl,Cl);function Sl(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new bc}var Ml={COORDINATE_ARRAY_TYPE:{configurable:!0}};Sl.prototype.getCoordinates=function(){return this._ptList.toArray(Sl.COORDINATE_ARRAY_TYPE)},Sl.prototype.setPrecisionModel=function(t){this._precisionModel=t},Sl.prototype.addPt=function(t){var e=new bu(t);if(this._precisionModel.makePrecise(e),this.isRedundant(e))return null;this._ptList.add(e)},Sl.prototype.revere=function(){},Sl.prototype.addPts=function(t,e){if(e)for(var n=0;n<t.length;n++)this.addPt(t[n]);else for(var r=t.length-1;0<=r;r--)this.addPt(t[r])},Sl.prototype.isRedundant=function(t){if(this._ptList.size()<1)return!1;var e=this._ptList.get(this._ptList.size()-1);return t.distance(e)<this._minimimVertexDistance},Sl.prototype.toString=function(){return(new _h).createLineString(this.getCoordinates()).toString()},Sl.prototype.closeRing=function(){if(this._ptList.size()<1)return null;var t=new bu(this._ptList.get(0)),e=this._ptList.get(this._ptList.size()-1);if(t.equals(e))return null;this._ptList.add(t)},Sl.prototype.setMinimumVertexDistance=function(t){this._minimimVertexDistance=t},Sl.prototype.interfaces_=function(){return[]},Sl.prototype.getClass=function(){return Sl},Ml.COORDINATE_ARRAY_TYPE.get=function(){return new Array(0).fill(null)},Object.defineProperties(Sl,Ml);function Ll(){}var Pl={PI_TIMES_2:{configurable:!0},PI_OVER_2:{configurable:!0},PI_OVER_4:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},CLOCKWISE:{configurable:!0},NONE:{configurable:!0}};Ll.prototype.interfaces_=function(){return[]},Ll.prototype.getClass=function(){return Ll},Ll.toDegrees=function(t){return 180*t/Math.PI},Ll.normalize=function(t){for(;t>Math.PI;)t-=Ll.PI_TIMES_2;for(;t<=-Math.PI;)t+=Ll.PI_TIMES_2;return t},Ll.angle=function(){if(1===arguments.length){var t=arguments[0];return Math.atan2(t.y,t.x)}if(2===arguments.length){var e=arguments[0],n=arguments[1],r=n.x-e.x,i=n.y-e.y;return Math.atan2(i,r)}},Ll.isAcute=function(t,e,n){var r=t.x-e.x,i=t.y-e.y;return 0<r*(n.x-e.x)+i*(n.y-e.y)},Ll.isObtuse=function(t,e,n){var r=t.x-e.x,i=t.y-e.y;return r*(n.x-e.x)+i*(n.y-e.y)<0},Ll.interiorAngle=function(t,e,n){var r=Ll.angle(e,t),i=Ll.angle(e,n);return Math.abs(i-r)},Ll.normalizePositive=function(t){if(t<0){for(;t<0;)t+=Ll.PI_TIMES_2;Ll.PI_TIMES_2<=t&&(t=0)}else{for(;Ll.PI_TIMES_2<=t;)t-=Ll.PI_TIMES_2;t<0&&(t=0)}return t},Ll.angleBetween=function(t,e,n){var r=Ll.angle(e,t),i=Ll.angle(e,n);return Ll.diff(r,i)},Ll.diff=function(t,e){var n=null;return(n=t<e?e-t:t-e)>Math.PI&&(n=2*Math.PI-n),n},Ll.toRadians=function(t){return t*Math.PI/180},Ll.getTurn=function(t,e){var n=Math.sin(e-t);return 0<n?Ll.COUNTERCLOCKWISE:n<0?Ll.CLOCKWISE:Ll.NONE},Ll.angleBetweenOriented=function(t,e,n){var r=Ll.angle(e,t),i=Ll.angle(e,n)-r;return i<=-Math.PI?i+Ll.PI_TIMES_2:i>Math.PI?i-Ll.PI_TIMES_2:i},Pl.PI_TIMES_2.get=function(){return 2*Math.PI},Pl.PI_OVER_2.get=function(){return Math.PI/2},Pl.PI_OVER_4.get=function(){return Math.PI/4},Pl.COUNTERCLOCKWISE.get=function(){return sc.COUNTERCLOCKWISE},Pl.CLOCKWISE.get=function(){return sc.CLOCKWISE},Pl.NONE.get=function(){return sc.COLLINEAR},Object.defineProperties(Ll,Pl);function Ol(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new gl,this._seg1=new gl,this._offset0=new gl,this._offset1=new gl,this._side=0,this._hasNarrowConcaveAngle=!1;var e=arguments[0],n=arguments[1],r=arguments[2];this._precisionModel=e,this._bufParams=n,this._li=new rc,this._filletAngleQuantum=Math.PI/2/n.getQuadrantSegments(),8<=n.getQuadrantSegments()&&n.getJoinStyle()===bl.JOIN_ROUND&&(this._closingSegLengthFactor=Ol.MAX_CLOSING_SEG_LEN_FACTOR),this.init(r)}var Rl={OFFSET_SEGMENT_SEPARATION_FACTOR:{configurable:!0},INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},CURVE_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},MAX_CLOSING_SEG_LEN_FACTOR:{configurable:!0}};Ol.prototype.addNextSegment=function(t,e){if(this._s0=this._s1,this._s1=this._s2,this._s2=t,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var n=sc.computeOrientation(this._s0,this._s1,this._s2),r=n===sc.CLOCKWISE&&this._side===Nh.LEFT||n===sc.COUNTERCLOCKWISE&&this._side===Nh.RIGHT;0===n?this.addCollinear(e):r?this.addOutsideTurn(n,e):this.addInsideTurn(n,e)},Ol.prototype.addLineEndCap=function(t,e){var n=new gl(t,e),r=new gl;this.computeOffsetSegment(n,Nh.LEFT,this._distance,r);var i=new gl;this.computeOffsetSegment(n,Nh.RIGHT,this._distance,i);var o=e.x-t.x,s=e.y-t.y,a=Math.atan2(s,o);switch(this._bufParams.getEndCapStyle()){case bl.CAP_ROUND:this._segList.addPt(r.p1),this.addFilletArc(e,a+Math.PI/2,a-Math.PI/2,sc.CLOCKWISE,this._distance),this._segList.addPt(i.p1);break;case bl.CAP_FLAT:this._segList.addPt(r.p1),this._segList.addPt(i.p1);break;case bl.CAP_SQUARE:var u=new bu;u.x=Math.abs(this._distance)*Math.cos(a),u.y=Math.abs(this._distance)*Math.sin(a);var c=new bu(r.p1.x+u.x,r.p1.y+u.y),h=new bu(i.p1.x+u.x,i.p1.y+u.y);this._segList.addPt(c),this._segList.addPt(h)}},Ol.prototype.getCoordinates=function(){return this._segList.getCoordinates()},Ol.prototype.addMitreJoin=function(t,e,n,r){var i=!0,o=null;try{o=Uu.intersection(e.p0,e.p1,n.p0,n.p1),(r<=0?1:o.distance(t)/Math.abs(r))>this._bufParams.getMitreLimit()&&(i=!1)}catch(t){if(!(t instanceof ju))throw t;o=new bu(0,0),i=!1}i?this._segList.addPt(o):this.addLimitedMitreJoin(e,n,r,this._bufParams.getMitreLimit())},Ol.prototype.addFilletCorner=function(t,e,n,r,i){var o=e.x-t.x,s=e.y-t.y,a=Math.atan2(s,o),u=n.x-t.x,c=n.y-t.y,h=Math.atan2(c,u);r===sc.CLOCKWISE?a<=h&&(a+=2*Math.PI):h<=a&&(a-=2*Math.PI),this._segList.addPt(e),this.addFilletArc(t,a,h,r,i),this._segList.addPt(n)},Ol.prototype.addOutsideTurn=function(t,e){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*Ol.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===bl.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===bl.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(e&&this._segList.addPt(this._offset0.p1),this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,t,this._distance),this._segList.addPt(this._offset1.p0))},Ol.prototype.createSquare=function(t){this._segList.addPt(new bu(t.x+this._distance,t.y+this._distance)),this._segList.addPt(new bu(t.x+this._distance,t.y-this._distance)),this._segList.addPt(new bu(t.x-this._distance,t.y-this._distance)),this._segList.addPt(new bu(t.x-this._distance,t.y+this._distance)),this._segList.closeRing()},Ol.prototype.addSegments=function(t,e){this._segList.addPts(t,e)},Ol.prototype.addFirstSegment=function(){this._segList.addPt(this._offset1.p0)},Ol.prototype.addLastSegment=function(){this._segList.addPt(this._offset1.p1)},Ol.prototype.initSideSegments=function(t,e,n){this._s1=t,this._s2=e,this._side=n,this._seg1.setCoordinates(t,e),this.computeOffsetSegment(this._seg1,n,this._distance,this._offset1)},Ol.prototype.addLimitedMitreJoin=function(t,e,n,r){var i=this._seg0.p1,o=Ll.angle(i,this._seg0.p0),s=Ll.angleBetweenOriented(this._seg0.p0,i,this._seg1.p1)/2,a=Ll.normalize(o+s),u=Ll.normalize(a+Math.PI),c=r*n,h=n-c*Math.abs(Math.sin(s)),l=i.x+c*Math.cos(u),p=i.y+c*Math.sin(u),f=new bu(l,p),g=new gl(i,f),d=g.pointAlongOffset(1,h),y=g.pointAlongOffset(1,-h);this._side===Nh.LEFT?(this._segList.addPt(d),this._segList.addPt(y)):(this._segList.addPt(y),this._segList.addPt(d))},Ol.prototype.computeOffsetSegment=function(t,e,n,r){var i=e===Nh.LEFT?1:-1,o=t.p1.x-t.p0.x,s=t.p1.y-t.p0.y,a=Math.sqrt(o*o+s*s),u=i*n*o/a,c=i*n*s/a;r.p0.x=t.p0.x-c,r.p0.y=t.p0.y+u,r.p1.x=t.p1.x-c,r.p1.y=t.p1.y+u},Ol.prototype.addFilletArc=function(t,e,n,r,i){var o=r===sc.CLOCKWISE?-1:1,s=Math.abs(e-n),a=Math.trunc(s/this._filletAngleQuantum+.5);if(a<1)return null;for(var u=s/a,c=0,h=new bu;c<s;){var l=e+o*c;h.x=t.x+i*Math.cos(l),h.y=t.y+i*Math.sin(l),this._segList.addPt(h),c+=u}},Ol.prototype.addInsideTurn=function(t,e){var n,r;this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection()?this._segList.addPt(this._li.getIntersection(0)):(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*Ol.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR?this._segList.addPt(this._offset0.p1):(this._segList.addPt(this._offset0.p1),0<this._closingSegLengthFactor?(n=new bu((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1)),this._segList.addPt(n),r=new bu((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1)),this._segList.addPt(r)):this._segList.addPt(this._s1),this._segList.addPt(this._offset1.p0)))},Ol.prototype.createCircle=function(t){var e=new bu(t.x+this._distance,t.y);this._segList.addPt(e),this.addFilletArc(t,0,2*Math.PI,-1,this._distance),this._segList.closeRing()},Ol.prototype.addBevelJoin=function(t,e){this._segList.addPt(t.p1),this._segList.addPt(e.p0)},Ol.prototype.init=function(t){this._distance=t,this._maxCurveSegmentError=t*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new Sl,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(t*Ol.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)},Ol.prototype.addCollinear=function(t){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2),2<=this._li.getIntersectionNum()&&(this._bufParams.getJoinStyle()===bl.JOIN_BEVEL||this._bufParams.getJoinStyle()===bl.JOIN_MITRE?(t&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,sc.CLOCKWISE,this._distance))},Ol.prototype.closeRing=function(){this._segList.closeRing()},Ol.prototype.hasNarrowConcaveAngle=function(){return this._hasNarrowConcaveAngle},Ol.prototype.interfaces_=function(){return[]},Ol.prototype.getClass=function(){return Ol},Rl.OFFSET_SEGMENT_SEPARATION_FACTOR.get=function(){return.001},Rl.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return.001},Rl.CURVE_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return 1e-6},Rl.MAX_CLOSING_SEG_LEN_FACTOR.get=function(){return 80},Object.defineProperties(Ol,Rl);function Tl(){this._distance=0,this._precisionModel=null,this._bufParams=null;var t=arguments[0],e=arguments[1];this._precisionModel=t,this._bufParams=e}Tl.prototype.getOffsetCurve=function(t,e){if(0===(this._distance=e))return null;var n=e<0,r=Math.abs(e),i=this.getSegGen(r);t.length<=1?this.computePointCurve(t[0],i):this.computeOffsetCurve(t,n,i);var o=i.getCoordinates();return n&&Cc.reverse(o),o},Tl.prototype.computeSingleSidedBufferCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);if(e){n.addSegments(t,!0);var i=Nl.simplify(t,-r),o=i.length-1;n.initSideSegments(i[o],i[o-1],Nh.LEFT),n.addFirstSegment();for(var s=o-2;0<=s;s--)n.addNextSegment(i[s],!0)}else{n.addSegments(t,!1);var a=Nl.simplify(t,r),u=a.length-1;n.initSideSegments(a[0],a[1],Nh.LEFT),n.addFirstSegment();for(var c=2;c<=u;c++)n.addNextSegment(a[c],!0)}n.addLastSegment(),n.closeRing()},Tl.prototype.computeRingBufferCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);e===Nh.RIGHT&&(r=-r);var i=Nl.simplify(t,r),o=i.length-1;n.initSideSegments(i[o-1],i[0],e);for(var s=1;s<=o;s++){var a=1!==s;n.addNextSegment(i[s],a)}n.closeRing()},Tl.prototype.computeLineBufferCurve=function(t,e){var n=this.simplifyTolerance(this._distance),r=Nl.simplify(t,n),i=r.length-1;e.initSideSegments(r[0],r[1],Nh.LEFT);for(var o=2;o<=i;o++)e.addNextSegment(r[o],!0);e.addLastSegment(),e.addLineEndCap(r[i-1],r[i]);var s=Nl.simplify(t,-n),a=s.length-1;e.initSideSegments(s[a],s[a-1],Nh.LEFT);for(var u=a-2;0<=u;u--)e.addNextSegment(s[u],!0);e.addLastSegment(),e.addLineEndCap(s[1],s[0]),e.closeRing()},Tl.prototype.computePointCurve=function(t,e){switch(this._bufParams.getEndCapStyle()){case bl.CAP_ROUND:e.createCircle(t);break;case bl.CAP_SQUARE:e.createSquare(t)}},Tl.prototype.getLineCurve=function(t,e){if((this._distance=e)<0&&!this._bufParams.isSingleSided())return null;if(0===e)return null;var i,n=Math.abs(e),r=this.getSegGen(n);return t.length<=1?this.computePointCurve(t[0],r):this._bufParams.isSingleSided()?(i=e<0,this.computeSingleSidedBufferCurve(t,i,r)):this.computeLineBufferCurve(t,r),r.getCoordinates()},Tl.prototype.getBufferParameters=function(){return this._bufParams},Tl.prototype.simplifyTolerance=function(t){return t*this._bufParams.getSimplifyFactor()},Tl.prototype.getRingCurve=function(t,e,n){if(this._distance=n,t.length<=2)return this.getLineCurve(t,n);if(0===n)return Tl.copyCoordinates(t);var r=this.getSegGen(n);return this.computeRingBufferCurve(t,e,r),r.getCoordinates()},Tl.prototype.computeOffsetCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);if(e){var i=Nl.simplify(t,-r),o=i.length-1;n.initSideSegments(i[o],i[o-1],Nh.LEFT),n.addFirstSegment();for(var s=o-2;0<=s;s--)n.addNextSegment(i[s],!0)}else{var a=Nl.simplify(t,r),u=a.length-1;n.initSideSegments(a[0],a[1],Nh.LEFT),n.addFirstSegment();for(var c=2;c<=u;c++)n.addNextSegment(a[c],!0)}n.addLastSegment()},Tl.prototype.getSegGen=function(t){return new Ol(this._precisionModel,this._bufParams,t)},Tl.prototype.interfaces_=function(){return[]},Tl.prototype.getClass=function(){return Tl},Tl.copyCoordinates=function(t){for(var e=new Array(t.length).fill(null),n=0;n<e.length;n++)e[n]=new bu(t[n]);return e};function Al(){this._subgraphs=null,this._seg=new gl,this._cga=new sc;var t=arguments[0];this._subgraphs=t}var Dl={DepthSegment:{configurable:!0}};Al.prototype.findStabbedSegments=function(){if(1===arguments.length){for(var t=arguments[0],e=new bc,n=this._subgraphs.iterator();n.hasNext();){var r=n.next(),i=r.getEnvelope();t.y<i.getMinY()||t.y>i.getMaxY()||this.findStabbedSegments(t,r.getDirectedEdges(),e)}return e}if(3===arguments.length)if(Lu(arguments[2],wc)&&arguments[0]instanceof bu&&arguments[1]instanceof jh)for(var o=arguments[0],s=arguments[1],a=arguments[2],u=s.getEdge().getCoordinates(),c=0;c<u.length-1;c++){var h,l;this._seg.p0=u[c],this._seg.p1=u[c+1],this._seg.p0.y>this._seg.p1.y&&this._seg.reverse(),Math.max(this._seg.p0.x,this._seg.p1.x)<o.x||this._seg.isHorizontal()||o.y<this._seg.p0.y||o.y>this._seg.p1.y||sc.computeOrientation(this._seg.p0,this._seg.p1,o)===sc.RIGHT||(h=s.getDepth(Nh.LEFT),this._seg.p0.equals(u[c])||(h=s.getDepth(Nh.RIGHT)),l=new Fl(this._seg,h),a.add(l))}else if(Lu(arguments[2],wc)&&arguments[0]instanceof bu&&Lu(arguments[1],wc))for(var p=arguments[0],g=arguments[2],d=arguments[1].iterator();d.hasNext();){var y=d.next();y.isForward()&&this.findStabbedSegments(p,y,g)}},Al.prototype.getDepth=function(t){var e=this.findStabbedSegments(t);return 0===e.size()?0:$h.min(e)._leftDepth},Al.prototype.interfaces_=function(){return[]},Al.prototype.getClass=function(){return Al},Dl.DepthSegment.get=function(){return Fl},Object.defineProperties(Al,Dl);var Fl=function(){this._upwardSeg=null,this._leftDepth=null;var t=arguments[0],e=arguments[1];this._upwardSeg=new gl(t),this._leftDepth=e};Fl.prototype.compareTo=function(t){var e=t;if(this._upwardSeg.minX()>=e._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=e._upwardSeg.minX())return-1;var n=this._upwardSeg.orientationIndex(e._upwardSeg);return 0!==n||0!=(n=-1*e._upwardSeg.orientationIndex(this._upwardSeg))?n:this._upwardSeg.compareTo(e._upwardSeg)},Fl.prototype.compareX=function(t,e){var n=t.p0.compareTo(e.p0);return 0!==n?n:t.p1.compareTo(e.p1)},Fl.prototype.toString=function(){return this._upwardSeg.toString()},Fl.prototype.interfaces_=function(){return[xu]},Fl.prototype.getClass=function(){return Fl};function ql(t,e,n){this.p0=t||null,this.p1=e||null,this.p2=n||null}ql.prototype.area=function(){return ql.area(this.p0,this.p1,this.p2)},ql.prototype.signedArea=function(){return ql.signedArea(this.p0,this.p1,this.p2)},ql.prototype.interpolateZ=function(t){if(null===t)throw new _u;return ql.interpolateZ(t,this.p0,this.p1,this.p2)},ql.prototype.longestSideLength=function(){return ql.longestSideLength(this.p0,this.p1,this.p2)},ql.prototype.isAcute=function(){return ql.isAcute(this.p0,this.p1,this.p2)},ql.prototype.circumcentre=function(){return ql.circumcentre(this.p0,this.p1,this.p2)},ql.prototype.area3D=function(){return ql.area3D(this.p0,this.p1,this.p2)},ql.prototype.centroid=function(){return ql.centroid(this.p0,this.p1,this.p2)},ql.prototype.inCentre=function(){return ql.inCentre(this.p0,this.p1,this.p2)},ql.prototype.interfaces_=function(){return[]},ql.prototype.getClass=function(){return ql},ql.area=function(t,e,n){return Math.abs(((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2)},ql.signedArea=function(t,e,n){return((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2},ql.det=function(t,e,n,r){return t*r-e*n},ql.interpolateZ=function(t,e,n,r){var i=e.x,o=e.y,s=n.x-i,a=r.x-i,u=n.y-o,c=r.y-o,h=s*c-a*u,l=t.x-i,p=t.y-o,f=(c*l-a*p)/h,g=(-u*l+s*p)/h;return e.z+f*(n.z-e.z)+g*(r.z-e.z)},ql.longestSideLength=function(t,e,n){var r=t.distance(e),i=e.distance(n),o=n.distance(t),s=r;return s<i&&(s=i),s<o&&(s=o),s},ql.isAcute=function(t,e,n){return!!Ll.isAcute(t,e,n)&&!!Ll.isAcute(e,n,t)&&!!Ll.isAcute(n,t,e)},ql.circumcentre=function(t,e,n){var r=n.x,i=n.y,o=t.x-r,s=t.y-i,a=e.x-r,u=e.y-i,c=2*ql.det(o,s,a,u),h=ql.det(s,o*o+s*s,u,a*a+u*u),l=ql.det(o,o*o+s*s,a,a*a+u*u);return new bu(r-h/c,i+l/c)},ql.perpendicularBisector=function(t,e){var n=e.x-t.x,r=e.y-t.y,i=new Uu(t.x+n/2,t.y+r/2,1),o=new Uu(t.x-r+n/2,t.y+n+r/2,1);return new Uu(i,o)},ql.angleBisector=function(t,e,n){var r=e.distance(t),i=r/(r+e.distance(n)),o=n.x-t.x,s=n.y-t.y;return new bu(t.x+i*o,t.y+i*s)},ql.area3D=function(t,e,n){var r=e.x-t.x,i=e.y-t.y,o=e.z-t.z,s=n.x-t.x,a=n.y-t.y,u=n.z-t.z,c=i*u-o*a,h=o*s-r*u,l=r*a-i*s,p=c*c+h*h+l*l;return Math.sqrt(p)/2},ql.centroid=function(t,e,n){var r=(t.x+e.x+n.x)/3,i=(t.y+e.y+n.y)/3;return new bu(r,i)},ql.inCentre=function(t,e,n){var r=e.distance(n),i=t.distance(n),o=t.distance(e),s=r+i+o,a=(r*t.x+i*e.x+o*n.x)/s,u=(r*t.y+i*e.y+o*n.y)/s;return new bu(a,u)};function Gl(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new bc;var t=arguments[0],e=arguments[1],n=arguments[2];this._inputGeom=t,this._distance=e,this._curveBuilder=n}Gl.prototype.addPoint=function(t){if(this._distance<=0)return null;var e=t.getCoordinates(),n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,Su.EXTERIOR,Su.INTERIOR)},Gl.prototype.addPolygon=function(t){var e=this._distance,n=Nh.LEFT;this._distance<0&&(e=-this._distance,n=Nh.RIGHT);var r=t.getExteriorRing(),i=Cc.removeRepeatedPoints(r.getCoordinates());if(this._distance<0&&this.isErodedCompletely(r,this._distance))return null;if(this._distance<=0&&i.length<3)return null;this.addPolygonRing(i,e,n,Su.EXTERIOR,Su.INTERIOR);for(var o=0;o<t.getNumInteriorRing();o++){var s=t.getInteriorRingN(o),a=Cc.removeRepeatedPoints(s.getCoordinates());0<this._distance&&this.isErodedCompletely(s,-this._distance)||this.addPolygonRing(a,e,Nh.opposite(n),Su.INTERIOR,Su.EXTERIOR)}},Gl.prototype.isTriangleErodedCompletely=function(t,e){var n=new ql(t[0],t[1],t[2]),r=n.inCentre();return sc.distancePointLine(r,n.p0,n.p1)<Math.abs(e)},Gl.prototype.addLineString=function(t){if(this._distance<=0&&!this._curveBuilder.getBufferParameters().isSingleSided())return null;var e=Cc.removeRepeatedPoints(t.getCoordinates()),n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,Su.EXTERIOR,Su.INTERIOR)},Gl.prototype.addCurve=function(t,e,n){if(null===t||t.length<2)return null;var r=new fl(t,new Rh(0,Su.BOUNDARY,e,n));this._curveList.add(r)},Gl.prototype.getCurves=function(){return this.add(this._inputGeom),this._curveList},Gl.prototype.addPolygonRing=function(t,e,n,r,i){if(0===e&&t.length<eh.MINIMUM_VALID_SIZE)return null;var o=r,s=i;t.length>=eh.MINIMUM_VALID_SIZE&&sc.isCCW(t)&&(o=i,s=r,n=Nh.opposite(n));var a=this._curveBuilder.getRingCurve(t,n,e);this.addCurve(a,o,s)},Gl.prototype.add=function(t){if(t.isEmpty())return null;t instanceof $c?this.addPolygon(t):t instanceof Jc?this.addLineString(t):t instanceof Kc?this.addPoint(t):(t instanceof th||t instanceof Xc||t instanceof nh||t instanceof jc)&&this.addCollection(t)},Gl.prototype.isErodedCompletely=function(t,e){var n=t.getCoordinates();if(n.length<4)return e<0;if(4===n.length)return this.isTriangleErodedCompletely(n,e);var r=t.getEnvelopeInternal(),i=Math.min(r.getHeight(),r.getWidth());return e<0&&2*Math.abs(e)>i},Gl.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},Gl.prototype.interfaces_=function(){return[]},Gl.prototype.getClass=function(){return Gl};function Bl(){}Bl.prototype.locate=function(t){},Bl.prototype.interfaces_=function(){return[]},Bl.prototype.getClass=function(){return Bl};function kl(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var t=arguments[0];this._parent=t,this._atStart=!0,this._index=0,this._max=t.getNumGeometries()}kl.prototype.next=function(){if(this._atStart)return this._atStart=!1,kl.isAtomic(this._parent)&&this._index++,this._parent;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new Pi;var t=this._parent.getGeometryN(this._index++);return t instanceof jc?(this._subcollectionIterator=new kl(t),this._subcollectionIterator.next()):t},kl.prototype.remove=function(){throw new Error(this.getClass().getName())},kl.prototype.hasNext=function(){if(this._atStart)return!0;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)},kl.prototype.interfaces_=function(){return[Ec]},kl.prototype.getClass=function(){return kl},kl.isAtomic=function(t){return!(t instanceof jc)};function zl(){this._geom=null;var t=arguments[0];this._geom=t}zl.prototype.locate=function(t){return zl.locate(t,this._geom)},zl.prototype.interfaces_=function(){return[Bl]},zl.prototype.getClass=function(){return zl},zl.isPointInRing=function(t,e){return!!e.getEnvelopeInternal().intersects(t)&&sc.isPointInRing(t,e.getCoordinates())},zl.containsPointInPolygon=function(t,e){if(e.isEmpty())return!1;var n=e.getExteriorRing();if(!zl.isPointInRing(t,n))return!1;for(var r=0;r<e.getNumInteriorRing();r++){var i=e.getInteriorRingN(r);if(zl.isPointInRing(t,i))return!1}return!0},zl.containsPoint=function(t,e){if(e instanceof $c)return zl.containsPointInPolygon(t,e);if(e instanceof jc)for(var n=new kl(e);n.hasNext();){var r=n.next();if(r!==e&&zl.containsPoint(t,r))return!0}return!1},zl.locate=function(t,e){return!e.isEmpty()&&zl.containsPoint(t,e)?Su.INTERIOR:Su.EXTERIOR};function jl(){this._edgeMap=new Gi,this._edgeList=null,this._ptInAreaLocation=[Su.NONE,Su.NONE]}jl.prototype.getNextCW=function(t){this.getEdges();var e=this._edgeList.indexOf(t),n=e-1;return 0===e&&(n=this._edgeList.size()-1),this._edgeList.get(n)},jl.prototype.propagateSideLabels=function(t){for(var e=Su.NONE,n=this.iterator();n.hasNext();){var r=n.next().getLabel();r.isArea(t)&&r.getLocation(t,Nh.LEFT)!==Su.NONE&&(e=r.getLocation(t,Nh.LEFT))}if(e===Su.NONE)return null;for(var i=e,o=this.iterator();o.hasNext();){var s=o.next(),a=s.getLabel();if(a.getLocation(t,Nh.ON)===Su.NONE&&a.setLocation(t,Nh.ON,i),a.isArea(t)){var u=a.getLocation(t,Nh.LEFT),c=a.getLocation(t,Nh.RIGHT);if(c!==Su.NONE){if(c!==i)throw new Mh("side location conflict",s.getCoordinate());u===Su.NONE&&tc.shouldNeverReachHere("found single null side (at "+s.getCoordinate()+")"),i=u}else tc.isTrue(a.getLocation(t,Nh.LEFT)===Su.NONE,"found single null side"),a.setLocation(t,Nh.RIGHT,i),a.setLocation(t,Nh.LEFT,i)}}},jl.prototype.getCoordinate=function(){var t=this.iterator();return t.hasNext()?t.next().getCoordinate():null},jl.prototype.print=function(t){Xu.out.println("EdgeEndStar:   "+this.getCoordinate());for(var e=this.iterator();e.hasNext();)e.next().print(t)},jl.prototype.isAreaLabelsConsistent=function(t){return this.computeEdgeEndLabels(t.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)},jl.prototype.checkAreaLabelsConsistent=function(t){var e=this.getEdges();if(e.size()<=0)return!0;var n=e.size()-1,r=e.get(n).getLabel().getLocation(t,Nh.LEFT);tc.isTrue(r!==Su.NONE,"Found unlabelled area edge");for(var i=r,o=this.iterator();o.hasNext();){var s=o.next().getLabel();tc.isTrue(s.isArea(t),"Found non-area edge");var a=s.getLocation(t,Nh.LEFT),u=s.getLocation(t,Nh.RIGHT);if(a===u)return!1;if(u!==i)return!1;i=a}return!0},jl.prototype.findIndex=function(t){this.iterator();for(var e=0;e<this._edgeList.size();e++)if(this._edgeList.get(e)===t)return e;return-1},jl.prototype.iterator=function(){return this.getEdges().iterator()},jl.prototype.getEdges=function(){return null===this._edgeList&&(this._edgeList=new bc(this._edgeMap.values())),this._edgeList},jl.prototype.getLocation=function(t,e,n){return this._ptInAreaLocation[t]===Su.NONE&&(this._ptInAreaLocation[t]=zl.locate(e,n[t].getGeometry())),this._ptInAreaLocation[t]},jl.prototype.toString=function(){var t=new Ru;t.append("EdgeEndStar:   "+this.getCoordinate()),t.append("\n");for(var e=this.iterator();e.hasNext();){var n=e.next();t.append(n),t.append("\n")}return t.toString()},jl.prototype.computeEdgeEndLabels=function(t){for(var e=this.iterator();e.hasNext();)e.next().computeLabel(t)},jl.prototype.computeLabelling=function(t){this.computeEdgeEndLabels(t[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var e=[!1,!1],n=this.iterator();n.hasNext();)for(var r=n.next().getLabel(),i=0;i<2;i++)r.isLine(i)&&r.getLocation(i)===Su.BOUNDARY&&(e[i]=!0);for(var h,c,o=this.iterator();o.hasNext();)for(var s=o.next(),a=s.getLabel(),u=0;u<2;u++){a.isAnyNull(u)&&(c=Su.NONE,c=e[u]?Su.EXTERIOR:(h=s.getCoordinate(),this.getLocation(u,h,t)),a.setAllLocationsIfNull(u,c))}},jl.prototype.getDegree=function(){return this._edgeMap.size()},jl.prototype.insertEdgeEnd=function(t,e){this._edgeMap.put(t,e),this._edgeList=null},jl.prototype.interfaces_=function(){return[]},jl.prototype.getClass=function(){return jl};function Yl(){this._pts=null,this._orientation=null;var e=arguments[0];this._pts=e,this._orientation=Yl.orientation(e)}var Xl=function(t){function e(){t.call(this),this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.linkResultDirectedEdges=function(){this.getResultAreaEdges();for(var t=null,e=null,n=this._SCANNING_FOR_INCOMING,r=0;r<this._resultAreaEdgeList.size();r++){var i=this._resultAreaEdgeList.get(r),o=i.getSym();if(i.getLabel().isArea())switch(null===t&&i.isInResult()&&(t=i),n){case this._SCANNING_FOR_INCOMING:if(!o.isInResult())continue;e=o,n=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(!i.isInResult())continue;e.setNext(i),n=this._SCANNING_FOR_INCOMING}}if(n===this._LINKING_TO_OUTGOING){if(null===t)throw new Mh("no outgoing dirEdge found",this.getCoordinate());tc.isTrue(t.isInResult(),"unable to link last incoming dirEdge"),e.setNext(t)}},e.prototype.insert=function(t){this.insertEdgeEnd(t,t)},e.prototype.getRightmostEdge=function(){var t=this.getEdges(),e=t.size();if(e<1)return null;var n=t.get(0);if(1===e)return n;var r=t.get(e-1),i=n.getQuadrant(),o=r.getQuadrant();return Bh.isNorthern(i)&&Bh.isNorthern(o)?n:Bh.isNorthern(i)||Bh.isNorthern(o)?0!==n.getDy()?n:0!==r.getDy()?r:(tc.shouldNeverReachHere("found two horizontal edges incident on node"),null):r},e.prototype.print=function(t){Xu.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var e=this.iterator();e.hasNext();){var n=e.next();t.print("out "),n.print(t),t.println(),t.print("in "),n.getSym().print(t),t.println()}},e.prototype.getResultAreaEdges=function(){if(null!==this._resultAreaEdgeList)return this._resultAreaEdgeList;this._resultAreaEdgeList=new bc;for(var t=this.iterator();t.hasNext();){var e=t.next();(e.isInResult()||e.getSym().isInResult())&&this._resultAreaEdgeList.add(e)}return this._resultAreaEdgeList},e.prototype.updateLabelling=function(t){for(var e=this.iterator();e.hasNext();){var n=e.next().getLabel();n.setAllLocationsIfNull(0,t.getLocation(0)),n.setAllLocationsIfNull(1,t.getLocation(1))}},e.prototype.linkAllDirectedEdges=function(){this.getEdges();for(var t=null,e=null,n=this._edgeList.size()-1;0<=n;n--){var r=this._edgeList.get(n),i=r.getSym();null===e&&(e=i),null!==t&&i.setNext(t),t=r}e.setNext(t)},e.prototype.computeDepths=function(){if(1===arguments.length){var t=arguments[0],e=this.findIndex(t),n=t.getDepth(Nh.LEFT),r=t.getDepth(Nh.RIGHT),i=this.computeDepths(e+1,this._edgeList.size(),n);if(this.computeDepths(0,e,i)!==r)throw new Mh("depth mismatch at "+t.getCoordinate())}else if(3===arguments.length){for(var s=arguments[1],a=arguments[2],u=arguments[0];u<s;u++){var c=this._edgeList.get(u);c.setEdgeDepths(Nh.RIGHT,a),a=c.getDepth(Nh.LEFT)}return a}},e.prototype.mergeSymLabels=function(){for(var t=this.iterator();t.hasNext();){var e=t.next();e.getLabel().merge(e.getSym().getLabel())}},e.prototype.linkMinimalDirectedEdges=function(t){for(var e=null,n=null,r=this._SCANNING_FOR_INCOMING,i=this._resultAreaEdgeList.size()-1;0<=i;i--){var o=this._resultAreaEdgeList.get(i),s=o.getSym();switch(null===e&&o.getEdgeRing()===t&&(e=o),r){case this._SCANNING_FOR_INCOMING:if(s.getEdgeRing()!==t)continue;n=s,r=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(o.getEdgeRing()!==t)continue;n.setNextMin(o),r=this._SCANNING_FOR_INCOMING}}r===this._LINKING_TO_OUTGOING&&(tc.isTrue(null!==e,"found null for first outgoing dirEdge"),tc.isTrue(e.getEdgeRing()===t,"unable to link last incoming dirEdge"),n.setNextMin(e))},e.prototype.getOutgoingDegree=function(){if(0===arguments.length){for(var t=0,e=this.iterator();e.hasNext();)e.next().isInResult()&&t++;return t}if(1===arguments.length){for(var n=arguments[0],r=0,i=this.iterator();i.hasNext();)i.next().getEdgeRing()===n&&r++;return r}},e.prototype.getLabel=function(){return this._label},e.prototype.findCoveredLineEdges=function(){for(var t=Su.NONE,e=this.iterator();e.hasNext();){var n=e.next(),r=n.getSym();if(!n.isLineEdge()){if(n.isInResult()){t=Su.INTERIOR;break}if(r.isInResult()){t=Su.EXTERIOR;break}}}if(t===Su.NONE)return null;for(var i=t,o=this.iterator();o.hasNext();){var s=o.next(),a=s.getSym();s.isLineEdge()?s.getEdge().setCovered(i===Su.INTERIOR):(s.isInResult()&&(i=Su.EXTERIOR),a.isInResult()&&(i=Su.INTERIOR))}},e.prototype.computeLabelling=function(e){t.prototype.computeLabelling.call(this,e),this._label=new Rh(Su.NONE);for(var n=this.iterator();n.hasNext();)for(var r=n.next().getEdge().getLabel(),i=0;i<2;i++){var o=r.getLocation(i);o!==Su.INTERIOR&&o!==Su.BOUNDARY||this._label.setLocation(i,Su.INTERIOR)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(jl),Ul=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.createNode=function(t){return new qh(t,new Xl)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Xh);Yl.prototype.compareTo=function(t){return Yl.compareOriented(this._pts,this._orientation,t._pts,t._orientation)},Yl.prototype.interfaces_=function(){return[xu]},Yl.prototype.getClass=function(){return Yl},Yl.orientation=function(t){return 1===Cc.increasingDirection(t)},Yl.compareOriented=function(t,e,n,r){for(var i=e?1:-1,o=r?1:-1,s=e?t.length:-1,a=r?n.length:-1,u=e?0:t.length-1,c=r?0:n.length-1;;){var h=t[u].compareTo(n[c]);if(0!==h)return h;var l=(u+=i)===s,p=(c+=o)===a;if(l&&!p)return-1;if(!l&&p)return 1;if(l&&p)return 0}};function Vl(){this._edges=new bc,this._ocaMap=new Gi}Vl.prototype.print=function(t){t.print("MULTILINESTRING ( ");for(var e=0;e<this._edges.size();e++){var n=this._edges.get(e);0<e&&t.print(","),t.print("(");for(var r=n.getCoordinates(),i=0;i<r.length;i++)0<i&&t.print(","),t.print(r[i].x+" "+r[i].y);t.println(")")}t.print(")  ")},Vl.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next())},Vl.prototype.findEdgeIndex=function(t){for(var e=0;e<this._edges.size();e++)if(this._edges.get(e).equals(t))return e;return-1},Vl.prototype.iterator=function(){return this._edges.iterator()},Vl.prototype.getEdges=function(){return this._edges},Vl.prototype.get=function(t){return this._edges.get(t)},Vl.prototype.findEqualEdge=function(t){var e=new Yl(t.getCoordinates());return this._ocaMap.get(e)},Vl.prototype.add=function(t){this._edges.add(t);var e=new Yl(t.getCoordinates());this._ocaMap.put(e,t)},Vl.prototype.interfaces_=function(){return[]},Vl.prototype.getClass=function(){return Vl};function Hl(){}Hl.prototype.processIntersections=function(t,e,n,r){},Hl.prototype.isDone=function(){},Hl.prototype.interfaces_=function(){return[]},Hl.prototype.getClass=function(){return Hl};function Wl(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0;var t=arguments[this.numTests=0];this._li=t}Wl.prototype.isTrivialIntersection=function(t,e,n,r){if(t===n&&1===this._li.getIntersectionNum()){if(Wl.isAdjacentSegments(e,r))return!0;if(t.isClosed()){var i=t.size()-1;if(0===e&&r===i||0===r&&e===i)return!0}}return!1},Wl.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},Wl.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},Wl.prototype.getLineIntersector=function(){return this._li},Wl.prototype.hasProperIntersection=function(){return this._hasProper},Wl.prototype.processIntersections=function(t,e,n,r){if(t===n&&e===r)return null;this.numTests++;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[r],a=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,s,a),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(t,e,n,r)||(this._hasIntersection=!0,t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))},Wl.prototype.hasIntersection=function(){return this._hasIntersection},Wl.prototype.isDone=function(){return!1},Wl.prototype.hasInteriorIntersection=function(){return this._hasInterior},Wl.prototype.interfaces_=function(){return[Hl]},Wl.prototype.getClass=function(){return Wl},Wl.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};function Jl(){this.coord=null,this.segmentIndex=null,this.dist=null;var t=arguments[0],e=arguments[1],n=arguments[2];this.coord=new bu(t),this.segmentIndex=e,this.dist=n}Jl.prototype.getSegmentIndex=function(){return this.segmentIndex},Jl.prototype.getCoordinate=function(){return this.coord},Jl.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex),t.println(" dist = "+this.dist)},Jl.prototype.compareTo=function(t){return this.compare(t.segmentIndex,t.dist)},Jl.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&0===this.dist||this.segmentIndex===t},Jl.prototype.toString=function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist},Jl.prototype.getDistance=function(){return this.dist},Jl.prototype.compare=function(t,e){return this.segmentIndex<t?-1:this.segmentIndex>t?1:this.dist<e?-1:this.dist>e?1:0},Jl.prototype.interfaces_=function(){return[xu]},Jl.prototype.getClass=function(){return Jl};var Zl=function(){this._nodeMap=new Gi,this.edge=null;var t=arguments[0];this.edge=t};Zl.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)},Zl.prototype.iterator=function(){return this._nodeMap.values().iterator()},Zl.prototype.addSplitEdges=function(t){this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next(),i=this.createSplitEdge(n,r);t.add(i),n=r}},Zl.prototype.addEndpoints=function(){var t=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[t],t,0)},Zl.prototype.createSplitEdge=function(t,e){var n=e.segmentIndex-t.segmentIndex+2,r=this.edge.pts[e.segmentIndex],i=0<e.dist||!e.coord.equals2D(r);i||n--;var o=new Array(n).fill(null),s=0;o[s++]=new bu(t.coord);for(var a=t.segmentIndex+1;a<=e.segmentIndex;a++)o[s++]=this.edge.pts[a];return i&&(o[s]=e.coord),new ep(o,new Rh(this.edge._label))},Zl.prototype.add=function(t,e,n){var r=new Jl(t,e,n),i=this._nodeMap.get(r);return null!==i?i:(this._nodeMap.put(r,r),r)},Zl.prototype.isIntersection=function(t){for(var e=this.iterator();e.hasNext();)if(e.next().coord.equals(t))return!0;return!1},Zl.prototype.interfaces_=function(){return[]},Zl.prototype.getClass=function(){return Zl};function Kl(){}Kl.prototype.getChainStartIndices=function(t){var e=0,n=new bc;n.add(new Tu(e));do{var r=this.findChainEnd(t,e);n.add(new Tu(r)),e=r}while(e<t.length-1);return Kl.toIntArray(n)},Kl.prototype.findChainEnd=function(t,e){for(var n=Bh.quadrant(t[e],t[e+1]),r=e+1;r<t.length&&Bh.quadrant(t[r-1],t[r])===n;)r++;return r-1},Kl.prototype.interfaces_=function(){return[]},Kl.prototype.getClass=function(){return Kl},Kl.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e};function Ql(){this.e=null,this.pts=null,this.startIndex=null,this.env1=new Yu,this.env2=new Yu;var t=arguments[0];this.e=t,this.pts=t.getCoordinates();var e=new Kl;this.startIndex=e.getChainStartIndices(this.pts)}Ql.prototype.getCoordinates=function(){return this.pts},Ql.prototype.getMaxX=function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return n<e?e:n},Ql.prototype.getMinX=function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e<n?e:n},Ql.prototype.computeIntersectsForChain=function(){if(4===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this.computeIntersectsForChain(this.startIndex[t],this.startIndex[t+1],e,e.startIndex[n],e.startIndex[n+1],r)}else if(6===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3],u=arguments[4],c=arguments[5],h=this.pts[i],l=this.pts[o],p=s.pts[a],f=s.pts[u];if(o-i==1&&u-a==1)return c.addIntersections(this.e,i,s.e,a),null;if(this.env1.init(h,l),this.env2.init(p,f),!this.env1.intersects(this.env2))return null;var g=Math.trunc((i+o)/2),d=Math.trunc((a+u)/2);i<g&&(a<d&&this.computeIntersectsForChain(i,g,s,a,d,c),d<u&&this.computeIntersectsForChain(i,g,s,d,u,c)),g<o&&(a<d&&this.computeIntersectsForChain(g,o,s,a,d,c),d<u&&this.computeIntersectsForChain(g,o,s,d,u,c))}},Ql.prototype.getStartIndexes=function(){return this.startIndex},Ql.prototype.computeIntersects=function(t,e){for(var n=0;n<this.startIndex.length-1;n++)for(var r=0;r<t.startIndex.length-1;r++)this.computeIntersectsForChain(n,t,r,e)},Ql.prototype.interfaces_=function(){return[]},Ql.prototype.getClass=function(){return Ql};var $l=function t(){this._depth=Array(2).fill().map(function(){return Array(3)});for(var e=0;e<2;e++)for(var n=0;n<3;n++)this._depth[e][n]=t.NULL_VALUE},tp={NULL_VALUE:{configurable:!0}};$l.prototype.getDepth=function(t,e){return this._depth[t][e]},$l.prototype.setDepth=function(t,e,n){this._depth[t][e]=n},$l.prototype.isNull=function(){if(0===arguments.length){for(var t=0;t<2;t++)for(var e=0;e<3;e++)if(this._depth[t][e]!==$l.NULL_VALUE)return!1;return!0}if(1===arguments.length){var n=arguments[0];return this._depth[n][1]===$l.NULL_VALUE}if(2===arguments.length){var r=arguments[0],i=arguments[1];return this._depth[r][i]===$l.NULL_VALUE}},$l.prototype.normalize=function(){for(var t=0;t<2;t++)if(!this.isNull(t)){var e=this._depth[t][1];this._depth[t][2]<e&&(e=this._depth[t][2]),e<0&&(e=0);for(var n=1;n<3;n++){var r=0;this._depth[t][n]>e&&(r=1),this._depth[t][n]=r}}},$l.prototype.getDelta=function(t){return this._depth[t][Nh.RIGHT]-this._depth[t][Nh.LEFT]},$l.prototype.getLocation=function(t,e){return this._depth[t][e]<=0?Su.EXTERIOR:Su.INTERIOR},$l.prototype.toString=function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]},$l.prototype.add=function(){var i,o;if(1===arguments.length)for(var t=arguments[0],e=0;e<2;e++)for(var n=1;n<3;n++){var r=t.getLocation(e,n);r!==Su.EXTERIOR&&r!==Su.INTERIOR||(this.isNull(e,n)?this._depth[e][n]=$l.depthAtLocation(r):this._depth[e][n]+=$l.depthAtLocation(r))}else 3===arguments.length&&(i=arguments[0],o=arguments[1],arguments[2]===Su.INTERIOR&&this._depth[i][o]++)},$l.prototype.interfaces_=function(){return[]},$l.prototype.getClass=function(){return $l},$l.depthAtLocation=function(t){return t===Su.EXTERIOR?0:t===Su.INTERIOR?1:$l.NULL_VALUE},tp.NULL_VALUE.get=function(){return-1},Object.defineProperties($l,tp);function np(t){this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new Vl,this._bufParams=t||null}var ep=function(t){function e(){var n,r,i;t.call(this),this.pts=null,this._env=null,this.eiList=new Zl(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new $l,this._depthDelta=0,1===arguments.length?(n=arguments[0],e.call(this,n,null)):2===arguments.length&&(r=arguments[0],i=arguments[1],this.pts=r,this._label=i)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),(e.prototype.constructor=e).prototype.getDepth=function(){return this._depth},e.prototype.getCollapsedEdge=function(){var t=new Array(2).fill(null);return t[0]=this.pts[0],t[1]=this.pts[1],new e(t,Rh.toLineLabel(this._label))},e.prototype.isIsolated=function(){return this._isIsolated},e.prototype.getCoordinates=function(){return this.pts},e.prototype.setIsolated=function(t){this._isIsolated=t},e.prototype.setName=function(t){this._name=t},e.prototype.equals=function(t){if(!(t instanceof e))return!1;var n=t;if(this.pts.length!==n.pts.length)return!1;for(var r=!0,i=!0,o=this.pts.length,s=0;s<this.pts.length;s++)if(this.pts[s].equals2D(n.pts[s])||(r=!1),this.pts[s].equals2D(n.pts[--o])||(i=!1),!r&&!i)return!1;return!0},e.prototype.getCoordinate=function(){if(0===arguments.length)return 0<this.pts.length?this.pts[0]:null;if(1===arguments.length){var t=arguments[0];return this.pts[t]}},e.prototype.print=function(t){t.print("edge "+this._name+": "),t.print("LINESTRING (");for(var e=0;e<this.pts.length;e++)0<e&&t.print(","),t.print(this.pts[e].x+" "+this.pts[e].y);t.print(")  "+this._label+" "+this._depthDelta)},e.prototype.computeIM=function(t){e.updateIM(this._label,t)},e.prototype.isCollapsed=function(){return!!this._label.isArea()&&3===this.pts.length&&!!this.pts[0].equals(this.pts[2])},e.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},e.prototype.getMaximumSegmentIndex=function(){return this.pts.length-1},e.prototype.getDepthDelta=function(){return this._depthDelta},e.prototype.getNumPoints=function(){return this.pts.length},e.prototype.printReverse=function(t){t.print("edge "+this._name+": ");for(var e=this.pts.length-1;0<=e;e--)t.print(this.pts[e]+" ");t.println("")},e.prototype.getMonotoneChainEdge=function(){return null===this._mce&&(this._mce=new Ql(this)),this._mce},e.prototype.getEnvelope=function(){if(null===this._env){this._env=new Yu;for(var t=0;t<this.pts.length;t++)this._env.expandToInclude(this.pts[t])}return this._env},e.prototype.addIntersection=function(t,e,n,r){var u,i=new bu(t.getIntersection(r)),o=e,s=t.getEdgeDistance(n,r),a=o+1;a<this.pts.length&&(u=this.pts[a],i.equals2D(u)&&(o=a,s=0)),this.eiList.add(i,o,s)},e.prototype.toString=function(){var t=new Ru;t.append("edge "+this._name+": "),t.append("LINESTRING (");for(var e=0;e<this.pts.length;e++)0<e&&t.append(","),t.append(this.pts[e].x+" "+this.pts[e].y);return t.append(")  "+this._label+" "+this._depthDelta),t.toString()},e.prototype.isPointwiseEqual=function(t){if(this.pts.length!==t.pts.length)return!1;for(var e=0;e<this.pts.length;e++)if(!this.pts[e].equals2D(t.pts[e]))return!1;return!0},e.prototype.setDepthDelta=function(t){this._depthDelta=t},e.prototype.getEdgeIntersectionList=function(){return this.eiList},e.prototype.addIntersections=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++)this.addIntersection(t,e,n,r)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.updateIM=function(){if(2!==arguments.length)return t.prototype.updateIM.apply(this,arguments);var e=arguments[0],n=arguments[1];n.setAtLeastIfValid(e.getLocation(0,Nh.ON),e.getLocation(1,Nh.ON),1),e.isArea()&&(n.setAtLeastIfValid(e.getLocation(0,Nh.LEFT),e.getLocation(1,Nh.LEFT),2),n.setAtLeastIfValid(e.getLocation(0,Nh.RIGHT),e.getLocation(1,Nh.RIGHT),2))},e}(Fh);np.prototype.setWorkingPrecisionModel=function(t){this._workingPrecisionModel=t},np.prototype.insertUniqueEdge=function(t){var n,r,i,o,e=this._edgeList.findEqualEdge(t);null!==e?(n=e.getLabel(),r=t.getLabel(),e.isPointwiseEqual(t)||(r=new Rh(t.getLabel())).flip(),n.merge(r),i=np.depthDelta(r),o=e.getDepthDelta()+i,e.setDepthDelta(o)):(this._edgeList.add(t),t.setDepthDelta(np.depthDelta(t.getLabel())))},np.prototype.buildSubgraphs=function(t,e){for(var n=new bc,r=t.iterator();r.hasNext();){var i=r.next(),o=i.getRightmostCoordinate(),s=new Al(n).getDepth(o);i.computeDepth(s),i.findResultEdges(),n.add(i),e.add(i.getDirectedEdges(),i.getNodes())}},np.prototype.createSubgraphs=function(t){for(var e=new bc,n=t.getNodes().iterator();n.hasNext();){var i,r=n.next();r.isVisited()||((i=new Ph).create(r),e.add(i))}return $h.sort(e,$h.reverseOrder()),e},np.prototype.createEmptyResultGeometry=function(){return this._geomFact.createPolygon()},np.prototype.getNoder=function(t){if(null!==this._workingNoder)return this._workingNoder;var e=new El,n=new rc;return n.setPrecisionModel(t),e.setSegmentIntersector(new Wl(n)),e},np.prototype.buffer=function(t,e){var n=this._workingPrecisionModel;null===n&&(n=t.getPrecisionModel()),this._geomFact=t.getFactory();var r=new Tl(n,this._bufParams),i=new Gl(t,e,r).getCurves();if(i.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(i,n),this._graph=new Uh(new Ul),this._graph.addEdges(this._edgeList.getEdges());var o=this.createSubgraphs(this._graph),s=new Yh(this._geomFact);this.buildSubgraphs(o,s);var a=s.getPolygons();return a.size()<=0?this.createEmptyResultGeometry():this._geomFact.buildGeometry(a)},np.prototype.computeNodedEdges=function(t,e){var n=this.getNoder(e);n.computeNodes(t);for(var r=n.getNodedSubstrings().iterator();r.hasNext();){var s,a,i=r.next(),o=i.getCoordinates();2===o.length&&o[0].equals2D(o[1])||(s=i.getData(),a=new ep(i.getCoordinates(),new Rh(s)),this.insertUniqueEdge(a))}},np.prototype.setNoder=function(t){this._workingNoder=t},np.prototype.interfaces_=function(){return[]},np.prototype.getClass=function(){return np},np.depthDelta=function(t){var e=t.getLocation(0,Nh.LEFT),n=t.getLocation(0,Nh.RIGHT);return e===Su.INTERIOR&&n===Su.EXTERIOR?1:e===Su.EXTERIOR&&n===Su.INTERIOR?-1:0},np.convertSegStrings=function(t){for(var e=new _h,n=new bc;t.hasNext();){var r=t.next(),i=e.createLineString(r.getCoordinates());n.add(i)}return e.buildGeometry(n)};function rp(){var t,e,n,r,i,o;this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,2===arguments.length?(t=arguments[0],e=arguments[1],this._noder=t,this._scaleFactor=e,this._offsetX=0,this._offsetY=0,this._isScaled=!this.isIntegerPrecision()):4===arguments.length&&(n=arguments[0],r=arguments[1],i=arguments[2],o=arguments[3],this._noder=n,this._scaleFactor=r,this._offsetX=i,this._offsetY=o,this._isScaled=!this.isIntegerPrecision())}rp.prototype.rescale=function(){if(Lu(arguments[0],vc))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.rescale(e.getCoordinates())}else if(arguments[0]instanceof Array){for(var n=arguments[0],r=0;r<n.length;r++)n[r].x=n[r].x/this._scaleFactor+this._offsetX,n[r].y=n[r].y/this._scaleFactor+this._offsetY;2===n.length&&n[0].equals2D(n[1])&&Xu.out.println(n)}},rp.prototype.scale=function(){if(Lu(arguments[0],vc)){for(var t=arguments[0],e=new bc,n=t.iterator();n.hasNext();){var r=n.next();e.add(new fl(this.scale(r.getCoordinates()),r.getData()))}return e}if(arguments[0]instanceof Array){for(var i=arguments[0],o=new Array(i.length).fill(null),s=0;s<i.length;s++)o[s]=new bu(Math.round((i[s].x-this._offsetX)*this._scaleFactor),Math.round((i[s].y-this._offsetY)*this._scaleFactor),i[s].z);return Cc.removeRepeatedPoints(o)}},rp.prototype.isIntegerPrecision=function(){return 1===this._scaleFactor},rp.prototype.getNodedSubstrings=function(){var t=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(t),t},rp.prototype.computeNodes=function(t){var e=t;this._isScaled&&(e=this.scale(t)),this._noder.computeNodes(e)},rp.prototype.interfaces_=function(){return[vl]},rp.prototype.getClass=function(){return rp};function ip(){this._li=new rc,this._segStrings=null;var t=arguments[0];this._segStrings=t}var op={fact:{configurable:!0}};ip.prototype.checkEndPtVertexIntersections=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next().getCoordinates();this.checkEndPtVertexIntersections(e[0],this._segStrings),this.checkEndPtVertexIntersections(e[e.length-1],this._segStrings)}else if(2===arguments.length)for(var n=arguments[0],r=arguments[1].iterator();r.hasNext();)for(var i=r.next().getCoordinates(),o=1;o<i.length-1;o++)if(i[o].equals(n))throw new Qu("found endpt/interior pt intersection at index "+o+" :pt "+n)},ip.prototype.checkInteriorIntersections=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();)for(var e=t.next(),n=this._segStrings.iterator();n.hasNext();){var r=n.next();this.checkInteriorIntersections(e,r)}else if(2===arguments.length)for(var i=arguments[0],o=arguments[1],s=i.getCoordinates(),a=o.getCoordinates(),u=0;u<s.length-1;u++)for(var c=0;c<a.length-1;c++)this.checkInteriorIntersections(i,u,o,c);else if(4===arguments.length){var h=arguments[0],l=arguments[1],p=arguments[2],f=arguments[3];if(h===p&&l===f)return null;var g=h.getCoordinates()[l],d=h.getCoordinates()[l+1],y=p.getCoordinates()[f],_=p.getCoordinates()[f+1];if(this._li.computeIntersection(g,d,y,_),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,g,d)||this.hasInteriorIntersection(this._li,y,_)))throw new Qu("found non-noded intersection at "+g+"-"+d+" and "+y+"-"+_)}},ip.prototype.checkValid=function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()},ip.prototype.checkCollapses=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next();this.checkCollapses(e)}else if(1===arguments.length)for(var n=arguments[0].getCoordinates(),r=0;r<n.length-2;r++)this.checkCollapse(n[r],n[r+1],n[r+2])},ip.prototype.hasInteriorIntersection=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++){var i=t.getIntersection(r);if(!i.equals(e)&&!i.equals(n))return!0}return!1},ip.prototype.checkCollapse=function(t,e,n){if(t.equals(n))throw new Qu("found non-noded collapse at "+ip.fact.createLineString([t,e,n]))},ip.prototype.interfaces_=function(){return[]},ip.prototype.getClass=function(){return ip},op.fact.get=function(){return new _h},Object.defineProperties(ip,op);function sp(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var t=arguments[0],e=arguments[1],n=arguments[2];if(this._originalPt=t,this._pt=t,this._scaleFactor=e,this._li=n,e<=0)throw new _u;1!==e&&(this._pt=new bu(this.scale(t.x),this.scale(t.y)),this._p0Scaled=new bu,this._p1Scaled=new bu),this.initCorners(this._pt)}var ap={SAFE_ENV_EXPANSION_FACTOR:{configurable:!0}};sp.prototype.intersectsScaled=function(t,e){var n=Math.min(t.x,e.x),r=Math.max(t.x,e.x),i=Math.min(t.y,e.y),o=Math.max(t.y,e.y),s=this._maxx<n||this._minx>r||this._maxy<i||this._miny>o;if(s)return!1;var a=this.intersectsToleranceSquare(t,e);return tc.isTrue(!(s&&a),"Found bad envelope test"),a},sp.prototype.initCorners=function(t){this._minx=t.x-.5,this._maxx=t.x+.5,this._miny=t.y-.5,this._maxy=t.y+.5,this._corner[0]=new bu(this._maxx,this._maxy),this._corner[1]=new bu(this._minx,this._maxy),this._corner[2]=new bu(this._minx,this._miny),this._corner[3]=new bu(this._maxx,this._miny)},sp.prototype.intersects=function(t,e){return 1===this._scaleFactor?this.intersectsScaled(t,e):(this.copyScaled(t,this._p0Scaled),this.copyScaled(e,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))},sp.prototype.scale=function(t){return Math.round(t*this._scaleFactor)},sp.prototype.getCoordinate=function(){return this._originalPt},sp.prototype.copyScaled=function(t,e){e.x=this.scale(t.x),e.y=this.scale(t.y)},sp.prototype.getSafeEnvelope=function(){var t;return null===this._safeEnv&&(t=sp.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor,this._safeEnv=new Yu(this._originalPt.x-t,this._originalPt.x+t,this._originalPt.y-t,this._originalPt.y+t)),this._safeEnv},sp.prototype.intersectsPixelClosure=function(t,e){return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!(this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),this._li.hasIntersection()))))},sp.prototype.intersectsToleranceSquare=function(t,e){var n=!1,r=!1;return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!(this._li.isProper()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),this._li.isProper()||(this._li.hasIntersection()&&(n=!0),this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),this._li.isProper()||(this._li.hasIntersection()&&(r=!0),this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),this._li.isProper()||n&&r||t.equals(this._pt)||e.equals(this._pt)))))},sp.prototype.addSnappedNode=function(t,e){var n=t.getCoordinate(e),r=t.getCoordinate(e+1);return!!this.intersects(n,r)&&(t.addIntersection(this.getCoordinate(),e),!0)},sp.prototype.interfaces_=function(){return[]},sp.prototype.getClass=function(){return sp},ap.SAFE_ENV_EXPANSION_FACTOR.get=function(){return.75},Object.defineProperties(sp,ap);function up(){this.tempEnv1=new Yu,this.selectedSegment=new gl}up.prototype.select=function(){var e;1===arguments.length||2===arguments.length&&(e=arguments[1],arguments[0].getLineSegment(e,this.selectedSegment),this.select(this.selectedSegment))},up.prototype.interfaces_=function(){return[]},up.prototype.getClass=function(){return up};function cp(){this._index=null;var t=arguments[0];this._index=t}var hp={HotPixelSnapAction:{configurable:!0}};cp.prototype.snap=function(){if(1===arguments.length){var t=arguments[0];return this.snap(t,null,-1)}if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2],i=e.getSafeEnvelope(),o=new lp(e,n,r);return this._index.query(i,{interfaces_:function(){return[Jh]},visitItem:function(t){t.select(i,o)}}),o.isNodeAdded()}},cp.prototype.interfaces_=function(){return[]},cp.prototype.getClass=function(){return cp},hp.HotPixelSnapAction.get=function(){return lp},Object.defineProperties(cp,hp);function pp(){this._li=null,this._interiorIntersections=null;var t=arguments[0];this._li=t,this._interiorIntersections=new bc}var lp=function(t){function e(){t.call(this),this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var e=arguments[0],n=arguments[1],r=arguments[2];this._hotPixel=e,this._parentEdge=n,this._hotPixelVertexIndex=r}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.isNodeAdded=function(){return this._isNodeAdded},e.prototype.select=function(){if(2!==arguments.length)return t.prototype.select.apply(this,arguments);var n=arguments[1],r=arguments[0].getContext();if(null!==this._parentEdge&&r===this._parentEdge&&n===this._hotPixelVertexIndex)return null;this._isNodeAdded=this._hotPixel.addSnappedNode(r,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(up);pp.prototype.processIntersections=function(t,e,n,r){if(t===n&&e===r)return null;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[r],a=n.getCoordinates()[r+1];if(this._li.computeIntersection(i,o,s,a),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var u=0;u<this._li.getIntersectionNum();u++)this._interiorIntersections.add(this._li.getIntersection(u));t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1)}},pp.prototype.isDone=function(){return!1},pp.prototype.getInteriorIntersections=function(){return this._interiorIntersections},pp.prototype.interfaces_=function(){return[Hl]},pp.prototype.getClass=function(){return pp};function fp(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var t=arguments[0];this._pm=t,this._li=new rc,this._li.setPrecisionModel(t),this._scaleFactor=t.getScale()}fp.prototype.checkCorrectness=function(t){var e=fl.getNodedSubstrings(t),n=new ip(e);try{n.checkValid()}catch(t){if(!(t instanceof zu))throw t;t.printStackTrace()}},fp.prototype.getNodedSubstrings=function(){return fl.getNodedSubstrings(this._nodedSegStrings)},fp.prototype.snapRound=function(t,e){var n=this.findInteriorIntersections(t,e);this.computeIntersectionSnaps(n),this.computeVertexSnaps(t)},fp.prototype.findInteriorIntersections=function(t,e){var n=new pp(e);return this._noder.setSegmentIntersector(n),this._noder.computeNodes(t),n.getInteriorIntersections()},fp.prototype.computeVertexSnaps=function(){if(Lu(arguments[0],vc))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.computeVertexSnaps(e)}else if(arguments[0]instanceof fl)for(var n=arguments[0],r=n.getCoordinates(),i=0;i<r.length;i++){var o=new sp(r[i],this._scaleFactor,this._li);this._pointSnapper.snap(o,n,i)&&n.addIntersection(r[i],i)}},fp.prototype.computeNodes=function(t){this._nodedSegStrings=t,this._noder=new El,this._pointSnapper=new cp(this._noder.getIndex()),this.snapRound(t,this._li)},fp.prototype.computeIntersectionSnaps=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),r=new sp(n,this._scaleFactor,this._li);this._pointSnapper.snap(r)}},fp.prototype.interfaces_=function(){return[vl]},fp.prototype.getClass=function(){return fp};var gp=function(){var t,e,n;this._argGeom=null,this._distance=null,this._bufParams=new bl,this._resultGeometry=null,this._saveException=null,1===arguments.length?(t=arguments[0],this._argGeom=t):2===arguments.length&&(e=arguments[0],n=arguments[1],this._argGeom=e,this._bufParams=n)},dp={CAP_ROUND:{configurable:!0},CAP_BUTT:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},MAX_PRECISION_DIGITS:{configurable:!0}};gp.prototype.bufferFixedPrecision=function(t){var e=new rp(new fp(new fh(1)),t.getScale()),n=new np(this._bufParams);n.setWorkingPrecisionModel(t),n.setNoder(e),this._resultGeometry=n.buffer(this._argGeom,this._distance)},gp.prototype.bufferReducedPrecision=function(){var n,r,i,t=this;if(0===arguments.length){for(var e=gp.MAX_PRECISION_DIGITS;0<=e;e--){try{t.bufferReducedPrecision(e)}catch(e){if(!(e instanceof Mh))throw e;t._saveException=e}if(null!==t._resultGeometry)return null}throw this._saveException}1===arguments.length&&(n=arguments[0],r=gp.precisionScaleFactor(this._argGeom,this._distance,n),i=new fh(r),this.bufferFixedPrecision(i))},gp.prototype.computeGeometry=function(){if(this.bufferOriginalPrecision(),null!==this._resultGeometry)return null;var t=this._argGeom.getFactory().getPrecisionModel();t.getType()===fh.FIXED?this.bufferFixedPrecision(t):this.bufferReducedPrecision()},gp.prototype.setQuadrantSegments=function(t){this._bufParams.setQuadrantSegments(t)},gp.prototype.bufferOriginalPrecision=function(){try{var t=new np(this._bufParams);this._resultGeometry=t.buffer(this._argGeom,this._distance)}catch(t){if(!(t instanceof Qu))throw t;this._saveException=t}},gp.prototype.getResultGeometry=function(t){return this._distance=t,this.computeGeometry(),this._resultGeometry},gp.prototype.setEndCapStyle=function(t){this._bufParams.setEndCapStyle(t)},gp.prototype.interfaces_=function(){return[]},gp.prototype.getClass=function(){return gp},gp.bufferOp=function(){if(2===arguments.length){var e=arguments[1];return new gp(arguments[0]).getResultGeometry(e)}if(3===arguments.length){if(Number.isInteger(arguments[2])&&arguments[0]instanceof cc&&"number"==typeof arguments[1]){var r=arguments[1],i=arguments[2],o=new gp(arguments[0]);return o.setQuadrantSegments(i),o.getResultGeometry(r)}if(arguments[2]instanceof bl&&arguments[0]instanceof cc&&"number"==typeof arguments[1]){var a=arguments[1];return new gp(arguments[0],arguments[2]).getResultGeometry(a)}}else if(4===arguments.length){var h=arguments[1],l=arguments[2],p=arguments[3],f=new gp(arguments[0]);return f.setQuadrantSegments(l),f.setEndCapStyle(p),f.getResultGeometry(h)}},gp.precisionScaleFactor=function(t,e,n){var r=t.getEnvelopeInternal(),i=Pu.max(Math.abs(r.getMaxX()),Math.abs(r.getMaxY()),Math.abs(r.getMinX()),Math.abs(r.getMinY()))+2*(0<e?e:0),o=n-Math.trunc(Math.log(i)/Math.log(10)+1);return Math.pow(10,o)},dp.CAP_ROUND.get=function(){return bl.CAP_ROUND},dp.CAP_BUTT.get=function(){return bl.CAP_FLAT},dp.CAP_FLAT.get=function(){return bl.CAP_FLAT},dp.CAP_SQUARE.get=function(){return bl.CAP_SQUARE},dp.MAX_PRECISION_DIGITS.get=function(){return 12},Object.defineProperties(gp,dp);function yp(){this._pt=[new bu,new bu],this._distance=mu.NaN,this._isNull=!0}yp.prototype.getCoordinates=function(){return this._pt},yp.prototype.getCoordinate=function(t){return this._pt[t]},yp.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r<this._distance&&this.initialize(e,n,r)}},yp.prototype.initialize=function(){var t,e,n,r,i;0===arguments.length?this._isNull=!0:2===arguments.length?(t=arguments[0],e=arguments[1],this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1):3===arguments.length&&(n=arguments[0],r=arguments[1],i=arguments[2],this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(r),this._distance=i,this._isNull=!1)},yp.prototype.getDistance=function(){return this._distance},yp.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r>this._distance&&this.initialize(e,n,r)}},yp.prototype.interfaces_=function(){return[]},yp.prototype.getClass=function(){return yp};function _p(){}_p.prototype.interfaces_=function(){return[]},_p.prototype.getClass=function(){return _p},_p.computeDistance=function(){if(arguments[2]instanceof yp&&arguments[0]instanceof Jc&&arguments[1]instanceof bu)for(var e=arguments[1],n=arguments[2],r=arguments[0].getCoordinates(),i=new gl,o=0;o<r.length-1;o++){i.setCoordinates(r[o],r[o+1]);var s=i.closestPoint(e);n.setMinimum(s,e)}else if(arguments[2]instanceof yp&&arguments[0]instanceof $c&&arguments[1]instanceof bu){var a=arguments[0],u=arguments[1],c=arguments[2];_p.computeDistance(a.getExteriorRing(),u,c);for(var h=0;h<a.getNumInteriorRing();h++)_p.computeDistance(a.getInteriorRingN(h),u,c)}else if(arguments[2]instanceof yp&&arguments[0]instanceof cc&&arguments[1]instanceof bu){var l=arguments[0],p=arguments[1],f=arguments[2];if(l instanceof Jc)_p.computeDistance(l,p,f);else if(l instanceof $c)_p.computeDistance(l,p,f);else if(l instanceof jc)for(var g=l,d=0;d<g.getNumGeometries();d++){var y=g.getGeometryN(d);_p.computeDistance(y,p,f)}else f.setMinimum(l.getCoordinate(),p)}else{var m,v,x;arguments[2]instanceof yp&&arguments[0]instanceof gl&&arguments[1]instanceof bu&&(m=arguments[1],v=arguments[2],x=arguments[0].closestPoint(m),v.setMinimum(x,m))}};function mp(t){this._maxPtDist=new yp,this._inputGeom=t||null}var vp={MaxPointDistanceFilter:{configurable:!0},MaxMidpointDistanceFilter:{configurable:!0}};mp.prototype.computeMaxMidpointDistance=function(t){var e=new Ep(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},mp.prototype.computeMaxVertexDistance=function(t){var e=new xp(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},mp.prototype.findDistance=function(t){return this.computeMaxVertexDistance(t),this.computeMaxMidpointDistance(t),this._maxPtDist.getDistance()},mp.prototype.getDistancePoints=function(){return this._maxPtDist},mp.prototype.interfaces_=function(){return[]},mp.prototype.getClass=function(){return mp},vp.MaxPointDistanceFilter.get=function(){return xp},vp.MaxMidpointDistanceFilter.get=function(){return Ep},Object.defineProperties(mp,vp);var xp=function(t){this._maxPtDist=new yp,this._minPtDist=new yp,this._geom=t||null};xp.prototype.filter=function(t){this._minPtDist.initialize(),_p.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},xp.prototype.getMaxPointDistance=function(){return this._maxPtDist},xp.prototype.interfaces_=function(){return[pc]},xp.prototype.getClass=function(){return xp};var Ep=function(t){this._maxPtDist=new yp,this._minPtDist=new yp,this._geom=t||null};Ep.prototype.filter=function(t,e){if(0===e)return null;var n=t.getCoordinate(e-1),r=t.getCoordinate(e),i=new bu((n.x+r.x)/2,(n.y+r.y)/2);this._minPtDist.initialize(),_p.computeDistance(this._geom,i,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Ep.prototype.isDone=function(){return!1},Ep.prototype.isGeometryChanged=function(){return!1},Ep.prototype.getMaxPointDistance=function(){return this._maxPtDist},Ep.prototype.interfaces_=function(){return[zc]},Ep.prototype.getClass=function(){return Ep};function wp(t){this._comps=t||null}wp.prototype.filter=function(t){t instanceof $c&&this._comps.add(t)},wp.prototype.interfaces_=function(){return[kc]},wp.prototype.getClass=function(){return wp},wp.getPolygons=function(){if(1===arguments.length)return wp.getPolygons(arguments[0],new bc);if(2===arguments.length){var e=arguments[0],n=arguments[1];return e instanceof $c?n.add(e):e instanceof jc&&e.apply(new wp(n)),n}};function bp(){var t,e,n;this._lines=null,this._isForcedToLineString=!1,1===arguments.length?(t=arguments[0],this._lines=t):2===arguments.length&&(e=arguments[0],n=arguments[1],this._lines=e,this._isForcedToLineString=n)}bp.prototype.filter=function(t){if(this._isForcedToLineString&&t instanceof eh){var e=t.getFactory().createLineString(t.getCoordinateSequence());return this._lines.add(e),null}t instanceof Jc&&this._lines.add(t)},bp.prototype.setForceToLineString=function(t){this._isForcedToLineString=t},bp.prototype.interfaces_=function(){return[uc]},bp.prototype.getClass=function(){return bp},bp.getGeometry=function(){if(1===arguments.length){var t=arguments[0];return t.getFactory().buildGeometry(bp.getLines(t))}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e.getFactory().buildGeometry(bp.getLines(e,n))}},bp.getLines=function(){if(1===arguments.length)return bp.getLines(arguments[0],!1);if(2===arguments.length){if(Lu(arguments[0],vc)&&Lu(arguments[1],vc)){for(var n=arguments[1],r=arguments[0].iterator();r.hasNext();){var i=r.next();bp.getLines(i,n)}return n}if(arguments[0]instanceof cc&&"boolean"==typeof arguments[1]){var o=arguments[0],s=arguments[1],a=new bc;return o.apply(new bp(a,s)),a}if(arguments[0]instanceof cc&&Lu(arguments[1],vc)){var u=arguments[0],c=arguments[1];return u instanceof Jc?c.add(u):u.apply(new bp(c)),c}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&Lu(arguments[0],vc)&&Lu(arguments[1],vc)){for(var l=arguments[1],p=arguments[2],f=arguments[0].iterator();f.hasNext();){var g=f.next();bp.getLines(g,l,p)}return l}if("boolean"==typeof arguments[2]&&arguments[0]instanceof cc&&Lu(arguments[1],vc)){var y=arguments[1],_=arguments[2];return arguments[0].apply(new bp(y,_)),y}}};function Ip(){if(this._boundaryRule=fc.OGC_SFS_BOUNDARY_RULE,this._isIn=null,this._numBoundaries=null,0!==arguments.length&&1===arguments.length){var t=arguments[0];if(null===t)throw new _u;this._boundaryRule=t}}Ip.prototype.locateInternal=function(){if(arguments[0]instanceof bu&&arguments[1]instanceof $c){var t=arguments[0],e=arguments[1];if(e.isEmpty())return Su.EXTERIOR;var n=e.getExteriorRing(),r=this.locateInPolygonRing(t,n);if(r===Su.EXTERIOR)return Su.EXTERIOR;if(r===Su.BOUNDARY)return Su.BOUNDARY;for(var i=0;i<e.getNumInteriorRing();i++){var o=e.getInteriorRingN(i),s=this.locateInPolygonRing(t,o);if(s===Su.INTERIOR)return Su.EXTERIOR;if(s===Su.BOUNDARY)return Su.BOUNDARY}return Su.INTERIOR}if(arguments[0]instanceof bu&&arguments[1]instanceof Jc){var a=arguments[0],u=arguments[1];if(!u.getEnvelopeInternal().intersects(a))return Su.EXTERIOR;var c=u.getCoordinates();return u.isClosed()||!a.equals(c[0])&&!a.equals(c[c.length-1])?sc.isOnLine(a,c)?Su.INTERIOR:Su.EXTERIOR:Su.BOUNDARY}if(arguments[0]instanceof bu&&arguments[1]instanceof Kc){var h=arguments[0];return arguments[1].getCoordinate().equals2D(h)?Su.INTERIOR:Su.EXTERIOR}},Ip.prototype.locateInPolygonRing=function(t,e){return e.getEnvelopeInternal().intersects(t)?sc.locatePointInRing(t,e.getCoordinates()):Su.EXTERIOR},Ip.prototype.intersects=function(t,e){return this.locate(t,e)!==Su.EXTERIOR},Ip.prototype.updateLocationInfo=function(t){t===Su.INTERIOR&&(this._isIn=!0),t===Su.BOUNDARY&&this._numBoundaries++},Ip.prototype.computeLocation=function(t,e){if(e instanceof Kc&&this.updateLocationInfo(this.locateInternal(t,e)),e instanceof Jc)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof $c)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof Xc)for(var n=e,r=0;r<n.getNumGeometries();r++){var i=n.getGeometryN(r);this.updateLocationInfo(this.locateInternal(t,i))}else if(e instanceof nh)for(var o=e,s=0;s<o.getNumGeometries();s++){var a=o.getGeometryN(s);this.updateLocationInfo(this.locateInternal(t,a))}else if(e instanceof jc)for(var u=new kl(e);u.hasNext();){var c=u.next();c!==e&&this.computeLocation(t,c)}},Ip.prototype.locate=function(t,e){return e.isEmpty()?Su.EXTERIOR:e instanceof Jc||e instanceof $c?this.locateInternal(t,e):(this._isIn=!1,this._numBoundaries=0,this.computeLocation(t,e),this._boundaryRule.isInBoundary(this._numBoundaries)?Su.BOUNDARY:0<this._numBoundaries||this._isIn?Su.INTERIOR:Su.EXTERIOR)},Ip.prototype.interfaces_=function(){return[]},Ip.prototype.getClass=function(){return Ip};function Np(){var r,i,o;this._component=null,this._segIndex=null,this._pt=null,2===arguments.length?Np.call(this,arguments[0],Np.INSIDE_AREA,arguments[1]):3===arguments.length&&(r=arguments[0],i=arguments[1],o=arguments[2],this._component=r,this._segIndex=i,this._pt=o)}var Cp={INSIDE_AREA:{configurable:!0}};Np.prototype.isInsideArea=function(){return this._segIndex===Np.INSIDE_AREA},Np.prototype.getCoordinate=function(){return this._pt},Np.prototype.getGeometryComponent=function(){return this._component},Np.prototype.getSegmentIndex=function(){return this._segIndex},Np.prototype.interfaces_=function(){return[]},Np.prototype.getClass=function(){return Np},Cp.INSIDE_AREA.get=function(){return-1},Object.defineProperties(Np,Cp);function Sp(t){this._pts=t||null}Sp.prototype.filter=function(t){t instanceof Kc&&this._pts.add(t)},Sp.prototype.interfaces_=function(){return[kc]},Sp.prototype.getClass=function(){return Sp},Sp.getPoints=function(){if(1===arguments.length){var t=arguments[0];return t instanceof Kc?$h.singletonList(t):Sp.getPoints(t,new bc)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e instanceof Kc?n.add(e):e instanceof jc&&e.apply(new Sp(n)),n}};function Mp(){this._locations=null;var t=arguments[0];this._locations=t}Mp.prototype.filter=function(t){(t instanceof Kc||t instanceof Jc||t instanceof $c)&&this._locations.add(new Np(t,0,t.getCoordinate()))},Mp.prototype.interfaces_=function(){return[kc]},Mp.prototype.getClass=function(){return Mp},Mp.getLocations=function(t){var e=new bc;return t.apply(new Mp(e)),e};function Lp(){var t,e,n,r,i;this._geom=null,this._terminateDistance=0,this._ptLocator=new Ip,this._minDistanceLocation=null,this._minDistance=mu.MAX_VALUE,2===arguments.length?(t=arguments[0],e=arguments[1],this._geom=[t,e],this._terminateDistance=0):3===arguments.length&&(n=arguments[0],r=arguments[1],i=arguments[2],this._geom=new Array(2).fill(null),this._geom[0]=n,this._geom[1]=r,this._terminateDistance=i)}Lp.prototype.computeContainmentDistance=function(){if(0===arguments.length){var t=new Array(2).fill(null);if(this.computeContainmentDistance(0,t),this._minDistance<=this._terminateDistance)return null;this.computeContainmentDistance(1,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],r=1-e,i=wp.getPolygons(this._geom[e]);if(0<i.size()){var o=Mp.getLocations(this._geom[r]);if(this.computeContainmentDistance(o,i,n),this._minDistance<=this._terminateDistance)return this._minDistanceLocation[r]=n[0],this._minDistanceLocation[e]=n[1],null}}else if(3===arguments.length)if(arguments[2]instanceof Array&&Lu(arguments[0],wc)&&Lu(arguments[1],wc)){for(var s=arguments[0],a=arguments[1],u=arguments[2],c=0;c<s.size();c++)for(var h=s.get(c),l=0;l<a.size();l++)if(this.computeContainmentDistance(h,a.get(l),u),this._minDistance<=this._terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof Np&&arguments[1]instanceof $c){var p=arguments[0],f=arguments[1],g=arguments[2],d=p.getCoordinate();if(Su.EXTERIOR!==this._ptLocator.locate(d,f))return g[this._minDistance=0]=p,g[1]=new Np(f,d),null}},Lp.prototype.computeMinDistanceLinesPoints=function(t,e,n){for(var r=0;r<t.size();r++)for(var i=t.get(r),o=0;o<e.size();o++){var s=e.get(o);if(this.computeMinDistance(i,s,n),this._minDistance<=this._terminateDistance)return null}},Lp.prototype.computeFacetDistance=function(){var t=new Array(2).fill(null),e=bp.getLines(this._geom[0]),n=bp.getLines(this._geom[1]),r=Sp.getPoints(this._geom[0]),i=Sp.getPoints(this._geom[1]);return this.computeMinDistanceLines(e,n,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(e,i,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(n,r,t),this.updateMinDistance(t,!0),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistancePoints(r,i,t),void this.updateMinDistance(t,!1))))},Lp.prototype.nearestLocations=function(){return this.computeMinDistance(),this._minDistanceLocation},Lp.prototype.updateMinDistance=function(t,e){if(null===t[0])return null;e?(this._minDistanceLocation[0]=t[1],this._minDistanceLocation[1]=t[0]):(this._minDistanceLocation[0]=t[0],this._minDistanceLocation[1]=t[1])},Lp.prototype.nearestPoints=function(){return this.computeMinDistance(),[this._minDistanceLocation[0].getCoordinate(),this._minDistanceLocation[1].getCoordinate()]},Lp.prototype.computeMinDistance=function(){if(0===arguments.length){if(null!==this._minDistanceLocation)return null;if(this._minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this._minDistance<=this._terminateDistance)return null;this.computeFacetDistance()}else if(3===arguments.length)if(arguments[2]instanceof Array&&arguments[0]instanceof Jc&&arguments[1]instanceof Kc){var t=arguments[0],e=arguments[1],n=arguments[2];if(t.getEnvelopeInternal().distance(e.getEnvelopeInternal())>this._minDistance)return null;for(var r=t.getCoordinates(),i=e.getCoordinate(),o=0;o<r.length-1;o++){var a,s=sc.distancePointLine(i,r[o],r[o+1]);if(s<this._minDistance&&(this._minDistance=s,a=new gl(r[o],r[o+1]).closestPoint(i),n[0]=new Np(t,o,a),n[1]=new Np(e,0,i)),this._minDistance<=this._terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof Jc&&arguments[1]instanceof Jc){var u=arguments[0],c=arguments[1],h=arguments[2];if(u.getEnvelopeInternal().distance(c.getEnvelopeInternal())>this._minDistance)return null;for(var l=u.getCoordinates(),p=c.getCoordinates(),f=0;f<l.length-1;f++)for(var g=0;g<p.length-1;g++){var y,_,m,d=sc.distanceLineLine(l[f],l[f+1],p[g],p[g+1]);if(d<this._minDistance&&(this._minDistance=d,y=new gl(l[f],l[f+1]),_=new gl(p[g],p[g+1]),m=y.closestPoints(_),h[0]=new Np(u,f,m[0]),h[1]=new Np(c,g,m[1])),this._minDistance<=this._terminateDistance)return null}}},Lp.prototype.computeMinDistancePoints=function(t,e,n){for(var r=0;r<t.size();r++)for(var i=t.get(r),o=0;o<e.size();o++){var s=e.get(o),a=i.getCoordinate().distance(s.getCoordinate());if(a<this._minDistance&&(this._minDistance=a,n[0]=new Np(i,0,i.getCoordinate()),n[1]=new Np(s,0,s.getCoordinate())),this._minDistance<=this._terminateDistance)return null}},Lp.prototype.distance=function(){if(null===this._geom[0]||null===this._geom[1])throw new _u;return this._geom[0].isEmpty()||this._geom[1].isEmpty()?0:(this.computeMinDistance(),this._minDistance)},Lp.prototype.computeMinDistanceLines=function(t,e,n){for(var r=0;r<t.size();r++)for(var i=t.get(r),o=0;o<e.size();o++){var s=e.get(o);if(this.computeMinDistance(i,s,n),this._minDistance<=this._terminateDistance)return null}},Lp.prototype.interfaces_=function(){return[]},Lp.prototype.getClass=function(){return Lp},Lp.distance=function(t,e){return new Lp(t,e).distance()},Lp.isWithinDistance=function(t,e,n){return new Lp(t,e,n).distance()<=n},Lp.nearestPoints=function(t,e){return new Lp(t,e).nearestPoints()};function Pp(){this._pt=[new bu,new bu],this._distance=mu.NaN,this._isNull=!0}Pp.prototype.getCoordinates=function(){return this._pt},Pp.prototype.getCoordinate=function(t){return this._pt[t]},Pp.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r<this._distance&&this.initialize(e,n,r)}},Pp.prototype.initialize=function(){var t,e,n,r,i;0===arguments.length?this._isNull=!0:2===arguments.length?(t=arguments[0],e=arguments[1],this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1):3===arguments.length&&(n=arguments[0],r=arguments[1],i=arguments[2],this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(r),this._distance=i,this._isNull=!1)},Pp.prototype.toString=function(){return Ku.toLineString(this._pt[0],this._pt[1])},Pp.prototype.getDistance=function(){return this._distance},Pp.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r>this._distance&&this.initialize(e,n,r)}},Pp.prototype.interfaces_=function(){return[]},Pp.prototype.getClass=function(){return Pp};function Op(){}Op.prototype.interfaces_=function(){return[]},Op.prototype.getClass=function(){return Op},Op.computeDistance=function(){if(arguments[2]instanceof Pp&&arguments[0]instanceof Jc&&arguments[1]instanceof bu)for(var t=arguments[0],e=arguments[1],n=arguments[2],r=new gl,i=t.getCoordinates(),o=0;o<i.length-1;o++){r.setCoordinates(i[o],i[o+1]);var s=r.closestPoint(e);n.setMinimum(s,e)}else if(arguments[2]instanceof Pp&&arguments[0]instanceof $c&&arguments[1]instanceof bu){var a=arguments[0],u=arguments[1],c=arguments[2];Op.computeDistance(a.getExteriorRing(),u,c);for(var h=0;h<a.getNumInteriorRing();h++)Op.computeDistance(a.getInteriorRingN(h),u,c)}else if(arguments[2]instanceof Pp&&arguments[0]instanceof cc&&arguments[1]instanceof bu){var l=arguments[0],p=arguments[1],f=arguments[2];if(l instanceof Jc)Op.computeDistance(l,p,f);else if(l instanceof $c)Op.computeDistance(l,p,f);else if(l instanceof jc)for(var g=l,d=0;d<g.getNumGeometries();d++){var y=g.getGeometryN(d);Op.computeDistance(y,p,f)}else f.setMinimum(l.getCoordinate(),p)}else{var m,v,x;arguments[2]instanceof Pp&&arguments[0]instanceof gl&&arguments[1]instanceof bu&&(m=arguments[1],v=arguments[2],x=arguments[0].closestPoint(m),v.setMinimum(x,m))}};function Rp(){this._g0=null,this._g1=null,this._ptDist=new Pp;var t=arguments[this._densifyFrac=0],e=arguments[1];this._g0=t,this._g1=e}var Tp={MaxPointDistanceFilter:{configurable:!0},MaxDensifiedByFractionDistanceFilter:{configurable:!0}};Rp.prototype.getCoordinates=function(){return this._ptDist.getCoordinates()},Rp.prototype.setDensifyFraction=function(t){if(1<t||t<=0)throw new _u;this._densifyFrac=t},Rp.prototype.compute=function(t,e){this.computeOrientedDistance(t,e,this._ptDist),this.computeOrientedDistance(e,t,this._ptDist)},Rp.prototype.distance=function(){return this.compute(this._g0,this._g1),this._ptDist.getDistance()},Rp.prototype.computeOrientedDistance=function(t,e,n){var i,r=new Ap(e);t.apply(r),n.setMaximum(r.getMaxPointDistance()),0<this._densifyFrac&&(i=new Dp(e,this._densifyFrac),t.apply(i),n.setMaximum(i.getMaxPointDistance()))},Rp.prototype.orientedDistance=function(){return this.computeOrientedDistance(this._g0,this._g1,this._ptDist),this._ptDist.getDistance()},Rp.prototype.interfaces_=function(){return[]},Rp.prototype.getClass=function(){return Rp},Rp.distance=function(){if(2===arguments.length)return new Rp(arguments[0],arguments[1]).distance();if(3===arguments.length){var i=arguments[2],o=new Rp(arguments[0],arguments[1]);return o.setDensifyFraction(i),o.distance()}},Tp.MaxPointDistanceFilter.get=function(){return Ap},Tp.MaxDensifiedByFractionDistanceFilter.get=function(){return Dp},Object.defineProperties(Rp,Tp);var Ap=function(){this._maxPtDist=new Pp,this._minPtDist=new Pp,this._euclideanDist=new Op,this._geom=null;var t=arguments[0];this._geom=t};Ap.prototype.filter=function(t){this._minPtDist.initialize(),Op.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Ap.prototype.getMaxPointDistance=function(){return this._maxPtDist},Ap.prototype.interfaces_=function(){return[pc]},Ap.prototype.getClass=function(){return Ap};var Dp=function(){this._maxPtDist=new Pp,this._minPtDist=new Pp,this._geom=null;var t=arguments[this._numSubSegs=0],e=arguments[1];this._geom=t,this._numSubSegs=Math.trunc(Math.round(1/e))};Dp.prototype.filter=function(t,e){if(0===e)return null;for(var n=t.getCoordinate(e-1),r=t.getCoordinate(e),i=(r.x-n.x)/this._numSubSegs,o=(r.y-n.y)/this._numSubSegs,s=0;s<this._numSubSegs;s++){var a=n.x+s*i,u=n.y+s*o,c=new bu(a,u);this._minPtDist.initialize(),Op.computeDistance(this._geom,c,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)}},Dp.prototype.isDone=function(){return!1},Dp.prototype.isGeometryChanged=function(){return!1},Dp.prototype.getMaxPointDistance=function(){return this._maxPtDist},Dp.prototype.interfaces_=function(){return[zc]},Dp.prototype.getClass=function(){return Dp};function Fp(t,e,n){this._minValidDistance=null,this._maxValidDistance=null,this._minDistanceFound=null,this._maxDistanceFound=null,this._isValid=!0,this._errMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._bufDistance=e||null,this._result=n||null}var qp={VERBOSE:{configurable:!0},MAX_DISTANCE_DIFF_FRAC:{configurable:!0}};Fp.prototype.checkMaximumDistance=function(t,e,n){var i,r=new Rp(e,t);r.setDensifyFraction(.25),this._maxDistanceFound=r.orientedDistance(),this._maxDistanceFound>n&&(this._isValid=!1,i=r.getCoordinates(),this._errorLocation=i[1],this._errorIndicator=t.getFactory().createLineString(i),this._errMsg="Distance between buffer curve and input is too large ("+this._maxDistanceFound+" at "+Ku.toLineString(i[0],i[1])+")")},Fp.prototype.isValid=function(){var t=Math.abs(this._bufDistance),e=Fp.MAX_DISTANCE_DIFF_FRAC*t;return this._minValidDistance=t-e,this._maxValidDistance=t+e,!(!this._input.isEmpty()&&!this._result.isEmpty())||(0<this._bufDistance?this.checkPositiveValid():this.checkNegativeValid(),Fp.VERBOSE&&Xu.out.println("Min Dist= "+this._minDistanceFound+"  err= "+(1-this._minDistanceFound/this._bufDistance)+"  Max Dist= "+this._maxDistanceFound+"  err= "+(this._maxDistanceFound/this._bufDistance-1)),this._isValid)},Fp.prototype.checkNegativeValid=function(){if(!(this._input instanceof $c||this._input instanceof nh||this._input instanceof jc))return null;var t=this.getPolygonLines(this._input);if(this.checkMinimumDistance(t,this._result,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(t,this._result,this._maxValidDistance)},Fp.prototype.getErrorIndicator=function(){return this._errorIndicator},Fp.prototype.checkMinimumDistance=function(t,e,n){var i,r=new Lp(t,e,n);this._minDistanceFound=r.distance(),this._minDistanceFound<n&&(this._isValid=!1,i=r.nearestPoints(),this._errorLocation=r.nearestPoints()[1],this._errorIndicator=t.getFactory().createLineString(i),this._errMsg="Distance between buffer curve and input is too small ("+this._minDistanceFound+" at "+Ku.toLineString(i[0],i[1])+" )")},Fp.prototype.checkPositiveValid=function(){var t=this._result.getBoundary();if(this.checkMinimumDistance(this._input,t,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(this._input,t,this._maxValidDistance)},Fp.prototype.getErrorLocation=function(){return this._errorLocation},Fp.prototype.getPolygonLines=function(t){for(var e=new bc,n=new bp(e),r=wp.getPolygons(t).iterator();r.hasNext();)r.next().apply(n);return t.getFactory().buildGeometry(e)},Fp.prototype.getErrorMessage=function(){return this._errMsg},Fp.prototype.interfaces_=function(){return[]},Fp.prototype.getClass=function(){return Fp},qp.VERBOSE.get=function(){return!1},qp.MAX_DISTANCE_DIFF_FRAC.get=function(){return.012},Object.defineProperties(Fp,qp);function Gp(t,e,n){this._isValid=!0,this._errorMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._distance=e||null,this._result=n||null}var Bp={VERBOSE:{configurable:!0},MAX_ENV_DIFF_FRAC:{configurable:!0}};Gp.prototype.isValid=function(){return this.checkPolygonal(),this._isValid&&(this.checkExpectedEmpty(),this._isValid&&(this.checkEnvelope(),this._isValid&&(this.checkArea(),this._isValid&&this.checkDistance()))),this._isValid},Gp.prototype.checkEnvelope=function(){if(this._distance<0)return null;var t=this._distance*Gp.MAX_ENV_DIFF_FRAC;0===t&&(t=.001);var e=new Yu(this._input.getEnvelopeInternal());e.expandBy(this._distance);var n=new Yu(this._result.getEnvelopeInternal());n.expandBy(t),n.contains(e)||(this._isValid=!1,this._errorMsg="Buffer envelope is incorrect",this._errorIndicator=this._input.getFactory().toGeometry(n)),this.report("Envelope")},Gp.prototype.checkDistance=function(){var t=new Fp(this._input,this._distance,this._result);t.isValid()||(this._isValid=!1,this._errorMsg=t.getErrorMessage(),this._errorLocation=t.getErrorLocation(),this._errorIndicator=t.getErrorIndicator()),this.report("Distance")},Gp.prototype.checkArea=function(){var t=this._input.getArea(),e=this._result.getArea();0<this._distance&&e<t&&(this._isValid=!1,this._errorMsg="Area of positive buffer is smaller than input",this._errorIndicator=this._result),this._distance<0&&t<e&&(this._isValid=!1,this._errorMsg="Area of negative buffer is larger than input",this._errorIndicator=this._result),this.report("Area")},Gp.prototype.checkPolygonal=function(){this._result instanceof $c||this._result instanceof nh||(this._isValid=!1),this._errorMsg="Result is not polygonal",this._errorIndicator=this._result,this.report("Polygonal")},Gp.prototype.getErrorIndicator=function(){return this._errorIndicator},Gp.prototype.getErrorLocation=function(){return this._errorLocation},Gp.prototype.checkExpectedEmpty=function(){return 2<=this._input.getDimension()||0<this._distance?null:(this._result.isEmpty()||(this._isValid=!1,this._errorMsg="Result is non-empty",this._errorIndicator=this._result),void this.report("ExpectedEmpty"))},Gp.prototype.report=function(t){if(!Gp.VERBOSE)return null;Xu.out.println("Check "+t+": "+(this._isValid?"passed":"FAILED"))},Gp.prototype.getErrorMessage=function(){return this._errorMsg},Gp.prototype.interfaces_=function(){return[]},Gp.prototype.getClass=function(){return Gp},Gp.isValidMsg=function(t,e,n){var r=new Gp(t,e,n);return r.isValid()?null:r.getErrorMessage()},Gp.isValid=function(t,e,n){return!!new Gp(t,e,n).isValid()},Bp.VERBOSE.get=function(){return!1},Bp.MAX_ENV_DIFF_FRAC.get=function(){return.012},Object.defineProperties(Gp,Bp);function kp(){this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e}kp.prototype.getCoordinates=function(){return this._pts},kp.prototype.size=function(){return this._pts.length},kp.prototype.getCoordinate=function(t){return this._pts[t]},kp.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},kp.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:hl.octant(this.getCoordinate(t),this.getCoordinate(t+1))},kp.prototype.setData=function(t){this._data=t},kp.prototype.getData=function(){return this._data},kp.prototype.toString=function(){return Ku.toLineString(new uh(this._pts))},kp.prototype.interfaces_=function(){return[ll]},kp.prototype.getClass=function(){return kp};function zp(){this._findAllIntersections=!1,this._isCheckEndSegmentsOnly=!1,this._li=null,this._interiorIntersection=null,this._intSegments=null,this._intersections=new bc,this._intersectionCount=0,this._keepIntersections=!0;var t=arguments[0];this._li=t,this._interiorIntersection=null}zp.prototype.getInteriorIntersection=function(){return this._interiorIntersection},zp.prototype.setCheckEndSegmentsOnly=function(t){this._isCheckEndSegmentsOnly=t},zp.prototype.getIntersectionSegments=function(){return this._intSegments},zp.prototype.count=function(){return this._intersectionCount},zp.prototype.getIntersections=function(){return this._intersections},zp.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},zp.prototype.setKeepIntersections=function(t){this._keepIntersections=t},zp.prototype.processIntersections=function(t,e,n,r){if(!this._findAllIntersections&&this.hasIntersection())return null;if(t===n&&e===r)return null;if(this._isCheckEndSegmentsOnly&&!this.isEndSegment(t,e)&&!this.isEndSegment(n,r))return null;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[r],a=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,s,a),this._li.hasIntersection()&&this._li.isInteriorIntersection()&&(this._intSegments=new Array(4).fill(null),this._intSegments[0]=i,this._intSegments[1]=o,this._intSegments[2]=s,this._intSegments[3]=a,this._interiorIntersection=this._li.getIntersection(0),this._keepIntersections&&this._intersections.add(this._interiorIntersection),this._intersectionCount++)},zp.prototype.isEndSegment=function(t,e){return 0===e||e>=t.size()-2},zp.prototype.hasIntersection=function(){return null!==this._interiorIntersection},zp.prototype.isDone=function(){return!this._findAllIntersections&&null!==this._interiorIntersection},zp.prototype.interfaces_=function(){return[Hl]},zp.prototype.getClass=function(){return zp},zp.createAllIntersectionsFinder=function(t){var e=new zp(t);return e.setFindAllIntersections(!0),e},zp.createAnyIntersectionFinder=function(t){return new zp(t)},zp.createIntersectionCounter=function(t){var e=new zp(t);return e.setFindAllIntersections(!0),e.setKeepIntersections(!1),e};function jp(){this._li=new rc,this._segStrings=null,this._findAllIntersections=!1,this._segInt=null,this._isValid=!0;var t=arguments[0];this._segStrings=t}jp.prototype.execute=function(){if(null!==this._segInt)return null;this.checkInteriorIntersections()},jp.prototype.getIntersections=function(){return this._segInt.getIntersections()},jp.prototype.isValid=function(){return this.execute(),this._isValid},jp.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},jp.prototype.checkInteriorIntersections=function(){this._isValid=!0,this._segInt=new zp(this._li),this._segInt.setFindAllIntersections(this._findAllIntersections);var t=new El;if(t.setSegmentIntersector(this._segInt),t.computeNodes(this._segStrings),this._segInt.hasIntersection())return this._isValid=!1,null},jp.prototype.checkValid=function(){if(this.execute(),!this._isValid)throw new Mh(this.getErrorMessage(),this._segInt.getInteriorIntersection())},jp.prototype.getErrorMessage=function(){if(this._isValid)return"no intersections found";var t=this._segInt.getIntersectionSegments();return"found non-noded intersection between "+Ku.toLineString(t[0],t[1])+" and "+Ku.toLineString(t[2],t[3])},jp.prototype.interfaces_=function(){return[]},jp.prototype.getClass=function(){return jp},jp.computeIntersections=function(t){var e=new jp(t);return e.setFindAllIntersections(!0),e.isValid(),e.getIntersections()};function Xp(){this._nv=null;var e=arguments[0];this._nv=new jp(Xp.toSegmentStrings(e))}Xp.prototype.checkValid=function(){this._nv.checkValid()},Xp.prototype.interfaces_=function(){return[]},Xp.prototype.getClass=function(){return Xp},Xp.toSegmentStrings=function(t){for(var e=new bc,n=t.iterator();n.hasNext();){var r=n.next();e.add(new kp(r.getCoordinates(),r))}return e},Xp.checkValid=function(t){new Xp(t).checkValid()};function Up(t){this._mapOp=t}Up.prototype.map=function(t){for(var e=new bc,n=0;n<t.getNumGeometries();n++){var r=this._mapOp.map(t.getGeometryN(n));r.isEmpty()||e.add(r)}return t.getFactory().createGeometryCollection(_h.toGeometryArray(e))},Up.prototype.interfaces_=function(){return[]},Up.prototype.getClass=function(){return Up},Up.map=function(t,e){return new Up(e).map(t)};function Yp(){this._op=null,this._geometryFactory=null,this._ptLocator=null,this._lineEdgesList=new bc,this._resultLineList=new bc;var t=arguments[0],e=arguments[1],n=arguments[2];this._op=t,this._geometryFactory=e,this._ptLocator=n}Yp.prototype.collectLines=function(t){for(var e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){var n=e.next();this.collectLineEdge(n,t,this._lineEdgesList),this.collectBoundaryTouchEdge(n,t,this._lineEdgesList)}},Yp.prototype.labelIsolatedLine=function(t,e){var n=this._ptLocator.locate(t.getCoordinate(),this._op.getArgGeometry(e));t.getLabel().setLocation(e,n)},Yp.prototype.build=function(t){return this.findCoveredLineEdges(),this.collectLines(t),this.buildLines(t),this._resultLineList},Yp.prototype.collectLineEdge=function(t,e,n){var r=t.getLabel(),i=t.getEdge();t.isLineEdge()&&(t.isVisited()||!Cf.isResultOfOp(r,e)||i.isCovered()||(n.add(i),t.setVisitedEdge(!0)))},Yp.prototype.findCoveredLineEdges=function(){for(var t=this._op.getGraph().getNodes().iterator();t.hasNext();)t.next().getEdges().findCoveredLineEdges();for(var e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){var i,n=e.next(),r=n.getEdge();n.isLineEdge()&&!r.isCoveredSet()&&(i=this._op.isCoveredByA(n.getCoordinate()),r.setCovered(i))}},Yp.prototype.labelIsolatedLines=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),r=n.getLabel();n.isIsolated()&&(r.isNull(0)?this.labelIsolatedLine(n,0):this.labelIsolatedLine(n,1))}},Yp.prototype.buildLines=function(t){for(var e=this._lineEdgesList.iterator();e.hasNext();){var n=e.next(),r=this._geometryFactory.createLineString(n.getCoordinates());this._resultLineList.add(r),n.setInResult(!0)}},Yp.prototype.collectBoundaryTouchEdge=function(t,e,n){var r=t.getLabel();return t.isLineEdge()||t.isVisited()||t.isInteriorAreaEdge()||t.getEdge().isInResult()?null:(tc.isTrue(!(t.isInResult()||t.getSym().isInResult())||!t.getEdge().isInResult()),void(Cf.isResultOfOp(r,e)&&e===Cf.INTERSECTION&&(n.add(t.getEdge()),t.setVisitedEdge(!0))))},Yp.prototype.interfaces_=function(){return[]},Yp.prototype.getClass=function(){return Yp};function Vp(){this._op=null,this._geometryFactory=null,this._resultPointList=new bc;var t=arguments[0],e=arguments[1];this._op=t,this._geometryFactory=e}Vp.prototype.filterCoveredNodeToPoint=function(t){var n,e=t.getCoordinate();this._op.isCoveredByLA(e)||(n=this._geometryFactory.createPoint(e),this._resultPointList.add(n))},Vp.prototype.extractNonCoveredResultNodes=function(t){for(var e=this._op.getGraph().getNodes().iterator();e.hasNext();){var r,n=e.next();n.isInResult()||n.isIncidentEdgeInResult()||0!==n.getEdges().getDegree()&&t!==Cf.INTERSECTION||(r=n.getLabel(),Cf.isResultOfOp(r,t)&&this.filterCoveredNodeToPoint(n))}},Vp.prototype.build=function(t){return this.extractNonCoveredResultNodes(t),this._resultPointList},Vp.prototype.interfaces_=function(){return[]},Vp.prototype.getClass=function(){return Vp};function Hp(){this._inputGeom=null,this._factory=null,this._pruneEmptyGeometry=!0,this._preserveGeometryCollectionType=!0,this._preserveCollections=!1,this._preserveType=!1}Hp.prototype.transformPoint=function(t,e){return this._factory.createPoint(this.transformCoordinates(t.getCoordinateSequence(),t))},Hp.prototype.transformPolygon=function(t,e){var n=!0,r=this.transformLinearRing(t.getExteriorRing(),t);null!==r&&r instanceof eh&&!r.isEmpty()||(n=!1);for(var i=new bc,o=0;o<t.getNumInteriorRing();o++){var s=this.transformLinearRing(t.getInteriorRingN(o),t);null===s||s.isEmpty()||(s instanceof eh||(n=!1),i.add(s))}if(n)return this._factory.createPolygon(r,i.toArray([]));var a=new bc;return null!==r&&a.add(r),a.addAll(i),this._factory.buildGeometry(a)},Hp.prototype.createCoordinateSequence=function(t){return this._factory.getCoordinateSequenceFactory().create(t)},Hp.prototype.getInputGeometry=function(){return this._inputGeom},Hp.prototype.transformMultiLineString=function(t,e){for(var n=new bc,r=0;r<t.getNumGeometries();r++){var i=this.transformLineString(t.getGeometryN(r),t);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},Hp.prototype.transformCoordinates=function(t,e){return this.copy(t)},Hp.prototype.transformLineString=function(t,e){return this._factory.createLineString(this.transformCoordinates(t.getCoordinateSequence(),t))},Hp.prototype.transformMultiPoint=function(t,e){for(var n=new bc,r=0;r<t.getNumGeometries();r++){var i=this.transformPoint(t.getGeometryN(r),t);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},Hp.prototype.transformMultiPolygon=function(t,e){for(var n=new bc,r=0;r<t.getNumGeometries();r++){var i=this.transformPolygon(t.getGeometryN(r),t);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},Hp.prototype.copy=function(t){return t.copy()},Hp.prototype.transformGeometryCollection=function(t,e){for(var n=new bc,r=0;r<t.getNumGeometries();r++){var i=this.transform(t.getGeometryN(r));null!==i&&(this._pruneEmptyGeometry&&i.isEmpty()||n.add(i))}return this._preserveGeometryCollectionType?this._factory.createGeometryCollection(_h.toGeometryArray(n)):this._factory.buildGeometry(n)},Hp.prototype.transform=function(t){if(this._inputGeom=t,this._factory=t.getFactory(),t instanceof Kc)return this.transformPoint(t,null);if(t instanceof th)return this.transformMultiPoint(t,null);if(t instanceof eh)return this.transformLinearRing(t,null);if(t instanceof Jc)return this.transformLineString(t,null);if(t instanceof Xc)return this.transformMultiLineString(t,null);if(t instanceof $c)return this.transformPolygon(t,null);if(t instanceof nh)return this.transformMultiPolygon(t,null);if(t instanceof jc)return this.transformGeometryCollection(t,null);throw new _u(t.getClass().getName())},Hp.prototype.transformLinearRing=function(t,e){var n=this.transformCoordinates(t.getCoordinateSequence(),t);if(null===n)return this._factory.createLinearRing(null);var r=n.size();return 0<r&&r<4&&!this._preserveType?this._factory.createLineString(n):this._factory.createLinearRing(n)},Hp.prototype.interfaces_=function(){return[]},Hp.prototype.getClass=function(){return Hp};function Wp(){var n,r,i;this._snapTolerance=0,this._srcPts=null,this._seg=new gl,this._allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof Jc&&"number"==typeof arguments[1]?(n=arguments[1],Wp.call(this,arguments[0].getCoordinates(),n)):arguments[0]instanceof Array&&"number"==typeof arguments[1]&&(r=arguments[0],i=arguments[1],this._srcPts=r,this._isClosed=Wp.isClosed(r),this._snapTolerance=i)}Wp.prototype.snapVertices=function(t,e){for(var n=this._isClosed?t.size()-1:t.size(),r=0;r<n;r++){var i=t.get(r),o=this.findSnapForVertex(i,e);null!==o&&(t.set(r,new bu(o)),0===r&&this._isClosed&&t.set(t.size()-1,new bu(o)))}},Wp.prototype.findSnapForVertex=function(t,e){for(var n=0;n<e.length;n++){if(t.equals2D(e[n]))return null;if(t.distance(e[n])<this._snapTolerance)return e[n]}return null},Wp.prototype.snapTo=function(t){var e=new Nc(this._srcPts);return this.snapVertices(e,t),this.snapSegments(e,t),e.toCoordinateArray()},Wp.prototype.snapSegments=function(t,e){if(0===e.length)return null;var n=e.length;e[0].equals2D(e[e.length-1])&&(n=e.length-1);for(var r=0;r<n;r++){var i=e[r],o=this.findSegmentIndexToSnap(i,t);0<=o&&t.add(o+1,new bu(i),!1)}},Wp.prototype.findSegmentIndexToSnap=function(t,e){for(var n=mu.MAX_VALUE,r=-1,i=0;i<e.size()-1;i++){if(this._seg.p0=e.get(i),this._seg.p1=e.get(i+1),this._seg.p0.equals2D(t)||this._seg.p1.equals2D(t)){if(this._allowSnappingToSourceVertices)continue;return-1}var o=this._seg.distance(t);o<this._snapTolerance&&o<n&&(n=o,r=i)}return r},Wp.prototype.setAllowSnappingToSourceVertices=function(t){this._allowSnappingToSourceVertices=t},Wp.prototype.interfaces_=function(){return[]},Wp.prototype.getClass=function(){return Wp},Wp.isClosed=function(t){return!(t.length<=1)&&t[0].equals2D(t[t.length-1])};function Jp(t){this._srcGeom=t||null}var Zp={SNAP_PRECISION_FACTOR:{configurable:!0}};Jp.prototype.snapTo=function(t,e){var n=this.extractTargetCoordinates(t);return new Kp(e,n).transform(this._srcGeom)},Jp.prototype.snapToSelf=function(t,e){var n=this.extractTargetCoordinates(this._srcGeom),r=new Kp(t,n,!0).transform(this._srcGeom),i=r;return e&&Lu(i,Qc)&&(i=r.buffer(0)),i},Jp.prototype.computeSnapTolerance=function(t){return this.computeMinimumSegmentLength(t)/10},Jp.prototype.extractTargetCoordinates=function(t){for(var e=new ki,n=t.getCoordinates(),r=0;r<n.length;r++)e.add(n[r]);return e.toArray(new Array(0).fill(null))},Jp.prototype.computeMinimumSegmentLength=function(t){for(var e=mu.MAX_VALUE,n=0;n<t.length-1;n++){var r=t[n].distance(t[n+1]);r<e&&(e=r)}return e},Jp.prototype.interfaces_=function(){return[]},Jp.prototype.getClass=function(){return Jp},Jp.snap=function(t,e,n){var r=new Array(2).fill(null),i=new Jp(t);r[0]=i.snapTo(e,n);var o=new Jp(e);return r[1]=o.snapTo(r[0],n),r},Jp.computeOverlaySnapTolerance=function(){if(1===arguments.length){var r,t=arguments[0],e=Jp.computeSizeBasedSnapTolerance(t),n=t.getPrecisionModel();return n.getType()!==fh.FIXED||e<(r=1/n.getScale()*2/1.415)&&(e=r),e}if(2===arguments.length){var i=arguments[0],o=arguments[1];return Math.min(Jp.computeOverlaySnapTolerance(i),Jp.computeOverlaySnapTolerance(o))}},Jp.computeSizeBasedSnapTolerance=function(t){var e=t.getEnvelopeInternal();return Math.min(e.getHeight(),e.getWidth())*Jp.SNAP_PRECISION_FACTOR},Jp.snapToSelf=function(t,e,n){return new Jp(t).snapToSelf(e,n)},Zp.SNAP_PRECISION_FACTOR.get=function(){return 1e-9},Object.defineProperties(Jp,Zp);function Qp(){this._isFirst=!0,this._commonMantissaBitsCount=53,this._commonBits=0,this._commonSignExp=null}var Kp=function(t){function e(e,n,r){t.call(this),this._snapTolerance=e||null,this._snapPts=n||null,this._isSelfSnap=void 0!==r&&r}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.snapLine=function(t,e){var n=new Wp(t,this._snapTolerance);return n.setAllowSnappingToSourceVertices(this._isSelfSnap),n.snapTo(e)},e.prototype.transformCoordinates=function(t,e){var n=t.toCoordinateArray(),r=this.snapLine(n,this._snapPts);return this._factory.getCoordinateSequenceFactory().create(r)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Hp);Qp.prototype.getCommon=function(){return mu.longBitsToDouble(this._commonBits)},Qp.prototype.add=function(t){var e=mu.doubleToLongBits(t);return this._isFirst?(this._commonBits=e,this._commonSignExp=Qp.signExpBits(this._commonBits),this._isFirst=!1,null):Qp.signExpBits(e)!==this._commonSignExp?(this._commonBits=0,null):(this._commonMantissaBitsCount=Qp.numCommonMostSigMantissaBits(this._commonBits,e),void(this._commonBits=Qp.zeroLowerBits(this._commonBits,64-(12+this._commonMantissaBitsCount))))},Qp.prototype.toString=function(){if(1===arguments.length){var t=arguments[0],e=mu.longBitsToDouble(t),n="0000000000000000000000000000000000000000000000000000000000000000"+mu.toBinaryString(t),r=n.substring(n.length-64);return r.substring(0,1)+"  "+r.substring(1,12)+"(exp) "+r.substring(12)+" [ "+e+" ]"}},Qp.prototype.interfaces_=function(){return[]},Qp.prototype.getClass=function(){return Qp},Qp.getBit=function(t,e){return 0!=(t&1<<e)?1:0},Qp.signExpBits=function(t){return t>>52},Qp.zeroLowerBits=function(t,e){return t&~((1<<e)-1)},Qp.numCommonMostSigMantissaBits=function(t,e){for(var n=0,r=52;0<=r;r--){if(Qp.getBit(t,r)!==Qp.getBit(e,r))return n;n++}return 52};function $p(){this._commonCoord=null,this._ccFilter=new ef}var tf={CommonCoordinateFilter:{configurable:!0},Translater:{configurable:!0}};$p.prototype.addCommonBits=function(t){var e=new nf(this._commonCoord);t.apply(e),t.geometryChanged()},$p.prototype.removeCommonBits=function(t){if(0===this._commonCoord.x&&0===this._commonCoord.y)return t;var e=new bu(this._commonCoord);e.x=-e.x,e.y=-e.y;var n=new nf(e);return t.apply(n),t.geometryChanged(),t},$p.prototype.getCommonCoordinate=function(){return this._commonCoord},$p.prototype.add=function(t){t.apply(this._ccFilter),this._commonCoord=this._ccFilter.getCommonCoordinate()},$p.prototype.interfaces_=function(){return[]},$p.prototype.getClass=function(){return $p},tf.CommonCoordinateFilter.get=function(){return ef},tf.Translater.get=function(){return nf},Object.defineProperties($p,tf);var ef=function(){this._commonBitsX=new Qp,this._commonBitsY=new Qp};ef.prototype.filter=function(t){this._commonBitsX.add(t.x),this._commonBitsY.add(t.y)},ef.prototype.getCommonCoordinate=function(){return new bu(this._commonBitsX.getCommon(),this._commonBitsY.getCommon())},ef.prototype.interfaces_=function(){return[pc]},ef.prototype.getClass=function(){return ef};var nf=function(){this.trans=null;var t=arguments[0];this.trans=t};nf.prototype.filter=function(t,e){var n=t.getOrdinate(e,0)+this.trans.x,r=t.getOrdinate(e,1)+this.trans.y;t.setOrdinate(e,0,n),t.setOrdinate(e,1,r)},nf.prototype.isDone=function(){return!1},nf.prototype.isGeometryChanged=function(){return!0},nf.prototype.interfaces_=function(){return[zc]},nf.prototype.getClass=function(){return nf};function rf(t,e){this._geom=new Array(2).fill(null),this._snapTolerance=null,this._cbr=null,this._geom[0]=t,this._geom[1]=e,this.computeSnapTolerance()}rf.prototype.selfSnap=function(t){return new Jp(t).snapTo(t,this._snapTolerance)},rf.prototype.removeCommonBits=function(t){this._cbr=new $p,this._cbr.add(t[0]),this._cbr.add(t[1]);var e=new Array(2).fill(null);return e[0]=this._cbr.removeCommonBits(t[0].copy()),e[1]=this._cbr.removeCommonBits(t[1].copy()),e},rf.prototype.prepareResult=function(t){return this._cbr.addCommonBits(t),t},rf.prototype.getResultGeometry=function(t){var e=this.snap(this._geom),n=Cf.overlayOp(e[0],e[1],t);return this.prepareResult(n)},rf.prototype.checkValid=function(t){t.isValid()||Xu.out.println("Snapped geometry is invalid")},rf.prototype.computeSnapTolerance=function(){this._snapTolerance=Jp.computeOverlaySnapTolerance(this._geom[0],this._geom[1])},rf.prototype.snap=function(t){var e=this.removeCommonBits(t);return Jp.snap(e[0],e[1],this._snapTolerance)},rf.prototype.interfaces_=function(){return[]},rf.prototype.getClass=function(){return rf},rf.overlayOp=function(t,e,n){return new rf(t,e).getResultGeometry(n)},rf.union=function(t,e){return rf.overlayOp(t,e,Cf.UNION)},rf.intersection=function(t,e){return rf.overlayOp(t,e,Cf.INTERSECTION)},rf.symDifference=function(t,e){return rf.overlayOp(t,e,Cf.SYMDIFFERENCE)},rf.difference=function(t,e){return rf.overlayOp(t,e,Cf.DIFFERENCE)};function of(t,e){this._geom=new Array(2).fill(null),this._geom[0]=t,this._geom[1]=e}of.prototype.getResultGeometry=function(t){var e=null,n=!1,r=null;try{e=Cf.overlayOp(this._geom[0],this._geom[1],t),n=!0}catch(t){if(!(t instanceof Qu))throw t;r=t}if(!n)try{e=rf.overlayOp(this._geom[0],this._geom[1],t)}catch(t){throw t instanceof Qu?r:t}return e},of.prototype.interfaces_=function(){return[]},of.prototype.getClass=function(){return of},of.overlayOp=function(t,e,n){return new of(t,e).getResultGeometry(n)},of.union=function(t,e){return of.overlayOp(t,e,Cf.UNION)},of.intersection=function(t,e){return of.overlayOp(t,e,Cf.INTERSECTION)},of.symDifference=function(t,e){return of.overlayOp(t,e,Cf.SYMDIFFERENCE)},of.difference=function(t,e){return of.overlayOp(t,e,Cf.DIFFERENCE)};function sf(){this.mce=null,this.chainIndex=null;var t=arguments[0],e=arguments[1];this.mce=t,this.chainIndex=e}sf.prototype.computeIntersections=function(t,e){this.mce.computeIntersectsForChain(this.chainIndex,t.mce,t.chainIndex,e)},sf.prototype.interfaces_=function(){return[]},sf.prototype.getClass=function(){return sf};function af(){var e,n,r,i,o;this._label=null,this._xValue=null,this._eventType=null,this._insertEvent=null,this._deleteEventIndex=null,this._obj=null,2===arguments.length?(e=arguments[0],n=arguments[1],this._eventType=af.DELETE,this._xValue=e,this._insertEvent=n):3===arguments.length&&(r=arguments[0],i=arguments[1],o=arguments[2],this._eventType=af.INSERT,this._label=r,this._xValue=i,this._obj=o)}var uf={INSERT:{configurable:!0},DELETE:{configurable:!0}};af.prototype.isDelete=function(){return this._eventType===af.DELETE},af.prototype.setDeleteEventIndex=function(t){this._deleteEventIndex=t},af.prototype.getObject=function(){return this._obj},af.prototype.compareTo=function(t){return this._xValue<t._xValue?-1:this._xValue>t._xValue?1:this._eventType<t._eventType?-1:this._eventType>t._eventType?1:0},af.prototype.getInsertEvent=function(){return this._insertEvent},af.prototype.isInsert=function(){return this._eventType===af.INSERT},af.prototype.isSameLabel=function(t){return null!==this._label&&this._label===t._label},af.prototype.getDeleteEventIndex=function(){return this._deleteEventIndex},af.prototype.interfaces_=function(){return[xu]},af.prototype.getClass=function(){return af},uf.INSERT.get=function(){return 1},uf.DELETE.get=function(){return 2},Object.defineProperties(af,uf);function cf(){}cf.prototype.interfaces_=function(){return[]},cf.prototype.getClass=function(){return cf};function hf(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._properIntersectionPoint=null,this._li=null,this._includeProper=null,this._recordIsolated=null,this._isSelfIntersection=null,this._numIntersections=0,this.numTests=0,this._bdyNodes=null,this._isDone=!1,this._isDoneWhenProperInt=!1;var t=arguments[0],e=arguments[1],n=arguments[2];this._li=t,this._includeProper=e,this._recordIsolated=n}hf.prototype.isTrivialIntersection=function(t,e,n,r){if(t===n&&1===this._li.getIntersectionNum()){if(hf.isAdjacentSegments(e,r))return!0;if(t.isClosed()){var i=t.getNumPoints()-1;if(0===e&&r===i||0===r&&e===i)return!0}}return!1},hf.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},hf.prototype.setIsDoneIfProperInt=function(t){this._isDoneWhenProperInt=t},hf.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},hf.prototype.isBoundaryPointInternal=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next().getCoordinate();if(t.isIntersection(r))return!0}return!1},hf.prototype.hasProperIntersection=function(){return this._hasProper},hf.prototype.hasIntersection=function(){return this._hasIntersection},hf.prototype.isDone=function(){return this._isDone},hf.prototype.isBoundaryPoint=function(t,e){return!(null===e||!this.isBoundaryPointInternal(t,e[0])&&!this.isBoundaryPointInternal(t,e[1]))},hf.prototype.setBoundaryNodes=function(t,e){this._bdyNodes=new Array(2).fill(null),this._bdyNodes[0]=t,this._bdyNodes[1]=e},hf.prototype.addIntersections=function(t,e,n,r){if(t===n&&e===r)return null;this.numTests++;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[r],a=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,s,a),this._li.hasIntersection()&&(this._recordIsolated&&(t.setIsolated(!1),n.setIsolated(!1)),this._numIntersections++,this.isTrivialIntersection(t,e,n,r)||(this._hasIntersection=!0,!this._includeProper&&this._li.isProper()||(t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this._li,this._bdyNodes)||(this._hasProperInterior=!0))))},hf.prototype.interfaces_=function(){return[]},hf.prototype.getClass=function(){return hf},hf.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};function pf(){this._min=mu.POSITIVE_INFINITY,this._max=mu.NEGATIVE_INFINITY}var lf=function(t){function e(){t.call(this),this.events=new bc,this.nOverlaps=null}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.prepareEvents=function(){$h.sort(this.events);for(var t=0;t<this.events.size();t++){var e=this.events.get(t);e.isDelete()&&e.getInsertEvent().setDeleteEventIndex(t)}},e.prototype.computeIntersections=function(){if(1===arguments.length){var t=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var e=0;e<this.events.size();e++){var n=this.events.get(e);if(n.isInsert()&&this.processOverlaps(e,n.getDeleteEventIndex(),n,t),t.isDone())break}}else{var r,i,o,s,a;3===arguments.length&&(arguments[2]instanceof hf&&Lu(arguments[0],wc)&&Lu(arguments[1],wc)?(r=arguments[0],i=arguments[1],o=arguments[2],this.addEdges(r,r),this.addEdges(i,i),this.computeIntersections(o)):"boolean"==typeof arguments[2]&&Lu(arguments[0],wc)&&arguments[1]instanceof hf&&(s=arguments[0],a=arguments[1],arguments[2]?this.addEdges(s,null):this.addEdges(s),this.computeIntersections(a)))}},e.prototype.addEdge=function(t,e){for(var n=t.getMonotoneChainEdge(),r=n.getStartIndexes(),i=0;i<r.length-1;i++){var o=new sf(n,i),s=new af(e,n.getMinX(i),o);this.events.add(s),this.events.add(new af(n.getMaxX(i),s))}},e.prototype.processOverlaps=function(t,e,n,r){for(var i=n.getObject(),o=t;o<e;o++){var a,s=this.events.get(o);s.isInsert()&&(a=s.getObject(),n.isSameLabel(s)||(i.computeIntersections(a,r),this.nOverlaps++))}},e.prototype.addEdges=function(){if(1===arguments.length)for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.addEdge(e,e)}else if(2===arguments.length)for(var r=arguments[1],i=arguments[0].iterator();i.hasNext();){var o=i.next();this.addEdge(o,r)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(cf),ff={NodeComparator:{configurable:!0}};pf.prototype.getMin=function(){return this._min},pf.prototype.intersects=function(t,e){return!(this._min>e||this._max<t)},pf.prototype.getMax=function(){return this._max},pf.prototype.toString=function(){return Ku.toLineString(new bu(this._min,0),new bu(this._max,0))},pf.prototype.interfaces_=function(){return[]},pf.prototype.getClass=function(){return pf},ff.NodeComparator.get=function(){return gf},Object.defineProperties(pf,ff);var gf=function(){};gf.prototype.compare=function(t,e){var i=(t._min+t._max)/2,o=(e._min+e._max)/2;return i<o?-1:o<i?1:0},gf.prototype.interfaces_=function(){return[wu]},gf.prototype.getClass=function(){return gf};function _f(){this._leaves=new bc,this._root=null,this._level=0}var df=function(t){function e(){t.call(this),this._item=null;var e=arguments[0],n=arguments[1],r=arguments[2];this._min=e,this._max=n,this._item=r}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.query=function(t,e,n){if(!this.intersects(t,e))return null;n.visitItem(this._item)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(pf),yf=function(t){function e(){t.call(this),this._node1=null,this._node2=null;var e=arguments[0],n=arguments[1];this._node1=e,this._node2=n,this.buildExtent(this._node1,this._node2)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.buildExtent=function(t,e){this._min=Math.min(t._min,e._min),this._max=Math.max(t._max,e._max)},e.prototype.query=function(t,e,n){if(!this.intersects(t,e))return null;null!==this._node1&&this._node1.query(t,e,n),null!==this._node2&&this._node2.query(t,e,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(pf);_f.prototype.buildTree=function(){$h.sort(this._leaves,new pf.NodeComparator);for(var e,t=this._leaves,n=new bc;;){if(this.buildLevel(t,n),1===n.size())return n.get(0);e=t,t=n,n=e}},_f.prototype.insert=function(t,e,n){if(null!==this._root)throw new Error("Index cannot be added to once it has been queried");this._leaves.add(new df(t,e,n))},_f.prototype.query=function(t,e,n){this.init(),this._root.query(t,e,n)},_f.prototype.buildRoot=function(){if(null!==this._root)return null;this._root=this.buildTree()},_f.prototype.printNode=function(t){Xu.out.println(Ku.toLineString(new bu(t._min,this._level),new bu(t._max,this._level)))},_f.prototype.init=function(){if(null!==this._root)return null;this.buildRoot()},_f.prototype.buildLevel=function(t,e){this._level++,e.clear();for(var n=0;n<t.size();n+=2){var i,r=t.get(n);null===(n+1<t.size()?t.get(n):null)?e.add(r):(i=new yf(t.get(n),t.get(n+1)),e.add(i))}},_f.prototype.interfaces_=function(){return[]},_f.prototype.getClass=function(){return _f};function mf(){this._items=new bc}mf.prototype.visitItem=function(t){this._items.add(t)},mf.prototype.getItems=function(){return this._items},mf.prototype.interfaces_=function(){return[Jh]},mf.prototype.getClass=function(){return mf};function vf(){this._index=null;var t=arguments[0];if(!Lu(t,Qc))throw new _u;this._index=new wf(t)}var xf={SegmentVisitor:{configurable:!0},IntervalIndexedGeometry:{configurable:!0}};vf.prototype.locate=function(t){var e=new oc(t),n=new Ef(e);return this._index.query(t.y,t.y,n),e.getLocation()},vf.prototype.interfaces_=function(){return[Bl]},vf.prototype.getClass=function(){return vf},xf.SegmentVisitor.get=function(){return Ef},xf.IntervalIndexedGeometry.get=function(){return wf},Object.defineProperties(vf,xf);var Ef=function(){this._counter=null;var t=arguments[0];this._counter=t};Ef.prototype.visitItem=function(t){var e=t;this._counter.countSegment(e.getCoordinate(0),e.getCoordinate(1))},Ef.prototype.interfaces_=function(){return[Jh]},Ef.prototype.getClass=function(){return Ef};var wf=function(){this._index=new _f;var t=arguments[0];this.init(t)};wf.prototype.init=function(t){for(var e=bp.getLines(t).iterator();e.hasNext();){var n=e.next().getCoordinates();this.addLine(n)}},wf.prototype.addLine=function(t){for(var e=1;e<t.length;e++){var n=new gl(t[e-1],t[e]),r=Math.min(n.p0.y,n.p1.y),i=Math.max(n.p0.y,n.p1.y);this._index.insert(r,i,n)}},wf.prototype.query=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new mf;return this._index.query(t,e,n),n.getItems()}var r,i,o;3===arguments.length&&(r=arguments[0],i=arguments[1],o=arguments[2],this._index.query(r,i,o))},wf.prototype.interfaces_=function(){return[]},wf.prototype.getClass=function(){return wf};function If(){var t,e,n,r,i,o,s;this._li=new rc,this._resultPrecisionModel=null,this._arg=null,1===arguments.length?(t=arguments[0],this.setComputationPrecision(t.getPrecisionModel()),this._arg=new Array(1).fill(null),this._arg[0]=new bf(0,t)):2===arguments.length?(n=arguments[1],r=fc.OGC_SFS_BOUNDARY_RULE,0<=(e=arguments[0]).getPrecisionModel().compareTo(n.getPrecisionModel())?this.setComputationPrecision(e.getPrecisionModel()):this.setComputationPrecision(n.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new bf(0,e,r),this._arg[1]=new bf(1,n,r)):3===arguments.length&&(o=arguments[1],s=arguments[2],0<=(i=arguments[0]).getPrecisionModel().compareTo(o.getPrecisionModel())?this.setComputationPrecision(i.getPrecisionModel()):this.setComputationPrecision(o.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new bf(0,i,s),this._arg[1]=new bf(1,o,s))}var bf=function(t){function e(){var e,n,r,i,o,s;t.call(this),this._parentGeom=null,this._lineEdgeMap=new ph,this._boundaryNodeRule=null,this._useBoundaryDeterminationRule=!0,this._argIndex=null,this._boundaryNodes=null,this._hasTooFewPoints=!1,this._invalidPoint=null,this._areaPtLocator=null,this._ptLocator=new Ip,2===arguments.length?(e=arguments[0],n=arguments[1],r=fc.OGC_SFS_BOUNDARY_RULE,this._argIndex=e,this._parentGeom=n,this._boundaryNodeRule=r,null!==n&&this.add(n)):3===arguments.length&&(i=arguments[0],o=arguments[1],s=arguments[2],this._argIndex=i,this._parentGeom=o,this._boundaryNodeRule=s,null!==o&&this.add(o))}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.insertBoundaryPoint=function(t,n){var r=this._nodes.addNode(n).getLabel(),i=1;r.getLocation(t,Nh.ON)===Su.BOUNDARY&&i++;var o=e.determineBoundary(this._boundaryNodeRule,i);r.setLocation(t,o)},e.prototype.computeSelfNodes=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.computeSelfNodes(t,e,!1)}if(3===arguments.length){var r=arguments[1],i=arguments[2],o=new hf(arguments[0],!0,!1);o.setIsDoneIfProperInt(i);var s=this.createEdgeSetIntersector(),a=this._parentGeom instanceof eh||this._parentGeom instanceof $c||this._parentGeom instanceof nh,u=r||!a;return s.computeIntersections(this._edges,o,u),this.addSelfIntersectionNodes(this._argIndex),o}},e.prototype.computeSplitEdges=function(t){for(var e=this._edges.iterator();e.hasNext();)e.next().eiList.addSplitEdges(t)},e.prototype.computeEdgeIntersections=function(t,e,n){var r=new hf(e,n,!0);return r.setBoundaryNodes(this.getBoundaryNodes(),t.getBoundaryNodes()),this.createEdgeSetIntersector().computeIntersections(this._edges,t._edges,r),r},e.prototype.getGeometry=function(){return this._parentGeom},e.prototype.getBoundaryNodeRule=function(){return this._boundaryNodeRule},e.prototype.hasTooFewPoints=function(){return this._hasTooFewPoints},e.prototype.addPoint=function(){var t,e;arguments[0]instanceof Kc?(t=arguments[0].getCoordinate(),this.insertPoint(this._argIndex,t,Su.INTERIOR)):arguments[0]instanceof bu&&(e=arguments[0],this.insertPoint(this._argIndex,e,Su.INTERIOR))},e.prototype.addPolygon=function(t){this.addPolygonRing(t.getExteriorRing(),Su.EXTERIOR,Su.INTERIOR);for(var e=0;e<t.getNumInteriorRing();e++){var n=t.getInteriorRingN(e);this.addPolygonRing(n,Su.INTERIOR,Su.EXTERIOR)}},e.prototype.addEdge=function(t){this.insertEdge(t);var e=t.getCoordinates();this.insertPoint(this._argIndex,e[0],Su.BOUNDARY),this.insertPoint(this._argIndex,e[e.length-1],Su.BOUNDARY)},e.prototype.addLineString=function(t){var e=Cc.removeRepeatedPoints(t.getCoordinates());if(e.length<2)return this._hasTooFewPoints=!0,this._invalidPoint=e[0],null;var n=new ep(e,new Rh(this._argIndex,Su.INTERIOR));this._lineEdgeMap.put(t,n),this.insertEdge(n),tc.isTrue(2<=e.length,"found LineString with single point"),this.insertBoundaryPoint(this._argIndex,e[0]),this.insertBoundaryPoint(this._argIndex,e[e.length-1])},e.prototype.getInvalidPoint=function(){return this._invalidPoint},e.prototype.getBoundaryPoints=function(){for(var t=this.getBoundaryNodes(),e=new Array(t.size()).fill(null),n=0,r=t.iterator();r.hasNext();){var i=r.next();e[n++]=i.getCoordinate().copy()}return e},e.prototype.getBoundaryNodes=function(){return null===this._boundaryNodes&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex)),this._boundaryNodes},e.prototype.addSelfIntersectionNode=function(t,e,n){if(this.isBoundaryNode(t,e))return null;n===Su.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(t,e):this.insertPoint(t,e,n)},e.prototype.addPolygonRing=function(t,e,n){if(t.isEmpty())return null;var r=Cc.removeRepeatedPoints(t.getCoordinates());if(r.length<4)return this._hasTooFewPoints=!0,this._invalidPoint=r[0],null;var i=e,o=n;sc.isCCW(r)&&(i=n,o=e);var s=new ep(r,new Rh(this._argIndex,Su.BOUNDARY,i,o));this._lineEdgeMap.put(t,s),this.insertEdge(s),this.insertPoint(this._argIndex,r[0],Su.BOUNDARY)},e.prototype.insertPoint=function(t,e,n){var r=this._nodes.addNode(e),i=r.getLabel();null===i?r._label=new Rh(t,n):i.setLocation(t,n)},e.prototype.createEdgeSetIntersector=function(){return new lf},e.prototype.addSelfIntersectionNodes=function(t){for(var e=this._edges.iterator();e.hasNext();)for(var n=e.next(),r=n.getLabel().getLocation(t),i=n.eiList.iterator();i.hasNext();){var o=i.next();this.addSelfIntersectionNode(t,o.coord,r)}},e.prototype.add=function(){if(1!==arguments.length)return t.prototype.add.apply(this,arguments);var e=arguments[0];if(e.isEmpty())return null;if(e instanceof nh&&(this._useBoundaryDeterminationRule=!1),e instanceof $c)this.addPolygon(e);else if(e instanceof Jc)this.addLineString(e);else if(e instanceof Kc)this.addPoint(e);else if(e instanceof th)this.addCollection(e);else if(e instanceof Xc)this.addCollection(e);else if(e instanceof nh)this.addCollection(e);else{if(!(e instanceof jc))throw new Error(e.getClass().getName());this.addCollection(e)}},e.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},e.prototype.locate=function(t){return Lu(this._parentGeom,Qc)&&50<this._parentGeom.getNumGeometries()?(null===this._areaPtLocator&&(this._areaPtLocator=new vf(this._parentGeom)),this._areaPtLocator.locate(t)):this._ptLocator.locate(t,this._parentGeom)},e.prototype.findEdge=function(){if(1!==arguments.length)return t.prototype.findEdge.apply(this,arguments);var e=arguments[0];return this._lineEdgeMap.get(e)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.determineBoundary=function(t,e){return t.isInBoundary(e)?Su.BOUNDARY:Su.INTERIOR},e}(Uh);If.prototype.getArgGeometry=function(t){return this._arg[t].getGeometry()},If.prototype.setComputationPrecision=function(t){this._resultPrecisionModel=t,this._li.setPrecisionModel(this._resultPrecisionModel)},If.prototype.interfaces_=function(){return[]},If.prototype.getClass=function(){return If};function Nf(){}Nf.prototype.interfaces_=function(){return[]},Nf.prototype.getClass=function(){return Nf},Nf.map=function(){if(arguments[0]instanceof cc&&Lu(arguments[1],Nf.MapOp)){for(var t=arguments[0],e=arguments[1],n=new bc,r=0;r<t.getNumGeometries();r++){var i=e.map(t.getGeometryN(r));null!==i&&n.add(i)}return t.getFactory().buildGeometry(n)}if(Lu(arguments[0],vc)&&Lu(arguments[1],Nf.MapOp)){for(var o=arguments[0],s=arguments[1],a=new bc,u=o.iterator();u.hasNext();){var c=u.next(),h=s.map(c);null!==h&&a.add(h)}return a}},Nf.MapOp=function(){};var Cf=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n),this._ptLocator=new Ip,this._geomFact=null,this._resultGeom=null,this._graph=null,this._edgeList=new Vl,this._resultPolyList=new bc,this._resultLineList=new bc,this._resultPointList=new bc,this._graph=new Uh(new Ul),this._geomFact=e.getFactory()}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.insertUniqueEdge=function(t){var n,r,i,e=this._edgeList.findEqualEdge(t);null!==e?(n=e.getLabel(),r=t.getLabel(),e.isPointwiseEqual(t)||(r=new Rh(t.getLabel())).flip(),(i=e.getDepth()).isNull()&&i.add(n),i.add(r),n.merge(r)):this._edgeList.add(t)},e.prototype.getGraph=function(){return this._graph},e.prototype.cancelDuplicateResultEdges=function(){for(var t=this._graph.getEdgeEnds().iterator();t.hasNext();){var e=t.next(),n=e.getSym();e.isInResult()&&n.isInResult()&&(e.setInResult(!1),n.setInResult(!1))}},e.prototype.isCoveredByLA=function(t){return!!this.isCovered(t,this._resultLineList)||!!this.isCovered(t,this._resultPolyList)},e.prototype.computeGeometry=function(t,n,r,i){var o=new bc;return o.addAll(t),o.addAll(n),o.addAll(r),o.isEmpty()?e.createEmptyResult(i,this._arg[0].getGeometry(),this._arg[1].getGeometry(),this._geomFact):this._geomFact.buildGeometry(o)},e.prototype.mergeSymLabels=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();)t.next().getEdges().mergeSymLabels()},e.prototype.isCovered=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();if(this._ptLocator.locate(t,r)!==Su.EXTERIOR)return!0}return!1},e.prototype.replaceCollapsedEdges=function(){for(var t=new bc,e=this._edgeList.iterator();e.hasNext();){var n=e.next();n.isCollapsed()&&(e.remove(),t.add(n.getCollapsedEdge()))}this._edgeList.addAll(t)},e.prototype.updateNodeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getEdges().getLabel();e.getLabel().merge(n)}},e.prototype.getResultGeometry=function(t){return this.computeOverlay(t),this._resultGeom},e.prototype.insertUniqueEdges=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.insertUniqueEdge(n)}},e.prototype.computeOverlay=function(t){this.copyPoints(0),this.copyPoints(1),this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1),this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!0);var e=new bc;this._arg[0].computeSplitEdges(e),this._arg[1].computeSplitEdges(e),this.insertUniqueEdges(e),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),Xp.checkValid(this._edgeList.getEdges()),this._graph.addEdges(this._edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(t),this.cancelDuplicateResultEdges();var n=new Yh(this._geomFact);n.add(this._graph),this._resultPolyList=n.getPolygons();var r=new Yp(this,this._geomFact,this._ptLocator);this._resultLineList=r.build(t);var i=new Vp(this,this._geomFact,this._ptLocator);this._resultPointList=i.build(t),this._resultGeom=this.computeGeometry(this._resultPointList,this._resultLineList,this._resultPolyList,t)},e.prototype.labelIncompleteNode=function(t,e){var n=this._ptLocator.locate(t.getCoordinate(),this._arg[e].getGeometry());t.getLabel().setLocation(e,n)},e.prototype.copyPoints=function(t){for(var e=this._arg[t].getNodeIterator();e.hasNext();){var n=e.next();this._graph.addNode(n.getCoordinate()).setLabel(t,n.getLabel().getLocation(t))}},e.prototype.findResultAreaEdges=function(t){for(var n=this._graph.getEdgeEnds().iterator();n.hasNext();){var r=n.next(),i=r.getLabel();i.isArea()&&!r.isInteriorAreaEdge()&&e.isResultOfOp(i.getLocation(0,Nh.RIGHT),i.getLocation(1,Nh.RIGHT),t)&&r.setInResult(!0)}},e.prototype.computeLabelsFromDepths=function(){for(var t=this._edgeList.iterator();t.hasNext();){var e=t.next(),n=e.getLabel(),r=e.getDepth();if(!r.isNull()){r.normalize();for(var i=0;i<2;i++)n.isNull(i)||!n.isArea()||r.isNull(i)||(0===r.getDelta(i)?n.toLine(i):(tc.isTrue(!r.isNull(i,Nh.LEFT),"depth of LEFT side has not been initialized"),n.setLocation(i,Nh.LEFT,r.getLocation(i,Nh.LEFT)),tc.isTrue(!r.isNull(i,Nh.RIGHT),"depth of RIGHT side has not been initialized"),n.setLocation(i,Nh.RIGHT,r.getLocation(i,Nh.RIGHT))))}}},e.prototype.computeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();)t.next().getEdges().computeLabelling(this._arg);this.mergeSymLabels(),this.updateNodeLabelling()},e.prototype.labelIncompleteNodes=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getLabel();e.isIsolated()&&(n.isNull(0)?this.labelIncompleteNode(e,0):this.labelIncompleteNode(e,1)),e.getEdges().updateLabelling(n)}},e.prototype.isCoveredByA=function(t){return!!this.isCovered(t,this._resultPolyList)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(If);Cf.overlayOp=function(t,e,n){return new Cf(t,e).getResultGeometry(n)},Cf.intersection=function(t,e){if(t.isEmpty()||e.isEmpty())return Cf.createEmptyResult(Cf.INTERSECTION,t,e,t.getFactory());if(t.isGeometryCollection()){var n=e;return Up.map(t,{interfaces_:function(){return[Nf.MapOp]},map:function(t){return t.intersection(n)}})}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),of.overlayOp(t,e,Cf.INTERSECTION)},Cf.symDifference=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return Cf.createEmptyResult(Cf.SYMDIFFERENCE,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),of.overlayOp(t,e,Cf.SYMDIFFERENCE)},Cf.resultDimension=function(t,e,n){var r=e.getDimension(),i=n.getDimension(),o=-1;switch(t){case Cf.INTERSECTION:o=Math.min(r,i);break;case Cf.UNION:o=Math.max(r,i);break;case Cf.DIFFERENCE:o=r;break;case Cf.SYMDIFFERENCE:o=Math.max(r,i)}return o},Cf.createEmptyResult=function(t,e,n,r){var i=null;switch(Cf.resultDimension(t,e,n)){case-1:i=r.createGeometryCollection(new Array(0).fill(null));break;case 0:i=r.createPoint();break;case 1:i=r.createLineString();break;case 2:i=r.createPolygon()}return i},Cf.difference=function(t,e){return t.isEmpty()?Cf.createEmptyResult(Cf.DIFFERENCE,t,e,t.getFactory()):e.isEmpty()?t.copy():(t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),of.overlayOp(t,e,Cf.DIFFERENCE))},Cf.isResultOfOp=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=t.getLocation(0),r=t.getLocation(1);return Cf.isResultOfOp(n,r,e)}if(3===arguments.length){var i=arguments[0],o=arguments[1];switch(i===Su.BOUNDARY&&(i=Su.INTERIOR),o===Su.BOUNDARY&&(o=Su.INTERIOR),arguments[2]){case Cf.INTERSECTION:return i===Su.INTERIOR&&o===Su.INTERIOR;case Cf.UNION:return i===Su.INTERIOR||o===Su.INTERIOR;case Cf.DIFFERENCE:return i===Su.INTERIOR&&o!==Su.INTERIOR;case Cf.SYMDIFFERENCE:return i===Su.INTERIOR&&o!==Su.INTERIOR||i!==Su.INTERIOR&&o===Su.INTERIOR}return!1}},Cf.INTERSECTION=1,Cf.UNION=2,Cf.DIFFERENCE=3,Cf.SYMDIFFERENCE=4;function Sf(){this._g=null,this._boundaryDistanceTolerance=null,this._linework=null,this._ptLocator=new Ip,this._seg=new gl;var t=arguments[0],e=arguments[1];this._g=t,this._boundaryDistanceTolerance=e,this._linework=this.extractLinework(t)}Sf.prototype.isWithinToleranceOfBoundary=function(t){for(var e=0;e<this._linework.getNumGeometries();e++)for(var n=this._linework.getGeometryN(e).getCoordinateSequence(),r=0;r<n.size()-1;r++)if(n.getCoordinate(r,this._seg.p0),n.getCoordinate(r+1,this._seg.p1),this._seg.distance(t)<=this._boundaryDistanceTolerance)return!0;return!1},Sf.prototype.getLocation=function(t){return this.isWithinToleranceOfBoundary(t)?Su.BOUNDARY:this._ptLocator.locate(t,this._g)},Sf.prototype.extractLinework=function(t){var e=new Mf;t.apply(e);var n=e.getLinework(),r=_h.toLineStringArray(n);return t.getFactory().createMultiLineString(r)},Sf.prototype.interfaces_=function(){return[]},Sf.prototype.getClass=function(){return Sf};var Mf=function(){this._linework=null,this._linework=new bc};Mf.prototype.getLinework=function(){return this._linework},Mf.prototype.filter=function(t){if(t instanceof $c){var e=t;this._linework.add(e.getExteriorRing());for(var n=0;n<e.getNumInteriorRing();n++)this._linework.add(e.getInteriorRingN(n))}},Mf.prototype.interfaces_=function(){return[kc]},Mf.prototype.getClass=function(){return Mf};function Lf(){this._g=null,this._doLeft=!0,this._doRight=!0;var t=arguments[0];this._g=t}Lf.prototype.extractPoints=function(t,e,n){for(var r=t.getCoordinates(),i=0;i<r.length-1;i++)this.computeOffsetPoints(r[i],r[i+1],e,n)},Lf.prototype.setSidesToGenerate=function(t,e){this._doLeft=t,this._doRight=e},Lf.prototype.getPoints=function(t){for(var e=new bc,n=bp.getLines(this._g).iterator();n.hasNext();){var r=n.next();this.extractPoints(r,t,e)}return e},Lf.prototype.computeOffsetPoints=function(t,e,n,r){var l,p,i=e.x-t.x,o=e.y-t.y,s=Math.sqrt(i*i+o*o),a=n*i/s,u=n*o/s,c=(e.x+t.x)/2,h=(e.y+t.y)/2;this._doLeft&&(l=new bu(c-u,h+a),r.add(l)),this._doRight&&(p=new bu(c+u,h-a),r.add(p))},Lf.prototype.interfaces_=function(){return[]},Lf.prototype.getClass=function(){return Lf};function Pf(){this._geom=null,this._locFinder=null,this._location=new Array(3).fill(null),this._invalidLocation=null,this._boundaryDistanceTolerance=Pf.TOLERANCE,this._testCoords=new bc;var e=arguments[0],n=arguments[1],r=arguments[2];this._boundaryDistanceTolerance=Pf.computeBoundaryDistanceTolerance(e,n),this._geom=[e,n,r],this._locFinder=[new Sf(this._geom[0],this._boundaryDistanceTolerance),new Sf(this._geom[1],this._boundaryDistanceTolerance),new Sf(this._geom[2],this._boundaryDistanceTolerance)]}var Of={TOLERANCE:{configurable:!0}};Pf.prototype.reportResult=function(t,e,n){Xu.out.println("Overlay result invalid - A:"+Su.toLocationSymbol(e[0])+" B:"+Su.toLocationSymbol(e[1])+" expected:"+(n?"i":"e")+" actual:"+Su.toLocationSymbol(e[2]))},Pf.prototype.isValid=function(t){return this.addTestPts(this._geom[0]),this.addTestPts(this._geom[1]),this.checkValid(t)},Pf.prototype.checkValid=function(){if(1===arguments.length){for(var t=arguments[0],e=0;e<this._testCoords.size();e++){var n=this._testCoords.get(e);if(!this.checkValid(t,n))return this._invalidLocation=n,!1}return!0}if(2===arguments.length){var r=arguments[0],i=arguments[1];return this._location[0]=this._locFinder[0].getLocation(i),this._location[1]=this._locFinder[1].getLocation(i),this._location[2]=this._locFinder[2].getLocation(i),!!Pf.hasLocation(this._location,Su.BOUNDARY)||this.isValidResult(r,this._location)}},Pf.prototype.addTestPts=function(t){var e=new Lf(t);this._testCoords.addAll(e.getPoints(5*this._boundaryDistanceTolerance))},Pf.prototype.isValidResult=function(t,e){var n=Cf.isResultOfOp(e[0],e[1],t),r=!(n^e[2]===Su.INTERIOR);return r||this.reportResult(t,e,n),r},Pf.prototype.getInvalidLocation=function(){return this._invalidLocation},Pf.prototype.interfaces_=function(){return[]},Pf.prototype.getClass=function(){return Pf},Pf.hasLocation=function(t,e){for(var n=0;n<3;n++)if(t[n]===e)return!0;return!1},Pf.computeBoundaryDistanceTolerance=function(t,e){return Math.min(Jp.computeSizeBasedSnapTolerance(t),Jp.computeSizeBasedSnapTolerance(e))},Pf.isValid=function(t,e,n,r){return new Pf(t,e,r).isValid(n)},Of.TOLERANCE.get=function(){return 1e-6},Object.defineProperties(Pf,Of);function Rf(e){this._geomFactory=null,this._skipEmpty=!1,this._inputGeoms=null,this._geomFactory=Rf.extractFactory(e),this._inputGeoms=e}Rf.prototype.extractElements=function(t,e){if(null===t)return null;for(var n=0;n<t.getNumGeometries();n++){var r=t.getGeometryN(n);this._skipEmpty&&r.isEmpty()||e.add(r)}},Rf.prototype.combine=function(){for(var t=new bc,e=this._inputGeoms.iterator();e.hasNext();){var n=e.next();this.extractElements(n,t)}return 0===t.size()?null!==this._geomFactory?this._geomFactory.createGeometryCollection(null):null:this._geomFactory.buildGeometry(t)},Rf.prototype.interfaces_=function(){return[]},Rf.prototype.getClass=function(){return Rf},Rf.combine=function(){return 1===arguments.length?new Rf(arguments[0]).combine():2===arguments.length?new Rf(Rf.createList(arguments[0],arguments[1])).combine():3===arguments.length?new Rf(Rf.createList(arguments[0],arguments[1],arguments[2])).combine():void 0},Rf.extractFactory=function(t){return t.isEmpty()?null:t.iterator().next().getFactory()},Rf.createList=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new bc;return n.add(t),n.add(e),n}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2],s=new bc;return s.add(r),s.add(i),s.add(o),s}};function Tf(){this._inputPolys=null,this._geomFactory=null;var t=arguments[0];this._inputPolys=t,null===this._inputPolys&&(this._inputPolys=new bc)}var Af={STRTREE_NODE_CAPACITY:{configurable:!0}};Tf.prototype.reduceToGeometries=function(t){for(var e=new bc,n=t.iterator();n.hasNext();){var r=n.next(),i=null;Lu(r,wc)?i=this.unionTree(r):r instanceof cc&&(i=r),e.add(i)}return e},Tf.prototype.extractByEnvelope=function(t,e,n){for(var r=new bc,i=0;i<e.getNumGeometries();i++){var o=e.getGeometryN(i);o.getEnvelopeInternal().intersects(t)?r.add(o):n.add(o)}return this._geomFactory.buildGeometry(r)},Tf.prototype.unionOptimized=function(t,e){var n=t.getEnvelopeInternal(),r=e.getEnvelopeInternal();if(!n.intersects(r))return Rf.combine(t,e);if(t.getNumGeometries()<=1&&e.getNumGeometries()<=1)return this.unionActual(t,e);var i=n.intersection(r);return this.unionUsingEnvelopeIntersection(t,e,i)},Tf.prototype.union=function(){if(null===this._inputPolys)throw new Error("union() method cannot be called twice");if(this._inputPolys.isEmpty())return null;this._geomFactory=this._inputPolys.iterator().next().getFactory();for(var t=new ol(Tf.STRTREE_NODE_CAPACITY),e=this._inputPolys.iterator();e.hasNext();){var n=e.next();t.insert(n.getEnvelopeInternal(),n)}this._inputPolys=null;var r=t.itemsTree();return this.unionTree(r)},Tf.prototype.binaryUnion=function(){if(1===arguments.length){var t=arguments[0];return this.binaryUnion(t,0,t.size())}if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2];if(r-n<=1){var i=Tf.getGeometry(e,n);return this.unionSafe(i,null)}if(r-n==2)return this.unionSafe(Tf.getGeometry(e,n),Tf.getGeometry(e,n+1));var o=Math.trunc((r+n)/2),s=this.binaryUnion(e,n,o),a=this.binaryUnion(e,o,r);return this.unionSafe(s,a)}},Tf.prototype.repeatedUnion=function(t){for(var e=null,n=t.iterator();n.hasNext();)var r=n.next(),e=null===e?r.copy():e.union(r);return e},Tf.prototype.unionSafe=function(t,e){return null===t&&null===e?null:null===t?e.copy():null===e?t.copy():this.unionOptimized(t,e)},Tf.prototype.unionActual=function(t,e){return Tf.restrictToPolygons(t.union(e))},Tf.prototype.unionTree=function(t){var e=this.reduceToGeometries(t);return this.binaryUnion(e)},Tf.prototype.unionUsingEnvelopeIntersection=function(t,e,n){var r=new bc,i=this.extractByEnvelope(n,t,r),o=this.extractByEnvelope(n,e,r),s=this.unionActual(i,o);return r.add(s),Rf.combine(r)},Tf.prototype.bufferUnion=function(){if(1===arguments.length){var t=arguments[0];return t.get(0).getFactory().buildGeometry(t).buffer(0)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e.getFactory().createGeometryCollection([e,n]).buffer(0)}},Tf.prototype.interfaces_=function(){return[]},Tf.prototype.getClass=function(){return Tf},Tf.restrictToPolygons=function(t){if(Lu(t,Qc))return t;var e=wp.getPolygons(t);return 1===e.size()?e.get(0):t.getFactory().createMultiPolygon(_h.toPolygonArray(e))},Tf.getGeometry=function(t,e){return e>=t.size()?null:t.get(e)},Tf.union=function(t){return new Tf(t).union()},Af.STRTREE_NODE_CAPACITY.get=function(){return 4},Object.defineProperties(Tf,Af);var Df=function(){};Df.prototype.interfaces_=function(){return[]},Df.prototype.getClass=function(){return Df},Df.union=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return Cf.createEmptyResult(Cf.UNION,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),of.overlayOp(t,e,Cf.UNION)};function Ff(){return new Yi}Yi.prototype={constructor:Yi,reset:function(){this.s=this.t=0},add:function(t){Vi(qf,t,this.t),Vi(this,qf.s,this.s),this.s?this.t+=qf.t:this.s=qf.t},valueOf:function(){return this.s}};var qf=new Yi,Gf=1e-6,Bf=Math.PI,kf=Bf/2,zf=Bf/4,jf=2*Bf,Xf=180/Bf,Uf=Bf/180,Yf=Math.abs,Vf=Math.atan,Hf=Math.atan2,Wf=Math.cos,Jf=Math.exp,Zf=Math.log,Kf=Math.sin,Qf=Math.sqrt,$f=Math.tan,tg={Feature:function(t,e){Ji(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)Ji(n[r].geometry,e)}},eg={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){Zi(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)Zi(n[r],e,0)},Polygon:function(t,e){Ki(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)Ki(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)Ji(n[r],e)}},ng=function(t,e){t&&tg.hasOwnProperty(t.type)?tg[t.type](t,e):Ji(t,e)},rg=(Ff(),Ff(),Ff(),function(t,e){function n(n,r){return n=t(n,r),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,r){return(n=e.invert(n,r))&&t.invert(n[0],n[1])}),n});oo.invert=oo;function ag(t,e){return Yf(t[0]-e[0])<Gf&&Yf(t[1]-e[1])<Gf}var og=function(){var t,e=[];return{point:function(e,n){t.push([e,n])},lineStart:function(){e.push(t=[])},lineEnd:Wi,rejoin:function(){1<e.length&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}},sg=function(t,e,n,r,i,o){var a=t[0],u=t[1],c=0,h=1,l=e[0]-a,p=e[1]-u,s=n-a;if(l||!(0<s)){if(s/=l,l<0){if(s<c)return;s<h&&(h=s)}else if(0<l){if(h<s)return;c<s&&(c=s)}if(s=i-a,l||!(s<0)){if(s/=l,l<0){if(h<s)return;c<s&&(c=s)}else if(0<l){if(s<c)return;s<h&&(h=s)}if(s=r-u,p||!(0<s)){if(s/=p,p<0){if(s<c)return;s<h&&(h=s)}else if(0<p){if(h<s)return;c<s&&(c=s)}if(s=o-u,p||!(s<0)){if(s/=p,p<0){if(h<s)return;c<s&&(c=s)}else if(0<p){if(s<c)return;s<h&&(h=s)}return 0<c&&(t[0]=a+c*l,t[1]=u+c*p),h<1&&(e[0]=a+h*l,e[1]=u+h*p),!0}}}}},ug=function(t,e,n,r,i){var o,s,a=[],u=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,n,r=t[0],s=t[e];if(ag(r,s)){for(i.lineStart(),o=0;o<e;++o)i.point((r=t[o])[0],r[1]);i.lineEnd()}else a.push(n=new lo(r,t,null,!0)),u.push(n.o=new lo(r,null,n,!1)),a.push(n=new lo(s,t,null,!1)),u.push(n.o=new lo(s,null,n,!0))}}),a.length){for(u.sort(e),po(a),po(u),o=0,s=u.length;o<s;++o)u[o].e=n=!n;for(var c,h,l=a[0];;){for(var p=l,f=!0;p.v;)if((p=p.n)===l)return;c=p.z,i.lineStart();do{if(p.v=p.o.v=!0,p.e){if(f)for(o=0,s=c.length;o<s;++o)i.point((h=c[o])[0],h[1]);else r(p.x,p.n.x,1,i);p=p.n}else{if(f)for(c=p.p.z,o=c.length-1;0<=o;--o)i.point((h=c[o])[0],h[1]);else r(p.x,p.p.x,-1,i);p=p.p}c=(p=p.o).z,f=!f}while(!p.v);i.lineEnd()}}},hg=function(t){for(var e,n,r,i=t.length,o=-1,s=0;++o<i;)s+=t[o].length;for(n=new Array(s);0<=--i;)for(e=(r=t[i]).length;0<=--e;)n[--s]=r[e];return n},lg=1e9,pg=-lg,fg=Ff(),gg=(Ff(),function(t){return t}),dg=(Ff(),Ff(),1/0),yg=dg,_g=-dg,mg=_g,vg={point:function(t,e){t<dg&&(dg=t),_g<t&&(_g=t),e<yg&&(yg=e),mg<e&&(mg=e)},lineStart:Wi,lineEnd:Wi,polygonStart:Wi,polygonEnd:Wi,result:function(){var t=[[dg,yg],[_g,mg]];return _g=mg=-(yg=dg=1/0),t}},xg=(Ff(),function(t,e,n,r){return function(i,o){function s(e,n){var r=i(e,n);t(e=r[0],n=r[1])&&o.point(e,n)}function a(t,e){var n=i(t,e);y.point(n[0],n[1])}function u(){E.point=a,y.lineStart()}function c(){E.point=s,y.lineEnd()}function h(t,e){d.push([t,e]);var n=i(t,e);v.point(n[0],n[1])}function l(){v.lineStart(),d=[]}function p(){h(d[0][0],d[0][1]),v.lineEnd();var t,e,n,r,i=v.clean(),s=m.result(),a=s.length;if(d.pop(),f.push(d),d=null,a)if(1&i){if(0<(e=(n=s[0]).length-1)){for(x||(o.polygonStart(),x=!0),o.lineStart(),t=0;t<e;++t)o.point((r=n[t])[0],r[1]);o.lineEnd()}}else 1<a&&2&i&&s.push(s.pop().concat(s.shift())),g.push(s.filter(go))}var f,g,d,y=e(o),_=i.invert(r[0],r[1]),m=og(),v=e(m),x=!1,E={point:s,lineStart:u,lineEnd:c,polygonStart:function(){E.point=h,E.lineStart=l,E.lineEnd=p,g=[],f=[]},polygonEnd:function(){E.point=s,E.lineStart=u,E.lineEnd=c,g=hg(g);var t=function(t,e){var n=e[0],r=e[1],i=[Kf(n),-Wf(n),0],o=0,s=0;fg.reset();for(var a=0,u=t.length;a<u;++a)if(h=(c=t[a]).length)for(var c,h,l=c[h-1],p=l[0],f=l[1]/2+zf,g=Kf(f),d=Wf(f),y=0;y<h;++y,p=m,g=x,d=E,l=_){var S,M,L,_=c[y],m=_[0],v=_[1]/2+zf,x=Kf(v),E=Wf(v),w=m-p,b=0<=w?1:-1,I=b*w,N=Bf<I,C=g*x;fg.add(Hf(C*b*Kf(I),d*E+C*Wf(I))),o+=N?w+b*jf:w,N^n<=p^n<=m&&(io(S=eo($i(l),$i(_))),io(M=eo(i,S)),((L=(N^0<=w?-1:1)*Hi(M[2]))<r||r===L&&(S[0]||S[1]))&&(s+=N^0<=w?1:-1))}return(o<-Gf||o<Gf&&fg<-Gf)^1&s}(f,_);g.length?(x||(o.polygonStart(),x=!0),ug(g,yo,t,n,o)):t&&(x||(o.polygonStart(),x=!0),o.lineStart(),n(null,null,1,o),o.lineEnd()),x&&(o.polygonEnd(),x=!1),g=f=null},sphere:function(){o.polygonStart(),o.lineStart(),n(null,null,1,o),o.lineEnd(),o.polygonEnd()}};return E}}),Eg=xg(function(){return!0},function(t){var e,n=NaN,r=NaN,i=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(o,s){var a=0<o?Bf:-Bf,u=Yf(o-n);Yf(u-Bf)<Gf?(t.point(n,r=0<(r+s)/2?kf:-kf),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(a,r),t.point(o,r),e=0):i!==a&&Bf<=u&&(Yf(n-i)<Gf&&(n-=i*Gf),Yf(o-a)<Gf&&(o-=a*Gf),r=function(t,e,n,r){var i,o,s=Kf(t-n);return Yf(s)>Gf?Vf((Kf(e)*(o=Wf(r))*Kf(n)-Kf(r)*(i=Wf(e))*Kf(t))/(i*o*s)):(e+r)/2}(n,r,o,s),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(a,r),e=0),t.point(n=o,r=s),i=a},lineEnd:function(){t.lineEnd(),n=r=NaN},clean:function(){return 2-e}}},function(t,e,n,r){var o,i;null==t?(i=n*kf,r.point(-Bf,i),r.point(0,i),r.point(Bf,i),r.point(Bf,0),r.point(Bf,-i),r.point(0,-i),r.point(-Bf,-i),r.point(-Bf,0),r.point(-Bf,i)):Yf(t[0]-e[0])>Gf?(i=n*(o=t[0]<e[0]?Bf:-Bf)/2,r.point(-o,i),r.point(0,i),r.point(o,i)):r.point(e[0],e[1])},[-Bf,-kf]);mo.prototype={constructor:mo,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function Ng(t,e){return+e?function(t,e){function n(r,i,o,s,a,u,c,h,l,p,f,g,d,y){var x,E,w,b,I,N,C,S,M,L,P,O,_=c-r,m=h-i,v=_*_+m*m;4*e<v&&d--&&(w=u+g,I=Hi(w/=b=Qf((x=s+p)*x+(E=a+f)*E+w*w)),N=Yf(Yf(w)-1)<Gf||Yf(o-l)<Gf?(o+l)/2:Hf(E,x),S=(C=t(N,I))[0],M=C[1],(e<(O=m*(L=S-r)-_*(P=M-i))*O/v||.3<Yf((_*L+m*P)/v-.5)||s*p+a*f+u*g<Ig)&&(n(r,i,o,s,a,u,S,M,N,x/=b,E/=b,w,d,y),y.point(S,M),n(S,M,N,x,E,w,c,h,l,p,f,g,d,y)))}return function(e){function r(n,r){n=t(n,r),e.point(n[0],n[1])}function i(){_=NaN,w.point=o,e.lineStart()}function o(r,i){var o=$i([r,i]),s=t(r,i);n(_,m,y,v,x,E,_=s[0],m=s[1],y=r,v=o[0],x=o[1],E=o[2],16,e),e.point(_,m)}function s(){w.point=r,e.lineEnd()}function a(){i(),w.point=u,w.lineEnd=c}function u(t,e){o(h=t,e),l=_,p=m,f=v,g=x,d=E,w.point=o}function c(){n(_,m,y,v,x,E,l,p,h,f,g,d,16,e),w.lineEnd=s,s()}var h,l,p,f,g,d,y,_,m,v,x,E,w={point:r,lineStart:i,lineEnd:s,polygonStart:function(){e.polygonStart(),w.lineStart=a},polygonEnd:function(){e.polygonEnd(),w.lineStart=i}};return w}}(t,e):function(t){return _o({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}(t)}var Ig=Wf(30*Uf),Cg=_o({point:function(t,e){this.stream.point(t*Uf,e*Uf)}});Eo.invert=function(t,e){return[t,2*Vf(Jf(e))-kf]},wo.invert=function(t,e){return[-e,2*Vf(Jf(t))-kf]};var Sg=function(){var t=function(t){function e(){var e=Bf*a(),s=o(function(t){function e(e){return(e=t(e[0]*Uf,e[1]*Uf))[0]*=Xf,e[1]*=Xf,e}return t=so(t[0]*Uf,t[1]*Uf,2<t.length?t[2]*Uf:0),e.invert=function(e){return(e=t.invert(e[0]*Uf,e[1]*Uf))[0]*=Xf,e[1]*=Xf,e},e}(o.rotate()).invert([0,0]));return c(null==h?[[s[0]-e,s[1]-e],[s[0]+e,s[1]+e]]:t===Eo?[[Math.max(s[0]-e,h),n],[Math.min(s[0]+e,r),i]]:[[h,Math.max(s[1]-e,n)],[r,Math.min(s[1]+e,i)]])}var n,r,i,o=xo(t),s=o.center,a=o.scale,u=o.translate,c=o.clipExtent,h=null;return o.scale=function(t){return arguments.length?(a(t),e()):a()},o.translate=function(t){return arguments.length?(u(t),e()):u()},o.center=function(t){return arguments.length?(s(t),e()):s()},o.clipExtent=function(t){return arguments.length?(null==t?h=n=r=i=null:(h=+t[0][0],n=+t[0][1],r=+t[1][0],i=+t[1][1]),e()):null==h?null:[[h,n],[r,i]]},e()}(wo),e=t.center,n=t.rotate;return t.center=function(t){return arguments.length?e([-t[1],t[0]]):[(t=e())[1],-t[0]]},t.rotate=function(t){return arguments.length?n([t[0],t[1],2<t.length?t[2]+90:90]):[(t=n())[0],t[1],t[2]-90]},n([0,0,90]).scale(159.155)};t.projection=Cs,t.random=gu,t.clusters=du,t.helpers=ko,t.invariant=jo,t.meta=zo,t.isolines=function(t,e,n){if(!I(n=n||{}))throw new Error("options is invalid");var r=n.zProperty||"elevation",i=n.commonProperties||{},o=n.breaksProperties||[];if(W(t,"Point","Input must contain Points"),!e)throw new Error("breaks is required");if(!Array.isArray(e))throw new Error("breaks must be an Array");if(!I(i))throw new Error("commonProperties must be an Object");if(!Array.isArray(o))throw new Error("breaksProperties must be an Array");var s=function(t,e){if(!I(e=e||{}))throw new Error("options is invalid");var n=e.zProperty||"elevation",r=e.flip,i=e.flags;W(t,"Point","input must contain Points");for(var o=function(t,e){var n={};return O(t,function(t){var e=U(t)[1];n[e]||(n[e]=[]),n[e].push(t)}),Object.keys(n).map(function(t){return n[t].sort(function(t,e){return U(t)[0]-U(e)[0]})}).sort(function(t,n){return e?U(t[0])[1]-U(n[0])[1]:U(n[0])[1]-U(t[0])[1]})}(t,r),s=[],a=0;a<o.length;a++){for(var u=o[a],c=[],h=0;h<u.length;h++){var l=u[h];l.properties[n]?c.push(l.properties[n]):c.push(0),!0===i&&(l.properties.matrixPosition=[a,h])}s.push(c)}return s}(t,{zProperty:r,flip:!0});return c(function(t,e,n){function p(t){t[0]=t[0]*h+s,t[1]=t[1]*l+a}var r=j(n),i=r[2]-r[0],o=r[3]-r[1],s=r[0],a=r[1],u=e[0].length-1,c=e.length-1,h=i/u,l=o/c;return t.forEach(function(t){S(t,p)}),t}(function(t,e,n,r,i){for(var o=[],s=1;s<e.length;s++){var a=+e[s],u=Object.assign({},r,i[s]),c=h(function(t,e,n){n=n||{};for(var r=Object.keys(Xo),i=0;i<r.length;i++){var o=r[i],s=null!=(s=n[o])?s:Xo[o];Uo[o]=s}Uo.verbose&&console.log("MarchingSquaresJS-isoContours: computing isocontour for "+e);var a=function(t){var e=[],n=0;return t.rows,t.cols,t.cells.forEach(function(r,i){r.forEach(function(r,o){if(void 0!==r&&5!==r.cval&&10!==r.cval&&!tt(r)){var s=function(t,e,n){var r,i,o,s=t.length,a=[],u=[0,0,1,1,0,0,0,0,-1,0,1,1,-1,0,-1,0],c=[0,-1,0,0,1,1,1,1,0,-1,0,0,0,-1,0,0],h=["none","bottom","right","right","top","top","top","top","left","bottom","right","right","left","bottom","left","none"],l=(t[e][n],t[e][n]),p=l.cval,f=nt(l,o=["none","left","bottom","left","right","none","bottom","left","top","top","none","top","right","right","bottom","none"][p]);a.push([n+f[0],e+f[1]]),f=nt(l,o=h[p]),a.push([n+f[0],e+f[1]]),et(l);for(var g=n+u[p],d=e+c[p],y=p;0<=g&&0<=d&&d<s&&(g!=n||d!=e)&&void 0!==(l=t[d][g]);){if(0===(p=l.cval)||15===p)return{path:a,info:"mergeable"};o=h[p],r=u[p],i=c[p],5!==p&&10!==p||(5===p?l.flipped?i=(r=-1===c[y]?(o="left",-1):(o="right",1),0):-1===u[y]&&(o="bottom",r=0,i=-1):10===p&&(l.flipped?i=-1===u[y]?(o="top",r=0,1):(o="bottom",r=0,-1):1===c[y]&&(o="left",r=-1,i=0))),f=nt(l,o),a.push([g+f[0],d+f[1]]),et(l),g+=r,d+=i,y=p}return{path:a,info:"closed"}}(t.cells,i,o),a=!1;if("mergeable"===s.info)for(var u=s.path[s.path.length-1][0],c=s.path[s.path.length-1][1],h=n-1;0<=h;h--)if(Math.abs(e[h][0][0]-u)<=1e-7&&Math.abs(e[h][0][1]-c)<=1e-7){for(var l=s.path.length-2;0<=l;--l)e[h].unshift(s.path[l]);a=!0;break}a||(e[n++]=s.path)}})}),e}(function(t,e){for(var n=t.length-1,r=t[0].length-1,i={rows:n,cols:r,cells:[]},o=0;o<n;++o){i.cells[o]=[];for(var s=0;s<r;++s){var p,f,d,y,_,g,a=0,u=t[o+1][s],c=t[o+1][s+1],h=t[o][s+1],l=t[o][s];isNaN(u)||isNaN(c)||isNaN(h)||isNaN(l)||(a|=e<=u?8:0,a|=e<=c?4:0,a|=e<=h?2:0,p=!1,5!=(a|=e<=l?1:0)&&10!==a||(f=(u+c+h+l)/4,5===a&&f<e?(a=10,p=!0):10===a&&f<e&&(a=5,p=!0)),0!==a&&15!==a&&(g=d=y=_=.5,1===a?(y=1-$(e,u,l),d=1-$(e,h,l)):2===a?(d=$(e,l,h),_=1-$(e,c,h)):3===a?(y=1-$(e,u,l),_=1-$(e,c,h)):4===a?(g=$(e,u,c),_=$(e,h,c)):5===a?(g=$(e,u,c),_=$(e,h,c),d=1-$(e,h,l),y=1-$(e,u,l)):6===a?(d=$(e,l,h),g=$(e,u,c)):7===a?(y=1-$(e,u,l),g=$(e,u,c)):8===a?(y=$(e,l,u),g=1-$(e,c,u)):9===a?(d=1-$(e,h,l),g=1-$(e,c,u)):10===a?(g=1-$(e,c,u),_=1-$(e,c,h),d=$(e,l,h),y=$(e,l,u)):11===a?(g=1-$(e,c,u),_=1-$(e,c,h)):12===a?(y=$(e,l,u),_=$(e,h,c)):13===a?(d=1-$(e,h,l),_=$(e,h,c)):14===a?(y=$(e,l,u),d=$(e,l,h)):console.log("MarchingSquaresJS-isoContours: Illegal cval detected: "+a),i.cells[o][s]={cval:a,flipped:p,top:g,right:_,bottom:d,left:y}))}}return i}(t,e));return"function"==typeof Uo.successCallback&&Uo.successCallback(a),a}(t,u[n]=a),u);o.push(c)}return o}(s,e,r,i,o),s,t))},t.convex=Lt,t.pointsWithinPolygon=Rt,t.concave=function(t,n){if(!I(n=n||{}))throw new Error("options is invalid");if(!t)throw new Error("points is required");var r=n.maxEdge||1/0;if(!b(r))throw new Error("maxEdge is invalid");var i=Tt(function(t){var e=[],n={};return O(t,function(t){var r;t.geometry&&(r=t.geometry.coordinates.join("-"),n.hasOwnProperty(r)||(e.push(t),n[r]=!0))}),c(e)}(t));if(i.features=i.features.filter(function(t){var e=t.geometry.coordinates[0][0],i=t.geometry.coordinates[0][1],o=t.geometry.coordinates[0][2],s=qt(e,i,n),a=qt(i,o,n),u=qt(e,o,n);return s<=r&&a<=r&&u<=r}),i.features.length<1)return null;var o=$t(i,n);return 1===o.coordinates.length&&(o.coordinates=o.coordinates[0],o.type="Polygon"),e(o)},t.collect=function(t,e,n,r){var i=Vo(6),o=e.features.map(function(t){return{minX:t.geometry.coordinates[0],minY:t.geometry.coordinates[1],maxX:t.geometry.coordinates[0],maxY:t.geometry.coordinates[1],property:t.properties[n]}});return i.load(o),t.features.forEach(function(t){t.properties||(t.properties={});var e=j(t),n=[];i.search({minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}).forEach(function(e){Pt([e.minX,e.minY],t)&&n.push(e.property)}),t.properties[r]=n}),t},t.flip=function(t,e){if(!I(e=e||{}))throw new Error("options is invalid");var n=e.mutate;if(!t)throw new Error("geojson is required");return!1!==n&&void 0!==n||(t=Gt(t)),S(t,function(t){var e=t[0],n=t[1];t[0]=n,t[1]=e}),t},t.simplify=function(t,e){if(!I(e=e||{}))throw new Error("options is invalid");var n=void 0!==e.tolerance?e.tolerance:1,r=e.highQuality||!1,i=e.mutate||!1;if(!t)throw new Error("geojson is required");if(n&&n<0)throw new Error("invalid tolerance");return!0!==i&&(t=Gt(t)),A(t,function(t){!function(t,e,n){var r=t.type;if("Point"===r||"MultiPoint"===r)return;te(t,!0);var i=t.coordinates;switch(r){case"LineString":t.coordinates=se(i,e,n);break;case"MultiLineString":t.coordinates=i.map(function(t){return se(t,e,n)});break;case"Polygon":t.coordinates=ae(i,e,n);break;case"MultiPolygon":t.coordinates=i.map(function(t){return ae(t,e,n)})}}(t,n,r)}),t},t.bezierSpline=ue,t.tag=function(t,e,n,r){return t=Gt(t),e=Gt(e),O(t,function(t){t.properties||(t.properties={}),O(e,function(e){void 0===t.properties[r]&&Pt(t,e)&&(t.properties[r]=e.properties[n])})}),t},t.sample=function(t,e){if(!t)throw new Error("featurecollection is required");if(null==e)throw new Error("num is required");if("number"!=typeof e)throw new Error("num must be a number");return c(function(t,e){for(var n,r,i=t.slice(0),o=t.length,s=o-e;o-- >s;)n=i[r=Math.floor((o+1)*Math.random())],i[r]=i[o],i[o]=n;return i.slice(s)}(t.features,e))},t.envelope=he,t.square=le,t.circle=fe,t.midpoint=function(t,e){return pe(t,qt(t,e)/2,ge(t,e))},t.center=de,t.centerOfMass=function _e(t,e){switch(K(t)){case"Point":return t;case"Polygon":var n=[];S(t,function(t){n.push(t)});for(var o,s,a,u,c,h,l,p=ye(t,e),f=p.geometry.coordinates,g=0,d=0,y=0,_=n.map(function(t){return[t[0]-f[0],t[1]-f[1]]}),i=0;i<n.length-1;i++)a=(o=_[i])[0],c=o[1],u=(s=_[i+1])[0],y+=l=a*(h=s[1])-u*c,g+=(a+u)*l,d+=(c+h)*l;if(0===y)return p;var m=1/(.5*y*6);return r([f[0]+m*g,f[1]+m*d],e);default:var v=Lt(t);return v?_e(v,e):ye(t,e)}},t.centroid=ye,t.combine=function(t){function n(t,e,n){n?r[e].coordinates=r[e].coordinates.concat(t.geometry.coordinates):r[e].coordinates.push(t.geometry.coordinates),r[e].properties.push(t.properties)}var r={MultiPoint:{coordinates:[],properties:[]},MultiLineString:{coordinates:[],properties:[]},MultiPolygon:{coordinates:[],properties:[]}},i=Object.keys(r).reduce(function(t,e){return t[e.replace("Multi","")]=e,t},{});return O(t,function(t){t.geometry&&(r[t.geometry.type]?n(t,t.geometry.type,!0):i[t.geometry.type]&&n(t,i[t.geometry.type],!1))}),c(Object.keys(r).filter(function(t){return r[t].coordinates.length}).sort().map(function(t){return e({type:t,coordinates:r[t].coordinates},{collectedProperties:r[t].properties})}))},t.distance=qt,t.explode=me,t.bbox=j,t.tesselate=function(t){if(!t.geometry||"Polygon"!==t.geometry.type&&"MultiPolygon"!==t.geometry.type)throw new Error("input must be a Polygon or MultiPolygon");var e={type:"FeatureCollection",features:[]};return"Polygon"===t.geometry.type?e.features=De(t.geometry.coordinates):t.geometry.coordinates.forEach(function(t){e.features=e.features.concat(De(t))}),e},t.bboxPolygon=ce,t.booleanPointInPolygon=Pt,t.nearestPoint=Fe,t.nearestPointOnLine=on,t.nearestPointToLine=function(t,e,n){if(!I(n=n||{}))throw new Error("options is invalid");var r=n.units,i=n.properties||{};if(!t)throw new Error("points is required");if(!(t=function(t){var e=[];switch(t.geometry?t.geometry.type:t.type){case"GeometryCollection":return A(t,function(t){"Point"===t.type&&e.push({type:"Feature",properties:{},geometry:t})}),{type:"FeatureCollection",features:e};case"FeatureCollection":return t.features=t.features.filter(function(t){return"Point"===t.geometry.type}),t;default:throw new Error("points must be a Point Collection")}}(t)).features.length)throw new Error("points must contain features");if(!e)throw new Error("line is required");if("LineString"!==K(e))throw new Error("line must be a LineString");var o=1/0,s=null;return O(t,function(t){var n=gn(t,e,{units:r});n<o&&(o=n,s=t)}),s&&(s.properties=Object.assign({dist:o},s.properties,i)),s},t.planepoint=function(t,e){var n=X(t),r=J(e).coordinates[0];if(r.length<4)throw new Error("OuterRing of a Polygon must have 4 or more Positions.");var i=e.properties||{},o=i.a,s=i.b,a=i.c,u=n[0],c=n[1],h=r[0][0],l=r[0][1],p=void 0!==o?o:r[0][2],f=r[1][0],g=r[1][1],d=void 0!==s?s:r[1][2],y=r[2][0],_=r[2][1],m=void 0!==a?a:r[2][2];return(m*(u-h)*(c-g)+p*(u-f)*(c-_)+d*(u-y)*(c-l)-d*(u-h)*(c-_)-m*(u-f)*(c-l)-p*(u-y)*(c-g))/((u-h)*(c-g)+(u-f)*(c-_)+(u-y)*(c-l)-(u-h)*(c-_)-(u-f)*(c-l)-(u-y)*(c-g))},t.tin=Tt,t.bearing=ge,t.destination=pe,t.kinks=function(t){var e,n,i={type:"FeatureCollection",features:[]};if("LineString"===(n="Feature"===t.type?t.geometry:t).type)e=[n.coordinates];else if("MultiLineString"===n.type)e=n.coordinates;else if("MultiPolygon"===n.type)e=[].concat.apply([],n.coordinates);else{if("Polygon"!==n.type)throw new Error("Input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry");e=n.coordinates}return e.forEach(function(t){e.forEach(function(e){for(var n=0;n<t.length-1;n++)for(var o=n;o<e.length-1;o++){if(t===e){if(1===Math.abs(n-o))continue;if(0===n&&o===t.length-2&&t[n][0]===t[t.length-1][0]&&t[n][1]===t[t.length-1][1])continue}var s=function(t,e,n,r,i,o,s,a){var u,c,h,p,f={x:null,y:null,onLine1:!1,onLine2:!1};return 0==(u=(a-o)*(n-t)-(s-i)*(r-e))?null!==f.x&&null!==f.y&&f:(p=(n-t)*(c=e-o)-(r-e)*(h=t-i),c=((s-i)*c-(a-o)*h)/u,h=p/u,f.x=t+c*(n-t),f.y=e+c*(r-e),0<=c&&c<=1&&(f.onLine1=!0),0<=h&&h<=1&&(f.onLine2=!0),!(!f.onLine1||!f.onLine2)&&[f.x,f.y])}(t[n][0],t[n][1],t[n+1][0],t[n+1][1],e[o][0],e[o][1],e[o+1][0],e[o+1][1]);s&&i.features.push(r([s[0],s[1]]))}})}),i},t.pointOnFeature=yn,t.area=mn,t.along=function(t,e,n){if(!I(n=n||{}))throw new Error("options is invalid");var i;if("Feature"===t.type)i=t.geometry.coordinates;else{if("LineString"!==t.type)throw new Error("input must be a LineString Feature or Geometry");i=t.coordinates}if(!b(e))throw new Error("distance must be a number");for(var o=0,s=0;s<i.length&&!(o<=e&&s===i.length-1);s++){if(e<=o){var a=e-o;if(a){var u=ge(i[s],i[s-1])-180;return pe(i[s],a,u,n)}return r(i[s])}o+=qt(i[s],i[s+1],n)}return r(i[i.length-1])},t.length=bn,t.lineSlice=function(t,e,n){var r=U(n);if("LineString"!==K(n))throw new Error("line must be a LineString");for(var i,o=on(n,t),s=on(n,e),u=[(i=o.properties.index<=s.properties.index?[o,s]:[s,o])[0].geometry.coordinates],c=i[0].properties.index+1;c<i[1].properties.index+1;c++)u.push(r[c]);return u.push(i[1].geometry.coordinates),a(u,n.properties)},t.lineSliceAlong=In,t.pointGrid=Ln,t.truncate=Pn,t.flatten=function(t){if(!t)throw new Error("geojson is required");var e=[];return F(t,function(t){e.push(t)}),c(e)},t.lineIntersect=nn,t.lineChunk=function(t,e,n){if(!I(n=n||{}))throw new Error("options is invalid");var r=n.units,i=n.reverse;if(!t)throw new Error("geojson is required");if(e<=0)throw new Error("segmentLength must be greater than 0");var o=[];return F(t,function(t){i&&(t.geometry.coordinates=t.geometry.coordinates.reverse()),function(t,e,n,r){var i=bn(t,{units:n});if(i<=e)return r(t);var o=i/e;Number.isInteger(o)||(o=Math.floor(o)+1);for(var s=0;s<o;s++){r(In(t,e*s,e*(s+1),{units:n}))}}(t,e,r,function(t){o.push(t)})}),c(o)},t.unkinkPolygon=function(t){var e=[];return F(t,function(t){"Polygon"===t.geometry.type&&O(Ls(t),function(n){e.push(o(n.geometry.coordinates,t.properties))})}),c(e)},t.greatCircle=function(t,e,n){if("object"!=typeof(n=n||{}))throw new Error("options is invalid");var r=n.properties,i=n.npoints,o=n.offset;return t=X(t),e=X(e),r=r||{},i=i||100,o=o||10,new qs({x:t[0],y:t[1]},{x:e[0],y:e[1]},r).Arc(i,{offset:o}).json()},t.lineSegment=en,t.lineSplit=function(t,e){if(!t)throw new Error("line is required");if(!e)throw new Error("splitter is required");var n=K(t),r=K(e);if("LineString"!==n)throw new Error("line must be LineString");if("FeatureCollection"===r)throw new Error("splitter cannot be a FeatureCollection");if("GeometryCollection"===r)throw new Error("splitter cannot be a GeometryCollection");var i=Pn(e,{precision:7});switch(r){case"Point":return Dn(t,i);case"MultiPoint":return An(t,i);case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":return An(t,nn(t,i))}},t.lineArc=Gn,t.polygonToLine=kn,t.lineToPolygon=jn,t.bboxClip=function(t,e){var n=function(t){return t.geometry?t.geometry.type:t.type}(t),r=U(t),i=t.properties;switch(n){case"LineString":case"MultiLineString":var s=[];return"LineString"===n&&(r=[r]),r.forEach(function(t){Gs(t,e,s)}),1===s.length?a(s[0],i):h(s,i);case"Polygon":return o(Wn(r,e),i);case"MultiPolygon":return p(r.map(function(t){return Wn(t,e)}),i);default:throw new Error("geometry "+n+" not supported")}},t.lineOverlap=$n,t.sector=function(t,e,n,r,i){if(!I(i=i||{}))throw new Error("options is invalid");if(!t)throw new Error("center is required");if(null==n)throw new Error("bearing1 is required");if(null==r)throw new Error("bearing2 is required");if(!e)throw new Error("radius is required");if("object"!=typeof i)throw new Error("options must be an object");if(er(n)===er(r))return fe(t,e,i);var s=U(t),a=[[s]];return S(Gn(t,e,n,r,i),function(t){a[0].push(t)}),a[0].push(s),o(a)},t.rhumbBearing=sn,t.rhumbDistance=un,t.rhumbDestination=nr,t.polygonTangents=function(t,e){var o,s=U(t),a=U(e);switch(K(e)){case"Polygon":n=a[0][0],i=a[0][0],o=ir(a[0][0],a[0][a[0].length-1],s);var u=rr(a[0],s,o,void 0,n,i),n=u[0],i=u[1];break;case"MultiPolygon":n=a[0][0][0],i=a[0][0][0],o=ir(a[0][0][0],a[0][0][a[0][0].length-1],s),a.forEach(function(t){var e=rr(t[0],s,o,void 0,n,i);n=e[0],i=e[1]})}return c([r(n),r(i)])},t.rewind=function(t,e){if(!I(e=e||{}))throw new Error("options is invalid");var n=e.reverse||!1,r=e.mutate||!1;if(!t)throw new Error("<geojson> is required");if("boolean"!=typeof n)throw new Error("<reverse> must be a boolean");if("boolean"!=typeof r)throw new Error("<mutate> must be a boolean");!1===r&&(t=Gt(t));var i=[];switch(t.type){case"GeometryCollection":return A(t,function(t){sr(t,n)}),t;case"FeatureCollection":return O(t,function(t){O(sr(t,n),function(t){i.push(t)})}),c(i)}return sr(t,n)},t.isobands=function(t,e,n){if(!I(n=n||{}))throw new Error("options is invalid");var r=n.zProperty||"elevation",i=n.commonProperties||{},s=n.breaksProperties||[];if(W(t,"Point","Input must contain Points"),!e)throw new Error("breaks is required");if(!Array.isArray(e))throw new Error("breaks is not an Array");if(!I(i))throw new Error("commonProperties is not an Object");if(!Array.isArray(s))throw new Error("breaksProperties is not an Array");var a=function(t,e){if(!I(e=e||{}))throw new Error("options is invalid");var n=e.zProperty||"elevation",r=e.flip,i=e.flags;W(t,"Point","input must contain Points");for(var o=function(t,e){var n={};return O(t,function(t){var e=U(t)[1];n[e]||(n[e]=[]),n[e].push(t)}),Object.keys(n).map(function(t){return n[t].sort(function(t,e){return U(t)[0]-U(e)[0]})}).sort(function(t,n){return e?U(t[0])[1]-U(n[0])[1]:U(n[0])[1]-U(t[0])[1]})}(t,r),s=[],a=0;a<o.length;a++){for(var u=o[a],c=[],h=0;h<u.length;h++){var l=u[h];l.properties[n]?c.push(l.properties[n]):c.push(0),!0===i&&(l.properties.matrixPosition=[a,h])}s.push(c)}return s}(t,{zProperty:r,flip:!0}),u=function(t,e,n){for(var r=[],i=1;i<e.length;i++){var s=+e[i-1],a=+e[i],u=function(t,e,n,r){r=r||{};for(var i=Object.keys(ks),o=0;o<i.length;o++){var s=i[o],a=null!=(a=r[s])?a:ks[s];zs[s]=a}zs.verbose&&console.log("MarchingSquaresJS-isoBands: computing isobands for ["+e+":"+(e+n)+"]");var c=function(t,e,n){for(var r=t.length-1,i=t[0].length-1,o={rows:r,cols:i,cells:[]},s=e+Math.abs(n),a=0;a<r;++a){o.cells[a]=[];for(var u=0;u<i;++u){var g,y,d,m,v,x,E,w,b,I,_,N,c=0,h=t[a+1][u],l=t[a+1][u+1],p=t[a][u+1],f=t[a][u];isNaN(h)||isNaN(l)||isNaN(p)||isNaN(f)||(c|=h<e?0:s<h?128:64,c|=l<e?0:s<l?32:16,c|=p<e?0:s<p?8:4,g=+(c|=f<e?0:s<f?2:1),d=0,17!==c&&18!==c&&33!==c&&34!==c&&38!==c&&68!==c&&72!==c&&98!==c&&102!==c&&132!==c&&136!==c&&137!==c&&152!==c&&153!==c||(d=s<(y=(h+l+p+f)/4)?2:y<e?0:1,34===c?1===d?c=35:0===d&&(c=136):136===c?1===d?(c=35,d=4):0===d&&(c=34):17===c?1===d?(c=155,d=4):0===d&&(c=153):68===c?1===d?(c=103,d=4):0===d&&(c=102):153===c?1===d&&(c=155):102===c?1===d&&(c=103):152===c?d<2&&(c=156,d=1):137===c?d<2&&(c=139,d=1):98===c?d<2&&(c=99,d=1):38===c?d<2&&(c=39,d=1):18===c?0<d?(c=156,d=4):c=152:33===c?0<d?(c=139,d=4):c=137:72===c?0<d?(c=99,d=4):c=98:132===c&&(0<d?(c=39,d=4):c=38)),0!=c&&170!=c&&(_=m=v=x=E=w=b=I=.5,N=[],1===c?(v=1-lr(e,p,f),I=1-lr(e,h,f),N.push(Sa[c])):169===c?(v=lr(s,f,p),I=lr(s,f,h),N.push(Sa[c])):4===c?(w=1-lr(e,l,p),x=lr(e,f,p),N.push(Na[c])):166===c?(w=lr(s,p,l),x=1-lr(s,p,f),N.push(Na[c])):16===c?(E=lr(e,p,l),m=lr(e,h,l),N.push(Ia[c])):154===c?(E=1-lr(s,l,p),m=1-lr(s,l,h),N.push(Ia[c])):64===c?(b=lr(e,f,h),_=1-lr(e,l,h),N.push(La[c])):106===c?(b=1-lr(s,h,f),_=lr(s,h,l),N.push(La[c])):168===c?(x=lr(s,f,p),v=lr(e,f,p),I=lr(e,f,h),b=lr(s,f,h),N.push(Ca[c]),N.push(Sa[c])):2===c?(x=1-lr(e,p,f),v=1-lr(s,p,f),I=1-lr(s,h,f),b=1-lr(e,h,f),N.push(Ca[c]),N.push(Sa[c])):162===c?(E=lr(s,p,l),w=lr(e,p,l),x=1-lr(e,p,f),v=1-lr(s,p,f),N.push(Ca[c]),N.push(Sa[c])):8===c?(E=1-lr(e,l,p),w=1-lr(s,l,p),x=lr(s,f,p),v=lr(e,f,p),N.push(Ia[c]),N.push(Na[c])):138===c?(E=1-lr(e,l,p),w=1-lr(s,l,p),_=1-lr(s,l,h),m=1-lr(e,l,h),N.push(Ia[c]),N.push(Na[c])):32===c?(E=lr(s,p,l),w=lr(e,p,l),_=lr(e,h,l),m=lr(s,h,l),N.push(Ia[c]),N.push(Na[c])):42===c?(I=1-lr(s,h,f),b=1-lr(e,h,f),_=lr(e,h,l),m=lr(s,h,l),N.push(Ma[c]),N.push(La[c])):128===c&&(I=lr(e,f,h),b=lr(s,f,h),_=1-lr(s,l,h),m=1-lr(e,l,h),N.push(Ma[c]),N.push(La[c])),5===c?(w=1-lr(e,l,p),I=1-lr(e,h,f),N.push(Na[c])):165===c?(w=lr(s,p,l),I=lr(s,f,h),N.push(Na[c])):20===c?(x=lr(e,f,p),m=lr(e,h,l),N.push(Ca[c])):150===c?(x=1-lr(s,p,f),m=1-lr(s,l,h),N.push(Ca[c])):80===c?(E=lr(e,p,l),b=lr(e,f,h),N.push(Ia[c])):90===c?(E=1-lr(s,l,p),b=1-lr(s,h,f),N.push(Ia[c])):65===c?(v=1-lr(e,p,f),_=1-lr(e,l,h),N.push(Sa[c])):105===c?(v=lr(s,f,p),_=lr(s,h,l),N.push(Sa[c])):160===c?(E=lr(s,p,l),w=lr(e,p,l),I=lr(e,f,h),b=lr(s,f,h),N.push(Ia[c]),N.push(Na[c])):10===c?(E=1-lr(e,l,p),w=1-lr(s,l,p),I=1-lr(s,h,f),b=1-lr(e,h,f),N.push(Ia[c]),N.push(Na[c])):130===c?(x=1-lr(e,p,f),v=1-lr(s,p,f),_=1-lr(s,l,h),m=1-lr(e,l,h),N.push(Ca[c]),N.push(Sa[c])):40===c?(x=lr(s,f,p),v=lr(e,f,p),_=lr(e,h,l),m=lr(s,h,l),N.push(Ca[c]),N.push(Sa[c])):101===c?(w=lr(s,p,l),_=lr(s,h,l),N.push(Na[c])):69===c?(w=1-lr(e,l,p),_=1-lr(e,l,h),N.push(Na[c])):149===c?(I=lr(s,f,h),m=1-lr(s,l,h),N.push(Ma[c])):21===c?(I=1-lr(e,h,f),m=lr(e,h,l),N.push(Ma[c])):86===c?(x=1-lr(s,p,f),b=1-lr(s,h,f),N.push(Ca[c])):84===c?(x=lr(e,f,p),b=lr(e,f,h),N.push(Ca[c])):89===c?(E=1-lr(s,l,p),v=lr(s,f,p),N.push(Sa[c])):81===c?(E=lr(e,p,l),v=1-lr(e,p,f),N.push(Sa[c])):96===c?(E=lr(s,p,l),w=lr(e,p,l),b=lr(e,f,h),_=lr(s,h,l),N.push(Ia[c]),N.push(Na[c])):74===c?(E=1-lr(e,l,p),w=1-lr(s,l,p),b=1-lr(s,h,f),_=1-lr(e,l,h),N.push(Ia[c]),N.push(Na[c])):24===c?(E=1-lr(s,l,p),x=lr(s,f,p),v=lr(e,f,p),m=lr(e,h,l),N.push(Ia[c]),N.push(Sa[c])):146===c?(E=lr(e,p,l),x=1-lr(e,p,f),v=1-lr(s,p,f),m=1-lr(s,l,h),N.push(Ia[c]),N.push(Sa[c])):6===c?(w=1-lr(e,l,p),x=1-lr(s,p,f),I=1-lr(s,h,f),b=1-lr(e,h,f),N.push(Na[c]),N.push(Ca[c])):164===c?(w=lr(s,p,l),x=lr(e,f,p),I=lr(e,f,h),b=lr(s,f,h),N.push(Na[c]),N.push(Ca[c])):129===c?(v=1-lr(e,p,f),I=lr(s,f,h),_=1-lr(s,l,h),m=1-lr(e,l,h),N.push(Sa[c]),N.push(Ma[c])):41===c?(v=lr(s,f,p),I=1-lr(e,h,f),_=lr(e,h,l),m=lr(s,h,l),N.push(Sa[c]),N.push(Ma[c])):66===c?(x=1-lr(e,p,f),v=1-lr(s,p,f),b=1-lr(s,h,f),_=1-lr(e,l,h),N.push(Ca[c]),N.push(Sa[c])):104===c?(x=lr(s,f,p),v=lr(e,f,p),b=lr(e,f,h),_=lr(s,h,l),N.push(Sa[c]),N.push(Pa[c])):144===c?(E=lr(e,p,l),I=lr(e,f,h),b=lr(s,f,h),m=1-lr(s,l,h),N.push(Ia[c]),N.push(La[c])):26===c?(E=1-lr(s,l,p),I=1-lr(s,h,f),b=1-lr(e,h,f),m=lr(e,h,l),N.push(Ia[c]),N.push(La[c])):36===c?(w=lr(s,p,l),x=lr(e,f,p),_=lr(e,h,l),m=lr(s,h,l),N.push(Na[c]),N.push(Ca[c])):134===c?(w=1-lr(e,l,p),x=1-lr(s,p,f),_=1-lr(s,l,h),m=1-lr(e,l,h),N.push(Na[c]),N.push(Ca[c])):9===c?(E=1-lr(e,l,p),w=1-lr(s,l,p),v=lr(s,f,p),I=1-lr(e,h,f),N.push(Ia[c]),N.push(Na[c])):161===c?(E=lr(s,p,l),w=lr(e,p,l),v=1-lr(e,p,f),I=lr(s,f,h),N.push(Ia[c]),N.push(Na[c])):37===c?(w=lr(s,p,l),I=1-lr(e,h,f),_=lr(e,h,l),m=lr(s,h,l),N.push(Na[c]),N.push(Ma[c])):133===c?(w=1-lr(e,l,p),I=lr(s,f,h),_=1-lr(s,l,h),m=1-lr(e,l,h),N.push(Na[c]),N.push(Ma[c])):148===c?(x=lr(e,f,p),I=lr(e,f,h),b=lr(s,f,h),m=1-lr(s,l,h),N.push(Ca[c]),N.push(La[c])):22===c?(x=1-lr(s,p,f),I=1-lr(s,h,f),b=1-lr(e,h,f),m=lr(e,h,l),N.push(Ca[c]),N.push(La[c])):82===c?(E=lr(e,p,l),x=1-lr(e,p,f),v=1-lr(s,p,f),b=1-lr(s,h,f),N.push(Ia[c]),N.push(Sa[c])):88===c?(E=1-lr(s,l,p),x=lr(s,f,p),v=lr(e,f,p),b=lr(e,f,h),N.push(Ia[c]),N.push(Sa[c])):73===c?(E=1-lr(e,l,p),w=1-lr(s,l,p),v=lr(s,f,p),_=1-lr(e,l,h),N.push(Ia[c]),N.push(Na[c])):97===c?(E=lr(s,p,l),w=lr(e,p,l),v=1-lr(e,p,f),_=lr(s,h,l),N.push(Ia[c]),N.push(Na[c])):145===c?(E=lr(e,p,l),v=1-lr(e,p,f),I=lr(s,f,h),m=1-lr(s,l,h),N.push(Ia[c]),N.push(Ma[c])):25===c?(E=1-lr(s,l,p),v=lr(s,f,p),I=1-lr(e,h,f),m=lr(e,h,l),N.push(Ia[c]),N.push(Ma[c])):70===c?(w=1-lr(e,l,p),x=1-lr(s,p,f),b=1-lr(s,h,f),_=1-lr(e,l,h),N.push(Na[c]),N.push(Ca[c])):100===c?(w=lr(s,p,l),x=lr(e,f,p),b=lr(e,f,h),_=lr(s,h,l),N.push(Na[c]),N.push(Ca[c])):34===c?(m=0===d?(E=1-lr(e,l,p),w=1-lr(s,l,p),x=lr(s,f,p),v=lr(e,f,p),I=lr(e,f,h),b=lr(s,f,h),_=1-lr(s,l,h),1-lr(e,l,h)):(E=lr(s,p,l),w=lr(e,p,l),x=1-lr(e,p,f),v=1-lr(s,p,f),I=1-lr(s,h,f),b=1-lr(e,h,f),_=lr(e,h,l),lr(s,h,l)),N.push(Ia[c]),N.push(Na[c]),N.push(Ma[c]),N.push(La[c])):35===c?(m=4===d?(E=1-lr(e,l,p),w=1-lr(s,l,p),x=lr(s,f,p),v=lr(e,f,p),I=lr(e,f,h),b=lr(s,f,h),_=1-lr(s,l,h),1-lr(e,l,h)):(E=lr(s,p,l),w=lr(e,p,l),x=1-lr(e,p,f),v=1-lr(s,p,f),I=1-lr(s,h,f),b=1-lr(e,h,f),_=lr(e,h,l),lr(s,h,l)),N.push(Ia[c]),N.push(Na[c]),N.push(Sa[c]),N.push(La[c])):136===c?(m=0===d?(E=lr(s,p,l),w=lr(e,p,l),x=1-lr(e,p,f),v=1-lr(s,p,f),I=1-lr(s,h,f),b=1-lr(e,h,f),_=lr(e,h,l),lr(s,h,l)):(E=1-lr(e,l,p),w=1-lr(s,l,p),x=lr(s,f,p),v=lr(e,f,p),I=lr(e,f,h),b=lr(s,f,h),_=1-lr(s,l,h),1-lr(e,l,h)),N.push(Ia[c]),N.push(Na[c]),N.push(Ma[c]),N.push(La[c])):153===c?(m=0===d?(E=lr(e,p,l),v=1-lr(e,p,f),I=1-lr(e,h,f),lr(e,h,l)):(E=1-lr(s,l,p),v=lr(s,f,p),I=lr(s,f,h),1-lr(s,l,h)),N.push(Ia[c]),N.push(Sa[c])):102===c?(_=0===d?(w=1-lr(e,l,p),x=lr(e,f,p),b=lr(e,f,h),1-lr(e,l,h)):(w=lr(s,p,l),x=1-lr(s,p,f),b=1-lr(s,h,f),lr(s,h,l)),N.push(Na[c]),N.push(La[c])):155===c?(m=4===d?(E=lr(e,p,l),v=1-lr(e,p,f),I=1-lr(e,h,f),lr(e,h,l)):(E=1-lr(s,l,p),v=lr(s,f,p),I=lr(s,f,h),1-lr(s,l,h)),N.push(Ia[c]),N.push(Ma[c])):103===c?(_=4===d?(w=1-lr(e,l,p),x=lr(e,f,p),b=lr(e,f,h),1-lr(e,l,h)):(w=lr(s,p,l),x=1-lr(s,p,f),b=1-lr(s,h,f),lr(s,h,l)),N.push(Na[c]),N.push(Ca[c])):152===c?(m=0===d?(E=lr(e,p,l),x=1-lr(e,p,f),v=1-lr(s,p,f),I=1-lr(s,h,f),b=1-lr(e,h,f),lr(e,h,l)):(E=1-lr(s,l,p),x=lr(s,f,p),v=lr(e,f,p),I=lr(e,f,h),b=lr(s,f,h),1-lr(s,l,h)),N.push(Ia[c]),N.push(Ca[c]),N.push(Sa[c])):156===c?(m=4===d?(E=lr(e,p,l),x=1-lr(e,p,f),v=1-lr(s,p,f),I=1-lr(s,h,f),b=1-lr(e,h,f),lr(e,h,l)):(E=1-lr(s,l,p),x=lr(s,f,p),v=lr(e,f,p),I=lr(e,f,h),b=lr(s,f,h),1-lr(s,l,h)),N.push(Ia[c]),N.push(Sa[c]),N.push(La[c])):137===c?(m=0===d?(E=lr(s,p,l),w=lr(e,p,l),v=1-lr(e,p,f),I=1-lr(e,h,f),_=lr(e,h,l),lr(s,h,l)):(E=1-lr(e,l,p),w=1-lr(s,l,p),v=lr(s,f,p),I=lr(s,f,h),_=1-lr(s,l,h),1-lr(e,l,h)),N.push(Ia[c]),N.push(Na[c]),N.push(Sa[c])):139===c?(m=4===d?(E=lr(s,p,l),w=lr(e,p,l),v=1-lr(e,p,f),I=1-lr(e,h,f),_=lr(e,h,l),lr(s,h,l)):(E=1-lr(e,l,p),w=1-lr(s,l,p),v=lr(s,f,p),I=lr(s,f,h),_=1-lr(s,l,h),1-lr(e,l,h)),N.push(Ia[c]),N.push(Na[c]),N.push(Ma[c])):98===c?(_=0===d?(E=1-lr(e,l,p),w=1-lr(s,l,p),x=lr(s,f,p),v=lr(e,f,p),b=lr(e,f,h),1-lr(e,l,h)):(E=lr(s,p,l),w=lr(e,p,l),x=1-lr(e,p,f),v=1-lr(s,p,f),b=1-lr(s,h,f),lr(s,h,l)),N.push(Ia[c]),N.push(Na[c]),N.push(La[c])):99===c?(_=4===d?(E=1-lr(e,l,p),w=1-lr(s,l,p),x=lr(s,f,p),v=lr(e,f,p),b=lr(e,f,h),1-lr(e,l,h)):(E=lr(s,p,l),w=lr(e,p,l),x=1-lr(e,p,f),v=1-lr(s,p,f),b=1-lr(s,h,f),lr(s,h,l)),N.push(Ia[c]),N.push(Na[c]),N.push(Sa[c])):38===c?(m=0===d?(w=1-lr(e,l,p),x=lr(e,f,p),I=lr(e,f,h),b=lr(s,f,h),_=1-lr(s,l,h),1-lr(e,l,h)):(w=lr(s,p,l),x=1-lr(s,p,f),I=1-lr(s,h,f),b=1-lr(e,h,f),_=lr(e,h,l),lr(s,h,l)),N.push(Na[c]),N.push(Ma[c]),N.push(La[c])):39===c?(m=4===d?(w=1-lr(e,l,p),x=lr(e,f,p),I=lr(e,f,h),b=lr(s,f,h),_=1-lr(s,l,h),1-lr(e,l,h)):(w=lr(s,p,l),x=1-lr(s,p,f),I=1-lr(s,h,f),b=1-lr(e,h,f),_=lr(e,h,l),lr(s,h,l)),N.push(Na[c]),N.push(Ca[c]),N.push(La[c])):85===c&&(_=I=v=w=0,m=b=x=E=1),(_<0||1<_||m<0||1<m||E<0||1<E||x<0||1<x||I<0||1<I||b<0||1<b)&&console.log("MarchingSquaresJS-isoBands: "+c+" "+g+" "+h+","+l+","+p+","+f+" "+d+" "+_+" "+m+" "+E+" "+w+" "+x+" "+v+" "+I+" "+b),o.cells[a][u]={cval:c,cval_real:g,flipped:d,topleft:_,topright:m,righttop:E,rightbottom:w,bottomright:x,bottomleft:v,leftbottom:I,lefttop:b,edges:N}))}}return o}(t,e,n),u=zs.polygons?(zs.verbose&&console.log("MarchingSquaresJS-isoBands: returning single polygons for each grid cell"),function(){var e=[],n=0;return c.cells.forEach(function(t,r){t.forEach(function(t,i){var o;void 0!==t&&("object"==typeof(o=Ra[t.cval](t))&&pr(o)?"object"==typeof o[0]&&pr(o[0])?"object"==typeof o[0][0]&&pr(o[0][0])?o.forEach(function(t){t.forEach(function(t){t[0]+=i,t[1]+=r}),e[n++]=t}):(o.forEach(function(t){t[0]+=i,t[1]+=r}),e[n++]=o):console.log("MarchingSquaresJS-isoBands: bandcell polygon with malformed coordinates"):console.log("MarchingSquaresJS-isoBands: bandcell polygon with null coordinates"))})}),e}()):(zs.verbose&&console.log("MarchingSquaresJS-isoBands: returning polygon paths for entire data grid"),function(t){for(var e=[],n=t.rows,r=t.cols,i=[],o=0;o<n;o++)for(var s=0;s<r;s++)if(void 0!==t.cells[o][s]&&0<t.cells[o][s].edges.length){var c,u=function(t){if(0<t.edges.length){var e=t.edges[t.edges.length-1],n=t.cval_real;switch(e){case 0:return n&Xs?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[t.topleft,1],x:0,y:-1,o:0};case 1:return n&Us?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 2:return n&Us?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[t.topleft,1],x:0,y:-1,o:0};case 3:return n&Ys?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 4:return n&Xs?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[t.topright,1],x:0,y:-1,o:1};case 5:return n&Us?{p:[t.topright,1],x:0,y:-1,o:1}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 6:return n&Us?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[t.topright,1],x:0,y:-1,o:1};case 7:return n&Ys?{p:[t.topright,1],x:0,y:-1,o:1}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 8:return n&Us?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[1,t.righttop],x:-1,y:0,o:1};case 9:return n&Ys?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 10:return n&Ys?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[1,t.righttop],x:-1,y:0,o:1};case 11:return n&js?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[0,t.lefttop],x:1,y:0,o:1};case 12:return n&Us?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 13:return n&Ys?{p:[1,t.rightbottom],x:-1,y:0,o:0}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 14:return n&Ys?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 15:return n&js?{p:[1,t.rightbottom],x:-1,y:0,o:0}:{p:[0,t.lefttop],x:1,y:0,o:1};case 16:return n&Us?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[0,t.leftbottom],x:1,y:0,o:0};case 17:return n&js?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[0,t.lefttop],x:1,y:0,o:1};case 18:return n&Ys?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 19:return n&js?{p:[t.bottomleft,0],x:0,y:1,o:0}:{p:[0,t.lefttop],x:1,y:0,o:1};case 20:return n&js?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[0,t.leftbottom],x:1,y:0,o:0};case 21:return n&Xs?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[t.topright,1],x:0,y:-1,o:1};case 22:return n&js?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[0,t.lefttop],x:1,y:0,o:1};case 23:return n&Xs?{p:[0,t.lefttop],x:1,y:0,o:1}:{p:[t.topright,1],x:0,y:-1,o:1};default:console.log("MarchingSquaresJS-isoBands: edge index out of range!"),console.log(t)}}return null}(t.cells[o][s]),h=s,l=o;null!==u&&i.push([u.p[0]+h,u.p[1]+l]);do{if(null===(c=function(t,e,n,r){var i,o,s,a,u,c=t.cval;switch(e){case-1:u=0===r?(i=Na[c],s=ea[c],a=na[c],ra[c]):(i=Ia[c],s=Qs[c],a=$s[c],ta[c]);break;case 1:u=0===r?(i=Ma[c],s=fa[c],a=ga[c],da[c]):(i=La[c],s=ha[c],a=la[c],pa[c]);break;default:switch(n){case-1:u=0===r?(i=Pa[c],s=Vs[c],a=Hs[c],Ws[c]):(i=Oa[c],s=Js[c],a=Zs[c],Ks[c]);break;case 1:u=0===r?(i=Sa[c],s=ia[c],a=oa[c],sa[c]):(i=Ca[c],s=aa[c],a=ua[c],ca[c])}}if(o=t.edges.indexOf(i),void 0===t.edges[o])return null;switch(!function(t,e){delete t.edges[e];for(var n=e+1;n<t.edges.length;n++)t.edges[n-1]=t.edges[n];t.edges.pop()}(t,o),c=t.cval_real,i){case 0:n=c&Xs?(e=t.topleft,1):(e=1,t.righttop);break;case 1:n=c&Us?(e=1,t.rightbottom):(e=t.topleft,1);break;case 2:n=c&Us?(e=t.topleft,1):(e=t.bottomright,0);break;case 3:n=c&Ys?(e=t.bottomleft,0):(e=t.topleft,1);break;case 4:n=c&Xs?(e=t.topright,1):(e=1,t.righttop);break;case 5:n=c&Us?(e=1,t.rightbottom):(e=t.topright,1);break;case 6:n=c&Us?(e=t.topright,1):(e=t.bottomright,0);break;case 7:n=c&Ys?(e=t.bottomleft,0):(e=t.topright,1);break;case 8:n=c&Us?(e=1,t.righttop):(e=t.bottomright,0);break;case 9:n=c&Ys?(e=t.bottomleft,0):(e=1,t.righttop);break;case 10:n=c&Ys?(e=1,t.righttop):(e=0,t.leftbottom);break;case 11:n=c&js?(e=0,t.lefttop):(e=1,t.righttop);break;case 12:n=c&Us?(e=1,t.rightbottom):(e=t.bottomright,0);break;case 13:n=c&Ys?(e=t.bottomleft,0):(e=1,t.rightbottom);break;case 14:n=c&Ys?(e=1,t.rightbottom):(e=0,t.leftbottom);break;case 15:n=c&js?(e=0,t.lefttop):(e=1,t.rightbottom);break;case 16:n=c&Us?(e=0,t.leftbottom):(e=t.bottomright,0);break;case 17:n=c&js?(e=0,t.lefttop):(e=t.bottomright,0);break;case 18:n=c&Ys?(e=t.bottomleft,0):(e=0,t.leftbottom);break;case 19:n=c&js?(e=0,t.lefttop):(e=t.bottomleft,0);break;case 20:n=c&js?(e=0,t.leftbottom):(e=t.topleft,1);break;case 21:n=c&Xs?(e=t.topright,1):(e=0,t.leftbottom);break;case 22:n=c&js?(e=0,t.lefttop):(e=t.topleft,1);break;case 23:n=c&Xs?(e=t.topright,1):(e=0,t.lefttop);break;default:return console.log("MarchingSquaresJS-isoBands: edge index out of range!"),console.log(t),null}return void 0!==e&&void 0!==n&&void 0!==s&&void 0!==a&&void 0!==u||(console.log("MarchingSquaresJS-isoBands: undefined value!"),console.log(t),console.log(e+" "+n+" "+s+" "+a+" "+u)),{p:[e,n],x:s,y:a,o:u}}(t.cells[l][h],u.x,u.y,u.o)))break;if(i.push([c.p[0]+h,c.p[1]+l]),h+=c.x,(l+=(u=c).y)<0||n<=l||h<0||r<=h||void 0===t.cells[l][h]){var p=function(t,e,n,r,i,o){for(var s=t.cells[n][e],a=s.cval_real,u=e+r,c=n+i,h=[],l=!1;!l;){if(void 0===t.cells[c]||void 0===t.cells[c][u])if(c-=i,u-=r,a=(s=t.cells[c][u]).cval_real,-1===i)if(0===o)if(a&Ys)h.push([u,c]),r=-1,o=i=0;else{if(!(a&Us)){h.push([u+s.bottomright,c]),o=i=1,l=!(r=0);break}h.push([u+1,c]),r=1,o=i=0}else{if(!(a&Ys)){if(a&Us){h.push([u+s.bottomright,c]),o=i=1,l=!(r=0);break}h.push([u+s.bottomleft,c]),i=1,l=!(o=r=0);break}h.push([u,c]),r=-1,o=i=0}else if(1===i)if(0===o){if(!(a&Xs)){if(a&js){h.push([u+s.topleft,c+1]),i=-1,l=!(o=r=0);break}h.push([u+s.topright,c+1]),i=-1,o=1,l=!(r=0);break}h.push([u+1,c+1]),i=0,o=r=1}else h.push([u+1,c+1]),i=0,o=r=1;else if(-1===r)if(0===o){if(!(a&js)){if(a&Ys){h.push([u,c+s.leftbottom]),r=1,l=!(o=i=0);break}h.push([u,c+s.lefttop]),o=r=1,l=!(i=0);break}h.push([u,c+1]),i=1,o=r=0}else{if(!(a&js)){console.log("MarchingSquaresJS-isoBands: wtf");break}h.push([u,c+1]),i=1,o=r=0}else{if(1!==r){console.log("MarchingSquaresJS-isoBands: we came from nowhere!");break}if(0===o){if(!(a&Us)){h.push([u+1,c+s.rightbottom]),r=-1,l=!(o=i=0);break}h.push([u+1,c]),r=0,i=-1,o=1}else{if(!(a&Us)){if(a&Xs){h.push([u+1,c+s.righttop]),r=-1,i=0,o=1;break}h.push([u+1,c+s.rightbottom]),r=-1,l=!(o=i=0);break}h.push([u+1,c]),r=0,i=-1,o=1}}else if(a=(s=t.cells[c][u]).cval_real,-1===r)if(0===o)if(void 0!==t.cells[c-1]&&void 0!==t.cells[c-1][u])r=0,i=-1,o=1;else{if(!(a&Ys)){h.push([u+s.bottomright,c]),o=i=1,l=!(r=0);break}h.push([u,c])}else{if(!(a&js)){console.log("MarchingSquaresJS-isoBands: found entry from top at "+u+","+c);break}console.log("MarchingSquaresJS-isoBands: proceeding in x-direction!")}else if(1===r){if(0===o){console.log("MarchingSquaresJS-isoBands: wtf");break}if(void 0!==t.cells[c+1]&&void 0!==t.cells[c+1][u])i=1,o=r=0;else{if(!(a&Xs)){h.push([u+s.topleft,c+1]),i=-1,l=!(o=r=0);break}h.push([u+1,c+1]),i=0,o=r=1}}else if(-1===i){if(1!==o){console.log("MarchingSquaresJS-isoBands: wtf");break}if(void 0!==t.cells[c][u+1])i=0,o=r=1;else{if(!(a&Us)){h.push([u+1,c+s.righttop]),r=-1,o=1,l=!(i=0);break}h.push([u+1,c]),r=0,i=-1,o=1}}else{if(1!==i){console.log("MarchingSquaresJS-isoBands: where did we came from???");break}if(0!==o){console.log("MarchingSquaresJS-isoBands: wtf");break}if(void 0!==t.cells[c][u-1])r=-1,o=i=0;else{if(!(a&js)){h.push([u,c+s.leftbottom]),r=1,l=!(o=i=0);break}h.push([u,c+1]),i=1,o=r=0}}if(c+=i,(u+=r)===e&&c===n)break}return{path:h,i:u,j:c,x:r,y:i,o:o}}(t,h-=c.x,l-=c.y,c.x,c.y,c.o);if(null===p)break;p.path.forEach(function(t){i.push(t)}),h=p.i,l=p.j,u=p}}while(void 0!==t.cells[l][h]&&0<t.cells[l][h].edges.length);e.push(i),i=[],0<t.cells[o][s].edges.length&&s--}return e}(c));return"function"==typeof zs.successCallback&&zs.successCallback(u),u}(t,s,a-s),c=function(){var e=[],n=[];u.forEach(function(t){var r=mn(o([t]));n.push(r),e.push({ring:t,area:r})}),n.sort(function(t,e){return e-t});var r=[];return n.forEach(function(t){for(var n=0;n<e.length;n++)if(e[n].area===t){r.push(e[n].ring),e.splice(n,1);break}}),r}(),h=function(){for(var e=c.map(function(t){return{lrCoordinates:t,grouped:!1}}),n=[];!function(t){for(var e=0;e<t.length;e++)if(!1===t[e].grouped)return;return 1}(e);)for(var r=0;r<e.length;r++)if(!e[r].grouped){var i=[];i.push(e[r].lrCoordinates),e[r].grouped=!0;for(var u,s=o([e[r].lrCoordinates]),a=r+1;a<e.length;a++){e[a].grouped||(u=o([e[a].lrCoordinates]),function(e){for(var n=me(u),r=0;r<n.features.length;r++)if(!Pt(n.features[r],e))return;return 1}(s)&&(i.push(e[a].lrCoordinates),e[a].grouped=!0))}n.push(i)}return n}(),l={};l.groupedRings=h,l[n]=s+"-"+a,r.push(l)}return r}(a,e,r);return c((u=function(t,e,n){function p(t){t[0]=t[0]*h+s,t[1]=t[1]*l+a}var r=j(n),i=r[2]-r[0],o=r[3]-r[1],s=r[0],a=r[1],u=e[0].length-1,c=e.length-1,h=i/u,l=o/c;return t.forEach(function(t){t.groupedRings.forEach(function(t){t.forEach(function(t){t.forEach(p)})})}),t}(u,a,t)).map(function(t,e){if(s[e]&&!I(s[e]))throw new Error("Each mappedProperty is required to be an Object");var n=Object.assign({},i,s[e]);return n[r]=t[r],p(t.groupedRings,n)}))},t.transformRotate=fr,t.transformScale=gr,t.transformTranslate=function(t,e,n,r){if(!I(r=r||{}))throw new Error("options is invalid");var i=r.units,o=r.zTranslation,s=r.mutate;if(!t)throw new Error("geojson is required");if(null==e||isNaN(e))throw new Error("distance is required");if(o&&"number"!=typeof o&&isNaN(o))throw new Error("zTranslation is not a number");if(o=void 0!==o?o:0,0===e&&0===o)return t;if(null==n||isNaN(n))throw new Error("direction is required");return e<0&&(e=-e,n=-n),!1!==s&&void 0!==s||(t=Gt(t)),S(t,function(t){var r=U(nr(t,e,n,{units:i}));t[0]=r[0],t[1]=r[1],o&&3===t.length&&(t[2]+=o)}),t},t.lineOffset=function(t,e,n){if(!I(n=n||{}))throw new Error("options is invalid");var r=n.units;if(!t)throw new Error("geojson is required");if(null==e||isNaN(e))throw new Error("distance is required");var i=K(t),o=t.properties;switch(i){case"LineString":return vr(t,e,r);case"MultiLineString":var s=[];return F(t,function(t){s.push(vr(t,e,r).geometry.coordinates)}),h(s,o);default:throw new Error("geometry "+i+" is not supported")}},t.polygonize=function(t){var e=qa.fromGeoJson(t);e.deleteDangles(),e.deleteCutEdges();var n=[],r=[];return e.getEdgeRings().filter(function(t){return t.isValid()}).forEach(function(t){t.isHole()?n.push(t):r.push(t)}),n.forEach(function(t){Da.findEdgeRingContaining(t,r)&&r.push(t)}),c(r.map(function(t){return t.toPolygon()}))},t.booleanDisjoint=function(t,e){var n;return F(t,function(t){F(e,function(e){return!1!==n&&void(n=function(t,e){switch(t.type){case"Point":switch(e.type){case"Point":return!function(t,e){return t[0]===e[0]&&t[1]===e[1]}(t.coordinates,e.coordinates);case"LineString":return!wr(e,t);case"Polygon":return!Pt(t,e)}break;case"LineString":switch(e.type){case"Point":return!wr(t,e);case"LineString":return!function(t,e){return 0<nn(t,e).features.length}(t,e);case"Polygon":return!br(e,t)}break;case"Polygon":switch(e.type){case"Point":return!Pt(e,t);case"LineString":return!br(t,e);case"Polygon":return!function(t,e){for(var n=0;n<t.coordinates[0].length;n++)if(Pt(t.coordinates[0][n],e))return 1;for(var r=0;r<e.coordinates[0].length;r++)if(Pt(e.coordinates[0][r],t))return 1}(e,t)}}}(t.geometry,e.geometry))})}),n},t.booleanContains=function(t,e){var n=K(t),r=K(e),i=J(t),o=J(e),s=U(t),a=U(e);switch(n){case"Point":if("Point"!==r)throw new Error("feature2 "+r+" geometry not supported");return Nr(s,a);case"MultiPoint":switch(r){case"Point":return function(t,e){for(var r=!1,n=0;n<t.coordinates.length;n++)if(Nr(t.coordinates[n],e.coordinates)){r=!0;break}return r}(i,o);case"MultiPoint":return function(t,e){for(var n=0;n<e.coordinates.length;n++){for(var r=!1,i=0;i<t.coordinates.length;i++)if(Nr(e.coordinates[n],t.coordinates[i])){r=!0;break}if(!r)return!1}return!0}(i,o);default:throw new Error("feature2 "+r+" geometry not supported")}case"LineString":switch(r){case"Point":return Nn(o,i,{ignoreEndVertices:!0});case"LineString":return function(t,e){for(var n=!1,r=0;r<e.coordinates.length;r++)if(Nn({type:"Point",coordinates:e.coordinates[r]},t,{ignoreEndVertices:!0})&&(n=!0),!Nn({type:"Point",coordinates:e.coordinates[r]},t,{ignoreEndVertices:!1}))return!1;return n}(i,o);case"MultiPoint":return function(t,e){for(var n=!1,r=0;r<e.coordinates.length;r++)if(Nn(e.coordinates[r],t,{ignoreEndVertices:!0})&&(n=!0),!Nn(e.coordinates[r],t))return!1;return!!n}(i,o);default:throw new Error("feature2 "+r+" geometry not supported")}case"Polygon":switch(r){case"Point":return Pt(o,i,{ignoreBoundary:!0});case"LineString":return function(t,e){var n=!1,r=0;if(!Ir(j(t),j(e)))return!1;for(;r<e.coordinates.length-1;r++){if(Pt({type:"Point",coordinates:function(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2]}(e.coordinates[r],e.coordinates[r+1])},t,{ignoreBoundary:!0})){n=!0;break}}return n}(i,o);case"Polygon":return function(t,e){if(!Ir(j(t),j(e)))return!1;for(var i=0;i<e.coordinates[0].length;i++)if(!Pt(e.coordinates[0][i],t))return!1;return!0}(i,o);case"MultiPoint":return function(t,e){for(var n=0;n<e.coordinates.length;n++)if(!Pt(e.coordinates[n],t,{ignoreBoundary:!0}))return!1;return!0}(i,o);default:throw new Error("feature2 "+r+" geometry not supported")}default:throw new Error("feature1 "+n+" geometry not supported")}},t.booleanCrosses=function(t,e){var n=K(t),r=K(e),i=J(t),o=J(e);switch(n){case"MultiPoint":switch(r){case"LineString":return Cr(i,o);case"Polygon":return Mr(i,o);default:throw new Error("feature2 "+r+" geometry not supported")}case"LineString":switch(r){case"MultiPoint":return Cr(o,i);case"LineString":return function(t,e){if(0<nn(t,e).features.length)for(var n=0;n<t.coordinates.length-1;n++)for(var r=0;r<e.coordinates.length-1;r++){var i=!0;if(0!==r&&r!==e.coordinates.length-2||(i=!1),Lr(t.coordinates[n],t.coordinates[n+1],e.coordinates[r],i))return!0}return!1}(i,o);case"Polygon":return Sr(i,o);default:throw new Error("feature2 "+r+" geometry not supported")}case"Polygon":switch(r){case"MultiPoint":return Mr(o,i);case"LineString":return Sr(o,i);default:throw new Error("feature2 "+r+" geometry not supported")}default:throw new Error("feature1 "+n+" geometry not supported")}},t.booleanClockwise=or,t.booleanOverlap=Tr,t.booleanPointOnLine=Nn,t.booleanEqual=function(t,e){if(!t)throw new Error("feature1 is required");if(!e)throw new Error("feature2 is required");return K(t)===K(e)&&new ja({precision:6}).compare(te(t),te(e))},t.booleanWithin=Cn,t.clone=Gt,t.cleanCoords=te,t.clustersDbscan=function(t,e,n){if("object"!=typeof(n=n||{}))throw new Error("options is invalid");var r=n.minPoints,i=n.units;if(W(t,"Point","Input must contain Points"),null==e)throw new Error("maxDistance is required");if(!(0<Math.sign(e)))throw new Error("Invalid maxDistance");if(!(null==r||0<Math.sign(r)))throw new Error("Invalid minPoints");t=Gt(t),r=r||3;var o=new Ha.DBSCAN,s=-1;return o.run(T(t),E(e,i),r,qt).forEach(function(e){s++,e.forEach(function(e){var n=t.features[e];n.properties||(n.properties={}),n.properties.cluster=s,n.properties.dbscan="core"})}),o.noise.forEach(function(e){var n=t.features[e];n.properties||(n.properties={}),n.properties.cluster?n.properties.dbscan="edge":n.properties.dbscan="noise"}),t},t.clustersKmeans=function(t,e){if("object"!=typeof(e=e||{}))throw new Error("options is invalid");var n=e.numberOfClusters,r=e.mutate;W(t,"Point","Input must contain Points");var i=t.features.length;(n=n||Math.round(Math.sqrt(i/2)))>i&&(n=i),!1!==r&&void 0!==r||(t=Gt(t));var o=T(t),s=o.slice(0,n),a=eu(o,n,s),u={};return a.centroids.forEach(function(t,e){u[e]=t}),O(t,function(t,e){var n=a.idxs[e];t.properties.cluster=n,t.properties.centroid=u[n]}),t},t.pointToLineDistance=gn,t.booleanParallel=function(t,e){if(!t)throw new Error("line1 is required");if(!e)throw new Error("line2 is required");if("LineString"!==Dr(t,"line1"))throw new Error("line1 must be a LineString");if("LineString"!==Dr(e,"line2"))throw new Error("line2 must be a LineString");for(var n=en(te(t)).features,r=en(te(e)).features,i=0;i<n.length;i++){var o=n[i].geometry.coordinates;if(!r[i])break;if(!function(e){return m(sn(o[0],o[1]))===m(sn(e[0],e[1]))}(r[i].geometry.coordinates))return!1}return!0},t.shortestPath=function(t,n,i){if(!I(i=i||{}))throw new Error("options is invalid");var o=i.resolution,s=i.minDistance,u=i.obstacles||c([]);if(!t)throw new Error("start is required");if(!n)throw new Error("end is required");if(o&&!b(o)||o<=0)throw new Error("options.resolution must be a number, greater than 0");if(s)throw new Error("options.minDistance is not yet implemented");var h=X(t),l=X(n);switch(t=r(h),n=r(l),K(u)){case"FeatureCollection":if(0===u.features.length)return a([h,l]);break;case"Polygon":u=c([e(J(u))]);break;default:throw new Error("invalid obstacles")}var p=u;p.features.push(t),p.features.push(n);var f=j(gr(ce(j(p)),1.15)),o=o||qt([f[0],f[1]],[f[2],f[1]],i)/100;p.features.pop(),p.features.pop();for(var g=f[0],d=f[1],y=f[2],_=f[3],m=o/qt([g,d],[y,d],i)*(y-g),v=o/qt([g,d],[g,_],i)*(_-d),x=y-g,E=_-d,w=(x-Math.floor(x/m)*m)/2,N=[],C=[],S=[],M=[],L=1/0,P=1/0,O=_-(E-Math.floor(E/v)*v)/2,R=0;d<=O;){for(var T=[],A=[],D=g+w,F=0;D<=y;){var q=r([D,O]),G=function(t,e){for(var n=0;n<e.features.length;n++)if(Pt(t,e.features[n]))return!0;return!1}(q,u);T.push(G?0:1),A.push(D+"|"+O);var B=qt(q,t);!G&&B<L&&(L=B,S={x:F,y:R});var k=qt(q,n);!G&&k<P&&(P=k,M={x:F,y:R}),D+=m,F++}C.push(T),N.push(A),O-=v,R++}var z=new qr(C,{diagonal:!0}),U=z.grid[S.y][S.x],Y=z.grid[M.y][M.x],V=[h];return nu.search(z,U,Y).forEach(function(t){var e=N[t.x][t.y].split("|");V.push([+e[0],+e[1]])}),V.push(l),te(a(V))},t.voronoi=function(t,e){if(!I(e=e||{}))throw new Error("options is invalid");var n=e.bbox||[-180,-85,180,85];if(!t)throw new Error("points is required");if(!Array.isArray(n))throw new Error("bbox is invalid");return W(t,"Point","points"),c(function(){function t(t){return new hi(t.map(function(r,i){var o=[Math.round(e(r,i,t)/lu)*lu,Math.round(n(r,i,t)/lu)*lu];return o.index=i,o.data=r,o}),r)}var e=kr,n=zr,r=null;return t.polygons=function(e){return t(e).polygons()},t.links=function(e){return t(e).links()},t.triangles=function(e){return t(e).triangles()},t.x=function(n){return arguments.length?(e="function"==typeof n?n:ru(+n),t):e},t.y=function(e){return arguments.length?(n="function"==typeof e?e:ru(+e),t):n},t.extent=function(e){return arguments.length?(r=null==e?null:[[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]],t):r&&[[r[0][0],r[0][1]],[r[1][0],r[1][1]]]},t.size=function(e){return arguments.length?(r=null==e?null:[[0,0],[+e[0],+e[1]]],t):r&&[r[1][0]-r[0][0],r[1][1]-r[0][1]]},t}().x(function(t){return t.geometry.coordinates[0]}).y(function(t){return t.geometry.coordinates[1]}).extent([[n[0],n[1]],[n[2],n[3]]]).polygons(t.features).map(li))},t.ellipse=pi,t.centerMean=gi,t.centerMedian=function(t,e){if(!I(e=e||{}))throw new Error("options is invalid");var n=e.counter||10;if(!b(n))throw new Error("counter must be a number");var r=e.weight,i=gi(t,{weight:e.weight}),o=c([]);return O(t,function(t){o.features.push(ye(t,{weight:t.properties[r]}))}),o.properties={tolerance:e.tolerance,medianCandidates:[]},di(i.geometry.coordinates,[0,0],o,n)},t.standardDeviationalEllipse=function(t,e){if(!I(e=e||{}))throw new Error("options is invalid");var n=e.steps||64,r=e.weight,i=e.properties||{};if(!b(n))throw new Error("steps must be a number");if(!I(i))throw new Error("properties must be a number");var o=T(t).length,s=gi(t,{weight:r}),a=0,u=0,h=0;O(t,function(t){var e=t.properties[r]||1,n=yi(U(t),U(s));a+=Math.pow(n.x,2)*e,u+=Math.pow(n.y,2)*e,h+=n.x*n.y*e});var l=a-u,p=Math.sqrt(Math.pow(l,2)+4*Math.pow(h,2)),f=2*h,g=Math.atan((l+p)/f),d=180*g/Math.PI,y=0,_=0,m=0;O(t,function(t){var e=t.properties[r]||1,n=yi(U(t),U(s));y+=Math.pow(n.x*Math.cos(g)-n.y*Math.sin(g),2)*e,_+=Math.pow(n.x*Math.sin(g)+n.y*Math.cos(g),2)*e,m+=e});var v=Math.sqrt(2*y/m),x=Math.sqrt(2*_/m),E=pi(s,v,x,{units:"degrees",angle:d,steps:n,properties:i}),w=Rt(t,c([E])),N={meanCenterCoordinates:U(s),semiMajorAxis:v,semiMinorAxis:x,numberOfFeatures:o,angle:d,percentageWithinEllipse:100*T(w).length/o};return E.properties.standardDeviationalEllipse=N,E},t.difference=function(t,n){var r=J(t),i=J(n),o=t.properties||{},r=Ui(r),i=Ui(i);if(!r)return null;if(!i)return e(r,o);var s=new bh,a=s.read(r),u=s.read(i),c=Cf.difference(a,u);return c.isEmpty()?null:e((new Ih).write(c),o)},t.buffer=function(t,e,n){var r=(n=n||{}).units,i=n.steps||64;if(!t)throw new Error("geojson is required");if("object"!=typeof n)throw new Error("options must be an object");if("number"!=typeof i)throw new Error("steps must be an number");if(void 0===e)throw new Error("radius is required");if(i<=0)throw new Error("steps must be greater than 0");i=i||64,r=r||"kilometers";var o=[];switch(t.type){case"GeometryCollection":return A(t,function(t){var n=bo(t,e,r,i);n&&o.push(n)}),c(o);case"FeatureCollection":return O(t,function(t){var n=bo(t,e,r,i);n&&O(n,function(t){t&&o.push(t)})}),c(o)}return bo(t,e,r,i)},t.union=Mo,t.intersect=Lo,t.dissolve=function(t,e){if(!I(e=e||{}))throw new Error("options is invalid");var n=e.propertyName;W(t,"Polygon","dissolve");var r=Gt(t),i=r.features,o=[];i.forEach(function(t,e){t.properties.origIndexPosition=e});var u,s=Qe();for(u in s.load(r),i){var c=i[u],h=!1;if(s.search(c).features.forEach(function(t){c=i[u];var r,l,e=t.properties.origIndexPosition;0<o.length&&0!==e&&(e>o[o.length-1]?e-=o.length:0!==(r=function(t,e){return function(t,e){var r,i;if(!Array.isArray(e))throw new Error("Get closest expects an array as second argument");return e.forEach(function(e,o){var s=e-t;0<=s&&(void 0===i||s<i)&&(i=s,r=o)}),r}(t,e)}(e,o))&&(e-=r)),e===+u||(l=i[e])&&c&&(void 0!==n&&l.properties[n]!==c.properties[n]||Tr(c,l)&&function(e){return 0<nn(a(T(c)),a(T(e))).features.length}(l)&&(i[u]=Mo(c,l),o.push(t.properties.origIndexPosition),o.sort(function(t,e){return t-e}),s.remove(t),i.splice(e,1),c.properties.origIndexPosition=u,s.remove(c,function(t,e){return t.properties.origIndexPosition===e.properties.origIndexPosition}),h=!0))}),h){if(!c)continue;c.properties.origIndexPosition=u,s.insert(c),u--}}return i.forEach(function(t){delete t.properties.origIndexPosition,delete t.bbox}),r},t.hexGrid=Oo,t.mask=function(t,e){var n=o(e&&e.geometry.coordinates||[[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]]),r=function(t){var e=[],n=[];return F(t,function(t){var r=t.geometry.coordinates,i=r[0],s=r.slice(1);e.push(o([i])),s.forEach(function(t){n.push(o([t]))})}),[c(e),c(n)]}(t),i=r[0],s=r[1];return function(t,e,n){var r=[];return r.push(t.geometry.coordinates[0]),F(e,function(t){r.push(t.geometry.coordinates[0])}),F(n,function(t){r.push(t.geometry.coordinates[0])}),o(r)}(n,Ro(i),Ro(s))},t.squareGrid=Ao,t.triangleGrid=Do,t.interpolate=function(t,e,n){if("object"!=typeof(n=n||{}))throw new Error("options is invalid");var r=n.gridType,i=n.property,o=n.weight;if(!t)throw new Error("points is required");if(W(t,"Point","input must contain Points"),!e)throw new Error("cellSize is required");if(void 0!==o&&"number"!=typeof o)throw new Error("weight must be a number");i=i||"elevation",r=r||"square",o=o||1;var s,a=j(t);switch(r){case"point":case"points":s=Ln(a,e,n);break;case"square":case"squares":s=Ao(a,e,n);break;case"hex":case"hexes":s=Oo(a,e,n);break;case"triangle":case"triangles":s=Do(a,e,n);break;default:throw new Error("invalid gridType")}var u=[];return O(s,function(e){var s=0,a=0;O(t,function(t){var c=qt("point"===r?e:ye(e),t,n),u=t.properties[i];if(void 0===u&&(u=t.geometry.coordinates[2]),void 0===u)throw new Error("zValue is missing");0===c&&(s=u);var h=1/Math.pow(c,o);a+=h,s+=h*u});var c=Gt(e);c.properties[i]=s/a,u.push(c)}),c(u)},t.pointOnSurface=yn,t.polygonToLineString=kn,t.lineStringToPolygon=jn,t.inside=Pt,t.within=Rt,t.bezier=ue,t.nearest=Fe,t.pointOnLine=on,t.lineDistance=bn,t.radians2degrees=v,t.degrees2radians=x,t.distanceToDegrees=_,t.distanceToRadians=y,t.radiansToDistance=d,t.bearingToAngle=m,t.convertDistance=E,t.toMercator=cn,t.toWgs84=hn,t.randomPosition=_i,t.randomPoint=mi,t.randomPolygon=vi,t.randomLineString=xi,t.getCluster=wi,t.clusterEach=bi,t.clusterReduce=Ii,t.createBins=Ni,t.applyFilter=Ci,t.propertiesContainsFilter=Si,t.filterProperties=Mi,t.earthRadius=Fo,t.factors=qo,t.unitsFactors=Go,t.areaFactors=Bo,t.feature=e,t.geometry=n,t.point=r,t.points=i,t.polygon=o,t.polygons=s,t.lineString=a,t.lineStrings=u,t.featureCollection=c,t.multiLineString=h,t.multiPoint=l,t.multiPolygon=p,t.geometryCollection=f,t.round=g,t.radiansToLength=d,t.lengthToRadians=y,t.lengthToDegrees=_,t.bearingToAzimuth=m,t.radiansToDegrees=v,t.degreesToRadians=x,t.convertLength=E,t.convertArea=w,t.isNumber=b,t.isObject=I,t.validateBBox=N,t.validateId=C,t.getCoord=X,t.getCoords=U,t.containsNumber=Y,t.geojsonType=V,t.featureOf=H,t.collectionOf=W,t.getGeom=J,t.getGeomType=Z,t.getType=K,t.coordEach=S,t.coordReduce=M,t.propEach=L,t.propReduce=P,t.featureEach=O,t.featureReduce=R,t.coordAll=T,t.geomEach=A,t.geomReduce=D,t.flattenEach=F,t.flattenReduce=q,t.segmentEach=G,t.segmentReduce=B,t.lineEach=k,t.lineReduce=z,Object.defineProperty(t,"__esModule",{value:!0})}),function(factory){window.riot=factory()}(function(){"use strict";function $(selector,ctx){return(ctx||document).querySelector(selector)}var styleNode,cssTextProp,__TAGS_CACHE=[],__TAG_IMPL={},YIELD_TAG="yield",GLOBAL_MIXIN="__global_mixin",ATTRS_PREFIX="riot-",REF_DIRECTIVES=["ref","data-ref"],IS_DIRECTIVE="data-is",CONDITIONAL_DIRECTIVE="if",LOOP_DIRECTIVE="each",LOOP_NO_REORDER_DIRECTIVE="no-reorder",SHOW_DIRECTIVE="show",HIDE_DIRECTIVE="hide",KEY_DIRECTIVE="key",RIOT_EVENTS_KEY="__riot-events__",T_STRING="string",T_OBJECT="object",T_UNDEF="undefined",T_FUNCTION="function",XLINK_NS="http://www.w3.org/1999/xlink",SVG_NS="http://www.w3.org/2000/svg",XLINK_REGEX=/^xlink:(\w+)/,WIN=typeof window===T_UNDEF?void 0:window,RE_EVENTS_PREFIX=/^on/,RE_HTML_ATTRS=/([-\w]+) ?= ?(?:"([^"]*)|'([^']*)|({[^}]*}))/g,CASE_SENSITIVE_ATTRIBUTES={viewbox:"viewBox",preserveaspectratio:"preserveAspectRatio"},RE_BOOL_ATTRS=/^(?:disabled|checked|readonly|required|allowfullscreen|auto(?:focus|play)|compact|controls|default|formnovalidate|hidden|ismap|itemscope|loop|multiple|muted|no(?:resize|shade|validate|wrap)?|open|reversed|seamless|selected|sortable|truespeed|typemustmatch)$/,IE_VERSION=0|(WIN&&WIN.document||{}).documentMode;function makeElement(name){return"svg"===name?document.createElementNS(SVG_NS,name):document.createElement(name)}function setAttribute(dom,name,val){var xlink=XLINK_REGEX.exec(name);xlink&&xlink[1]?dom.setAttributeNS(XLINK_NS,xlink[1],val):dom.setAttribute(name,val)}var newNode,userNode,byName={},needsInject=!1;WIN&&(newNode=makeElement("style"),userNode=$("style[type=riot]"),setAttribute(newNode,"type","text/css"),userNode?(userNode.id&&(newNode.id=userNode.id),userNode.parentNode.replaceChild(newNode,userNode)):document.head.appendChild(newNode),cssTextProp=(styleNode=newNode).styleSheet);var beforeReWords,wordsLastChar,RE_REGEX,RE_VN_CHAR,styleManager={styleNode:styleNode,add:function(css,name){byName[name]=css,needsInject=!0},inject:function(){var style;WIN&&needsInject&&(needsInject=!1,style=Object.keys(byName).map(function(k){return byName[k]}).join("\n"),cssTextProp?cssTextProp.cssText=style:styleNode.innerHTML=style)},remove:function(name){delete byName[name],needsInject=!0}},skipRegex=(wordsLastChar=(beforeReWords=["case","default","do","else","in","instanceof","prefix","return","typeof","void","yield"]).reduce(function(s,w){return s+w.slice(-1)},""),RE_REGEX=/^\/(?=[^*>/])[^[/\\]*(?:(?:\\.|\[(?:\\.|[^\]\\]*)*\])[^[\\/]*)*?\/[gimuy]*/,RE_VN_CHAR=/[$\w]/,function(code,start){var re=/.*/g,pos=re.lastIndex=start++,match=re.exec(code)[0].match(RE_REGEX);if(match){var next=pos+match[0].length,c=code[pos=prev(code,pos)];if(pos<0||~"[{(,;:?=|&!^~>%*/".indexOf(c))return next;if("."===c)"."===code[pos-1]&&(start=next);else if("+"===c||"-"===c)(code[--pos]!==c||(pos=prev(code,pos))<0||!RE_VN_CHAR.test(code[pos]))&&(start=next);else if(~wordsLastChar.indexOf(c)){for(var end=pos+1;0<=--pos&&RE_VN_CHAR.test(code[pos]););~beforeReWords.indexOf(code.slice(pos+1,end))&&(start=next)}}return start});function prev(code,pos){for(;0<=--pos&&/\s/.test(code[pos]););return pos}var _regex,_settings,REGLOB,R_STRINGS,S_QBLOCKS,UNSUPPORTED,NEED_ESCAPE,S_QBLOCK2,FINDBRACES,DEFAULT,_pairs,cachedBrackets,_cache,brackets=(REGLOB="g",S_QBLOCKS=(R_STRINGS=/"[^"\\]*(?:\\[\S\s][^"\\]*)*"|'[^'\\]*(?:\\[\S\s][^'\\]*)*'|`[^`\\]*(?:\\[\S\s][^`\\]*)*`/g).source+"|"+/(?:\breturn\s+|(?:[$\w\)\]]|\+\+|--)\s*(\/)(?![*\/]))/.source+"|"+/\/(?=[^*\/])[^[\/\\]*(?:(?:\[(?:\\.|[^\]\\]*)*\]|\\.)[^[\/\\]*)*?([^<]\/)[gim]*/.source,UNSUPPORTED=RegExp("[\\x00-\\x1F<>a-zA-Z0-9'\",;\\\\]"),NEED_ESCAPE=/(?=[[\]()*+?.^$|])/g,S_QBLOCK2=R_STRINGS.source+"|"+/(\/)(?![*\/])/.source,FINDBRACES={"(":RegExp("([()])|"+S_QBLOCK2,REGLOB),"[":RegExp("([[\\]])|"+S_QBLOCK2,REGLOB),"{":RegExp("([{}])|"+S_QBLOCK2,REGLOB)},DEFAULT="{ }",_pairs=["{","}","{","}",/{[^}]*}/,/\\([{}])/g,/\\({)|{/g,RegExp("\\\\(})|([[({])|(})|"+S_QBLOCK2,REGLOB),DEFAULT,/^\s*{\^?\s*([$\w]+)(?:\s*,\s*(\S+))?\s+in\s+(\S.*)\s*}/,/(^|[^\\]){=[\S\s]*?}/],cachedBrackets=void 0,_cache=[],_brackets.split=function(str,tmpl,_bp){for(var match,start,pos,mark,lastIndex,parts=[],re=(_bp=_bp||_cache)[6],qblocks=[],prevStr="",isexpr=start=re.lastIndex=0;match=re.exec(str);){if(lastIndex=re.lastIndex,pos=match.index,isexpr){if(match[2]){var ch=match[2],rech=FINDBRACES[ch],ix=1;for(rech.lastIndex=lastIndex;match=rech.exec(str);)if(match[1]){if(match[1]===ch)++ix;else if(!--ix)break}else rech.lastIndex=pushQBlock(match.index,rech.lastIndex,match[2]);re.lastIndex=ix?str.length:rech.lastIndex;continue}if(!match[3]){re.lastIndex=pushQBlock(pos,lastIndex,match[4]);continue}}match[1]||(unescapeStr(str.slice(start,pos)),start=re.lastIndex,(re=_bp[6+(isexpr^=1)]).lastIndex=start)}return str&&start<str.length&&unescapeStr(str.slice(start)),parts.qblocks=qblocks,parts;function unescapeStr(s){prevStr&&(s=prevStr+s,prevStr=""),tmpl||isexpr?parts.push(s&&s.replace(_bp[5],"$1")):parts.push(s)}function pushQBlock(_pos,_lastIndex,slash){return slash&&(_lastIndex=skipRegex(str,_pos)),tmpl&&_pos+2<_lastIndex&&(mark="⁗"+qblocks.length+"~",qblocks.push(str.slice(_pos,_lastIndex)),prevStr+=str.slice(start,_pos)+mark,start=_lastIndex),_lastIndex}},_brackets.hasExpr=function(str){return _cache[4].test(str)},_brackets.loopKeys=function(expr){var m=expr.match(_cache[9]);return m?{key:m[1],pos:m[2],val:_cache[0]+m[3].trim()+_cache[1]}:{val:expr.trim()}},_brackets.array=function(pair){return pair?_create(pair):_cache},Object.defineProperty(_brackets,"settings",{set:function(o){var b=(o=o||{}).brackets;Object.defineProperty(o,"brackets",{set:_reset,get:function(){return cachedBrackets},enumerable:!0}),_settings=o,_reset(b)},get:function(){return _settings}}),_brackets.settings="undefined"!=typeof riot&&riot.settings||{},_brackets.set=_reset,_brackets.skipRegex=skipRegex,_brackets.R_STRINGS=R_STRINGS,_brackets.R_MLCOMMS=/\/\*[^*]*\*+(?:[^*\/][^*]*\*+)*\//g,_brackets.S_QBLOCKS=S_QBLOCKS,_brackets.S_QBLOCK2=S_QBLOCK2,_brackets);function _loopback(re){return re}function _rewrite(re,bp){return bp=bp||_cache,new RegExp(re.source.replace(/{/g,bp[2]).replace(/}/g,bp[3]),re.global?REGLOB:"")}function _create(pair){if(pair===DEFAULT)return _pairs;var arr=pair.split(" ");if(2!==arr.length||UNSUPPORTED.test(pair))throw new Error('Unsupported brackets "'+pair+'"');return(arr=arr.concat(pair.replace(NEED_ESCAPE,"\\").split(" ")))[4]=_rewrite(1<arr[1].length?/{[\S\s]*?}/:_pairs[4],arr),arr[5]=_rewrite(3<pair.length?/\\({|})/g:_pairs[5],arr),arr[6]=_rewrite(_pairs[6],arr),arr[7]=RegExp("\\\\("+arr[3]+")|([[({])|("+arr[3]+")|"+S_QBLOCK2,REGLOB),arr[8]=pair,arr}function _brackets(reOrIdx){return reOrIdx instanceof RegExp?_regex(reOrIdx):_cache[reOrIdx]}function _reset(pair){(pair=pair||DEFAULT)!==_cache[8]&&(_cache=_create(pair),_regex=pair===DEFAULT?_loopback:_rewrite,_cache[9]=_regex(_pairs[9])),cachedBrackets=pair}var tmpl=function(){var _cache={};function _tmpl(str,data){return str?(_cache[str]||(_cache[str]=function(str){var expr=function(str){var expr,parts=brackets.split(str.replace(RE_DQUOTE,'"'),1),qstr=parts.qblocks;if(2<parts.length||parts[0]){var i,j,list=[];for(i=j=0;i<parts.length;++i)(expr=(expr=parts[i])&&(1&i?_parseExpr(expr,1,qstr):'"'+expr.replace(/\\/g,"\\\\").replace(/\r\n?|\n/g,"\\n").replace(/"/g,'\\"')+'"'))&&(list[j++]=expr);expr=j<2?list[0]:"["+list.join(",")+'].join("")'}else expr=_parseExpr(parts[1],0,qstr);qstr.length&&(expr=expr.replace(RE_QBMARK,function(_,pos){return qstr[pos].replace(/\r/g,"\\r").replace(/\n/g,"\\n")}));return expr}(str);"try{return "!==expr.slice(0,11)&&(expr="return "+expr);return new Function("E",expr+";")}(str))).call(data,function(err,ctx){err.riotData={tagName:ctx&&ctx.__&&ctx.__.tagName,_riot_id:ctx&&ctx._riot_id},_tmpl.errorHandler?_tmpl.errorHandler(err):"undefined"!=typeof console&&"function"==typeof console.error&&(console.error(err.message),console.log("<%s> %s",err.riotData.tagName||"Unknown tag",this.tmpl),console.log(this.data))}.bind({data:data,tmpl:str})):str}_tmpl.hasExpr=brackets.hasExpr,_tmpl.loopKeys=brackets.loopKeys,_tmpl.clearCache=function(){_cache={}},_tmpl.errorHandler=null;var RE_DQUOTE=/\u2057/g,RE_QBMARK=/\u2057(\d+)~/g;var RE_CSNAME=/^(?:(-?[_A-Za-z\xA0-\xFF][-\w\xA0-\xFF]*)|\u2057(\d+)~):/,RE_BREND={"(":/[()]/g,"[":/[[\]]/g,"{":/[{}]/g};function _parseExpr(expr,asText,qstr){if(expr=expr.replace(/\s+/g," ").trim().replace(/\ ?([[\({},?\.:])\ ?/g,"$1")){for(var match,list=[],cnt=0;expr&&(match=expr.match(RE_CSNAME))&&!match.index;){var key,jsb,re=/,|([[{(])|$/g;for(expr=RegExp.rightContext,key=match[2]?qstr[match[2]].slice(1,-1).trim().replace(/\s+/g," "):match[1];jsb=(match=re.exec(expr))[1];)!function(ch,re){var mm,lv=1,ir=RE_BREND[ch];ir.lastIndex=re.lastIndex;for(;mm=ir.exec(expr);)if(mm[0]===ch)++lv;else if(!--lv)break;re.lastIndex=lv?expr.length:ir.lastIndex}(jsb,re);jsb=expr.slice(0,match.index),expr=RegExp.rightContext,list[cnt++]=_wrapExpr(jsb,1,key)}expr=cnt?1<cnt?"["+list.join(",")+'].join(" ").trim()':list[0]:_wrapExpr(expr,asText)}return expr}var JS_CONTEXT='"in this?this:'+("object"!=typeof window?"global":"window")+").",JS_VARNAME=/[,{][\$\w]+(?=:)|(^ *|[^$\w\.{])(?!(?:typeof|true|false|null|undefined|in|instanceof|is(?:Finite|NaN)|void|NaN|new|Date|RegExp|Math)(?![$\w]))([$_A-Za-z][$\w]*)/g,JS_NOPROPS=/^(?=(\.[$\w]+))\1(?:[^.[(]|$)/;function _wrapExpr(expr,asText,key){var tb;return expr=expr.replace(JS_VARNAME,function(match,p,mvar,pos,s){return mvar&&(pos=tb?0:pos+match.length,"this"!==mvar&&"global"!==mvar&&"window"!==mvar?(match=p+'("'+mvar+JS_CONTEXT+mvar,pos&&(tb="."===(s=s[pos])||"("===s||"["===s)):pos&&(tb=!JS_NOPROPS.test(s.slice(pos)))),match}),tb&&(expr="try{return "+expr+"}catch(e){E(e,this)}"),key?expr=(tb?"function(){"+expr+"}.call(this)":"("+expr+")")+'?"'+key+'":""':asText&&(expr="function(v){"+(tb?expr.replace("return ","v="):"v=("+expr+")")+';return v||v===0?v:""}.call(this)'),expr}return _tmpl.version=brackets.version="v3.0.8",_tmpl}(),observable=function(el){el=el||{};var callbacks={},slice=Array.prototype.slice;return Object.defineProperties(el,{on:{value:function(event,fn){return"function"==typeof fn&&(callbacks[event]=callbacks[event]||[]).push(fn),el},enumerable:!1,writable:!1,configurable:!1},off:{value:function(event,fn){if("*"!=event||fn)if(fn)for(var cb,arr=callbacks[event],i=0;cb=arr&&arr[i];++i)cb==fn&&arr.splice(i--,1);else delete callbacks[event];else callbacks={};return el},enumerable:!1,writable:!1,configurable:!1},one:{value:function(event,fn){return el.on(event,function on(){el.off(event,on),fn.apply(el,arguments)})},enumerable:!1,writable:!1,configurable:!1},trigger:{value:function(event){for(var fns,fn,arguments$1=arguments,arglen=arguments.length-1,args=new Array(arglen),i=0;i<arglen;i++)args[i]=arguments$1[i+1];for(fns=slice.call(callbacks[event]||[],0),i=0;fn=fns[i];++i)fn.apply(el,args);return callbacks["*"]&&"*"!=event&&el.trigger.apply(el,["*",event].concat(args)),el},enumerable:!1,writable:!1,configurable:!1}}),el};function getPropDescriptor(o,k){return Object.getOwnPropertyDescriptor(o,k)}function isUndefined(value){return typeof value===T_UNDEF}function isWritable(obj,key){var descriptor=getPropDescriptor(obj,key);return isUndefined(obj[key])||descriptor&&descriptor.writable}function extend(src){for(var obj,i=1,args=arguments,l=args.length;i<l;i++)if(obj=args[i])for(var key in obj)isWritable(src,key)&&(src[key]=obj[key]);return src}function create(src){return Object.create(src)}var settings=extend(create(brackets.settings),{skipAnonymousTags:!0,autoUpdate:!0});function $$(selector,ctx){return[].slice.call((ctx||document).querySelectorAll(selector))}function createDOMPlaceholder(){return document.createTextNode("")}function toggleVisibility(dom,show){dom.style.display=show?"":"none",dom.hidden=!show}function getAttribute(dom,name){return dom.getAttribute(name)}function removeAttribute(dom,name){dom.removeAttribute(name)}function setInnerHTML(container,html,isSvg){var node;isSvg?(node=container.ownerDocument.importNode((new DOMParser).parseFromString('<svg xmlns="'+SVG_NS+'">'+html+"</svg>","application/xml").documentElement,!0),container.appendChild(node)):container.innerHTML=html}function walkAttributes(html,fn){if(html)for(var m;m=RE_HTML_ATTRS.exec(html);)fn(m[1].toLowerCase(),m[2]||m[3]||m[4])}function createFragment(){return document.createDocumentFragment()}function safeInsert(root,curr,next){root.insertBefore(curr,next.parentNode&&next)}function styleObjectToString(style){return Object.keys(style).reduce(function(acc,prop){return acc+" "+prop+": "+style[prop]+";"},"")}function walkNodes(dom,fn,context){if(dom){var next,res=fn(dom,context);if(!1===res)return;for(dom=dom.firstChild;dom;)next=dom.nextSibling,walkNodes(dom,fn,res),dom=next}}var dom=Object.freeze({$$:$$,$:$,createDOMPlaceholder:createDOMPlaceholder,mkEl:makeElement,setAttr:setAttribute,toggleVisibility:toggleVisibility,getAttr:getAttribute,remAttr:removeAttribute,setInnerHTML:setInnerHTML,walkAttrs:walkAttributes,createFrag:createFragment,safeInsert:safeInsert,styleObjectToString:styleObjectToString,walkNodes:walkNodes});function isNil(value){return isUndefined(value)||null===value}function isBlank(value){return isNil(value)||""===value}function isFunction(value){return typeof value===T_FUNCTION}function isObject(value){return value&&typeof value===T_OBJECT}function isSvg(el){var owner=el.ownerSVGElement;return!!owner||null===owner}function isArray(value){return Array.isArray(value)||value instanceof Array}function isBoolAttr(value){return RE_BOOL_ATTRS.test(value)}function isString(value){return typeof value===T_STRING}var check=Object.freeze({isBlank:isBlank,isFunction:isFunction,isObject:isObject,isSvg:isSvg,isWritable:isWritable,isArray:isArray,isBoolAttr:isBoolAttr,isNil:isNil,isString:isString,isUndefined:isUndefined});function contains(array,item){return-1!==array.indexOf(item)}function each(list,fn){for(var len=list?list.length:0,i=0;i<len;i++)fn(list[i],i);return list}function startsWith(str,value){return str.slice(0,value.length)===value}var i,uid=(i=-1,function(){return++i});function define(el,key,value,options){return Object.defineProperty(el,key,extend({value:value,enumerable:!1,writable:!1,configurable:!0},options)),el}function toCamel(str){return str.replace(/-(\w)/g,function(_,c){return c.toUpperCase()})}function warn(message){console&&console.warn&&console.warn(message)}var misc=Object.freeze({contains:contains,each:each,getPropDescriptor:getPropDescriptor,startsWith:startsWith,uid:uid,defineProperty:define,objectCreate:create,extend:extend,toCamel:toCamel,warn:warn});function arrayishAdd(obj,key,value,ensureArray,index){var dest=obj[key],isArr=isArray(dest),hasIndex=!isUndefined(index);if(!dest||dest!==value)if(!dest&&ensureArray)obj[key]=[value];else if(dest)if(isArr){var oldIndex=dest.indexOf(value);if(oldIndex===index)return;-1!==oldIndex&&dest.splice(oldIndex,1),hasIndex?dest.splice(index,0,value):dest.push(value)}else obj[key]=[dest,value];else obj[key]=value}function get(dom){return dom.tagName&&__TAG_IMPL[getAttribute(dom,IS_DIRECTIVE)||getAttribute(dom,IS_DIRECTIVE)||dom.tagName.toLowerCase()]}function getName(dom,skipDataIs){var child=get(dom),namedTag=!skipDataIs&&getAttribute(dom,IS_DIRECTIVE);return namedTag&&!tmpl.hasExpr(namedTag)?namedTag:child?child.name:dom.tagName.toLowerCase()}function inheritParentProps(){return this.parent?extend(create(this),this.parent):this}var reHasYield=/<yield\b/i,reYieldAll=/<yield\s*(?:\/>|>([\S\s]*?)<\/yield\s*>|>)/gi,reYieldSrc=/<yield\s+to=['"]([^'">]*)['"]\s*>([\S\s]*?)<\/yield\s*>/gi,reYieldDest=/<yield\s+from=['"]?([-\w]+)['"]?\s*(?:\/>|>([\S\s]*?)<\/yield\s*>)/gi,rootEls={tr:"tbody",th:"tr",td:"tr",col:"colgroup"},tblTags=IE_VERSION&&IE_VERSION<10?/^(?:t(?:body|head|foot|[rhd])|caption|col(?:group)?|opt(?:ion|group))$/:/^(?:t(?:body|head|foot|[rhd])|caption|col(?:group)?)$/,GENERIC="div",SVG="svg";function mkdom(tmpl,html,isSvg){var match=tmpl&&tmpl.match(/^\s*<([-\w]+)/),tagName=match&&match[1].toLowerCase(),el=makeElement(isSvg?SVG:GENERIC);return tmpl=function(tmpl,html){if(!reHasYield.test(tmpl))return tmpl;var src={};return html=html&&html.replace(reYieldSrc,function(_,ref,text){return src[ref]=src[ref]||text,""}).trim(),tmpl.replace(reYieldDest,function(_,ref,def){return src[ref]||def||""}).replace(reYieldAll,function(_,def){return html||def||""})}(tmpl,html),tblTags.test(tagName)?el=function(el,tmpl,tagName){var tname,select="o"===tagName[0],parent=select?"select>":"table>";return el.innerHTML="<"+parent+tmpl.trim()+"</"+parent,parent=el.firstChild,select?parent.selectedIndex=-1:(tname=rootEls[tagName])&&1===parent.childElementCount&&(parent=$(tname,parent)),parent}(el,tmpl,tagName):setInnerHTML(el,tmpl,isSvg),el}function getImmediateCustomParent(tag){for(var ptag=tag;ptag.__.isAnonymous&&ptag.parent;)ptag=ptag.parent;return ptag}function setEventHandler(name,handler,dom,tag){var eventName,cb=function(dom,handler,e){var p,ptag=this.__.parent,item=this.__.item;if(!item)for(;ptag&&!item;)item=ptag.__.item,ptag=ptag.__.parent;isWritable(e,"currentTarget")&&(e.currentTarget=dom),isWritable(e,"target")&&(e.target=e.srcElement),isWritable(e,"which")&&(e.which=e.charCode||e.keyCode),e.item=item,handler.call(this,e),settings.autoUpdate&&(e.preventUpdate||(p=getImmediateCustomParent(this)).isMounted&&p.update())}.bind(tag,dom,handler);dom[name]=null,eventName=name.replace(RE_EVENTS_PREFIX,""),contains(tag.__.listeners,dom)||tag.__.listeners.push(dom),dom[RIOT_EVENTS_KEY]||(dom[RIOT_EVENTS_KEY]={}),dom[RIOT_EVENTS_KEY][name]&&dom.removeEventListener(eventName,dom[RIOT_EVENTS_KEY][name]),dom[RIOT_EVENTS_KEY][name]=cb,dom.addEventListener(eventName,cb,!1)}function initChild(child,opts,innerHTML,parent){var tag=createTag(child,opts,innerHTML),tagName=opts.tagName||getName(opts.root,!0),ptag=getImmediateCustomParent(parent);return define(tag,"parent",ptag),tag.__.parent=parent,arrayishAdd(ptag.tags,tagName,tag),ptag!==parent&&arrayishAdd(parent.tags,tagName,tag),tag}function arrayishRemove(obj,key,value,ensureArray){var index;isArray(obj[key])?(-1!==(index=obj[key].indexOf(value))&&obj[key].splice(index,1),obj[key].length?1!==obj[key].length||ensureArray||(obj[key]=obj[key][0]):delete obj[key]):obj[key]===value&&delete obj[key]}function makeVirtual(src,target){var sib,el,head=createDOMPlaceholder(),tail=createDOMPlaceholder(),frag=createFragment();for(this.root.insertBefore(head,this.root.firstChild),this.root.appendChild(tail),this.__.head=el=head,this.__.tail=tail;el;)sib=el.nextSibling,frag.appendChild(el),this.__.virts.push(el),el=sib;target?src.insertBefore(frag,target.__.head):src.appendChild(frag)}function makeReplaceVirtual(tag,ref){var frag=createFragment();makeVirtual.call(tag,frag),ref.parentNode.replaceChild(frag,ref)}function updateExpression(expr){if(!this.root||!getAttribute(this.root,"virtualized")){var dom=expr.dom,attrName=function(attrName){return attrName?(attrName=attrName.replace(ATTRS_PREFIX,""),CASE_SENSITIVE_ATTRIBUTES[attrName]&&(attrName=CASE_SENSITIVE_ATTRIBUTES[attrName]),attrName):null}(expr.attr),isToggle=contains([SHOW_DIRECTIVE,HIDE_DIRECTIVE],attrName),isVirtual=expr.root&&"VIRTUAL"===expr.root.tagName,isAnonymous=this.__.isAnonymous,parent=dom&&(expr.parent||dom.parentNode),isStyleAttr="style"===attrName,isClassAttr="class"===attrName;if(expr._riot_id)expr.__.wasCreated?expr.update():(expr.mount(),isVirtual&&makeReplaceVirtual(expr,expr.root));else{if(expr.update)return expr.update();var value,context=isToggle&&!isAnonymous?inheritParentProps.call(this):this,hasValue=!isBlank(value=tmpl(expr.expr,context)),isObj=isObject(value);if(isObj&&(isClassAttr?value=tmpl(JSON.stringify(value),this):isStyleAttr&&(value=styleObjectToString(value))),!expr.attr||expr.wasParsedOnce&&hasValue&&!1!==value||removeAttribute(dom,getAttribute(dom,expr.attr)?expr.attr:attrName),expr.bool&&(value=!!value&&attrName),expr.isRtag)return function(expr,parent,tagName){var ref,tag=expr.tag||expr.dom._tag,head=(tag?tag.__:{}).head,isVirtual="VIRTUAL"===expr.dom.tagName;tag&&expr.tagName===tagName?tag.update():(tag&&(isVirtual&&(ref=createDOMPlaceholder(),head.parentNode.insertBefore(ref,head)),tag.unmount(!0)),isString(tagName)&&(expr.impl=__TAG_IMPL[tagName],expr.impl&&(expr.tag=tag=initChild(expr.impl,{root:expr.dom,parent:parent,tagName:tagName},expr.dom.innerHTML,parent),each(expr.attrs,function(a){return setAttribute(tag.root,a.name,a.value),0}),expr.tagName=tagName,tag.mount(),isVirtual&&makeReplaceVirtual(tag,ref||tag.root),parent.__.onUnmount=function(){var delName=tag.opts.dataIs;arrayishRemove(tag.parent.tags,delName,tag),arrayishRemove(tag.__.parent.tags,delName,tag),tag.unmount()})))}(expr,this,value);if((!expr.wasParsedOnce||expr.value!==value)&&(expr.value=value,expr.wasParsedOnce=!0,!isObj||isClassAttr||isStyleAttr||isToggle)){if(hasValue||(value=""),!attrName)return value+="",void(parent&&("TEXTAREA"===(expr.parent=parent).tagName?(parent.value=value,IE_VERSION||(dom.nodeValue=value)):dom.nodeValue=value));isFunction(value)?setEventHandler(attrName,value,dom,this):isToggle?toggleVisibility(dom,attrName===HIDE_DIRECTIVE?!value:value):(expr.bool&&(dom[attrName]=value),"value"===attrName&&dom.value!==value?dom.value=value:hasValue&&!1!==value&&setAttribute(dom,attrName,value),isStyleAttr&&dom.hidden&&toggleVisibility(dom,!1))}}}}function update(expressions){each(expressions,updateExpression.bind(this))}function updateOpts(isLoop,parent,isAnonymous,opts,instAttrs){var ctx;isLoop&&isAnonymous||(ctx=isLoop?inheritParentProps.call(this):parent||this,each(instAttrs,function(attr){attr.expr&&updateExpression.call(ctx,attr.expr),opts[toCamel(attr.name).replace(ATTRS_PREFIX,"")]=attr.expr?attr.expr.value:attr.value}))}function query(tags){if(tags)return tags.filter(function(t){return!/[^-\w]/.test(t)}).reduce(function(list,t){var name=t.trim().toLowerCase();return list+",["+IS_DIRECTIVE+'="'+name+'"]'},"");var keys=Object.keys(__TAG_IMPL);return keys+query(keys)}function Tag(el,opts){var name=this.name,tmpl=this.tmpl,css=this.css,attrs=this.attrs,onCreate=this.onCreate;return __TAG_IMPL[name]||(tag(name,tmpl,css,attrs,onCreate),__TAG_IMPL[name].class=this.constructor),mount$1(el,name,opts,this),css&&styleManager.inject(),this}function tag(name,tmpl,css,attrs,fn){return isFunction(attrs)&&(fn=attrs,/^[\w-]+\s?=/.test(css)?(attrs=css,css=""):attrs=""),css&&(isFunction(css)?fn=css:styleManager.add(css,name)),name=name.toLowerCase(),__TAG_IMPL[name]={name:name,tmpl:tmpl,attrs:attrs,fn:fn},name}function tag2(name,tmpl,css,attrs,fn){return css&&styleManager.add(css,name),__TAG_IMPL[name]={name:name,tmpl:tmpl,attrs:attrs,fn:fn},name}function mount(selector,tagName,opts){var elem,allTags,nodeList,tags=[];return styleManager.inject(),isObject(tagName)&&(opts=tagName,tagName=0),elem=isString(selector)?(selector="*"===selector?allTags=query():selector+query(selector.split(/, */)))?$$(selector):[]:selector,"*"===tagName&&(tagName=allTags||query(),elem=elem.tagName?$$(tagName,elem):(nodeList=[],each(elem,function(_el){return nodeList.push($$(tagName,_el))}),nodeList),tagName=0),function pushTagsTo(root){var riotTag,tag;root.tagName?(riotTag=getAttribute(root,IS_DIRECTIVE),tagName&&riotTag!==tagName&&setAttribute(root,IS_DIRECTIVE,riotTag=tagName),(tag=mount$1(root,riotTag||root.tagName.toLowerCase(),opts))&&tags.push(tag)):root.length&&each(root,pushTagsTo)}(elem),tags}var mixins={},globals=mixins[GLOBAL_MIXIN]={},mixins_id=0;function mixin(name,mix,g){if(isObject(name))mixin("__"+mixins_id+++"__",name,!0);else{var store=g?globals:mixins;if(!mix){if(isUndefined(store[name]))throw new Error("Unregistered mixin: "+name);return store[name]}store[name]=isFunction(mix)?extend(mix.prototype,store[name]||{})&&mix:extend(store[name]||{},mix)}}function update$1(){return each(__TAGS_CACHE,function(tag){return tag.update()})}function unregister(name){return styleManager.remove(name),delete __TAG_IMPL[name]}var core=Object.freeze({Tag:Tag,tag:tag,tag2:tag2,mount:mount,mixin:mixin,update:update$1,unregister:unregister,version:"v3.10.0"});function moveChild(tagName,newPos){var tags,parent=this.parent;parent&&(isArray(tags=parent.tags[tagName])?tags.splice(newPos,0,tags.splice(tags.indexOf(this),1)[0]):arrayishAdd(parent.tags,tagName,this))}function moveVirtual(src,target){for(var sib,el=this.__.head,frag=createFragment();el;)if(sib=el.nextSibling,frag.appendChild(el),(el=sib)===this.__.tail){frag.appendChild(el),src.insertBefore(frag,target.__.head);break}}function mkitem(expr,key,val){var item={};return item[expr.key]=key,expr.pos&&(item[expr.pos]=val),item}function remove(tags,i){tags.splice(i,1),this.unmount(),arrayishRemove(this.parent,this,this.__.tagName,!0)}function _each(dom,parent,expr){var mustReorder=typeof getAttribute(dom,LOOP_NO_REORDER_DIRECTIVE)!==T_STRING||removeAttribute(dom,LOOP_NO_REORDER_DIRECTIVE),keyAttr=getAttribute(dom,KEY_DIRECTIVE),hasKeyAttrExpr=!!keyAttr&&tmpl.hasExpr(keyAttr),tagName=getName(dom),impl=__TAG_IMPL[tagName],parentNode=dom.parentNode,placeholder=createDOMPlaceholder(),child=get(dom),ifExpr=getAttribute(dom,CONDITIONAL_DIRECTIVE),tags=[],innerHTML=dom.innerHTML,isAnonymous=!__TAG_IMPL[tagName],isVirtual="VIRTUAL"===dom.tagName,oldItems=[];return removeAttribute(dom,LOOP_DIRECTIVE),removeAttribute(dom,KEY_DIRECTIVE),(expr=tmpl.loopKeys(expr)).isLoop=!0,ifExpr&&removeAttribute(dom,CONDITIONAL_DIRECTIVE),parentNode.insertBefore(placeholder,dom),parentNode.removeChild(dom),expr.update=function(){expr.value=tmpl(expr.val,parent);var filteredItemsCount,items=expr.value,frag=createFragment(),isObject=!isArray(items)&&!isString(items),root=placeholder.parentNode,tmpItems=[],hasKeys=isObject&&!!items;root&&(isObject&&(items=items?Object.keys(items).map(function(key){return mkitem(expr,items[key],key)}):[]),filteredItemsCount=0,each(items,function(_item,i){i-=filteredItemsCount;var itemId,doReorder,oldPos,isNew,pos,tag,mustAppend,mustCreate,item=!hasKeys&&expr.key?mkitem(expr,_item,i):_item;!ifExpr||tmpl(ifExpr,extend(create(parent),item))?(itemId=function(keyAttr,originalItem,keyedItem,hasKeyAttrExpr){return keyAttr?hasKeyAttrExpr?tmpl(keyAttr,keyedItem):originalItem[keyAttr]:originalItem}(keyAttr,_item,item,hasKeyAttrExpr),doReorder=mustReorder&&typeof _item===T_OBJECT,oldPos=oldItems.indexOf(itemId),tag=tags[pos=!(isNew=-1===oldPos)&&doReorder?oldPos:i],mustAppend=i>=oldItems.length,(mustCreate=doReorder&&isNew||!doReorder&&!tag)?((tag=createTag(impl,{parent:parent,isLoop:!0,isAnonymous:isAnonymous,tagName:tagName,root:dom.cloneNode(isAnonymous),item:item,index:i},innerHTML)).mount(),mustAppend?function(root,isVirtual){isVirtual?makeVirtual.call(this,root):root.appendChild(this.root)}.apply(tag,[frag||root,isVirtual]):function(root,nextTag,isVirtual){isVirtual?makeVirtual.apply(this,[root,nextTag]):safeInsert(root,this.root,nextTag.root)}.apply(tag,[root,tags[i],isVirtual]),mustAppend||oldItems.splice(i,0,item),tags.splice(i,0,tag),child&&arrayishAdd(parent.tags,tagName,tag,!0)):pos!==i&&doReorder&&((keyAttr||contains(items,oldItems[pos]))&&(function(root,nextTag,isVirtual){isVirtual?moveVirtual.apply(this,[root,nextTag]):safeInsert(root,this.root,nextTag.root)}.apply(tag,[root,tags[i],isVirtual]),tags.splice(i,0,tags.splice(pos,1)[0]),oldItems.splice(i,0,oldItems.splice(pos,1)[0])),expr.pos&&(tag[expr.pos]=i),!child&&tag.tags&&function(i){var this$1=this;each(Object.keys(this.tags),function(tagName){moveChild.apply(this$1.tags[tagName],[tagName,i])})}.call(tag,i)),extend(tag.__,{item:item,index:i,parent:parent}),tmpItems[i]=itemId,mustCreate||tag.update(item)):filteredItemsCount++}),function(items,tags,filteredItemsCount){for(var i=tags.length,j=items.length-filteredItemsCount;j<i;)remove.apply(tags[--i],[tags,i])}(items,tags,filteredItemsCount),oldItems=tmpItems.slice(),root.insertBefore(frag,placeholder))},expr.unmount=function(){each(tags,function(t){t.unmount()})},expr}var RefExpr={init:function(dom,parent,attrName,attrValue){return this.dom=dom,this.attr=attrName,this.rawValue=attrValue,this.parent=parent,this.hasExp=tmpl.hasExpr(attrValue),this},update:function(){var old=this.value,customParent=this.parent&&getImmediateCustomParent(this.parent),tagOrDom=this.dom.__ref||this.tag||this.dom;this.value=this.hasExp?tmpl(this.rawValue,this.parent):this.rawValue,!isBlank(old)&&customParent&&arrayishRemove(customParent.refs,old,tagOrDom),!isBlank(this.value)&&isString(this.value)?(customParent&&arrayishAdd(customParent.refs,this.value,tagOrDom,null,this.parent.__.index),this.value!==old&&setAttribute(this.dom,this.attr,this.value)):removeAttribute(this.dom,this.attr),this.dom.__ref||(this.dom.__ref=tagOrDom)},unmount:function(){var tagOrDom=this.tag||this.dom,customParent=this.parent&&getImmediateCustomParent(this.parent);!isBlank(this.value)&&customParent&&arrayishRemove(customParent.refs,this.value,tagOrDom)}};function createRefDirective(dom,tag,attrName,attrValue){return create(RefExpr).init(dom,tag,attrName,attrValue)}function unmountAll(expressions){each(expressions,function(expr){expr.unmount?expr.unmount(!0):expr.tagName?expr.tag.unmount(!0):expr.unmount&&expr.unmount()})}var IfExpr={init:function(dom,tag,expr){removeAttribute(dom,CONDITIONAL_DIRECTIVE),extend(this,{tag:tag,expr:expr,stub:createDOMPlaceholder(),pristine:dom});var p=dom.parentNode;return p.insertBefore(this.stub,dom),p.removeChild(dom),this},update:function(){this.value=tmpl(this.expr,this.tag),this.value&&!this.current?(this.current=this.pristine.cloneNode(!0),this.stub.parentNode.insertBefore(this.current,this.stub),this.expressions=parseExpressions.apply(this.tag,[this.current,!0])):!this.value&&this.current&&(this.unmount(),this.current=null,this.expressions=[]),this.value&&update.call(this.tag,this.expressions)},unmount:function(){this.current&&(this.current._tag?this.current._tag.unmount():this.current.parentNode&&this.current.parentNode.removeChild(this.current)),unmountAll(this.expressions||[])}};function createIfDirective(dom,tag,attr){return create(IfExpr).init(dom,tag,attr)}function parseExpressions(root,mustIncludeRoot){var this$1=this,expressions=[];return walkNodes(root,function(dom){var attr,tagImpl,type=dom.nodeType;if((mustIncludeRoot||dom!==root)&&(3===type&&"STYLE"!==dom.parentNode.tagName&&tmpl.hasExpr(dom.nodeValue)&&expressions.push({dom:dom,expr:dom.nodeValue}),1===type)){var isVirtual="VIRTUAL"===dom.tagName;if(attr=getAttribute(dom,LOOP_DIRECTIVE))return isVirtual&&setAttribute(dom,"loopVirtual",!0),expressions.push(_each(dom,this$1,attr)),!1;if(attr=getAttribute(dom,CONDITIONAL_DIRECTIVE))return expressions.push(createIfDirective(dom,this$1,attr)),!1;if((attr=getAttribute(dom,IS_DIRECTIVE))&&tmpl.hasExpr(attr))return expressions.push({isRtag:!0,expr:attr,dom:dom,attrs:[].slice.call(dom.attributes)}),!1;if(tagImpl=get(dom),isVirtual&&(getAttribute(dom,"virtualized")&&dom.parentElement.removeChild(dom),tagImpl||getAttribute(dom,"virtualized")||getAttribute(dom,"loopVirtual")||(tagImpl={tmpl:dom.outerHTML})),tagImpl&&(dom!==root||mustIncludeRoot)){var hasIsDirective=getAttribute(dom,IS_DIRECTIVE);if(!isVirtual||hasIsDirective)return hasIsDirective&&isVirtual&&warn("Virtual tags shouldn't be used together with the \""+IS_DIRECTIVE+'" attribute - https://github.com/riot/riot/issues/2511'),expressions.push(initChild(tagImpl,{root:dom,parent:this$1},dom.innerHTML,this$1)),!1;setAttribute(dom,"virtualized",!0);var tag=createTag({tmpl:dom.outerHTML},{root:dom,parent:this$1},dom.innerHTML);expressions.push(tag)}parseAttributes.apply(this$1,[dom,dom.attributes,function(attr,expr){expr&&expressions.push(expr)}])}}),expressions}function parseAttributes(dom,attrs,fn){var this$1=this;each(attrs,function(attr){var name,bool,expr;attr&&(bool=isBoolAttr(name=attr.name),contains(REF_DIRECTIVES,name)&&dom.tagName.toLowerCase()!==YIELD_TAG?expr=createRefDirective(dom,this$1,name,attr.value):tmpl.hasExpr(attr.value)&&(expr={dom:dom,expr:attr.value,attr:name,bool:bool}),fn(attr,expr))})}function setMountState(value){var isAnonymous=this.__.isAnonymous;define(this,"isMounted",value),isAnonymous||(value?this.trigger("mount"):(this.trigger("unmount"),this.off("*"),this.__.wasCreated=!1))}function createTag(impl,conf,innerHTML){void 0===impl&&(impl={}),void 0===conf&&(conf={});var tag=conf.context||{},opts=conf.opts||{},parent=conf.parent,isLoop=conf.isLoop,isAnonymous=!!conf.isAnonymous,skipAnonymous=settings.skipAnonymousTags&&isAnonymous,item=conf.item,index=conf.index,tmpl=impl.tmpl,expressions=[],root=conf.root,tagName=conf.tagName||getName(root),isVirtual="virtual"===tagName,isInline=!isVirtual&&!tmpl,dom=isInline||isLoop&&isAnonymous?root:(isVirtual||(root.innerHTML=""),mkdom(tmpl,innerHTML,isSvg(root)));return skipAnonymous||observable(tag),impl.name&&root._tag&&root._tag.unmount(!0),define(tag,"__",{impl:impl,root:root,skipAnonymous:skipAnonymous,implAttrs:[],isAnonymous:isAnonymous,instAttrs:[],innerHTML:innerHTML,tagName:tagName,index:index,isLoop:isLoop,isInline:isInline,item:item,parent:parent,listeners:[],virts:[],wasCreated:!1,tail:null,head:null}),[["isMounted",!1],["_riot_id",uid()],["root",root],["opts",opts,{writable:!0,enumerable:!0}],["parent",parent||null],["tags",{}],["refs",{}],["update",function(data){return function(tag,data,expressions){var __=tag.__,nextOpts={},canTrigger=tag.isMounted&&!__.skipAnonymous;return __.isAnonymous&&__.parent&&extend(tag,__.parent),extend(tag,data),updateOpts.apply(tag,[__.isLoop,__.parent,__.isAnonymous,nextOpts,__.instAttrs]),canTrigger&&tag.isMounted&&isFunction(tag.shouldUpdate)&&!tag.shouldUpdate(data,nextOpts)||(extend(tag.opts,nextOpts),canTrigger&&tag.trigger("update",data),update.call(tag,expressions),canTrigger&&tag.trigger("updated")),tag}(tag,data,expressions)}],["mixin",function(){for(var mixins=[],len=arguments.length;len--;)mixins[len]=arguments[len];return function(tag$$1){for(var mixins=[],len=arguments.length-1;0<len--;)mixins[len]=arguments[len+1];return each(mixins,function(mix){var instance,obj,props=[],propsBlacklist=["init","__proto__"];mix=isString(mix)?mixin(mix):mix,instance=isFunction(mix)?new mix:mix;for(var proto=Object.getPrototypeOf(instance);props=props.concat(Object.getOwnPropertyNames(obj||instance)),obj=Object.getPrototypeOf(obj||instance););each(props,function(key){var descriptor,hasGetterSetter;contains(propsBlacklist,key)||(hasGetterSetter=(descriptor=getPropDescriptor(instance,key)||getPropDescriptor(proto,key))&&(descriptor.get||descriptor.set),!tag$$1.hasOwnProperty(key)&&hasGetterSetter?Object.defineProperty(tag$$1,key,descriptor):tag$$1[key]=isFunction(instance[key])?instance[key].bind(tag$$1):instance[key])}),instance.init&&instance.init.bind(tag$$1)(tag$$1.opts)}),tag$$1}.apply(void 0,[tag].concat(mixins))}],["mount",function(){return function(tag$$1,dom,expressions,opts){var __=tag$$1.__,root=__.root;root._tag=tag$$1,parseAttributes.apply(__.parent,[root,root.attributes,function(attr,expr){!__.isAnonymous&&RefExpr.isPrototypeOf(expr)&&(expr.tag=tag$$1),attr.expr=expr,__.instAttrs.push(attr)}]),walkAttributes(__.impl.attrs,function(k,v){__.implAttrs.push({name:k,value:v})}),parseAttributes.apply(tag$$1,[root,__.implAttrs,function(attr,expr){expr?expressions.push(expr):setAttribute(root,attr.name,attr.value)}]),updateOpts.apply(tag$$1,[__.isLoop,__.parent,__.isAnonymous,opts,__.instAttrs]);var p,globalMixin=mixin(GLOBAL_MIXIN);if(globalMixin&&!__.skipAnonymous)for(var i in globalMixin)globalMixin.hasOwnProperty(i)&&tag$$1.mixin(globalMixin[i]);if(__.impl.fn&&__.impl.fn.call(tag$$1,opts),__.skipAnonymous||tag$$1.trigger("before-mount"),each(parseExpressions.apply(tag$$1,[dom,__.isAnonymous]),function(e){return expressions.push(e)}),tag$$1.update(__.item),!__.isAnonymous&&!__.isInline)for(;dom.firstChild;)root.appendChild(dom.firstChild);return define(tag$$1,"root",root),!__.skipAnonymous&&tag$$1.parent?(p=getImmediateCustomParent(tag$$1.parent)).one(p.isMounted?"updated":"mount",function(){setMountState.call(tag$$1,!0)}):setMountState.call(tag$$1,!0),tag$$1.__.wasCreated=!0,tag$$1}(tag,dom,expressions,opts)}],["unmount",function(mustKeepRoot){return function(tag,mustKeepRoot,expressions){var ptag,__=tag.__,root=__.root,tagIndex=__TAGS_CACHE.indexOf(tag),p=root.parentNode;return __.skipAnonymous||tag.trigger("before-unmount"),walkAttributes(__.impl.attrs,function(name){startsWith(name,ATTRS_PREFIX)&&(name=name.slice(ATTRS_PREFIX.length)),removeAttribute(root,name)}),tag.__.listeners.forEach(function(dom){Object.keys(dom[RIOT_EVENTS_KEY]).forEach(function(eventName){dom.removeEventListener(eventName,dom[RIOT_EVENTS_KEY][eventName])})}),-1!==tagIndex&&__TAGS_CACHE.splice(tagIndex,1),__.parent&&!__.isAnonymous&&(ptag=getImmediateCustomParent(__.parent),__.isVirtual?Object.keys(tag.tags).forEach(function(tagName){return arrayishRemove(ptag.tags,tagName,tag.tags[tagName])}):arrayishRemove(ptag.tags,__.tagName,tag)),tag.__.virts&&each(tag.__.virts,function(v){v.parentNode&&v.parentNode.removeChild(v)}),unmountAll(expressions),each(__.instAttrs,function(a){return a.expr&&a.expr.unmount&&a.expr.unmount()}),mustKeepRoot?setInnerHTML(root,""):p&&p.removeChild(root),__.onUnmount&&__.onUnmount(),tag.isMounted||setMountState.call(tag,!0),setMountState.call(tag,!1),delete root._tag,tag}(tag,mustKeepRoot,expressions)}]].reduce(function(acc,ref){var key=ref[0],value=ref[1],opts=ref[2];return define(tag,key,value,opts),acc},extend(tag,item))}function mount$1(root,tagName,opts,ctx){var tag,impl=__TAG_IMPL[tagName],implClass=__TAG_IMPL[tagName].class,context=ctx||(implClass?create(implClass.prototype):{}),innerHTML=root._innerHTML=root._innerHTML||root.innerHTML,conf=extend({root:root,opts:opts,context:context},{parent:opts?opts.parent:null});return impl&&root&&(tag=createTag(impl,conf,innerHTML)),tag&&tag.mount&&(tag.mount(!0),contains(__TAGS_CACHE,tag)||__TAGS_CACHE.push(tag)),tag}var tags=Object.freeze({arrayishAdd:arrayishAdd,getTagName:getName,inheritParentProps:inheritParentProps,mountTo:mount$1,selectTags:query,arrayishRemove:arrayishRemove,getTag:get,initChildTag:initChild,moveChildTag:moveChild,makeReplaceVirtual:makeReplaceVirtual,getImmediateCustomParentTag:getImmediateCustomParent,makeVirtual:makeVirtual,moveVirtual:moveVirtual,unmountAll:unmountAll,createIfDirective:createIfDirective,createRefDirective:createRefDirective}),settings$1=settings,util={tmpl:tmpl,brackets:brackets,styleManager:styleManager,vdom:__TAGS_CACHE,styleNode:styleManager.styleNode,dom:dom,check:check,misc:misc,tags:tags},Tag$1=Tag,tag$1=tag,tag2$1=tag2,mount$2=mount,mixin$1=mixin,update$2=update$1,unregister$1=unregister,observable$1=observable,riot$1=extend({},core,{observable:observable,settings:settings$1,util:util}),riot$2=Object.freeze({settings:settings$1,util:util,Tag:Tag$1,tag:tag$1,tag2:tag2$1,mount:mount$2,mixin:mixin$1,update:update$2,unregister:unregister$1,version:"v3.10.0",observable:observable$1,default:riot$1});function safeRegex(re){var arguments$1=arguments,src=re.source,opt=re.global?"g":"";re.ignoreCase&&(opt+="i"),re.multiline&&(opt+="m");for(var i=1;i<arguments.length;i++)src=src.replace("@","\\"+arguments$1[i]);return new RegExp(src,opt)}var parsers=function(win){var _p={};function _r(name){var parser=win[name];if(parser)return parser;throw new Error('Parser "'+name+'" not loaded.')}function extend(obj,props){if(props)for(var prop in props)props.hasOwnProperty(prop)&&(obj[prop]=props[prop]);return obj}function renderPug(compilerName,html,opts,url){return opts=extend({pretty:!0,filename:url,doctype:"html"},opts),_r(compilerName).render(html,opts)}return _p.html={jade:function(html,opts,url){return console.log('DEPRECATION WARNING: jade was renamed "pug" - The jade parser will be removed in riot@3.0.0!'),renderPug("jade",html,opts,url)},pug:function(html,opts,url){return renderPug("pug",html,opts,url)}},_p.css={less:function(tag,css,opts,url){var ret;return opts=extend({sync:!0,syncImport:!0,filename:url},opts),_r("less").render(css,opts,function(err,result){if(err)throw err;ret=result.css}),ret}},_p.js={es6:function(js,opts,url){return _r("Babel").transform(js,extend({plugins:[["transform-es2015-template-literals",{loose:!0}],"transform-es2015-literals","transform-es2015-function-name","transform-es2015-arrow-functions","transform-es2015-block-scoped-functions",["transform-es2015-classes",{loose:!0}],"transform-es2015-object-super","transform-es2015-shorthand-properties","transform-es2015-duplicate-keys",["transform-es2015-computed-properties",{loose:!0}],["transform-es2015-for-of",{loose:!0}],"transform-es2015-sticky-regex","transform-es2015-unicode-regex","check-es2015-constants",["transform-es2015-spread",{loose:!0}],"transform-es2015-parameters",["transform-es2015-destructuring",{loose:!0}],"transform-es2015-block-scoping","transform-es2015-typeof-symbol",["transform-es2015-modules-commonjs",{allowTopLevelThis:!0}],["transform-regenerator",{async:!1,asyncGenerators:!1}]]},opts)).code},buble:function(js,opts,url){return opts=extend({source:url,modules:!1},opts),_r("buble").transform(js,opts).code},coffee:function(js,opts){return _r("CoffeeScript").compile(js,extend({bare:!0},opts))},livescript:function(js,opts){return _r("livescript").compile(js,extend({bare:!0,header:!1},opts))},typescript:function(js,opts){return _r("typescript")(js,opts)},none:function(js){return js}},_p.js.javascript=_p.js.none,_p.js.coffeescript=_p.js.coffee,_p._req=function(name){var parts=name.split(".");if(2!==parts.length)throw new Error("Bad format for parsers._req");var parser=_p[parts[0]][parts[1]];if(parser)return parser;throw new Error('Parser "'+name+'" not found.')},_p.utils={extend:extend},_p}(window||global),S_SQ_STR=/'[^'\n\r\\]*(?:\\(?:\r\n?|[\S\s])[^'\n\r\\]*)*'/.source,S_R_SRC1=[/\/\*[^*]*\*+(?:[^*/][^*]*\*+)*\//.source,"//.*",S_SQ_STR,S_SQ_STR.replace(/'/g,'"'),"([/`])"].join("|"),S_R_SRC2=S_R_SRC1.slice(0,-2)+"{}])";function jsSplitter(code,start){for(var re2,str,ch,idx,end,match,re1=new RegExp(S_R_SRC1,"g"),skipRegex=brackets.skipRegex,offset=0|start,result=[[]],stack=[],re=re1,lastPos=re.lastIndex=offset;match=re.exec(code);){if(idx=match.index,end=re.lastIndex,str="",ch=match[1]){if("{"===ch)stack.push("}");else if("}"===ch){if(stack.pop()!==ch)throw new Error("Unexpected '}'");"`"===stack[stack.length-1]&&(ch=stack.pop())}else"/"===ch&&idx+1<(end=skipRegex(code,idx))&&(str=code.slice(idx,end));"`"===ch&&(end=function(code,start,stack){var re=/[`$\\]/g;for(re.lastIndex=start;re.exec(code);){var end=re.lastIndex,c=code[end-1];if("`"===c)return end;if("$"===c&&"{"===code[end])return stack.push("`","}"),end+1;re.lastIndex++}throw new Error("Unclosed ES6 template")}(code,end,stack),str=code.slice(idx,end),re=stack.length?re2=re2||new RegExp(S_R_SRC2,"g"):re1)}else"/"===(str=match[0])[0]?(str="*"===str[1]?" ":"",code=code.slice(offset,idx)+str+code.slice(end),end=idx+str.length,str=""):2===str.length&&(str="");str&&(result[0].push(code.slice(lastPos,idx)),result.push(str),lastPos=end),re.lastIndex=end}return result[0].push(code.slice(lastPos)),result}var extend$1=parsers.utils.extend,S_LINESTR=/"[^"\n\\]*(?:\\[\S\s][^"\n\\]*)*"|'[^'\n\\]*(?:\\[\S\s][^'\n\\]*)*'/.source,S_STRINGS=brackets.R_STRINGS.source,HTML_ATTRS=/ *([-\w:\xA0-\xFF]+) ?(?:= ?('[^']*'|"[^"]*"|\S+))?/g,HTML_COMMS=RegExp(/<!--(?!>)[\S\s]*?-->/.source+"|"+S_LINESTR,"g"),HTML_TAGS=/<(-?[A-Za-z][-\w\xA0-\xFF]*)(?:\s+([^"'/>]*(?:(?:"[^"]*"|'[^']*'|\/[^>])[^'"/>]*)*)|\s*)(\/?)>/g,HTML_PACK=/>[ \t]+<(-?[A-Za-z]|\/[-A-Za-z])/g,RIOT_ATTRS=["style","src","d","value"],VOID_TAGS=/^(?:input|img|br|wbr|hr|area|base|col|embed|keygen|link|meta|param|source|track)$/,PRE_TAGS=/<pre(?:\s+(?:[^">]*|"[^"]*")*)?>([\S\s]+?)<\/pre\s*>/gi,SPEC_TYPES=/^"(?:number|date(?:time)?|time|month|email|color)\b/i,IMPORT_STATEMENT=/^\s*import(?!\w)(?:(?:\s|[^\s'"])*)['|"].*\n?/gm,TRIM_TRAIL=/[ \t]+$/gm,RE_HASEXPR=safeRegex(/@#\d/,"x01"),RE_REPEXPR=safeRegex(/@#(\d+)/g,"x01"),CH_IDEXPR="#",CH_DQCODE="⁗",DQ='"',SQ="'";function cleanSource(src){var mm,re=HTML_COMMS;for(1!==src.indexOf("\r")&&(src=src.replace(/\r\n?/g,"\n")),re.lastIndex=0;mm=re.exec(src);)"<"===mm[0][0]&&(src=RegExp.leftContext+RegExp.rightContext,re.lastIndex=mm[3]+1);return src}function parseAttribs(str,pcex){var match,type,vexp,list=[];for(HTML_ATTRS.lastIndex=0,str=str.replace(/\s+/g," ");match=HTML_ATTRS.exec(str);){var k=match[1].toLowerCase(),v=match[2];v?(v[0]!==DQ&&(v=DQ+(v[0]===SQ?v.slice(1,-1):v)+DQ),"type"===k&&SPEC_TYPES.test(v)?type=v:(RE_HASEXPR.test(v)&&("value"===k&&(vexp=1),-1!==RIOT_ATTRS.indexOf(k)&&(k="riot-"+k)),list.push(k+"="+v))):list.push(k)}return type&&(vexp&&(type=DQ+pcex._bp[0]+SQ+type.slice(1,-1)+SQ+pcex._bp[1]+DQ),list.push("type="+type)),list.join(" ")}function splitHtml(html,opts,pcex){var _bp=pcex._bp;if(html&&_bp[4].test(html)){for(var expr,jsfn=opts.expr&&(opts.parser||opts.type)?_compileJS:0,list=brackets.split(html,0,_bp),i=1;i<list.length;i+=2)"^"===(expr=list[i])[0]?expr=expr.slice(1):jsfn&&";"===(expr=jsfn(expr,opts).trim()).slice(-1)&&(expr=expr.slice(0,-1)),list[i]=CH_IDEXPR+(pcex.push(expr)-1)+_bp[1];html=list.join("")}return html}function restoreExpr(html,pcex){return pcex.length&&(html=html.replace(RE_REPEXPR,function(_,d){return pcex._bp[0]+pcex[d].trim().replace(/[\r\n]+/g," ").replace(/"/g,CH_DQCODE)})),html}function _compileHTML(html,opts,pcex){return/\S/.test(html)?(html=splitHtml(html,opts,pcex).replace(HTML_TAGS,function(_,name,attr,ends){return name=name.toLowerCase(),ends=ends&&!VOID_TAGS.test(name)?"></"+name:"",attr&&(name+=" "+parseAttribs(attr,pcex)),"<"+name+ends+">"}),opts.whitespace||(p=[],/<pre[\s>]/.test(html)&&(html=html.replace(PRE_TAGS,function(q){return p.push(q),""})),html=html.trim().replace(/\s+/g," "),p.length&&(html=html.replace(/\u0002/g,function(){return p.shift()}))),opts.compact&&(html=html.replace(HTML_PACK,"><$1")),restoreExpr(html,pcex).replace(TRIM_TRAIL,"")):"";var p}var JS_ES6SIGN=/^[ \t]*(((?:async|\*)\s*)?([$_A-Za-z][$\w]*))\s*\([^()]*\)\s*{/m;function riotjs(js){var match,toes5,pos,method,prefix,name,parts=[],RE=RegExp,src=jsSplitter(js);for(js=src.shift().join("<%>");match=js.match(JS_ES6SIGN);)parts.push(RE.leftContext),pos=function(s){var r=/[{}]/g,i=1;for(;i&&r.exec(s);)"{"===s[r.lastIndex-1]?++i:--i;return i?s.length:r.lastIndex}(js=RE.rightContext),method=match[1],prefix=match[2]||"",name=match[3],name=(toes5=!/^(?:if|while|for|switch|catch|function)$/.test(name))?match[0].replace(method,"this."+name+" ="+prefix+" function"):match[0],parts.push(name,js.slice(0,pos)),js=js.slice(pos),toes5&&!/^\s*.\s*bind\b/.test(js)&&parts.push(".bind(this)");return parts.length&&(js=parts.join("")+js),src.length&&(js=js.replace(/<%>/g,function(){return src.shift()})),js}function _compileJS(js,opts,type,parserOpts,url){return/\S/.test(js)?(type=type||opts.type,(opts.parser||type&&parsers._req("js."+type,!0)||riotjs)(js,parserOpts,url).replace(/\r\n?/g,"\n").replace(TRIM_TRAIL,"")):""}var CSS_SELECTOR=RegExp("([{}]|^)[; ]*((?:[^@ ;{}][^{}]*)?[^@ ;{}:] ?)(?={)|"+S_LINESTR,"g");function _compileCSS(css,tag,type,opts){return opts=opts||{},type&&"css"!==type&&(css=parsers._req("css."+type,!0)(tag,css,opts.parserOpts||{},opts.url)),css=css.replace(brackets.R_MLCOMMS,"").replace(/\s+/g," ").trim(),tag&&(css=function(tag,css){return css.replace(CSS_SELECTOR,function(m,p1,p2){return p2?(p2=p2.replace(/[^,]+/g,function(sel){var s=sel.trim();return 0!==s.indexOf(tag)&&s&&"from"!==s&&"to"!==s&&"%"!==s.slice(-1)?s=s.indexOf(":scope")<0?tag+" "+s+',[data-is="'+tag+'"] '+s:s.replace(":scope",tag)+","+s.replace(":scope",'[data-is="'+tag+'"]'):sel}),p1?p1+" "+p2:p2):m})}(tag,css)),css}var TYPE_ATTR=/\stype\s*=\s*(?:(['"])(.+?)\1|(\S+))/i,MISC_ATTR="\\s*=\\s*("+S_STRINGS+"|{[^}]+}|\\S+)",END_TAGS=/\/>\n|^<(?:\/?-?[A-Za-z][-\w\xA0-\xFF]*\s*|-?[A-Za-z][-\w\xA0-\xFF]*\s+[-\w:\xA0-\xFF][\S\s]*?)>\n/;function _q(s,r){return s?(s=SQ+s.replace(/\\/g,"\\\\").replace(/'/g,"\\'")+SQ,r&&-1!==s.indexOf("\n")?s.replace(/\n/g,"\\n"):s):"''"}function getType(attribs){if(attribs){var match=attribs.match(TYPE_ATTR);if(match=match&&(match[2]||match[3]))return match.replace("text/","")}return""}function getAttrib(attribs,name){if(attribs){var match=attribs.match(RegExp("\\s"+name+MISC_ATTR,"i"));if(match=match&&match[1])return/^['"]/.test(match)?match.slice(1,-1):match}return""}function getParserOptions(attribs){var opts=getAttrib(attribs,"options").replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#039;/g,"'");return opts?JSON.parse(opts):null}var CUST_TAG=RegExp(/^([ \t]*)<(-?[A-Za-z][-\w\xA0-\xFF]*)(?:\s+([^'"/>]+(?:(?:@|\/[^>])[^'"/>]*)*)|\s*)?(?:\/>|>[ \t]*\n?([\S\s]*)^\1<\/\2\s*>|>(.*)<\/\2\s*>)/.source.replace("@",S_STRINGS),"gim"),SCRIPTS=/<script(\s+[^>]*)?>\n?([\S\s]*?)<\/script\s*>/gi,STYLES=/<style(\s+[^>]*)?>\n?([\S\s]*?)<\/style\s*>/gi;var promise,ready,compiler={compile:function(src,opts,url){var included,parts=[],output=src;(opts=opts||{}).parserOptions=extend$1({template:{},js:{},style:{}},opts.parserOptions||{}),included=opts.exclude?function(s){return opts.exclude.indexOf(s)<0}:function(){return 1},url=url||"";var _bp=brackets.array(opts.brackets);return opts.template&&(output=function(html,url,lang,opts){return parsers._req("html."+lang,!0)(html,opts,url)}(output,url,opts.template,opts.parserOptions.template)),output=cleanSource(output).replace(CUST_TAG,function(_,indent,tagName,attribs,body,body2){var blocks,jscode="",styles="",html="",imports="",pcex=[];return pcex._bp=_bp,tagName=tagName.toLowerCase(),attribs=attribs&&included("attribs")?restoreExpr(parseAttribs(splitHtml(attribs,opts,pcex),pcex),pcex):"",(body=body||body2)&&/\S/.test(body)&&(body2?included("html")&&(html=_compileHTML(body2,opts,pcex)):(blocks=function(str){if(/<[-\w]/.test(str))for(var m,k=str.lastIndexOf("<"),n=str.length;-1!==k;){if(m=str.slice(k,n).match(END_TAGS))return k+=m.index+m[0].length,"<-/>\n"===(m=str.slice(0,k)).slice(-5)&&(m=m.slice(0,-5)),[m,str.slice(k)];n=k,k=str.lastIndexOf("<",k-1)}return["",str]}((body=(body=(body=body.replace(RegExp("^"+indent,"gm"),"")).replace(SCRIPTS,function(_m,_attrs,_script){var code;return!included("js")||(code=function(code,opts,attribs,base){var type=getType(attribs),src=getAttrib(attribs,"src"),jsParserOptions=extend$1({},opts.parserOptions.js);return!src&&_compileJS(code,opts,type,extend$1(jsParserOptions,getParserOptions(attribs)),base)}(_script,opts,_attrs,url))&&(jscode+=(jscode?"\n":"")+code),""})).replace(STYLES,function(_m,_attrs,_style){return included("css")&&(styles+=(styles?" ":"")+function(code,opts,attribs,url,tag){var parserStyleOptions=extend$1({},opts.parserOptions.style),extraOpts={parserOpts:extend$1(parserStyleOptions,getParserOptions(attribs)),url:url};return _compileCSS(code,tag,getType(attribs)||opts.style,extraOpts)}(_style,opts,_attrs,url,tagName)),""})).replace(TRIM_TRAIL,"")),included("html")&&(html=_compileHTML(blocks[0],opts,pcex)),included("js")&&((body=_compileJS(blocks[1],opts,null,null,url))&&(jscode+=(jscode?"\n":"")+body),jscode=jscode.replace(IMPORT_STATEMENT,function(s){return imports+=s.trim()+"\n",""})))),jscode=/\S/.test(jscode)?jscode.replace(/\n{3,}/g,"\n\n"):"",opts.entities?(parts.push({tagName:tagName,html:html,css:styles,attribs:attribs,js:jscode,imports:imports}),""):function(name,html,css,attr,js,imports,opts){var c=opts.debug?",\n  ":", ",s="});";return js&&"\n"!==js.slice(-1)&&(s="\n"+s),imports+"riot.tag2('"+name+SQ+c+_q(html,1)+c+_q(css)+c+_q(attr)+", function(opts) {\n"+js+s}(tagName,html,styles,attribs,jscode,imports,opts)}),opts.entities?parts:output},compileHTML:function(html,opts,pcex){return opts=Array.isArray(opts)?(pcex=opts,{}):(pcex=pcex||[],opts||{}),pcex._bp=brackets.array(opts.brackets),_compileHTML(cleanSource(html),opts,pcex)},compileCSS:function(css,type,opts){return type&&"object"==typeof type?(opts=type,type=""):opts=opts||{},_compileCSS(css,opts.tagName,type,opts)},compileJS:function(js,opts,type,userOpts){return"string"==typeof opts&&(userOpts=type,type=opts,opts={}),type&&"object"==typeof type&&(userOpts=type,type=""),_compileJS(js,opts||{},type,(userOpts=userOpts||{}).parserOptions,userOpts.url)},parsers:parsers,version:"v3.4.0"};function GET(url,fn,opts){var req=new XMLHttpRequest;req.onreadystatechange=function(){4===req.readyState&&(200===req.status||!req.status&&req.responseText.length?fn(req.responseText,opts,url):compile$1.error('"'+url+'" not found'))},req.onerror=function(e){return compile$1.error(e)},req.open("GET",url,!0),req.send("")}function globalEval(js,url){var node,root;typeof js===T_STRING&&(node=makeElement("script"),root=document.documentElement,url&&(js+="\n//# sourceURL="+url+".js"),node.text=js,root.appendChild(node),root.removeChild(node))}var parsers$1=compiler.parsers;function compile$1(arg,fn,opts){if(typeof arg===T_STRING){if(isObject(fn)&&(opts=fn,fn=!1),/^\s*</m.test(arg)){var js=compiler.compile(arg,opts);return!0!==fn&&globalEval(js),isFunction(fn)&&fn(js,arg,opts),js}GET(arg,function(str,opts,url){var js=compiler.compile(str,opts,url);globalEval(js,url),fn&&fn(js,str,opts)},opts)}else if(isArray(arg)){var i=arg.length;arg.forEach(function(str){GET(str,function(str,opts,url){var js=compiler.compile(str,opts,url);globalEval(js,url),!--i&&fn&&fn(js,str,opts)},opts)})}else{if(fn=isFunction(arg)?(opts=fn,arg):void(opts=arg),ready)return fn&&fn();promise?fn&&promise.on("ready",fn):(promise=observable(),function(fn,xopt){var scripts=$$('script[type="riot/tag"]'),scriptsAmount=scripts.length;function done(){promise.trigger("ready"),ready=!0,fn&&fn()}function compileTag(src,opts,url){globalEval(compiler.compile(src,opts,url),url),--scriptsAmount||done()}if(scriptsAmount)for(var i=0;i<scripts.length;++i){var script=scripts[i],opts=extend({template:getAttribute(script,"template")},xopt),url=getAttribute(script,"src")||getAttribute(script,"data-src");url?GET(url,compileTag,opts):compileTag(script.innerHTML,opts)}else done()}(fn,opts))}}return compile$1.error=function(e){throw new Error(e)},extend({},riot$2,{mount:function(){for(var ret,args=[],len=arguments.length;len--;)args[len]=arguments[len];return compile$1(function(){ret=mount$2.apply(riot$2,args)}),ret},compile:compile$1,parsers:parsers$1})}),function(root){root.X2JS=function(config){"use strict";config=config||{},void 0===config.escapeMode&&(config.escapeMode=!0),config.attributePrefix=config.attributePrefix||"_",config.arrayAccessForm=config.arrayAccessForm||"none",config.emptyNodeForm=config.emptyNodeForm||"text",void 0===config.enableToStringFunc&&(config.enableToStringFunc=!0),config.arrayAccessFormPaths=config.arrayAccessFormPaths||[],void 0===config.skipEmptyTextNodesForObj&&(config.skipEmptyTextNodesForObj=!0),void 0===config.stripWhitespaces&&(config.stripWhitespaces=!0),config.datetimeAccessFormPaths=config.datetimeAccessFormPaths||[],void 0===config.useDoubleQuotes&&(config.useDoubleQuotes=!1),config.xmlElementsFilter=config.xmlElementsFilter||[],config.jsonPropertiesFilter=config.jsonPropertiesFilter||[],void 0===config.keepCData&&(config.keepCData=!1);var DOMNodeTypes={ELEMENT_NODE:1,TEXT_NODE:3,CDATA_SECTION_NODE:4,COMMENT_NODE:8,DOCUMENT_NODE:9};function getNodeLocalName(node){var nodeLocalName=node.localName;return null==nodeLocalName&&(nodeLocalName=node.baseName),null!=nodeLocalName&&""!=nodeLocalName||(nodeLocalName=node.nodeName),nodeLocalName}function escapeXmlChars(str){return"string"==typeof str?str.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"):str}function checkInStdFiltersArrayForm(stdFiltersArrayForm,obj,name,path){for(var idx=0;idx<stdFiltersArrayForm.length;idx++){var filterPath=stdFiltersArrayForm[idx];if("string"==typeof filterPath){if(filterPath==path)break}else if(filterPath instanceof RegExp){if(filterPath.test(path))break}else if("function"==typeof filterPath&&filterPath(obj,name,path))break}return idx!=stdFiltersArrayForm.length}function toArrayAccessForm(obj,childName,path){"property"===config.arrayAccessForm&&(obj[childName]instanceof Array?obj[childName+"_asArray"]=obj[childName]:obj[childName+"_asArray"]=[obj[childName]]),!(obj[childName]instanceof Array)&&0<config.arrayAccessFormPaths.length&&checkInStdFiltersArrayForm(config.arrayAccessFormPaths,obj,childName,path)&&(obj[childName]=[obj[childName]])}function fromXmlDateTime(prop){var offsetMinutes,bits=prop.split(/[-T:+Z]/g),d=new Date(bits[0],bits[1]-1,bits[2]),secondBits=bits[5].split(".");return d.setHours(bits[3],bits[4],secondBits[0]),1<secondBits.length&&d.setMilliseconds(secondBits[1]),bits[6]&&bits[7]?(offsetMinutes=60*bits[6]+Number(bits[7]),offsetMinutes=0+("-"==(/\d\d-\d\d:\d\d$/.test(prop)?"-":"+")?-1*offsetMinutes:offsetMinutes),d.setMinutes(d.getMinutes()-offsetMinutes-d.getTimezoneOffset())):-1!==prop.indexOf("Z",prop.length-1)&&(d=new Date(Date.UTC(d.getFullYear(),d.getMonth(),d.getDate(),d.getHours(),d.getMinutes(),d.getSeconds(),d.getMilliseconds()))),d}function parseDOMChildren(node,path){if(node.nodeType==DOMNodeTypes.DOCUMENT_NODE){for(var result=new Object,nodeChildren=node.childNodes,cidx=0;cidx<nodeChildren.length;cidx++){(child=nodeChildren.item(cidx)).nodeType==DOMNodeTypes.ELEMENT_NODE&&(result[childName=getNodeLocalName(child)]=parseDOMChildren(child,childName))}return result}if(node.nodeType==DOMNodeTypes.ELEMENT_NODE){(result=new Object).__cnt=0;for(nodeChildren=node.childNodes,cidx=0;cidx<nodeChildren.length;cidx++){var child,childPath,childName=getNodeLocalName(child=nodeChildren.item(cidx));child.nodeType!=DOMNodeTypes.COMMENT_NODE&&(childPath=path+"."+childName,function(obj,childType,childName,childPath){return!(childType==DOMNodeTypes.ELEMENT_NODE&&0<config.xmlElementsFilter.length)||checkInStdFiltersArrayForm(config.xmlElementsFilter,obj,childName,childPath)}(result,child.nodeType,childName,childPath)&&(result.__cnt++,null==result[childName]?(result[childName]=parseDOMChildren(child,childPath),toArrayAccessForm(result,childName,childPath)):(null!=result[childName]&&(result[childName]instanceof Array||(result[childName]=[result[childName]],toArrayAccessForm(result,childName,childPath))),result[childName][result[childName].length]=parseDOMChildren(child,childPath))))}for(var aidx=0;aidx<node.attributes.length;aidx++){var attr=node.attributes.item(aidx);result.__cnt++,result[config.attributePrefix+attr.name]=attr.value}var nodePrefix=node.prefix;return null!=nodePrefix&&""!=nodePrefix&&(result.__cnt++,result.__prefix=nodePrefix),null!=result["#text"]&&(result.__text=result["#text"],result.__text instanceof Array&&(result.__text=result.__text.join("\n")),config.stripWhitespaces&&(result.__text=result.__text.trim()),delete result["#text"],"property"==config.arrayAccessForm&&delete result["#text_asArray"],result.__text=function(value,childName,fullPath){if(0<config.datetimeAccessFormPaths.length){var path=fullPath.split(".#")[0];return checkInStdFiltersArrayForm(config.datetimeAccessFormPaths,value,childName,path)?fromXmlDateTime(value):value}return value}(result.__text,childName,path+"."+childName)),null!=result["#cdata-section"]&&(result.__cdata=result["#cdata-section"],delete result["#cdata-section"],"property"==config.arrayAccessForm&&delete result["#cdata-section_asArray"]),0==result.__cnt&&"text"==config.emptyNodeForm?result="":1==result.__cnt&&null!=result.__text?result=result.__text:1!=result.__cnt||null==result.__cdata||config.keepCData?1<result.__cnt&&null!=result.__text&&config.skipEmptyTextNodesForObj&&(config.stripWhitespaces&&""==result.__text||""==result.__text.trim())&&delete result.__text:result=result.__cdata,delete result.__cnt,!config.enableToStringFunc||null==result.__text&&null==result.__cdata||(result.toString=function(){return(null!=this.__text?this.__text:"")+(null!=this.__cdata?this.__cdata:"")}),result}if(node.nodeType==DOMNodeTypes.TEXT_NODE||node.nodeType==DOMNodeTypes.CDATA_SECTION_NODE)return node.nodeValue}function startTag(jsonObj,element,attrList,closed){var resultStr="<"+(null!=jsonObj&&null!=jsonObj.__prefix?jsonObj.__prefix+":":"")+element;if(null!=attrList)for(var aidx=0;aidx<attrList.length;aidx++){var attrName=attrList[aidx],attrVal=jsonObj[attrName];config.escapeMode&&(attrVal=escapeXmlChars(attrVal)),resultStr+=" "+attrName.substr(config.attributePrefix.length)+"=",config.useDoubleQuotes?resultStr+='"'+attrVal+'"':resultStr+="'"+attrVal+"'"}return resultStr+=closed?"/>":">"}function endTag(jsonObj,elementName){return"</"+(null!=jsonObj.__prefix?jsonObj.__prefix+":":"")+elementName+">"}function jsonXmlSpecialElem(jsonObj,jsonObjField){return"property"==config.arrayAccessForm&&(str=jsonObjField.toString(),suffix="_asArray",-1!==str.indexOf(suffix,str.length-suffix.length))||0==jsonObjField.toString().indexOf(config.attributePrefix)||0==jsonObjField.toString().indexOf("__")||jsonObj[jsonObjField]instanceof Function;var str,suffix}function jsonXmlElemCount(jsonObj){var elementsCnt=0;if(jsonObj instanceof Object)for(var it in jsonObj)jsonXmlSpecialElem(jsonObj,it)||elementsCnt++;return elementsCnt}function parseJSONAttributes(jsonObj){var attrList=[];if(jsonObj instanceof Object)for(var ait in jsonObj)-1==ait.toString().indexOf("__")&&0==ait.toString().indexOf(config.attributePrefix)&&attrList.push(ait);return attrList}function parseJSONTextObject(jsonTxtObj){var result="";return jsonTxtObj instanceof Object?result+=function(jsonTxtObj){var result="";return null!=jsonTxtObj.__cdata&&(result+="<![CDATA["+jsonTxtObj.__cdata+"]]>"),null!=jsonTxtObj.__text&&(config.escapeMode?result+=escapeXmlChars(jsonTxtObj.__text):result+=jsonTxtObj.__text),result}(jsonTxtObj):null!=jsonTxtObj&&(config.escapeMode?result+=escapeXmlChars(jsonTxtObj):result+=jsonTxtObj),result}function getJsonPropertyPath(jsonObjPath,jsonPropName){return""===jsonObjPath?jsonPropName:jsonObjPath+"."+jsonPropName}function parseJSONObject(jsonObj,jsonObjPath){var subObj,attrList,result="";if(0<jsonXmlElemCount(jsonObj))for(var it in jsonObj){jsonXmlSpecialElem(jsonObj,it)||""!=jsonObjPath&&!function(jsonObj,propertyName,jsonObjPath){return 0==config.jsonPropertiesFilter.length||""==jsonObjPath||checkInStdFiltersArrayForm(config.jsonPropertiesFilter,jsonObj,propertyName,jsonObjPath)}(jsonObj,it,getJsonPropertyPath(jsonObjPath,it))||(attrList=parseJSONAttributes(subObj=jsonObj[it]),null==subObj||null==subObj?result+=startTag(subObj,it,attrList,!0):subObj instanceof Object?subObj instanceof Array?result+=function(jsonArrRoot,jsonArrObj,attrList,jsonObjPath){var result="";if(0==jsonArrRoot.length)result+=startTag(jsonArrRoot,jsonArrObj,attrList,!0);else for(var arIdx=0;arIdx<jsonArrRoot.length;arIdx++)result+=startTag(jsonArrRoot[arIdx],jsonArrObj,parseJSONAttributes(jsonArrRoot[arIdx]),!1),result+=parseJSONObject(jsonArrRoot[arIdx],getJsonPropertyPath(jsonObjPath,jsonArrObj)),result+=endTag(jsonArrRoot[arIdx],jsonArrObj);return result}(subObj,it,attrList,jsonObjPath):subObj instanceof Date?(result+=startTag(subObj,it,attrList,!1),result+=subObj.toISOString(),result+=endTag(subObj,it)):0<jsonXmlElemCount(subObj)||null!=subObj.__text||null!=subObj.__cdata?(result+=startTag(subObj,it,attrList,!1),result+=parseJSONObject(subObj,getJsonPropertyPath(jsonObjPath,it)),result+=endTag(subObj,it)):result+=startTag(subObj,it,attrList,!0):(result+=startTag(subObj,it,attrList,!1),result+=parseJSONTextObject(subObj),result+=endTag(subObj,it)))}return result+=parseJSONTextObject(jsonObj)}this.parseXmlString=function(xmlDocStr){var xmlDoc,isIEParser=window.ActiveXObject||"ActiveXObject"in window;if(void 0===xmlDocStr)return null;if(window.DOMParser){var parser=new window.DOMParser,parsererrorNS=null;if(!isIEParser)try{parsererrorNS=parser.parseFromString("INVALID","text/xml").getElementsByTagName("parsererror")[0].namespaceURI}catch(err){parsererrorNS=null}try{xmlDoc=parser.parseFromString(xmlDocStr,"text/xml"),null!=parsererrorNS&&0<xmlDoc.getElementsByTagNameNS(parsererrorNS,"parsererror").length&&(xmlDoc=null)}catch(err){xmlDoc=null}}else 0==xmlDocStr.indexOf("<?")&&(xmlDocStr=xmlDocStr.substr(xmlDocStr.indexOf("?>")+2)),(xmlDoc=new ActiveXObject("Microsoft.XMLDOM")).async="false",xmlDoc.loadXML(xmlDocStr);return xmlDoc},this.asArray=function(prop){return void 0===prop||null==prop?[]:prop instanceof Array?prop:[prop]},this.toXmlDateTime=function(dt){return dt instanceof Date?dt.toISOString():"number"==typeof dt?new Date(dt).toISOString():null},this.asDateTime=function(prop){return"string"==typeof prop?fromXmlDateTime(prop):prop},this.xml2json=function(xmlDoc){return parseDOMChildren(xmlDoc)},this.xml_str2json=function(xmlDocStr){var xmlDoc=this.parseXmlString(xmlDocStr);return null!=xmlDoc?this.xml2json(xmlDoc):null},this.json2xml_str=function(jsonObj){return parseJSONObject(jsonObj,"")},this.json2xml=function(jsonObj){var xmlDocStr=this.json2xml_str(jsonObj);return this.parseXmlString(xmlDocStr)},this.getVersion=function(){return"1.2.0"}}}(this),function(t,s){"object"==typeof exports&&"undefined"!=typeof module?module.exports=s(require("wkt-parser")):"function"==typeof define&&define.amd?define(["wkt-parser"],s):t.proj4=s(t.wkt)}(this,function(t){"use strict";function s(t,s){if(t[s])return t[s];for(var i,a=Object.keys(t),h=s.toLowerCase().replace(Mt,""),e=-1;++e<a.length;)if((i=a[e]).toLowerCase().replace(Mt,"")===h)return t[i]}function i(s){var a=this;if(2===arguments.length){var h=arguments[1];"string"==typeof h?"+"===h.charAt(0)?i[s]=ct(arguments[1]):i[s]=t(arguments[1]):i[s]=h}else if(1===arguments.length){if(Array.isArray(s))return s.map(function(t){Array.isArray(t)?i.apply(a,t):i(t)});if("string"==typeof s){if(s in i)return i[s]}else"EPSG"in s?i["EPSG:"+s.EPSG]=s:"ESRI"in s?i["ESRI:"+s.ESRI]=s:"IAU2000"in s?i["IAU2000:"+s.IAU2000]=s:console.log(s);return}}function n(t){var i=s(t,"authority");if(i){var a=s(i,"epsg");return a&&-1<ft.indexOf(a)}}function r(t){var i=s(t,"extension");if(i)return s(i,"proj4")}function l(s){if("string"!=typeof s)return s;if(function(t){return t in i}(s))return i[s];if(function(t){return ut.some(function(s){return-1<t.indexOf(s)})}(s)){var l=t(s);if(n(l))return i["EPSG:3857"];var M=r(l);return M?ct(M):l}return"+"===s[0]?ct(s):void 0}function M(t){return t}function c(t,s){var i=bt.length;return t.names?((bt[i]=t).names.forEach(function(t){gt[t.toLowerCase()]=i}),this):(console.log(s),!0)}function Projection(t,i){if(!(this instanceof Projection))return new Projection(t);i=i||function(t){if(t)throw t};var h,e,n,r,o,a=l(t);"object"==typeof a&&(h=Projection.projections.get(a.projName))?(!a.datumCode||"none"===a.datumCode||(e=s(kt,a.datumCode))&&(a.datum_params=e.towgs84?e.towgs84.split(","):null,a.ellps=e.ellipse,a.datumName=e.datumName?e.datumName:a.datumCode),a.k0=a.k0||1,a.axis=a.axis||"enu",a.ellps=a.ellps||"wgs84",r=function(t,s,a){var h=t*t,e=s*s,n=(h-e)/h,r=0;return a?(h=(t*=1-n*($+n*(tt+n*st)))*t,n=0):r=Math.sqrt(n),{es:n,e:r,ep2:(h-e)/e}}((n=function(t,i,a,h,e){var n;return t||(t=(n=(n=s(At,h))||Pt).a,i=n.b,a=n.rf),a&&!i&&(i=(1-1/a)*t),(0===a||Math.abs(t-i)<it)&&(e=!0,i=t),{a:t,b:i,rf:a,sphere:e}}(a.a,a.b,a.rf,a.ellps,a.sphere)).a,n.b,(n.rf,a.R_A)),o=a.datum||function(t,s,i,a,h,e){var n={};return n.datum_type=void 0===t||"none"===t?Z:J,s&&(n.datum_params=s.map(parseFloat),0===n.datum_params[0]&&0===n.datum_params[1]&&0===n.datum_params[2]||(n.datum_type=X),3<n.datum_params.length&&(0===n.datum_params[3]&&0===n.datum_params[4]&&0===n.datum_params[5]&&0===n.datum_params[6]||(n.datum_type=H,n.datum_params[3]*=V,n.datum_params[4]*=V,n.datum_params[5]*=V,n.datum_params[6]=n.datum_params[6]/1e6+1))),n.a=i,n.b=a,n.es=h,n.ep2=e,n}(a.datumCode,a.datum_params,n.a,n.b,r.es,r.ep2),mt(this,a),mt(this,h),this.a=n.a,this.b=n.b,this.rf=n.rf,this.sphere=n.sphere,this.es=r.es,this.e=r.e,this.ep2=r.ep2,this.datum=o,this.init(),i(null,this)):i(t)}function y(t,s,i){var a,h,e,n,r=t.x,o=t.y,l=t.z?t.z:0;if(o<-Y&&-1.001*Y<o)o=-Y;else if(Y<o&&o<1.001*Y)o=Y;else{if(o<-Y)return{x:-1/0,y:-1/0,z:t.z};if(Y<o)return{x:1/0,y:1/0,z:t.z}}return r>Math.PI&&(r-=2*Math.PI),h=Math.sin(o),n=Math.cos(o),e=h*h,{x:((a=i/Math.sqrt(1-s*e))+l)*n*Math.cos(r),y:(a+l)*n*Math.sin(r),z:(a*(1-s)+l)*h}}function d(t,s,i,a){var n,r,o,l,M,c,u,f,m,p,y,d,x,v=t.x,g=t.y,b=t.z?t.z:0,h=Math.sqrt(v*v+g*g),e=Math.sqrt(v*v+g*g+b*b);if(h/i<1e-12){if(d=0,e/i<1e-12)return x=-a,{x:t.x,y:t.y,z:t.z}}else d=Math.atan2(g,v);for(n=b/e,c=(r=h/e)*(1-s)*(o=1/Math.sqrt(1-s*(2-s)*r*r)),u=n*o,y=0;y++,l=s*(M=i/Math.sqrt(1-s*u*u))/(M+(x=h*c+b*u-M*(1-s*u*u))),p=(m=n*(o=1/Math.sqrt(1-l*(2-l)*r*r)))*c-(f=r*(1-l)*o)*u,c=f,u=m,1e-24<p*p&&y<30;);return{x:d,y:Math.atan(m/Math.abs(f)),z:x}}function v(t){return t===X||t===H}function g(t){if("function"==typeof Number.isFinite){if(Number.isFinite(t))return;throw new TypeError("coordinates must be finite numbers")}if("number"!=typeof t||t!=t||!isFinite(t))throw new TypeError("coordinates must be finite numbers")}function w(t,s,i){var a;if(Array.isArray(i)&&(i=Et(i)),St(i),t.datum&&s.datum&&function(t,s){return(t.datum.datum_type===X||t.datum.datum_type===H)&&"WGS84"!==s.datumCode||(s.datum.datum_type===X||s.datum.datum_type===H)&&"WGS84"!==t.datumCode}(t,s)&&(i=w(t,a=new Projection("WGS84"),i),t=a),"enu"!==t.axis&&(i=Nt(t,!1,i)),"longlat"===t.projName)i={x:i.x*at,y:i.y*at,z:i.z||0};else if(t.to_meter&&(i={x:i.x*t.to_meter,y:i.y*t.to_meter,z:i.z||0}),!(i=t.inverse(i)))return;return t.from_greenwich&&(i.x+=t.from_greenwich),i=qt(t.datum,s.datum,i),s.from_greenwich&&(i={x:i.x-s.from_greenwich,y:i.y,z:i.z||0}),"longlat"===s.projName?i={x:i.x*ht,y:i.y*ht,z:i.z||0}:(i=s.forward(i),s.to_meter&&(i={x:i.x/s.to_meter,y:i.y/s.to_meter,z:i.z||0})),"enu"!==s.axis?Nt(s,!0,i):i}function A(t,s,i){var a,h,e;return Array.isArray(i)?(a=w(t,s,i)||{x:NaN,y:NaN},2<i.length?void 0!==t.name&&"geocent"===t.name||void 0!==s.name&&"geocent"===s.name?"number"==typeof a.z?[a.x,a.y,a.z].concat(i.splice(3)):[a.x,a.y,i[2]].concat(i.splice(3)):[a.x,a.y].concat(i.splice(2)):[a.x,a.y]):(h=w(t,s,i),2===(e=Object.keys(i)).length||e.forEach(function(a){if(void 0!==t.name&&"geocent"===t.name||void 0!==s.name&&"geocent"===s.name){if("x"===a||"y"===a||"z"===a)return}else if("x"===a||"y"===a)return;h[a]=i[a]}),h)}function P(t){return t instanceof Projection?t:t.oProj?t.oProj:Projection(t)}function k(t,s,i){t=P(t);var a,h=!1;return void 0===s?(s=t,t=Ct,h=!0):void 0===s.x&&!Array.isArray(s)||(i=s,s=t,t=Ct,h=!0),s=P(s),i?A(t,s,i):(a={forward:function(i){return A(t,s,i)},inverse:function(i){return A(s,t,i)}},h&&(a.oProj=s),a)}function q(t,s){return s=s||5,function(t,s){var i="00000"+t.easting,a="00000"+t.northing;return t.zoneNumber+t.zoneLetter+function(t,s,i){var a=O(i);return function(t,s,i){var a=i-1,h=Rt.charCodeAt(a),e=Gt.charCodeAt(a),n=h+t-1,r=e+s,o=!1;return Bt<n&&(n=n-Bt+jt-1,o=!0),(n===Ot||h<Ot&&Ot<n||(Ot<n||h<Ot)&&o)&&n++,(n===zt||h<zt&&zt<n||(zt<n||h<zt)&&o)&&++n===Ot&&n++,Bt<n&&(n=n-Bt+jt-1),o=Lt<r&&(r=r-Lt+jt-1,!0),(r===Ot||e<Ot&&Ot<r||(Ot<r||e<Ot)&&o)&&r++,(r===zt||e<zt&&zt<r||(zt<r||e<zt)&&o)&&++r===Ot&&r++,Lt<r&&(r=r-Lt+jt-1),String.fromCharCode(n)+String.fromCharCode(r)}(Math.floor(t/1e5),Math.floor(s/1e5)%20,a)}(t.easting,t.northing,t.zoneNumber)+i.substr(i.length-5,s)+a.substr(a.length-5,s)}(function(t){var s,i,a,h,n,r,o=t.lat,l=t.lon,M=6378137,c=E(o),u=E(l);r=Math.floor((l+180)/6)+1,180===l&&(r=60),56<=o&&o<64&&3<=l&&l<12&&(r=32),72<=o&&o<84&&(0<=l&&l<9?r=31:9<=l&&l<21?r=33:21<=l&&l<33?r=35:33<=l&&l<42&&(r=37)),n=E(6*(r-1)-180+3),s=M/Math.sqrt(1-.00669438*Math.sin(c)*Math.sin(c)),i=Math.tan(c)*Math.tan(c),a=.006739496752268451*Math.cos(c)*Math.cos(c);var f=.9996*s*((h=Math.cos(c)*(u-n))+(1-i+a)*h*h*h/6+(5-18*i+i*i+72*a-.39089081163157013)*h*h*h*h*h/120)+5e5,m=.9996*(M*(.9983242984503243*c-.002514607064228144*Math.sin(2*c)+2639046602129982e-21*Math.sin(4*c)-3.418046101696858e-9*Math.sin(6*c))+s*Math.tan(c)*(h*h/2+(5-i+9*a+4*a*a)*h*h*h*h/24+(61-58*i+i*i+600*a-2.2240339282485886)*h*h*h*h*h*h/720));return o<0&&(m+=1e7),{northing:Math.round(m),easting:Math.round(f),zoneNumber:r,zoneLetter:function(t){var s="Z";return t<=84&&72<=t?s="X":t<72&&64<=t?s="W":t<64&&56<=t?s="V":t<56&&48<=t?s="U":t<48&&40<=t?s="T":t<40&&32<=t?s="S":t<32&&24<=t?s="R":t<24&&16<=t?s="Q":t<16&&8<=t?s="P":t<8&&0<=t?s="N":t<0&&-8<=t?s="M":t<-8&&-16<=t?s="L":t<-16&&-24<=t?s="K":t<-24&&-32<=t?s="J":t<-32&&-40<=t?s="H":t<-40&&-48<=t?s="G":t<-48&&-56<=t?s="F":t<-56&&-64<=t?s="E":t<-64&&-72<=t?s="D":t<-72&&-80<=t&&(s="C"),s}(o)}}({lat:t[1],lon:t[0]}),s)}function N(t){var s=I(L(t.toUpperCase()));return s.lat&&s.lon?[s.lon,s.lat]:[(s.left+s.right)/2,(s.top+s.bottom)/2]}function E(t){return t*(Math.PI/180)}function S(t){return t/Math.PI*180}function I(t){var s=t.northing,i=t.easting,a=t.zoneLetter,h=t.zoneNumber;if(h<0||60<h)return null;var e,n,r,o,l,M,c,u,f=6378137,m=(1-Math.sqrt(.99330562))/(1+Math.sqrt(.99330562)),p=i-5e5,y=s;a<"N"&&(y-=1e7),M=6*(h-1)-180+3,u=(c=y/.9996/6367449.145945056)+(3*m/2-27*m*m*m/32)*Math.sin(2*c)+(21*m*m/16-55*m*m*m*m/32)*Math.sin(4*c)+151*m*m*m/96*Math.sin(6*c),e=f/Math.sqrt(1-.00669438*Math.sin(u)*Math.sin(u)),n=Math.tan(u)*Math.tan(u),r=.006739496752268451*Math.cos(u)*Math.cos(u),o=.99330562*f/Math.pow(1-.00669438*Math.sin(u)*Math.sin(u),1.5),l=p/(.9996*e);var v,d=S(d=u-e*Math.tan(u)/o*(l*l/2-(5+3*n+10*r-4*r*r-.06065547077041606)*l*l*l*l/24+(61+90*n+298*r+45*n*n-1.6983531815716497-3*r*r)*l*l*l*l*l*l/720)),_=M+S(_=(l-(1+2*n+r)*l*l*l/6+(5-2*r+28*n-3*r*r+.05391597401814761+24*n*n)*l*l*l*l*l/120)/Math.cos(u));return t.accuracy?{top:(v=I({northing:t.northing+t.accuracy,easting:t.easting+t.accuracy,zoneLetter:t.zoneLetter,zoneNumber:t.zoneNumber})).lat,right:v.lon,bottom:d,left:_}:{lat:d,lon:_}}function O(t){var s=t%It;return 0===s&&(s=It),s}function L(t){if(t&&0===t.length)throw"MGRSPoint coverting from nothing";for(var s,i=t.length,a=null,h="",e=0;!/[A-Z]/.test(s=t.charAt(e));){if(2<=e)throw"MGRSPoint bad conversion from: "+t;h+=s,e++}var n=parseInt(h,10);if(0===e||i<e+3)throw"MGRSPoint bad conversion from: "+t;var r=t.charAt(e++);if(r<="A"||"B"===r||"Y"===r||"Z"<=r||"I"===r||"O"===r)throw"MGRSPoint zone letter "+r+" not handled: "+t;a=t.substring(e,e+=2);for(var o=O(n),l=function(t,s){for(var i=Rt.charCodeAt(s-1),a=1e5,h=!1;i!==t.charCodeAt(0);){if(++i===Ot&&i++,i===zt&&i++,Bt<i){if(h)throw"Bad character: "+t;i=jt,h=!0}a+=1e5}return a}(a.charAt(0),o),M=function(t,s){if("V"<t)throw"MGRSPoint given invalid Northing "+t;for(var i=Gt.charCodeAt(s-1),a=0,h=!1;i!==t.charCodeAt(0);){if(++i===Ot&&i++,i===zt&&i++,Lt<i){if(h)throw"Bad character: "+t;i=jt,h=!0}a+=1e5}return a}(a.charAt(1),o);M<function(t){var s;switch(t){case"C":s=11e5;break;case"D":s=2e6;break;case"E":s=28e5;break;case"F":s=37e5;break;case"G":s=46e5;break;case"H":s=55e5;break;case"J":s=64e5;break;case"K":s=73e5;break;case"L":s=82e5;break;case"M":s=91e5;break;case"N":s=0;break;case"P":s=8e5;break;case"Q":s=17e5;break;case"R":s=26e5;break;case"S":s=35e5;break;case"T":s=44e5;break;case"U":s=53e5;break;case"V":s=62e5;break;case"W":s=7e6;break;case"X":s=79e5;break;default:s=-1}if(0<=s)return s;throw"Invalid zone letter: "+t}(r);)M+=2e6;var c=i-e;if(c%2!=0)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+t;var u,f,m,d=c/2,_=0,x=0;return 0<d&&(u=1e5/Math.pow(10,d),f=t.substring(e,e+d),_=parseFloat(f)*u,m=t.substring(e+d),x=parseFloat(m)*u),{easting:_+l,northing:x+M,zoneLetter:r,zoneNumber:n,accuracy:u}}function Point(t,s,i){if(!(this instanceof Point))return new Point(t,s,i);var a;Array.isArray(t)?(this.x=t[0],this.y=t[1],this.z=t[2]||0):"object"==typeof t?(this.x=t.x,this.y=t.y,this.z=t.z||0):"string"==typeof t&&void 0===s?(a=t.split(","),this.x=parseFloat(a[0],10),this.y=parseFloat(a[1],10),this.z=parseFloat(a[2],10)||0):(this.x=t,this.y=s,this.z=i||0),console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}function W(t,s,i,a){var h;return t<it?(a.value=Xs_AREA_0,h=0):(h=Math.atan2(s,i),Math.abs(h)<=et?a.value=Xs_AREA_0:et<h&&h<=Y+et?(a.value=Xs_AREA_1,h-=Y):Y+et<h||h<=-(Y+et)?(a.value=Xs_AREA_2,h=0<=h?h-rt:h+rt):(a.value=Xs_AREA_3,h+=Y)),h}function U(t,s){var i=t+s;return i<-rt?i+=nt:+rt<i&&(i-=nt),i}t=t&&t.hasOwnProperty("default")?t.default:t;var X=1,H=2,J=4,Z=5,V=484813681109536e-20,Y=Math.PI/2,$=.16666666666666666,tt=.04722222222222222,st=.022156084656084655,it=1e-10,at=.017453292519943295,ht=57.29577951308232,et=Math.PI/4,nt=2*Math.PI,rt=3.14159265359,ot={greenwich:0,lisbon:-9.131906111111,paris:2.337229166667,bogota:-74.080916666667,madrid:-3.687938888889,rome:12.452333333333,bern:7.439583333333,jakarta:106.807719444444,ferro:-17.666666666667,brussels:4.367975,stockholm:18.058277777778,athens:23.7163375,oslo:10.722916666667},lt={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}},Mt=/[\s_\-\/\(\)]/g,ct=function(t){var i,a,h,e={},n=t.split("+").map(function(t){return t.trim()}).filter(function(t){return t}).reduce(function(t,s){var i=s.split("=");return i.push(!0),t[i[0].toLowerCase()]=i[1],t},{}),r={proj:"projName",datum:"datumCode",rf:function(t){e.rf=parseFloat(t)},lat_0:function(t){e.lat0=t*at},lat_1:function(t){e.lat1=t*at},lat_2:function(t){e.lat2=t*at},lat_ts:function(t){e.lat_ts=t*at},lon_0:function(t){e.long0=t*at},lon_1:function(t){e.long1=t*at},lon_2:function(t){e.long2=t*at},alpha:function(t){e.alpha=parseFloat(t)*at},lonc:function(t){e.longc=t*at},x_0:function(t){e.x0=parseFloat(t)},y_0:function(t){e.y0=parseFloat(t)},k_0:function(t){e.k0=parseFloat(t)},k:function(t){e.k0=parseFloat(t)},a:function(t){e.a=parseFloat(t)},b:function(t){e.b=parseFloat(t)},r_a:function(){e.R_A=!0},zone:function(t){e.zone=parseInt(t,10)},south:function(){e.utmSouth=!0},towgs84:function(t){e.datum_params=t.split(",").map(function(t){return parseFloat(t)})},to_meter:function(t){e.to_meter=parseFloat(t)},units:function(t){e.units=t;var i=s(lt,t);i&&(e.to_meter=i.to_meter)},from_greenwich:function(t){e.from_greenwich=t*at},pm:function(t){var i=s(ot,t);e.from_greenwich=(i||parseFloat(t))*at},nadgrids:function(t){"@null"===t?e.datumCode="none":e.nadgrids=t},axis:function(t){3===t.length&&-1!=="ewnsud".indexOf(t.substr(0,1))&&-1!=="ewnsud".indexOf(t.substr(1,1))&&-1!=="ewnsud".indexOf(t.substr(2,1))&&(e.axis=t)}};for(i in n)a=n[i],i in r?"function"==typeof(h=r[i])?h(a):e[h]=a:e[i]=a;return"string"==typeof e.datumCode&&"WGS84"!==e.datumCode&&(e.datumCode=e.datumCode.toLowerCase()),e};!function(t){t("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),t("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),t("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),t.WGS84=t["EPSG:4326"],t["EPSG:3785"]=t["EPSG:3857"],t.GOOGLE=t["EPSG:3857"],t["EPSG:900913"]=t["EPSG:3857"],t["EPSG:102113"]=t["EPSG:3857"]}(i);function pt(t,s,i){var a=t*s;return i/Math.sqrt(1-a*a)}function yt(t){return t<0?-1:1}function dt(t){return Math.abs(t)<=rt?t:t-yt(t)*nt}function _t(t,s,i){var a=t*i,h=.5*t,a=Math.pow((1-a)/(1+a),h);return Math.tan(.5*(Y-s))/a}function xt(t,s){for(var i,a,h=.5*t,e=Y-2*Math.atan(s),n=0;n<=15;n++)if(i=t*Math.sin(e),e+=a=Y-2*Math.atan(s*Math.pow((1-i)/(1+i),h))-e,Math.abs(a)<=1e-10)return e;return-9999}var ut=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"],ft=["3857","900913","3785","102113"],mt=function(t,s){var i,a;if(t=t||{},!s)return t;for(a in s)void 0!==(i=s[a])&&(t[a]=i);return t},vt=[{init:function(){var t=this.b/this.a;this.es=1-t*t,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=pt(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)},forward:function(t){var e,n,a,h,s=t.x,i=t.y;return 90<i*ht&&i*ht<-90&&180<s*ht&&s*ht<-180||Math.abs(Math.abs(i)-Y)<=it?null:(h=this.sphere?(a=this.x0+this.a*this.k0*dt(s-this.long0),this.y0+this.a*this.k0*Math.log(Math.tan(et+.5*i))):(e=Math.sin(i),n=_t(this.e,i,e),a=this.x0+this.a*this.k0*dt(s-this.long0),this.y0-this.a*this.k0*Math.log(n)),t.x=a,t.y=h,t)},inverse:function(t){var s,i,a=t.x-this.x0,h=t.y-this.y0;if(this.sphere)i=Y-2*Math.atan(Math.exp(-h/(this.a*this.k0)));else{var e=Math.exp(-h/(this.a*this.k0));if(-9999===(i=xt(this.e,e)))return null}return s=dt(this.long0+a/(this.a*this.k0)),t.x=s,t.y=i,t},names:["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"]},{init:function(){},forward:M,inverse:M,names:["longlat","identity"]}],gt={},bt=[],wt={start:function(){vt.forEach(c)},add:c,get:function(t){if(!t)return!1;var s=t.toLowerCase();return void 0!==gt[s]&&bt[gt[s]]?bt[gt[s]]:void 0}},At={MERIT:{a:6378137,rf:298.257,ellipseName:"MERIT 1983"},SGS85:{a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},GRS80:{a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},IAU76:{a:6378140,rf:298.257,ellipseName:"IAU 1976"},airy:{a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},APL4:{a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},NWL9D:{a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},mod_airy:{a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},andrae:{a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},aust_SA:{a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},GRS67:{a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},bessel:{a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},bess_nam:{a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},clrk66:{a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},clrk80:{a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},clrk58:{a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"},CPM:{a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},delmbr:{a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},engelis:{a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},evrst30:{a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},evrst48:{a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},evrst56:{a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},evrst69:{a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},evrstSS:{a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},fschr60:{a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},fschr60m:{a:6378155,rf:298.3,ellipseName:"Fischer 1960"},fschr68:{a:6378150,rf:298.3,ellipseName:"Fischer 1968"},helmert:{a:6378200,rf:298.3,ellipseName:"Helmert 1906"},hough:{a:6378270,rf:297,ellipseName:"Hough"},intl:{a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},kaula:{a:6378163,rf:298.24,ellipseName:"Kaula 1961"},lerch:{a:6378139,rf:298.257,ellipseName:"Lerch 1979"},mprts:{a:6397300,rf:191,ellipseName:"Maupertius 1738"},new_intl:{a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},plessis:{a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},krass:{a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},SEasia:{a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},walbeck:{a:6376896,b:6355834.8467,ellipseName:"Walbeck"},WGS60:{a:6378165,rf:298.3,ellipseName:"WGS 60"},WGS66:{a:6378145,rf:298.25,ellipseName:"WGS 66"},WGS7:{a:6378135,rf:298.26,ellipseName:"WGS 72"}},Pt=At.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};At.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};var kt={wgs84:{towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},ch1903:{towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},ggrs87:{towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},nad83:{towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},nad27:{nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},potsdam:{towgs84:"606.0,23.0,413.0",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},carthage:{towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},hermannskogel:{towgs84:"653.0,-212.0,449.0",ellipse:"bessel",datumName:"Hermannskogel"},osni52:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},ire65:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},rassadiran:{towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},nzgd49:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},osgb36:{towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},s_jtsk:{towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},beduaram:{towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},gunung_segara:{towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},rnb72:{towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"}};Projection.projections=wt,Projection.projections.start();var qt=function(t,s,i){return!function(t,s){return t.datum_type===s.datum_type&&!(t.a!==s.a||5e-11<Math.abs(t.es-s.es))&&(t.datum_type===X?t.datum_params[0]===s.datum_params[0]&&t.datum_params[1]===s.datum_params[1]&&t.datum_params[2]===s.datum_params[2]:t.datum_type!==H||t.datum_params[0]===s.datum_params[0]&&t.datum_params[1]===s.datum_params[1]&&t.datum_params[2]===s.datum_params[2]&&t.datum_params[3]===s.datum_params[3]&&t.datum_params[4]===s.datum_params[4]&&t.datum_params[5]===s.datum_params[5]&&t.datum_params[6]===s.datum_params[6])}(t,s)&&t.datum_type!==Z&&s.datum_type!==Z&&(t.es!==s.es||t.a!==s.a||v(t.datum_type)||v(s.datum_type))?(i=y(i,t.es,t.a),v(t.datum_type)&&(i=function(t,s,i){if(s===X)return{x:t.x+i[0],y:t.y+i[1],z:t.z+i[2]};if(s===H){var a=i[0],h=i[1],e=i[2],n=i[3],r=i[4],o=i[5],l=i[6];return{x:l*(t.x-o*t.y+r*t.z)+a,y:l*(o*t.x+t.y-n*t.z)+h,z:l*(-r*t.x+n*t.y+t.z)+e}}}(i,t.datum_type,t.datum_params)),v(s.datum_type)&&(i=function(t,s,i){if(s===X)return{x:t.x-i[0],y:t.y-i[1],z:t.z-i[2]};if(s===H){var a=i[0],h=i[1],e=i[2],n=i[3],r=i[4],o=i[5],l=i[6],M=(t.x-a)/l,c=(t.y-h)/l,u=(t.z-e)/l;return{x:M+o*c-r*u,y:-o*M+c+n*u,z:r*M-n*c+u}}}(i,s.datum_type,s.datum_params)),d(i,s.es,s.a,s.b)):i},Nt=function(t,s,i){for(var a,h,n=i.x,r=i.y,o=i.z||0,l={},e=0;e<3;e++)if(!s||2!==e||void 0!==i.z)switch(h=0===e?(a=n,-1!=="ew".indexOf(t.axis[e])?"x":"y"):1===e?(a=r,-1!=="ns".indexOf(t.axis[e])?"y":"x"):(a=o,"z"),t.axis[e]){case"e":case"w":case"n":case"s":l[h]=a;break;case"u":void 0!==i[h]&&(l.z=a);break;case"d":void 0!==i[h]&&(l.z=-a);break;default:return null}return l},Et=function(t){var s={x:t[0],y:t[1]};return 2<t.length&&(s.z=t[2]),3<t.length&&(s.m=t[3]),s},St=function(t){g(t.x),g(t.y)},Ct=Projection("WGS84"),It=6,Rt="AJSAJS",Gt="AFAFAF",jt=65,Ot=73,zt=79,Lt=86,Bt=90,Tt={forward:q,inverse:function(t){var s=I(L(t.toUpperCase()));return s.lat&&s.lon?[s.lon,s.lat,s.lon,s.lat]:[s.left,s.bottom,s.right,s.top]},toPoint:N};Point.fromMGRS=function(t){return new Point(N(t))},Point.prototype.toMGRS=function(t){return q([this.x,this.y],t)};function Qt(t){var s=[];s[0]=1-t*(.25+t*(.046875+t*(.01953125+t*Ft))),s[1]=t*(.75-t*(.046875+t*(.01953125+t*Ft)));var i=t*t;return s[2]=i*(.46875-t*(.013020833333333334+.007120768229166667*t)),i*=t,s[3]=i*(.3645833333333333-.005696614583333333*t),s[4]=i*t*.3076171875,s}function Dt(t,s,i,a){return i*=s,s*=s,a[0]*t-i*(a[1]+s*(a[2]+s*(a[3]+s*a[4])))}function Wt(t,s,i){for(var a=1/(1-s),h=t,e=20;e;--e){var n=Math.sin(h),r=1-s*n*n;if(h-=r=(Dt(h,n,Math.cos(h),i)-t)*(r*Math.sqrt(r))*a,Math.abs(r)<it)return h}return h}function Kt(t){var s=Math.exp(t);return(s-1/s)/2}function Xt(t,s){t=Math.abs(t),s=Math.abs(s);var i=Math.max(t,s),a=Math.min(t,s)/(i||1);return i*Math.sqrt(1+Math.pow(a,2))}function Jt(t){var s=function(t){var s=1+t,i=s-1;return 0==i?t:t*Math.log(s)/i}((s=Math.abs(t))*(1+s/(Xt(1,s)+1)));return t<0?-s:s}function Zt(t,s){for(var i,a=2*Math.cos(2*s),h=t.length-1,e=t[h],n=0;0<=--h;)i=a*e-n+t[h],n=e,e=i;return s+i*Math.sin(2*s)}function $t(t,s,i){for(var a,h,e=Math.sin(s),n=Math.cos(s),r=Kt(i),o=function(t){var s=Math.exp(t);return(s+1/s)/2}(i),l=2*n*o,M=-2*e*r,c=t.length-1,u=t[c],f=0,m=0,p=0;0<=--c;)a=m,h=f,u=l*(m=u)-a-M*(f=p)+t[c],p=M*m-h+l*f;return[(l=e*o)*u-(M=n*r)*p,l*p+M*u]}function as(t,s){return Math.pow((1-t)/(1+t),s)}function us(t,s,i,a,h){return t*h-s*Math.sin(2*h)+i*Math.sin(4*h)-a*Math.sin(6*h)}function fs(t){return 1-.25*t*(1+t/16*(3+1.25*t))}function ms(t){return.375*t*(1+.25*t*(1+.46875*t))}function ps(t){return.05859375*t*t*(1+.75*t)}function ys(t){return t*t*t*(35/3072)}function ds(t,s,i){var a=s*i;return t/Math.sqrt(1-a*a)}function _s(t){return Math.abs(t)<Y?t:t-yt(t)*Math.PI}function xs(t,s,i,a,h){for(var n,e=t/s,r=0;r<15;r++)if(e+=n=(t-(s*e-i*Math.sin(2*e)+a*Math.sin(4*e)-h*Math.sin(6*e)))/(s-2*i*Math.cos(2*e)+4*a*Math.cos(4*e)-6*h*Math.cos(6*e)),Math.abs(n)<=1e-10)return e;return NaN}function gs(t,s){var i;return 1e-7<t?(1-t*t)*(s/(1-(i=t*s)*i)-.5/t*Math.log((1-i)/(1+i))):2*s}function Es(t){return 1<Math.abs(t)&&(t=1<t?1:-1),Math.asin(t)}function ii(t,s){return t[0]+s*(t[1]+s*(t[2]+s*t[3]))}var proj4,Ft=.01068115234375,Ut={init:function(){this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.es&&(this.en=Qt(this.es),this.ml0=Dt(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))},forward:function(t){var h=t.x,e=t.y,n=dt(h-this.long0),r=Math.sin(e),o=Math.cos(e);if(this.es){var l=o*n,M=Math.pow(l,2),c=this.ep2*Math.pow(o,2),u=Math.pow(c,2),f=Math.abs(o)>it?Math.tan(e):0,m=Math.pow(f,2),p=Math.pow(m,2),s=1-this.es*Math.pow(r,2);l/=Math.sqrt(s);var y=Dt(e,r,o,this.en),i=this.a*(this.k0*l*(1+M/6*(1-m+c+M/20*(5-18*m+p+14*c-58*m*c+M/42*(61+179*p-p*m-479*m)))))+this.x0,a=this.a*(this.k0*(y-this.ml0+r*n*l/2*(1+M/12*(5-m+9*c+4*u+M/30*(61+p-58*m+270*c-330*m*c+M/56*(1385+543*p-p*m-3111*m))))))+this.y0}else{var d=o*Math.sin(n);if(Math.abs(Math.abs(d)-1)<it)return 93;if(i=.5*this.a*this.k0*Math.log((1+d)/(1-d))+this.x0,a=o*Math.cos(n)/Math.sqrt(1-Math.pow(d,2)),1<=(d=Math.abs(a))){if(it<d-1)return 93;a=0}else a=Math.acos(a);e<0&&(a=-a),a=this.a*this.k0*(a-this.lat0)+this.y0}return t.x=i,t.y=a,t},inverse:function(t){var i,r,o,l,M,c,u,f,s,m,p,a,h,y,d,_,x,e=(t.x-this.x0)*(1/this.a),n=(t.y-this.y0)*(1/this.a);return h=this.es?(s=this.ml0+n/this.k0,i=Wt(s,this.es,this.en),Math.abs(i)<Y?(r=Math.sin(i),o=Math.cos(i),l=Math.abs(o)>it?Math.tan(i):0,M=this.ep2*Math.pow(o,2),c=Math.pow(M,2),u=Math.pow(l,2),f=Math.pow(u,2),s=1-this.es*Math.pow(r,2),m=e*Math.sqrt(s)/this.k0,a=i-(s*=l)*(p=Math.pow(m,2))/(1-this.es)*.5*(1-p/12*(5+3*u-9*M*u+M-4*c-p/30*(61+90*u-252*M*u+45*f+46*M-p/56*(1385+3633*u+4095*f+1574*f*u)))),dt(this.long0+m*(1-p/6*(1+2*u+M-p/20*(5+28*u+24*f+8*M*u+6*M-p/42*(61+662*u+1320*f+720*f*u))))/o)):(a=Y*yt(n),0)):(d=.5*((y=Math.exp(e/this.k0))-1/y),_=this.lat0+n/this.k0,x=Math.cos(_),s=Math.sqrt((1-Math.pow(x,2))/(1+Math.pow(d,2))),a=Math.asin(s),n<0&&(a=-a),0==d&&0===x?0:dt(Math.atan2(d,x)+this.long0)),t.x=h,t.y=a,t},names:["Transverse_Mercator","Transverse Mercator","tmerc"]},ts={init:function(){if(void 0===this.es||this.es<=0)throw new Error("incorrect elliptical usage");this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var t=this.es/(1+Math.sqrt(1-this.es)),s=t/(2-t),i=s;this.cgb[0]=s*(2+s*(-2/3+s*(s*(116/45+s*(26/45+-2854/675*s))-2))),this.cbg[0]=s*(s*(2/3+s*(4/3+s*(-82/45+s*(32/45+4642/4725*s))))-2),i*=s,this.cgb[1]=i*(7/3+s*(s*(-227/45+s*(2704/315+2323/945*s))-1.6)),this.cbg[1]=i*(5/3+s*(-16/15+s*(-13/9+s*(904/315+-1522/945*s)))),i*=s,this.cgb[2]=i*(56/15+s*(-136/35+s*(-1262/105+73814/2835*s))),this.cbg[2]=i*(-26/15+s*(34/21+s*(1.6+-12686/2835*s))),i*=s,this.cgb[3]=i*(4279/630+s*(-332/35+-399572/14175*s)),this.cbg[3]=i*(1237/630+s*(-24832/14175*s-2.4)),i*=s,this.cgb[4]=i*(4174/315+-144838/6237*s),this.cbg[4]=i*(-734/315+109598/31185*s),i*=s,this.cgb[5]=601676/22275*i,this.cbg[5]=444337/155925*i,i=Math.pow(s,2),this.Qn=this.k0/(1+s)*(1+i*(.25+i*(1/64+i/256))),this.utg[0]=s*(s*(2/3+s*(-37/96+s*(1/360+s*(81/512+-96199/604800*s))))-.5),this.gtu[0]=s*(.5+s*(-2/3+s*(5/16+s*(41/180+s*(-127/288+7891/37800*s))))),this.utg[1]=i*(-1/48+s*(-1/15+s*(437/1440+s*(-46/105+1118711/3870720*s)))),this.gtu[1]=i*(13/48+s*(s*(557/1440+s*(281/630+-1983433/1935360*s))-.6)),i*=s,this.utg[2]=i*(-17/480+s*(37/840+s*(209/4480+-5569/90720*s))),this.gtu[2]=i*(61/240+s*(-103/140+s*(15061/26880+167603/181440*s))),i*=s,this.utg[3]=i*(-4397/161280+s*(11/504+830251/7257600*s)),this.gtu[3]=i*(49561/161280+s*(-179/168+6601661/7257600*s)),i*=s,this.utg[4]=i*(-4583/161280+108847/3991680*s),this.gtu[4]=i*(34729/80640+-3418889/1995840*s),i*=s,this.utg[5]=-.03233083094085698*i,this.gtu[5]=.6650675310896665*i;var a=Zt(this.cbg,this.lat0);this.Zb=-this.Qn*(a+function(t,s){for(var i,a=2*Math.cos(s),h=t.length-1,e=t[h],n=0;0<=--h;)i=a*e-n+t[h],n=e,e=i;return Math.sin(s)*i}(this.gtu,2*a))},forward:function(t){var s=dt(t.x-this.long0),i=t.y,i=Zt(this.cbg,i),a=Math.sin(i),h=Math.cos(i),e=Math.sin(s),n=Math.cos(s);i=Math.atan2(a,n*h),s=Math.atan2(e*h,Xt(a,h*n)),s=Jt(Math.tan(s));var o,l,r=$t(this.gtu,2*i,2*s);return i+=r[0],s+=r[1],l=Math.abs(s)<=2.623395162778?(o=this.a*(this.Qn*s)+this.x0,this.a*(this.Qn*i+this.Zb)+this.y0):o=1/0,t.x=o,t.y=l,t},inverse:function(t){var e,n,r,o,l,a,h,s=(t.x-this.x0)*(1/this.a),i=(t.y-this.y0)*(1/this.a);return i=(i-this.Zb)/this.Qn,s/=this.Qn,h=Math.abs(s)<=2.623395162778?(i+=(e=$t(this.utg,2*i,2*s))[0],s+=e[1],s=Math.atan(Kt(s)),n=Math.sin(i),r=Math.cos(i),o=Math.sin(s),l=Math.cos(s),i=Math.atan2(n*l,Xt(o,l*r)),s=Math.atan2(o,l*r),a=dt(s+this.long0),Zt(this.cgb,i)):a=1/0,t.x=a,t.y=h,t},names:["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc"]},is={init:function(){var t=function(t,s){if(void 0===t){if((t=Math.floor(30*(dt(s)+Math.PI)/Math.PI)+1)<0)return 0;if(60<t)return 60}return t}(this.zone,this.long0);if(void 0===t)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(t)-183)*at,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,ts.init.apply(this),this.forward=ts.forward,this.inverse=ts.inverse},names:["Universal Transverse Mercator System","utm"],dependsOn:"etmerc"},es={init:function(){var t=Math.sin(this.lat0),s=Math.cos(this.lat0);s*=s,this.rc=Math.sqrt(1-this.es)/(1-this.es*t*t),this.C=Math.sqrt(1+this.es*s*s/(1-this.es)),this.phic0=Math.asin(t/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+et)/(Math.pow(Math.tan(.5*this.lat0+et),this.C)*as(this.e*t,this.ratexp))},forward:function(t){var s=t.x,i=t.y;return t.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*i+et),this.C)*as(this.e*Math.sin(i),this.ratexp))-Y,t.x=this.C*s,t},inverse:function(t){for(var s=t.x/this.C,i=t.y,a=Math.pow(Math.tan(.5*i+et)/this.K,1/this.C),h=20;0<h&&(i=2*Math.atan(a*as(this.e*Math.sin(t.y),-.5*this.e))-Y,!(Math.abs(i-t.y)<1e-14));--h)t.y=i;return h?(t.x=s,t.y=i,t):null},names:["gauss"]},ns={init:function(){es.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))},forward:function(t){var s,i,a,h;return t.x=dt(t.x-this.long0),es.forward.apply(this,[t]),s=Math.sin(t.y),i=Math.cos(t.y),a=Math.cos(t.x),h=this.k0*this.R2/(1+this.sinc0*s+this.cosc0*i*a),t.x=h*i*Math.sin(t.x),t.y=h*(this.cosc0*s-this.sinc0*i*a),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t},inverse:function(t){var e,n,s,i,h,a;return t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,a=(e=Math.sqrt(t.x*t.x+t.y*t.y))?(n=2*Math.atan2(e,this.R2),s=Math.sin(n),i=Math.cos(n),h=Math.asin(i*this.sinc0+t.y*s*this.cosc0/e),Math.atan2(t.x*s,e*this.cosc0*i-t.y*this.sinc0*s)):(h=this.phic0,0),t.x=a,t.y=h,es.inverse.apply(this,[t]),t.x=dt(t.x+this.long0),t},names:["Stereographic_North_Pole","Oblique_Stereographic","Polar_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"]},rs={init:function(){this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=it&&(this.k0=.5*(1+yt(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=it&&(0<this.lat0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=it&&(this.k0=.5*this.cons*pt(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/_t(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=pt(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-Y,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))},forward:function(t){var s,i,a,h,e,n,r=t.x,o=t.y,l=Math.sin(o),M=Math.cos(o),c=dt(r-this.long0);return Math.abs(Math.abs(r-this.long0)-Math.PI)<=it&&Math.abs(o+this.lat0)<=it?(t.x=NaN,t.y=NaN):this.sphere?(s=2*this.k0/(1+this.sinlat0*l+this.coslat0*M*Math.cos(c)),t.x=this.a*s*M*Math.sin(c)+this.x0,t.y=this.a*s*(this.coslat0*l-this.sinlat0*M*Math.cos(c))+this.y0):(i=2*Math.atan(this.ssfn_(o,l,this.e))-Y,h=Math.cos(i),a=Math.sin(i),Math.abs(this.coslat0)<=it?(e=_t(this.e,o*this.con,this.con*l),n=2*this.a*this.k0*e/this.cons,t.x=this.x0+n*Math.sin(r-this.long0),t.y=this.y0-this.con*n*Math.cos(r-this.long0)):(Math.abs(this.sinlat0)<it?(s=2*this.a*this.k0/(1+h*Math.cos(c)),t.y=s*a):(s=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*a+this.cosX0*h*Math.cos(c))),t.y=s*(this.cosX0*a-this.sinX0*h*Math.cos(c))+this.y0),t.x=s*h*Math.sin(c)+this.x0)),t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var a,h,e,n=Math.sqrt(t.x*t.x+t.y*t.y);if(this.sphere){var r=2*Math.atan(n/(2*this.a*this.k0)),s=this.long0,i=this.lat0;return n<=it||(i=Math.asin(Math.cos(r)*this.sinlat0+t.y*Math.sin(r)*this.coslat0/n),s=dt(Math.abs(this.coslat0)<it?0<this.lat0?this.long0+Math.atan2(t.x,-1*t.y):this.long0+Math.atan2(t.x,t.y):this.long0+Math.atan2(t.x*Math.sin(r),n*this.coslat0*Math.cos(r)-t.y*this.sinlat0*Math.sin(r)))),t.x=s,t.y=i,t}if(Math.abs(this.coslat0)<=it){if(n<=it)return i=this.lat0,s=this.long0,t.x=s,t.y=i,t;t.x*=this.con,t.y*=this.con,a=n*this.cons/(2*this.a*this.k0),i=this.con*xt(this.e,a),s=this.con*dt(this.con*this.long0+Math.atan2(t.x,-1*t.y))}else h=2*Math.atan(n*this.cosX0/(2*this.a*this.k0*this.ms1)),s=this.long0,n<=it?e=this.X0:(e=Math.asin(Math.cos(h)*this.sinX0+t.y*Math.sin(h)*this.cosX0/n),s=dt(this.long0+Math.atan2(t.x*Math.sin(h),n*this.cosX0*Math.cos(h)-t.y*this.sinX0*Math.sin(h)))),i=-1*xt(this.e,Math.tan(.5*(Y+e)));return t.x=s,t.y=i,t},names:["stere","Stereographic_South_Pole","Polar Stereographic (variant B)"],ssfn_:function(t,s,i){return s*=i,Math.tan(.5*(Y+t))*Math.pow((1-s)/(1+s),.5*i)}},os={init:function(){var t=this.lat0;this.lambda0=this.long0;var s=Math.sin(t),i=this.a,a=1/this.rf,h=2*a-Math.pow(a,2),e=this.e=Math.sqrt(h);this.R=this.k0*i*Math.sqrt(1-h)/(1-h*Math.pow(s,2)),this.alpha=Math.sqrt(1+h/(1-h)*Math.pow(Math.cos(t),4)),this.b0=Math.asin(s/this.alpha);var n=Math.log(Math.tan(Math.PI/4+this.b0/2)),r=Math.log(Math.tan(Math.PI/4+t/2)),o=Math.log((1+e*s)/(1-e*s));this.K=n-this.alpha*r+this.alpha*e/2*o},forward:function(t){var s=Math.log(Math.tan(Math.PI/4-t.y/2)),i=this.e/2*Math.log((1+this.e*Math.sin(t.y))/(1-this.e*Math.sin(t.y))),a=-this.alpha*(s+i)+this.K,h=2*(Math.atan(Math.exp(a))-Math.PI/4),e=this.alpha*(t.x-this.lambda0),n=Math.atan(Math.sin(e)/(Math.sin(this.b0)*Math.tan(h)+Math.cos(this.b0)*Math.cos(e))),r=Math.asin(Math.cos(this.b0)*Math.sin(h)-Math.sin(this.b0)*Math.cos(h)*Math.cos(e));return t.y=this.R/2*Math.log((1+Math.sin(r))/(1-Math.sin(r)))+this.y0,t.x=this.R*n+this.x0,t},inverse:function(t){for(var o,s=t.x-this.x0,i=t.y-this.y0,a=s/this.R,h=2*(Math.atan(Math.exp(i/this.R))-Math.PI/4),e=Math.asin(Math.cos(this.b0)*Math.sin(h)+Math.sin(this.b0)*Math.cos(h)*Math.cos(a)),n=Math.atan(Math.sin(a)/(Math.cos(this.b0)*Math.cos(a)-Math.sin(this.b0)*Math.tan(h))),r=this.lambda0+n/this.alpha,l=e,M=-1e3,c=0;1e-7<Math.abs(l-M);){if(20<++c)return;o=1/this.alpha*(Math.log(Math.tan(Math.PI/4+e/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(l))/2)),M=l,l=2*Math.atan(Math.exp(o))-Math.PI/2}return t.x=r,t.y=l,t},names:["somerc"]},ls={init:function(){this.no_off=this.no_off||!1,this.no_rot=this.no_rot||!1,isNaN(this.k0)&&(this.k0=1);var t=Math.sin(this.lat0),s=Math.cos(this.lat0),i=this.e*t;this.bl=Math.sqrt(1+this.es/(1-this.es)*Math.pow(s,4)),this.al=this.a*this.bl*this.k0*Math.sqrt(1-this.es)/(1-i*i);var e,r,o,l,M,n,c,u,f,m,a=_t(this.e,this.lat0,t),h=this.bl/s*Math.sqrt((1-this.es)/(1-i*i));h*h<1&&(h=1),isNaN(this.longc)?(r=_t(this.e,this.lat1,Math.sin(this.lat1)),o=_t(this.e,this.lat2,Math.sin(this.lat2)),0<=this.lat0?this.el=(h+Math.sqrt(h*h-1))*Math.pow(a,this.bl):this.el=(h-Math.sqrt(h*h-1))*Math.pow(a,this.bl),l=Math.pow(r,this.bl),M=Math.pow(o,this.bl),n=.5*((e=this.el/l)-1/e),c=(this.el*this.el-M*l)/(this.el*this.el+M*l),u=(M-l)/(M+l),f=dt(this.long1-this.long2),this.long0=.5*(this.long1+this.long2)-Math.atan(c*Math.tan(.5*this.bl*f)/u)/this.bl,this.long0=dt(this.long0),m=dt(this.long1-this.long0),this.gamma0=Math.atan(Math.sin(this.bl*m)/n),this.alpha=Math.asin(h*Math.sin(this.gamma0))):(e=0<=this.lat0?h+Math.sqrt(h*h-1):h-Math.sqrt(h*h-1),this.el=e*Math.pow(a,this.bl),n=.5*(e-1/e),this.gamma0=Math.asin(Math.sin(this.alpha)/h),this.long0=this.longc-Math.asin(n*Math.tan(this.gamma0))/this.bl),this.no_off?this.uc=0:0<=this.lat0?this.uc=this.al/this.bl*Math.atan2(Math.sqrt(h*h-1),Math.cos(this.alpha)):this.uc=-1*this.al/this.bl*Math.atan2(Math.sqrt(h*h-1),Math.cos(this.alpha))},forward:function(t){var a,r,o,l,M,c,u,i,s,h=t.x,e=t.y,n=dt(h-this.long0);return s=Math.abs(Math.abs(e)-Y)<=it?(a=0<e?-1:1,i=this.al/this.bl*Math.log(Math.tan(et+a*this.gamma0*.5)),-1*a*Y*this.al/this.bl):(r=_t(this.e,e,Math.sin(e)),l=.5*((o=this.el/Math.pow(r,this.bl))-1/o),M=.5*(o+1/o),c=Math.sin(this.bl*n),u=(l*Math.sin(this.gamma0)-c*Math.cos(this.gamma0))/M,i=Math.abs(Math.abs(u)-1)<=it?Number.POSITIVE_INFINITY:.5*this.al*Math.log((1-u)/(1+u))/this.bl,Math.abs(Math.cos(this.bl*n))<=it?this.al*this.bl*n:this.al*Math.atan2(l*Math.cos(this.gamma0)+c*Math.sin(this.gamma0),Math.cos(this.bl*n))/this.bl),this.no_rot?(t.x=this.x0+s,t.y=this.y0+i):(s-=this.uc,t.x=this.x0+i*Math.cos(this.alpha)+s*Math.sin(this.alpha),t.y=this.y0+s*Math.cos(this.alpha)-i*Math.sin(this.alpha)),t},inverse:function(t){var s,i;this.no_rot?(i=t.y-this.y0,s=t.x-this.x0):(i=(t.x-this.x0)*Math.cos(this.alpha)-(t.y-this.y0)*Math.sin(this.alpha),s=(t.y-this.y0)*Math.cos(this.alpha)+(t.x-this.x0)*Math.sin(this.alpha),s+=this.uc);var a=Math.exp(-1*this.bl*i/this.al),h=.5*(a-1/a),e=.5*(a+1/a),n=Math.sin(this.bl*s/this.al),r=(n*Math.cos(this.gamma0)+h*Math.sin(this.gamma0))/e,o=Math.pow(this.el/Math.sqrt((1+r)/(1-r)),1/this.bl);return Math.abs(r-1)<it?(t.x=this.long0,t.y=Y):Math.abs(1+r)<it?(t.x=this.long0,t.y=-1*Y):(t.y=xt(this.e,o),t.x=dt(this.long0-Math.atan2(h*Math.cos(this.gamma0)-n*Math.sin(this.gamma0),Math.cos(this.bl*s/this.al))/this.bl)),t},names:["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","omerc"]},Ms={init:function(){var t,s,i,a,h,e,n,r,o,l;this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,Math.abs(this.lat1+this.lat2)<it||(t=this.b/this.a,this.e=Math.sqrt(1-t*t),s=Math.sin(this.lat1),i=Math.cos(this.lat1),a=pt(this.e,s,i),h=_t(this.e,this.lat1,s),e=Math.sin(this.lat2),n=Math.cos(this.lat2),r=pt(this.e,e,n),o=_t(this.e,this.lat2,e),l=_t(this.e,this.lat0,Math.sin(this.lat0)),Math.abs(this.lat1-this.lat2)>it?this.ns=Math.log(a/r)/Math.log(h/o):this.ns=s,isNaN(this.ns)&&(this.ns=s),this.f0=a/(this.ns*Math.pow(h,this.ns)),this.rh=this.a*this.f0*Math.pow(l,this.ns),this.title||(this.title="Lambert Conformal Conic"))},forward:function(t){var s=t.x,i=t.y;Math.abs(2*Math.abs(i)-Math.PI)<=it&&(i=yt(i)*(Y-2*it));var a,h,e=Math.abs(Math.abs(i)-Y);if(it<e)a=_t(this.e,i,Math.sin(i)),h=this.a*this.f0*Math.pow(a,this.ns);else{if(i*this.ns<=0)return null;h=0}var n=this.ns*dt(s-this.long0);return t.x=this.k0*(h*Math.sin(n))+this.x0,t.y=this.k0*(this.rh-h*Math.cos(n))+this.y0,t},inverse:function(t){var s,a,h,e,n=(t.x-this.x0)/this.k0,r=this.rh-(t.y-this.y0)/this.k0,i=0<this.ns?(s=Math.sqrt(n*n+r*r),1):(s=-Math.sqrt(n*n+r*r),-1),o=0;if(0!==s&&(o=Math.atan2(i*n,i*r)),0!==s||0<this.ns){if(i=1/this.ns,a=Math.pow(s/(this.a*this.f0),i),-9999===(h=xt(this.e,a)))return null}else h=-Y;return e=dt(o/this.ns+this.long0),t.x=e,t.y=h,t},names:["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_2SP","lcc"]},cs={init:function(){this.a=6377397.155,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.4334234309119251),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq},forward:function(t){var o=t.x,l=t.y,M=dt(o-this.long0),s=Math.pow((1+this.e*Math.sin(l))/(1-this.e*Math.sin(l)),this.alfa*this.e/2),i=2*(Math.atan(this.k*Math.pow(Math.tan(l/2+this.s45),this.alfa)/s)-this.s45),a=-M*this.alfa,h=Math.asin(Math.cos(this.ad)*Math.sin(i)+Math.sin(this.ad)*Math.cos(i)*Math.cos(a)),e=Math.asin(Math.cos(i)*Math.sin(a)/Math.cos(h)),n=this.n*e,r=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(h/2+this.s45),this.n);return t.y=r*Math.cos(n),t.x=r*Math.sin(n),this.czech||(t.y*=-1,t.x*=-1),t},inverse:function(t){var s,i,a,h,e,n,r,o=t.x;t.x=t.y,t.y=o,this.czech||(t.y*=-1,t.x*=-1),e=Math.sqrt(t.x*t.x+t.y*t.y),h=Math.atan2(t.y,t.x)/Math.sin(this.s0),a=2*(Math.atan(Math.pow(this.ro0/e,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),s=Math.asin(Math.cos(this.ad)*Math.sin(a)-Math.sin(this.ad)*Math.cos(a)*Math.cos(h)),i=Math.asin(Math.cos(a)*Math.sin(h)/Math.cos(s)),t.x=this.long0-i/this.alfa,n=s;for(var l=r=0;t.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(s/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(n))/(1-this.e*Math.sin(n)),this.e/2))-this.s45),Math.abs(n-t.y)<1e-10&&(r=1),n=t.y,l+=1,0===r&&l<15;);return 15<=l?null:t},names:["Krovak","krovak"]},vs={init:function(){this.sphere||(this.e0=fs(this.es),this.e1=ms(this.es),this.e2=ps(this.es),this.e3=ys(this.es),this.ml0=this.a*us(this.e0,this.e1,this.e2,this.e3,this.lat0))},forward:function(t){var e,n,r,o,l,M,c,s,i,a=t.x,h=t.y,a=dt(a-this.long0);return i=this.sphere?(s=this.a*Math.asin(Math.cos(h)*Math.sin(a)),this.a*(Math.atan2(Math.tan(h),Math.cos(a))-this.lat0)):(e=Math.sin(h),n=Math.cos(h),r=ds(this.a,this.e,e),o=Math.tan(h)*Math.tan(h),s=r*(l=a*Math.cos(h))*(1-(M=l*l)*o*(1/6-(8-o+8*(c=this.es*n*n/(1-this.es)))*M/120)),this.a*us(this.e0,this.e1,this.e2,this.e3,h)-this.ml0+r*e/n*M*(.5+(5-o+6*c)*M/24)),t.x=s+this.x0,t.y=i+this.y0,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var a=t.x/this.a,h=t.y/this.a;if(this.sphere)var e=h+this.lat0,s=Math.asin(Math.sin(e)*Math.cos(a)),i=Math.atan2(Math.tan(a),Math.cos(e));else{var n=this.ml0/this.a+h,r=xs(n,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(r)-Y)<=it)return t.x=this.long0,t.y=Y,h<0&&(t.y*=-1),t;var o=ds(this.a,this.e,Math.sin(r)),l=o*o*o/this.a/this.a*(1-this.es),M=Math.pow(Math.tan(r),2),c=a*this.a/o,u=c*c;s=r-o*Math.tan(r)/l*c*c*(.5-(1+3*M)*c*c/24),i=c*(1-u*(M/3+(1+3*M)*M*u/15))/Math.cos(r)}return t.x=dt(i+this.long0),t.y=_s(s),t},names:["Cassini","Cassini_Soldner","cass"]},Ns={init:function(){var s,t=Math.abs(this.lat0);if(Math.abs(t-Y)<it?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(t)<it?this.mode=this.EQUIT:this.mode=this.OBLIQ,0<this.es)switch(this.qp=gs(this.e,1),this.mmf=.5/(1-this.es),this.apa=function(t){var s,i=[];return i[0]=.3333333333333333*t,s=t*t,i[0]+=.17222222222222222*s,i[1]=.06388888888888888*s,s*=t,i[0]+=.10257936507936508*s,i[1]+=.0664021164021164*s,i[2]=.016415012942191543*s,i}(this.es),this.mode){case this.N_POLE:case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),s=Math.sin(this.lat0),this.sinb1=gs(this.e,s)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*s*s)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))},forward:function(t){var s,i,a,h,e,n,r,o,l,M,c=t.x,u=t.y,c=dt(c-this.long0);if(this.sphere){if(e=Math.sin(u),M=Math.cos(u),a=Math.cos(c),this.mode===this.OBLIQ||this.mode===this.EQUIT){if((i=this.mode===this.EQUIT?1+M*a:1+this.sinph0*e+this.cosph0*M*a)<=it)return null;s=(i=Math.sqrt(2/i))*M*Math.sin(c),i*=this.mode===this.EQUIT?e:this.cosph0*e-this.sinph0*M*a}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(a=-a),Math.abs(u+this.lat0)<it)return null;i=et-.5*u,s=(i=2*(this.mode===this.S_POLE?Math.cos(i):Math.sin(i)))*Math.sin(c),i*=a}}else{switch(l=o=r=0,a=Math.cos(c),h=Math.sin(c),e=Math.sin(u),n=gs(this.e,e),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(r=n/this.qp,o=Math.sqrt(1-r*r)),this.mode){case this.OBLIQ:l=1+this.sinb1*r+this.cosb1*o*a;break;case this.EQUIT:l=1+o*a;break;case this.N_POLE:l=Y+u,n=this.qp-n;break;case this.S_POLE:l=u-Y,n=this.qp+n}if(Math.abs(l)<it)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:l=Math.sqrt(2/l),i=this.mode===this.OBLIQ?this.ymf*l*(this.cosb1*r-this.sinb1*o*a):(l=Math.sqrt(2/(1+o*a)))*r*this.ymf,s=this.xmf*l*o*h;break;case this.N_POLE:case this.S_POLE:0<=n?(s=(l=Math.sqrt(n))*h,i=a*(this.mode===this.S_POLE?l:-l)):s=i=0}}return t.x=this.a*s+this.x0,t.y=this.a*i+this.y0,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var s,i,a,h,e,n,r,o=t.x/this.a,l=t.y/this.a;if(this.sphere){var c=0,u=0,M=Math.sqrt(o*o+l*l);if(1<(i=.5*M))return null;switch(i=2*Math.asin(i),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(u=Math.sin(i),c=Math.cos(i)),this.mode){case this.EQUIT:i=Math.abs(M)<=it?0:Math.asin(l*u/M),o*=u,l=c*M;break;case this.OBLIQ:i=Math.abs(M)<=it?this.lat0:Math.asin(c*this.sinph0+l*u*this.cosph0/M),o*=u*this.cosph0,l=(c-Math.sin(i)*this.sinph0)*M;break;case this.N_POLE:l=-l,i=Y-i;break;case this.S_POLE:i-=Y}s=0!==l||this.mode!==this.EQUIT&&this.mode!==this.OBLIQ?Math.atan2(o,l):0}else{if(r=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(o/=this.dd,l*=this.dd,(n=Math.sqrt(o*o+l*l))<it)return t.x=this.long0,t.y=this.lat0,t;h=2*Math.asin(.5*n/this.rq),a=Math.cos(h),o*=h=Math.sin(h),l=this.mode===this.OBLIQ?(r=a*this.sinb1+l*h*this.cosb1/n,e=this.qp*r,n*this.cosb1*a-l*this.sinb1*h):(r=l*h/n,e=this.qp*r,n*a)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(l=-l),!(e=o*o+l*l))return t.x=this.long0,t.y=this.lat0,t;r=1-e/this.qp,this.mode===this.S_POLE&&(r=-r)}s=Math.atan2(o,l),i=function(t,s){var i=t+t;return t+s[0]*Math.sin(i)+s[1]*Math.sin(i+i)+s[2]*Math.sin(i+i+i)}(Math.asin(r),this.apa)}return t.x=dt(this.long0+s),t.y=i,t},names:["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"],S_POLE:1,N_POLE:2,EQUIT:3,OBLIQ:4},Ss={init:function(){Math.abs(this.lat1+this.lat2)<it||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=pt(this.e3,this.sin_po,this.cos_po),this.qs1=gs(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=pt(this.e3,this.sin_po,this.cos_po),this.qs2=gs(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=gs(this.e3,this.sin_po,this.cos_po),Math.abs(this.lat1-this.lat2)>it?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)},forward:function(t){var s=t.x,i=t.y;this.sin_phi=Math.sin(i),this.cos_phi=Math.cos(i);var a=gs(this.e3,this.sin_phi,this.cos_phi),h=this.a*Math.sqrt(this.c-this.ns0*a)/this.ns0,e=this.ns0*dt(s-this.long0),n=h*Math.sin(e)+this.x0,r=this.rh-h*Math.cos(e)+this.y0;return t.x=n,t.y=r,t},inverse:function(t){var s,i,a,h,e,n;return t.x-=this.x0,t.y=this.rh-t.y+this.y0,a=0<=this.ns0?(s=Math.sqrt(t.x*t.x+t.y*t.y),1):(s=-Math.sqrt(t.x*t.x+t.y*t.y),-1),(h=0)!==s&&(h=Math.atan2(a*t.x,a*t.y)),a=s*this.ns0/this.a,n=this.sphere?Math.asin((this.c-a*a)/(2*this.ns0)):(i=(this.c-a*a)/this.ns0,this.phi1z(this.e3,i)),e=dt(h/this.ns0+this.long0),t.x=e,t.y=n,t},names:["Albers_Conic_Equal_Area","Albers","aea"],phi1z:function(t,s){var i,h,e,n,r=Es(.5*s);if(t<it)return r;for(var o=t*t,l=1;l<=25;l++)if(r+=n=.5*(e=1-(h=t*(i=Math.sin(r)))*h)*e/Math.cos(r)*(s/(1-o)-i/e+.5/t*Math.log((1-h)/(1+h))),Math.abs(n)<=1e-7)return r;return null}},Cs={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1},forward:function(t){var e,n,o=t.x,l=t.y,a=dt(o-this.long0),s=Math.sin(l),i=Math.cos(l),h=Math.cos(a),r=0<(e=this.sin_p14*s+this.cos_p14*i*h)||Math.abs(e)<=it?(n=this.x0+this.a*i*Math.sin(a)/e,this.y0+this.a*(this.cos_p14*s-this.sin_p14*i*h)/e):(n=this.x0+this.infinity_dist*i*Math.sin(a),this.y0+this.infinity_dist*(this.cos_p14*s-this.sin_p14*i*h));return t.x=n,t.y=r,t},inverse:function(t){var s,i,a,h,e,n;return t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,e=(s=Math.sqrt(t.x*t.x+t.y*t.y))?(h=Math.atan2(s,this.rc),i=Math.sin(h),a=Math.cos(h),n=Es(a*this.sin_p14+t.y*i*this.cos_p14/s),e=Math.atan2(t.x*i,s*this.cos_p14*a-t.y*this.sin_p14*i),dt(this.long0+e)):(n=this.phic0,0),t.x=e,t.y=n,t},names:["gnom"]},Rs={init:function(){this.sphere||(this.k0=pt(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))},forward:function(t){var n,s,i,a=t.x,h=t.y,e=dt(a-this.long0);return i=this.sphere?(s=this.x0+this.a*e*Math.cos(this.lat_ts),this.y0+this.a*Math.sin(h)/Math.cos(this.lat_ts)):(n=gs(this.e,Math.sin(h)),s=this.x0+this.a*this.k0*e,this.y0+this.a*n*.5/this.k0),t.x=s,t.y=i,t},inverse:function(t){var s,i;return t.x-=this.x0,t.y-=this.y0,this.sphere?(s=dt(this.long0+t.x/this.a/Math.cos(this.lat_ts)),i=Math.asin(t.y/this.a*Math.cos(this.lat_ts))):(i=function(t,s){var i=1-(1-t*t)/(2*t)*Math.log((1-t)/(1+t));if(Math.abs(Math.abs(s)-i)<1e-6)return s<0?-1*Y:Y;for(var a,h,e,n,r=Math.asin(.5*s),o=0;o<30;o++)if(h=Math.sin(r),e=Math.cos(r),n=t*h,r+=a=Math.pow(1-n*n,2)/(2*e)*(s/(1-t*t)-h/(1-n*n)+.5/t*Math.log((1-n)/(1+n))),Math.abs(a)<=1e-10)return r;return NaN}(this.e,2*t.y*this.k0/this.a),s=dt(this.long0+t.x/(this.a*this.k0))),t.x=s,t.y=i,t},names:["cea"]},Gs={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)},forward:function(t){var s=t.x,i=t.y,a=dt(s-this.long0),h=_s(i-this.lat0);return t.x=this.x0+this.a*a*this.rc,t.y=this.y0+this.a*h,t},inverse:function(t){var s=t.x,i=t.y;return t.x=dt(this.long0+(s-this.x0)/(this.a*this.rc)),t.y=_s(this.lat0+(i-this.y0)/this.a),t},names:["Equirectangular","Equidistant_Cylindrical","eqc"]},Os={init:function(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=fs(this.es),this.e1=ms(this.es),this.e2=ps(this.es),this.e3=ys(this.es),this.ml0=this.a*us(this.e0,this.e1,this.e2,this.e3,this.lat0)},forward:function(t){var r,s,i,h=t.x,e=t.y,n=dt(h-this.long0),a=n*Math.sin(e);return i=this.sphere?Math.abs(e)<=it?(s=this.a*n,-1*this.a*this.lat0):(s=this.a*Math.sin(a)/Math.tan(e),this.a*(_s(e-this.lat0)+(1-Math.cos(a))/Math.tan(e))):Math.abs(e)<=it?(s=this.a*n,-1*this.ml0):(s=(r=ds(this.a,this.e,Math.sin(e))/Math.tan(e))*Math.sin(a),this.a*us(this.e0,this.e1,this.e2,this.e3,e)-this.ml0+r*(1-Math.cos(a))),t.x=s+this.x0,t.y=i+this.y0,t},inverse:function(t){var s,i,l,c,u,f,m,p,a=t.x-this.x0,h=t.y-this.y0;if(this.sphere)if(Math.abs(h+this.a*this.lat0)<=it)s=dt(a/this.a+this.long0),i=0;else{for(var M,n=this.lat0+h/this.a,r=a*a/this.a/this.a+n*n,o=n,e=20;e;--e)if(o+=l=-1*(n*(o*(M=Math.tan(o))+1)-o-.5*(o*o+r)*M)/((o-n)/M-1),Math.abs(l)<=it){i=o;break}s=dt(this.long0+Math.asin(a*Math.tan(o)/this.a)/Math.sin(i))}else if(Math.abs(h+this.ml0)<=it)i=0,s=dt(this.long0+a/this.a);else{for(n=(this.ml0+h)/this.a,r=a*a/this.a/this.a+n*n,o=n,e=20;e;--e)if(p=this.e*Math.sin(o),c=Math.sqrt(1-p*p)*Math.tan(o),u=this.a*us(this.e0,this.e1,this.e2,this.e3,o),f=this.e0-2*this.e1*Math.cos(2*o)+4*this.e2*Math.cos(4*o)-6*this.e3*Math.cos(6*o),o-=l=(n*(c*(m=u/this.a)+1)-m-.5*c*(m*m+r))/(this.es*Math.sin(2*o)*(m*m+r-2*n*m)/(4*c)+(n-m)*(c*f-2/Math.sin(2*o))-f),Math.abs(l)<=it){i=o;break}c=Math.sqrt(1-this.es*Math.pow(Math.sin(i),2))*Math.tan(i),s=dt(this.long0+Math.asin(a*c/this.a)/Math.sin(i))}return t.x=s,t.y=i,t},names:["Polyconic","poly"]},zs={init:function(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013},forward:function(t){for(var i=t.x,a=t.y-this.lat0,h=i-this.long0,e=a/V*1e-5,n=h,r=1,o=0,s=1;s<=10;s++)r*=e,o+=this.A[s]*r;var l,M=o,c=n,u=1,f=0,m=0,p=0;for(s=1;s<=6;s++)l=f*M+u*c,u=u*M-f*c,f=l,m=m+this.B_re[s]*u-this.B_im[s]*f,p=p+this.B_im[s]*u+this.B_re[s]*f;return t.x=p*this.a+this.x0,t.y=m*this.a+this.y0,t},inverse:function(t){var i,a=t.x,h=t.y,e=a-this.x0,n=(h-this.y0)/this.a,r=e/this.a,o=1,l=0,M=0,c=0;for(s=1;s<=6;s++)i=l*n+o*r,o=o*n-l*r,l=i,M=M+this.C_re[s]*o-this.C_im[s]*l,c=c+this.C_im[s]*o+this.C_re[s]*l;for(var u=0;u<this.iterations;u++){for(var f,m=M,p=c,y=n,d=r,s=2;s<=6;s++)f=p*M+m*c,m=m*M-p*c,p=f,y+=(s-1)*(this.B_re[s]*m-this.B_im[s]*p),d+=(s-1)*(this.B_im[s]*m+this.B_re[s]*p);m=1,p=0;var _=this.B_re[1],x=this.B_im[1];for(s=2;s<=6;s++)f=p*M+m*c,m=m*M-p*c,p=f,_+=s*(this.B_re[s]*m-this.B_im[s]*p),x+=s*(this.B_im[s]*m+this.B_re[s]*p);var v=_*_+x*x,M=(y*_+d*x)/v,c=(d*_-y*x)/v}var g=M,b=c,w=1,A=0;for(s=1;s<=9;s++)w*=g,A+=this.D[s]*w;var P=this.lat0+A*V*1e5,k=this.long0+b;return t.x=k,t.y=P,t},names:["New_Zealand_Map_Grid","nzmg"]},Ls={init:function(){},forward:function(t){var s=t.x,i=t.y,a=dt(s-this.long0),h=this.x0+this.a*a,e=this.y0+this.a*Math.log(Math.tan(Math.PI/4+i/2.5))*1.25;return t.x=h,t.y=e,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var s=dt(this.long0+t.x/this.a),i=2.5*(Math.atan(Math.exp(.8*t.y/this.a))-Math.PI/4);return t.x=s,t.y=i,t},names:["Miller_Cylindrical","mill"]},Ts={init:function(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=Qt(this.es)},forward:function(t){var a=t.x,h=t.y,a=dt(a-this.long0);if(this.sphere){if(this.m)for(var e=this.n*Math.sin(h),n=20;n;--n){var r=(this.m*h+Math.sin(h)-e)/(this.m+Math.cos(h));if(h-=r,Math.abs(r)<it)break}else h=1!==this.n?Math.asin(this.n*Math.sin(h)):h;s=this.a*this.C_x*a*(this.m+Math.cos(h)),i=this.a*this.C_y*h}else var o=Math.sin(h),l=Math.cos(h),i=this.a*Dt(h,o,l,this.en),s=this.a*a*l/Math.sqrt(1-this.es*o*o);return t.x=s,t.y=i,t},inverse:function(t){var s,i,a,h;return t.x-=this.x0,a=t.x/this.a,t.y-=this.y0,s=t.y/this.a,this.sphere?(s/=this.C_y,a/=this.C_x*(this.m+Math.cos(s)),this.m?s=Es((this.m*s+Math.sin(s))/this.n):1!==this.n&&(s=Es(Math.sin(s)/this.n)),a=dt(a+this.long0),s=_s(s)):(s=Wt(t.y/this.a,this.es,this.en),(h=Math.abs(s))<Y?(h=Math.sin(s),i=this.long0+t.x*Math.sqrt(1-this.es*h*h)/(this.a*Math.cos(s)),a=dt(i)):h-it<Y&&(a=this.long0)),t.x=a,t.y=s,t},names:["Sinusoidal","sinu"]},Fs={init:function(){},forward:function(t){for(var s=t.x,i=t.y,a=dt(s-this.long0),h=i,e=Math.PI*Math.sin(i);;){var n=-(h+Math.sin(h)-e)/(1+Math.cos(h));if(h+=n,Math.abs(n)<it)break}h/=2,Math.PI/2-Math.abs(i)<it&&(a=0);var r=.900316316158*this.a*a*Math.cos(h)+this.x0,o=1.4142135623731*this.a*Math.sin(h)+this.y0;return t.x=r,t.y=o,t},inverse:function(t){var s,i;t.x-=this.x0,t.y-=this.y0,i=t.y/(1.4142135623731*this.a),.999999999999<Math.abs(i)&&(i=.999999999999),s=Math.asin(i);var a=dt(this.long0+t.x/(.900316316158*this.a*Math.cos(s)));a<-Math.PI&&(a=-Math.PI),a>Math.PI&&(a=Math.PI),i=(2*s+Math.sin(2*s))/Math.PI,1<Math.abs(i)&&(i=1);var h=Math.asin(i);return t.x=a,t.y=h,t},names:["Mollweide","moll"]},Qs={init:function(){Math.abs(this.lat1+this.lat2)<it||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=fs(this.es),this.e1=ms(this.es),this.e2=ps(this.es),this.e3=ys(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=pt(this.e,this.sinphi,this.cosphi),this.ml1=us(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<it?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=pt(this.e,this.sinphi,this.cosphi),this.ml2=us(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=us(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))},forward:function(t){var h,s,i=t.x,a=t.y;s=this.sphere?this.a*(this.g-a):(h=us(this.e0,this.e1,this.e2,this.e3,a),this.a*(this.g-h));var e=this.ns*dt(i-this.long0),n=this.x0+s*Math.sin(e),r=this.y0+this.rh-s*Math.cos(e);return t.x=n,t.y=r,t},inverse:function(t){var s,i;t.x-=this.x0,t.y=this.rh-t.y+this.y0,s=0<=this.ns?(i=Math.sqrt(t.x*t.x+t.y*t.y),1):(i=-Math.sqrt(t.x*t.x+t.y*t.y),-1);var e=0;if(0!==i&&(e=Math.atan2(s*t.x,s*t.y)),this.sphere)return h=dt(this.long0+e/this.ns),a=_s(this.g-i/this.a),t.x=h,t.y=a,t;var n=this.g-i/this.a,a=xs(n,this.e0,this.e1,this.e2,this.e3),h=dt(this.long0+e/this.ns);return t.x=h,t.y=a,t},names:["Equidistant_Conic","eqdc"]},Ds={init:function(){this.R=this.a},forward:function(t){var s,a=t.x,h=t.y,e=dt(a-this.long0);Math.abs(h)<=it&&(s=this.x0+this.R*e,i=this.y0);var n=Es(2*Math.abs(h/Math.PI));(Math.abs(e)<=it||Math.abs(Math.abs(h)-Y)<=it)&&(s=this.x0,i=0<=h?this.y0+Math.PI*this.R*Math.tan(.5*n):this.y0+Math.PI*this.R*-Math.tan(.5*n));var r=.5*Math.abs(Math.PI/e-e/Math.PI),o=r*r,l=Math.sin(n),M=Math.cos(n),c=M/(l+M-1),u=c*c,f=c*(2/l-1),m=f*f,p=Math.PI*this.R*(r*(c-m)+Math.sqrt(o*(c-m)*(c-m)-(m+o)*(u-m)))/(m+o);e<0&&(p=-p),s=this.x0+p;var y=o+c,p=Math.PI*this.R*(f*y-r*Math.sqrt((m+o)*(1+o)-y*y))/(m+o),i=0<=h?this.y0+p:this.y0-p;return t.x=s,t.y=i,t},inverse:function(t){var s,i,a,h,e,n,r,o,l,M,c,u;return t.x-=this.x0,t.y-=this.y0,c=Math.PI*this.R,e=(a=t.x/c)*a+(h=t.y/c)*h,c=3*(h*h/(o=-2*(n=-Math.abs(h)*(1+e))+1+2*h*h+e*e)+(2*(r=n-2*h*h+a*a)*r*r/o/o/o-9*n*r/o/o)/27)/(l=(n-r*r/3/o)/o)/(M=2*Math.sqrt(-l/3)),1<Math.abs(c)&&(c=0<=c?1:-1),u=Math.acos(c)/3,i=0<=t.y?(-M*Math.cos(u+Math.PI/3)-r/3/o)*Math.PI:-(-M*Math.cos(u+Math.PI/3)-r/3/o)*Math.PI,s=Math.abs(a)<it?this.long0:dt(this.long0+Math.PI*(e-1+Math.sqrt(1+2*(a*a-h*h)+e*e))/2/a),t.x=s,t.y=i,t},names:["Van_der_Grinten_I","VanDerGrinten","vandg"]},Ws={init:function(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)},forward:function(t){var s,i,a,h,e,n,r,o,l,M,c,u,f,m,p,y,d,_,x,v,g,b,A=t.x,P=t.y,k=Math.sin(t.y),q=Math.cos(t.y),N=dt(A-this.long0);return this.sphere?Math.abs(this.sin_p12-1)<=it?(t.x=this.x0+this.a*(Y-P)*Math.sin(N),t.y=this.y0-this.a*(Y-P)*Math.cos(N)):Math.abs(this.sin_p12+1)<=it?(t.x=this.x0+this.a*(Y+P)*Math.sin(N),t.y=this.y0+this.a*(Y+P)*Math.cos(N)):(_=this.sin_p12*k+this.cos_p12*q*Math.cos(N),d=(y=Math.acos(_))?y/Math.sin(y):1,t.x=this.x0+this.a*d*q*Math.sin(N),t.y=this.y0+this.a*d*(this.cos_p12*k-this.sin_p12*q*Math.cos(N))):(s=fs(this.es),i=ms(this.es),a=ps(this.es),h=ys(this.es),Math.abs(this.sin_p12-1)<=it?(e=this.a*us(s,i,a,h,Y),n=this.a*us(s,i,a,h,P),t.x=this.x0+(e-n)*Math.sin(N),t.y=this.y0-(e-n)*Math.cos(N)):Math.abs(this.sin_p12+1)<=it?(e=this.a*us(s,i,a,h,Y),n=this.a*us(s,i,a,h,P),t.x=this.x0+(e+n)*Math.sin(N),t.y=this.y0+(e+n)*Math.cos(N)):(r=k/q,o=ds(this.a,this.e,this.sin_p12),l=ds(this.a,this.e,k),M=Math.atan((1-this.es)*r+this.es*o*this.sin_p12/(l*q)),x=0===(c=Math.atan2(Math.sin(N),this.cos_p12*Math.tan(M)-this.sin_p12*Math.cos(N)))?Math.asin(this.cos_p12*Math.sin(M)-this.sin_p12*Math.cos(M)):Math.abs(Math.abs(c)-Math.PI)<=it?-Math.asin(this.cos_p12*Math.sin(M)-this.sin_p12*Math.cos(M)):Math.asin(Math.sin(N)*Math.cos(M)/Math.sin(c)),u=this.e*this.sin_p12/Math.sqrt(1-this.es),y=o*x*(1-(v=x*x)*(p=(f=this.e*this.cos_p12*Math.cos(c)/Math.sqrt(1-this.es))*f)*(1-p)/6+(g=v*x)/8*(m=u*f)*(1-2*p)+(b=g*x)/120*(p*(4-7*p)-3*u*u*(1-7*p))-b*x/48*m),t.x=this.x0+y*Math.sin(c),t.y=this.y0+y*Math.cos(c))),t},inverse:function(t){var s,i,a,h,e,n,r,o,l,M,c,u,m,p,y,d,_,x,v,g,b,w,A;if(t.x-=this.x0,t.y-=this.y0,this.sphere){if((s=Math.sqrt(t.x*t.x+t.y*t.y))>2*Y*this.a)return;return i=s/this.a,a=Math.sin(i),h=Math.cos(i),e=this.long0,Math.abs(s)<=it?n=this.lat0:(n=Es(h*this.sin_p12+t.y*a*this.cos_p12/s),r=Math.abs(this.lat0)-Y,e=dt(Math.abs(r)<=it?0<=this.lat0?this.long0+Math.atan2(t.x,-t.y):this.long0-Math.atan2(-t.x,t.y):this.long0+Math.atan2(t.x*a,s*this.cos_p12*h-t.y*this.sin_p12*a))),t.x=e,t.y=n,t}return o=fs(this.es),l=ms(this.es),M=ps(this.es),c=ys(this.es),Math.abs(this.sin_p12-1)<=it?(u=this.a*us(o,l,M,c,Y),s=Math.sqrt(t.x*t.x+t.y*t.y),n=xs((u-s)/this.a,o,l,M,c),e=dt(this.long0+Math.atan2(t.x,-1*t.y))):Math.abs(this.sin_p12+1)<=it?(u=this.a*us(o,l,M,c,Y),s=Math.sqrt(t.x*t.x+t.y*t.y),n=xs((s-u)/this.a,o,l,M,c),e=dt(this.long0+Math.atan2(t.x,t.y))):(s=Math.sqrt(t.x*t.x+t.y*t.y),y=Math.atan2(t.x,t.y),m=ds(this.a,this.e,this.sin_p12),d=Math.cos(y),x=-(_=this.e*this.cos_p12*d)*_/(1-this.es),v=3*this.es*(1-x)*this.sin_p12*this.cos_p12*d/(1-this.es),w=1-x*(b=(g=s/m)-x*(1+x)*Math.pow(g,3)/6-v*(1+3*x)*Math.pow(g,4)/24)*b/2-g*b*b*b/6,p=Math.asin(this.sin_p12*Math.cos(b)+this.cos_p12*Math.sin(b)*d),e=dt(this.long0+Math.asin(Math.sin(y)*Math.sin(b)/Math.cos(p))),A=Math.sin(p),n=Math.atan2((A-this.es*w*this.sin_p12)*Math.tan(p),A*(1-this.es))),t.x=e,t.y=n,t},names:["Azimuthal_Equidistant","aeqd"]},Us={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)},forward:function(t){var e,n,r,o=t.x,l=t.y,a=dt(o-this.long0),s=Math.sin(l),i=Math.cos(l),h=Math.cos(a);return(0<(e=this.sin_p14*s+this.cos_p14*i*h)||Math.abs(e)<=it)&&(n=this.a*i*Math.sin(a),r=this.y0+this.a*(this.cos_p14*s-this.sin_p14*i*h)),t.x=n,t.y=r,t},inverse:function(t){var s,i,a,h,e,n,r;return t.x-=this.x0,t.y-=this.y0,s=Math.sqrt(t.x*t.x+t.y*t.y),i=Es(s/this.a),a=Math.sin(i),h=Math.cos(i),n=this.long0,Math.abs(s)<=it?r=this.lat0:(r=Es(h*this.sin_p14+t.y*a*this.cos_p14/s),e=Math.abs(this.lat0)-Y,n=Math.abs(e)<=it?dt(0<=this.lat0?this.long0+Math.atan2(t.x,-t.y):this.long0-Math.atan2(-t.x,t.y)):dt(this.long0+Math.atan2(t.x*a,s*this.cos_p14*h-t.y*this.sin_p14*a))),t.x=n,t.y=r,t},names:["ortho"]},Ks_FRONT=1,Ks_RIGHT=2,Ks_BACK=3,Ks_LEFT=4,Ks_TOP=5,Ks_BOTTOM=6,Xs_AREA_0=1,Xs_AREA_1=2,Xs_AREA_2=3,Xs_AREA_3=4,Hs={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=Y-et/2?this.face=Ks_TOP:this.lat0<=-(Y-et/2)?this.face=Ks_BOTTOM:Math.abs(this.long0)<=et?this.face=Ks_FRONT:Math.abs(this.long0)<=Y+et?this.face=0<this.long0?Ks_RIGHT:Ks_LEFT:this.face=Ks_BACK,0!==this.es&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)},forward:function(t){var s,i,a,h,e,n,l,M,c,u,f,m,r={x:0,y:0},o={value:0};return t.x-=this.long0,s=0!==this.es?Math.atan(this.one_minus_f_squared*Math.tan(t.y)):t.y,i=t.x,this.face===Ks_TOP?(h=Y-s,a=et<=i&&i<=Y+et?(o.value=Xs_AREA_0,i-Y):Y+et<i||i<=-(Y+et)?(o.value=Xs_AREA_1,0<i?i-rt:i+rt):-(Y+et)<i&&i<=-et?(o.value=Xs_AREA_2,i+Y):(o.value=Xs_AREA_3,i)):this.face===Ks_BOTTOM?(h=Y+s,a=et<=i&&i<=Y+et?(o.value=Xs_AREA_0,Y-i):i<et&&-et<=i?(o.value=Xs_AREA_1,-i):i<-et&&-(Y+et)<=i?(o.value=Xs_AREA_2,-i-Y):(o.value=Xs_AREA_3,0<i?rt-i:-i-rt)):(this.face===Ks_RIGHT?i=U(i,+Y):this.face===Ks_BACK?i=U(i,+rt):this.face===Ks_LEFT&&(i=U(i,-Y)),u=Math.sin(s),f=Math.cos(s),m=Math.sin(i),l=f*Math.cos(i),M=f*m,c=u,this.face===Ks_FRONT?a=W(h=Math.acos(l),c,M,o):this.face===Ks_RIGHT?a=W(h=Math.acos(M),c,-l,o):this.face===Ks_BACK?a=W(h=Math.acos(-l),c,-M,o):this.face===Ks_LEFT?a=W(h=Math.acos(-M),c,l,o):(h=a=0,o.value=Xs_AREA_0)),n=Math.atan(12/rt*(a+Math.acos(Math.sin(a)*Math.cos(et))-Y)),e=Math.sqrt((1-Math.cos(h))/(Math.cos(n)*Math.cos(n))/(1-Math.cos(Math.atan(1/Math.cos(a))))),o.value===Xs_AREA_1?n+=Y:o.value===Xs_AREA_2?n+=rt:o.value===Xs_AREA_3&&(n+=1.5*rt),r.x=e*Math.cos(n),r.y=e*Math.sin(n),r.x=r.x*this.a+this.x0,r.y=r.y*this.a+this.y0,t.x=r.x,t.y=r.y,t},inverse:function(t){var s,i,a,h,e,n,r,o,u,m,l,f,p,y,d,M={lam:0,phi:0},c={value:0};return t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,i=Math.atan(Math.sqrt(t.x*t.x+t.y*t.y)),s=Math.atan2(t.y,t.x),0<=t.x&&t.x>=Math.abs(t.y)?c.value=Xs_AREA_0:0<=t.y&&t.y>=Math.abs(t.x)?(c.value=Xs_AREA_1,s-=Y):t.x<0&&-t.x>=Math.abs(t.y)?(c.value=Xs_AREA_2,s=s<0?s+rt:s-rt):(c.value=Xs_AREA_3,s+=Y),l=rt/12*Math.tan(s),e=Math.sin(l)/(Math.cos(l)-1/Math.sqrt(2)),n=Math.atan(e),(r=1-(a=Math.cos(s))*a*(h=Math.tan(i))*h*(1-Math.cos(Math.atan(1/Math.cos(n)))))<-1?r=-1:1<r&&(r=1),this.face===Ks_TOP?(o=Math.acos(r),M.phi=Y-o,c.value===Xs_AREA_0?M.lam=n+Y:c.value===Xs_AREA_1?M.lam=n<0?n+rt:n-rt:c.value===Xs_AREA_2?M.lam=n-Y:M.lam=n):this.face===Ks_BOTTOM?(o=Math.acos(r),M.phi=o-Y,c.value===Xs_AREA_0?M.lam=Y-n:c.value===Xs_AREA_1?M.lam=-n:c.value===Xs_AREA_2?M.lam=-n-Y:M.lam=n<0?-n-rt:rt-n):(l=(u=r)*u,f=1<=(l+=(m=1<=l?0:Math.sqrt(1-l)*Math.sin(n))*m)?0:Math.sqrt(1-l),c.value===Xs_AREA_1?(l=f,f=-m,m=l):c.value===Xs_AREA_2?(f=-f,m=-m):c.value===Xs_AREA_3&&(l=f,f=m,m=-l),this.face===Ks_RIGHT?(l=u,u=-f,f=l):this.face===Ks_BACK?(u=-u,f=-f):this.face===Ks_LEFT&&(l=u,u=f,f=-l),M.phi=Math.acos(-m)-Y,M.lam=Math.atan2(f,u),this.face===Ks_RIGHT?M.lam=U(M.lam,-Y):this.face===Ks_BACK?M.lam=U(M.lam,-rt):this.face===Ks_LEFT&&(M.lam=U(M.lam,+Y))),0!==this.es&&(p=M.phi<0?1:0,y=Math.tan(M.phi),d=this.b/Math.sqrt(y*y+this.one_minus_f_squared),M.phi=Math.atan(Math.sqrt(this.a*this.a-d*d)/(this.one_minus_f*d)),p&&(M.phi=-M.phi)),M.lam+=this.long0,t.x=M.lam,t.y=M.phi,t},names:["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"]},Js=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-9.86701e-7],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,1.8736e-8],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,9.34959e-7],[.7986,-.00755338,-500009e-10,9.35324e-7],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],Zs=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-1.26793e-9,4.22642e-10],[.124,.0124,5.07171e-9,-1.60604e-9],[.186,.0123999,-1.90189e-8,6.00152e-9],[.248,.0124002,7.10039e-8,-2.24e-8],[.31,.0123992,-2.64997e-7,8.35986e-8],[.372,.0124029,9.88983e-7,-3.11994e-7],[.434,.0123893,-369093e-11,-4.35621e-7],[.4958,.0123198,-102252e-10,-3.45523e-7],[.5571,.0121916,-154081e-10,-5.82288e-7],[.6176,.0119938,-241424e-10,-5.25327e-7],[.6769,.011713,-320223e-10,-5.16405e-7],[.7346,.0113541,-397684e-10,-6.09052e-7],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-1.40374e-9],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],$s=ht/5,ti=1/$s,hi={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"},forward:function(t){var s=dt(t.x-this.long0),i=Math.abs(t.y),a=Math.floor(i*$s);a<0?a=0:18<=a&&(a=17);var h={x:ii(Js[a],i=ht*(i-ti*a))*s,y:ii(Zs[a],i)};return t.y<0&&(h.y=-h.y),h.x=h.x*this.a*.8487+this.x0,h.y=h.y*this.a*1.3523+this.y0,h},inverse:function(t){var s={x:(t.x-this.x0)/(.8487*this.a),y:Math.abs(t.y-this.y0)/(1.3523*this.a)};if(1<=s.y)s.x/=Js[18][0],s.y=t.y<0?-Y:Y;else{var i=Math.floor(18*s.y);for(i<0?i=0:18<=i&&(i=17);;)if(Zs[i][0]>s.y)--i;else{if(!(Zs[i+1][0]<=s.y))break;++i}var a=Zs[i],h=function(t,s,i,a){for(var h=s;a;--a){var e=t(h);if(h-=e,Math.abs(e)<i)break}return h}(function(t){return(ii(a,t)-s.y)/function(t,s){return t[1]+s*(2*t[2]+3*s*t[3])}(a,t)},h=5*(s.y-a[0])/(Zs[i+1][0]-a[0]),it,100);s.x/=ii(Js[i],h),s.y=(5*i+h)*at,t.y<0&&(s.y=-s.y)}return s.x=dt(s.x+this.long0),s},names:["Robinson","robin"]},ei={init:function(){this.name="geocent"},forward:function(t){return y(t,this.es,this.a)},inverse:function(t){return d(t,this.es,this.a,this.b)},names:["Geocentric","geocentric","geocent","Geocent"]};return k.defaultDatum="WGS84",k.Proj=Projection,k.WGS84=new k.Proj("WGS84"),k.Point=Point,k.toPoint=Et,k.defs=i,k.transform=w,k.mgrs=Tt,k.version="2.6.2",(proj4=k).Proj.projections.add(Ut),proj4.Proj.projections.add(ts),proj4.Proj.projections.add(is),proj4.Proj.projections.add(ns),proj4.Proj.projections.add(rs),proj4.Proj.projections.add(os),proj4.Proj.projections.add(ls),proj4.Proj.projections.add(Ms),proj4.Proj.projections.add(cs),proj4.Proj.projections.add(vs),proj4.Proj.projections.add(Ns),proj4.Proj.projections.add(Ss),proj4.Proj.projections.add(Cs),proj4.Proj.projections.add(Rs),proj4.Proj.projections.add(Gs),proj4.Proj.projections.add(Os),proj4.Proj.projections.add(zs),proj4.Proj.projections.add(Ls),proj4.Proj.projections.add(Ts),proj4.Proj.projections.add(Fs),proj4.Proj.projections.add(Qs),proj4.Proj.projections.add(Ds),proj4.Proj.projections.add(Ws),proj4.Proj.projections.add(Us),proj4.Proj.projections.add(Hs),proj4.Proj.projections.add(hi),proj4.Proj.projections.add(ei),k});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e,t){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?t(exports):t((e=e||self).THREE={})}(void 0,function(e){void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52)),void 0===Number.isInteger&&(Number.isInteger=function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}),void 0===Math.sign&&(Math.sign=function(e){return e<0?-1:0<e?1:+e}),"name"in Function.prototype==0&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),void 0===Object.assign&&(Object.assign=function(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var i=arguments[n];if(null!=i)for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t});var Y=0,Z=1,J=2,j=1,k=2,W=3,O=0,_e=1,Q=2,o=0,K=0,$=1,ee=2,te=3,ne=4,ie=5,re=100,ae=101,oe=102,se=103,ce=104,le=200,he=201,ue=202,pe=203,de=204,fe=205,me=206,ge=207,ve=208,ye=209,xe=210,be=0,we=1,Me=2,Se=3,Te=4,Ee=5,Ae=6,Le=7,q=0,X=1,Re=2,Pe=0,Ce=1,Oe=2,De=3,Ie=4,Ne=5,ze=301,Be=302,Ue=303,Fe=304,Ge=305,He=306,Ve=307,G=1e3,H=1001,V=1002,je=1003,ke=1004,We=1005,qe=1006,Xe=1007,Ye=1008,Ze=1009,r=1010,a=1011,Je=1012,s=1013,Qe=1014,Ke=1015,$e=1016,c=1017,l=1018,h=1019,et=1020,u=1021,tt=1022,nt=1023,p=1024,d=1025,t=nt,it=1026,rt=1027,f=1028,m=33776,g=33777,y=33778,x=33779,b=35840,w=35841,_=35842,M=35843,S=36196,T=37808,E=37809,A=37810,L=37811,R=37812,P=37813,C=37814,D=37815,I=37816,N=37817,z=37818,B=37819,U=37820,F=37821,i=2300,at=2301,ot=2400,st=2401,ct=2402,lt=0,ht=3e3,n=3001,ut=3007,pt=3002,dt=3003,ft=3004,mt=3005,gt=3006,vt=3200,yt=3201,xt=0,bt=1,wt=7680,_t=519,Mt=35044,St=35048;function Tt(){}Object.assign(Tt.prototype,{addEventListener:function(e,t){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)},hasEventListener:function(e,t){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)},removeEventListener:function(e,t){var n,i;void 0!==this._listeners&&(void 0===(n=this._listeners[e])||-1!==(i=n.indexOf(t))&&n.splice(i,1))},dispatchEvent:function(e){if(void 0!==this._listeners){var t=this._listeners[e.type];if(void 0!==t){e.target=this;for(var n=t.slice(0),i=0,r=n.length;i<r;i++)n[i].call(this,e)}}}});for(var Et=[],At=0;At<256;At++)Et[At]=(At<16?"0":"")+At.toString(16);var Lt={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){var e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(Et[255&e]+Et[e>>8&255]+Et[e>>16&255]+Et[e>>24&255]+"-"+Et[255&t]+Et[t>>8&255]+"-"+Et[t>>16&15|64]+Et[t>>24&255]+"-"+Et[63&n|128]+Et[n>>8&255]+"-"+Et[n>>16&255]+Et[n>>24&255]+Et[255&i]+Et[i>>8&255]+Et[i>>16&255]+Et[i>>24&255]).toUpperCase()},clamp:function(e,t,n){return Math.max(t,Math.min(n,e))},euclideanModulo:function(e,t){return(e%t+t)%t},mapLinear:function(e,t,n,i,r){return i+(e-t)*(r-i)/(n-t)},lerp:function(e,t,n){return(1-n)*e+n*t},smoothstep:function(e,t,n){return e<=t?0:n<=e?1:(e=(e-t)/(n-t))*e*(3-2*e)},smootherstep:function(e,t,n){return e<=t?0:n<=e?1:(e=(e-t)/(n-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},degToRad:function(e){return e*Lt.DEG2RAD},radToDeg:function(e){return e*Lt.RAD2DEG},isPowerOfTwo:function(e){return 0==(e&e-1)&&0!==e},ceilPowerOfTwo:function(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},floorPowerOfTwo:function(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}};function Rt(e,t){this.x=e||0,this.y=t||0}function Pt(e,t,n,i){this._x=e||0,this._y=t||0,this._z=n||0,this._w=void 0!==i?i:1}Object.defineProperties(Rt.prototype,{width:{get:function(){return this.x},set:function(e){this.x=e}},height:{get:function(){return this.y},set:function(e){this.y=e}}}),Object.assign(Rt.prototype,{isVector2:!0,set:function(e,t){return this.x=e,this.y=t,this},setScalar:function(e){return this.x=e,this.y=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(e){return this.x=e.x,this.y=e.y,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)},addScalar:function(e){return this.x+=e,this.y+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)},subScalar:function(e){return this.x-=e,this.y-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this},multiply:function(e){return this.x*=e.x,this.y*=e.y,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this},divide:function(e){return this.x/=e.x,this.y/=e.y,this},divideScalar:function(e){return this.multiplyScalar(1/e)},applyMatrix3:function(e){var t=this.x,n=this.y,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6],this.y=i[1]*t+i[4]*n+i[7],this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this},clampScalar:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this},clampLength:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(e){return this.x*e.x+this.y*e.y},cross:function(e){return this.x*e.y-this.y*e.x},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var e=Math.atan2(this.y,this.x);return e<0&&(e+=2*Math.PI),e},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,n=this.y-e.y;return t*t+n*n},manhattanDistanceTo:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e},fromBufferAttribute:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this},rotateAround:function(e,t){var n=Math.cos(t),i=Math.sin(t),r=this.x-e.x,a=this.y-e.y;return this.x=r*n-a*i+e.x,this.y=r*i+a*n+e.y,this}}),Object.assign(Pt,{slerp:function(e,t,n,i){return n.copy(e).slerp(t,i)},slerpFlat:function(e,t,n,i,r,a,o){var s,c,l,h,u,p,d,f,m=n[i+0],g=n[i+1],v=n[i+2],y=n[i+3],x=r[a+0],b=r[a+1],w=r[a+2],_=r[a+3];y===_&&m===x&&g===b&&v===w||(p=1-o,c=0<=(s=m*x+g*b+v*w+y*_)?1:-1,(l=1-s*s)>Number.EPSILON&&(h=Math.sqrt(l),u=Math.atan2(h,s*c),p=Math.sin(p*u)/h,o=Math.sin(o*u)/h),m=m*p+x*(d=o*c),g=g*p+b*d,v=v*p+w*d,y=y*p+_*d,p===1-o&&(m*=f=1/Math.sqrt(m*m+g*g+v*v+y*y),g*=f,v*=f,y*=f)),e[t]=m,e[t+1]=g,e[t+2]=v,e[t+3]=y}}),Object.defineProperties(Pt.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this._onChangeCallback()}},w:{get:function(){return this._w},set:function(e){this._w=e,this._onChangeCallback()}}}),Object.assign(Pt.prototype,{isQuaternion:!0,set:function(e,t,n,i){return this._x=e,this._y=t,this._z=n,this._w=i,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this},setFromEuler:function(e,t){if(!e||!e.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var n=e._x,i=e._y,r=e._z,a=e.order,o=Math.cos,s=Math.sin,c=o(n/2),l=o(i/2),h=o(r/2),u=s(n/2),p=s(i/2),d=s(r/2);return"XYZ"===a?(this._x=u*l*h+c*p*d,this._y=c*p*h-u*l*d,this._z=c*l*d+u*p*h,this._w=c*l*h-u*p*d):"YXZ"===a?(this._x=u*l*h+c*p*d,this._y=c*p*h-u*l*d,this._z=c*l*d-u*p*h,this._w=c*l*h+u*p*d):"ZXY"===a?(this._x=u*l*h-c*p*d,this._y=c*p*h+u*l*d,this._z=c*l*d+u*p*h,this._w=c*l*h-u*p*d):"ZYX"===a?(this._x=u*l*h-c*p*d,this._y=c*p*h+u*l*d,this._z=c*l*d-u*p*h,this._w=c*l*h+u*p*d):"YZX"===a?(this._x=u*l*h+c*p*d,this._y=c*p*h+u*l*d,this._z=c*l*d-u*p*h,this._w=c*l*h-u*p*d):"XZY"===a&&(this._x=u*l*h-c*p*d,this._y=c*p*h-u*l*d,this._z=c*l*d+u*p*h,this._w=c*l*h+u*p*d),!1!==t&&this._onChangeCallback(),this},setFromAxisAngle:function(e,t){var n=t/2,i=Math.sin(n);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(n),this._onChangeCallback(),this},setFromRotationMatrix:function(e){var t,n=e.elements,i=n[0],r=n[4],a=n[8],o=n[1],s=n[5],c=n[9],l=n[2],h=n[6],u=n[10],p=i+s+u;return 0<p?(t=.5/Math.sqrt(p+1),this._w=.25/t,this._x=(h-c)*t,this._y=(a-l)*t,this._z=(o-r)*t):s<i&&u<i?(t=2*Math.sqrt(1+i-s-u),this._w=(h-c)/t,this._x=.25*t,this._y=(r+o)/t,this._z=(a+l)/t):u<s?(t=2*Math.sqrt(1+s-i-u),this._w=(a-l)/t,this._x=(r+o)/t,this._y=.25*t,this._z=(c+h)/t):(t=2*Math.sqrt(1+u-i-s),this._w=(o-r)/t,this._x=(a+l)/t,this._y=(c+h)/t,this._z=.25*t),this._onChangeCallback(),this},setFromUnitVectors:function(e,t){var n=e.dot(t)+1;return n<1e-6?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0):(this._x=0,this._y=-e.z,this._z=e.y)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x),this._w=n,this.normalize()},angleTo:function(e){return 2*Math.acos(Math.abs(Lt.clamp(this.dot(e),-1,1)))},rotateTowards:function(e,t){var n=this.angleTo(e);if(0===n)return this;var i=Math.min(1,t/n);return this.slerp(e,i),this},inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this},dot:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)},premultiply:function(e){return this.multiplyQuaternions(e,this)},multiplyQuaternions:function(e,t){var n=e._x,i=e._y,r=e._z,a=e._w,o=t._x,s=t._y,c=t._z,l=t._w;return this._x=n*l+a*o+i*c-r*s,this._y=i*l+a*s+r*o-n*c,this._z=r*l+a*c+n*s-i*o,this._w=a*l-n*o-i*s-r*c,this._onChangeCallback(),this},slerp:function(e,t){if(0===t)return this;if(1===t)return this.copy(e);var n=this._x,i=this._y,r=this._z,a=this._w,o=a*e._w+n*e._x+i*e._y+r*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),1<=o)return this._w=a,this._x=n,this._y=i,this._z=r,this;var s=1-o*o;if(s<=Number.EPSILON){var c=1-t;return this._w=c*a+t*this._w,this._x=c*n+t*this._x,this._y=c*i+t*this._y,this._z=c*r+t*this._z,this.normalize(),this._onChangeCallback(),this}var l=Math.sqrt(s),h=Math.atan2(l,o),u=Math.sin((1-t)*h)/l,p=Math.sin(t*h)/l;return this._w=a*u+this._w*p,this._x=n*u+this._x*p,this._y=i*u+this._y*p,this._z=r*u+this._z*p,this._onChangeCallback(),this},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w},fromArray:function(e,t){return void 0===t&&(t=0),this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e},_onChange:function(e){return this._onChangeCallback=e,this},_onChangeCallback:function(){}});var Ct=new Dt,Ot=new Pt;function Dt(e,t,n){this.x=e||0,this.y=t||0,this.z=n||0}Object.assign(Dt.prototype,{isVector3:!0,set:function(e,t,n){return this.x=e,this.y=t,this.z=n,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this},multiplyVectors:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this},applyEuler:function(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(Ot.setFromEuler(e))},applyAxisAngle:function(e,t){return this.applyQuaternion(Ot.setFromAxisAngle(e,t))},applyMatrix3:function(e){var t=this.x,n=this.y,i=this.z,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6]*i,this.y=r[1]*t+r[4]*n+r[7]*i,this.z=r[2]*t+r[5]*n+r[8]*i,this},applyMatrix4:function(e){var t=this.x,n=this.y,i=this.z,r=e.elements,a=1/(r[3]*t+r[7]*n+r[11]*i+r[15]);return this.x=(r[0]*t+r[4]*n+r[8]*i+r[12])*a,this.y=(r[1]*t+r[5]*n+r[9]*i+r[13])*a,this.z=(r[2]*t+r[6]*n+r[10]*i+r[14])*a,this},applyQuaternion:function(e){var t=this.x,n=this.y,i=this.z,r=e.x,a=e.y,o=e.z,s=e.w,c=s*t+a*i-o*n,l=s*n+o*t-r*i,h=s*i+r*n-a*t,u=-r*t-a*n-o*i;return this.x=c*s+u*-r+l*-o-h*-a,this.y=l*s+u*-a+h*-r-c*-o,this.z=h*s+u*-o+c*-a-l*-r,this},project:function(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)},unproject:function(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)},transformDirection:function(e){var t=this.x,n=this.y,i=this.z,r=e.elements;return this.x=r[0]*t+r[4]*n+r[8]*i,this.y=r[1]*t+r[5]*n+r[9]*i,this.z=r[2]*t+r[6]*n+r[10]*i,this.normalize()},divide:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this},divideScalar:function(e){return this.multiplyScalar(1/e)},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this},clampScalar:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this},clampLength:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},cross:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)},crossVectors:function(e,t){var n=e.x,i=e.y,r=e.z,a=t.x,o=t.y,s=t.z;return this.x=i*s-r*o,this.y=r*a-n*s,this.z=n*o-i*a,this},projectOnVector:function(e){var t=e.dot(this)/e.lengthSq();return this.copy(e).multiplyScalar(t)},projectOnPlane:function(e){return Ct.copy(this).projectOnVector(e),this.sub(Ct)},reflect:function(e){return this.sub(Ct.copy(e).multiplyScalar(2*this.dot(e)))},angleTo:function(e){var t=Math.sqrt(this.lengthSq()*e.lengthSq());0===t&&console.error("THREE.Vector3: angleTo() can't handle zero length vectors.");var n=this.dot(e)/t;return Math.acos(Lt.clamp(n,-1,1))},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,n=this.y-e.y,i=this.z-e.z;return t*t+n*n+i*i},manhattanDistanceTo:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)},setFromSpherical:function(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)},setFromSphericalCoords:function(e,t,n){var i=Math.sin(t)*e;return this.x=i*Math.sin(n),this.y=Math.cos(t)*e,this.z=i*Math.cos(n),this},setFromCylindrical:function(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)},setFromCylindricalCoords:function(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this},setFromMatrixPosition:function(e){var t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this},setFromMatrixScale:function(e){var t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=i,this},setFromMatrixColumn:function(e,t){return this.fromArray(e.elements,4*t)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e},fromBufferAttribute:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}});var It,Nt=new Dt;function zt(){this.elements=[1,0,0,0,1,0,0,0,1],0<arguments.length&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}Object.assign(zt.prototype,{isMatrix3:!0,set:function(e,t,n,i,r,a,o,s,c){var l=this.elements;return l[0]=e,l[1]=i,l[2]=o,l[3]=t,l[4]=r,l[5]=s,l[6]=n,l[7]=a,l[8]=c,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this},setFromMatrix4:function(e){var t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this},applyToBufferAttribute:function(e){for(var t=0,n=e.count;t<n;t++)Nt.x=e.getX(t),Nt.y=e.getY(t),Nt.z=e.getZ(t),Nt.applyMatrix3(this),e.setXYZ(t,Nt.x,Nt.y,Nt.z);return e},multiply:function(e){return this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var n=e.elements,i=t.elements,r=this.elements,a=n[0],o=n[3],s=n[6],c=n[1],l=n[4],h=n[7],u=n[2],p=n[5],d=n[8],f=i[0],m=i[3],g=i[6],v=i[1],y=i[4],x=i[7],b=i[2],w=i[5],_=i[8];return r[0]=a*f+o*v+s*b,r[3]=a*m+o*y+s*w,r[6]=a*g+o*x+s*_,r[1]=c*f+l*v+h*b,r[4]=c*m+l*y+h*w,r[7]=c*g+l*x+h*_,r[2]=u*f+p*v+d*b,r[5]=u*m+p*y+d*w,r[8]=u*g+p*x+d*_,this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this},determinant:function(){var e=this.elements,t=e[0],n=e[1],i=e[2],r=e[3],a=e[4],o=e[5],s=e[6],c=e[7],l=e[8];return t*a*l-t*o*c-n*r*l+n*o*s+i*r*c-i*a*s},getInverse:function(e,t){e&&e.isMatrix4&&console.error("THREE.Matrix3: .getInverse() no longer takes a Matrix4 argument.");var n=e.elements,i=this.elements,r=n[0],a=n[1],o=n[2],s=n[3],c=n[4],l=n[5],h=n[6],u=n[7],p=n[8],d=p*c-l*u,f=l*h-p*s,m=u*s-c*h,g=r*d+a*f+o*m;if(0==g){var v="THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0";if(!0===t)throw new Error(v);return console.warn(v),this.identity()}var y=1/g;return i[0]=d*y,i[1]=(o*u-p*a)*y,i[2]=(l*a-o*c)*y,i[3]=f*y,i[4]=(p*r-o*h)*y,i[5]=(o*s-l*r)*y,i[6]=m*y,i[7]=(a*h-u*r)*y,i[8]=(c*r-a*s)*y,this},transpose:function(){var e=this.elements,t=e[1];return e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this},getNormalMatrix:function(e){return this.setFromMatrix4(e).getInverse(this).transpose()},transposeIntoArray:function(e){var t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this},setUvTransform:function(e,t,n,i,r,a,o){var s=Math.cos(r),c=Math.sin(r);this.set(n*s,n*c,-n*(s*a+c*o)+a+e,-i*c,i*s,-i*(-c*a+s*o)+o+t,0,0,1)},scale:function(e,t){var n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=t,n[4]*=t,n[7]*=t,this},rotate:function(e){var t=Math.cos(e),n=Math.sin(e),i=this.elements,r=i[0],a=i[3],o=i[6],s=i[1],c=i[4],l=i[7];return i[0]=t*r+n*s,i[3]=t*a+n*c,i[6]=t*o+n*l,i[1]=-n*r+t*s,i[4]=-n*a+t*c,i[7]=-n*o+t*l,this},translate:function(e,t){var n=this.elements;return n[0]+=e*n[2],n[3]+=e*n[5],n[6]+=e*n[8],n[1]+=t*n[2],n[4]+=t*n[5],n[7]+=t*n[8],this},equals:function(e){for(var t=this.elements,n=e.elements,i=0;i<9;i++)if(t[i]!==n[i])return!1;return!0},fromArray:function(e,t){void 0===t&&(t=0);for(var n=0;n<9;n++)this.elements[n]=e[n+t];return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}});var Bt={getDataURL:function(e){var t,n;return"undefined"==typeof HTMLCanvasElement?e.src:2048<(n=e instanceof HTMLCanvasElement?e:(void 0===It&&(It=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),It.width=e.width,It.height=e.height,t=It.getContext("2d"),e instanceof ImageData?t.putImageData(e,0,0):t.drawImage(e,0,0,e.width,e.height),It)).width||2048<n.height?n.toDataURL("image/jpeg",.6):n.toDataURL("image/png")}},Ut=0;function Ft(e,t,n,i,r,a,o,s,c,l){Object.defineProperty(this,"id",{value:Ut++}),this.uuid=Lt.generateUUID(),this.name="",this.image=void 0!==e?e:Ft.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==t?t:Ft.DEFAULT_MAPPING,this.wrapS=void 0!==n?n:H,this.wrapT=void 0!==i?i:H,this.magFilter=void 0!==r?r:qe,this.minFilter=void 0!==a?a:Ye,this.anisotropy=void 0!==c?c:1,this.format=void 0!==o?o:nt,this.type=void 0!==s?s:Ze,this.offset=new Rt(0,0),this.repeat=new Rt(1,1),this.center=new Rt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new zt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==l?l:ht,this.version=0,this.onUpdate=null}function Gt(e,t,n,i){this.x=e||0,this.y=t||0,this.z=n||0,this.w=void 0!==i?i:1}function Ht(e,t,n){this.width=e,this.height=t,this.scissor=new Gt(0,0,e,t),this.scissorTest=!1,this.viewport=new Gt(0,0,e,t),n=n||{},this.texture=new Ft(void 0,void 0,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.image={},this.texture.image.width=e,this.texture.image.height=t,this.texture.generateMipmaps=void 0!==n.generateMipmaps&&n.generateMipmaps,this.texture.minFilter=void 0!==n.minFilter?n.minFilter:qe,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0===n.stencilBuffer||n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null}function Vt(e,t,n){Ht.call(this,e,t,n),this.samples=4}Ft.DEFAULT_IMAGE=void 0,Ft.DEFAULT_MAPPING=300,Ft.prototype=Object.assign(Object.create(Tt.prototype),{constructor:Ft,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this},toJSON:function(e){var t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];var n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){var i,r=this.image;if(void 0===r.uuid&&(r.uuid=Lt.generateUUID()),!t&&void 0===e.images[r.uuid]){if(Array.isArray(r)){i=[];for(var a=0,o=r.length;a<o;a++)i.push(Bt.getDataURL(r[a]))}else i=Bt.getDataURL(r);e.images[r.uuid]={uuid:r.uuid,url:i}}n.image=r.uuid}return t||(e.textures[this.uuid]=n),n},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(e){if(300!==this.mapping)return e;if(e.applyMatrix3(this.matrix),e.x<0||1<e.x)switch(this.wrapS){case G:e.x=e.x-Math.floor(e.x);break;case H:e.x=e.x<0?0:1;break;case V:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||1<e.y)switch(this.wrapT){case G:e.y=e.y-Math.floor(e.y);break;case H:e.y=e.y<0?0:1;break;case V:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}}),Object.defineProperty(Ft.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.defineProperties(Gt.prototype,{width:{get:function(){return this.z},set:function(e){this.z=e}},height:{get:function(){return this.w},set:function(e){this.w=e}}}),Object.assign(Gt.prototype,{isVector4:!0,set:function(e,t,n,i){return this.x=e,this.y=t,this.z=n,this.w=i,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this.w=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setW:function(e){return this.w=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this},applyMatrix4:function(e){var t=this.x,n=this.y,i=this.z,r=this.w,a=e.elements;return this.x=a[0]*t+a[4]*n+a[8]*i+a[12]*r,this.y=a[1]*t+a[5]*n+a[9]*i+a[13]*r,this.z=a[2]*t+a[6]*n+a[10]*i+a[14]*r,this.w=a[3]*t+a[7]*n+a[11]*i+a[15]*r,this},divideScalar:function(e){return this.multiplyScalar(1/e)},setAxisAngleFromQuaternion:function(e){this.w=2*Math.acos(e.w);var t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this},setAxisAngleFromRotationMatrix:function(e){var t,n,i,r,a=e.elements,o=a[0],s=a[4],c=a[8],l=a[1],h=a[5],u=a[9],p=a[2],d=a[6],f=a[10];if(Math.abs(s-l)<.01&&Math.abs(c-p)<.01&&Math.abs(u-d)<.01){if(Math.abs(s+l)<.1&&Math.abs(c+p)<.1&&Math.abs(u+d)<.1&&Math.abs(o+h+f-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;var m=(o+1)/2,g=(h+1)/2,v=(f+1)/2,y=(s+l)/4,x=(c+p)/4,b=(u+d)/4;return g<m&&v<m?r=m<.01?(n=0,i=.707106781):(i=y/(n=Math.sqrt(m)),x/n):v<g?r=g<.01?(i=0,n=.707106781):(n=y/(i=Math.sqrt(g)),b/i):v<.01?(i=n=.707106781,r=0):(n=x/(r=Math.sqrt(v)),i=b/r),this.set(n,i,r,t),this}var w=Math.sqrt((d-u)*(d-u)+(c-p)*(c-p)+(l-s)*(l-s));return Math.abs(w)<.001&&(w=1),this.x=(d-u)/w,this.y=(c-p)/w,this.z=(l-s)/w,this.w=Math.acos((o+h+f-1)/2),this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this},clampScalar:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this},clampLength:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e},fromBufferAttribute:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}}),Ht.prototype=Object.assign(Object.create(Tt.prototype),{constructor:Ht,isWebGLRenderTarget:!0,setSize:function(e,t){this.width===e&&this.height===t||(this.width=e,this.height=t,this.texture.image.width=e,this.texture.image.height=t,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.width=e.width,this.height=e.height,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Vt.prototype=Object.assign(Object.create(Ht.prototype),{constructor:Vt,isWebGLMultisampleRenderTarget:!0,copy:function(e){return Ht.prototype.copy.call(this,e),this.samples=e.samples,this}});var jt=new Dt,kt=new Jt,Wt=new Dt(0,0,0),qt=new Dt(1,1,1),Xt=new Dt,Yt=new Dt,Zt=new Dt;function Jt(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],0<arguments.length&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}Object.assign(Jt.prototype,{isMatrix4:!0,set:function(e,t,n,i,r,a,o,s,c,l,h,u,p,d,f,m){var g=this.elements;return g[0]=e,g[4]=t,g[8]=n,g[12]=i,g[1]=r,g[5]=a,g[9]=o,g[13]=s,g[2]=c,g[6]=l,g[10]=h,g[14]=u,g[3]=p,g[7]=d,g[11]=f,g[15]=m,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new Jt).fromArray(this.elements)},copy:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this},copyPosition:function(e){var t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this},extractBasis:function(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this},makeBasis:function(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this},extractRotation:function(e){var t=this.elements,n=e.elements,i=1/jt.setFromMatrixColumn(e,0).length(),r=1/jt.setFromMatrixColumn(e,1).length(),a=1/jt.setFromMatrixColumn(e,2).length();return t[0]=n[0]*i,t[1]=n[1]*i,t[2]=n[2]*i,t[3]=0,t[4]=n[4]*r,t[5]=n[5]*r,t[6]=n[6]*r,t[7]=0,t[8]=n[8]*a,t[9]=n[9]*a,t[10]=n[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},makeRotationFromEuler:function(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var t,n,i,r,a,o,s,c,l,h,u,p,d=this.elements,f=e.x,m=e.y,g=e.z,v=Math.cos(f),y=Math.sin(f),x=Math.cos(m),b=Math.sin(m),w=Math.cos(g),_=Math.sin(g);return"XYZ"===e.order?(a=v*w,o=v*_,s=y*w,c=y*_,d[0]=x*w,d[4]=-x*_,d[8]=b,d[1]=o+s*b,d[5]=a-c*b,d[9]=-y*x,d[2]=c-a*b,d[6]=s+o*b,d[10]=v*x):"YXZ"===e.order?(t=x*w,n=x*_,i=b*w,r=b*_,d[0]=t+r*y,d[4]=i*y-n,d[8]=v*b,d[1]=v*_,d[5]=v*w,d[9]=-y,d[2]=n*y-i,d[6]=r+t*y,d[10]=v*x):"ZXY"===e.order?(t=x*w,n=x*_,i=b*w,r=b*_,d[0]=t-r*y,d[4]=-v*_,d[8]=i+n*y,d[1]=n+i*y,d[5]=v*w,d[9]=r-t*y,d[2]=-v*b,d[6]=y,d[10]=v*x):"ZYX"===e.order?(a=v*w,o=v*_,s=y*w,c=y*_,d[0]=x*w,d[4]=s*b-o,d[8]=a*b+c,d[1]=x*_,d[5]=c*b+a,d[9]=o*b-s,d[2]=-b,d[6]=y*x,d[10]=v*x):"YZX"===e.order?(l=v*x,h=v*b,u=y*x,p=y*b,d[0]=x*w,d[4]=p-l*_,d[8]=u*_+h,d[1]=_,d[5]=v*w,d[9]=-y*w,d[2]=-b*w,d[6]=h*_+u,d[10]=l-p*_):"XZY"===e.order&&(l=v*x,h=v*b,u=y*x,p=y*b,d[0]=x*w,d[4]=-_,d[8]=b*w,d[1]=l*_+p,d[5]=v*w,d[9]=h*_-u,d[2]=u*_-h,d[6]=y*w,d[10]=p*_+l),d[3]=0,d[7]=0,d[11]=0,d[12]=0,d[13]=0,d[14]=0,d[15]=1,this},makeRotationFromQuaternion:function(e){return this.compose(Wt,e,qt)},lookAt:function(e,t,n){var i=this.elements;return Zt.subVectors(e,t),0===Zt.lengthSq()&&(Zt.z=1),Zt.normalize(),Xt.crossVectors(n,Zt),0===Xt.lengthSq()&&(1===Math.abs(n.z)?Zt.x+=1e-4:Zt.z+=1e-4,Zt.normalize(),Xt.crossVectors(n,Zt)),Xt.normalize(),Yt.crossVectors(Zt,Xt),i[0]=Xt.x,i[4]=Yt.x,i[8]=Zt.x,i[1]=Xt.y,i[5]=Yt.y,i[9]=Zt.y,i[2]=Xt.z,i[6]=Yt.z,i[10]=Zt.z,this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var n=e.elements,i=t.elements,r=this.elements,a=n[0],o=n[4],s=n[8],c=n[12],l=n[1],h=n[5],u=n[9],p=n[13],d=n[2],f=n[6],m=n[10],g=n[14],v=n[3],y=n[7],x=n[11],b=n[15],w=i[0],_=i[4],M=i[8],S=i[12],T=i[1],E=i[5],A=i[9],L=i[13],R=i[2],P=i[6],C=i[10],O=i[14],D=i[3],I=i[7],N=i[11],z=i[15];return r[0]=a*w+o*T+s*R+c*D,r[4]=a*_+o*E+s*P+c*I,r[8]=a*M+o*A+s*C+c*N,r[12]=a*S+o*L+s*O+c*z,r[1]=l*w+h*T+u*R+p*D,r[5]=l*_+h*E+u*P+p*I,r[9]=l*M+h*A+u*C+p*N,r[13]=l*S+h*L+u*O+p*z,r[2]=d*w+f*T+m*R+g*D,r[6]=d*_+f*E+m*P+g*I,r[10]=d*M+f*A+m*C+g*N,r[14]=d*S+f*L+m*O+g*z,r[3]=v*w+y*T+x*R+b*D,r[7]=v*_+y*E+x*P+b*I,r[11]=v*M+y*A+x*C+b*N,r[15]=v*S+y*L+x*O+b*z,this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this},applyToBufferAttribute:function(e){for(var t=0,n=e.count;t<n;t++)jt.x=e.getX(t),jt.y=e.getY(t),jt.z=e.getZ(t),jt.applyMatrix4(this),e.setXYZ(t,jt.x,jt.y,jt.z);return e},determinant:function(){var e=this.elements,t=e[0],n=e[4],i=e[8],r=e[12],a=e[1],o=e[5],s=e[9],c=e[13],l=e[2],h=e[6],u=e[10],p=e[14];return e[3]*(r*s*h-i*c*h-r*o*u+n*c*u+i*o*p-n*s*p)+e[7]*(t*s*p-t*c*u+r*a*u-i*a*p+i*c*l-r*s*l)+e[11]*(t*c*h-t*o*p-r*a*h+n*a*p+r*o*l-n*c*l)+e[15]*(-i*o*l-t*s*h+t*o*u+i*a*h-n*a*u+n*s*l)},transpose:function(){var e=this.elements,t=e[1];return e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this},setPosition:function(e,t,n){var i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=n),this},getInverse:function(e,t){var n=this.elements,i=e.elements,r=i[0],a=i[1],o=i[2],s=i[3],c=i[4],l=i[5],h=i[6],u=i[7],p=i[8],d=i[9],f=i[10],m=i[11],g=i[12],v=i[13],y=i[14],x=i[15],b=d*y*u-v*f*u+v*h*m-l*y*m-d*h*x+l*f*x,w=g*f*u-p*y*u-g*h*m+c*y*m+p*h*x-c*f*x,_=p*v*u-g*d*u+g*l*m-c*v*m-p*l*x+c*d*x,M=g*d*h-p*v*h-g*l*f+c*v*f+p*l*y-c*d*y,S=r*b+a*w+o*_+s*M;if(0==S){var T="THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0";if(!0===t)throw new Error(T);return console.warn(T),this.identity()}var E=1/S;return n[0]=b*E,n[1]=(v*f*s-d*y*s-v*o*m+a*y*m+d*o*x-a*f*x)*E,n[2]=(l*y*s-v*h*s+v*o*u-a*y*u-l*o*x+a*h*x)*E,n[3]=(d*h*s-l*f*s-d*o*u+a*f*u+l*o*m-a*h*m)*E,n[4]=w*E,n[5]=(p*y*s-g*f*s+g*o*m-r*y*m-p*o*x+r*f*x)*E,n[6]=(g*h*s-c*y*s-g*o*u+r*y*u+c*o*x-r*h*x)*E,n[7]=(c*f*s-p*h*s+p*o*u-r*f*u-c*o*m+r*h*m)*E,n[8]=_*E,n[9]=(g*d*s-p*v*s-g*a*m+r*v*m+p*a*x-r*d*x)*E,n[10]=(c*v*s-g*l*s+g*a*u-r*v*u-c*a*x+r*l*x)*E,n[11]=(p*l*s-c*d*s-p*a*u+r*d*u+c*a*m-r*l*m)*E,n[12]=M*E,n[13]=(p*v*o-g*d*o+g*a*f-r*v*f-p*a*y+r*d*y)*E,n[14]=(g*l*o-c*v*o-g*a*h+r*v*h+c*a*y-r*l*y)*E,n[15]=(c*d*o-p*l*o+p*a*h-r*d*h-c*a*f+r*l*f)*E,this},scale:function(e){var t=this.elements,n=e.x,i=e.y,r=e.z;return t[0]*=n,t[4]*=i,t[8]*=r,t[1]*=n,t[5]*=i,t[9]*=r,t[2]*=n,t[6]*=i,t[10]*=r,t[3]*=n,t[7]*=i,t[11]*=r,this},getMaxScaleOnAxis:function(){var e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,i))},makeTranslation:function(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this},makeRotationX:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this},makeRotationY:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this},makeRotationZ:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(e,t){var n=Math.cos(t),i=Math.sin(t),r=1-n,a=e.x,o=e.y,s=e.z,c=r*a,l=r*o;return this.set(c*a+n,c*o-i*s,c*s+i*o,0,c*o+i*s,l*o+n,l*s-i*a,0,c*s-i*o,l*s+i*a,r*s*s+n,0,0,0,0,1),this},makeScale:function(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this},makeShear:function(e,t,n){return this.set(1,t,n,0,e,1,n,0,e,t,1,0,0,0,0,1),this},compose:function(e,t,n){var i=this.elements,r=t._x,a=t._y,o=t._z,s=t._w,c=r+r,l=a+a,h=o+o,u=r*c,p=r*l,d=r*h,f=a*l,m=a*h,g=o*h,v=s*c,y=s*l,x=s*h,b=n.x,w=n.y,_=n.z;return i[0]=(1-(f+g))*b,i[1]=(p+x)*b,i[2]=(d-y)*b,i[3]=0,i[4]=(p-x)*w,i[5]=(1-(u+g))*w,i[6]=(m+v)*w,i[7]=0,i[8]=(d+y)*_,i[9]=(m-v)*_,i[10]=(1-(u+f))*_,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this},decompose:function(e,t,n){var i=this.elements,r=jt.set(i[0],i[1],i[2]).length(),a=jt.set(i[4],i[5],i[6]).length(),o=jt.set(i[8],i[9],i[10]).length();this.determinant()<0&&(r=-r),e.x=i[12],e.y=i[13],e.z=i[14],kt.copy(this);var s=1/r,c=1/a,l=1/o;return kt.elements[0]*=s,kt.elements[1]*=s,kt.elements[2]*=s,kt.elements[4]*=c,kt.elements[5]*=c,kt.elements[6]*=c,kt.elements[8]*=l,kt.elements[9]*=l,kt.elements[10]*=l,t.setFromRotationMatrix(kt),n.x=r,n.y=a,n.z=o,this},makePerspective:function(e,t,n,i,r,a){void 0===a&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var o=this.elements,s=2*r/(t-e),c=2*r/(n-i),l=(t+e)/(t-e),h=(n+i)/(n-i),u=-(a+r)/(a-r),p=-2*a*r/(a-r);return o[0]=s,o[4]=0,o[8]=l,o[12]=0,o[1]=0,o[5]=c,o[9]=h,o[13]=0,o[2]=0,o[6]=0,o[10]=u,o[14]=p,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this},makeOrthographic:function(e,t,n,i,r,a){var o=this.elements,s=1/(t-e),c=1/(n-i),l=1/(a-r),h=(t+e)*s,u=(n+i)*c,p=(a+r)*l;return o[0]=2*s,o[4]=0,o[8]=0,o[12]=-h,o[1]=0,o[5]=2*c,o[9]=0,o[13]=-u,o[2]=0,o[6]=0,o[10]=-2*l,o[14]=-p,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this},equals:function(e){for(var t=this.elements,n=e.elements,i=0;i<16;i++)if(t[i]!==n[i])return!1;return!0},fromArray:function(e,t){void 0===t&&(t=0);for(var n=0;n<16;n++)this.elements[n]=e[n+t];return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}});var Qt=new Jt,Kt=new Pt;function $t(e,t,n,i){this._x=e||0,this._y=t||0,this._z=n||0,this._order=i||$t.DefaultOrder}function en(){this.mask=1}$t.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],$t.DefaultOrder="XYZ",Object.defineProperties($t.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this._onChangeCallback()}},order:{get:function(){return this._order},set:function(e){this._order=e,this._onChangeCallback()}}}),Object.assign($t.prototype,{isEuler:!0,set:function(e,t,n,i){return this._x=e,this._y=t,this._z=n,this._order=i||this._order,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this},setFromRotationMatrix:function(e,t,n){var i=Lt.clamp,r=e.elements,a=r[0],o=r[4],s=r[8],c=r[1],l=r[5],h=r[9],u=r[2],p=r[6],d=r[10];return"XYZ"===(t=t||this._order)?(this._y=Math.asin(i(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-h,d),this._z=Math.atan2(-o,a)):(this._x=Math.atan2(p,l),this._z=0)):"YXZ"===t?(this._x=Math.asin(-i(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(s,d),this._z=Math.atan2(c,l)):(this._y=Math.atan2(-u,a),this._z=0)):"ZXY"===t?(this._x=Math.asin(i(p,-1,1)),Math.abs(p)<.9999999?(this._y=Math.atan2(-u,d),this._z=Math.atan2(-o,l)):(this._y=0,this._z=Math.atan2(c,a))):"ZYX"===t?(this._y=Math.asin(-i(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(p,d),this._z=Math.atan2(c,a)):(this._x=0,this._z=Math.atan2(-o,l))):"YZX"===t?(this._z=Math.asin(i(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-h,l),this._y=Math.atan2(-u,a)):(this._x=0,this._y=Math.atan2(s,d))):"XZY"===t?(this._z=Math.asin(-i(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(p,l),this._y=Math.atan2(s,a)):(this._x=Math.atan2(-h,d),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+t),this._order=t,!1!==n&&this._onChangeCallback(),this},setFromQuaternion:function(e,t,n){return Qt.makeRotationFromQuaternion(e),this.setFromRotationMatrix(Qt,t,n)},setFromVector3:function(e,t){return this.set(e.x,e.y,e.z,t||this._order)},reorder:function(e){return Kt.setFromEuler(this),this.setFromQuaternion(Kt,e)},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order},fromArray:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e},toVector3:function(e){return e?e.set(this._x,this._y,this._z):new Dt(this._x,this._y,this._z)},_onChange:function(e){return this._onChangeCallback=e,this},_onChangeCallback:function(){}}),Object.assign(en.prototype,{set:function(e){this.mask=1<<e|0},enable:function(e){this.mask|=1<<e|0},enableAll:function(){this.mask=-1},toggle:function(e){this.mask^=1<<e|0},disable:function(e){this.mask&=~(1<<e|0)},disableAll:function(){this.mask=0},test:function(e){return 0!=(this.mask&e.mask)}});var tn=0,nn=new Dt,rn=new Pt,an=new Jt,on=new Dt,sn=new Dt,cn=new Dt,ln=new Pt,hn=new Dt(1,0,0),un=new Dt(0,1,0),pn=new Dt(0,0,1),dn={type:"added"},fn={type:"removed"};function mn(){Object.defineProperty(this,"id",{value:tn++}),this.uuid=Lt.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=mn.DefaultUp.clone();var e=new Dt,t=new $t,n=new Pt,i=new Dt(1,1,1);t._onChange(function(){n.setFromEuler(t,!1)}),n._onChange(function(){t.setFromQuaternion(n,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new Jt},normalMatrix:{value:new zt}}),this.matrix=new Jt,this.matrixWorld=new Jt,this.matrixAutoUpdate=mn.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new en,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}function gn(){mn.call(this),this.type="Scene",this.background=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}mn.DefaultUp=new Dt(0,1,0),mn.DefaultMatrixAutoUpdate=!0,mn.prototype=Object.assign(Object.create(Tt.prototype),{constructor:mn,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix:function(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(e){return this.quaternion.premultiply(e),this},setRotationFromAxisAngle:function(e,t){this.quaternion.setFromAxisAngle(e,t)},setRotationFromEuler:function(e){this.quaternion.setFromEuler(e,!0)},setRotationFromMatrix:function(e){this.quaternion.setFromRotationMatrix(e)},setRotationFromQuaternion:function(e){this.quaternion.copy(e)},rotateOnAxis:function(e,t){return rn.setFromAxisAngle(e,t),this.quaternion.multiply(rn),this},rotateOnWorldAxis:function(e,t){return rn.setFromAxisAngle(e,t),this.quaternion.premultiply(rn),this},rotateX:function(e){return this.rotateOnAxis(hn,e)},rotateY:function(e){return this.rotateOnAxis(un,e)},rotateZ:function(e){return this.rotateOnAxis(pn,e)},translateOnAxis:function(e,t){return nn.copy(e).applyQuaternion(this.quaternion),this.position.add(nn.multiplyScalar(t)),this},translateX:function(e){return this.translateOnAxis(hn,e)},translateY:function(e){return this.translateOnAxis(un,e)},translateZ:function(e){return this.translateOnAxis(pn,e)},localToWorld:function(e){return e.applyMatrix4(this.matrixWorld)},worldToLocal:function(e){return e.applyMatrix4(an.getInverse(this.matrixWorld))},lookAt:function(e,t,n){e.isVector3?on.copy(e):on.set(e,t,n);var i=this.parent;this.updateWorldMatrix(!0,!1),sn.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?an.lookAt(sn,on,this.up):an.lookAt(on,sn,this.up),this.quaternion.setFromRotationMatrix(an),i&&(an.extractRotation(i.matrixWorld),rn.setFromRotationMatrix(an),this.quaternion.premultiply(rn.inverse()))},add:function(e){if(1<arguments.length){for(var t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?console.error("THREE.Object3D.add: object can't be added as a child of itself.",e):e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),(e.parent=this).children.push(e),e.dispatchEvent(dn)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this},remove:function(e){if(1<arguments.length){for(var t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}var n=this.children.indexOf(e);return-1!==n&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(fn)),this},attach:function(e){return this.updateWorldMatrix(!0,!1),an.getInverse(this.matrixWorld),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),an.multiply(e.parent.matrixWorld)),e.applyMatrix(an),e.updateWorldMatrix(!1,!1),this.add(e),this},getObjectById:function(e){return this.getObjectByProperty("id",e)},getObjectByName:function(e){return this.getObjectByProperty("name",e)},getObjectByProperty:function(e,t){if(this[e]===t)return this;for(var n=0,i=this.children.length;n<i;n++){var r=this.children[n].getObjectByProperty(e,t);if(void 0!==r)return r}},getWorldPosition:function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),e=new Dt),this.updateMatrixWorld(!0),e.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),e=new Pt),this.updateMatrixWorld(!0),this.matrixWorld.decompose(sn,e,cn),e},getWorldScale:function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),e=new Dt),this.updateMatrixWorld(!0),this.matrixWorld.decompose(sn,ln,e),e},getWorldDirection:function(e){void 0===e&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),e=new Dt),this.updateMatrixWorld(!0);var t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()},raycast:function(){},traverse:function(e){e(this);for(var t=this.children,n=0,i=t.length;n<i;n++)t[n].traverse(e)},traverseVisible:function(e){if(!1!==this.visible){e(this);for(var t=this.children,n=0,i=t.length;n<i;n++)t[n].traverseVisible(e)}},traverseAncestors:function(e){var t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),e=!(this.matrixWorldNeedsUpdate=!1));for(var t=this.children,n=0,i=t.length;n<i;n++)t[n].updateMatrixWorld(e)},updateWorldMatrix:function(e,t){var n=this.parent;if(!0===e&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t)for(var i=this.children,r=0,a=i.length;r<a;r++)i[r].updateWorldMatrix(!1,!0)},toJSON:function(n){var e=void 0===n||"string"==typeof n,t={};e&&(n={geometries:{},materials:{},textures:{},images:{},shapes:{}},t.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var i,r,a,o,s={};function c(e,t){return void 0===e[t.uuid]&&(e[t.uuid]=t.toJSON(n)),t.uuid}if(s.uuid=this.uuid,s.type=this.type,""!==this.name&&(s.name=this.name),!0===this.castShadow&&(s.castShadow=!0),!0===this.receiveShadow&&(s.receiveShadow=!0),!1===this.visible&&(s.visible=!1),!1===this.frustumCulled&&(s.frustumCulled=!1),0!==this.renderOrder&&(s.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(s.userData=this.userData),s.layers=this.layers.mask,s.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(s.matrixAutoUpdate=!1),this.isMesh&&this.drawMode!==lt&&(s.drawMode=this.drawMode),this.isInstancedMesh&&(s.type="InstancedMesh",s.count=this.count,s.instanceMatrix=this.instanceMatrix.toJSON()),this.isMesh||this.isLine||this.isPoints){s.geometry=c(n.geometries,this.geometry);var l=this.geometry.parameters;if(void 0!==l&&void 0!==l.shapes){var h=l.shapes;if(Array.isArray(h))for(var u=0,p=h.length;u<p;u++){var d=h[u];c(n.shapes,d)}else c(n.shapes,h)}}if(void 0!==this.material)if(Array.isArray(this.material)){for(var f=[],u=0,p=this.material.length;u<p;u++)f.push(c(n.materials,this.material[u]));s.material=f}else s.material=c(n.materials,this.material);if(0<this.children.length)for(s.children=[],u=0;u<this.children.length;u++)s.children.push(this.children[u].toJSON(n).object);return e&&(i=m(n.geometries),r=m(n.materials),a=m(n.textures),o=m(n.images),h=m(n.shapes),0<i.length&&(t.geometries=i),0<r.length&&(t.materials=r),0<a.length&&(t.textures=a),0<o.length&&(t.images=o),0<h.length&&(t.shapes=h)),t.object=s,t;function m(e){var t,n=[];for(t in e){var i=e[t];delete i.metadata,n.push(i)}return n}},clone:function(e){return(new this.constructor).copy(this,e)},copy:function(e,t){if(void 0===t&&(t=!0),this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(var n=0;n<e.children.length;n++){var i=e.children[n];this.add(i.clone())}return this}}),gn.prototype=Object.assign(Object.create(mn.prototype),{constructor:gn,isScene:!0,copy:function(e,t){return mn.prototype.copy.call(this,e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this},toJSON:function(e){var t=mn.prototype.toJSON.call(this,e);return null!==this.background&&(t.object.background=this.background.toJSON(e)),null!==this.fog&&(t.object.fog=this.fog.toJSON()),t},dispose:function(){this.dispatchEvent({type:"dispose"})}});var vn=[new Dt,new Dt,new Dt,new Dt,new Dt,new Dt,new Dt,new Dt],yn=new Dt,xn=new Dt,bn=new Dt,wn=new Dt,_n=new Dt,Mn=new Dt,Sn=new Dt,Tn=new Dt,En=new Dt,An=new Dt,Ln=new Dt;function Rn(e,t){this.min=void 0!==e?e:new Dt(1/0,1/0,1/0),this.max=void 0!==t?t:new Dt(-1/0,-1/0,-1/0)}function Pn(e,t,n,i,r){for(var a=0,o=e.length-3;a<=o;a+=3){Ln.fromArray(e,a);var s=r.x*Math.abs(Ln.x)+r.y*Math.abs(Ln.y)+r.z*Math.abs(Ln.z),c=t.dot(Ln),l=n.dot(Ln),h=i.dot(Ln);if(Math.max(-Math.max(c,l,h),Math.min(c,l,h))>s)return!1}return!0}Object.assign(Rn.prototype,{isBox3:!0,set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromArray:function(e){for(var t=1/0,n=1/0,i=1/0,r=-1/0,a=-1/0,o=-1/0,s=0,c=e.length;s<c;s+=3){var l=e[s],h=e[s+1],u=e[s+2];l<t&&(t=l),h<n&&(n=h),u<i&&(i=u),r<l&&(r=l),a<h&&(a=h),o<u&&(o=u)}return this.min.set(t,n,i),this.max.set(r,a,o),this},setFromBufferAttribute:function(e){for(var t=1/0,n=1/0,i=1/0,r=-1/0,a=-1/0,o=-1/0,s=0,c=e.count;s<c;s++){var l=e.getX(s),h=e.getY(s),u=e.getZ(s);l<t&&(t=l),h<n&&(n=h),u<i&&(i=u),r<l&&(r=l),a<h&&(a=h),o<u&&(o=u)}return this.min.set(t,n,i),this.max.set(r,a,o),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(e,t){var n=yn.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this},setFromObject:function(e){return this.makeEmpty(),this.expandByObject(e)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(e){return void 0===e&&(console.warn("THREE.Box3: .getCenter() target is now required"),e=new Dt),this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){return void 0===e&&(console.warn("THREE.Box3: .getSize() target is now required"),e=new Dt),this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},expandByObject:function(e){e.updateWorldMatrix(!1,!1);var t=e.geometry;if(void 0!==t)if(t.isGeometry)for(var n=t.vertices,i=0,r=n.length;i<r;i++)yn.copy(n[i]),yn.applyMatrix4(e.matrixWorld),this.expandByPoint(yn);else if(t.isBufferGeometry){var a=t.attributes.position;if(void 0!==a)for(i=0,r=a.count;i<r;i++)yn.fromBufferAttribute(a,i).applyMatrix4(e.matrixWorld),this.expandByPoint(yn)}for(var o=e.children,i=0,r=o.length;i<r;i++)this.expandByObject(o[i]);return this},containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z},getParameter:function(e,t){return void 0===t&&(console.warn("THREE.Box3: .getParameter() target is now required"),t=new Dt),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)},intersectsSphere:function(e){return this.clampPoint(e.center,yn),yn.distanceToSquared(e.center)<=e.radius*e.radius},intersectsPlane:function(e){var t,n=0<e.normal.x?(t=e.normal.x*this.min.x,e.normal.x*this.max.x):(t=e.normal.x*this.max.x,e.normal.x*this.min.x);return 0<e.normal.y?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),0<e.normal.z?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant},intersectsTriangle:function(e){return!this.isEmpty()&&(this.getCenter(Tn),En.subVectors(this.max,Tn),xn.subVectors(e.a,Tn),bn.subVectors(e.b,Tn),wn.subVectors(e.c,Tn),_n.subVectors(bn,xn),Mn.subVectors(wn,bn),Sn.subVectors(xn,wn),!!Pn([0,-_n.z,_n.y,0,-Mn.z,Mn.y,0,-Sn.z,Sn.y,_n.z,0,-_n.x,Mn.z,0,-Mn.x,Sn.z,0,-Sn.x,-_n.y,_n.x,0,-Mn.y,Mn.x,0,-Sn.y,Sn.x,0],xn,bn,wn,En)&&!!Pn([1,0,0,0,1,0,0,0,1],xn,bn,wn,En)&&(An.crossVectors(_n,Mn),Pn([An.x,An.y,An.z],xn,bn,wn,En)))},clampPoint:function(e,t){return void 0===t&&(console.warn("THREE.Box3: .clampPoint() target is now required"),t=new Dt),t.copy(e).clamp(this.min,this.max)},distanceToPoint:function(e){return yn.copy(e).clamp(this.min,this.max).sub(e).length()},getBoundingSphere:function(e){return void 0===e&&console.error("THREE.Box3: .getBoundingSphere() target is now required"),this.getCenter(e.center),e.radius=.5*this.getSize(yn).length(),e},intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},applyMatrix4:function(e){return this.isEmpty()||(vn[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),vn[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),vn[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),vn[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),vn[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),vn[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),vn[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),vn[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(vn)),this},translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}});var Cn=new Rn;function On(e,t){this.center=void 0!==e?e:new Dt,this.radius=void 0!==t?t:0}Object.assign(On.prototype,{set:function(e,t){return this.center.copy(e),this.radius=t,this},setFromPoints:function(e,t){var n=this.center;void 0!==t?n.copy(t):Cn.setFromPoints(e).getCenter(n);for(var i=0,r=0,a=e.length;r<a;r++)i=Math.max(i,n.distanceToSquared(e[r]));return this.radius=Math.sqrt(i),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.center.copy(e.center),this.radius=e.radius,this},empty:function(){return this.radius<=0},containsPoint:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(e){return e.distanceTo(this.center)-this.radius},intersectsSphere:function(e){var t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t},intersectsBox:function(e){return e.intersectsSphere(this)},intersectsPlane:function(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius},clampPoint:function(e,t){var n=this.center.distanceToSquared(e);return void 0===t&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),t=new Dt),t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t},getBoundingBox:function(e){return void 0===e&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),e=new Rn),e.set(this.center,this.center),e.expandByScalar(this.radius),e},applyMatrix4:function(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this},translate:function(e){return this.center.add(e),this},equals:function(e){return e.center.equals(this.center)&&e.radius===this.radius}});var Dn=new Dt,In=new Dt,Nn=new Dt,zn=new Dt,Bn=new Dt,Un=new Dt,Fn=new Dt;function Gn(e,t){this.origin=void 0!==e?e:new Dt,this.direction=void 0!==t?t:new Dt}Object.assign(Gn.prototype,{set:function(e,t){return this.origin.copy(e),this.direction.copy(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this},at:function(e,t){return void 0===t&&(console.warn("THREE.Ray: .at() target is now required"),t=new Dt),t.copy(this.direction).multiplyScalar(e).add(this.origin)},lookAt:function(e){return this.direction.copy(e).sub(this.origin).normalize(),this},recast:function(e){return this.origin.copy(this.at(e,Dn)),this},closestPointToPoint:function(e,t){void 0===t&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),t=new Dt),t.subVectors(e,this.origin);var n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(n).add(this.origin)},distanceToPoint:function(e){return Math.sqrt(this.distanceSqToPoint(e))},distanceSqToPoint:function(e){var t=Dn.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Dn.copy(this.direction).multiplyScalar(t).add(this.origin),Dn.distanceToSquared(e))},distanceSqToSegment:function(e,t,n,i){In.copy(e).add(t).multiplyScalar(.5),Nn.copy(t).sub(e).normalize(),zn.copy(this.origin).sub(In);var r,o,s,c,l=.5*e.distanceTo(t),h=-this.direction.dot(Nn),u=zn.dot(this.direction),p=-zn.dot(Nn),d=zn.lengthSq(),f=Math.abs(1-h*h),a=0<f?(s=h*u-p,c=l*f,0<=(o=h*p-u)?-c<=s?s<=c?(o*=r=1/f)*(o+h*(s*=r)+2*u)+s*(h*o+s+2*p)+d:(s=l,-(o=Math.max(0,-(h*s+u)))*o+s*(s+2*p)+d):(s=-l,-(o=Math.max(0,-(h*s+u)))*o+s*(s+2*p)+d):s<=-c?-(o=Math.max(0,-(-h*l+u)))*o+(s=0<o?-l:Math.min(Math.max(-l,-p),l))*(s+2*p)+d:s<=c?(o=0,(s=Math.min(Math.max(-l,-p),l))*(s+2*p)+d):-(o=Math.max(0,-(h*l+u)))*o+(s=0<o?l:Math.min(Math.max(-l,-p),l))*(s+2*p)+d):(s=0<h?-l:l,-(o=Math.max(0,-(h*s+u)))*o+s*(s+2*p)+d);return n&&n.copy(this.direction).multiplyScalar(o).add(this.origin),i&&i.copy(Nn).multiplyScalar(s).add(In),a},intersectSphere:function(e,t){Dn.subVectors(e.center,this.origin);var n=Dn.dot(this.direction),i=Dn.dot(Dn)-n*n,r=e.radius*e.radius;if(r<i)return null;var a=Math.sqrt(r-i),o=n-a,s=n+a;return o<0&&s<0?null:o<0?this.at(s,t):this.at(o,t)},intersectsSphere:function(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius},distanceToPlane:function(e){var t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;var n=-(this.origin.dot(e.normal)+e.constant)/t;return 0<=n?n:null},intersectPlane:function(e,t){var n=this.distanceToPlane(e);return null===n?null:this.at(n,t)},intersectsPlane:function(e){var t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0},intersectBox:function(e,t){var n,i,r,a,o=1/this.direction.x,s=1/this.direction.y,c=1/this.direction.z,l=this.origin,h=0<=o?(n=(e.min.x-l.x)*o,(e.max.x-l.x)*o):(n=(e.max.x-l.x)*o,(e.min.x-l.x)*o),u=0<=s?(i=(e.min.y-l.y)*s,(e.max.y-l.y)*s):(i=(e.max.y-l.y)*s,(e.min.y-l.y)*s);return u<n||h<i?null:((n<i||n!=n)&&(n=i),(u<h||h!=h)&&(h=u),(a=0<=c?(r=(e.min.z-l.z)*c,(e.max.z-l.z)*c):(r=(e.max.z-l.z)*c,(e.min.z-l.z)*c))<n||h<r?null:((n<r||n!=n)&&(n=r),(a<h||h!=h)&&(h=a),h<0?null:this.at(0<=n?n:h,t)))},intersectsBox:function(e){return null!==this.intersectBox(e,Dn)},intersectTriangle:function(e,t,n,i,r){Bn.subVectors(t,e),Un.subVectors(n,e),Fn.crossVectors(Bn,Un);var a,o=this.direction.dot(Fn);if(0<o){if(i)return null;a=1}else{if(!(o<0))return null;a=-1,o=-o}zn.subVectors(this.origin,e);var s=a*this.direction.dot(Un.crossVectors(zn,Un));if(s<0)return null;var c=a*this.direction.dot(Bn.cross(zn));if(c<0)return null;if(o<s+c)return null;var l=-a*zn.dot(Fn);return l<0?null:this.at(l/o,r)},applyMatrix4:function(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this},equals:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}});var Hn=new Dt,Vn=new Dt,jn=new zt;function kn(e,t){this.normal=void 0!==e?e:new Dt(1,0,0),this.constant=void 0!==t?t:0}Object.assign(kn.prototype,{isPlane:!0,set:function(e,t){return this.normal.copy(e),this.constant=t,this},setComponents:function(e,t,n,i){return this.normal.set(e,t,n),this.constant=i,this},setFromNormalAndCoplanarPoint:function(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this},setFromCoplanarPoints:function(e,t,n){var i=Hn.subVectors(n,t).cross(Vn.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this},normalize:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(e){return this.normal.dot(e)+this.constant},distanceToSphere:function(e){return this.distanceToPoint(e.center)-e.radius},projectPoint:function(e,t){return void 0===t&&(console.warn("THREE.Plane: .projectPoint() target is now required"),t=new Dt),t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)},intersectLine:function(e,t){void 0===t&&(console.warn("THREE.Plane: .intersectLine() target is now required"),t=new Dt);var n=e.delta(Hn),i=this.normal.dot(n);if(0===i)return 0===this.distanceToPoint(e.start)?t.copy(e.start):void 0;var r=-(e.start.dot(this.normal)+this.constant)/i;return r<0||1<r?void 0:t.copy(n).multiplyScalar(r).add(e.start)},intersectsLine:function(e){var t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&0<n||n<0&&0<t},intersectsBox:function(e){return e.intersectsPlane(this)},intersectsSphere:function(e){return e.intersectsPlane(this)},coplanarPoint:function(e){return void 0===e&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),e=new Dt),e.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(e,t){var n=t||jn.getNormalMatrix(e),i=this.coplanarPoint(Hn).applyMatrix4(e),r=this.normal.applyMatrix3(n).normalize();return this.constant=-i.dot(r),this},translate:function(e){return this.constant-=e.dot(this.normal),this},equals:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant}});var Wn=new Dt,qn=new Dt,Xn=new Dt,Yn=new Dt,Zn=new Dt,Jn=new Dt,Qn=new Dt,Kn=new Dt,$n=new Dt,ei=new Dt;function ti(e,t,n){this.a=void 0!==e?e:new Dt,this.b=void 0!==t?t:new Dt,this.c=void 0!==n?n:new Dt}Object.assign(ti,{getNormal:function(e,t,n,i){void 0===i&&(console.warn("THREE.Triangle: .getNormal() target is now required"),i=new Dt),i.subVectors(n,t),Wn.subVectors(e,t),i.cross(Wn);var r=i.lengthSq();return 0<r?i.multiplyScalar(1/Math.sqrt(r)):i.set(0,0,0)},getBarycoord:function(e,t,n,i,r){Wn.subVectors(i,t),qn.subVectors(n,t),Xn.subVectors(e,t);var a=Wn.dot(Wn),o=Wn.dot(qn),s=Wn.dot(Xn),c=qn.dot(qn),l=qn.dot(Xn),h=a*c-o*o;if(void 0===r&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),r=new Dt),0==h)return r.set(-2,-1,-1);var u=1/h,p=(c*s-o*l)*u,d=(a*l-o*s)*u;return r.set(1-p-d,d,p)},containsPoint:function(e,t,n,i){return ti.getBarycoord(e,t,n,i,Yn),0<=Yn.x&&0<=Yn.y&&Yn.x+Yn.y<=1},getUV:function(e,t,n,i,r,a,o,s){return this.getBarycoord(e,t,n,i,Yn),s.set(0,0),s.addScaledVector(r,Yn.x),s.addScaledVector(a,Yn.y),s.addScaledVector(o,Yn.z),s},isFrontFacing:function(e,t,n,i){return Wn.subVectors(n,t),qn.subVectors(e,t),Wn.cross(qn).dot(i)<0}}),Object.assign(ti.prototype,{set:function(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this},setFromPointsAndIndices:function(e,t,n,i){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[i]),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this},getArea:function(){return Wn.subVectors(this.c,this.b),qn.subVectors(this.a,this.b),.5*Wn.cross(qn).length()},getMidpoint:function(e){return void 0===e&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),e=new Dt),e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},getNormal:function(e){return ti.getNormal(this.a,this.b,this.c,e)},getPlane:function(e){return void 0===e&&(console.warn("THREE.Triangle: .getPlane() target is now required"),e=new kn),e.setFromCoplanarPoints(this.a,this.b,this.c)},getBarycoord:function(e,t){return ti.getBarycoord(e,this.a,this.b,this.c,t)},getUV:function(e,t,n,i,r){return ti.getUV(e,this.a,this.b,this.c,t,n,i,r)},containsPoint:function(e){return ti.containsPoint(e,this.a,this.b,this.c)},isFrontFacing:function(e){return ti.isFrontFacing(this.a,this.b,this.c,e)},intersectsBox:function(e){return e.intersectsTriangle(this)},closestPointToPoint:function(e,t){void 0===t&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),t=new Dt);var n=this.a,i=this.b,r=this.c;Zn.subVectors(i,n),Jn.subVectors(r,n),Kn.subVectors(e,n);var a=Zn.dot(Kn),o=Jn.dot(Kn);if(a<=0&&o<=0)return t.copy(n);$n.subVectors(e,i);var s=Zn.dot($n),c=Jn.dot($n);if(0<=s&&c<=s)return t.copy(i);var l=a*c-s*o;if(l<=0&&0<=a&&s<=0)return m=a/(a-s),t.copy(n).addScaledVector(Zn,m);ei.subVectors(e,r);var h=Zn.dot(ei),u=Jn.dot(ei);if(0<=u&&h<=u)return t.copy(r);var p=h*o-a*u;if(p<=0&&0<=o&&u<=0)return g=o/(o-u),t.copy(n).addScaledVector(Jn,g);var d=s*u-h*c;if(d<=0&&0<=c-s&&0<=h-u)return Qn.subVectors(r,i),g=(c-s)/(c-s+(h-u)),t.copy(i).addScaledVector(Qn,g);var f=1/(d+p+l),m=p*f,g=l*f;return t.copy(n).addScaledVector(Zn,m).addScaledVector(Jn,g)},equals:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}});var ni={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},ii={h:0,s:0,l:0},ri={h:0,s:0,l:0};function ai(e,t,n){return void 0===t&&void 0===n?this.set(e):this.setRGB(e,t,n)}function oi(e,t,n){return n<0&&(n+=1),1<n&&--n,n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}function si(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function ci(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}function li(e,t,n,i,r,a){this.a=e,this.b=t,this.c=n,this.normal=i&&i.isVector3?i:new Dt,this.vertexNormals=Array.isArray(i)?i:[],this.color=r&&r.isColor?r:new ai,this.vertexColors=Array.isArray(r)?r:[],this.materialIndex=void 0!==a?a:0}Object.assign(ai.prototype,{isColor:!0,r:1,g:1,b:1,set:function(e){return e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this},setScalar:function(e){return this.r=e,this.g=e,this.b=e,this},setHex:function(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,this},setRGB:function(e,t,n){return this.r=e,this.g=t,this.b=n,this},setHSL:function(e,t,n){var i,r;return e=Lt.euclideanModulo(e,1),t=Lt.clamp(t,0,1),n=Lt.clamp(n,0,1),0===t?this.r=this.g=this.b=n:(r=2*n-(i=n<=.5?n*(1+t):n+t-n*t),this.r=oi(r,i,e+1/3),this.g=oi(r,i,e),this.b=oi(r,i,e-1/3)),this},setStyle:function(t){function e(e){void 0!==e&&parseFloat(e)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}var n;if(n=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(t)){var i,r=n[1],a=n[2];switch(r){case"rgb":case"rgba":if(i=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a))return this.r=Math.min(255,parseInt(i[1],10))/255,this.g=Math.min(255,parseInt(i[2],10))/255,this.b=Math.min(255,parseInt(i[3],10))/255,e(i[5]),this;if(i=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a))return this.r=Math.min(100,parseInt(i[1],10))/100,this.g=Math.min(100,parseInt(i[2],10))/100,this.b=Math.min(100,parseInt(i[3],10))/100,e(i[5]),this;break;case"hsl":case"hsla":if(i=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a)){var o=parseFloat(i[1])/360,s=parseInt(i[2],10)/100,c=parseInt(i[3],10)/100;return e(i[5]),this.setHSL(o,s,c)}}}else if(n=/^\#([A-Fa-f0-9]+)$/.exec(t)){var l=n[1],h=l.length;if(3===h)return this.r=parseInt(l.charAt(0)+l.charAt(0),16)/255,this.g=parseInt(l.charAt(1)+l.charAt(1),16)/255,this.b=parseInt(l.charAt(2)+l.charAt(2),16)/255,this;if(6===h)return this.r=parseInt(l.charAt(0)+l.charAt(1),16)/255,this.g=parseInt(l.charAt(2)+l.charAt(3),16)/255,this.b=parseInt(l.charAt(4)+l.charAt(5),16)/255,this}return t&&0<t.length?this.setColorName(t):this},setColorName:function(e){var t=ni[e];return void 0!==t?this.setHex(t):console.warn("THREE.Color: Unknown color "+e),this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this},copyGammaToLinear:function(e,t){return void 0===t&&(t=2),this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this},copyLinearToGamma:function(e,t){void 0===t&&(t=2);var n=0<t?1/t:1;return this.r=Math.pow(e.r,n),this.g=Math.pow(e.g,n),this.b=Math.pow(e.b,n),this},convertGammaToLinear:function(e){return this.copyGammaToLinear(this,e),this},convertLinearToGamma:function(e){return this.copyLinearToGamma(this,e),this},copySRGBToLinear:function(e){return this.r=si(e.r),this.g=si(e.g),this.b=si(e.b),this},copyLinearToSRGB:function(e){return this.r=ci(e.r),this.g=ci(e.g),this.b=ci(e.b),this},convertSRGBToLinear:function(){return this.copySRGBToLinear(this),this},convertLinearToSRGB:function(){return this.copyLinearToSRGB(this),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(e){void 0===e&&(console.warn("THREE.Color: .getHSL() target is now required"),e={h:0,s:0,l:0});var t,n=this.r,i=this.g,r=this.b,a=Math.max(n,i,r),o=Math.min(n,i,r),s=(o+a)/2;if(o===a)l=t=0;else{var c=a-o,l=s<=.5?c/(a+o):c/(2-a-o);switch(a){case n:t=(i-r)/c+(i<r?6:0);break;case i:t=(r-n)/c+2;break;case r:t=(n-i)/c+4}t/=6}return e.h=t,e.s=l,e.l=s,e},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(e,t,n){return this.getHSL(ii),ii.h+=e,ii.s+=t,ii.l+=n,this.setHSL(ii.h,ii.s,ii.l),this},add:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this},addColors:function(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this},addScalar:function(e){return this.r+=e,this.g+=e,this.b+=e,this},sub:function(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this},multiply:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this},multiplyScalar:function(e){return this.r*=e,this.g*=e,this.b*=e,this},lerp:function(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this},lerpHSL:function(e,t){this.getHSL(ii),e.getHSL(ri);var n=Lt.lerp(ii.h,ri.h,t),i=Lt.lerp(ii.s,ri.s,t),r=Lt.lerp(ii.l,ri.l,t);return this.setHSL(n,i,r),this},equals:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b},fromArray:function(e,t){return void 0===t&&(t=0),this.r=e[t],this.g=e[t+1],this.b=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e},toJSON:function(){return this.getHex()}}),ai.NAMES=ni,Object.assign(li.prototype,{clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.a=e.a,this.b=e.b,this.c=e.c,this.normal.copy(e.normal),this.color.copy(e.color),this.materialIndex=e.materialIndex;for(var t=0,n=e.vertexNormals.length;t<n;t++)this.vertexNormals[t]=e.vertexNormals[t].clone();for(t=0,n=e.vertexColors.length;t<n;t++)this.vertexColors[t]=e.vertexColors[t].clone();return this}});var hi=0;function ui(){Object.defineProperty(this,"id",{value:hi++}),this.uuid=Lt.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.blending=$,this.side=O,this.flatShading=!1,this.vertexTangents=!1,this.vertexColors=o,this.opacity=1,this.transparent=!1,this.blendSrc=de,this.blendDst=fe,this.blendEquation=re,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=Se,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=_t,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=wt,this.stencilZFail=wt,this.stencilZPass=wt,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.needsUpdate=!0}function pi(e){ui.call(this),this.type="MeshBasicMaterial",this.color=new ai(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=q,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.setValues(e)}function di(e,t,n){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=!0===n,this.usage=Mt,this.updateRange={offset:0,count:-1},this.version=0}function fi(e,t,n){di.call(this,new Int8Array(e),t,n)}function mi(e,t,n){di.call(this,new Uint8Array(e),t,n)}function gi(e,t,n){di.call(this,new Uint8ClampedArray(e),t,n)}function vi(e,t,n){di.call(this,new Int16Array(e),t,n)}function yi(e,t,n){di.call(this,new Uint16Array(e),t,n)}function xi(e,t,n){di.call(this,new Int32Array(e),t,n)}function bi(e,t,n){di.call(this,new Uint32Array(e),t,n)}function wi(e,t,n){di.call(this,new Float32Array(e),t,n)}function _i(e,t,n){di.call(this,new Float64Array(e),t,n)}function Mi(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}function Si(e){if(0===e.length)return-1/0;for(var t=e[0],n=1,i=e.length;n<i;++n)e[n]>t&&(t=e[n]);return t}ui.prototype=Object.assign(Object.create(Tt.prototype),{constructor:ui,isMaterial:!0,onBeforeCompile:function(){},setValues:function(e){if(void 0!==e)for(var t in e){var n,i=e[t];void 0!==i?"shading"!==t?void 0!==(n=this[t])?n&&n.isColor?n.set(i):n&&n.isVector3&&i&&i.isVector3?n.copy(i):this[t]=i:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material."):(console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===i):console.warn("THREE.Material: '"+t+"' parameter is undefined.")}},toJSON:function(e){var t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});var n,i,r={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function a(e){var t,n=[];for(t in e){var i=e[t];delete i.metadata,n.push(i)}return n}return r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),void 0!==this.roughness&&(r.roughness=this.roughness),void 0!==this.metalness&&(r.metalness=this.metalness),this.sheen&&this.sheen.isColor&&(r.sheen=this.sheen.getHex()),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),void 0!==this.shininess&&(r.shininess=this.shininess),void 0!==this.clearcoat&&(r.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,r.reflectivity=this.reflectivity,r.refractionRatio=this.refractionRatio,void 0!==this.combine&&(r.combine=this.combine),void 0!==this.envMapIntensity&&(r.envMapIntensity=this.envMapIntensity)),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.size&&(r.size=this.size),void 0!==this.sizeAttenuation&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==$&&(r.blending=this.blending),!0===this.flatShading&&(r.flatShading=this.flatShading),this.side!==O&&(r.side=this.side),this.vertexColors!==o&&(r.vertexColors=this.vertexColors),this.opacity<1&&(r.opacity=this.opacity),!0===this.transparent&&(r.transparent=this.transparent),r.depthFunc=this.depthFunc,r.depthTest=this.depthTest,r.depthWrite=this.depthWrite,r.stencilWrite=this.stencilWrite,r.stencilWriteMask=this.stencilWriteMask,r.stencilFunc=this.stencilFunc,r.stencilRef=this.stencilRef,r.stencilFuncMask=this.stencilFuncMask,r.stencilFail=this.stencilFail,r.stencilZFail=this.stencilZFail,r.stencilZPass=this.stencilZPass,this.rotation&&0!==this.rotation&&(r.rotation=this.rotation),!0===this.polygonOffset&&(r.polygonOffset=!0),0!==this.polygonOffsetFactor&&(r.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&1!==this.linewidth&&(r.linewidth=this.linewidth),void 0!==this.dashSize&&(r.dashSize=this.dashSize),void 0!==this.gapSize&&(r.gapSize=this.gapSize),void 0!==this.scale&&(r.scale=this.scale),!0===this.dithering&&(r.dithering=!0),0<this.alphaTest&&(r.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(r.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(r.wireframe=this.wireframe),1<this.wireframeLinewidth&&(r.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(r.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(r.wireframeLinejoin=this.wireframeLinejoin),!0===this.morphTargets&&(r.morphTargets=!0),!0===this.morphNormals&&(r.morphNormals=!0),!0===this.skinning&&(r.skinning=!0),!1===this.visible&&(r.visible=!1),!1===this.toneMapped&&(r.toneMapped=!1),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),t&&(n=a(e.textures),i=a(e.images),0<n.length&&(r.textures=n),0<i.length&&(r.images=i)),r},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.name=e.name,this.fog=e.fog,this.blending=e.blending,this.side=e.side,this.flatShading=e.flatShading,this.vertexTangents=e.vertexTangents,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;var t=e.clippingPlanes,n=null;if(null!==t)for(var i=t.length,n=new Array(i),r=0;r!==i;++r)n[r]=t[r].clone();return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),((pi.prototype=Object.create(ui.prototype)).constructor=pi).prototype.isMeshBasicMaterial=!0,pi.prototype.copy=function(e){return ui.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this},Object.defineProperty(di.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(di.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setUsage:function(e){return this.usage=e,this},copy:function(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this},copyAt:function(e,t,n){e*=this.itemSize,n*=t.itemSize;for(var i=0,r=this.itemSize;i<r;i++)this.array[e+i]=t.array[n+i];return this},copyArray:function(e){return this.array.set(e),this},copyColorsArray:function(e){for(var t=this.array,n=0,i=0,r=e.length;i<r;i++){var a=e[i];void 0===a&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",i),a=new ai),t[n++]=a.r,t[n++]=a.g,t[n++]=a.b}return this},copyVector2sArray:function(e){for(var t=this.array,n=0,i=0,r=e.length;i<r;i++){var a=e[i];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",i),a=new Rt),t[n++]=a.x,t[n++]=a.y}return this},copyVector3sArray:function(e){for(var t=this.array,n=0,i=0,r=e.length;i<r;i++){var a=e[i];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",i),a=new Dt),t[n++]=a.x,t[n++]=a.y,t[n++]=a.z}return this},copyVector4sArray:function(e){for(var t=this.array,n=0,i=0,r=e.length;i<r;i++){var a=e[i];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",i),a=new Gt),t[n++]=a.x,t[n++]=a.y,t[n++]=a.z,t[n++]=a.w}return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},getX:function(e){return this.array[e*this.itemSize]},setX:function(e,t){return this.array[e*this.itemSize]=t,this},getY:function(e){return this.array[e*this.itemSize+1]},setY:function(e,t){return this.array[e*this.itemSize+1]=t,this},getZ:function(e){return this.array[e*this.itemSize+2]},setZ:function(e,t){return this.array[e*this.itemSize+2]=t,this},getW:function(e){return this.array[e*this.itemSize+3]},setW:function(e,t){return this.array[e*this.itemSize+3]=t,this},setXY:function(e,t,n){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this},setXYZ:function(e,t,n,i){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this},setXYZW:function(e,t,n,i,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this.array[e+3]=r,this},onUpload:function(e){return this.onUploadCallback=e,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)},toJSON:function(){return{itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized}}}),(fi.prototype=Object.create(di.prototype)).constructor=fi,(mi.prototype=Object.create(di.prototype)).constructor=mi,(gi.prototype=Object.create(di.prototype)).constructor=gi,(vi.prototype=Object.create(di.prototype)).constructor=vi,(yi.prototype=Object.create(di.prototype)).constructor=yi,(xi.prototype=Object.create(di.prototype)).constructor=xi,(bi.prototype=Object.create(di.prototype)).constructor=bi,(wi.prototype=Object.create(di.prototype)).constructor=wi,(_i.prototype=Object.create(di.prototype)).constructor=_i,Object.assign(Mi.prototype,{computeGroups:function(e){for(var t,n=[],i=void 0,r=e.faces,a=0;a<r.length;a++){var o=r[a];o.materialIndex!==i&&(i=o.materialIndex,void 0!==t&&(t.count=3*a-t.start,n.push(t)),t={start:3*a,materialIndex:i})}void 0!==t&&(t.count=3*a-t.start,n.push(t)),this.groups=n},fromGeometry:function(e){var t,n=e.faces,i=e.vertices,r=e.faceVertexUvs,a=r[0]&&0<r[0].length,o=r[1]&&0<r[1].length,s=e.morphTargets,c=s.length;if(0<c){t=[];for(var l=0;l<c;l++)t[l]={name:s[l].name,data:[]};this.morphTargets.position=t}var h,u=e.morphNormals,p=u.length;if(0<p){for(h=[],l=0;l<p;l++)h[l]={name:u[l].name,data:[]};this.morphTargets.normal=h}var d=e.skinIndices,f=e.skinWeights,m=d.length===i.length,g=f.length===i.length;for(0<i.length&&0===n.length&&console.error("THREE.DirectGeometry: Faceless geometries are not supported."),l=0;l<n.length;l++){var v=n[l];this.vertices.push(i[v.a],i[v.b],i[v.c]);var y,x=v.vertexNormals;3===x.length?this.normals.push(x[0],x[1],x[2]):(y=v.normal,this.normals.push(y,y,y));var b,w,_=v.vertexColors;3===_.length?this.colors.push(_[0],_[1],_[2]):(b=v.color,this.colors.push(b,b,b)),!0===a&&(void 0!==(w=r[0][l])?this.uvs.push(w[0],w[1],w[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",l),this.uvs.push(new Rt,new Rt,new Rt))),!0===o&&(void 0!==(w=r[1][l])?this.uvs2.push(w[0],w[1],w[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",l),this.uvs2.push(new Rt,new Rt,new Rt)));for(var M=0;M<c;M++){var S=s[M].vertices;t[M].data.push(S[v.a],S[v.b],S[v.c])}for(M=0;M<p;M++){var T=u[M].vertexNormals[l];h[M].data.push(T.a,T.b,T.c)}m&&this.skinIndices.push(d[v.a],d[v.b],d[v.c]),g&&this.skinWeights.push(f[v.a],f[v.b],f[v.c])}return this.computeGroups(e),this.verticesNeedUpdate=e.verticesNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),this}});var Ti=1,Ei=new Jt,Ai=new mn,Li=new Dt,Ri=new Rn,Pi=new Rn,Ci=new Dt;function Oi(){Object.defineProperty(this,"id",{value:Ti+=2}),this.uuid=Lt.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}Oi.prototype=Object.assign(Object.create(Tt.prototype),{constructor:Oi,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(e){Array.isArray(e)?this.index=new(65535<Si(e)?bi:yi)(e,1):this.index=e},getAttribute:function(e){return this.attributes[e]},setAttribute:function(e,t){return this.attributes[e]=t,this},deleteAttribute:function(e){return delete this.attributes[e],this},addGroup:function(e,t,n){this.groups.push({start:e,count:t,materialIndex:void 0!==n?n:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(e,t){this.drawRange.start=e,this.drawRange.count=t},applyMatrix:function(e){var t=this.attributes.position;void 0!==t&&(e.applyToBufferAttribute(t),t.needsUpdate=!0);var n=this.attributes.normal;void 0!==n&&((new zt).getNormalMatrix(e).applyToBufferAttribute(n),n.needsUpdate=!0);var i=this.attributes.tangent;return void 0!==i&&((new zt).getNormalMatrix(e).applyToBufferAttribute(i),i.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(e){return Ei.makeRotationX(e),this.applyMatrix(Ei),this},rotateY:function(e){return Ei.makeRotationY(e),this.applyMatrix(Ei),this},rotateZ:function(e){return Ei.makeRotationZ(e),this.applyMatrix(Ei),this},translate:function(e,t,n){return Ei.makeTranslation(e,t,n),this.applyMatrix(Ei),this},scale:function(e,t,n){return Ei.makeScale(e,t,n),this.applyMatrix(Ei),this},lookAt:function(e){return Ai.lookAt(e),Ai.updateMatrix(),this.applyMatrix(Ai.matrix),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(Li).negate(),this.translate(Li.x,Li.y,Li.z),this},setFromObject:function(e){var t,n,i,r=e.geometry;return e.isPoints||e.isLine?(t=new wi(3*r.vertices.length,3),n=new wi(3*r.colors.length,3),this.setAttribute("position",t.copyVector3sArray(r.vertices)),this.setAttribute("color",n.copyColorsArray(r.colors)),r.lineDistances&&r.lineDistances.length===r.vertices.length&&(i=new wi(r.lineDistances.length,1),this.setAttribute("lineDistance",i.copyArray(r.lineDistances))),null!==r.boundingSphere&&(this.boundingSphere=r.boundingSphere.clone()),null!==r.boundingBox&&(this.boundingBox=r.boundingBox.clone())):e.isMesh&&r&&r.isGeometry&&this.fromGeometry(r),this},setFromPoints:function(e){for(var t=[],n=0,i=e.length;n<i;n++){var r=e[n];t.push(r.x,r.y,r.z||0)}return this.setAttribute("position",new wi(t,3)),this},updateFromObject:function(e){var t,n=e.geometry;if(e.isMesh){var i=n.__directGeometry;if(!0===n.elementsNeedUpdate&&(i=void 0,n.elementsNeedUpdate=!1),void 0===i)return this.fromGeometry(n);i.verticesNeedUpdate=n.verticesNeedUpdate,i.normalsNeedUpdate=n.normalsNeedUpdate,i.colorsNeedUpdate=n.colorsNeedUpdate,i.uvsNeedUpdate=n.uvsNeedUpdate,i.groupsNeedUpdate=n.groupsNeedUpdate,n.verticesNeedUpdate=!1,n.normalsNeedUpdate=!1,n.colorsNeedUpdate=!1,n.uvsNeedUpdate=!1,n.groupsNeedUpdate=!1,n=i}return!0===n.verticesNeedUpdate&&(void 0!==(t=this.attributes.position)&&(t.copyVector3sArray(n.vertices),t.needsUpdate=!0),n.verticesNeedUpdate=!1),!0===n.normalsNeedUpdate&&(void 0!==(t=this.attributes.normal)&&(t.copyVector3sArray(n.normals),t.needsUpdate=!0),n.normalsNeedUpdate=!1),!0===n.colorsNeedUpdate&&(void 0!==(t=this.attributes.color)&&(t.copyColorsArray(n.colors),t.needsUpdate=!0),n.colorsNeedUpdate=!1),n.uvsNeedUpdate&&(void 0!==(t=this.attributes.uv)&&(t.copyVector2sArray(n.uvs),t.needsUpdate=!0),n.uvsNeedUpdate=!1),n.lineDistancesNeedUpdate&&(void 0!==(t=this.attributes.lineDistance)&&(t.copyArray(n.lineDistances),t.needsUpdate=!0),n.lineDistancesNeedUpdate=!1),n.groupsNeedUpdate&&(n.computeGroups(e.geometry),this.groups=n.groups,n.groupsNeedUpdate=!1),this},fromGeometry:function(e){return e.__directGeometry=(new Mi).fromGeometry(e),this.fromDirectGeometry(e.__directGeometry)},fromDirectGeometry:function(e){var t,n,i,r,a,o,s,c=new Float32Array(3*e.vertices.length);for(a in this.setAttribute("position",new di(c,3).copyVector3sArray(e.vertices)),0<e.normals.length&&(t=new Float32Array(3*e.normals.length),this.setAttribute("normal",new di(t,3).copyVector3sArray(e.normals))),0<e.colors.length&&(n=new Float32Array(3*e.colors.length),this.setAttribute("color",new di(n,3).copyColorsArray(e.colors))),0<e.uvs.length&&(i=new Float32Array(2*e.uvs.length),this.setAttribute("uv",new di(i,2).copyVector2sArray(e.uvs))),0<e.uvs2.length&&(r=new Float32Array(2*e.uvs2.length),this.setAttribute("uv2",new di(r,2).copyVector2sArray(e.uvs2))),this.groups=e.groups,e.morphTargets){for(var l=[],h=e.morphTargets[a],u=0,p=h.length;u<p;u++){var d=h[u],f=new wi(3*d.data.length,3);f.name=d.name,l.push(f.copyVector3sArray(d.data))}this.morphAttributes[a]=l}return 0<e.skinIndices.length&&(o=new wi(4*e.skinIndices.length,4),this.setAttribute("skinIndex",o.copyVector4sArray(e.skinIndices))),0<e.skinWeights.length&&(s=new wi(4*e.skinWeights.length,4),this.setAttribute("skinWeight",s.copyVector4sArray(e.skinWeights))),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new Rn);var e=this.attributes.position,t=this.morphAttributes.position;if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(var n=0,i=t.length;n<i;n++){var r=t[n];Ri.setFromBufferAttribute(r),this.boundingBox.expandByPoint(Ri.min),this.boundingBox.expandByPoint(Ri.max)}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new On);var e=this.attributes.position,t=this.morphAttributes.position;if(e){var n=this.boundingSphere.center;if(Ri.setFromBufferAttribute(e),t)for(var i=0,r=t.length;i<r;i++){var a=t[i];Pi.setFromBufferAttribute(a),Ri.expandByPoint(Pi.min),Ri.expandByPoint(Pi.max)}Ri.getCenter(n);for(var o=0,i=0,r=e.count;i<r;i++)Ci.fromBufferAttribute(e,i),o=Math.max(o,n.distanceToSquared(Ci));if(t)for(i=0,r=t.length;i<r;i++)for(var s=0,c=(a=t[i]).count;s<c;s++)Ci.fromBufferAttribute(a,s),o=Math.max(o,n.distanceToSquared(Ci));this.boundingSphere.radius=Math.sqrt(o),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}},computeFaceNormals:function(){},computeVertexNormals:function(){var e=this.index,t=this.attributes;if(t.position){var n=t.position.array;if(void 0===t.normal)this.setAttribute("normal",new di(new Float32Array(n.length),3));else for(var i=t.normal.array,r=0,a=i.length;r<a;r++)i[r]=0;var o,s,c,l=t.normal.array,h=new Dt,u=new Dt,p=new Dt,d=new Dt,f=new Dt;if(e)for(var m=e.array,r=0,a=e.count;r<a;r+=3)o=3*m[r+0],s=3*m[r+1],c=3*m[r+2],h.fromArray(n,o),u.fromArray(n,s),p.fromArray(n,c),d.subVectors(p,u),f.subVectors(h,u),d.cross(f),l[o]+=d.x,l[1+o]+=d.y,l[2+o]+=d.z,l[s]+=d.x,l[1+s]+=d.y,l[2+s]+=d.z,l[c]+=d.x,l[1+c]+=d.y,l[2+c]+=d.z;else for(r=0,a=n.length;r<a;r+=9)h.fromArray(n,r),u.fromArray(n,r+3),p.fromArray(n,r+6),d.subVectors(p,u),f.subVectors(h,u),d.cross(f),l[r]=d.x,l[r+1]=d.y,l[r+2]=d.z,l[r+3]=d.x,l[r+4]=d.y,l[r+5]=d.z,l[r+6]=d.x,l[r+7]=d.y,l[r+8]=d.z;this.normalizeNormals(),t.normal.needsUpdate=!0}},merge:function(e,t){if(e&&e.isBufferGeometry){void 0===t&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var n,i=this.attributes;for(n in i)if(void 0!==e.attributes[n])for(var r=i[n].array,a=e.attributes[n],o=a.array,s=a.itemSize*t,c=Math.min(o.length,r.length-s),l=0,h=s;l<c;l++,h++)r[h]=o[l];return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e)},normalizeNormals:function(){for(var e=this.attributes.normal,t=0,n=e.count;t<n;t++)Ci.x=e.getX(t),Ci.y=e.getY(t),Ci.z=e.getZ(t),Ci.normalize(),e.setXYZ(t,Ci.x,Ci.y,Ci.z)},toNonIndexed:function(){function e(e,t){for(var n=e.array,i=e.itemSize,r=new n.constructor(t.length*i),a=0,o=0,s=0,c=t.length;s<c;s++){a=t[s]*i;for(var l=0;l<i;l++)r[o++]=n[a++]}return new di(r,i)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var t,n=new Oi,i=this.index.array,r=this.attributes;for(t in r){var a=e(r[t],i);n.setAttribute(t,a)}var o=this.morphAttributes;for(t in o){for(var s=[],c=o[t],l=0,h=c.length;l<h;l++)a=e(c[l],i),s.push(a);n.morphAttributes[t]=s}for(var u=this.groups,l=0,p=u.length;l<p;l++){var d=u[l];n.addGroup(d.start,d.count,d.materialIndex)}return n},toJSON:function(){var e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),0<Object.keys(this.userData).length&&(e.userData=this.userData),void 0!==this.parameters){var t=this.parameters;for(a in t)void 0!==t[a]&&(e[a]=t[a]);return e}e.data={attributes:{}};var n=this.index;null!==n&&(e.data.index={type:n.array.constructor.name,array:Array.prototype.slice.call(n.array)});var i=this.attributes;for(a in i){var r=(p=i[a]).toJSON();""!==p.name&&(r.name=p.name),e.data.attributes[a]=r}var a,o={},s=!1;for(a in this.morphAttributes){for(var c=this.morphAttributes[a],l=[],h=0,u=c.length;h<u;h++){var p,r=(p=c[h]).toJSON();""!==p.name&&(r.name=p.name),l.push(r)}0<l.length&&(o[a]=l,s=!0)}s&&(e.data.morphAttributes=o);var d=this.groups;0<d.length&&(e.data.groups=JSON.parse(JSON.stringify(d)));var f=this.boundingSphere;return null!==f&&(e.data.boundingSphere={center:f.center.toArray(),radius:f.radius}),e},clone:function(){return(new Oi).copy(this)},copy:function(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;var t=e.index;null!==t&&this.setIndex(t.clone());var i,n=e.attributes;for(i in n){var r=n[i];this.setAttribute(i,r.clone())}var a=e.morphAttributes;for(i in a){for(var o=[],s=a[i],c=0,l=s.length;c<l;c++)o.push(s[c].clone());this.morphAttributes[i]=o}for(var h=e.groups,c=0,l=h.length;c<l;c++){var u=h[c];this.addGroup(u.start,u.count,u.materialIndex)}var p=e.boundingBox;null!==p&&(this.boundingBox=p.clone());var d=e.boundingSphere;return null!==d&&(this.boundingSphere=d.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});var Di=new Jt,Ii=new Gn,Ni=new On,zi=new Dt,Bi=new Dt,Ui=new Dt,Fi=new Dt,Gi=new Dt,Hi=new Dt,Vi=new Dt,ji=new Dt,ki=new Dt,Wi=new Rt,qi=new Rt,Xi=new Rt,Yi=new Dt,Zi=new Dt;function Ji(e,t){mn.call(this),this.type="Mesh",this.geometry=void 0!==e?e:new Oi,this.material=void 0!==t?t:new pi({color:16777215*Math.random()}),this.drawMode=lt,this.updateMorphTargets()}function Qi(e,t,n,i,r,a,o,s){if(null===(t.side===_e?i.intersectTriangle(o,a,r,!0,s):i.intersectTriangle(r,a,o,t.side!==Q,s)))return null;Zi.copy(s),Zi.applyMatrix4(e.matrixWorld);var l=n.ray.origin.distanceTo(Zi);return l<n.near||l>n.far?null:{distance:l,point:Zi.clone(),object:e}}function Ki(e,t,n,i,r,a,o,s,c,l,h){zi.fromBufferAttribute(r,c),Bi.fromBufferAttribute(r,l),Ui.fromBufferAttribute(r,h);var u=e.morphTargetInfluences;if(t.morphTargets&&a&&u){Vi.set(0,0,0),ji.set(0,0,0),ki.set(0,0,0);for(var p=0,d=a.length;p<d;p++){var f=u[p],m=a[p];0!==f&&(Fi.fromBufferAttribute(m,c),Gi.fromBufferAttribute(m,l),Hi.fromBufferAttribute(m,h),Vi.addScaledVector(Fi.sub(zi),f),ji.addScaledVector(Gi.sub(Bi),f),ki.addScaledVector(Hi.sub(Ui),f))}zi.add(Vi),Bi.add(ji),Ui.add(ki)}var g,v=Qi(e,t,n,i,zi,Bi,Ui,Yi);return v&&(o&&(Wi.fromBufferAttribute(o,c),qi.fromBufferAttribute(o,l),Xi.fromBufferAttribute(o,h),v.uv=ti.getUV(Yi,zi,Bi,Ui,Wi,qi,Xi,new Rt)),s&&(Wi.fromBufferAttribute(s,c),qi.fromBufferAttribute(s,l),Xi.fromBufferAttribute(s,h),v.uv2=ti.getUV(Yi,zi,Bi,Ui,Wi,qi,Xi,new Rt)),g=new li(c,l,h),ti.getNormal(zi,Bi,Ui,g.normal),v.face=g),v}Ji.prototype=Object.assign(Object.create(mn.prototype),{constructor:Ji,isMesh:!0,setDrawMode:function(e){this.drawMode=e},copy:function(e){return mn.prototype.copy.call(this,e),this.drawMode=e.drawMode,void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this},updateMorphTargets:function(){var e,t,n,i=this.geometry;if(i.isBufferGeometry){var r=i.morphAttributes,a=Object.keys(r);if(0<a.length){var o=r[a[0]];if(void 0!==o)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},e=0,t=o.length;e<t;e++)n=o[e].name||String(e),this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=e}}else{var s=i.morphTargets;void 0!==s&&0<s.length&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}},raycast:function(e,t){var n=this.geometry,i=this.material,r=this.matrixWorld;if(void 0!==i&&(null===n.boundingSphere&&n.computeBoundingSphere(),Ni.copy(n.boundingSphere),Ni.applyMatrix4(r),!1!==e.ray.intersectsSphere(Ni)&&(Di.getInverse(r),Ii.copy(e.ray).applyMatrix4(Di),null===n.boundingBox||!1!==Ii.intersectsBox(n.boundingBox))))if(this.drawMode===lt){if(n.isBufferGeometry){var a,o,s,c,l,h,u,p,d,f=n.index,m=n.attributes.position,g=n.morphAttributes.position,v=n.attributes.uv,y=n.attributes.uv2,x=n.groups,b=n.drawRange;if(null!==f)if(Array.isArray(i))for(c=0,h=x.length;c<h;c++)for(d=i[(p=x[c]).materialIndex],l=Math.max(p.start,b.start),u=Math.min(p.start+p.count,b.start+b.count);l<u;l+=3)a=f.getX(l),o=f.getX(l+1),s=f.getX(l+2),(O=Ki(this,d,e,Ii,m,g,v,y,a,o,s))&&(O.faceIndex=Math.floor(l/3),O.face.materialIndex=p.materialIndex,t.push(O));else for(c=Math.max(0,b.start),h=Math.min(f.count,b.start+b.count);c<h;c+=3)a=f.getX(c),o=f.getX(c+1),s=f.getX(c+2),(O=Ki(this,i,e,Ii,m,g,v,y,a,o,s))&&(O.faceIndex=Math.floor(c/3),t.push(O));else if(void 0!==m)if(Array.isArray(i))for(c=0,h=x.length;c<h;c++)for(d=i[(p=x[c]).materialIndex],l=Math.max(p.start,b.start),u=Math.min(p.start+p.count,b.start+b.count);l<u;l+=3)(O=Ki(this,d,e,Ii,m,g,v,y,a=l,o=l+1,s=l+2))&&(O.faceIndex=Math.floor(l/3),O.face.materialIndex=p.materialIndex,t.push(O));else for(c=Math.max(0,b.start),h=Math.min(m.count,b.start+b.count);c<h;c+=3)(O=Ki(this,i,e,Ii,m,g,v,y,a=c,o=c+1,s=c+2))&&(O.faceIndex=Math.floor(c/3),t.push(O))}else if(n.isGeometry){var w,_=Array.isArray(i),M=n.vertices,S=n.faces,T=n.faceVertexUvs[0];0<T.length&&(w=T);for(var E=0,A=S.length;E<A;E++){var L,R,P,C,O,D=S[E],I=_?i[D.materialIndex]:i;void 0!==I&&(R=M[D.a],P=M[D.b],C=M[D.c],(O=Qi(this,I,e,Ii,R,P,C,Yi))&&(w&&w[E]&&(L=w[E],Wi.copy(L[0]),qi.copy(L[1]),Xi.copy(L[2]),O.uv=ti.getUV(Yi,R,P,C,Wi,qi,Xi,new Rt)),O.face=D,O.faceIndex=E,t.push(O)))}}}else console.warn("THREE.Mesh: TriangleStripDrawMode and TriangleFanDrawMode are not supported by .raycast().")},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});var $i=0,er=new Jt,tr=new mn,nr=new Dt;function ir(){Object.defineProperty(this,"id",{value:$i+=2}),this.uuid=Lt.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}ir.prototype=Object.assign(Object.create(Tt.prototype),{constructor:ir,isGeometry:!0,applyMatrix:function(e){for(var t=(new zt).getNormalMatrix(e),n=0,i=this.vertices.length;n<i;n++)this.vertices[n].applyMatrix4(e);for(n=0,i=this.faces.length;n<i;n++){var r=this.faces[n];r.normal.applyMatrix3(t).normalize();for(var a=0,o=r.vertexNormals.length;a<o;a++)r.vertexNormals[a].applyMatrix3(t).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(e){return er.makeRotationX(e),this.applyMatrix(er),this},rotateY:function(e){return er.makeRotationY(e),this.applyMatrix(er),this},rotateZ:function(e){return er.makeRotationZ(e),this.applyMatrix(er),this},translate:function(e,t,n){return er.makeTranslation(e,t,n),this.applyMatrix(er),this},scale:function(e,t,n){return er.makeScale(e,t,n),this.applyMatrix(er),this},lookAt:function(e){return tr.lookAt(e),tr.updateMatrix(),this.applyMatrix(tr.matrix),this},fromBufferGeometry:function(e){var o=this,t=null!==e.index?e.index.array:void 0,n=e.attributes;if(void 0===n.position)return console.error("THREE.Geometry.fromBufferGeometry(): Position attribute required for conversion."),this;var i=n.position.array,s=void 0!==n.normal?n.normal.array:void 0,c=void 0!==n.color?n.color.array:void 0,l=void 0!==n.uv?n.uv.array:void 0,h=void 0!==n.uv2?n.uv2.array:void 0;void 0!==h&&(this.faceVertexUvs[1]=[]);for(var r=0;r<i.length;r+=3)o.vertices.push((new Dt).fromArray(i,r)),void 0!==c&&o.colors.push((new ai).fromArray(c,r));function a(e,t,n,i){var r=void 0===c?[]:[o.colors[e].clone(),o.colors[t].clone(),o.colors[n].clone()],a=new li(e,t,n,void 0===s?[]:[(new Dt).fromArray(s,3*e),(new Dt).fromArray(s,3*t),(new Dt).fromArray(s,3*n)],r,i);o.faces.push(a),void 0!==l&&o.faceVertexUvs[0].push([(new Rt).fromArray(l,2*e),(new Rt).fromArray(l,2*t),(new Rt).fromArray(l,2*n)]),void 0!==h&&o.faceVertexUvs[1].push([(new Rt).fromArray(h,2*e),(new Rt).fromArray(h,2*t),(new Rt).fromArray(h,2*n)])}var u=e.groups;if(0<u.length)for(r=0;r<u.length;r++)for(var p=u[r],d=p.start,f=d,m=d+p.count;f<m;f+=3)void 0!==t?a(t[f],t[f+1],t[f+2],p.materialIndex):a(f,f+1,f+2,p.materialIndex);else if(void 0!==t)for(r=0;r<t.length;r+=3)a(t[r],t[r+1],t[r+2]);else for(r=0;r<i.length/3;r+=3)a(r,r+1,r+2);return this.computeFaceNormals(),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(nr).negate(),this.translate(nr.x,nr.y,nr.z),this},normalize:function(){this.computeBoundingSphere();var e=this.boundingSphere.center,t=this.boundingSphere.radius,n=0===t?1:1/t,i=new Jt;return i.set(n,0,0,-n*e.x,0,n,0,-n*e.y,0,0,n,-n*e.z,0,0,0,1),this.applyMatrix(i),this},computeFaceNormals:function(){for(var e=new Dt,t=new Dt,n=0,i=this.faces.length;n<i;n++){var r=this.faces[n],a=this.vertices[r.a],o=this.vertices[r.b],s=this.vertices[r.c];e.subVectors(s,o),t.subVectors(a,o),e.cross(t),e.normalize(),r.normal.copy(e)}},computeVertexNormals:function(e){var t,n,i,r;for(void 0===e&&(e=!0),r=new Array(this.vertices.length),t=0,n=this.vertices.length;t<n;t++)r[t]=new Dt;if(e)for(var a,o,s,c=new Dt,l=new Dt,h=0,u=this.faces.length;h<u;h++)i=this.faces[h],a=this.vertices[i.a],o=this.vertices[i.b],s=this.vertices[i.c],c.subVectors(s,o),l.subVectors(a,o),c.cross(l),r[i.a].add(c),r[i.b].add(c),r[i.c].add(c);else for(this.computeFaceNormals(),h=0,u=this.faces.length;h<u;h++)r[(i=this.faces[h]).a].add(i.normal),r[i.b].add(i.normal),r[i.c].add(i.normal);for(t=0,n=this.vertices.length;t<n;t++)r[t].normalize();for(h=0,u=this.faces.length;h<u;h++){var p=(i=this.faces[h]).vertexNormals;3===p.length?(p[0].copy(r[i.a]),p[1].copy(r[i.b]),p[2].copy(r[i.c])):(p[0]=r[i.a].clone(),p[1]=r[i.b].clone(),p[2]=r[i.c].clone())}0<this.faces.length&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var e,t,n;for(this.computeFaceNormals(),e=0,t=this.faces.length;e<t;e++){var i=(n=this.faces[e]).vertexNormals;3===i.length?(i[0].copy(n.normal),i[1].copy(n.normal),i[2].copy(n.normal)):(i[0]=n.normal.clone(),i[1]=n.normal.clone(),i[2]=n.normal.clone())}0<this.faces.length&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){for(var e,t,n,o=0,s=this.faces.length;o<s;o++)for((n=this.faces[o]).__originalFaceNormal?n.__originalFaceNormal.copy(n.normal):n.__originalFaceNormal=n.normal.clone(),n.__originalVertexNormals||(n.__originalVertexNormals=[]),e=0,t=n.vertexNormals.length;e<t;e++)n.__originalVertexNormals[e]?n.__originalVertexNormals[e].copy(n.vertexNormals[e]):n.__originalVertexNormals[e]=n.vertexNormals[e].clone();var i=new ir;for(i.faces=this.faces,e=0,t=this.morphTargets.length;e<t;e++){if(!this.morphNormals[e]){this.morphNormals[e]={},this.morphNormals[e].faceNormals=[],this.morphNormals[e].vertexNormals=[];for(var r=this.morphNormals[e].faceNormals,a=this.morphNormals[e].vertexNormals,o=0,s=this.faces.length;o<s;o++)c=new Dt,l={a:new Dt,b:new Dt,c:new Dt},r.push(c),a.push(l)}var c,l,h=this.morphNormals[e];for(i.vertices=this.morphTargets[e].vertices,i.computeFaceNormals(),i.computeVertexNormals(),o=0,s=this.faces.length;o<s;o++)n=this.faces[o],c=h.faceNormals[o],l=h.vertexNormals[o],c.copy(n.normal),l.a.copy(n.vertexNormals[0]),l.b.copy(n.vertexNormals[1]),l.c.copy(n.vertexNormals[2])}for(o=0,s=this.faces.length;o<s;o++)(n=this.faces[o]).normal=n.__originalFaceNormal,n.vertexNormals=n.__originalVertexNormals},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new Rn),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new On),this.boundingSphere.setFromPoints(this.vertices)},merge:function(e,t,n){if(e&&e.isGeometry){var i,r=this.vertices.length,a=this.vertices,o=e.vertices,s=this.faces,c=e.faces,l=this.colors,h=e.colors;void 0===n&&(n=0),void 0!==t&&(i=(new zt).getNormalMatrix(t));for(var u=0,p=o.length;u<p;u++){var d=o[u].clone();void 0!==t&&d.applyMatrix4(t),a.push(d)}for(u=0,p=h.length;u<p;u++)l.push(h[u].clone());for(u=0,p=c.length;u<p;u++){var f,m,g=c[u],v=g.vertexNormals,y=g.vertexColors,x=new li(g.a+r,g.b+r,g.c+r);x.normal.copy(g.normal),void 0!==i&&x.normal.applyMatrix3(i).normalize();for(var b=0,w=v.length;b<w;b++)f=v[b].clone(),void 0!==i&&f.applyMatrix3(i).normalize(),x.vertexNormals.push(f);for(x.color.copy(g.color),b=0,w=y.length;b<w;b++)m=y[b],x.vertexColors.push(m.clone());x.materialIndex=g.materialIndex+n,s.push(x)}for(u=0,p=e.faceVertexUvs.length;u<p;u++){var _=e.faceVertexUvs[u];for(void 0===this.faceVertexUvs[u]&&(this.faceVertexUvs[u]=[]),b=0,w=_.length;b<w;b++){for(var M=_[b],S=[],T=0,E=M.length;T<E;T++)S.push(M[T].clone());this.faceVertexUvs[u].push(S)}}}else console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",e)},mergeMesh:function(e){e&&e.isMesh?(e.matrixAutoUpdate&&e.updateMatrix(),this.merge(e.geometry,e.matrix)):console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",e)},mergeVertices:function(){for(var e,t,n,i,r,a,o={},s=[],c=[],l=Math.pow(10,4),h=0,u=this.vertices.length;h<u;h++)e=this.vertices[h],void 0===o[t=Math.round(e.x*l)+"_"+Math.round(e.y*l)+"_"+Math.round(e.z*l)]?(o[t]=h,s.push(this.vertices[h]),c[h]=s.length-1):c[h]=c[o[t]];for(var p=[],h=0,u=this.faces.length;h<u;h++){(n=this.faces[h]).a=c[n.a],n.b=c[n.b],n.c=c[n.c],i=[n.a,n.b,n.c];for(var d=0;d<3;d++)if(i[d]===i[(d+1)%3]){p.push(h);break}}for(h=p.length-1;0<=h;h--){var f=p[h];for(this.faces.splice(f,1),r=0,a=this.faceVertexUvs.length;r<a;r++)this.faceVertexUvs[r].splice(f,1)}var m=this.vertices.length-s.length;return this.vertices=s,m},setFromPoints:function(e){this.vertices=[];for(var t=0,n=e.length;t<n;t++){var i=e[t];this.vertices.push(new Dt(i.x,i.y,i.z||0))}return this},sortFacesByMaterialIndex:function(){for(var e=this.faces,t=e.length,n=0;n<t;n++)e[n]._id=n;e.sort(function(e,t){return e.materialIndex-t.materialIndex});var i,r,a=this.faceVertexUvs[0],o=this.faceVertexUvs[1];for(a&&a.length===t&&(i=[]),o&&o.length===t&&(r=[]),n=0;n<t;n++){var s=e[n]._id;i&&i.push(a[s]),r&&r.push(o[s])}i&&(this.faceVertexUvs[0]=i),r&&(this.faceVertexUvs[1]=r)},toJSON:function(){var e={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),void 0!==this.parameters){var t,n=this.parameters;for(t in n)void 0!==n[t]&&(e[t]=n[t]);return e}for(var i=[],r=0;r<this.vertices.length;r++){var a=this.vertices[r];i.push(a.x,a.y,a.z)}for(var o=[],s=[],c={},l=[],h={},u=[],p={},r=0;r<this.faces.length;r++){var d,f,m,v=this.faces[r],y=void 0!==this.faceVertexUvs[0][r],x=0<v.normal.length(),b=0<v.vertexNormals.length,w=1!==v.color.r||1!==v.color.g||1!==v.color.b,_=0<v.vertexColors.length,g=M(2,3,y);g=M(g,4,x),g=M(g,5,b),g=M(g,6,w),g=M(g,7,_),o.push(g),o.push(v.a,v.b,v.c),o.push(v.materialIndex),y&&(d=this.faceVertexUvs[0][r],o.push(E(d[0]),E(d[1]),E(d[2]))),x&&o.push(S(v.normal)),b&&(f=v.vertexNormals,o.push(S(f[0]),S(f[1]),S(f[2]))),w&&o.push(T(v.color)),_&&(m=v.vertexColors,o.push(T(m[0]),T(m[1]),T(m[2])))}function M(e,t,n){return n?e|1<<t:e&~(1<<t)}function S(e){var t=e.x.toString()+e.y.toString()+e.z.toString();return void 0!==c[t]||(c[t]=s.length/3,s.push(e.x,e.y,e.z)),c[t]}function T(e){var t=e.r.toString()+e.g.toString()+e.b.toString();return void 0!==h[t]||(h[t]=l.length,l.push(e.getHex())),h[t]}function E(e){var t=e.x.toString()+e.y.toString();return void 0!==p[t]||(p[t]=u.length/2,u.push(e.x,e.y)),p[t]}return e.data={},e.data.vertices=i,e.data.normals=s,0<l.length&&(e.data.colors=l),0<u.length&&(e.data.uvs=[u]),e.data.faces=o,e},clone:function(){return(new ir).copy(this)},copy:function(e){var t,n;this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;for(var i=e.vertices,r=0,a=i.length;r<a;r++)this.vertices.push(i[r].clone());for(var o=e.colors,r=0,a=o.length;r<a;r++)this.colors.push(o[r].clone());var s=e.faces;for(r=0,a=s.length;r<a;r++)this.faces.push(s[r].clone());for(r=0,a=e.faceVertexUvs.length;r<a;r++){var c=e.faceVertexUvs[r];for(void 0===this.faceVertexUvs[r]&&(this.faceVertexUvs[r]=[]),t=0,n=c.length;t<n;t++){for(var l=c[t],h=[],u=0,p=l.length;u<p;u++){var d=l[u];h.push(d.clone())}this.faceVertexUvs[r].push(h)}}var f=e.morphTargets;for(r=0,a=f.length;r<a;r++){var m={};if(m.name=f[r].name,void 0!==f[r].vertices)for(m.vertices=[],t=0,n=f[r].vertices.length;t<n;t++)m.vertices.push(f[r].vertices[t].clone());if(void 0!==f[r].normals)for(m.normals=[],t=0,n=f[r].normals.length;t<n;t++)m.normals.push(f[r].normals[t].clone());this.morphTargets.push(m)}var g=e.morphNormals;for(r=0,a=g.length;r<a;r++){var v={};if(void 0!==g[r].vertexNormals)for(v.vertexNormals=[],t=0,n=g[r].vertexNormals.length;t<n;t++){var y=g[r].vertexNormals[t],x={};x.a=y.a.clone(),x.b=y.b.clone(),x.c=y.c.clone(),v.vertexNormals.push(x)}if(void 0!==g[r].faceNormals)for(v.faceNormals=[],t=0,n=g[r].faceNormals.length;t<n;t++)v.faceNormals.push(g[r].faceNormals[t].clone());this.morphNormals.push(v)}var b=e.skinWeights;for(r=0,a=b.length;r<a;r++)this.skinWeights.push(b[r].clone());var w=e.skinIndices;for(r=0,a=w.length;r<a;r++)this.skinIndices.push(w[r].clone());var _=e.lineDistances;for(r=0,a=_.length;r<a;r++)this.lineDistances.push(_[r]);var M=e.boundingBox;null!==M&&(this.boundingBox=M.clone());var S=e.boundingSphere;return null!==S&&(this.boundingSphere=S.clone()),this.elementsNeedUpdate=e.elementsNeedUpdate,this.verticesNeedUpdate=e.verticesNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.lineDistancesNeedUpdate=e.lineDistancesNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});var rr=function(o){function e(e,t,n,i,r,a){o.call(this),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:i,heightSegments:r,depthSegments:a},this.fromBufferGeometry(new ar(e,t,n,i,r,a)),this.mergeVertices()}return o&&(e.__proto__=o),(e.prototype=Object.create(o&&o.prototype)).constructor=e}(ir),ar=function(s){function e(e,t,n,i,r,a){s.call(this),this.type="BoxBufferGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:i,heightSegments:r,depthSegments:a};var R=this;e=e||1,t=t||1,n=n||1,i=Math.floor(i)||1,r=Math.floor(r)||1,a=Math.floor(a)||1;var P=[],C=[],O=[],D=[],I=0,N=0;function o(e,t,n,i,r,a,o,s,c,l,h){for(var u=a/c,p=o/l,d=a/2,f=o/2,m=s/2,g=c+1,v=l+1,y=0,x=0,b=new Dt,w=0;w<v;w++)for(var _=w*p-f,M=0;M<g;M++){var S=M*u-d;b[e]=S*i,b[t]=_*r,b[n]=m,C.push(b.x,b.y,b.z),b[e]=0,b[t]=0,b[n]=0<s?1:-1,O.push(b.x,b.y,b.z),D.push(M/c),D.push(1-w/l),y+=1}for(w=0;w<l;w++)for(M=0;M<c;M++){var T=I+M+g*w,E=I+M+g*(w+1),A=I+(M+1)+g*(w+1),L=I+(M+1)+g*w;P.push(T,E,L),P.push(E,A,L),x+=6}R.addGroup(N,x,h),N+=x,I+=y}o("z","y","x",-1,-1,n,t,e,a,r,0),o("z","y","x",1,-1,n,t,-e,a,r,1),o("x","z","y",1,1,e,n,t,i,a,2),o("x","z","y",1,-1,e,n,-t,i,a,3),o("x","y","z",1,-1,e,t,n,i,r,4),o("x","y","z",-1,-1,e,t,-n,i,r,5),this.setIndex(P),this.setAttribute("position",new wi(C,3)),this.setAttribute("normal",new wi(O,3)),this.setAttribute("uv",new wi(D,2))}return s&&(e.__proto__=s),(e.prototype=Object.create(s&&s.prototype)).constructor=e}(Oi);function or(e){var t,n={};for(t in e)for(var i in n[t]={},e[t]){var r=e[t][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture)?n[t][i]=r.clone():Array.isArray(r)?n[t][i]=r.slice():n[t][i]=r}return n}function sr(e){for(var t={},n=0;n<e.length;n++){var i,r=or(e[n]);for(i in r)t[i]=r[i]}return t}var cr={clone:or,merge:sr},lr="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",hr="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}";function ur(e){ui.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader=lr,this.fragmentShader=hr,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,void 0!==e&&(void 0!==e.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}function pr(){mn.call(this),this.type="Camera",this.matrixWorldInverse=new Jt,this.projectionMatrix=new Jt,this.projectionMatrixInverse=new Jt}function dr(e,t,n,i){pr.call(this),this.type="PerspectiveCamera",this.fov=void 0!==e?e:50,this.zoom=1,this.near=void 0!==n?n:.1,this.far=void 0!==i?i:2e3,this.focus=10,this.aspect=void 0!==t?t:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}function fr(e,t,n,i){mn.call(this),this.type="CubeCamera";var a=new dr(90,1,e,t);a.up.set(0,-1,0),a.lookAt(new Dt(1,0,0)),this.add(a);var o=new dr(90,1,e,t);o.up.set(0,-1,0),o.lookAt(new Dt(-1,0,0)),this.add(o);var s=new dr(90,1,e,t);s.up.set(0,0,1),s.lookAt(new Dt(0,1,0)),this.add(s);var c=new dr(90,1,e,t);c.up.set(0,0,-1),c.lookAt(new Dt(0,-1,0)),this.add(c);var l=new dr(90,1,e,t);l.up.set(0,-1,0),l.lookAt(new Dt(0,0,1)),this.add(l);var h=new dr(90,1,e,t);h.up.set(0,-1,0),h.lookAt(new Dt(0,0,-1)),this.add(h),i=i||{format:tt,magFilter:qe,minFilter:qe},this.renderTarget=new mr(n,n,i),this.renderTarget.texture.name="CubeCamera",this.update=function(e,t){null===this.parent&&this.updateMatrixWorld();var n=e.getRenderTarget(),i=this.renderTarget,r=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0),e.render(t,a),e.setRenderTarget(i,1),e.render(t,o),e.setRenderTarget(i,2),e.render(t,s),e.setRenderTarget(i,3),e.render(t,c),e.setRenderTarget(i,4),e.render(t,l),i.texture.generateMipmaps=r,e.setRenderTarget(i,5),e.render(t,h),e.setRenderTarget(n)},this.clear=function(e,t,n,i){for(var r=e.getRenderTarget(),a=this.renderTarget,o=0;o<6;o++)e.setRenderTarget(a,o),e.clear(t,n,i);e.setRenderTarget(r)}}function mr(e,t,n){Ht.call(this,e,t,n)}function gr(e,t,n,i,r,a,o,s,c,l,h,u){Ft.call(this,null,a,o,s,c,l,i,r,h,u),this.image={data:e||null,width:t||1,height:n||1},this.magFilter=void 0!==c?c:je,this.minFilter=void 0!==l?l:je,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}((ur.prototype=Object.create(ui.prototype)).constructor=ur).prototype.isShaderMaterial=!0,ur.prototype.copy=function(e){return ui.prototype.copy.call(this,e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=or(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.extensions=e.extensions,this},ur.prototype.toJSON=function(e){var t,n=ui.prototype.toJSON.call(this,e);for(t in n.uniforms={},this.uniforms){var i=this.uniforms[t].value;i&&i.isTexture?n.uniforms[t]={type:"t",value:i.toJSON(e).uuid}:i&&i.isColor?n.uniforms[t]={type:"c",value:i.getHex()}:i&&i.isVector2?n.uniforms[t]={type:"v2",value:i.toArray()}:i&&i.isVector3?n.uniforms[t]={type:"v3",value:i.toArray()}:i&&i.isVector4?n.uniforms[t]={type:"v4",value:i.toArray()}:i&&i.isMatrix3?n.uniforms[t]={type:"m3",value:i.toArray()}:i&&i.isMatrix4?n.uniforms[t]={type:"m4",value:i.toArray()}:n.uniforms[t]={value:i}}0<Object.keys(this.defines).length&&(n.defines=this.defines),n.vertexShader=this.vertexShader,n.fragmentShader=this.fragmentShader;var r,a={};for(r in this.extensions)!0===this.extensions[r]&&(a[r]=!0);return 0<Object.keys(a).length&&(n.extensions=a),n},pr.prototype=Object.assign(Object.create(mn.prototype),{constructor:pr,isCamera:!0,copy:function(e,t){return mn.prototype.copy.call(this,e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this},getWorldDirection:function(e){void 0===e&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),e=new Dt),this.updateMatrixWorld(!0);var t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()},updateMatrixWorld:function(e){mn.prototype.updateMatrixWorld.call(this,e),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return(new this.constructor).copy(this)}}),dr.prototype=Object.assign(Object.create(pr.prototype),{constructor:dr,isPerspectiveCamera:!0,copy:function(e,t){return pr.prototype.copy.call(this,e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this},setFocalLength:function(e){var t=.5*this.getFilmHeight()/e;this.fov=2*Lt.RAD2DEG*Math.atan(t),this.updateProjectionMatrix()},getFocalLength:function(){var e=Math.tan(.5*Lt.DEG2RAD*this.fov);return.5*this.getFilmHeight()/e},getEffectiveFOV:function(){return 2*Lt.RAD2DEG*Math.atan(Math.tan(.5*Lt.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(e,t,n,i,r,a){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=a,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e,t,n=this.near,i=n*Math.tan(.5*Lt.DEG2RAD*this.fov)/this.zoom,r=2*i,a=this.aspect*r,o=-.5*a,s=this.view;null!==this.view&&this.view.enabled&&(e=s.fullWidth,t=s.fullHeight,o+=s.offsetX*a/e,i-=s.offsetY*r/t,a*=s.width/e,r*=s.height/t);var c=this.filmOffset;0!==c&&(o+=n*c/this.getFilmWidth()),this.projectionMatrix.makePerspective(o,o+a,i,i-r,n,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(e){var t=mn.prototype.toJSON.call(this,e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}),(fr.prototype=Object.create(mn.prototype)).constructor=fr,((mr.prototype=Object.create(Ht.prototype)).constructor=mr).prototype.isWebGLRenderTargetCube=!0,mr.prototype.fromEquirectangularTexture=function(e,t){this.texture.type=t.type,this.texture.format=t.format,this.texture.encoding=t.encoding;var n=new gn,i={uniforms:{tEquirect:{value:null}},vertexShader:["varying vec3 vWorldDirection;","vec3 transformDirection( in vec3 dir, in mat4 matrix ) {","\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );","}","void main() {","\tvWorldDirection = transformDirection( position, modelMatrix );","\t#include <begin_vertex>","\t#include <project_vertex>","}"].join("\n"),fragmentShader:["uniform sampler2D tEquirect;","varying vec3 vWorldDirection;","#define RECIPROCAL_PI 0.31830988618","#define RECIPROCAL_PI2 0.15915494","void main() {","\tvec3 direction = normalize( vWorldDirection );","\tvec2 sampleUV;","\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;","\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;","\tgl_FragColor = texture2D( tEquirect, sampleUV );","}"].join("\n")},r=new ur({type:"CubemapFromEquirect",uniforms:or(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:_e,blending:K});r.uniforms.tEquirect.value=t;var a=new Ji(new ar(5,5,5),r);n.add(a);var o=new fr(1,10,1);return o.renderTarget=this,o.renderTarget.texture.name="CubeCameraTexture",o.update(e,n),a.geometry.dispose(),a.material.dispose(),this},((gr.prototype=Object.create(Ft.prototype)).constructor=gr).prototype.isDataTexture=!0;var vr=new On,yr=new Dt;function xr(e,t,n,i,r,a){this.planes=[void 0!==e?e:new kn,void 0!==t?t:new kn,void 0!==n?n:new kn,void 0!==i?i:new kn,void 0!==r?r:new kn,void 0!==a?a:new kn]}Object.assign(xr.prototype,{set:function(e,t,n,i,r,a){var o=this.planes;return o[0].copy(e),o[1].copy(t),o[2].copy(n),o[3].copy(i),o[4].copy(r),o[5].copy(a),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){for(var t=this.planes,n=0;n<6;n++)t[n].copy(e.planes[n]);return this},setFromMatrix:function(e){var t=this.planes,n=e.elements,i=n[0],r=n[1],a=n[2],o=n[3],s=n[4],c=n[5],l=n[6],h=n[7],u=n[8],p=n[9],d=n[10],f=n[11],m=n[12],g=n[13],v=n[14],y=n[15];return t[0].setComponents(o-i,h-s,f-u,y-m).normalize(),t[1].setComponents(o+i,h+s,f+u,y+m).normalize(),t[2].setComponents(o+r,h+c,f+p,y+g).normalize(),t[3].setComponents(o-r,h-c,f-p,y-g).normalize(),t[4].setComponents(o-a,h-l,f-d,y-v).normalize(),t[5].setComponents(o+a,h+l,f+d,y+v).normalize(),this},intersectsObject:function(e){var t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),vr.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(vr)},intersectsSprite:function(e){return vr.center.set(0,0,0),vr.radius=.7071067811865476,vr.applyMatrix4(e.matrixWorld),this.intersectsSphere(vr)},intersectsSphere:function(e){for(var t=this.planes,n=e.center,i=-e.radius,r=0;r<6;r++)if(t[r].distanceToPoint(n)<i)return!1;return!0},intersectsBox:function(e){for(var t=this.planes,n=0;n<6;n++){var i=t[n];if(yr.x=0<i.normal.x?e.max.x:e.min.x,yr.y=0<i.normal.y?e.max.y:e.min.y,yr.z=0<i.normal.z?e.max.z:e.min.z,i.distanceToPoint(yr)<0)return!1}return!0},containsPoint:function(e){for(var t=this.planes,n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}});var br={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\treturn vec2( -1.04, 1.04 ) * a004 + r.zw;\n}\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n#else\n\tif( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t}\n\treturn 1.0;\n#endif\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nvec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );\n\tvec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;\n\treturn Fr * fresnel + F0;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + viewDir );\n\tfloat dotNL = saturate( dot( normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\treturn specularColor * brdf.x + brdf.y;\n}\nvoid BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tvec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\tvec3 FssEss = F * brdf.x + brdf.y;\n\tfloat Ess = brdf.x + brdf.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie(float roughness, float NoH) {\n\tfloat invAlpha  = 1.0 / roughness;\n\tfloat cos2h = NoH * NoH;\n\tfloat sin2h = max(1.0 - cos2h, 0.0078125);\treturn (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);\n}\nfloat V_Neubelt(float NoV, float NoL) {\n\treturn saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));\n}\nvec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {\n\tvec3 N = geometry.normal;\n\tvec3 V = geometry.viewDir;\n\tvec3 H = normalize( V + L );\n\tfloat dotNH = saturate( dot( N, H ) );\n\treturn specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );\n}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tfDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\t#if ! defined( STANDARD ) && ! defined( PHONG ) && ! defined( MATCAP )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( STANDARD ) && ! defined( PHONG ) && ! defined( MATCAP )\n\tvarying vec3 vViewPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( STANDARD ) && ! defined( PHONG ) && ! defined( MATCAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif",color_fragment:"#ifdef USE_COLOR\n\tdiffuseColor.rgba *= vColor.rgba;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n\tvarying vec4 vColor;\n#endif",color_pars_vertex:"#ifdef USE_COLOR\n\tvarying vec4 vColor;\n#endif",color_vertex:"#ifdef USE_COLOR\n\tvColor.xyzw = color.xyzw;\n#endif",common:"#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n  return m[ 2 ][ 3 ] == - 1.0;\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_textureSize (1024.0)\nint getFaceFromDirection(vec3 direction) {\n\tvec3 absDirection = abs(direction);\n\tint face = -1;\n\tif( absDirection.x > absDirection.z ) {\n\t\tif(absDirection.x > absDirection.y )\n\t\t\tface = direction.x > 0.0 ? 0 : 3;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\telse {\n\t\tif(absDirection.z > absDirection.y )\n\t\t\tface = direction.z > 0.0 ? 2 : 5;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\treturn face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n\tfloat dxRoughness = dFdx(roughness);\n\tfloat dyRoughness = dFdy(roughness);\n\tvec3 dx = dFdx( vec * scale * dxRoughness );\n\tvec3 dy = dFdy( vec * scale * dyRoughness );\n\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\n\td = clamp(d, 1.0, cubeUV_rangeClamp);\n\tfloat mipLevel = 0.5 * log2(d);\n\treturn vec2(floor(mipLevel), fract(mipLevel));\n}\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n\tfloat a = 16.0 * cubeUV_rcpTextureSize;\n\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n\tfloat powScale = exp2_packed.x * exp2_packed.y;\n\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n\tbool bRes = mipLevel == 0.0;\n\tscale =  bRes && (scale < a) ? a : scale;\n\tvec3 r;\n\tvec2 offset;\n\tint face = getFaceFromDirection(direction);\n\tfloat rcpPowScale = 1.0 / powScale;\n\tif( face == 0) {\n\t\tr = vec3(direction.x, -direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 1) {\n\t\tr = vec3(direction.y, direction.x, direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 2) {\n\t\tr = vec3(direction.z, direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 3) {\n\t\tr = vec3(direction.x, direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse if( face == 4) {\n\t\tr = vec3(direction.y, direction.x, -direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse {\n\t\tr = vec3(direction.z, -direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\tr = normalize(r);\n\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\n\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n\tvec2 base = offset + vec2( texelOffset );\n\treturn base + s * ( scale - 2.0 * texelOffset );\n}\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\nvec4 textureCubeUV( sampler2D envMap, vec3 reflectedDirection, float roughness ) {\n\tfloat roughnessVal = roughness* cubeUV_maxLods3;\n\tfloat r1 = floor(roughnessVal);\n\tfloat r2 = r1 + 1.0;\n\tfloat t = fract(roughnessVal);\n\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\n\tfloat s = mipInfo.y;\n\tfloat level0 = mipInfo.x;\n\tfloat level1 = level0 + 1.0;\n\tlevel1 = level1 > 5.0 ? 5.0 : level1;\n\tlevel0 += min( floor( s + 0.5 ), 5.0 );\n\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n\tvec4 result = mix(color10, color20, t);\n\treturn vec4(result.rgb, 1.0);\n}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\ttransformedNormal = mat3( instanceMatrix ) * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = normalMatrix * objectTangent;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = min( floor( D ) / 255.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\t\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t}  else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\treflectVec = normalize( reflectVec );\n\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\treflectVec = normalize( reflectVec );\n\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\tenvColor = envMapTexelToLinear( envColor );\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\t#ifdef ENVMAP_MODE_REFRACTION\n\t\tuniform float refractionRatio;\n\t#endif\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, queryVec, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat sigma = PI * roughness * roughness / ( 1.0 + roughness );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + log2( sigma );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t  vec3 reflectVec = reflect( -viewDir, normal );\n\t\t  reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t#else\n\t\t  vec3 reflectVec = refract( -viewDir, normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, queryReflectVec, roughness );\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) { \n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tfogDepth = -mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float fogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef TOON\n\tuniform sampler2D gradientMap;\n\tvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\t\tfloat dotNL = dot( normal, lightDirection );\n\t\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t\t#ifdef USE_GRADIENTMAP\n\t\t\treturn texture2D( gradientMap, coord ).rgb;\n\t\t#else\n\t\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t\t#endif\n\t}\n#endif",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n#endif",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {\n\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t\tfloat shadowCameraNear;\n\t\tfloat shadowCameraFar;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifdef TOON\n\t\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#else\n\t\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\t\tvec3 irradiance = dotNL * directLight.color;\n\t#endif\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n#ifdef REFLECTIVITY\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#endif\n#ifdef CLEARCOAT\n\tmaterial.clearcoat = saturate( clearcoat );\tmaterial.clearcoatRoughness = clamp( clearcoatRoughness, 0.04, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheen;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n#ifdef CLEARCOAT\n\tfloat clearcoat;\n\tfloat clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tvec3 sheenColor;\n#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearcoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = ccDotNL * directLight.color;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tccIrradiance *= PI;\n\t\t#endif\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t\treflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(\n\t\t\tmaterial.specularRoughness,\n\t\t\tdirectLight.direction,\n\t\t\tgeometry,\n\t\t\tmaterial.sheenColor\n\t\t);\n\t#else\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);\n\t#endif\n\treflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t\tfloat ccDotNL = ccDotNV;\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\tfloat clearcoatInv = 1.0 - clearcoatDHR;\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tBRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tdirectLight.color *= all( bvec3( pointLight.shadow, directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tdirectLight.color *= all( bvec3( spotLight.shadow, directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectLight.color *= all( bvec3( directionalLight.shadow, directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );\n\t#ifdef CLEARCOAT\n\t\tclearcoatRadiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\t#endif\n#endif",normal_fragment_begin:"#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t\tbitangent = bitangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\t#ifdef USE_TANGENT\n\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\tmapN.xy = normalScale * mapN.xy;\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( -vViewPosition, normal, normalScale, normalMap );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec2 normalScale, in sampler2D normalMap ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s );\n\t\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\n\t\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\n\t\tvec3 N = normalize( surf_norm );\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\tmapN.xy *= normalScale;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tbool frontFacing = dot( cross( S, T ), N ) > 0.0;\n\t\t\tmapN.xy *= ( float( frontFacing ) * 2.0 - 1.0 );\n\t\t#else\n\t\t\tmapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t#endif\n\t\tmat3 tsn = mat3( S, T, N );\n\t\treturn normalize( tsn * mapN );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\t#ifdef USE_TANGENT\n\t\tmat3 vTBN = mat3( tangent, bitangent, clearcoatNormal );\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\tmapN.xy = clearcoatNormalScale * mapN.xy;\n\t\tclearcoatNormal = normalize( vTBN * mapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatNormalScale, clearcoatNormalMap );\n\t#endif\n#endif",clearcoat_normalmap_pars_fragment:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 encodeHalfRGBA ( vec2 v ) {\n\tvec4 encoded = vec4( 0.0 );\n\tconst vec2 offset = vec2( 1.0 / 255.0, 0.0 );\n\tencoded.xy = vec2( v.x, fract( v.x * 255.0 ) );\n\tencoded.xy = encoded.xy - ( encoded.yy * offset );\n\tencoded.zw = vec2( v.y, fract( v.y * 255.0 ) );\n\tencoded.zw = encoded.zw - ( encoded.ww * offset );\n\treturn encoded;\n}\nvec2 decodeHalfRGBA( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn decodeHalfRGBA( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\n\t\tvec2 centroidUV = ( floor( uv * size - 0.5 ) + 0.5 ) * texelSize;\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\t\tvec2 f = fract( uv * size + 0.5 );\n\t\tfloat a = mix( lb, lt, f.y );\n\t\tfloat b = mix( rb, rt, f.y );\n\t\tfloat c = mix( a, b, f.x );\n\t\treturn c;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= all( bvec2( directionalLight.shadow, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= all( bvec2( spotLight.shadow, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= all( bvec2( pointLight.shadow, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( ( color * ( 2.51 * color + 0.03 ) ) / ( color * ( 2.43 * color + 0.59 ) + 0.14 ) );\n}",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = uv2;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - gl_FragCoord.z ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n\t#endif\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV;\n\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\t#else\n\t\tvec4 matcapColor = vec4( 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#ifndef FLAT_SHADED\n\t\tvNormal = normalize( transformedNormal );\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define REFLECTIVITY\n\t#define CLEARCOAT\n\t#define TRANSPARENCY\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef TRANSPARENCY\n\tuniform float transparency;\n#endif\n#ifdef REFLECTIVITY\n\tuniform float reflectivity;\n#endif\n#ifdef CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheen;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#ifdef TRANSPARENCY\n\t\tdiffuseColor.a *= saturate( 1. - transparency + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) );\n\t#endif\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}",normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <fog_fragment>\n}",shadow_vert:"#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}"},wr={common:{diffuse:{value:new ai(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new zt},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Rt(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new ai(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new ai(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},uvTransform:{value:new zt}},sprite:{diffuse:{value:new ai(15658734)},opacity:{value:1},center:{value:new Rt(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},uvTransform:{value:new zt}}},_r={basic:{uniforms:sr([wr.common,wr.specularmap,wr.envmap,wr.aomap,wr.lightmap,wr.fog]),vertexShader:br.meshbasic_vert,fragmentShader:br.meshbasic_frag},lambert:{uniforms:sr([wr.common,wr.specularmap,wr.envmap,wr.aomap,wr.lightmap,wr.emissivemap,wr.fog,wr.lights,{emissive:{value:new ai(0)}}]),vertexShader:br.meshlambert_vert,fragmentShader:br.meshlambert_frag},phong:{uniforms:sr([wr.common,wr.specularmap,wr.envmap,wr.aomap,wr.lightmap,wr.emissivemap,wr.bumpmap,wr.normalmap,wr.displacementmap,wr.gradientmap,wr.fog,wr.lights,{emissive:{value:new ai(0)},specular:{value:new ai(1118481)},shininess:{value:30}}]),vertexShader:br.meshphong_vert,fragmentShader:br.meshphong_frag},standard:{uniforms:sr([wr.common,wr.envmap,wr.aomap,wr.lightmap,wr.emissivemap,wr.bumpmap,wr.normalmap,wr.displacementmap,wr.roughnessmap,wr.metalnessmap,wr.fog,wr.lights,{emissive:{value:new ai(0)},roughness:{value:.5},metalness:{value:.5},envMapIntensity:{value:1}}]),vertexShader:br.meshphysical_vert,fragmentShader:br.meshphysical_frag},matcap:{uniforms:sr([wr.common,wr.bumpmap,wr.normalmap,wr.displacementmap,wr.fog,{matcap:{value:null}}]),vertexShader:br.meshmatcap_vert,fragmentShader:br.meshmatcap_frag},points:{uniforms:sr([wr.points,wr.fog]),vertexShader:br.points_vert,fragmentShader:br.points_frag},dashed:{uniforms:sr([wr.common,wr.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:br.linedashed_vert,fragmentShader:br.linedashed_frag},depth:{uniforms:sr([wr.common,wr.displacementmap]),vertexShader:br.depth_vert,fragmentShader:br.depth_frag},normal:{uniforms:sr([wr.common,wr.bumpmap,wr.normalmap,wr.displacementmap,{opacity:{value:1}}]),vertexShader:br.normal_vert,fragmentShader:br.normal_frag},sprite:{uniforms:sr([wr.sprite,wr.fog]),vertexShader:br.sprite_vert,fragmentShader:br.sprite_frag},background:{uniforms:{uvTransform:{value:new zt},t2D:{value:null}},vertexShader:br.background_vert,fragmentShader:br.background_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:br.cube_vert,fragmentShader:br.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:br.equirect_vert,fragmentShader:br.equirect_frag},distanceRGBA:{uniforms:sr([wr.common,wr.displacementmap,{referencePosition:{value:new Dt},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:br.distanceRGBA_vert,fragmentShader:br.distanceRGBA_frag},shadow:{uniforms:sr([wr.lights,wr.fog,{color:{value:new ai(0)},opacity:{value:1}}]),vertexShader:br.shadow_vert,fragmentShader:br.shadow_frag}};function Mr(){var n=null,i=!1,r=null;function a(e,t){!1!==i&&(r(e,t),n.requestAnimationFrame(a))}return{start:function(){!0!==i&&null!==r&&(n.requestAnimationFrame(a),i=!0)},stop:function(){i=!1},setAnimationLoop:function(e){r=e},setContext:function(e){n=e}}}function Sr(c){var l=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),l.get(e)},remove:function(e){e.isInterleavedBufferAttribute&&(e=e.data);var t=l.get(e);t&&(c.deleteBuffer(t.buffer),l.delete(e))},update:function(e,t){e.isInterleavedBufferAttribute&&(e=e.data);var n,r,a,o,s=l.get(e);void 0===s?l.set(e,function(e,t){var n=e.array,i=e.usage,r=c.createBuffer();c.bindBuffer(t,r),c.bufferData(t,n,i),e.onUploadCallback();var a=5126;return n instanceof Float32Array?a=5126:n instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):n instanceof Uint16Array?a=5123:n instanceof Int16Array?a=5122:n instanceof Uint32Array?a=5125:n instanceof Int32Array?a=5124:n instanceof Int8Array?a=5120:n instanceof Uint8Array&&(a=5121),{buffer:r,type:a,bytesPerElement:n.BYTES_PER_ELEMENT,version:e.version}}(e,t)):s.version<e.version&&(n=s.buffer,r=t,a=e.array,o=e.updateRange,c.bindBuffer(r,n),-1===o.count?c.bufferSubData(r,0,a):(c.bufferSubData(r,o.offset*a.BYTES_PER_ELEMENT,a.subarray(o.offset,o.offset+o.count)),o.count=-1),s.version=e.version)}}}function Tr(e,t,n,i){ir.call(this),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:i},this.fromBufferGeometry(new Er(e,t,n,i)),this.mergeVertices()}function Er(e,t,n,i){Oi.call(this),this.type="PlaneBufferGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:i};for(var r=(e=e||1)/2,a=(t=t||1)/2,o=Math.floor(n)||1,s=Math.floor(i)||1,c=o+1,l=s+1,h=e/o,u=t/s,p=[],d=[],f=[],m=[],g=0;g<l;g++)for(var v=g*u-a,y=0;y<c;y++){var x=y*h-r;d.push(x,-v,0),f.push(0,0,1),m.push(y/o),m.push(1-g/s)}for(g=0;g<s;g++)for(y=0;y<o;y++){var b=y+c*g,w=y+c*(g+1),_=y+1+c*(g+1),M=y+1+c*g;p.push(b,w,M),p.push(w,_,M)}this.setIndex(p),this.setAttribute("position",new wi(d,3)),this.setAttribute("normal",new wi(f,3)),this.setAttribute("uv",new wi(m,2))}function Ar(c,n,l,i){var h,u,p=new ai(0),d=0,f=null,m=0;function g(e,t){n.buffers.color.setClear(e.r,e.g,e.b,t,i)}return{getClearColor:function(){return p},setClearColor:function(e,t){p.set(e),g(p,d=void 0!==t?t:1)},getClearAlpha:function(){return d},setClearAlpha:function(e){g(p,d=e)},render:function(e,t,n,i){var r,a=t.background,o=c.vr,s=o.getSession&&o.getSession();s&&"additive"===s.environmentBlendMode&&(a=null),null===a?(g(p,d),f=null,m=0):a&&a.isColor&&(g(a,1),i=!0,f=null,m=0),(c.autoClear||i)&&c.clear(c.autoClearColor,c.autoClearDepth,c.autoClearStencil),a&&(a.isCubeTexture||a.isWebGLRenderTargetCube)?(void 0===u&&((u=new Ji(new ar(1,1,1),new ur({type:"BackgroundCubeMaterial",uniforms:or(_r.cube.uniforms),vertexShader:_r.cube.vertexShader,fragmentShader:_r.cube.fragmentShader,side:_e,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),u.geometry.deleteAttribute("uv"),u.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(u.material,"map",{get:function(){return this.uniforms.tCube.value}}),l.update(u)),r=a.isWebGLRenderTargetCube?a.texture:a,u.material.uniforms.tCube.value=r,u.material.uniforms.tFlip.value=a.isWebGLRenderTargetCube?1:-1,f===a&&m===r.version||(u.material.needsUpdate=!0,f=a,m=r.version),e.unshift(u,u.geometry,u.material,0,0,null)):a&&a.isTexture&&(void 0===h&&((h=new Ji(new Er(2,2),new ur({type:"BackgroundMaterial",uniforms:or(_r.background.uniforms),vertexShader:_r.background.vertexShader,fragmentShader:_r.background.fragmentShader,side:O,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),Object.defineProperty(h.material,"map",{get:function(){return this.uniforms.t2D.value}}),l.update(h)),!0===(h.material.uniforms.t2D.value=a).matrixAutoUpdate&&a.updateMatrix(),h.material.uniforms.uvTransform.value.copy(a.matrix),f===a&&m===a.version||(h.material.needsUpdate=!0,m=(f=a).version),e.unshift(h,h.geometry,h.material,0,0,null))}}}function Lr(o,s,c,e){var l,h=e.isWebGL2;this.setMode=function(e){l=e},this.render=function(e,t){o.drawArrays(l,e,t),c.update(t,l)},this.renderInstances=function(e,t,n,i){if(0!==i){var r,a;if(h)r=o,a="drawArraysInstanced";else if(a="drawArraysInstancedANGLE",null===(r=s.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");r[a](l,t,n,i),c.update(n,l,i)}}}function Rr(t,n,e){var i;function r(e){if("highp"===e){if(0<t.getShaderPrecisionFormat(35633,36338).precision&&0<t.getShaderPrecisionFormat(35632,36338).precision)return"highp";e="mediump"}return"mediump"===e&&0<t.getShaderPrecisionFormat(35633,36337).precision&&0<t.getShaderPrecisionFormat(35632,36337).precision?"mediump":"lowp"}var a="undefined"!=typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext||"undefined"!=typeof WebGL2ComputeRenderingContext&&t instanceof WebGL2ComputeRenderingContext,o=void 0!==e.precision?e.precision:"highp",s=r(o);s!==o&&(console.warn("THREE.WebGLRenderer:",o,"not supported, using",s,"instead."),o=s);var c=!0===e.logarithmicDepthBuffer,l=t.getParameter(34930),h=t.getParameter(35660),u=t.getParameter(3379),p=t.getParameter(34076),d=t.getParameter(34921),f=t.getParameter(36347),m=t.getParameter(36348),g=t.getParameter(36349),v=0<h,y=a||!!n.get("OES_texture_float");return{isWebGL2:a,getMaxAnisotropy:function(){if(void 0!==i)return i;var e=n.get("EXT_texture_filter_anisotropic");return i=null!==e?t.getParameter(e.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0},getMaxPrecision:r,precision:o,logarithmicDepthBuffer:c,maxTextures:l,maxVertexTextures:h,maxTextureSize:u,maxCubemapSize:p,maxAttributes:d,maxVertexUniforms:f,maxVaryings:m,maxFragmentUniforms:g,vertexTextures:v,floatFragmentTextures:y,floatVertexTextures:v&&y,maxSamples:a?t.getParameter(36183):0}}function Pr(){var h=this,u=null,p=0,d=!1,f=!1,m=new kn,g=new zt,v={value:null,needsUpdate:!1};function y(){v.value!==u&&(v.value=u,v.needsUpdate=0<p),h.numPlanes=p,h.numIntersection=0}function x(e,t,n,i){var r=null!==e?e.length:0,a=null;if(0!==r){if(a=v.value,!0!==i||null===a){var o=n+4*r,s=t.matrixWorldInverse;g.getNormalMatrix(s),(null===a||a.length<o)&&(a=new Float32Array(o));for(var c=0,l=n;c!==r;++c,l+=4)m.copy(e[c]).applyMatrix4(s,g),m.normal.toArray(a,l),a[l+3]=m.constant}v.value=a,v.needsUpdate=!0}return h.numPlanes=r,a}this.uniform=v,this.numPlanes=0,this.numIntersection=0,this.init=function(e,t,n){var i=0!==e.length||t||0!==p||d;return d=t,u=x(e,n,0),p=e.length,i},this.beginShadows=function(){f=!0,x(null)},this.endShadows=function(){f=!1,y()},this.setState=function(e,t,n,i,r,a){if(!d||null===e||0===e.length||f&&!n)f?x(null):y();else{var o=f?0:p,s=4*o,c=r.clippingState||null;v.value=c,c=x(e,i,s,a);for(var l=0;l!==s;++l)c[l]=u[l];r.clippingState=c,this.numIntersection=t?this.numPlanes:0,this.numPlanes+=o}}}function Cr(n){var i={};return{get:function(e){if(void 0!==i[e])return i[e];var t;switch(e){case"WEBGL_depth_texture":t=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":t=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":t=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":t=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:t=n.getExtension(e)}return null===t&&console.warn("THREE.WebGLRenderer: "+e+" extension not supported."),i[e]=t}}}function Or(e,d,a){var o=new WeakMap,f=new WeakMap;function s(e){var t,n=e.target,i=o.get(n);for(t in null!==i.index&&d.remove(i.index),i.attributes)d.remove(i.attributes[t]);n.removeEventListener("dispose",s),o.delete(n);var r=f.get(i);r&&(d.remove(r),f.delete(i)),a.memory.geometries--}return{get:function(e,t){var n=o.get(t);return n||(t.addEventListener("dispose",s),t.isBufferGeometry?n=t:t.isGeometry&&(void 0===t._bufferGeometry&&(t._bufferGeometry=(new Oi).setFromObject(e)),n=t._bufferGeometry),o.set(t,n),a.memory.geometries++,n)},update:function(e){var t=e.index,n=e.attributes;for(i in null!==t&&d.update(t,34963),n)d.update(n[i],34962);var i,r=e.morphAttributes;for(i in r)for(var a=r[i],o=0,s=a.length;o<s;o++)d.update(a[o],34962)},getWireframeAttribute:function(e){var t,n=f.get(e);return(!n||null!==(t=e.index)&&n.version<t.version)&&function(e){var t=[],n=e.index,i=e.attributes.position,r=0;if(null!==n)for(var a=n.array,r=n.version,o=0,s=a.length;o<s;o+=3){var c=a[o+0],l=a[o+1],h=a[o+2];t.push(c,l,l,h,h,c)}else for(a=i.array,r=i.version,o=0,s=a.length/3-1;o<s;o+=3)c=o+0,l=o+1,h=o+2,t.push(c,l,l,h,h,c);var u=new(65535<Si(t)?bi:yi)(t,1);u.version=r,d.update(u,34963);var p=f.get(e);p&&d.remove(p),f.set(e,u)}(e),f.get(e)}}}function Dr(o,s,c,e){var l,h,u,p=e.isWebGL2;this.setMode=function(e){l=e},this.setIndex=function(e){h=e.type,u=e.bytesPerElement},this.render=function(e,t){o.drawElements(l,t,h,e*u),c.update(t,l)},this.renderInstances=function(e,t,n,i){if(0!==i){var r,a;if(p)r=o,a="drawElementsInstanced";else if(a="drawElementsInstancedANGLE",null===(r=s.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");r[a](l,n,h,t*u,i),c.update(n,l,i)}}}function Ir(e){var i={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:i,programs:null,autoReset:!0,reset:function(){i.frame++,i.calls=0,i.triangles=0,i.points=0,i.lines=0},update:function(e,t,n){switch(n=n||1,i.calls++,t){case 4:i.triangles+=n*(e/3);break;case 5:case 6:i.triangles+=n*(e-2);break;case 1:i.lines+=n*(e/2);break;case 3:i.lines+=n*(e-1);break;case 2:i.lines+=n*e;break;case 0:i.points+=n*e;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",t)}}}}function Nr(e,t){return Math.abs(t[1])-Math.abs(e[1])}function zr(d){var f={},m=new Float32Array(8);return{update:function(e,t,n,i){var r=e.morphTargetInfluences,a=r.length,o=f[t.id];if(void 0===o){o=[];for(var s=0;s<a;s++)o[s]=[s,0];f[t.id]=o}for(var c=n.morphTargets&&t.morphAttributes.position,l=n.morphNormals&&t.morphAttributes.normal,s=0;s<a;s++)0!==(h=o[s])[1]&&(c&&t.deleteAttribute("morphTarget"+s),l&&t.deleteAttribute("morphNormal"+s));for(s=0;s<a;s++)(h=o[s])[0]=s,h[1]=r[s];o.sort(Nr);for(var h,s=0;s<8;s++){if(h=o[s]){var u=h[0],p=h[1];if(p){c&&t.setAttribute("morphTarget"+s,c[u]),l&&t.setAttribute("morphNormal"+s,l[u]),m[s]=p;continue}}m[s]=0}i.getUniforms().setValue(d,"morphTargetInfluences",m)}}}function Br(e,r,a,o){var s={};return{update:function(e){var t=o.render.frame,n=e.geometry,i=r.get(e,n);return s[i.id]!==t&&(n.isGeometry&&i.updateFromObject(e),r.update(i),s[i.id]=t),e.isInstancedMesh&&a.update(e.instanceMatrix,34962),i},dispose:function(){s={}}}}function Ur(e,t,n,i,r,a,o,s,c,l){Ft.call(this,e=void 0!==e?e:[],t=void 0!==t?t:ze,n,i,r,a,o=void 0!==o?o:tt,s,c,l),this.flipY=!1}function Fr(e,t,n,i){Ft.call(this,null),this.image={data:e||null,width:t||1,height:n||1,depth:i||1},this.magFilter=je,this.minFilter=je,this.wrapR=H,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}function Gr(e,t,n,i){Ft.call(this,null),this.image={data:e||null,width:t||1,height:n||1,depth:i||1},this.magFilter=je,this.minFilter=je,this.wrapR=H,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}_r.physical={uniforms:sr([_r.standard.uniforms,{transparency:{value:0},clearcoat:{value:0},clearcoatRoughness:{value:0},sheen:{value:new ai(0)},clearcoatNormalScale:{value:new Rt(1,1)},clearcoatNormalMap:{value:null}}]),vertexShader:br.meshphysical_vert,fragmentShader:br.meshphysical_frag},(Tr.prototype=Object.create(ir.prototype)).constructor=Tr,(Er.prototype=Object.create(Oi.prototype)).constructor=Er,((Ur.prototype=Object.create(Ft.prototype)).constructor=Ur).prototype.isCubeTexture=!0,Object.defineProperty(Ur.prototype,"images",{get:function(){return this.image},set:function(e){this.image=e}}),((Fr.prototype=Object.create(Ft.prototype)).constructor=Fr).prototype.isDataTexture2DArray=!0,((Gr.prototype=Object.create(Ft.prototype)).constructor=Gr).prototype.isDataTexture3D=!0;var Hr=new Ft,Vr=new Fr,jr=new Gr,kr=new Ur,Wr=[],qr=[],Xr=new Float32Array(16),Yr=new Float32Array(9),Zr=new Float32Array(4);function Jr(e,t,n){var i=e[0];if(i<=0||0<i)return e;var r=t*n,a=Wr[r];if(void 0===a&&(a=new Float32Array(r),Wr[r]=a),0!==t){i.toArray(a,0);for(var o=1,s=0;o!==t;++o)s+=n,e[o].toArray(a,s)}return a}function Qr(e,t){if(e.length===t.length){for(var n=0,i=e.length;n<i;n++)if(e[n]!==t[n])return;return 1}}function Kr(e,t){for(var n=0,i=t.length;n<i;n++)e[n]=t[n]}function $r(e,t){var n=qr[t];void 0===n&&(n=new Int32Array(t),qr[t]=n);for(var i=0;i!==t;++i)n[i]=e.allocateTextureUnit();return n}function ea(e,t){var n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function ta(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(Qr(n,t))return;e.uniform2fv(this.addr,t),Kr(n,t)}}function na(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(void 0!==t.r)n[0]===t.r&&n[1]===t.g&&n[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(Qr(n,t))return;e.uniform3fv(this.addr,t),Kr(n,t)}}function ia(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(Qr(n,t))return;e.uniform4fv(this.addr,t),Kr(n,t)}}function ra(e,t){var n=this.cache,i=t.elements;if(void 0===i){if(Qr(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),Kr(n,t)}else{if(Qr(n,i))return;Zr.set(i),e.uniformMatrix2fv(this.addr,!1,Zr),Kr(n,i)}}function aa(e,t){var n=this.cache,i=t.elements;if(void 0===i){if(Qr(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),Kr(n,t)}else{if(Qr(n,i))return;Yr.set(i),e.uniformMatrix3fv(this.addr,!1,Yr),Kr(n,i)}}function oa(e,t){var n=this.cache,i=t.elements;if(void 0===i){if(Qr(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),Kr(n,t)}else{if(Qr(n,i))return;Xr.set(i),e.uniformMatrix4fv(this.addr,!1,Xr),Kr(n,i)}}function sa(e,t,n){var i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.safeSetTexture2D(t||Hr,r)}function ca(e,t,n){var i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.setTexture2DArray(t||Vr,r)}function la(e,t,n){var i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.setTexture3D(t||jr,r)}function ha(e,t,n){var i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.safeSetTextureCube(t||kr,r)}function ua(e,t){var n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function pa(e,t){var n=this.cache;Qr(n,t)||(e.uniform2iv(this.addr,t),Kr(n,t))}function da(e,t){var n=this.cache;Qr(n,t)||(e.uniform3iv(this.addr,t),Kr(n,t))}function fa(e,t){var n=this.cache;Qr(n,t)||(e.uniform4iv(this.addr,t),Kr(n,t))}function ma(e,t){e.uniform1fv(this.addr,t)}function ga(e,t){e.uniform1iv(this.addr,t)}function va(e,t){e.uniform2iv(this.addr,t)}function ya(e,t){e.uniform3iv(this.addr,t)}function xa(e,t){e.uniform4iv(this.addr,t)}function ba(e,t){var n=Jr(t,this.size,2);e.uniform2fv(this.addr,n)}function wa(e,t){var n=Jr(t,this.size,3);e.uniform3fv(this.addr,n)}function _a(e,t){var n=Jr(t,this.size,4);e.uniform4fv(this.addr,n)}function Ma(e,t){var n=Jr(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,n)}function Sa(e,t){var n=Jr(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,n)}function Ta(e,t){var n=Jr(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,n)}function Ea(e,t,n){var i=t.length,r=$r(n,i);e.uniform1iv(this.addr,r);for(var a=0;a!==i;++a)n.safeSetTexture2D(t[a]||Hr,r[a])}function Aa(e,t,n){var i=t.length,r=$r(n,i);e.uniform1iv(this.addr,r);for(var a=0;a!==i;++a)n.safeSetTextureCube(t[a]||kr,r[a])}function La(e,t,n){this.id=e,this.addr=n,this.cache=[],this.setValue=function(){switch(t.type){case 5126:return ea;case 35664:return ta;case 35665:return na;case 35666:return ia;case 35674:return ra;case 35675:return aa;case 35676:return oa;case 35678:case 36198:return sa;case 35679:return la;case 35680:return ha;case 36289:return ca;case 5124:case 35670:return ua;case 35667:case 35671:return pa;case 35668:case 35672:return da;case 35669:case 35673:return fa}}()}function Ra(e,t,n){this.id=e,this.addr=n,this.cache=[],this.size=t.size,this.setValue=function(){switch(t.type){case 5126:return ma;case 35664:return ba;case 35665:return wa;case 35666:return _a;case 35674:return Ma;case 35675:return Sa;case 35676:return Ta;case 35678:return Ea;case 35680:return Aa;case 5124:case 35670:return ga;case 35667:case 35671:return va;case 35668:case 35672:return ya;case 35669:case 35673:return xa}}()}function Pa(e){this.id=e,this.seq=[],this.map={}}Ra.prototype.updateCache=function(e){var t=this.cache;e instanceof Float32Array&&t.length!==e.length&&(this.cache=new Float32Array(e.length)),Kr(t,e)},Pa.prototype.setValue=function(e,t,n){for(var i=this.seq,r=0,a=i.length;r!==a;++r){var o=i[r];o.setValue(e,t[o.id],n)}};var Ca=/([\w\d_]+)(\])?(\[|\.)?/g;function Oa(e,t){e.seq.push(t),e.map[t.id]=t}function Da(e,t){this.seq=[],this.map={};for(var n=e.getProgramParameter(t,35718),i=0;i<n;++i){var r=e.getActiveUniform(t,i);!function(e,t,n){var i=e.name,r=i.length;for(Ca.lastIndex=0;;){var a=Ca.exec(i),o=Ca.lastIndex,s=a[1],c="]"===a[2],l=a[3];if(c&&(s|=0),void 0===l||"["===l&&o+2===r){Oa(n,new(void 0===l?La:Ra)(s,e,t));break}var h=n.map[s];void 0===h&&Oa(n,h=new Pa(s)),n=h}}(r,e.getUniformLocation(t,r.name),this)}}function Ia(e,t,n){var i=e.createShader(t);return e.shaderSource(i,n),e.compileShader(i),i}Da.prototype.setValue=function(e,t,n,i){var r=this.map[t];void 0!==r&&r.setValue(e,n,i)},Da.prototype.setOptional=function(e,t,n){var i=t[n];void 0!==i&&this.setValue(e,n,i)},Da.upload=function(e,t,n,i){for(var r=0,a=t.length;r!==a;++r){var o=t[r],s=n[o.id];!1!==s.needsUpdate&&o.setValue(e,s.value,i)}},Da.seqWithValue=function(e,t){for(var n=[],i=0,r=e.length;i!==r;++i){var a=e[i];a.id in t&&n.push(a)}return n};var Na=0;function za(e){switch(e){case ht:return["Linear","( value )"];case n:return["sRGB","( value )"];case pt:return["RGBE","( value )"];case ft:return["RGBM","( value, 7.0 )"];case mt:return["RGBM","( value, 16.0 )"];case gt:return["RGBD","( value, 256.0 )"];case ut:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case dt:return["LogLuv","( value )"];default:throw new Error("unsupported encoding: "+e)}}function Ba(e,t,n){var i=e.getShaderParameter(t,35713),r=e.getShaderInfoLog(t).trim();return i&&""===r?"":"THREE.WebGLShader: gl.getShaderInfoLog() "+n+"\n"+r+function(e){for(var t=e.split("\n"),n=0;n<t.length;n++)t[n]=n+1+": "+t[n];return t.join("\n")}(e.getShaderSource(t))}function Ua(e,t){var n=za(t);return"vec4 "+e+"( vec4 value ) { return "+n[0]+"ToLinear"+n[1]+"; }"}function Fa(e){return""!==e}function Ga(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function Ha(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}var Va=/^[ \t]*#include +<([\w\d./]+)>/gm;function ja(e){return e.replace(Va,ka)}function ka(e,t){var n=br[t];if(void 0===n)throw new Error("Can not resolve #include <"+t+">");return ja(n)}var Wa=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g;function qa(e){return e.replace(Wa,Xa)}function Xa(e,t,n,i){for(var r="",a=parseInt(t);a<parseInt(n);a++)r+=i.replace(/\[ i \]/g,"[ "+a+" ]").replace(/UNROLLED_LOOP_INDEX/g,a);return r}function Ya(e){var t="precision "+e.precision+" float;\nprecision "+e.precision+" int;";return"highp"===e.precision?t+="\n#define HIGH_PRECISION":"mediump"===e.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(t+="\n#define LOW_PRECISION"),t}function Za(e,t,n,i,r,a){var s,c,l,h,u,p,m,g,v,y=e.getContext(),x=i.defines,b=r.vertexShader,w=r.fragmentShader,_=(s="SHADOWMAP_TYPE_BASIC",a.shadowMapType===j?s="SHADOWMAP_TYPE_PCF":a.shadowMapType===k?s="SHADOWMAP_TYPE_PCF_SOFT":a.shadowMapType===W&&(s="SHADOWMAP_TYPE_VSM"),s),M=function(){var t="ENVMAP_TYPE_CUBE";if(a.envMap)switch(a.envMapMode){case ze:case Be:t="ENVMAP_TYPE_CUBE";break;case He:case Ve:t="ENVMAP_TYPE_CUBE_UV";break;case Ue:case Fe:t="ENVMAP_TYPE_EQUIREC";break;case Ge:t="ENVMAP_TYPE_SPHERE"}return t}(),S=function(){var t="ENVMAP_MODE_REFLECTION";if(a.envMap)switch(a.envMapMode){case Be:case Fe:t="ENVMAP_MODE_REFRACTION"}return t}(),T=function(){var t="ENVMAP_BLENDING_MULTIPLY";if(a.envMap)switch(a.combine){case q:t="ENVMAP_BLENDING_MULTIPLY";break;case X:t="ENVMAP_BLENDING_MIX";break;case Re:t="ENVMAP_BLENDING_ADD"}return t}(),E=0<e.gammaFactor?e.gammaFactor:1,A=a.isWebGL2?"":(l=a,h=t,[(c=i.extensions||{}).derivatives||l.envMapCubeUV||l.bumpMap||l.tangentSpaceNormalMap||l.clearcoatNormalMap||l.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(c.fragDepth||l.logarithmicDepthBuffer)&&h.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",c.drawBuffers&&h.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(c.shaderTextureLOD||l.envMap)&&h.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Fa).join("\n")),L=function(e){var t,n=[];for(t in e){var i=e[t];!1!==i&&n.push("#define "+t+" "+i)}return n.join("\n")}(x),R=y.createProgram(),P=a.numMultiviewViews;i.isRawShaderMaterial?(0<(u=[L].filter(Fa).join("\n")).length&&(u+="\n"),0<(p=[A,L].filter(Fa).join("\n")).length&&(p+="\n")):(u=[Ya(a),"#define SHADER_NAME "+r.name,L,a.instancing?"#define USE_INSTANCING":"",a.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+E,"#define MAX_BONES "+a.maxBones,a.useFog&&a.fog?"#define USE_FOG":"",a.useFog&&a.fogExp2?"#define FOG_EXP2":"",a.map?"#define USE_MAP":"",a.envMap?"#define USE_ENVMAP":"",a.envMap?"#define "+S:"",a.lightMap?"#define USE_LIGHTMAP":"",a.aoMap?"#define USE_AOMAP":"",a.emissiveMap?"#define USE_EMISSIVEMAP":"",a.bumpMap?"#define USE_BUMPMAP":"",a.normalMap?"#define USE_NORMALMAP":"",a.normalMap&&a.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",a.normalMap&&a.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",a.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",a.displacementMap&&a.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",a.specularMap?"#define USE_SPECULARMAP":"",a.roughnessMap?"#define USE_ROUGHNESSMAP":"",a.metalnessMap?"#define USE_METALNESSMAP":"",a.alphaMap?"#define USE_ALPHAMAP":"",a.vertexTangents?"#define USE_TANGENT":"",a.vertexColors?"#define USE_COLOR":"",a.vertexUvs?"#define USE_UV":"",a.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",a.flatShading?"#define FLAT_SHADED":"",a.skinning?"#define USE_SKINNING":"",a.useVertexTexture?"#define BONE_TEXTURE":"",a.morphTargets?"#define USE_MORPHTARGETS":"",a.morphNormals&&!1===a.flatShading?"#define USE_MORPHNORMALS":"",a.doubleSided?"#define DOUBLE_SIDED":"",a.flipSided?"#define FLIP_SIDED":"",a.shadowMapEnabled?"#define USE_SHADOWMAP":"",a.shadowMapEnabled?"#define "+_:"",a.sizeAttenuation?"#define USE_SIZEATTENUATION":"",a.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",a.logarithmicDepthBuffer&&(a.isWebGL2||t.get("EXT_frag_depth"))?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING"," attribute mat4 instanceMatrix;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#ifdef USE_COLOR","\tattribute vec4 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Fa).join("\n"),p=[A,Ya(a),"#define SHADER_NAME "+r.name,L,a.alphaTest?"#define ALPHATEST "+a.alphaTest+(a.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+E,a.useFog&&a.fog?"#define USE_FOG":"",a.useFog&&a.fogExp2?"#define FOG_EXP2":"",a.map?"#define USE_MAP":"",a.matcap?"#define USE_MATCAP":"",a.envMap?"#define USE_ENVMAP":"",a.envMap?"#define "+M:"",a.envMap?"#define "+S:"",a.envMap?"#define "+T:"",a.lightMap?"#define USE_LIGHTMAP":"",a.aoMap?"#define USE_AOMAP":"",a.emissiveMap?"#define USE_EMISSIVEMAP":"",a.bumpMap?"#define USE_BUMPMAP":"",a.normalMap?"#define USE_NORMALMAP":"",a.normalMap&&a.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",a.normalMap&&a.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",a.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",a.specularMap?"#define USE_SPECULARMAP":"",a.roughnessMap?"#define USE_ROUGHNESSMAP":"",a.metalnessMap?"#define USE_METALNESSMAP":"",a.alphaMap?"#define USE_ALPHAMAP":"",a.sheen?"#define USE_SHEEN":"",a.vertexTangents?"#define USE_TANGENT":"",a.vertexColors?"#define USE_COLOR":"",a.vertexUvs?"#define USE_UV":"",a.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",a.gradientMap?"#define USE_GRADIENTMAP":"",a.flatShading?"#define FLAT_SHADED":"",a.doubleSided?"#define DOUBLE_SIDED":"",a.flipSided?"#define FLIP_SIDED":"",a.shadowMapEnabled?"#define USE_SHADOWMAP":"",a.shadowMapEnabled?"#define "+_:"",a.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",a.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",a.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",a.logarithmicDepthBuffer&&(a.isWebGL2||t.get("EXT_frag_depth"))?"#define USE_LOGDEPTHBUF_EXT":"",(i.extensions&&i.extensions.shaderTextureLOD||a.envMap)&&(a.isWebGL2||t.get("EXT_shader_texture_lod"))?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",a.toneMapping!==Pe?"#define TONE_MAPPING":"",a.toneMapping!==Pe?br.tonemapping_pars_fragment:"",a.toneMapping!==Pe?function(t){var n;switch(t){case Ce:n="Linear";break;case Oe:n="Reinhard";break;case De:n="Uncharted2";break;case Ie:n="OptimizedCineon";break;case Ne:n="ACESFilmic";break;default:throw new Error("unsupported toneMapping: "+t)}return"vec3 toneMapping( vec3 color ) { return "+n+"ToneMapping( color ); }"}(a.toneMapping):"",a.dithering?"#define DITHERING":"",a.outputEncoding||a.mapEncoding||a.matcapEncoding||a.envMapEncoding||a.emissiveMapEncoding?br.encodings_pars_fragment:"",a.mapEncoding?Ua("mapTexelToLinear",a.mapEncoding):"",a.matcapEncoding?Ua("matcapTexelToLinear",a.matcapEncoding):"",a.envMapEncoding?Ua("envMapTexelToLinear",a.envMapEncoding):"",a.emissiveMapEncoding?Ua("emissiveMapTexelToLinear",a.emissiveMapEncoding):"",a.outputEncoding?"vec4 linearToOutputTexel( vec4 value ) { return LinearTo"+(m=za(a.outputEncoding))[0]+m[1]+"; }":"",a.depthPacking?"#define DEPTH_PACKING "+i.depthPacking:"","\n"].filter(Fa).join("\n")),b=Ha(b=Ga(b=ja(b),a),a),w=Ha(w=Ga(w=ja(w),a),a),b=qa(b),w=qa(w),a.isWebGL2&&!i.isRawShaderMaterial&&(g=!1,v=/^\s*#version\s+300\s+es\s*\n/,i.isShaderMaterial&&null!==b.match(v)&&null!==w.match(v)&&(g=!0,b=b.replace(v,""),w=w.replace(v,"")),u=["#version 300 es\n","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+u,p=["#version 300 es\n","#define varying in",g?"":"out highp vec4 pc_fragColor;",g?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+p,0<P&&(u=(u=u.replace("#version 300 es\n",["#version 300 es\n","#extension GL_OVR_multiview2 : require","layout(num_views = "+P+") in;","#define VIEW_ID gl_ViewID_OVR"].join("\n"))).replace(["uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;"].join("\n"),["uniform mat4 modelViewMatrices["+P+"];","uniform mat4 projectionMatrices["+P+"];","uniform mat4 viewMatrices["+P+"];","uniform mat3 normalMatrices["+P+"];","#define modelViewMatrix modelViewMatrices[VIEW_ID]","#define projectionMatrix projectionMatrices[VIEW_ID]","#define viewMatrix viewMatrices[VIEW_ID]","#define normalMatrix normalMatrices[VIEW_ID]"].join("\n")),p=(p=p.replace("#version 300 es\n",["#version 300 es\n","#extension GL_OVR_multiview2 : require","#define VIEW_ID gl_ViewID_OVR"].join("\n"))).replace("uniform mat4 viewMatrix;",["uniform mat4 viewMatrices["+P+"];","#define viewMatrix viewMatrices[VIEW_ID]"].join("\n"))));var C,O,D,I,N,z,B,U,F,G=p+w,H=Ia(y,35633,u+b),V=Ia(y,35632,G);return y.attachShader(R,H),y.attachShader(R,V),void 0!==i.index0AttributeName?y.bindAttribLocation(R,0,i.index0AttributeName):!0===a.morphTargets&&y.bindAttribLocation(R,0,"position"),y.linkProgram(R),e.debug.checkShaderErrors&&(C=y.getProgramInfoLog(R).trim(),O=y.getShaderInfoLog(H).trim(),D=y.getShaderInfoLog(V).trim(),!(N=I=!0)===y.getProgramParameter(R,35714)?(I=!1,z=Ba(y,H,"vertex"),B=Ba(y,V,"fragment"),console.error("THREE.WebGLProgram: shader error: ",y.getError(),"35715",y.getProgramParameter(R,35715),"gl.getProgramInfoLog",C,z,B)):""!==C?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",C):""!==O&&""!==D||(N=!1),N&&(this.diagnostics={runnable:I,material:i,programLog:C,vertexShader:{log:O,prefix:u},fragmentShader:{log:D,prefix:p}})),y.deleteShader(H),y.deleteShader(V),this.getUniforms=function(){return void 0===U&&(U=new Da(y,R)),U},this.getAttributes=function(){return void 0===F&&(F=function(e,t){for(var n={},i=e.getProgramParameter(t,35721),r=0;r<i;r++){var a=e.getActiveAttrib(t,r).name;n[a]=e.getAttribLocation(t,a)}return n}(y,R)),F},this.destroy=function(){y.deleteProgram(R),this.program=void 0},this.name=r.name,this.id=Na++,this.cacheKey=n,this.usedTimes=1,this.program=R,this.vertexShader=H,this.fragmentShader=V,this.numMultiviewViews=P,this}function Ja(u,c,p){var l=[],d=p.isWebGL2,f=p.logarithmicDepthBuffer,m=p.floatVertexTextures,g=p.precision,v=p.maxVertexUniforms,y=p.vertexTextures,x={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},a=["precision","isWebGL2","supportsVertexTextures","outputEncoding","instancing","numMultiviewViews","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","envMapCubeUV","lightMap","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoatNormalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","vertexTangents","vertexUvs","uvsVertexOnly","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","numDirLightShadows","numPointLightShadows","numSpotLightShadows","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","sheen"];function b(e,t){var n;return e?e.isTexture?n=e.encoding:e.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),n=e.texture.encoding):n=ht,n===ht&&t&&(n=ut),n}this.getParameters=function(e,t,n,i,r,a,o){var s=x[e.type],c=o.isSkinnedMesh?function(){var t=o.skeleton.bones;if(m)return 1024;var n=Math.floor((v-20)/4),i=Math.min(n,t.length);return i<t.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+t.length+" bones. This GPU supports "+i+"."),0):i}():0;null!==e.precision&&(g=p.getMaxPrecision(e.precision))!==e.precision&&console.warn("THREE.WebGLProgram.getParameters:",e.precision,"not supported, using",g,"instead.");var l=u.getRenderTarget(),h=l&&l.isWebGLMultiviewRenderTarget?l.numViews:0;return{isWebGL2:d,shaderID:s,precision:g,instancing:!0===o.isInstancedMesh,supportsVertexTextures:y,numMultiviewViews:h,outputEncoding:b(l?l.texture:null,u.gammaOutput),map:!!e.map,mapEncoding:b(e.map,u.gammaInput),matcap:!!e.matcap,matcapEncoding:b(e.matcap,u.gammaInput),envMap:!!e.envMap,envMapMode:e.envMap&&e.envMap.mapping,envMapEncoding:b(e.envMap,u.gammaInput),envMapCubeUV:!!e.envMap&&(e.envMap.mapping===He||e.envMap.mapping===Ve),lightMap:!!e.lightMap,aoMap:!!e.aoMap,emissiveMap:!!e.emissiveMap,emissiveMapEncoding:b(e.emissiveMap,u.gammaInput),bumpMap:!!e.bumpMap,normalMap:!!e.normalMap,objectSpaceNormalMap:e.normalMapType===bt,tangentSpaceNormalMap:e.normalMapType===xt,clearcoatNormalMap:!!e.clearcoatNormalMap,displacementMap:!!e.displacementMap,roughnessMap:!!e.roughnessMap,metalnessMap:!!e.metalnessMap,specularMap:!!e.specularMap,alphaMap:!!e.alphaMap,gradientMap:!!e.gradientMap,sheen:!!e.sheen,combine:e.combine,vertexTangents:e.normalMap&&e.vertexTangents,vertexColors:e.vertexColors,vertexUvs:!!(e.map||e.bumpMap||e.normalMap||e.specularMap||e.alphaMap||e.emissiveMap||e.roughnessMap||e.metalnessMap||e.clearcoatNormalMap||e.displacementMap),uvsVertexOnly:!(e.map||e.bumpMap||e.normalMap||e.specularMap||e.alphaMap||e.emissiveMap||e.roughnessMap||e.metalnessMap||e.clearcoatNormalMap||!e.displacementMap),fog:!!i,useFog:e.fog,fogExp2:i&&i.isFogExp2,flatShading:e.flatShading,sizeAttenuation:e.sizeAttenuation,logarithmicDepthBuffer:f,skinning:e.skinning&&0<c,maxBones:c,useVertexTexture:m,morphTargets:e.morphTargets,morphNormals:e.morphNormals,maxMorphTargets:u.maxMorphTargets,maxMorphNormals:u.maxMorphNormals,numDirLights:t.directional.length,numPointLights:t.point.length,numSpotLights:t.spot.length,numRectAreaLights:t.rectArea.length,numHemiLights:t.hemi.length,numDirLightShadows:t.directionalShadowMap.length,numPointLightShadows:t.pointShadowMap.length,numSpotLightShadows:t.spotShadowMap.length,numClippingPlanes:r,numClipIntersection:a,dithering:e.dithering,shadowMapEnabled:u.shadowMap.enabled&&0<n.length,shadowMapType:u.shadowMap.type,toneMapping:e.toneMapped?u.toneMapping:Pe,physicallyCorrectLights:u.physicallyCorrectLights,premultipliedAlpha:e.premultipliedAlpha,alphaTest:e.alphaTest,doubleSided:e.side===Q,flipSided:e.side===_e,depthPacking:void 0!==e.depthPacking&&e.depthPacking}},this.getProgramCacheKey=function(e,t){var n=[];if(t.shaderID?n.push(t.shaderID):(n.push(e.fragmentShader),n.push(e.vertexShader)),void 0!==e.defines)for(var i in e.defines)n.push(i),n.push(e.defines[i]);for(var r=0;r<a.length;r++)n.push(t[a[r]]);return n.push(e.onBeforeCompile.toString()),n.push(u.gammaOutput),n.push(u.gammaFactor),n.join()},this.acquireProgram=function(e,t,n,i){for(var r,a=0,o=l.length;a<o;a++){var s=l[a];if(s.cacheKey===i){++(r=s).usedTimes;break}}return void 0===r&&(r=new Za(u,c,i,e,t,n),l.push(r)),r},this.releaseProgram=function(e){var t;0==--e.usedTimes&&(t=l.indexOf(e),l[t]=l[l.length-1],l.pop(),e.destroy())},this.programs=l}function Qa(){var i=new WeakMap;return{get:function(e){var t=i.get(e);return void 0===t&&(t={},i.set(e,t)),t},remove:function(e){i.delete(e)},update:function(e,t,n){i.get(e)[t]=n},dispose:function(){i=new WeakMap}}}function Ka(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.program!==t.program?e.program.id-t.program.id:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function $a(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function eo(){var s=[],c=0,l=[],h=[],u={id:-1};function p(e,t,n,i,r,a){var o=s[c];return void 0===o?(o={id:e.id,object:e,geometry:t,material:n,program:n.program||u,groupOrder:i,renderOrder:e.renderOrder,z:r,group:a},s[c]=o):(o.id=e.id,o.object=e,o.geometry=t,o.material=n,o.program=n.program||u,o.groupOrder=i,o.renderOrder=e.renderOrder,o.z=r,o.group=a),c++,o}return{opaque:l,transparent:h,init:function(){c=0,l.length=0,h.length=0},push:function(e,t,n,i,r,a){var o=p(e,t,n,i,r,a);(!0===n.transparent?h:l).push(o)},unshift:function(e,t,n,i,r,a){var o=p(e,t,n,i,r,a);(!0===n.transparent?h:l).unshift(o)},sort:function(){1<l.length&&l.sort(Ka),1<h.length&&h.sort($a)}}}function to(){var r=new WeakMap;function a(e){var t=e.target;t.removeEventListener("dispose",a),r.delete(t)}return{get:function(e,t){var n,i=r.get(e);return void 0===i?(n=new eo,r.set(e,new WeakMap),r.get(e).set(t,n),e.addEventListener("dispose",a)):void 0===(n=i.get(t))&&(n=new eo,i.set(t,n)),n},dispose:function(){r=new WeakMap}}}function no(){var n={};return{get:function(e){if(void 0!==n[e.id])return n[e.id];var t;switch(e.type){case"DirectionalLight":t={direction:new Dt,color:new ai,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new Rt};break;case"SpotLight":t={position:new Dt,direction:new Dt,color:new ai,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new Rt};break;case"PointLight":t={position:new Dt,color:new ai,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new Rt,shadowCameraNear:1,shadowCameraFar:1e3};break;case"HemisphereLight":t={direction:new Dt,skyColor:new ai,groundColor:new ai};break;case"RectAreaLight":t={color:new ai,position:new Dt,halfWidth:new Dt,halfHeight:new Dt}}return n[e.id]=t}}}var io=0;function ro(e,t){return(t.castShadow?1:0)-(e.castShadow?1:0)}function ao(){for(var E=new no,A={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},e=0;e<9;e++)A.probe.push(new Dt);var L=new Dt,R=new Jt,P=new Jt;return{setup:function(e,t,n){for(var i=0,r=0,a=0,o=0;o<9;o++)A.probe[o].set(0,0,0);var s=0,c=0,l=0,h=0,u=0,p=0,d=0,f=0,m=n.matrixWorldInverse;e.sort(ro);for(var o=0,g=e.length;o<g;o++){var v,y,x=e[o],b=x.color,w=x.intensity,_=x.distance,M=x.shadow&&x.shadow.map?x.shadow.map.texture:null;if(x.isAmbientLight)i+=b.r*w,r+=b.g*w,a+=b.b*w;else if(x.isLightProbe)for(var S=0;S<9;S++)A.probe[S].addScaledVector(x.sh.coefficients[S],w);else x.isDirectionalLight?((y=E.get(x)).color.copy(x.color).multiplyScalar(x.intensity),y.direction.setFromMatrixPosition(x.matrixWorld),L.setFromMatrixPosition(x.target.matrixWorld),y.direction.sub(L),y.direction.transformDirection(m),y.shadow=x.castShadow,x.castShadow&&(v=x.shadow,y.shadowBias=v.bias,y.shadowRadius=v.radius,y.shadowMapSize=v.mapSize,A.directionalShadowMap[s]=M,A.directionalShadowMatrix[s]=x.shadow.matrix,p++),A.directional[s]=y,s++):x.isSpotLight?((y=E.get(x)).position.setFromMatrixPosition(x.matrixWorld),y.position.applyMatrix4(m),y.color.copy(b).multiplyScalar(w),y.distance=_,y.direction.setFromMatrixPosition(x.matrixWorld),L.setFromMatrixPosition(x.target.matrixWorld),y.direction.sub(L),y.direction.transformDirection(m),y.coneCos=Math.cos(x.angle),y.penumbraCos=Math.cos(x.angle*(1-x.penumbra)),y.decay=x.decay,y.shadow=x.castShadow,x.castShadow&&(v=x.shadow,y.shadowBias=v.bias,y.shadowRadius=v.radius,y.shadowMapSize=v.mapSize,A.spotShadowMap[l]=M,A.spotShadowMatrix[l]=x.shadow.matrix,f++),A.spot[l]=y,l++):x.isRectAreaLight?((y=E.get(x)).color.copy(b).multiplyScalar(w),y.position.setFromMatrixPosition(x.matrixWorld),y.position.applyMatrix4(m),P.identity(),R.copy(x.matrixWorld),R.premultiply(m),P.extractRotation(R),y.halfWidth.set(.5*x.width,0,0),y.halfHeight.set(0,.5*x.height,0),y.halfWidth.applyMatrix4(P),y.halfHeight.applyMatrix4(P),A.rectArea[h]=y,h++):x.isPointLight?((y=E.get(x)).position.setFromMatrixPosition(x.matrixWorld),y.position.applyMatrix4(m),y.color.copy(x.color).multiplyScalar(x.intensity),y.distance=x.distance,y.decay=x.decay,y.shadow=x.castShadow,x.castShadow&&(v=x.shadow,y.shadowBias=v.bias,y.shadowRadius=v.radius,y.shadowMapSize=v.mapSize,y.shadowCameraNear=v.camera.near,y.shadowCameraFar=v.camera.far,A.pointShadowMap[c]=M,A.pointShadowMatrix[c]=x.shadow.matrix,d++),A.point[c]=y,c++):x.isHemisphereLight&&((y=E.get(x)).direction.setFromMatrixPosition(x.matrixWorld),y.direction.transformDirection(m),y.direction.normalize(),y.skyColor.copy(x.color).multiplyScalar(w),y.groundColor.copy(x.groundColor).multiplyScalar(w),A.hemi[u]=y,u++)}A.ambient[0]=i,A.ambient[1]=r,A.ambient[2]=a;var T=A.hash;T.directionalLength===s&&T.pointLength===c&&T.spotLength===l&&T.rectAreaLength===h&&T.hemiLength===u&&T.numDirectionalShadows===p&&T.numPointShadows===d&&T.numSpotShadows===f||(A.directional.length=s,A.spot.length=l,A.rectArea.length=h,A.point.length=c,A.hemi.length=u,A.directionalShadowMap.length=p,A.pointShadowMap.length=d,A.spotShadowMap.length=f,A.directionalShadowMatrix.length=p,A.pointShadowMatrix.length=d,A.spotShadowMatrix.length=f,T.directionalLength=s,T.pointLength=c,T.spotLength=l,T.rectAreaLength=h,T.hemiLength=u,T.numDirectionalShadows=p,T.numPointShadows=d,T.numSpotShadows=f,A.version=io++)},state:A}}function oo(){var t=new ao,n=[],i=[];return{init:function(){n.length=0,i.length=0},state:{lightsArray:n,shadowsArray:i,lights:t},setupLights:function(e){t.setup(n,i,e)},pushLight:function(e){n.push(e)},pushShadow:function(e){i.push(e)}}}function so(){var i=new WeakMap;function r(e){var t=e.target;t.removeEventListener("dispose",r),i.delete(t)}return{get:function(e,t){var n;return!1===i.has(e)?(n=new oo,i.set(e,new WeakMap),i.get(e).set(t,n),e.addEventListener("dispose",r)):!1===i.get(e).has(t)?(n=new oo,i.get(e).set(t,n)):n=i.get(e).get(t),n},dispose:function(){i=new WeakMap}}}function co(e){ui.call(this),this.type="MeshDepthMaterial",this.depthPacking=vt,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(e)}function lo(e){ui.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new Dt,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(e)}((co.prototype=Object.create(ui.prototype)).constructor=co).prototype.isMeshDepthMaterial=!0,co.prototype.copy=function(e){return ui.prototype.copy.call(this,e),this.depthPacking=e.depthPacking,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this},((lo.prototype=Object.create(ui.prototype)).constructor=lo).prototype.isMeshDistanceMaterial=!0,lo.prototype.copy=function(e){return ui.prototype.copy.call(this,e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this};var ho="uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n  float mean = 0.0;\n  float squared_mean = 0.0;\n  \n\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy  ) / resolution ) );\n  for ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {\n    #ifdef HORIZONAL_PASS\n      vec2 distribution = decodeHalfRGBA ( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );\n      mean += distribution.x;\n      squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n    #else\n      float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0,  i )  * radius ) / resolution ) );\n      mean += depth;\n      squared_mean += depth * depth;\n    #endif\n  }\n  mean = mean * HALF_SAMPLE_RATE;\n  squared_mean = squared_mean * HALF_SAMPLE_RATE;\n  float std_dev = pow( squared_mean - mean * mean, 0.5 );\n  gl_FragColor = encodeHalfRGBA( vec2( mean, std_dev ) );\n}",uo="void main() {\n\tgl_Position = vec4( position, 1.0 );\n}";function po(x,b,w){var _=new xr,M=new Rt,S=new Rt,T=new Gt,a=[],o=[],g={},v={0:_e,1:O,2:Q},E=new ur({defines:{SAMPLE_RATE:.25,HALF_SAMPLE_RATE:1/8},uniforms:{shadow_pass:{value:null},resolution:{value:new Rt},radius:{value:4}},vertexShader:uo,fragmentShader:ho}),A=E.clone();A.defines.HORIZONAL_PASS=1;var e=new Oi;e.setAttribute("position",new di(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));var L=new Ji(e,E),R=this;function y(e,t,n){var i=e<<0|t<<1|n<<2,r=a[i];return void 0===r&&(r=new co({depthPacking:yt,morphTargets:e,skinning:t}),a[i]=r),r}function P(e,t,n){var i=e<<0|t<<1|n<<2,r=o[i];return void 0===r&&(r=new lo({morphTargets:e,skinning:t}),o[i]=r),r}function C(e,t,n,i,r,a){var o,s,c,l,h,u,p=e.geometry,d=null,f=y,m=e.customDepthMaterial;return!0===n.isPointLight&&(f=P,m=e.customDistanceMaterial),d=void 0===m?(!(o=!1)===t.morphTargets&&(!0===p.isBufferGeometry?o=p.morphAttributes&&p.morphAttributes.position&&0<p.morphAttributes.position.length:!0===p.isGeometry&&(o=p.morphTargets&&0<p.morphTargets.length)),!(s=!1)===e.isSkinnedMesh&&(!0===t.skinning?s=!0:console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",e)),f(o,s,!0===e.isInstancedMesh)):m,x.localClippingEnabled&&!0===t.clipShadows&&0!==t.clippingPlanes.length&&(c=d.uuid,l=t.uuid,void 0===(h=g[c])&&(h={},g[c]=h),void 0===(u=h[l])&&(u=d.clone(),h[l]=u),d=u),d.visible=t.visible,d.wireframe=t.wireframe,d.side=a===W?null!==t.shadowSide?t.shadowSide:t.side:null!==t.shadowSide?t.shadowSide:v[t.side],d.clipShadows=t.clipShadows,d.clippingPlanes=t.clippingPlanes,d.clipIntersection=t.clipIntersection,d.wireframeLinewidth=t.wireframeLinewidth,d.linewidth=t.linewidth,!0===n.isPointLight&&!0===d.isMeshDistanceMaterial&&(d.referencePosition.setFromMatrixPosition(n.matrixWorld),d.nearDistance=i,d.farDistance=r),d}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=j,this.render=function(e,t,n){if(!1!==R.enabled&&(!1!==R.autoUpdate||!1!==R.needsUpdate)&&0!==e.length){var i=x.getRenderTarget(),r=x.getActiveCubeFace(),a=x.getActiveMipmapLevel(),o=x.state;o.setBlending(K),o.buffers.color.setClear(1,1,1,1),o.buffers.depth.setTest(!0),o.setScissorTest(!1);for(var s,c,l,h=0,u=e.length;h<u;h++){var p=e[h],d=p.shadow;if(void 0!==d){M.copy(d.mapSize);var f,m=d.getFrameExtents();M.multiply(m),S.copy(d.mapSize),(M.x>w||M.y>w)&&(console.warn("THREE.WebGLShadowMap:",p,"has shadow exceeding max texture size, reducing"),M.x>w&&(S.x=Math.floor(w/m.x),M.x=S.x*m.x,d.mapSize.x=S.x),M.y>w&&(S.y=Math.floor(w/m.y),M.y=S.y*m.y,d.mapSize.y=S.y)),null!==d.map||d.isPointLightShadow||this.type!==W||(f={minFilter:qe,magFilter:qe,format:nt},d.map=new Ht(M.x,M.y,f),d.map.texture.name=p.name+".shadowMap",d.mapPass=new Ht(M.x,M.y,f),d.camera.updateProjectionMatrix()),null===d.map&&(f={minFilter:je,magFilter:je,format:nt},d.map=new Ht(M.x,M.y,f),d.map.texture.name=p.name+".shadowMap",d.camera.updateProjectionMatrix()),x.setRenderTarget(d.map),x.clear();for(var g=d.getViewportCount(),v=0;v<g;v++){var y=d.getViewport(v);T.set(S.x*y.x,S.y*y.y,S.x*y.z,S.y*y.w),o.viewport(T),d.updateMatrices(p,v),_=d.getFrustum(),function e(t,n,i,r,a){if(!1!==t.visible){if(t.layers.test(n.layers)&&(t.isMesh||t.isLine||t.isPoints)&&(t.castShadow||t.receiveShadow&&a===W)&&(!t.frustumCulled||_.intersectsObject(t))){t.modelViewMatrix.multiplyMatrices(i.matrixWorldInverse,t.matrixWorld);var s=b.update(t),c=t.material;if(Array.isArray(c))for(var l=s.groups,h=0,u=l.length;h<u;h++){var p,d=l[h],f=c[d.materialIndex];f&&f.visible&&(p=C(t,f,r,i.near,i.far,a),x.renderBufferDirect(i,null,s,p,t,d))}else c.visible&&(p=C(t,c,r,i.near,i.far,a),x.renderBufferDirect(i,null,s,p,t,null))}for(var m=t.children,g=0,v=m.length;g<v;g++)e(m[g],n,i,r,a)}}(t,n,d.camera,p,this.type)}d.isPointLightShadow||this.type!==W||(s=d,c=n,l=b.update(L),E.uniforms.shadow_pass.value=s.map.texture,E.uniforms.resolution.value=s.mapSize,E.uniforms.radius.value=s.radius,x.setRenderTarget(s.mapPass),x.clear(),x.renderBufferDirect(c,null,l,E,L,null),A.uniforms.shadow_pass.value=s.mapPass.texture,A.uniforms.resolution.value=s.mapSize,A.uniforms.radius.value=s.radius,x.setRenderTarget(s.map),x.clear(),x.renderBufferDirect(c,null,l,A,L,null))}else console.warn("THREE.WebGLShadowMap:",p,"has no shadow.")}R.needsUpdate=!1,x.setRenderTarget(i,r,a)}}}function fo(h,n,e){var i=e.isWebGL2,r=new function(){var t=!1,a=new Gt,n=null,o=new Gt(0,0,0,0);return{setMask:function(e){n===e||t||(h.colorMask(e,e,e,e),n=e)},setLocked:function(e){t=e},setClear:function(e,t,n,i,r){!0===r&&(e*=i,t*=i,n*=i),a.set(e,t,n,i),!1===o.equals(a)&&(h.clearColor(e,t,n,i),o.copy(a))},reset:function(){t=!1,n=null,o.set(-1,0,0,0)}}},a=new function(){var t=!1,n=null,i=null,r=null;return{setTest:function(e){(e?U:F)(2929)},setMask:function(e){n===e||t||(h.depthMask(e),n=e)},setFunc:function(e){if(i!==e){if(e)switch(e){case be:h.depthFunc(512);break;case we:h.depthFunc(519);break;case Me:h.depthFunc(513);break;case Se:h.depthFunc(515);break;case Te:h.depthFunc(514);break;case Ee:h.depthFunc(518);break;case Ae:h.depthFunc(516);break;case Le:h.depthFunc(517);break;default:h.depthFunc(515)}else h.depthFunc(515);i=e}},setLocked:function(e){t=e},setClear:function(e){r!==e&&(h.clearDepth(e),r=e)},reset:function(){t=!1,r=i=n=null}}},o=new function(){var t=!1,n=null,i=null,r=null,a=null,o=null,s=null,c=null,l=null;return{setTest:function(e){t||(e?U:F)(2960)},setMask:function(e){n===e||t||(h.stencilMask(e),n=e)},setFunc:function(e,t,n){i===e&&r===t&&a===n||(h.stencilFunc(e,t,n),i=e,r=t,a=n)},setOp:function(e,t,n){o===e&&s===t&&c===n||(h.stencilOp(e,t,n),o=e,s=t,c=n)},setLocked:function(e){t=e},setClear:function(e){l!==e&&(h.clearStencil(e),l=e)},reset:function(){t=!1,l=c=s=o=a=r=i=n=null}}},t=h.getParameter(34921),s=new Uint8Array(t),c=new Uint8Array(t),l=new Uint8Array(t),u={},p=null,d=null,f=null,m=null,g=null,v=null,y=null,x=null,b=null,w=!1,_=null,M=null,S=null,T=null,E=null,A=h.getParameter(35661),L=!1,R=0,P=h.getParameter(7938);-1!==P.indexOf("WebGL")?(R=parseFloat(/^WebGL\ ([0-9])/.exec(P)[1]),L=1<=R):-1!==P.indexOf("OpenGL ES")&&(R=parseFloat(/^OpenGL\ ES\ ([0-9])/.exec(P)[1]),L=2<=R);var C=null,O={},D=new Gt,I=new Gt;function N(e,t,n){var i=new Uint8Array(4),r=h.createTexture();h.bindTexture(e,r),h.texParameteri(e,10241,9728),h.texParameteri(e,10240,9728);for(var a=0;a<n;a++)h.texImage2D(t+a,0,6408,1,1,0,6408,5121,i);return r}var z={};function B(e,t){s[e]=1,0===c[e]&&(h.enableVertexAttribArray(e),c[e]=1),l[e]!==t&&((i?h:n.get("ANGLE_instanced_arrays"))[i?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](e,t),l[e]=t)}function U(e){!0!==u[e]&&(h.enable(e),u[e]=!0)}function F(e){!1!==u[e]&&(h.disable(e),u[e]=!1)}z[3553]=N(3553,3553,1),z[34067]=N(34067,34069,6),r.setClear(0,0,0,1),a.setClear(1),o.setClear(0),U(2929),a.setFunc(Se),k(!1),W(Z),U(2884),j(K);var G,H={};H[re]=32774,H[ae]=32778,H[oe]=32779,i?(H[se]=32775,H[ce]=32776):null!==(G=n.get("EXT_blend_minmax"))&&(H[se]=G.MIN_EXT,H[ce]=G.MIN_EXT);var V={};function j(e,t,n,i,r,a,o,s){if(e!==K){if(d||(U(3042),d=!0),e===ie)r=r||t,a=a||n,o=o||i,t===m&&r===y||(h.blendEquationSeparate(H[t],H[r]),m=t,y=r),n===g&&i===v&&a===x&&o===b||(h.blendFuncSeparate(V[n],V[i],V[a],V[o]),g=n,v=i,x=a,b=o),f=e,w=null;else if(e!==f||s!==w){if(m===re&&y===re||(h.blendEquation(32774),y=m=re),s)switch(e){case $:h.blendFuncSeparate(1,771,1,771);break;case ee:h.blendFunc(1,1);break;case te:h.blendFuncSeparate(0,0,769,771);break;case ne:h.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",e)}else switch(e){case $:h.blendFuncSeparate(770,771,1,771);break;case ee:h.blendFunc(770,1);break;case te:h.blendFunc(0,769);break;case ne:h.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",e)}b=x=v=g=null,f=e,w=s}}else d&&(F(3042),d=!1)}function k(e){_!==e&&(e?h.frontFace(2304):h.frontFace(2305),_=e)}function W(e){e!==Y?(U(2884),e!==M&&(e===Z?h.cullFace(1029):e===J?h.cullFace(1028):h.cullFace(1032))):F(2884),M=e}function q(e,t,n){e?(U(32823),T===t&&E===n||(h.polygonOffset(t,n),T=t,E=n)):F(32823)}function X(e){void 0===e&&(e=33984+A-1),C!==e&&(h.activeTexture(e),C=e)}return V[le]=0,V[he]=1,V[ue]=768,V[de]=770,V[xe]=776,V[ve]=774,V[me]=772,V[pe]=769,V[fe]=771,V[ye]=775,V[ge]=773,{buffers:{color:r,depth:a,stencil:o},initAttributes:function(){for(var e=0,t=s.length;e<t;e++)s[e]=0},enableAttribute:function(e){B(e,0)},enableAttributeAndDivisor:B,disableUnusedAttributes:function(){for(var e=0,t=c.length;e!==t;++e)c[e]!==s[e]&&(h.disableVertexAttribArray(e),c[e]=0)},enable:U,disable:F,useProgram:function(e){return p!==e&&(h.useProgram(e),p=e,!0)},setBlending:j,setMaterial:function(e,t){(e.side===Q?F:U)(2884);var n=e.side===_e;t&&(n=!n),k(n),e.blending===$&&!1===e.transparent?j(K):j(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha),a.setFunc(e.depthFunc),a.setTest(e.depthTest),a.setMask(e.depthWrite),r.setMask(e.colorWrite);var i=e.stencilWrite;o.setTest(i),i&&(o.setMask(e.stencilWriteMask),o.setFunc(e.stencilFunc,e.stencilRef,e.stencilFuncMask),o.setOp(e.stencilFail,e.stencilZFail,e.stencilZPass)),q(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits)},setFlipSided:k,setCullFace:W,setLineWidth:function(e){e!==S&&(L&&h.lineWidth(e),S=e)},setPolygonOffset:q,setScissorTest:function(e){(e?U:F)(3089)},activeTexture:X,bindTexture:function(e,t){null===C&&X();var n=O[C];void 0===n&&(n={type:void 0,texture:void 0},O[C]=n),n.type===e&&n.texture===t||(h.bindTexture(e,t||z[e]),n.type=e,n.texture=t)},unbindTexture:function(){var e=O[C];void 0!==e&&void 0!==e.type&&(h.bindTexture(e.type,null),e.type=void 0,e.texture=void 0)},compressedTexImage2D:function(){try{h.compressedTexImage2D.apply(h,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage2D:function(){try{h.texImage2D.apply(h,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage3D:function(){try{h.texImage3D.apply(h,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},scissor:function(e){!1===D.equals(e)&&(h.scissor(e.x,e.y,e.z,e.w),D.copy(e))},viewport:function(e){!1===I.equals(e)&&(h.viewport(e.x,e.y,e.z,e.w),I.copy(e))},reset:function(){for(var e=0;e<c.length;e++)1===c[e]&&(h.disableVertexAttribArray(e),c[e]=0);u={},O={},M=_=f=p=C=null,r.reset(),a.reset(),o.reset()}}}function mo(v,y,x,b,r,w,_){var l,M=r.isWebGL2,t=r.maxTextures,g=r.maxCubemapSize,m=r.maxTextureSize,n=r.maxSamples,o=new WeakMap,i="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d");function h(e,t){return i?new OffscreenCanvas(e,t):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function S(e,t,n,i){var r=1;if((e.width>i||e.height>i)&&(r=i/Math.max(e.width,e.height)),r<1||!0===t){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){var a=t?Lt.floorPowerOfTwo:Math.floor,o=a(r*e.width),s=a(r*e.height);void 0===l&&(l=h(o,s));var c=n?h(o,s):l;return c.width=o,c.height=s,c.getContext("2d").drawImage(e,0,0,o,s),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+e.width+"x"+e.height+") to ("+o+"x"+s+")."),c}return"data"in e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+e.width+"x"+e.height+")."),e}return e}function T(e){return Lt.isPowerOfTwo(e.width)&&Lt.isPowerOfTwo(e.height)}function E(e,t){return e.generateMipmaps&&t&&e.minFilter!==je&&e.minFilter!==qe}function A(e,t,n,i){v.generateMipmap(e),b.get(t).__maxMipLevel=Math.log(Math.max(n,i))*Math.LOG2E}function L(e,t){if(!1===M)return e;var n=e;return 6403===e&&(5126===t&&(n=33326),5131===t&&(n=33325),5121===t&&(n=33321)),6407===e&&(5126===t&&(n=34837),5131===t&&(n=34843),5121===t&&(n=32849)),6408===e&&(5126===t&&(n=34836),5131===t&&(n=34842),5121===t&&(n=32856)),33325===n||33326===n||34842===n||34836===n?y.get("EXT_color_buffer_float"):34843!==n&&34837!==n||console.warn("THREE.WebGLRenderer: Floating point textures with RGB format not supported. Please use RGBA instead."),n}function a(e){return e===je||e===ke||e===We?9728:9729}function s(e){var t=e.target;t.removeEventListener("dispose",s),function(e){var t=b.get(e);void 0!==t.__webglInit&&(v.deleteTexture(t.__webglTexture),b.remove(e))}(t),t.isVideoTexture&&o.delete(t),_.memory.textures--}function R(e){var t=e.target;t.removeEventListener("dispose",R),function(e){var t=b.get(e),n=b.get(e.texture);if(e){if(void 0!==n.__webglTexture&&v.deleteTexture(n.__webglTexture),e.depthTexture&&e.depthTexture.dispose(),e.isWebGLRenderTargetCube)for(var i=0;i<6;i++)v.deleteFramebuffer(t.__webglFramebuffer[i]),t.__webglDepthbuffer&&v.deleteRenderbuffer(t.__webglDepthbuffer[i]);else v.deleteFramebuffer(t.__webglFramebuffer),t.__webglDepthbuffer&&v.deleteRenderbuffer(t.__webglDepthbuffer);if(e.isWebGLMultiviewRenderTarget){v.deleteTexture(t.__webglColorTexture),v.deleteTexture(t.__webglDepthStencilTexture),_.memory.textures-=2;for(var i=0,r=t.__webglViewFramebuffers.length;i<r;i++)v.deleteFramebuffer(t.__webglViewFramebuffers[i])}b.remove(e.texture),b.remove(e)}}(t),_.memory.textures--}var c=0;function u(e,t){var n,i,r=b.get(e);if(e.isVideoTexture&&(n=e,i=_.render.frame,o.get(n)!==i&&(o.set(n,i),n.update())),0<e.version&&r.__version!==e.version){var a=e.image;if(void 0===a)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==a.complete)return void D(r,e,t);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}x.activeTexture(33984+t),x.bindTexture(3553,r.__webglTexture)}function p(e,t){if(6===e.image.length){var n=b.get(e);if(0<e.version&&n.__version!==e.version){O(n,e),x.activeTexture(33984+t),x.bindTexture(34067,n.__webglTexture),v.pixelStorei(37440,e.flipY);for(var i=e&&e.isCompressedTexture,r=e.image[0]&&e.image[0].isDataTexture,a=[],o=0;o<6;o++)a[o]=i||r?r?e.image[o].image:e.image[o]:S(e.image[o],!1,!0,g);var s,c=a[0],l=T(c)||M,h=w.convert(e.format),u=w.convert(e.type),p=L(h,u);if(C(34067,e,l),i){for(o=0;o<6;o++){s=a[o].mipmaps;for(var d=0;d<s.length;d++){var f=s[d];e.format!==nt&&e.format!==tt?null!==h?x.compressedTexImage2D(34069+o,d,p,f.width,f.height,0,f.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):x.texImage2D(34069+o,d,p,f.width,f.height,0,h,u,f.data)}}n.__maxMipLevel=s.length-1}else{for(s=e.mipmaps,o=0;o<6;o++)if(r)for(x.texImage2D(34069+o,0,p,a[o].width,a[o].height,0,h,u,a[o].data),d=0;d<s.length;d++){var m=(f=s[d]).image[o].image;x.texImage2D(34069+o,d+1,p,m.width,m.height,0,h,u,m.data)}else for(x.texImage2D(34069+o,0,p,h,u,a[o]),d=0;d<s.length;d++)f=s[d],x.texImage2D(34069+o,d+1,p,h,u,f.image[o]);n.__maxMipLevel=s.length}E(e,l)&&A(34067,e,c.width,c.height),n.__version=e.version,e.onUpdate&&e.onUpdate(e)}else x.activeTexture(33984+t),x.bindTexture(34067,n.__webglTexture)}}function d(e,t){x.activeTexture(33984+t),x.bindTexture(34067,b.get(e).__webglTexture)}var f={};f[G]=10497,f[H]=33071,f[V]=33648;var P={};function C(e,t,n){n?(v.texParameteri(e,10242,f[t.wrapS]),v.texParameteri(e,10243,f[t.wrapT]),32879!==e&&35866!==e||v.texParameteri(e,32882,f[t.wrapR]),v.texParameteri(e,10240,P[t.magFilter]),v.texParameteri(e,10241,P[t.minFilter])):(v.texParameteri(e,10242,33071),v.texParameteri(e,10243,33071),32879!==e&&35866!==e||v.texParameteri(e,32882,33071),t.wrapS===H&&t.wrapT===H||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),v.texParameteri(e,10240,a(t.magFilter)),v.texParameteri(e,10241,a(t.minFilter)),t.minFilter!==je&&t.minFilter!==qe&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter."));var i=y.get("EXT_texture_filter_anisotropic");if(i){if(t.type===Ke&&null===y.get("OES_texture_float_linear"))return;if(t.type===$e&&null===(M||y.get("OES_texture_half_float_linear")))return;(1<t.anisotropy||b.get(t).__currentAnisotropy)&&(v.texParameterf(e,i.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(t.anisotropy,r.getMaxAnisotropy())),b.get(t).__currentAnisotropy=t.anisotropy)}}function O(e,t){void 0===e.__webglInit&&(e.__webglInit=!0,t.addEventListener("dispose",s),e.__webglTexture=v.createTexture(),_.memory.textures++)}function D(e,t,n){var i=3553;t.isDataTexture2DArray&&(i=35866),t.isDataTexture3D&&(i=32879),O(e,t),x.activeTexture(33984+n),x.bindTexture(i,e.__webglTexture),v.pixelStorei(37440,t.flipY),v.pixelStorei(37441,t.premultiplyAlpha),v.pixelStorei(3317,t.unpackAlignment);var a=!M&&(t.wrapS!==H||t.wrapT!==H||t.minFilter!==je&&t.minFilter!==qe)&&!1===T(t.image),o=S(t.image,a,!1,m),s=T(o)||M,c=w.convert(t.format),l=w.convert(t.type),h=L(c,l);C(i,t,s);var u,p=t.mipmaps;if(t.isDepthTexture){if(h=6402,t.type===Ke){if(!1===M)throw new Error("Float Depth Texture only supported in WebGL2.0");h=36012}else M&&(h=33189);t.format===it&&6402===h&&t.type!==Je&&t.type!==Qe&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),t.type=Je,l=w.convert(t.type)),t.format===rt&&(h=34041,t.type!==et&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),t.type=et,l=w.convert(t.type))),x.texImage2D(3553,0,h,o.width,o.height,0,c,l,null)}else if(t.isDataTexture)if(0<p.length&&s){for(var d=0,f=p.length;d<f;d++)u=p[d],x.texImage2D(3553,d,h,u.width,u.height,0,c,l,u.data);t.generateMipmaps=!1,e.__maxMipLevel=p.length-1}else x.texImage2D(3553,0,h,o.width,o.height,0,c,l,o.data),e.__maxMipLevel=0;else if(t.isCompressedTexture){for(d=0,f=p.length;d<f;d++)u=p[d],t.format!==nt&&t.format!==tt?null!==c?x.compressedTexImage2D(3553,d,h,u.width,u.height,0,u.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):x.texImage2D(3553,d,h,u.width,u.height,0,c,l,u.data);e.__maxMipLevel=p.length-1}else if(t.isDataTexture2DArray)x.texImage3D(35866,0,h,o.width,o.height,o.depth,0,c,l,o.data),e.__maxMipLevel=0;else if(t.isDataTexture3D)x.texImage3D(32879,0,h,o.width,o.height,o.depth,0,c,l,o.data),e.__maxMipLevel=0;else if(0<p.length&&s){for(d=0,f=p.length;d<f;d++)u=p[d],x.texImage2D(3553,d,h,c,l,u);t.generateMipmaps=!1,e.__maxMipLevel=p.length-1}else x.texImage2D(3553,0,h,c,l,o),e.__maxMipLevel=0;E(t,s)&&A(3553,t,o.width,o.height),e.__version=t.version,t.onUpdate&&t.onUpdate(t)}function I(e,t,n,i){var r=w.convert(t.texture.format),a=w.convert(t.texture.type),o=L(r,a);x.texImage2D(i,0,o,t.width,t.height,0,r,a,null),v.bindFramebuffer(36160,e),v.framebufferTexture2D(36160,n,i,b.get(t.texture).__webglTexture,0),v.bindFramebuffer(36160,null)}function N(e,t,n){var i,r;v.bindRenderbuffer(36161,e),t.depthBuffer&&!t.stencilBuffer?(n?(r=B(t),v.renderbufferStorageMultisample(36161,r,33189,t.width,t.height)):v.renderbufferStorage(36161,33189,t.width,t.height),v.framebufferRenderbuffer(36160,36096,36161,e)):t.depthBuffer&&t.stencilBuffer?(n?(r=B(t),v.renderbufferStorageMultisample(36161,r,35056,t.width,t.height)):v.renderbufferStorage(36161,34041,t.width,t.height),v.framebufferRenderbuffer(36160,33306,36161,e)):(i=L(w.convert(t.texture.format),w.convert(t.texture.type)),n?(r=B(t),v.renderbufferStorageMultisample(36161,r,i,t.width,t.height)):v.renderbufferStorage(36161,i,t.width,t.height)),v.bindRenderbuffer(36161,null)}function z(e){var t=b.get(e),n=!0===e.isWebGLRenderTargetCube;if(e.depthTexture){if(n)throw new Error("target.depthTexture not supported in Cube render targets");!function(e,t){if(t&&t.isWebGLRenderTargetCube)throw new Error("Depth Texture with cube render targets is not supported");if(v.bindFramebuffer(36160,e),!t.depthTexture||!t.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");b.get(t.depthTexture).__webglTexture&&t.depthTexture.image.width===t.width&&t.depthTexture.image.height===t.height||(t.depthTexture.image.width=t.width,t.depthTexture.image.height=t.height,t.depthTexture.needsUpdate=!0),u(t.depthTexture,0);var n=b.get(t.depthTexture).__webglTexture;if(t.depthTexture.format===it)v.framebufferTexture2D(36160,36096,3553,n,0);else{if(t.depthTexture.format!==rt)throw new Error("Unknown depthTexture format");v.framebufferTexture2D(36160,33306,3553,n,0)}}(t.__webglFramebuffer,e)}else if(n){t.__webglDepthbuffer=[];for(var i=0;i<6;i++)v.bindFramebuffer(36160,t.__webglFramebuffer[i]),t.__webglDepthbuffer[i]=v.createRenderbuffer(),N(t.__webglDepthbuffer[i],e)}else v.bindFramebuffer(36160,t.__webglFramebuffer),t.__webglDepthbuffer=v.createRenderbuffer(),N(t.__webglDepthbuffer,e);v.bindFramebuffer(36160,null)}function B(e){return M&&e.isWebGLMultisampleRenderTarget?Math.min(n,e.samples):0}P[je]=9728,P[ke]=9984,P[We]=9986,P[qe]=9729,P[Xe]=9985;var U=!(P[Ye]=9987),F=!1;this.allocateTextureUnit=function(){var e=c;return t<=e&&console.warn("THREE.WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+t),c+=1,e},this.resetTextureUnits=function(){c=0},this.setTexture2D=u,this.setTexture2DArray=function(e,t){var n=b.get(e);0<e.version&&n.__version!==e.version?D(n,e,t):(x.activeTexture(33984+t),x.bindTexture(35866,n.__webglTexture))},this.setTexture3D=function(e,t){var n=b.get(e);0<e.version&&n.__version!==e.version?D(n,e,t):(x.activeTexture(33984+t),x.bindTexture(32879,n.__webglTexture))},this.setTextureCube=p,this.setTextureCubeDynamic=d,this.setupRenderTarget=function(e){var t=b.get(e),n=b.get(e.texture);e.addEventListener("dispose",R),n.__webglTexture=v.createTexture(),_.memory.textures++;var i,r,a=!0===e.isWebGLRenderTargetCube,o=!0===e.isWebGLMultisampleRenderTarget,s=!0===e.isWebGLMultiviewRenderTarget,c=T(e)||M;if(a){t.__webglFramebuffer=[];for(var l=0;l<6;l++)t.__webglFramebuffer[l]=v.createFramebuffer()}else if(t.__webglFramebuffer=v.createFramebuffer(),o)M?(t.__webglMultisampledFramebuffer=v.createFramebuffer(),t.__webglColorRenderbuffer=v.createRenderbuffer(),v.bindRenderbuffer(36161,t.__webglColorRenderbuffer),i=L(w.convert(e.texture.format),w.convert(e.texture.type)),r=B(e),v.renderbufferStorageMultisample(36161,r,i,e.width,e.height),v.bindFramebuffer(36160,t.__webglMultisampledFramebuffer),v.framebufferRenderbuffer(36160,36064,36161,t.__webglColorRenderbuffer),v.bindRenderbuffer(36161,null),e.depthBuffer&&(t.__webglDepthRenderbuffer=v.createRenderbuffer(),N(t.__webglDepthRenderbuffer,e,!0)),v.bindFramebuffer(36160,null)):console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");else if(s){var h=e.width,u=e.height,p=e.numViews;v.bindFramebuffer(36160,t.__webglFramebuffer);var d=y.get("OVR_multiview2");_.memory.textures+=2;var f=v.createTexture();v.bindTexture(35866,f),v.texParameteri(35866,10240,9728),v.texParameteri(35866,10241,9728),v.texImage3D(35866,0,32856,h,u,p,0,6408,5121,null),d.framebufferTextureMultiviewOVR(36160,36064,f,0,0,p);var m=v.createTexture();v.bindTexture(35866,m),v.texParameteri(35866,10240,9728),v.texParameteri(35866,10241,9728),v.texImage3D(35866,0,35056,h,u,p,0,34041,34042,null),d.framebufferTextureMultiviewOVR(36160,33306,m,0,0,p);for(var g=new Array(p),l=0;l<p;++l)g[l]=v.createFramebuffer(),v.bindFramebuffer(36160,g[l]),v.framebufferTextureLayer(36160,36064,f,0,l);t.__webglColorTexture=f,t.__webglDepthStencilTexture=m,t.__webglViewFramebuffers=g,v.bindFramebuffer(36160,null),v.bindTexture(35866,null)}if(a){for(x.bindTexture(34067,n.__webglTexture),C(34067,e.texture,c),l=0;l<6;l++)I(t.__webglFramebuffer[l],e,36064,34069+l);E(e.texture,c)&&A(34067,e.texture,e.width,e.height),x.bindTexture(34067,null)}else s||(x.bindTexture(3553,n.__webglTexture),C(3553,e.texture,c),I(t.__webglFramebuffer,e,36064,3553),E(e.texture,c)&&A(3553,e.texture,e.width,e.height),x.bindTexture(3553,null));e.depthBuffer&&z(e)},this.updateRenderTargetMipmap=function(e){var t,n,i=e.texture;E(i,T(e)||M)&&(t=e.isWebGLRenderTargetCube?34067:3553,n=b.get(i).__webglTexture,x.bindTexture(t,n),A(t,i,e.width,e.height),x.bindTexture(t,null))},this.updateMultisampleRenderTarget=function(e){var t,n,i,r;e.isWebGLMultisampleRenderTarget&&(M?(t=b.get(e),v.bindFramebuffer(36008,t.__webglMultisampledFramebuffer),v.bindFramebuffer(36009,t.__webglFramebuffer),n=e.width,i=e.height,r=16384,e.depthBuffer&&(r|=256),e.stencilBuffer&&(r|=1024),v.blitFramebuffer(0,0,n,i,0,0,n,i,r,9728)):console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2."))},this.safeSetTexture2D=function(e,t){e&&e.isWebGLRenderTarget&&(!1===U&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),U=!0),e=e.texture),u(e,t)},this.safeSetTextureCube=function(e,t){e&&e.isWebGLRenderTargetCube&&(!1===F&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),F=!0),e=e.texture),(e&&e.isCubeTexture||Array.isArray(e.image)&&6===e.image.length?p:d)(e,t)}}function go(e,n,t){var i=t.isWebGL2;return{convert:function(e){var t;if(e===Ze)return 5121;if(e===c)return 32819;if(e===l)return 32820;if(e===h)return 33635;if(e===r)return 5120;if(e===a)return 5122;if(e===Je)return 5123;if(e===s)return 5124;if(e===Qe)return 5125;if(e===Ke)return 5126;if(e===$e)return i?5131:null!==(t=n.get("OES_texture_half_float"))?t.HALF_FLOAT_OES:null;if(e===u)return 6406;if(e===tt)return 6407;if(e===nt)return 6408;if(e===p)return 6409;if(e===d)return 6410;if(e===it)return 6402;if(e===rt)return 34041;if(e===f)return 6403;if(e===m||e===g||e===y||e===x){if(null===(t=n.get("WEBGL_compressed_texture_s3tc")))return null;if(e===m)return t.COMPRESSED_RGB_S3TC_DXT1_EXT;if(e===g)return t.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(e===y)return t.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(e===x)return t.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(e===b||e===w||e===_||e===M){if(null===(t=n.get("WEBGL_compressed_texture_pvrtc")))return null;if(e===b)return t.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(e===w)return t.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(e===_)return t.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(e===M)return t.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}return e===S?null!==(t=n.get("WEBGL_compressed_texture_etc1"))?t.COMPRESSED_RGB_ETC1_WEBGL:null:e===T||e===E||e===A||e===L||e===R||e===P||e===C||e===D||e===I||e===N||e===z||e===B||e===U||e===F?null!==(t=n.get("WEBGL_compressed_texture_astc"))?e:null:e===et?i?34042:null!==(t=n.get("WEBGL_depth_texture"))?t.UNSIGNED_INT_24_8_WEBGL:null:void 0}}}function vo(e,t,n,i){Ht.call(this,e,t,i),this.depthBuffer=!1,this.stencilBuffer=!1,this.numViews=n}function yo(i,p){var d,r,a,o,n,f,s,l=i.extensions,m=i.properties,h=0;function u(e){return e.isArrayCamera?e.cameras:(n[0]=e,n)}this.isAvailable=function(){if(void 0===s){var e=l.get("OVR_multiview2");if(s=null!==e&&!1===p.getContextAttributes().antialias){h=p.getParameter(e.MAX_VIEWS_OVR),d=new vo(0,0,2),f=new Rt,o=[],a=[],n=[];for(var t=0;t<h;t++)o[t]=new Jt,a[t]=new zt}}return s},this.attachCamera=function(e){var t,n;!1!==function(e){if(void 0===e.isArrayCamera)return!0;var t=e.cameras;if(t.length>h)return!1;for(var n=1,i=t.length;n<i;n++)if(t[0].viewport.z!==t[n].viewport.z||t[0].viewport.w!==t[n].viewport.w)return!1;return!0}(e)&&(t=e,(r=i.getRenderTarget())?f.set(r.width,r.height):i.getDrawingBufferSize(f),t.isArrayCamera?(n=t.cameras[0].viewport,d.setSize(n.z,n.w),d.setNumViews(t.cameras.length)):(d.setSize(f.x,f.y),d.setNumViews(2)),i.setRenderTarget(d))},this.detachCamera=function(e){d===i.getRenderTarget()&&(i.setRenderTarget(r),function(e){var t=d,n=t.numViews,i=m.get(t).__webglViewFramebuffers,r=t.width,a=t.height;if(e.isArrayCamera)for(var o=0;o<n;o++){var s=e.cameras[o].viewport,c=s.x,l=s.y,h=c+s.z,u=l+s.w;p.bindFramebuffer(36008,i[o]),p.blitFramebuffer(0,0,r,a,c,l,h,u,16384,9728)}else p.bindFramebuffer(36008,i[0]),p.blitFramebuffer(0,0,r,a,0,0,f.x,f.y,16384,9728)}(e))},this.updateCameraProjectionMatricesUniform=function(e,t){for(var n=u(e),i=0;i<n.length;i++)o[i].copy(n[i].projectionMatrix);t.setValue(p,"projectionMatrices",o)},this.updateCameraViewMatricesUniform=function(e,t){for(var n=u(e),i=0;i<n.length;i++)o[i].copy(n[i].matrixWorldInverse);t.setValue(p,"viewMatrices",o)},this.updateObjectMatricesUniforms=function(e,t,n){for(var i=u(t),r=0;r<i.length;r++)o[r].multiplyMatrices(i[r].matrixWorldInverse,e.matrixWorld),a[r].getNormalMatrix(o[r]);n.setValue(p,"modelViewMatrices",o),n.setValue(p,"normalMatrices",a)}}function xo(){mn.call(this),this.type="Group"}function bo(e){dr.call(this),this.cameras=e||[]}vo.prototype=Object.assign(Object.create(Ht.prototype),{constructor:vo,isWebGLMultiviewRenderTarget:!0,copy:function(e){return Ht.prototype.copy.call(this,e),this.numViews=e.numViews,this},setNumViews:function(e){return this.numViews!==e&&(this.numViews=e,this.dispose()),this}}),xo.prototype=Object.assign(Object.create(mn.prototype),{constructor:xo,isGroup:!0}),bo.prototype=Object.assign(Object.create(dr.prototype),{constructor:bo,isArrayCamera:!0});var wo,_o=new Dt,Mo=new Dt;function So(e,t,n){_o.setFromMatrixPosition(t.matrixWorld),Mo.setFromMatrixPosition(n.matrixWorld);var i=_o.distanceTo(Mo),r=t.projectionMatrix.elements,a=n.projectionMatrix.elements,o=r[14]/(r[10]-1),s=r[14]/(r[10]+1),c=(r[9]+1)/r[5],l=(r[9]-1)/r[5],h=(r[8]-1)/r[0],u=(a[8]+1)/a[0],p=o*h,d=o*u,f=i/(u-h),m=f*-h;t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(m),e.translateZ(f),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.getInverse(e.matrixWorld);var g=o+f,v=s+f,y=p-m,x=i-m+d,b=c*s/v*g,w=l*s/v*g;e.projectionMatrix.makePerspective(y,x,b,w,g,v)}function To(t){var n,i,r=this,c=null,l=null,h=null,a=[],u=new Jt,p=new Jt,o=1,d="local-floor";"undefined"!=typeof window&&"VRFrameData"in window&&(l=new window.VRFrameData,window.addEventListener("vrdisplaypresentchange",e,!1));var f=new Jt,m=new Pt,g=new Dt,v=new dr;v.viewport=new Gt,v.layers.enable(1);var y=new dr;y.viewport=new Gt,y.layers.enable(2);var x=new bo([v,y]);function b(){return null!==c&&!0===c.isPresenting}x.layers.enable(1),x.layers.enable(2);var s,w=new Rt;function e(){var e;b()?(e=c.getEyeParameters("left"),n=2*e.renderWidth*o,i=e.renderHeight*o,s=t.getPixelRatio(),t.getSize(w),t.setDrawingBufferSize(n,i,1),v.viewport.set(0,0,n/2,i),y.viewport.set(n/2,0,n/2,i),T.start(),r.dispatchEvent({type:"sessionstart"})):(r.enabled&&t.setDrawingBufferSize(w.width,w.height,s),T.stop(),r.dispatchEvent({type:"sessionend"}))}var _=[];function M(){for(var e=0;e<a.length;e++){var t=a[e],n=function(e){for(var t=navigator.getGamepads&&navigator.getGamepads(),n=0,i=t.length;n<i;n++){var r=t[n];if(r&&("Daydream Controller"===r.id||"Gear VR Controller"===r.id||"Oculus Go Controller"===r.id||"OpenVR Gamepad"===r.id||r.id.startsWith("Oculus Touch")||r.id.startsWith("HTC Vive Focus")||r.id.startsWith("Spatial Controller"))){var a=r.hand;if(0===e&&(""===a||"right"===a))return r;if(1===e&&"left"===a)return r}}}(e);if(void 0!==n&&void 0!==n.pose){if(null===n.pose)return;var i=n.pose;!1===i.hasPosition&&t.position.set(.2,-.6,-.05),null!==i.position&&t.position.fromArray(i.position),null!==i.orientation&&t.quaternion.fromArray(i.orientation),t.matrix.compose(t.position,t.quaternion,t.scale),t.matrix.premultiply(u),t.matrix.decompose(t.position,t.quaternion,t.scale),t.matrixWorldNeedsUpdate=!0,t.visible=!0;var r="Daydream Controller"===n.id?0:1;void 0===_[e]&&(_[e]=!1),_[e]!==n.buttons[r].pressed&&(_[e]=n.buttons[r].pressed,!0===_[e]?t.dispatchEvent({type:"selectstart"}):(t.dispatchEvent({type:"selectend"}),t.dispatchEvent({type:"select"})))}else t.visible=!1}}function S(e,t){null!==t&&4===t.length&&e.set(t[0]*n,t[1]*i,t[2]*n,t[3]*i)}this.enabled=!1,this.getController=function(e){var t=a[e];return void 0===t&&((t=new xo).matrixAutoUpdate=!1,t.visible=!1,a[e]=t),t},this.getDevice=function(){return c},this.setDevice=function(e){void 0!==e&&(c=e),T.setContext(e)},this.setFramebufferScaleFactor=function(e){o=e},this.setReferenceSpaceType=function(e){d=e},this.setPoseTarget=function(e){void 0!==e&&(h=e)},this.getCamera=function(e){var t,n="local-floor"===d?1.6:0;if(!1===b())return e.position.set(0,n,0),e.rotation.set(0,0,0),e;c.depthNear=e.near,c.depthFar=e.far,c.getFrameData(l),"local-floor"===d&&((t=c.stageParameters)?u.fromArray(t.sittingToStandingTransform):u.makeTranslation(0,n,0));var i=l.pose,r=null!==h?h:e;r.matrix.copy(u),r.matrix.decompose(r.position,r.quaternion,r.scale),null!==i.orientation&&(m.fromArray(i.orientation),r.quaternion.multiply(m)),null!==i.position&&(m.setFromRotationMatrix(u),g.fromArray(i.position),g.applyQuaternion(m),r.position.add(g)),r.updateMatrixWorld(),v.near=e.near,y.near=e.near,v.far=e.far,y.far=e.far,v.matrixWorldInverse.fromArray(l.leftViewMatrix),y.matrixWorldInverse.fromArray(l.rightViewMatrix),p.getInverse(u),"local-floor"===d&&(v.matrixWorldInverse.multiply(p),y.matrixWorldInverse.multiply(p));var a=r.parent;null!==a&&(f.getInverse(a.matrixWorld),v.matrixWorldInverse.multiply(f),y.matrixWorldInverse.multiply(f)),v.matrixWorld.getInverse(v.matrixWorldInverse),y.matrixWorld.getInverse(y.matrixWorldInverse),v.projectionMatrix.fromArray(l.leftProjectionMatrix),y.projectionMatrix.fromArray(l.rightProjectionMatrix),So(x,v,y);var o,s=c.getLayers();return s.length&&(o=s[0],S(v.viewport,o.leftBounds),S(y.viewport,o.rightBounds)),M(),x},this.getStandingMatrix=function(){return u},this.isPresenting=b;var T=new Mr;this.setAnimationLoop=function(e){T.setAnimationLoop(e),b()&&T.start()},this.submitFrame=function(){b()&&c.submitFrame()},this.dispose=function(){"undefined"!=typeof window&&window.removeEventListener("vrdisplaypresentchange",e)},this.setFrameOfReferenceType=function(){console.warn("THREE.WebVRManager: setFrameOfReferenceType() has been deprecated.")}}function Eo(p,t){var m,n=this,d=null,f=null,i="local-floor",g=[],v=[];function o(){return null!==d&&null!==f}var s=new dr;s.layers.enable(1),s.viewport=new Gt;var c=new dr;c.layers.enable(2),c.viewport=new Gt;var y=new bo([s,c]);function r(e){for(var t=0;t<g.length;t++)v[t]===e.inputSource&&g[t].dispatchEvent({type:e.type})}function a(){p.setFramebuffer(null),p.setRenderTarget(p.getRenderTarget()),b.stop(),n.dispatchEvent({type:"sessionend"})}function l(e){f=e,b.setContext(d),b.start(),n.dispatchEvent({type:"sessionstart"})}function h(){for(var e=0;e<g.length;e++)v[e]=function(e){for(var t=d.inputSources,n=0;n<t.length;n++){var i=t[n],r=i.handedness;if(0===e&&("none"===r||"right"===r))return i;if(1===e&&"left"===r)return i}}(e)}function u(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.getInverse(e.matrixWorld)}y.layers.enable(1),y.layers.enable(2),this.enabled=!1,this.getController=function(e){var t=g[e];return void 0===t&&((t=new xo).matrixAutoUpdate=!1,t.visible=!1,g[e]=t),t},this.setFramebufferScaleFactor=function(){},this.setReferenceSpaceType=function(e){i=e},this.getSession=function(){return d},this.setSession=function(e){null!==(d=e)&&(d.addEventListener("select",r),d.addEventListener("selectstart",r),d.addEventListener("selectend",r),d.addEventListener("end",a),d.updateRenderState({baseLayer:new XRWebGLLayer(d,t)}),d.requestReferenceSpace(i).then(l),d.addEventListener("inputsourceschange",h),h())},this.getCamera=function(e){if(o()){var t=e.parent,n=y.cameras;u(y,t);for(var i=0;i<n.length;i++)u(n[i],t);e.matrixWorld.copy(y.matrixWorld);for(var r=e.children,i=0,a=r.length;i<a;i++)r[i].updateMatrixWorld(!0);return So(y,s,c),y}return e},this.isPresenting=o;var x=null,b=new Mr;b.setAnimationLoop(function(e,t){if(null!==(m=t.getViewerPose(f))){var n=m.views,i=d.renderState.baseLayer;p.setFramebuffer(i.framebuffer);for(var r=0;r<n.length;r++){var a=n[r],o=i.getViewport(a),s=a.transform.inverse.matrix,c=y.cameras[r];c.matrix.fromArray(s).getInverse(c.matrix),c.projectionMatrix.fromArray(a.projectionMatrix),c.viewport.set(o.x,o.y,o.width,o.height),0===r&&y.matrix.copy(c.matrix)}}for(r=0;r<g.length;r++){var l=g[r],h=v[r];if(h){var u=t.getPose(h.targetRaySpace,f);if(null!==u){l.matrix.fromArray(u.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.visible=!0;continue}}l.visible=!1}x&&x(e)}),this.setAnimationLoop=function(e){x=e},this.dispose=function(){},this.getStandingMatrix=function(){return console.warn("THREE.WebXRManager: getStandingMatrix() is no longer needed."),new Jt},this.getDevice=function(){console.warn("THREE.WebXRManager: getDevice() has been deprecated.")},this.setDevice=function(){console.warn("THREE.WebXRManager: setDevice() has been deprecated.")},this.setFrameOfReferenceType=function(){console.warn("THREE.WebXRManager: setFrameOfReferenceType() has been deprecated.")},this.submitFrame=function(){}}function Ao(e){var i=void 0!==(e=e||{}).canvas?e.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),t=void 0!==e.context?e.context:null,n=void 0!==e.alpha&&e.alpha,r=void 0===e.depth||e.depth,a=void 0===e.stencil||e.stencil,o=void 0!==e.antialias&&e.antialias,s=void 0===e.premultipliedAlpha||e.premultipliedAlpha,c=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,l=void 0!==e.powerPreference?e.powerPreference:"default",h=void 0!==e.failIfMajorPerformanceCaveat&&e.failIfMajorPerformanceCaveat,f=null,D=null;this.domElement=i,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.gammaInput=!1,this.gammaOutput=!1,this.physicallyCorrectLights=!1,this.toneMapping=Ce,this.toneMappingExposure=1,this.toneMappingWhitePoint=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var I,M,N,z,m,B,U,S,T,g,y,u,p,d,E,A,L,v,k,F=this,x=!1,b=null,w=0,_=0,R=null,P=null,G=-1,C={geometry:null,program:null,wireframe:!1},H=null,O=null,V=new Gt,j=new Gt,W=i.width,q=i.height,X=1,Y=new Gt(0,0,W,q),Z=new Gt(0,0,W,q),J=!1,Q=new xr,K=new Pr,$=!1,ee=!1,te=new Jt,ne=new Dt;function ie(){return null===R?X:1}try{var re={alpha:n,depth:r,stencil:a,antialias:o,premultipliedAlpha:s,preserveDrawingBuffer:c,powerPreference:l,failIfMajorPerformanceCaveat:h,xrCompatible:!0};if(i.addEventListener("webglcontextlost",le,!1),i.addEventListener("webglcontextrestored",he,!1),null===(I=t||i.getContext("webgl",re)||i.getContext("experimental-webgl",re)))throw null!==i.getContext("webgl")?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.");void 0===I.getShaderPrecisionFormat&&(I.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(e){throw console.error("THREE.WebGLRenderer: "+e.message),e}function ae(){M=new Cr(I),!1===(N=new Rr(I,M,e)).isWebGL2&&(M.get("WEBGL_depth_texture"),M.get("OES_texture_float"),M.get("OES_texture_half_float"),M.get("OES_texture_half_float_linear"),M.get("OES_standard_derivatives"),M.get("OES_element_index_uint"),M.get("ANGLE_instanced_arrays")),M.get("OES_texture_float_linear"),v=new go(0,M,N),(z=new fo(I,M,N)).scissor(j.copy(Z).multiplyScalar(X).floor()),z.viewport(V.copy(Y).multiplyScalar(X).floor()),m=new Ir,B=new Qa,U=new mo(I,M,z,B,N,v,m),S=new Sr(I),T=new Or(0,S,m),g=new Br(0,T,S,m),E=new zr(I),y=new Ja(F,M,N),u=new to,p=new so,d=new Ar(F,z,g,s),A=new Lr(I,M,m,N),L=new Dr(I,M,m,N),m.programs=y.programs,F.capabilities=N,F.extensions=M,F.properties=B,F.renderLists=u,F.state=z,F.info=m}ae();var oe="undefined"!=typeof navigator&&"xr"in navigator&&"isSessionSupported"in navigator.xr?new Eo(F,I):new To(F);this.vr=oe;var se=new yo(F,I),ce=new po(F,g,N.maxTextureSize);function le(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),x=!0}function he(){console.log("THREE.WebGLRenderer: Context Restored."),x=!1,ae()}function ue(e){var t,n=e.target;n.removeEventListener("dispose",ue),pe(t=n),B.remove(t)}function pe(e){var t=B.get(e).program;(e.program=void 0)!==t&&y.releaseProgram(t)}this.shadowMap=ce,this.getContext=function(){return I},this.getContextAttributes=function(){return I.getContextAttributes()},this.forceContextLoss=function(){var e=M.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){var e=M.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return X},this.setPixelRatio=function(e){void 0!==e&&(X=e,this.setSize(W,q,!1))},this.getSize=function(e){return void 0===e&&(console.warn("WebGLRenderer: .getsize() now requires a Vector2 as an argument"),e=new Rt),e.set(W,q)},this.setSize=function(e,t,n){oe.isPresenting()?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(W=e,q=t,i.width=Math.floor(e*X),i.height=Math.floor(t*X),!1!==n&&(i.style.width=e+"px",i.style.height=t+"px"),this.setViewport(0,0,e,t))},this.getDrawingBufferSize=function(e){return void 0===e&&(console.warn("WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument"),e=new Rt),e.set(W*X,q*X).floor()},this.setDrawingBufferSize=function(e,t,n){W=e,q=t,X=n,i.width=Math.floor(e*n),i.height=Math.floor(t*n),this.setViewport(0,0,e,t)},this.getCurrentViewport=function(e){return void 0===e&&(console.warn("WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument"),e=new Gt),e.copy(V)},this.getViewport=function(e){return e.copy(Y)},this.setViewport=function(e,t,n,i){e.isVector4?Y.set(e.x,e.y,e.z,e.w):Y.set(e,t,n,i),z.viewport(V.copy(Y).multiplyScalar(X).floor())},this.getScissor=function(e){return e.copy(Z)},this.setScissor=function(e,t,n,i){e.isVector4?Z.set(e.x,e.y,e.z,e.w):Z.set(e,t,n,i),z.scissor(j.copy(Z).multiplyScalar(X).floor())},this.getScissorTest=function(){return J},this.setScissorTest=function(e){z.setScissorTest(J=e)},this.getClearColor=function(){return d.getClearColor()},this.setClearColor=function(){d.setClearColor.apply(d,arguments)},this.getClearAlpha=function(){return d.getClearAlpha()},this.setClearAlpha=function(){d.setClearAlpha.apply(d,arguments)},this.clear=function(e,t,n){var i=0;void 0!==e&&!e||(i|=16384),void 0!==t&&!t||(i|=256),void 0!==n&&!n||(i|=1024),I.clear(i)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){i.removeEventListener("webglcontextlost",le,!1),i.removeEventListener("webglcontextrestored",he,!1),u.dispose(),p.dispose(),B.dispose(),g.dispose(),oe.dispose(),fe.stop()},this.renderBufferImmediate=function(e,t){z.initAttributes();var n=B.get(e);e.hasPositions&&!n.position&&(n.position=I.createBuffer()),e.hasNormals&&!n.normal&&(n.normal=I.createBuffer()),e.hasUvs&&!n.uv&&(n.uv=I.createBuffer()),e.hasColors&&!n.color&&(n.color=I.createBuffer());var i=t.getAttributes();e.hasPositions&&(I.bindBuffer(34962,n.position),I.bufferData(34962,e.positionArray,35048),z.enableAttribute(i.position),I.vertexAttribPointer(i.position,3,5126,!1,0,0)),e.hasNormals&&(I.bindBuffer(34962,n.normal),I.bufferData(34962,e.normalArray,35048),z.enableAttribute(i.normal),I.vertexAttribPointer(i.normal,3,5126,!1,0,0)),e.hasUvs&&(I.bindBuffer(34962,n.uv),I.bufferData(34962,e.uvArray,35048),z.enableAttribute(i.uv),I.vertexAttribPointer(i.uv,2,5126,!1,0,0)),e.hasColors&&(I.bindBuffer(34962,n.color),I.bufferData(34962,e.colorArray,35048),z.enableAttribute(i.color),I.vertexAttribPointer(i.color,3,5126,!1,0,0)),z.disableUnusedAttributes(),I.drawArrays(4,0,e.count),e.count=0},this.renderBufferDirect=function(e,t,n,i,r,a){var o=r.isMesh&&r.matrixWorld.determinant()<0;z.setMaterial(i,o);var s=ye(e,t,i,r),c=!1;C.geometry===n.id&&C.program===s.id&&C.wireframe===(!0===i.wireframe)||(C.geometry=n.id,C.program=s.id,C.wireframe=!0===i.wireframe,c=!0),r.morphTargetInfluences&&(E.update(r,n,i,s),c=!0);var l,h=n.index,u=n.attributes.position,p=1;!0===i.wireframe&&(h=T.getWireframeAttribute(n),p=2);var d=A;null!==h&&(l=S.get(h),(d=L).setIndex(l)),c&&(function(e,t,n,i){if(!1!==N.isWebGL2||!e.isInstancedMesh&&!t.isInstancedBufferGeometry||null!==M.get("ANGLE_instanced_arrays")){z.initAttributes();var r,a=t.attributes,o=i.getAttributes(),s=n.defaultAttributeValues;for(r in o){var c=o[r];if(0<=c){var l=a[r];if(void 0!==l){var h,u=l.normalized,p=l.itemSize;if(void 0===(h=S.get(l)))continue;var d,f,m,g=h.buffer,v=h.type,y=h.bytesPerElement;l.isInterleavedBufferAttribute?(f=(d=l.data).stride,m=l.offset,d&&d.isInstancedInterleavedBuffer?(z.enableAttributeAndDivisor(c,d.meshPerAttribute),void 0===t.maxInstancedCount&&(t.maxInstancedCount=d.meshPerAttribute*d.count)):z.enableAttribute(c),I.bindBuffer(34962,g),I.vertexAttribPointer(c,p,v,u,f*y,m*y)):(l.isInstancedBufferAttribute?(z.enableAttributeAndDivisor(c,l.meshPerAttribute),void 0===t.maxInstancedCount&&(t.maxInstancedCount=l.meshPerAttribute*l.count)):z.enableAttribute(c),I.bindBuffer(34962,g),I.vertexAttribPointer(c,p,v,u,0,0))}else if("instanceMatrix"===r){if(void 0===(h=S.get(e.instanceMatrix)))continue;g=h.buffer,v=h.type,z.enableAttributeAndDivisor(c+0,1),z.enableAttributeAndDivisor(c+1,1),z.enableAttributeAndDivisor(c+2,1),z.enableAttributeAndDivisor(c+3,1),I.bindBuffer(34962,g),I.vertexAttribPointer(c+0,4,v,!1,64,0),I.vertexAttribPointer(c+1,4,v,!1,64,16),I.vertexAttribPointer(c+2,4,v,!1,64,32),I.vertexAttribPointer(c+3,4,v,!1,64,48)}else if(void 0!==s){var x=s[r];if(void 0!==x)switch(x.length){case 2:I.vertexAttrib2fv(c,x);break;case 3:I.vertexAttrib3fv(c,x);break;case 4:I.vertexAttrib4fv(c,x);break;default:I.vertexAttrib1fv(c,x)}}}}z.disableUnusedAttributes()}}(r,n,i,s),null!==h&&I.bindBuffer(34963,l.buffer));var f=1/0;null!==h?f=h.count:void 0!==u&&(f=u.count);var m,g=n.drawRange.start*p,v=n.drawRange.count*p,y=null!==a?a.start*p:0,x=null!==a?a.count*p:1/0,b=Math.max(g,y),w=Math.min(f,g+v,y+x)-1,_=Math.max(0,w-b+1);if(0!==_){if(r.isMesh)if(!0===i.wireframe)z.setLineWidth(i.wireframeLinewidth*ie()),d.setMode(1);else switch(r.drawMode){case lt:d.setMode(4);break;case 1:d.setMode(5);break;case 2:d.setMode(6)}else r.isLine?(void 0===(m=i.linewidth)&&(m=1),z.setLineWidth(m*ie()),r.isLineSegments?d.setMode(1):r.isLineLoop?d.setMode(2):d.setMode(3)):r.isPoints?d.setMode(0):r.isSprite&&d.setMode(4);r.isInstancedMesh?d.renderInstances(n,b,_,r.count):n.isInstancedBufferGeometry?d.renderInstances(n,b,_,n.maxInstancedCount):d.render(b,_)}},this.compile=function(n,e){(D=p.get(n,e)).init(),n.traverse(function(e){e.isLight&&(D.pushLight(e),e.castShadow&&D.pushShadow(e))}),D.setupLights(e),n.traverse(function(e){if(e.material)if(Array.isArray(e.material))for(var t=0;t<e.material.length;t++)ve(e.material[t],n.fog,e);else ve(e.material,n.fog,e)})};var de=null,fe=new Mr;function me(e,t,n,i){for(var r=0,a=e.length;r<a;r++){var o=e[r],s=o.object,c=o.geometry,l=void 0===i?o.material:i,h=o.group;if(n.isArrayCamera)if(O=n,oe.enabled&&se.isAvailable())ge(s,t,n,c,l,h);else for(var u=n.cameras,p=0,d=u.length;p<d;p++){var f=u[p];s.layers.test(f.layers)&&(z.viewport(V.copy(f.viewport)),D.setupLights(f),ge(s,t,f,c,l,h))}else O=null,ge(s,t,n,c,l,h)}}function ge(e,t,n,i,r,a){var o,s;e.onBeforeRender(F,t,n,i,r,a),D=p.get(t,O||n),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),e.isImmediateRenderObject?(z.setMaterial(r),o=ye(n,t.fog,r,e),C.geometry=null,C.program=null,C.wireframe=!1,s=o,e.render(function(e){F.renderBufferImmediate(e,s)})):F.renderBufferDirect(n,t.fog,i,r,e,a),e.onAfterRender(F,t,n,i,r,a),D=p.get(t,O||n)}function ve(e,t,n){var i,r=B.get(e),a=D.state.lights,o=D.state.shadowsArray,s=a.state.version,c=y.getParameters(e,a.state,o,t,K.numPlanes,K.numIntersection,n),l=y.getProgramCacheKey(e,c),h=r.program,u=!0;if(void 0===h)e.addEventListener("dispose",ue);else if(h.cacheKey!==l)pe(e);else if(r.lightsStateVersion!==s)r.lightsStateVersion=s,u=!1;else{if(void 0!==c.shaderID)return;u=!1}u&&(c.shaderID?(i=_r[c.shaderID],r.shader={name:e.type,uniforms:or(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader}):r.shader={name:e.type,uniforms:e.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader},e.onBeforeCompile(r.shader,F),l=y.getProgramCacheKey(e,c),h=y.acquireProgram(e,r.shader,c,l),r.program=h,e.program=h);var p=h.getAttributes();if(e.morphTargets)for(var d=e.numSupportedMorphTargets=0;d<F.maxMorphTargets;d++)0<=p["morphTarget"+d]&&e.numSupportedMorphTargets++;if(e.morphNormals)for(d=e.numSupportedMorphNormals=0;d<F.maxMorphNormals;d++)0<=p["morphNormal"+d]&&e.numSupportedMorphNormals++;var m=r.shader.uniforms;(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(r.numClippingPlanes=K.numPlanes,r.numIntersection=K.numIntersection,m.clippingPlanes=K.uniform),r.fog=t,r.needsLights=e.isMeshLambertMaterial||e.isMeshPhongMaterial||e.isMeshStandardMaterial||e.isShadowMaterial||e.isShaderMaterial&&!0===e.lights,r.lightsStateVersion=s,r.needsLights&&(m.ambientLightColor.value=a.state.ambient,m.lightProbe.value=a.state.probe,m.directionalLights.value=a.state.directional,m.spotLights.value=a.state.spot,m.rectAreaLights.value=a.state.rectArea,m.pointLights.value=a.state.point,m.hemisphereLights.value=a.state.hemi,m.directionalShadowMap.value=a.state.directionalShadowMap,m.directionalShadowMatrix.value=a.state.directionalShadowMatrix,m.spotShadowMap.value=a.state.spotShadowMap,m.spotShadowMatrix.value=a.state.spotShadowMatrix,m.pointShadowMap.value=a.state.pointShadowMap,m.pointShadowMatrix.value=a.state.pointShadowMatrix);var g=r.program.getUniforms(),v=Da.seqWithValue(g.seq,m);r.uniformsList=v}function ye(e,t,n,i){U.resetTextureUnits();var r,a=B.get(n),o=D.state.lights;$&&(!ee&&e===H||(r=e===H&&n.id===G,K.setState(n.clippingPlanes,n.clipIntersection,n.clipShadows,e,a,r))),!1===n.needsUpdate&&(void 0===a.program||n.fog&&a.fog!==t||a.needsLights&&a.lightsStateVersion!==o.state.version||void 0!==a.numClippingPlanes&&(a.numClippingPlanes!==K.numPlanes||a.numIntersection!==K.numIntersection))&&(n.needsUpdate=!0),n.needsUpdate&&(ve(n,t,i),n.needsUpdate=!1);var s,c,l,h,u,p,d,f,m,g,v,y,x,b,M,S,T,E,A=!1,L=!1,R=!1,P=a.program,C=P.getUniforms(),O=a.shader.uniforms;return z.useProgram(P.program)&&(R=L=A=!0),n.id!==G&&(G=n.id,L=!0),!A&&H===e||(0<P.numMultiviewViews?se.updateCameraProjectionMatricesUniform(e,C):C.setValue(I,"projectionMatrix",e.projectionMatrix),N.logarithmicDepthBuffer&&C.setValue(I,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),H!==e&&(H=e,R=L=!0),!(n.isShaderMaterial||n.isMeshPhongMaterial||n.isMeshStandardMaterial||n.envMap)||void 0!==(s=C.map.cameraPosition)&&s.setValue(I,ne.setFromMatrixPosition(e.matrixWorld)),(n.isMeshPhongMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial)&&C.setValue(I,"isOrthographic",!0===e.isOrthographicCamera),(n.isMeshPhongMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial||n.skinning)&&(0<P.numMultiviewViews?se.updateCameraViewMatricesUniform(e,C):C.setValue(I,"viewMatrix",e.matrixWorldInverse))),n.skinning&&(C.setOptional(I,i,"bindMatrix"),C.setOptional(I,i,"bindMatrixInverse"),(c=i.skeleton)&&(l=c.bones,N.floatVertexTextures?(void 0===c.boneTexture&&(h=Math.sqrt(4*l.length),h=Lt.ceilPowerOfTwo(h),h=Math.max(h,4),(u=new Float32Array(h*h*4)).set(c.boneMatrices),p=new gr(u,h,h,nt,Ke),c.boneMatrices=u,c.boneTexture=p,c.boneTextureSize=h),C.setValue(I,"boneTexture",c.boneTexture,U),C.setValue(I,"boneTextureSize",c.boneTextureSize)):C.setOptional(I,c,"boneMatrices"))),!L&&a.receiveShadow===i.receiveShadow||(a.receiveShadow=i.receiveShadow,C.setValue(I,"receiveShadow",i.receiveShadow)),L&&(C.setValue(I,"toneMappingExposure",F.toneMappingExposure),C.setValue(I,"toneMappingWhitePoint",F.toneMappingWhitePoint),a.needsLights&&(E=R,(T=O).ambientLightColor.needsUpdate=E,T.lightProbe.needsUpdate=E,T.directionalLights.needsUpdate=E,T.pointLights.needsUpdate=E,T.spotLights.needsUpdate=E,T.rectAreaLights.needsUpdate=E,T.hemisphereLights.needsUpdate=E),t&&n.fog&&(S=t,(M=O).fogColor.value.copy(S.color),S.isFog?(M.fogNear.value=S.near,M.fogFar.value=S.far):S.isFogExp2&&(M.fogDensity.value=S.density)),n.isMeshBasicMaterial?xe(O,n):n.isMeshLambertMaterial?(xe(O,n),n.emissiveMap&&(O.emissiveMap.value=n.emissiveMap)):n.isMeshPhongMaterial?(xe(O,n),n.isMeshToonMaterial?(be(x=O,b=n),b.gradientMap&&(x.gradientMap.value=b.gradientMap)):be(O,n)):n.isMeshStandardMaterial?(xe(O,n),(n.isMeshPhysicalMaterial?function(e,t){we(e,t),e.reflectivity.value=t.reflectivity,e.clearcoat.value=t.clearcoat,e.clearcoatRoughness.value=t.clearcoatRoughness,t.sheen&&e.sheen.value.copy(t.sheen),t.clearcoatNormalMap&&(e.clearcoatNormalScale.value.copy(t.clearcoatNormalScale),e.clearcoatNormalMap.value=t.clearcoatNormalMap,t.side===_e&&e.clearcoatNormalScale.value.negate()),e.transparency.value=t.transparency}:we)(O,n)):n.isMeshMatcapMaterial?(xe(O,n),function(e,t){t.matcap&&(e.matcap.value=t.matcap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===_e&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===_e&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(O,n)):n.isMeshDepthMaterial?(xe(O,n),v=O,(y=n).displacementMap&&(v.displacementMap.value=y.displacementMap,v.displacementScale.value=y.displacementScale,v.displacementBias.value=y.displacementBias)):n.isMeshDistanceMaterial?(xe(O,n),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias),e.referencePosition.value.copy(t.referencePosition),e.nearDistance.value=t.nearDistance,e.farDistance.value=t.farDistance}(O,n)):n.isMeshNormalMaterial?(xe(O,n),function(e,t){t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===_e&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===_e&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(O,n)):n.isLineBasicMaterial?(g=n,(m=O).diffuse.value.copy(g.color),m.opacity.value=g.opacity,n.isLineDashedMaterial&&(f=n,(d=O).dashSize.value=f.dashSize,d.totalSize.value=f.dashSize+f.gapSize,d.scale.value=f.scale)):n.isPointsMaterial?function(e,t){var n;e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.size.value=t.size*X,e.scale.value=.5*q,t.map&&(e.map.value=t.map),t.alphaMap&&(e.alphaMap.value=t.alphaMap),t.map?n=t.map:t.alphaMap&&(n=t.alphaMap),void 0!==n&&(!0===n.matrixAutoUpdate&&n.updateMatrix(),e.uvTransform.value.copy(n.matrix))}(O,n):n.isSpriteMaterial?function(e,t){var n;e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.rotation.value=t.rotation,t.map&&(e.map.value=t.map),t.alphaMap&&(e.alphaMap.value=t.alphaMap),t.map?n=t.map:t.alphaMap&&(n=t.alphaMap),void 0!==n&&(!0===n.matrixAutoUpdate&&n.updateMatrix(),e.uvTransform.value.copy(n.matrix))}(O,n):n.isShadowMaterial&&(O.color.value.copy(n.color),O.opacity.value=n.opacity),void 0!==O.ltc_1&&(O.ltc_1.value=wr.LTC_1),void 0!==O.ltc_2&&(O.ltc_2.value=wr.LTC_2),Da.upload(I,a.uniformsList,O,U),n.isShaderMaterial&&(n.uniformsNeedUpdate=!1)),n.isShaderMaterial&&!0===n.uniformsNeedUpdate&&(Da.upload(I,a.uniformsList,O,U),n.uniformsNeedUpdate=!1),n.isSpriteMaterial&&C.setValue(I,"center",i.center),0<P.numMultiviewViews?se.updateObjectMatricesUniforms(i,e,C):(C.setValue(I,"modelViewMatrix",i.modelViewMatrix),C.setValue(I,"normalMatrix",i.normalMatrix)),C.setValue(I,"modelMatrix",i.matrixWorld),P}function xe(e,t){var n;e.opacity.value=t.opacity,t.color&&e.diffuse.value.copy(t.color),t.emissive&&e.emissive.value.copy(t.emissive).multiplyScalar(t.emissiveIntensity),t.map&&(e.map.value=t.map),t.alphaMap&&(e.alphaMap.value=t.alphaMap),t.specularMap&&(e.specularMap.value=t.specularMap),t.envMap&&(e.envMap.value=t.envMap,e.flipEnvMap.value=t.envMap.isCubeTexture?-1:1,e.reflectivity.value=t.reflectivity,e.refractionRatio.value=t.refractionRatio,e.maxMipLevel.value=B.get(t.envMap).__maxMipLevel),t.lightMap&&(e.lightMap.value=t.lightMap,e.lightMapIntensity.value=t.lightMapIntensity),t.aoMap&&(e.aoMap.value=t.aoMap,e.aoMapIntensity.value=t.aoMapIntensity),t.map?n=t.map:t.specularMap?n=t.specularMap:t.displacementMap?n=t.displacementMap:t.normalMap?n=t.normalMap:t.bumpMap?n=t.bumpMap:t.roughnessMap?n=t.roughnessMap:t.metalnessMap?n=t.metalnessMap:t.alphaMap?n=t.alphaMap:t.emissiveMap&&(n=t.emissiveMap),void 0!==n&&(n.isWebGLRenderTarget&&(n=n.texture),!0===n.matrixAutoUpdate&&n.updateMatrix(),e.uvTransform.value.copy(n.matrix))}function be(e,t){e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===_e&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===_e&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}function we(e,t){e.roughness.value=t.roughness,e.metalness.value=t.metalness,t.roughnessMap&&(e.roughnessMap.value=t.roughnessMap),t.metalnessMap&&(e.metalnessMap.value=t.metalnessMap),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===_e&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===_e&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias),t.envMap&&(e.envMapIntensity.value=t.envMapIntensity)}fe.setAnimationLoop(function(e){oe.isPresenting()||de&&de(e)}),"undefined"!=typeof window&&fe.setContext(window),this.setAnimationLoop=function(e){de=e,oe.setAnimationLoop(e),fe.start()},this.render=function(e,t){var n,i,r,a,o;void 0!==arguments[2]&&(console.warn("THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead."),n=arguments[2]),void 0!==arguments[3]&&console.warn("THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead."),t&&t.isCamera?x||(C.geometry=null,C.program=null,C.wireframe=!1,G=-1,!(H=null)===e.autoUpdate&&e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),oe.enabled&&(t=oe.getCamera(t)),(D=p.get(e,t)).init(),e.onBeforeRender(F,e,t,n||R),te.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),Q.setFromMatrix(te),ee=this.localClippingEnabled,$=K.init(this.clippingPlanes,ee,t),(f=u.get(e,t)).init(),function e(t,n,i,r){if(!1!==t.visible){if(t.layers.test(n.layers))if(t.isGroup)i=t.renderOrder;else if(t.isLOD)!0===t.autoUpdate&&t.update(n);else if(t.isLight)D.pushLight(t),t.castShadow&&D.pushShadow(t);else if(t.isSprite)t.frustumCulled&&!Q.intersectsSprite(t)||(r&&ne.setFromMatrixPosition(t.matrixWorld).applyMatrix4(te),o=g.update(t),(s=t.material).visible&&f.push(t,o,s,i,ne.z,null));else if(t.isImmediateRenderObject)r&&ne.setFromMatrixPosition(t.matrixWorld).applyMatrix4(te),f.push(t,null,t.material,i,ne.z,null);else if((t.isMesh||t.isLine||t.isPoints)&&(t.isSkinnedMesh&&t.skeleton.frame!==m.render.frame&&(t.skeleton.update(),t.skeleton.frame=m.render.frame),!t.frustumCulled||Q.intersectsObject(t))){r&&ne.setFromMatrixPosition(t.matrixWorld).applyMatrix4(te);var o=g.update(t),s=t.material;if(Array.isArray(s))for(var c=o.groups,l=0,h=c.length;l<h;l++){var u=c[l],p=s[u.materialIndex];p&&p.visible&&f.push(t,o,p,i,ne.z,u)}else s.visible&&f.push(t,o,s,i,ne.z,null)}for(var d=t.children,l=0,h=d.length;l<h;l++)e(d[l],n,i,r)}}(e,t,0,F.sortObjects),!0===F.sortObjects&&f.sort(),$&&K.beginShadows(),i=D.state.shadowsArray,ce.render(i,e,t),D.setupLights(t),$&&K.endShadows(),this.info.autoReset&&this.info.reset(),void 0!==n&&this.setRenderTarget(n),oe.enabled&&se.isAvailable()&&se.attachCamera(t),r=f.opaque,a=f.transparent,e.overrideMaterial?(o=e.overrideMaterial,r.length&&me(r,e,t,o),a.length&&me(a,e,t,o)):(r.length&&me(r,e,t),a.length&&me(a,e,t)),e.onAfterRender(F,e,t),null!==R&&(U.updateRenderTargetMipmap(R),U.updateMultisampleRenderTarget(R)),z.buffers.depth.setTest(!0),z.buffers.depth.setMask(!0),z.buffers.color.setMask(!0),z.setPolygonOffset(!1),oe.enabled&&(se.isAvailable()&&se.detachCamera(t),oe.submitFrame()),D=f=null):console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.setFramebuffer=function(e){b!==e&&null===R&&I.bindFramebuffer(36160,e),b=e},this.getActiveCubeFace=function(){return w},this.getActiveMipmapLevel=function(){return _},this.getRenderTarget=function(){return R},this.setRenderTarget=function(e,t,n){w=t,_=n,(R=e)&&void 0===B.get(e).__webglFramebuffer&&U.setupRenderTarget(e);var i,r,a=b,o=!1;k=e?(i=B.get(e).__webglFramebuffer,e.isWebGLRenderTargetCube?(a=i[t||0],o=!0):a=e.isWebGLMultisampleRenderTarget?B.get(e).__webglMultisampledFramebuffer:i,V.copy(e.viewport),j.copy(e.scissor),e.scissorTest):(V.copy(Y).multiplyScalar(X).floor(),j.copy(Z).multiplyScalar(X).floor(),J),P!==a&&(I.bindFramebuffer(36160,a),P=a),z.viewport(V),z.scissor(j),z.setScissorTest(k),o&&(r=B.get(e.texture),I.framebufferTexture2D(36160,36064,34069+(t||0),r.__webglTexture,n||0))},this.readRenderTargetPixels=function(e,t,n,i,r,a,o){if(e&&e.isWebGLRenderTarget){var s=B.get(e).__webglFramebuffer;if(e.isWebGLRenderTargetCube&&void 0!==o&&(s=s[o]),s){var c=!1;s!==P&&(I.bindFramebuffer(36160,s),c=!0);try{var l=e.texture,h=l.format,u=l.type;if(h!==nt&&v.convert(h)!==I.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!(u===Ze||v.convert(u)===I.getParameter(35738)||u===Ke&&(N.isWebGL2||M.get("OES_texture_float")||M.get("WEBGL_color_buffer_float"))||u===$e&&(N.isWebGL2?M.get("EXT_color_buffer_float"):M.get("EXT_color_buffer_half_float"))))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");36053===I.checkFramebufferStatus(36160)?0<=t&&t<=e.width-i&&0<=n&&n<=e.height-r&&I.readPixels(t,n,i,r,v.convert(h),v.convert(u),a):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{c&&I.bindFramebuffer(36160,P)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")},this.copyFramebufferToTexture=function(e,t,n){void 0===n&&(n=0);var i=Math.pow(2,-n),r=Math.floor(t.image.width*i),a=Math.floor(t.image.height*i),o=v.convert(t.format);U.setTexture2D(t,0),I.copyTexImage2D(3553,n,o,e.x,e.y,r,a,0),z.unbindTexture()},this.copyTextureToTexture=function(e,t,n,i){var r=t.image.width,a=t.image.height,o=v.convert(n.format),s=v.convert(n.type);U.setTexture2D(n,0),t.isDataTexture?I.texSubImage2D(3553,i||0,e.x,e.y,r,a,o,s,t.image.data):I.texSubImage2D(3553,i||0,e.x,e.y,o,s,t.image),z.unbindTexture()},this.initTexture=function(e){U.setTexture2D(e,0),z.unbindTexture()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}function Lo(e,t){this.name="",this.color=new ai(e),this.density=void 0!==t?t:25e-5}function Ro(e,t,n){this.name="",this.color=new ai(e),this.near=void 0!==t?t:1,this.far=void 0!==n?n:1e3}function Po(e,t){this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.usage=Mt,this.updateRange={offset:0,count:-1},this.version=0}function Co(e,t,n,i){this.data=e,this.itemSize=t,this.offset=n,this.normalized=!0===i}function Oo(e){ui.call(this),this.type="SpriteMaterial",this.color=new ai(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(e)}Object.assign(To.prototype,Tt.prototype),Object.assign(Eo.prototype,Tt.prototype),Object.assign(Lo.prototype,{isFogExp2:!0,clone:function(){return new Lo(this.color,this.density)},toJSON:function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}),Object.assign(Ro.prototype,{isFog:!0,clone:function(){return new Ro(this.color,this.near,this.far)},toJSON:function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}),Object.defineProperty(Po.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(Po.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setUsage:function(e){return this.usage=e,this},copy:function(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this},copyAt:function(e,t,n){e*=this.stride,n*=t.stride;for(var i=0,r=this.stride;i<r;i++)this.array[e+i]=t.array[n+i];return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},clone:function(){return(new this.constructor).copy(this)},onUpload:function(e){return this.onUploadCallback=e,this}}),Object.defineProperties(Co.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}}),Object.assign(Co.prototype,{isInterleavedBufferAttribute:!0,setX:function(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this},setY:function(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this},setZ:function(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this},setW:function(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this},getX:function(e){return this.data.array[e*this.data.stride+this.offset]},getY:function(e){return this.data.array[e*this.data.stride+this.offset+1]},getZ:function(e){return this.data.array[e*this.data.stride+this.offset+2]},getW:function(e){return this.data.array[e*this.data.stride+this.offset+3]},setXY:function(e,t,n){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this},setXYZ:function(e,t,n,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this},setXYZW:function(e,t,n,i,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this.data.array[e+3]=r,this}}),((Oo.prototype=Object.create(ui.prototype)).constructor=Oo).prototype.isSpriteMaterial=!0,Oo.prototype.copy=function(e){return ui.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this};var Do=new Dt,Io=new Dt,No=new Dt,zo=new Rt,Bo=new Rt,Uo=new Jt,Fo=new Dt,Go=new Dt,Ho=new Dt,Vo=new Rt,jo=new Rt,ko=new Rt;function Wo(e){var t;mn.call(this),this.type="Sprite",void 0===wo&&(wo=new Oi,t=new Po(new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),5),wo.setIndex([0,1,2,0,2,3]),wo.setAttribute("position",new Co(t,3,0,!1)),wo.setAttribute("uv",new Co(t,2,3,!1))),this.geometry=wo,this.material=void 0!==e?e:new Oo,this.center=new Rt(.5,.5)}function qo(e,t,n,i,r,a){zo.subVectors(e,n).addScalar(.5).multiply(i),void 0!==r?(Bo.x=a*zo.x-r*zo.y,Bo.y=r*zo.x+a*zo.y):Bo.copy(zo),e.copy(t),e.x+=Bo.x,e.y+=Bo.y,e.applyMatrix4(Uo)}Wo.prototype=Object.assign(Object.create(mn.prototype),{constructor:Wo,isSprite:!0,raycast:function(e,t){null===e.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Io.setFromMatrixScale(this.matrixWorld),Uo.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),No.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&Io.multiplyScalar(-No.z);var n,i,r=this.material.rotation;0!==r&&(i=Math.cos(r),n=Math.sin(r));var o,a=this.center;qo(Fo.set(-.5,-.5,0),No,a,Io,n,i),qo(Go.set(.5,-.5,0),No,a,Io,n,i),qo(Ho.set(.5,.5,0),No,a,Io,n,i),Vo.set(0,0),jo.set(1,0),ko.set(1,1),null===e.ray.intersectTriangle(Fo,Go,Ho,!1,Do)&&(qo(Go.set(-.5,.5,0),No,a,Io,n,i),jo.set(0,1),null===e.ray.intersectTriangle(Fo,Ho,Go,!1,Do))||(o=e.ray.origin.distanceTo(Do))<e.near||o>e.far||t.push({distance:o,point:Do.clone(),uv:ti.getUV(Do,Fo,Go,Ho,Vo,jo,ko,new Rt),face:null,object:this})},clone:function(){return new this.constructor(this.material).copy(this)},copy:function(e){return mn.prototype.copy.call(this,e),void 0!==e.center&&this.center.copy(e.center),this}});var Xo=new Dt,Yo=new Dt;function Zo(){mn.call(this),this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}function Jo(e,t){e&&e.isGeometry&&console.error("THREE.SkinnedMesh no longer supports THREE.Geometry. Use THREE.BufferGeometry instead."),Ji.call(this,e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Jt,this.bindMatrixInverse=new Jt}Zo.prototype=Object.assign(Object.create(mn.prototype),{constructor:Zo,isLOD:!0,copy:function(e){mn.prototype.copy.call(this,e,!1);for(var t=e.levels,n=0,i=t.length;n<i;n++){var r=t[n];this.addLevel(r.object.clone(),r.distance)}return this},addLevel:function(e,t){void 0===t&&(t=0),t=Math.abs(t);for(var n=this.levels,i=0;i<n.length&&!(t<n[i].distance);i++);return n.splice(i,0,{distance:t,object:e}),this.add(e),this},getObjectForDistance:function(e){for(var t=this.levels,n=1,i=t.length;n<i&&!(e<t[n].distance);n++);return t[n-1].object},raycast:function(e,t){Xo.setFromMatrixPosition(this.matrixWorld);var n=e.ray.origin.distanceTo(Xo);this.getObjectForDistance(n).raycast(e,t)},update:function(e){var t=this.levels;if(1<t.length){Xo.setFromMatrixPosition(e.matrixWorld),Yo.setFromMatrixPosition(this.matrixWorld);var n=Xo.distanceTo(Yo);t[0].object.visible=!0;for(var i=1,r=t.length;i<r&&n>=t[i].distance;i++)t[i-1].object.visible=!1,t[i].object.visible=!0;for(;i<r;i++)t[i].object.visible=!1}},toJSON:function(e){var t=mn.prototype.toJSON.call(this,e);t.object.levels=[];for(var n=this.levels,i=0,r=n.length;i<r;i++){var a=n[i];t.object.levels.push({object:a.object.uuid,distance:a.distance})}return t}}),Jo.prototype=Object.assign(Object.create(Ji.prototype),{constructor:Jo,isSkinnedMesh:!0,bind:function(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.getInverse(t)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){for(var e=new Gt,t=this.geometry.attributes.skinWeight,n=0,i=t.count;n<i;n++){e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.w=t.getW(n);var r=1/e.manhattanLength();r!=1/0?e.multiplyScalar(r):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}},updateMatrixWorld:function(e){Ji.prototype.updateMatrixWorld.call(this,e),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});var Qo=new Jt,Ko=new Jt;function $o(e,t){if(e=e||[],this.bones=e.slice(0),this.boneMatrices=new Float32Array(16*this.bones.length),this.frame=-1,void 0===t)this.calculateInverses();else if(this.bones.length===t.length)this.boneInverses=t.slice(0);else{console.warn("THREE.Skeleton boneInverses is the wrong length."),this.boneInverses=[];for(var n=0,i=this.bones.length;n<i;n++)this.boneInverses.push(new Jt)}}function es(){mn.call(this),this.type="Bone"}function ts(e,t,n){Ji.call(this,e,t),this.instanceMatrix=new di(new Float32Array(16*n),16),this.count=n}function ns(e){ui.call(this),this.type="LineBasicMaterial",this.color=new ai(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.setValues(e)}Object.assign($o.prototype,{calculateInverses:function(){this.boneInverses=[];for(var e=0,t=this.bones.length;e<t;e++){var n=new Jt;this.bones[e]&&n.getInverse(this.bones[e].matrixWorld),this.boneInverses.push(n)}},pose:function(){for(var e,t=0,n=this.bones.length;t<n;t++)(e=this.bones[t])&&e.matrixWorld.getInverse(this.boneInverses[t]);for(t=0,n=this.bones.length;t<n;t++)(e=this.bones[t])&&(e.parent&&e.parent.isBone?(e.matrix.getInverse(e.parent.matrixWorld),e.matrix.multiply(e.matrixWorld)):e.matrix.copy(e.matrixWorld),e.matrix.decompose(e.position,e.quaternion,e.scale))},update:function(){for(var e=this.bones,t=this.boneInverses,n=this.boneMatrices,i=this.boneTexture,r=0,a=e.length;r<a;r++){var o=e[r]?e[r].matrixWorld:Ko;Qo.multiplyMatrices(o,t[r]),Qo.toArray(n,16*r)}void 0!==i&&(i.needsUpdate=!0)},clone:function(){return new $o(this.bones,this.boneInverses)},getBoneByName:function(e){for(var t=0,n=this.bones.length;t<n;t++){var i=this.bones[t];if(i.name===e)return i}}}),es.prototype=Object.assign(Object.create(mn.prototype),{constructor:es,isBone:!0}),ts.prototype=Object.assign(Object.create(Ji.prototype),{constructor:ts,isInstancedMesh:!0,raycast:function(){},setMatrixAt:function(e,t){t.toArray(this.instanceMatrix.array,16*e)},updateMorphTargets:function(){}}),((ns.prototype=Object.create(ui.prototype)).constructor=ns).prototype.isLineBasicMaterial=!0,ns.prototype.copy=function(e){return ui.prototype.copy.call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this};var is=new Dt,rs=new Dt,as=new Jt,os=new Gn,ss=new On;function cs(e,t,n){1===n&&console.error("THREE.Line: parameter THREE.LinePieces no longer supported. Use THREE.LineSegments instead."),mn.call(this),this.type="Line",this.geometry=void 0!==e?e:new Oi,this.material=void 0!==t?t:new ns({color:16777215*Math.random()})}cs.prototype=Object.assign(Object.create(mn.prototype),{constructor:cs,isLine:!0,computeLineDistances:function(){var e=this.geometry;if(e.isBufferGeometry)if(null===e.index){for(var t=e.attributes.position,n=[0],i=1,r=t.count;i<r;i++)is.fromBufferAttribute(t,i-1),rs.fromBufferAttribute(t,i),n[i]=n[i-1],n[i]+=is.distanceTo(rs);e.setAttribute("lineDistance",new wi(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(e.isGeometry){var a=e.vertices;for((n=e.lineDistances)[0]=0,i=1,r=a.length;i<r;i++)n[i]=n[i-1],n[i]+=a[i-1].distanceTo(a[i])}return this},raycast:function(e,t){var n=e.linePrecision,i=this.geometry,r=this.matrixWorld;if(null===i.boundingSphere&&i.computeBoundingSphere(),ss.copy(i.boundingSphere),ss.applyMatrix4(r),ss.radius+=n,!1!==e.ray.intersectsSphere(ss)){as.getInverse(r),os.copy(e.ray).applyMatrix4(as);var a=n/((this.scale.x+this.scale.y+this.scale.z)/3),o=a*a,s=new Dt,c=new Dt,l=new Dt,h=new Dt,u=this&&this.isLineSegments?2:1;if(i.isBufferGeometry){var p=i.index,d=i.attributes.position.array;if(null!==p)for(var f=p.array,m=0,g=f.length-1;m<g;m+=u){var v=f[m],y=f[m+1];s.fromArray(d,3*v),c.fromArray(d,3*y),o<os.distanceSqToSegment(s,c,h,l)||(h.applyMatrix4(this.matrixWorld),(x=e.ray.origin.distanceTo(h))<e.near||x>e.far||t.push({distance:x,point:l.clone().applyMatrix4(this.matrixWorld),index:m,face:null,faceIndex:null,object:this}))}else for(m=0,g=d.length/3-1;m<g;m+=u)s.fromArray(d,3*m),c.fromArray(d,3*m+3),o<os.distanceSqToSegment(s,c,h,l)||(h.applyMatrix4(this.matrixWorld),(x=e.ray.origin.distanceTo(h))<e.near||x>e.far||t.push({distance:x,point:l.clone().applyMatrix4(this.matrixWorld),index:m,face:null,faceIndex:null,object:this}))}else if(i.isGeometry)for(var x,b=i.vertices,w=b.length,m=0;m<w-1;m+=u)o<os.distanceSqToSegment(b[m],b[m+1],h,l)||(h.applyMatrix4(this.matrixWorld),(x=e.ray.origin.distanceTo(h))<e.near||x>e.far||t.push({distance:x,point:l.clone().applyMatrix4(this.matrixWorld),index:m,face:null,faceIndex:null,object:this}))}},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});var ls=new Dt,hs=new Dt;function us(e,t){cs.call(this,e,t),this.type="LineSegments"}function ps(e,t){cs.call(this,e,t),this.type="LineLoop"}function ds(e){ui.call(this),this.type="PointsMaterial",this.color=new ai(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.setValues(e)}us.prototype=Object.assign(Object.create(cs.prototype),{constructor:us,isLineSegments:!0,computeLineDistances:function(){var e=this.geometry;if(e.isBufferGeometry)if(null===e.index){for(var t=e.attributes.position,n=[],i=0,r=t.count;i<r;i+=2)ls.fromBufferAttribute(t,i),hs.fromBufferAttribute(t,i+1),n[i]=0===i?0:n[i-1],n[i+1]=n[i]+ls.distanceTo(hs);e.setAttribute("lineDistance",new wi(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(e.isGeometry)for(var a=e.vertices,n=e.lineDistances,i=0,r=a.length;i<r;i+=2)ls.copy(a[i]),hs.copy(a[i+1]),n[i]=0===i?0:n[i-1],n[i+1]=n[i]+ls.distanceTo(hs);return this}}),ps.prototype=Object.assign(Object.create(cs.prototype),{constructor:ps,isLineLoop:!0}),((ds.prototype=Object.create(ui.prototype)).constructor=ds).prototype.isPointsMaterial=!0,ds.prototype.copy=function(e){return ui.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.morphTargets=e.morphTargets,this};var fs=new Jt,ms=new Gn,gs=new On,vs=new Dt;function ys(e,t){mn.call(this),this.type="Points",this.geometry=void 0!==e?e:new Oi,this.material=void 0!==t?t:new ds({color:16777215*Math.random()}),this.updateMorphTargets()}function xs(e,t,n,i,r,a,o){var s=ms.distanceSqToPoint(e);if(s<n){var c=new Dt;ms.closestPointToPoint(e,c),c.applyMatrix4(i);var l=r.ray.origin.distanceTo(c);if(l<r.near||l>r.far)return;a.push({distance:l,distanceToRay:Math.sqrt(s),point:c,index:t,face:null,object:o})}}function bs(e,t,n,i,r,a,o,s,c){Ft.call(this,e,t,n,i,r,a,o,s,c),this.format=void 0!==o?o:tt,this.minFilter=void 0!==a?a:qe,this.magFilter=void 0!==r?r:qe,this.generateMipmaps=!1}function ws(e,t,n,i,r,a,o,s,c,l,h,u){Ft.call(this,null,a,o,s,c,l,i,r,h,u),this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}function _s(e,t,n,i,r,a,o,s,c){Ft.call(this,e,t,n,i,r,a,o,s,c),this.needsUpdate=!0}function Ms(e,t,n,i,r,a,o,s,c,l){if((l=void 0!==l?l:it)!==it&&l!==rt)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&l===it&&(n=Je),void 0===n&&l===rt&&(n=et),Ft.call(this,null,i,r,a,o,s,l,n,c),this.image={width:e,height:t},this.magFilter=void 0!==o?o:je,this.minFilter=void 0!==s?s:je,this.flipY=!1,this.generateMipmaps=!1}function Ss(e){Oi.call(this),this.type="WireframeGeometry";var t,n,i,r,a,o,s=[],c=[0,0],l={},h=["a","b","c"];if(e&&e.isGeometry){for(var u=e.faces,p=0,d=u.length;p<d;p++)for(var f=u[p],m=0;m<3;m++)r=f[h[m]],a=f[h[(m+1)%3]],c[0]=Math.min(r,a),c[1]=Math.max(r,a),void 0===l[o=c[0]+","+c[1]]&&(l[o]={index1:c[0],index2:c[1]});for(o in l)i=l[o],_=e.vertices[i.index1],s.push(_.x,_.y,_.z),_=e.vertices[i.index2],s.push(_.x,_.y,_.z)}else if(e&&e.isBufferGeometry){var g,v,y,x,b,w,_=new Dt;if(null!==e.index){for(g=e.attributes.position,v=e.index,0===(y=e.groups).length&&(y=[{start:0,count:v.count,materialIndex:0}]),t=0,n=y.length;t<n;++t)for(d=(p=(x=y[t]).start)+x.count;p<d;p+=3)for(m=0;m<3;m++)r=v.getX(p+m),a=v.getX(p+(m+1)%3),c[0]=Math.min(r,a),c[1]=Math.max(r,a),void 0===l[o=c[0]+","+c[1]]&&(l[o]={index1:c[0],index2:c[1]});for(o in l)i=l[o],_.fromBufferAttribute(g,i.index1),s.push(_.x,_.y,_.z),_.fromBufferAttribute(g,i.index2),s.push(_.x,_.y,_.z)}else for(p=0,d=(g=e.attributes.position).count/3;p<d;p++)for(m=0;m<3;m++)b=3*p+m,_.fromBufferAttribute(g,b),s.push(_.x,_.y,_.z),w=3*p+(m+1)%3,_.fromBufferAttribute(g,w),s.push(_.x,_.y,_.z)}this.setAttribute("position",new wi(s,3))}function Ts(e,t,n){ir.call(this),this.type="ParametricGeometry",this.parameters={func:e,slices:t,stacks:n},this.fromBufferGeometry(new Es(e,t,n)),this.mergeVertices()}function Es(e,t,n){Oi.call(this),this.type="ParametricBufferGeometry",this.parameters={func:e,slices:t,stacks:n};var i=[],r=[],a=[],o=[],s=new Dt,c=new Dt,l=new Dt,h=new Dt,u=new Dt;e.length<3&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");for(var p=t+1,d=0;d<=n;d++)for(var f=d/n,m=0;m<=t;m++){var g=m/t;e(g,f,c),r.push(c.x,c.y,c.z),0<=g-1e-5?(e(g-1e-5,f,l),h.subVectors(c,l)):(e(1e-5+g,f,l),h.subVectors(l,c)),0<=f-1e-5?(e(g,f-1e-5,l),u.subVectors(c,l)):(e(g,1e-5+f,l),u.subVectors(l,c)),s.crossVectors(h,u).normalize(),a.push(s.x,s.y,s.z),o.push(g,f)}for(d=0;d<n;d++)for(m=0;m<t;m++){var v=d*p+m,y=d*p+m+1,x=(d+1)*p+m+1,b=(d+1)*p+m;i.push(v,y,b),i.push(y,x,b)}this.setIndex(i),this.setAttribute("position",new wi(r,3)),this.setAttribute("normal",new wi(a,3)),this.setAttribute("uv",new wi(o,2))}function As(e,t,n,i){ir.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:i},this.fromBufferGeometry(new Ls(e,t,n,i)),this.mergeVertices()}function Ls(i,a,e,t){Oi.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:i,indices:a,radius:e,detail:t},e=e||1;var h=[],u=[];function p(e){h.push(e.x,e.y,e.z)}function o(e,t){var n=3*e;t.x=i[0+n],t.y=i[1+n],t.z=i[2+n]}function d(e,t,n,i){i<0&&1===e.x&&(u[t]=e.x-1),0===n.x&&0===n.z&&(u[t]=i/2/Math.PI+.5)}function f(e){return Math.atan2(e.z,-e.x)}!function(e){for(var t=new Dt,n=new Dt,i=new Dt,r=0;r<a.length;r+=3)o(a[r+0],t),o(a[r+1],n),o(a[r+2],i),function(e,t,n,i){for(var o=Math.pow(2,i),s=[],r=0;r<=o;r++){s[r]=[];for(var c=e.clone().lerp(n,r/o),l=t.clone().lerp(n,r/o),h=o-r,a=0;a<=h;a++)s[r][a]=0===a&&r===o?c:c.clone().lerp(l,a/h)}for(r=0;r<o;r++)for(a=0;a<2*(o-r)-1;a++){var u=Math.floor(a/2);a%2==0?(p(s[r][u+1]),p(s[r+1][u]),p(s[r][u])):(p(s[r][u+1]),p(s[r+1][u+1]),p(s[r+1][u]))}}(t,n,i,e)}(t=t||0),function(e){for(var t=new Dt,n=0;n<h.length;n+=3)t.x=h[n+0],t.y=h[n+1],t.z=h[n+2],t.normalize().multiplyScalar(e),h[n+0]=t.x,h[n+1]=t.y,h[n+2]=t.z}(e),function(){for(var e=new Dt,t=0;t<h.length;t+=3){e.x=h[t+0],e.y=h[t+1],e.z=h[t+2];var n=f(e)/2/Math.PI+.5,i=function(e){return Math.atan2(-e.y,Math.sqrt(e.x*e.x+e.z*e.z))}(e)/Math.PI+.5;u.push(n,1-i)}(function(){for(var e=new Dt,t=new Dt,n=new Dt,i=new Dt,r=new Rt,a=new Rt,o=new Rt,s=0,c=0;s<h.length;s+=9,c+=6){e.set(h[s+0],h[s+1],h[s+2]),t.set(h[s+3],h[s+4],h[s+5]),n.set(h[s+6],h[s+7],h[s+8]),r.set(u[c+0],u[c+1]),a.set(u[c+2],u[c+3]),o.set(u[c+4],u[c+5]),i.copy(e).add(t).add(n).divideScalar(3);var l=f(i);d(r,c+0,e,l),d(a,c+2,t,l),d(o,c+4,n,l)}})(),function(){for(var e=0;e<u.length;e+=6){var t=u[e+0],n=u[e+2],i=u[e+4],r=Math.max(t,n,i),a=Math.min(t,n,i);.9<r&&a<.1&&(t<.2&&(u[e+0]+=1),n<.2&&(u[e+2]+=1),i<.2&&(u[e+4]+=1))}}()}(),this.setAttribute("position",new wi(h,3)),this.setAttribute("normal",new wi(h.slice(),3)),this.setAttribute("uv",new wi(u,2)),0===t?this.computeVertexNormals():this.normalizeNormals()}function Rs(e,t){ir.call(this),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Ps(e,t)),this.mergeVertices()}function Ps(e,t){Ls.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],e,t),this.type="TetrahedronBufferGeometry",this.parameters={radius:e,detail:t}}function Cs(e,t){ir.call(this),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Os(e,t)),this.mergeVertices()}function Os(e,t){Ls.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],e,t),this.type="OctahedronBufferGeometry",this.parameters={radius:e,detail:t}}function Ds(e,t){ir.call(this),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Is(e,t)),this.mergeVertices()}function Is(e,t){var n=(1+Math.sqrt(5))/2;Ls.call(this,[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],e,t),this.type="IcosahedronBufferGeometry",this.parameters={radius:e,detail:t}}function Ns(e,t){ir.call(this),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new zs(e,t)),this.mergeVertices()}function zs(e,t){var n=(1+Math.sqrt(5))/2,i=1/n;Ls.call(this,[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-n,0,-i,n,0,i,-n,0,i,n,-i,-n,0,-i,n,0,i,-n,0,i,n,0,-n,0,-i,n,0,-i,-n,0,i,n,0,i],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],e,t),this.type="DodecahedronBufferGeometry",this.parameters={radius:e,detail:t}}function Bs(e,t,n,i,r,a){ir.call(this),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:i,closed:r},void 0!==a&&console.warn("THREE.TubeGeometry: taper has been removed.");var o=new Us(e,t,n,i,r);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals,this.fromBufferGeometry(o),this.mergeVertices()}function Us(o,s,c,l,e){Oi.call(this),this.type="TubeBufferGeometry",this.parameters={path:o,tubularSegments:s,radius:c,radialSegments:l,closed:e},s=s||64,c=c||1,l=l||8,e=e||!1;var h=o.computeFrenetFrames(s,e);this.tangents=h.tangents,this.normals=h.normals,this.binormals=h.binormals;var r,u,p=new Dt,d=new Dt,t=new Rt,f=new Dt,m=[],g=[],n=[],a=[];function i(e){f=o.getPointAt(e/s,f);var t=h.normals[e],n=h.binormals[e];for(u=0;u<=l;u++){var i=u/l*Math.PI*2,r=Math.sin(i),a=-Math.cos(i);d.x=a*t.x+r*n.x,d.y=a*t.y+r*n.y,d.z=a*t.z+r*n.z,d.normalize(),g.push(d.x,d.y,d.z),p.x=f.x+c*d.x,p.y=f.y+c*d.y,p.z=f.z+c*d.z,m.push(p.x,p.y,p.z)}}!function(){for(r=0;r<s;r++)i(r);i(!1===e?s:0),function(){for(r=0;r<=s;r++)for(u=0;u<=l;u++)t.x=r/s,t.y=u/l,n.push(t.x,t.y)}(),function(){for(u=1;u<=s;u++)for(r=1;r<=l;r++){var e=(l+1)*(u-1)+(r-1),t=(l+1)*u+(r-1),n=(l+1)*u+r,i=(l+1)*(u-1)+r;a.push(e,t,i),a.push(t,n,i)}}()}(),this.setIndex(a),this.setAttribute("position",new wi(m,3)),this.setAttribute("normal",new wi(g,3)),this.setAttribute("uv",new wi(n,2))}function Fs(e,t,n,i,r,a,o){ir.call(this),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:i,p:r,q:a},void 0!==o&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new Gs(e,t,n,i,r,a)),this.mergeVertices()}function Gs(e,t,n,i,r,a){Oi.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:i,p:r,q:a},e=e||1,t=t||.4,n=Math.floor(n)||64,i=Math.floor(i)||8,r=r||2,a=a||3;for(var o,s=[],c=[],l=[],h=[],u=new Dt,p=new Dt,d=new Dt,f=new Dt,m=new Dt,g=new Dt,v=new Dt,y=0;y<=n;++y){var x=y/n*r*Math.PI*2;for(A(x,r,a,e,d),A(.01+x,r,a,e,f),g.subVectors(f,d),v.addVectors(f,d),m.crossVectors(g,v),v.crossVectors(m,g),m.normalize(),v.normalize(),o=0;o<=i;++o){var b=o/i*Math.PI*2,w=-t*Math.cos(b),_=t*Math.sin(b);u.x=d.x+(w*v.x+_*m.x),u.y=d.y+(w*v.y+_*m.y),u.z=d.z+(w*v.z+_*m.z),c.push(u.x,u.y,u.z),p.subVectors(u,d).normalize(),l.push(p.x,p.y,p.z),h.push(y/n),h.push(o/i)}}for(o=1;o<=n;o++)for(y=1;y<=i;y++){var M=(i+1)*(o-1)+(y-1),S=(i+1)*o+(y-1),T=(i+1)*o+y,E=(i+1)*(o-1)+y;s.push(M,S,E),s.push(S,T,E)}function A(e,t,n,i,r){var a=Math.cos(e),o=Math.sin(e),s=n/t*e,c=Math.cos(s);r.x=i*(2+c)*.5*a,r.y=i*(2+c)*o*.5,r.z=i*Math.sin(s)*.5}this.setIndex(s),this.setAttribute("position",new wi(c,3)),this.setAttribute("normal",new wi(l,3)),this.setAttribute("uv",new wi(h,2))}function Hs(e,t,n,i,r){ir.call(this),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:i,arc:r},this.fromBufferGeometry(new Vs(e,t,n,i,r)),this.mergeVertices()}function Vs(e,t,n,i,r){Oi.call(this),this.type="TorusBufferGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:i,arc:r},e=e||1,t=t||.4,n=Math.floor(n)||8,i=Math.floor(i)||6,r=r||2*Math.PI;for(var a,o=[],s=[],c=[],l=[],h=new Dt,u=new Dt,p=new Dt,d=0;d<=n;d++)for(a=0;a<=i;a++){var f=a/i*r,m=d/n*Math.PI*2;u.x=(e+t*Math.cos(m))*Math.cos(f),u.y=(e+t*Math.cos(m))*Math.sin(f),u.z=t*Math.sin(m),s.push(u.x,u.y,u.z),h.x=e*Math.cos(f),h.y=e*Math.sin(f),p.subVectors(u,h).normalize(),c.push(p.x,p.y,p.z),l.push(a/i),l.push(d/n)}for(d=1;d<=n;d++)for(a=1;a<=i;a++){var g=(i+1)*d+a-1,v=(i+1)*(d-1)+a-1,y=(i+1)*(d-1)+a,x=(i+1)*d+a;o.push(g,v,x),o.push(v,y,x)}this.setIndex(o),this.setAttribute("position",new wi(s,3)),this.setAttribute("normal",new wi(c,3)),this.setAttribute("uv",new wi(l,2))}ys.prototype=Object.assign(Object.create(mn.prototype),{constructor:ys,isPoints:!0,raycast:function(e,t){var n=this.geometry,i=this.matrixWorld,r=e.params.Points.threshold;if(null===n.boundingSphere&&n.computeBoundingSphere(),gs.copy(n.boundingSphere),gs.applyMatrix4(i),gs.radius+=r,!1!==e.ray.intersectsSphere(gs)){fs.getInverse(i),ms.copy(e.ray).applyMatrix4(fs);var a=r/((this.scale.x+this.scale.y+this.scale.z)/3),o=a*a;if(n.isBufferGeometry){var s=n.index,c=n.attributes.position.array;if(null!==s)for(var l=s.array,h=0,u=l.length;h<u;h++){var p=l[h];vs.fromArray(c,3*p),xs(vs,p,o,i,e,t,this)}else for(var h=0,d=c.length/3;h<d;h++)vs.fromArray(c,3*h),xs(vs,h,o,i,e,t,this)}else for(var f=n.vertices,h=0,d=f.length;h<d;h++)xs(f[h],h,o,i,e,t,this)}},updateMorphTargets:function(){var e,t,n,i=this.geometry;if(i.isBufferGeometry){var r=i.morphAttributes,a=Object.keys(r);if(0<a.length){var o=r[a[0]];if(void 0!==o)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},e=0,t=o.length;e<t;e++)n=o[e].name||String(e),this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=e}}else{var s=i.morphTargets;void 0!==s&&0<s.length&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),bs.prototype=Object.assign(Object.create(Ft.prototype),{constructor:bs,isVideoTexture:!0,update:function(){var e=this.image;e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}),((ws.prototype=Object.create(Ft.prototype)).constructor=ws).prototype.isCompressedTexture=!0,((_s.prototype=Object.create(Ft.prototype)).constructor=_s).prototype.isCanvasTexture=!0,((Ms.prototype=Object.create(Ft.prototype)).constructor=Ms).prototype.isDepthTexture=!0,(Ss.prototype=Object.create(Oi.prototype)).constructor=Ss,(Ts.prototype=Object.create(ir.prototype)).constructor=Ts,(Es.prototype=Object.create(Oi.prototype)).constructor=Es,(As.prototype=Object.create(ir.prototype)).constructor=As,(Ls.prototype=Object.create(Oi.prototype)).constructor=Ls,(Rs.prototype=Object.create(ir.prototype)).constructor=Rs,(Ps.prototype=Object.create(Ls.prototype)).constructor=Ps,(Cs.prototype=Object.create(ir.prototype)).constructor=Cs,(Os.prototype=Object.create(Ls.prototype)).constructor=Os,(Ds.prototype=Object.create(ir.prototype)).constructor=Ds,(Is.prototype=Object.create(Ls.prototype)).constructor=Is,(Ns.prototype=Object.create(ir.prototype)).constructor=Ns,(zs.prototype=Object.create(Ls.prototype)).constructor=zs,(Bs.prototype=Object.create(ir.prototype)).constructor=Bs,((Us.prototype=Object.create(Oi.prototype)).constructor=Us).prototype.toJSON=function(){var e=Oi.prototype.toJSON.call(this);return e.path=this.parameters.path.toJSON(),e},(Fs.prototype=Object.create(ir.prototype)).constructor=Fs,(Gs.prototype=Object.create(Oi.prototype)).constructor=Gs,(Hs.prototype=Object.create(ir.prototype)).constructor=Hs,(Vs.prototype=Object.create(Oi.prototype)).constructor=Vs;function js(e,t,n){n=n||2;var i,r,a,o,s,c,l,h=t&&t.length,u=h?t[0]*n:e.length,p=ks(e,0,u,n,!0),d=[];if(!p||p.next===p.prev)return d;if(h&&(p=function(e,t,n,i){for(var c,l=[],r=0,a=t.length;r<a;r++)(c=ks(e,t[r]*i,r<a-1?t[r+1]*i:e.length,i,!1))===c.next&&(c.steiner=!0),l.push(function(e){for(var t=e,n=e;(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),(t=t.next)!==e;);return n}(c));for(l.sort(Xs),r=0;r<l.length;r++)!function(e,t){var n;(t=function(e,t){var n,i=t,r=e.x,a=e.y,o=-1/0;do{if(a<=i.y&&a>=i.next.y&&i.next.y!==i.y){var s=i.x+(a-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(s<=r&&o<s){if((o=s)===r){if(a===i.y)return i;if(a===i.next.y)return i.next}n=i.x<i.next.x?i:i.next}}i=i.next}while(i!==t);if(!n)return null;if(r===o)return n.prev;for(var c,l=n,h=n.x,u=n.y,p=1/0,i=n.next;i!==l;)r>=i.x&&i.x>=h&&r!==i.x&&Zs(a<u?r:o,a,h,u,a<u?o:r,a,i.x,i.y)&&((c=Math.abs(a-i.y)/(r-i.x))<p||c===p&&i.x>n.x)&&$s(i,e)&&(n=i,p=c),i=i.next;return n}(e,t))&&Ws(n=ec(t,e),n.next)}(l[r],n),n=Ws(n,n.next);return n}(e,t,p,n)),e.length>80*n){i=a=e[0],r=o=e[1];for(var f=n;f<u;f+=n)(s=e[f])<i&&(i=s),(c=e[f+1])<r&&(r=c),a<s&&(a=s),o<c&&(o=c);l=0!==(l=Math.max(a-i,o-r))?1/l:0}return function qs(e,t,n,i,r,a,o){if(e){!o&&a&&function(e,t,n,i){for(var r=e;null===r.z&&(r.z=Ys(r.x,r.y,t,n,i)),r.prevZ=r.prev,r.nextZ=r.next,(r=r.next)!==e;);r.prevZ.nextZ=null,r.prevZ=null,function(e){var t,n,i,r,a,o,s,c,l=1;do{for(n=e,a=e=null,o=0;n;){for(o++,i=n,t=s=0;t<l&&(s++,i=i.nextZ);t++);for(c=l;0<s||0<c&&i;)0!==s&&(0===c||!i||n.z<=i.z)?(n=(r=n).nextZ,s--):(i=(r=i).nextZ,c--),a?a.nextZ=r:e=r,r.prevZ=a,a=r;n=i}a.nextZ=null,l*=2}while(1<o)}(r)}(e,i,r,a);for(var s,c,l=e;e.prev!==e.next;)if(s=e.prev,c=e.next,a?function(e,t,n,i){var r=e.prev,a=e,o=e.next;if(!(0<=Js(r,a,o))){for(var s=r.x<a.x?r.x<o.x?r.x:o.x:a.x<o.x?a.x:o.x,c=r.y<a.y?r.y<o.y?r.y:o.y:a.y<o.y?a.y:o.y,l=r.x>a.x?r.x>o.x?r.x:o.x:a.x>o.x?a.x:o.x,h=r.y>a.y?r.y>o.y?r.y:o.y:a.y>o.y?a.y:o.y,u=Ys(s,c,t,n,i),p=Ys(l,h,t,n,i),d=e.prevZ,f=e.nextZ;d&&d.z>=u&&f&&f.z<=p;){if(d!==e.prev&&d!==e.next&&Zs(r.x,r.y,a.x,a.y,o.x,o.y,d.x,d.y)&&0<=Js(d.prev,d,d.next))return;if(d=d.prevZ,f!==e.prev&&f!==e.next&&Zs(r.x,r.y,a.x,a.y,o.x,o.y,f.x,f.y)&&0<=Js(f.prev,f,f.next))return;f=f.nextZ}for(;d&&d.z>=u;){if(d!==e.prev&&d!==e.next&&Zs(r.x,r.y,a.x,a.y,o.x,o.y,d.x,d.y)&&0<=Js(d.prev,d,d.next))return;d=d.prevZ}for(;f&&f.z<=p;){if(f!==e.prev&&f!==e.next&&Zs(r.x,r.y,a.x,a.y,o.x,o.y,f.x,f.y)&&0<=Js(f.prev,f,f.next))return;f=f.nextZ}return 1}}(e,i,r,a):function(e){var t=e.prev,n=e,i=e.next;if(!(0<=Js(t,n,i))){for(var r=e.next.next;r!==e.prev;){if(Zs(t.x,t.y,n.x,n.y,i.x,i.y,r.x,r.y)&&0<=Js(r.prev,r,r.next))return;r=r.next}return 1}}(e))t.push(s.i/n),t.push(e.i/n),t.push(c.i/n),nc(e),e=c.next,l=c.next;else if((e=c)===l){o?1===o?qs(e=function(e,t,n){var i=e;do{var r=i.prev,a=i.next.next;!Qs(r,a)&&Ks(r,i,i.next,a)&&$s(r,a)&&$s(a,r)&&(t.push(r.i/n),t.push(i.i/n),t.push(a.i/n),nc(i),nc(i.next),i=e=a),i=i.next}while(i!==e);return i}(e,t,n),t,n,i,r,a,2):2===o&&function(e,t,n,i,r,a){var o=e;do{for(var s=o.next.next;s!==o.prev;){if(o.i!==s.i&&function(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&Ks(n,n.next,e,t))return 1;n=n.next}while(n!==e)}(e,t)&&$s(e,t)&&$s(t,e)&&function(e,t){for(var n=e,i=!1,r=(e.x+t.x)/2,a=(e.y+t.y)/2;n.y>a!=n.next.y>a&&n.next.y!==n.y&&r<(n.next.x-n.x)*(a-n.y)/(n.next.y-n.y)+n.x&&(i=!i),(n=n.next)!==e;);return i}(e,t)}(o,s)){var c=ec(o,s);return o=Ws(o,o.next),c=Ws(c,c.next),qs(o,t,n,i,r,a),qs(c,t,n,i,r,a)}s=s.next}o=o.next}while(o!==e)}(e,t,n,i,r,a):qs(Ws(e),t,n,i,r,a,1);break}}}(p,d,n,i,r,l),d}function ks(e,t,n,i,r){var a,o;if(r===0<function(e,t,n,i){for(var r=0,a=t,o=n-i;a<n;a+=i)r+=(e[o]-e[a])*(e[a+1]+e[o+1]),o=a;return r}(e,t,n,i))for(a=t;a<n;a+=i)o=tc(a,e[a],e[a+1],o);else for(a=n-i;t<=a;a-=i)o=tc(a,e[a],e[a+1],o);return o&&Qs(o,o.next)&&(nc(o),o=o.next),o}function Ws(e,t){if(!e)return e;t=t||e;var n,i=e;do{if(n=!1,i.steiner||!Qs(i,i.next)&&0!==Js(i.prev,i,i.next))i=i.next;else{if(nc(i),(i=t=i.prev)===i.next)break;n=!0}}while(n||i!==t);return t}function Xs(e,t){return e.x-t.x}function Ys(e,t,n,i,r){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*r)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-i)*r)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function Zs(e,t,n,i,r,a,o,s){return 0<=(r-o)*(t-s)-(e-o)*(a-s)&&0<=(e-o)*(i-s)-(n-o)*(t-s)&&0<=(n-o)*(a-s)-(r-o)*(i-s)}function Js(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function Qs(e,t){return e.x===t.x&&e.y===t.y}function Ks(e,t,n,i){return Qs(e,n)&&Qs(t,i)||Qs(e,i)&&Qs(n,t)||0<Js(e,t,n)!=0<Js(e,t,i)&&0<Js(n,i,e)!=0<Js(n,i,t)}function $s(e,t){return Js(e.prev,e,e.next)<0?0<=Js(e,t,e.next)&&0<=Js(e,e.prev,t):Js(e,t,e.prev)<0||Js(e,e.next,t)<0}function ec(e,t){var n=new ic(e.i,e.x,e.y),i=new ic(t.i,t.x,t.y),r=e.next,a=t.prev;return(e.next=t).prev=e,(n.next=r).prev=n,(i.next=n).prev=i,(a.next=i).prev=a,i}function tc(e,t,n,i){var r=new ic(e,t,n);return i?(r.next=i.next,(r.prev=i).next.prev=r,i.next=r):(r.prev=r).next=r,r}function nc(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function ic(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}var rc={area:function(e){for(var t=e.length,n=0,i=t-1,r=0;r<t;i=r++)n+=e[i].x*e[r].y-e[r].x*e[i].y;return.5*n},isClockWise:function(e){return rc.area(e)<0},triangulateShape:function(e,t){var n=[],i=[],r=[];ac(e),oc(n,e);var a=e.length;t.forEach(ac);for(var o=0;o<t.length;o++)i.push(a),a+=t[o].length,oc(n,t[o]);for(var s=js(n,i),o=0;o<s.length;o+=3)r.push(s.slice(o,o+3));return r}};function ac(e){var t=e.length;2<t&&e[t-1].equals(e[0])&&e.pop()}function oc(e,t){for(var n=0;n<t.length;n++)e.push(t[n].x),e.push(t[n].y)}function sc(e,t){ir.call(this),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},this.fromBufferGeometry(new cc(e,t)),this.mergeVertices()}function cc(e,J){Oi.call(this),this.type="ExtrudeBufferGeometry",this.parameters={shapes:e,options:J},e=Array.isArray(e)?e:[e];for(var Q=this,K=[],$=[],t=0,n=e.length;t<n;t++)!function(e){var i=[],t=void 0!==J.curveSegments?J.curveSegments:12,c=void 0!==J.steps?J.steps:1,n=void 0!==J.depth?J.depth:100,r=void 0===J.bevelEnabled||J.bevelEnabled,a=void 0!==J.bevelThickness?J.bevelThickness:6,o=void 0!==J.bevelSize?J.bevelSize:a-2,s=void 0!==J.bevelOffset?J.bevelOffset:0,l=void 0!==J.bevelSegments?J.bevelSegments:3,h=J.extrudePath,u=void 0!==J.UVGenerator?J.UVGenerator:lc;void 0!==J.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),n=J.amount);var p,d,f,m,g,v,b=!1;h&&(p=h.getSpacedPoints(c),r=!(b=!0),d=h.computeFrenetFrames(c,!1),f=new Dt,m=new Dt,g=new Dt),r||(s=o=a=l=0);var w=e.extractPoints(t),_=w.shape,M=w.holes;if(!rc.isClockWise(_))for(_=_.reverse(),y=0,x=M.length;y<x;y++)v=M[y],rc.isClockWise(v)&&(M[y]=v.reverse());for(var S=rc.triangulateShape(_,M),T=_,y=0,x=M.length;y<x;y++)v=M[y],_=_.concat(v);function E(e,t,n){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),t.clone().multiplyScalar(n).add(e)}var A,L,R,P,C,O,D=_.length,I=S.length;function N(e,t,n){var i,r=e.x-t.x,a=e.y-t.y,o=n.x-e.x,s=n.y-e.y,c=r*r+a*a,l=r*s-a*o;if(Math.abs(l)>Number.EPSILON){var h,u,p=Math.sqrt(c),d=Math.sqrt(o*o+s*s),f=t.x-a/p,m=t.y+r/p,g=((n.x-s/d-f)*s-(n.y+o/d-m)*o)/(r*s-a*o),v=(h=f+r*g-e.x)*h+(u=m+a*g-e.y)*u;if(v<=2)return new Rt(h,u);i=Math.sqrt(v/2)}else{var y=!1;r>Number.EPSILON?o>Number.EPSILON&&(y=!0):r<-Number.EPSILON?o<-Number.EPSILON&&(y=!0):Math.sign(a)===Math.sign(s)&&(y=!0),i=y?(h=-a,u=r,Math.sqrt(c)):(h=r,u=a,Math.sqrt(c/2))}return new Rt(h/i,u/i)}for(var z=[],B=0,U=T.length,F=U-1,G=B+1;B<U;B++,F++,G++)F===U&&(F=0),G===U&&(G=0),z[B]=N(T[B],T[F],T[G]);var H,V,j=[],k=z.concat();for(y=0,x=M.length;y<x;y++){for(v=M[y],H=[],B=0,F=(U=v.length)-1,G=B+1;B<U;B++,F++,G++)F===U&&(F=0),G===U&&(G=0),H[B]=N(v[B],v[F],v[G]);j.push(H),k=k.concat(H)}for(A=0;A<l;A++){for(R=A/l,P=a*Math.cos(R*Math.PI/2),L=o*Math.sin(R*Math.PI/2)+s,B=0,U=T.length;B<U;B++)q((C=E(T[B],z[B],L)).x,C.y,-P);for(y=0,x=M.length;y<x;y++)for(v=M[y],H=j[y],B=0,U=v.length;B<U;B++)q((C=E(v[B],H[B],L)).x,C.y,-P)}for(L=o+s,B=0;B<D;B++)C=r?E(_[B],k[B],L):_[B],b?(m.copy(d.normals[0]).multiplyScalar(C.x),f.copy(d.binormals[0]).multiplyScalar(C.y),g.copy(p[0]).add(m).add(f),q(g.x,g.y,g.z)):q(C.x,C.y,0);for(V=1;V<=c;V++)for(B=0;B<D;B++)C=r?E(_[B],k[B],L):_[B],b?(m.copy(d.normals[V]).multiplyScalar(C.x),f.copy(d.binormals[V]).multiplyScalar(C.y),g.copy(p[V]).add(m).add(f),q(g.x,g.y,g.z)):q(C.x,C.y,n/c*V);for(A=l-1;0<=A;A--){for(R=A/l,P=a*Math.cos(R*Math.PI/2),L=o*Math.sin(R*Math.PI/2)+s,B=0,U=T.length;B<U;B++)q((C=E(T[B],z[B],L)).x,C.y,n+P);for(y=0,x=M.length;y<x;y++)for(v=M[y],H=j[y],B=0,U=v.length;B<U;B++)C=E(v[B],H[B],L),b?q(C.x,C.y+p[c-1].y,p[c-1].x+P):q(C.x,C.y,n+P)}function W(e,t){var n,i;for(B=e.length;0<=--B;){(i=(n=B)-1)<0&&(i=e.length-1);for(var r=0,a=c+2*l,r=0;r<a;r++){var o=D*r,s=D*(r+1);!function(e,t,n,i){Y(e),Y(t),Y(i),Y(t),Y(n),Y(i);var r=K.length/3,a=u.generateSideWallUV(Q,K,r-6,r-3,r-2,r-1);Z(a[0]),Z(a[1]),Z(a[3]),Z(a[1]),Z(a[2]),Z(a[3])}(t+n+o,t+i+o,t+i+s,t+n+s)}}}function q(e,t,n){i.push(e),i.push(t),i.push(n)}function X(e,t,n){Y(e),Y(t),Y(n);var i=K.length/3,r=u.generateTopUV(Q,K,i-3,i-2,i-1);Z(r[0]),Z(r[1]),Z(r[2])}function Y(e){K.push(i[3*e+0]),K.push(i[3*e+1]),K.push(i[3*e+2])}function Z(e){$.push(e.x),$.push(e.y)}(function(){var e=K.length/3;if(r){var t=0*D;for(B=0;B<I;B++)X((O=S[B])[2]+t,O[1]+t,O[0]+t);for(t=D*(c+2*l),B=0;B<I;B++)X((O=S[B])[0]+t,O[1]+t,O[2]+t)}else{for(B=0;B<I;B++)X((O=S[B])[2],O[1],O[0]);for(B=0;B<I;B++)X((O=S[B])[0]+D*c,O[1]+D*c,O[2]+D*c)}Q.addGroup(e,K.length/3-e,0)})(),function(){var e=K.length/3,t=0;for(W(T,t),t+=T.length,y=0,x=M.length;y<x;y++)W(v=M[y],t),t+=v.length;Q.addGroup(e,K.length/3-e,1)}()}(e[t]);this.setAttribute("position",new wi(K,3)),this.setAttribute("uv",new wi($,2)),this.computeVertexNormals()}((sc.prototype=Object.create(ir.prototype)).constructor=sc).prototype.toJSON=function(){var e=ir.prototype.toJSON.call(this);return hc(this.parameters.shapes,this.parameters.options,e)},((cc.prototype=Object.create(Oi.prototype)).constructor=cc).prototype.toJSON=function(){var e=Oi.prototype.toJSON.call(this);return hc(this.parameters.shapes,this.parameters.options,e)};var lc={generateTopUV:function(e,t,n,i,r){var a=t[3*n],o=t[3*n+1],s=t[3*i],c=t[3*i+1],l=t[3*r],h=t[3*r+1];return[new Rt(a,o),new Rt(s,c),new Rt(l,h)]},generateSideWallUV:function(e,t,n,i,r,a){var o=t[3*n],s=t[3*n+1],c=t[3*n+2],l=t[3*i],h=t[3*i+1],u=t[3*i+2],p=t[3*r],d=t[3*r+1],f=t[3*r+2],m=t[3*a],g=t[3*a+1],v=t[3*a+2];return Math.abs(s-h)<.01?[new Rt(o,1-c),new Rt(l,1-u),new Rt(p,1-f),new Rt(m,1-v)]:[new Rt(s,1-c),new Rt(h,1-u),new Rt(d,1-f),new Rt(g,1-v)]}};function hc(e,t,n){if(n.shapes=[],Array.isArray(e))for(var i=0,r=e.length;i<r;i++){var a=e[i];n.shapes.push(a.uuid)}else n.shapes.push(e.uuid);return void 0!==t.extrudePath&&(n.options.extrudePath=t.extrudePath.toJSON()),n}function uc(e,t){ir.call(this),this.type="TextGeometry",this.parameters={text:e,parameters:t},this.fromBufferGeometry(new pc(e,t)),this.mergeVertices()}function pc(e,t){var n=(t=t||{}).font;if(!n||!n.isFont)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new ir;var i=n.generateShapes(e,t.size);t.depth=void 0!==t.height?t.height:50,void 0===t.bevelThickness&&(t.bevelThickness=10),void 0===t.bevelSize&&(t.bevelSize=8),void 0===t.bevelEnabled&&(t.bevelEnabled=!1),cc.call(this,i,t),this.type="TextBufferGeometry"}function dc(e,t,n,i,r,a,o){ir.call(this),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:i,phiLength:r,thetaStart:a,thetaLength:o},this.fromBufferGeometry(new fc(e,t,n,i,r,a,o)),this.mergeVertices()}function fc(e,t,n,i,r,a,o){Oi.call(this),this.type="SphereBufferGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:i,phiLength:r,thetaStart:a,thetaLength:o},e=e||1,t=Math.max(3,Math.floor(t)||8),n=Math.max(2,Math.floor(n)||6),i=void 0!==i?i:0,r=void 0!==r?r:2*Math.PI,a=void 0!==a?a:0,o=void 0!==o?o:Math.PI;for(var s,c=Math.min(a+o,Math.PI),l=0,h=[],u=new Dt,p=new Dt,d=[],f=[],m=[],g=[],v=0;v<=n;v++){var y=[],x=v/n,b=0;for(0==v&&0==a?b=.5/t:v==n&&c==Math.PI&&(b=-.5/t),s=0;s<=t;s++){var w=s/t;u.x=-e*Math.cos(i+w*r)*Math.sin(a+x*o),u.y=e*Math.cos(a+x*o),u.z=e*Math.sin(i+w*r)*Math.sin(a+x*o),f.push(u.x,u.y,u.z),p.copy(u).normalize(),m.push(p.x,p.y,p.z),g.push(w+b,1-x),y.push(l++)}h.push(y)}for(v=0;v<n;v++)for(s=0;s<t;s++){var _=h[v][s+1],M=h[v][s],S=h[v+1][s],T=h[v+1][s+1];(0!==v||0<a)&&d.push(_,M,T),(v!==n-1||c<Math.PI)&&d.push(M,S,T)}this.setIndex(d),this.setAttribute("position",new wi(f,3)),this.setAttribute("normal",new wi(m,3)),this.setAttribute("uv",new wi(g,2))}function mc(e,t,n,i,r,a){ir.call(this),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:i,thetaStart:r,thetaLength:a},this.fromBufferGeometry(new gc(e,t,n,i,r,a)),this.mergeVertices()}function gc(e,t,n,i,r,a){Oi.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:i,thetaStart:r,thetaLength:a},e=e||.5,t=t||1,r=void 0!==r?r:0,a=void 0!==a?a:2*Math.PI,n=void 0!==n?Math.max(3,n):8;for(var o,s=[],c=[],l=[],h=[],u=e,p=(t-e)/(i=void 0!==i?Math.max(1,i):1),d=new Dt,f=new Rt,m=0;m<=i;m++){for(v=0;v<=n;v++)o=r+v/n*a,d.x=u*Math.cos(o),d.y=u*Math.sin(o),c.push(d.x,d.y,d.z),l.push(0,0,1),f.x=(d.x/t+1)/2,f.y=(d.y/t+1)/2,h.push(f.x,f.y);u+=p}for(m=0;m<i;m++)for(var g=m*(n+1),v=0;v<n;v++){var y=(o=v+g)+n+1,x=o+n+2,b=o+1;s.push(o,y,b),s.push(y,x,b)}this.setIndex(s),this.setAttribute("position",new wi(c,3)),this.setAttribute("normal",new wi(l,3)),this.setAttribute("uv",new wi(h,2))}function vc(e,t,n,i){ir.call(this),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:i},this.fromBufferGeometry(new yc(e,t,n,i)),this.mergeVertices()}function yc(e,t,n,i){Oi.call(this),this.type="LatheBufferGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:i},t=Math.floor(t)||12,n=n||0,i=i||2*Math.PI,i=Lt.clamp(i,0,2*Math.PI);for(var r=[],a=[],o=[],s=1/t,c=new Dt,l=new Rt,_=0;_<=t;_++)for(var h=n+_*s*i,u=Math.sin(h),p=Math.cos(h),d=0;d<=e.length-1;d++)c.x=e[d].x*u,c.y=e[d].y,c.z=e[d].x*p,a.push(c.x,c.y,c.z),l.x=_/t,l.y=d/(e.length-1),o.push(l.x,l.y);for(_=0;_<t;_++)for(d=0;d<e.length-1;d++){var f=(w=d+_*e.length)+e.length,m=w+e.length+1,g=w+1;r.push(w,f,g),r.push(f,m,g)}if(this.setIndex(r),this.setAttribute("position",new wi(a,3)),this.setAttribute("uv",new wi(o,2)),this.computeVertexNormals(),i===2*Math.PI)for(var v=this.attributes.normal.array,y=new Dt,x=new Dt,b=new Dt,w=t*e.length*3,_=0,d=0;_<e.length;_++,d+=3)y.x=v[d+0],y.y=v[d+1],y.z=v[d+2],x.x=v[w+d+0],x.y=v[w+d+1],x.z=v[w+d+2],b.addVectors(y,x).normalize(),v[d+0]=v[w+d+0]=b.x,v[d+1]=v[w+d+1]=b.y,v[d+2]=v[w+d+2]=b.z}function xc(e,t){ir.call(this),this.type="ShapeGeometry","object"===(void 0===t?"undefined":_typeof(t))&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),t=t.curveSegments),this.parameters={shapes:e,curveSegments:t},this.fromBufferGeometry(new bc(e,t)),this.mergeVertices()}function bc(e,f){Oi.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:e,curveSegments:f},f=f||12;var m=[],g=[],v=[],y=[],t=0,x=0;if(!1===Array.isArray(e))i(e);else for(var n=0;n<e.length;n++)i(e[n]),this.addGroup(t,x,n),t+=x,x=0;function i(e){var t,n=g.length/3,i=e.extractPoints(f),r=i.shape,a=i.holes;for(!1===rc.isClockWise(r)&&(r=r.reverse()),s=0,c=a.length;s<c;s++)t=a[s],!0===rc.isClockWise(t)&&(a[s]=t.reverse());for(var o=rc.triangulateShape(r,a),s=0,c=a.length;s<c;s++)t=a[s],r=r.concat(t);for(s=0,c=r.length;s<c;s++){var l=r[s];g.push(l.x,l.y,0),v.push(0,0,1),y.push(l.x,l.y)}for(s=0,c=o.length;s<c;s++){var h=o[s],u=h[0]+n,p=h[1]+n,d=h[2]+n;m.push(u,p,d),x+=3}}this.setIndex(m),this.setAttribute("position",new wi(g,3)),this.setAttribute("normal",new wi(v,3)),this.setAttribute("uv",new wi(y,2))}function wc(e,t){if(t.shapes=[],Array.isArray(e))for(var n=0,i=e.length;n<i;n++){var r=e[n];t.shapes.push(r.uuid)}else t.shapes.push(e.uuid);return t}function _c(e,t){Oi.call(this),this.type="EdgesGeometry",this.parameters={thresholdAngle:t},t=void 0!==t?t:1;var n,i,r,a,o=[],s=Math.cos(Lt.DEG2RAD*t),c=[0,0],l={},h=["a","b","c"];e.isBufferGeometry?(a=new ir).fromBufferGeometry(e):a=e.clone(),a.mergeVertices(),a.computeFaceNormals();for(var u=a.vertices,p=a.faces,d=0,f=p.length;d<f;d++)for(var m=p[d],g=0;g<3;g++)n=m[h[g]],i=m[h[(g+1)%3]],c[0]=Math.min(n,i),c[1]=Math.max(n,i),void 0===l[r=c[0]+","+c[1]]?l[r]={index1:c[0],index2:c[1],face1:d,face2:void 0}:l[r].face2=d;for(r in l){var v,y=l[r];(void 0===y.face2||p[y.face1].normal.dot(p[y.face2].normal)<=s)&&(v=u[y.index1],o.push(v.x,v.y,v.z),v=u[y.index2],o.push(v.x,v.y,v.z))}this.setAttribute("position",new wi(o,3))}function Mc(e,t,n,i,r,a,o,s){ir.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:i,heightSegments:r,openEnded:a,thetaStart:o,thetaLength:s},this.fromBufferGeometry(new Sc(e,t,n,i,r,a,o,s)),this.mergeVertices()}function Sc(v,y,x,b,w,e,_,M){Oi.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:v,radiusBottom:y,height:x,radialSegments:b,heightSegments:w,openEnded:e,thetaStart:_,thetaLength:M};var S=this;v=void 0!==v?v:1,y=void 0!==y?y:1,x=x||1,b=Math.floor(b)||8,w=Math.floor(w)||1,e=void 0!==e&&e,_=void 0!==_?_:0,M=void 0!==M?M:2*Math.PI;var T=[],E=[],A=[],L=[],R=0,P=[],C=x/2,O=0;function t(e){for(var t,n=new Rt,i=new Dt,r=0,a=!0===e?v:y,o=!0===e?1:-1,s=R,c=1;c<=b;c++)E.push(0,C*o,0),A.push(0,o,0),L.push(.5,.5),R++;for(t=R,c=0;c<=b;c++){var l=c/b*M+_,h=Math.cos(l),u=Math.sin(l);i.x=a*u,i.y=C*o,i.z=a*h,E.push(i.x,i.y,i.z),A.push(0,o,0),n.x=.5*h+.5,n.y=.5*u*o+.5,L.push(n.x,n.y),R++}for(c=0;c<b;c++){var p=s+c,d=t+c;!0===e?T.push(d,d+1,p):T.push(d+1,d,p),r+=3}S.addGroup(O,r,!0===e?1:2),O+=r}!function(){for(var n=new Dt,i=new Dt,r=0,a=(y-v)/x,t=0;t<=w;t++){for(var o=[],s=t/w,c=s*(y-v)+v,e=0;e<=b;e++){var l=e/b,h=l*M+_,u=Math.sin(h),p=Math.cos(h);i.x=c*u,i.y=-s*x+C,i.z=c*p,E.push(i.x,i.y,i.z),n.set(u,a,p).normalize(),A.push(n.x,n.y,n.z),L.push(l,1-s),o.push(R++)}P.push(o)}for(e=0;e<b;e++)for(t=0;t<w;t++){var d=P[t][e],f=P[t+1][e],m=P[t+1][e+1],g=P[t][e+1];T.push(d,f,g),T.push(f,m,g),r+=6}S.addGroup(O,r,0),O+=r}(),!1===e&&(0<v&&t(!0),0<y&&t(!1)),this.setIndex(T),this.setAttribute("position",new wi(E,3)),this.setAttribute("normal",new wi(A,3)),this.setAttribute("uv",new wi(L,2))}function Tc(e,t,n,i,r,a,o){Mc.call(this,0,e,t,n,i,r,a,o),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:i,openEnded:r,thetaStart:a,thetaLength:o}}function Ec(e,t,n,i,r,a,o){Sc.call(this,0,e,t,n,i,r,a,o),this.type="ConeBufferGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:i,openEnded:r,thetaStart:a,thetaLength:o}}function Ac(e,t,n,i){ir.call(this),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:i},this.fromBufferGeometry(new Lc(e,t,n,i)),this.mergeVertices()}function Lc(e,t,n,i){Oi.call(this),this.type="CircleBufferGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:i},e=e||1,t=void 0!==t?Math.max(3,t):8,n=void 0!==n?n:0,i=void 0!==i?i:2*Math.PI;var r,a,o=[],s=[],c=[],l=[],h=new Dt,u=new Rt;for(s.push(0,0,0),c.push(0,0,1),l.push(.5,.5),a=0,r=3;a<=t;a++,r+=3){var p=n+a/t*i;h.x=e*Math.cos(p),h.y=e*Math.sin(p),s.push(h.x,h.y,h.z),c.push(0,0,1),u.x=(s[r]/e+1)/2,u.y=(s[r+1]/e+1)/2,l.push(u.x,u.y)}for(r=1;r<=t;r++)o.push(r,r+1,0);this.setIndex(o),this.setAttribute("position",new wi(s,3)),this.setAttribute("normal",new wi(c,3)),this.setAttribute("uv",new wi(l,2))}(uc.prototype=Object.create(ir.prototype)).constructor=uc,(pc.prototype=Object.create(cc.prototype)).constructor=pc,(dc.prototype=Object.create(ir.prototype)).constructor=dc,(fc.prototype=Object.create(Oi.prototype)).constructor=fc,(mc.prototype=Object.create(ir.prototype)).constructor=mc,(gc.prototype=Object.create(Oi.prototype)).constructor=gc,(vc.prototype=Object.create(ir.prototype)).constructor=vc,(yc.prototype=Object.create(Oi.prototype)).constructor=yc,((xc.prototype=Object.create(ir.prototype)).constructor=xc).prototype.toJSON=function(){var e=ir.prototype.toJSON.call(this);return wc(this.parameters.shapes,e)},((bc.prototype=Object.create(Oi.prototype)).constructor=bc).prototype.toJSON=function(){var e=Oi.prototype.toJSON.call(this);return wc(this.parameters.shapes,e)},(_c.prototype=Object.create(Oi.prototype)).constructor=_c,(Mc.prototype=Object.create(ir.prototype)).constructor=Mc,(Sc.prototype=Object.create(Oi.prototype)).constructor=Sc,(Tc.prototype=Object.create(Mc.prototype)).constructor=Tc,(Ec.prototype=Object.create(Sc.prototype)).constructor=Ec,(Ac.prototype=Object.create(ir.prototype)).constructor=Ac,(Lc.prototype=Object.create(Oi.prototype)).constructor=Lc;var Rc=Object.freeze({__proto__:null,WireframeGeometry:Ss,ParametricGeometry:Ts,ParametricBufferGeometry:Es,TetrahedronGeometry:Rs,TetrahedronBufferGeometry:Ps,OctahedronGeometry:Cs,OctahedronBufferGeometry:Os,IcosahedronGeometry:Ds,IcosahedronBufferGeometry:Is,DodecahedronGeometry:Ns,DodecahedronBufferGeometry:zs,PolyhedronGeometry:As,PolyhedronBufferGeometry:Ls,TubeGeometry:Bs,TubeBufferGeometry:Us,TorusKnotGeometry:Fs,TorusKnotBufferGeometry:Gs,TorusGeometry:Hs,TorusBufferGeometry:Vs,TextGeometry:uc,TextBufferGeometry:pc,SphereGeometry:dc,SphereBufferGeometry:fc,RingGeometry:mc,RingBufferGeometry:gc,PlaneGeometry:Tr,PlaneBufferGeometry:Er,LatheGeometry:vc,LatheBufferGeometry:yc,ShapeGeometry:xc,ShapeBufferGeometry:bc,ExtrudeGeometry:sc,ExtrudeBufferGeometry:cc,EdgesGeometry:_c,ConeGeometry:Tc,ConeBufferGeometry:Ec,CylinderGeometry:Mc,CylinderBufferGeometry:Sc,CircleGeometry:Ac,CircleBufferGeometry:Lc,BoxGeometry:rr,BoxBufferGeometry:ar});function Pc(e){ui.call(this),this.type="ShadowMaterial",this.color=new ai(0),this.transparent=!0,this.setValues(e)}function Cc(e){ur.call(this,e),this.type="RawShaderMaterial"}function Oc(e){ui.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new ai(16777215),this.roughness=.5,this.metalness=.5,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ai(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=xt,this.normalScale=new Rt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function Dc(e){Oc.call(this),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.reflectivity=.5,this.clearcoat=0,this.clearcoatRoughness=0,this.sheen=null,this.clearcoatNormalScale=new Rt(1,1),this.clearcoatNormalMap=null,this.transparency=0,this.setValues(e)}function Ic(e){ui.call(this),this.type="MeshPhongMaterial",this.color=new ai(16777215),this.specular=new ai(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ai(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=xt,this.normalScale=new Rt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=q,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function Nc(e){Ic.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.gradientMap=null,this.setValues(e)}function zc(e){ui.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=xt,this.normalScale=new Rt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function Bc(e){ui.call(this),this.type="MeshLambertMaterial",this.color=new ai(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ai(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=q,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function Uc(e){ui.call(this),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new ai(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=xt,this.normalScale=new Rt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function Fc(e){ns.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}((Pc.prototype=Object.create(ui.prototype)).constructor=Pc).prototype.isShadowMaterial=!0,Pc.prototype.copy=function(e){return ui.prototype.copy.call(this,e),this.color.copy(e.color),this},((Cc.prototype=Object.create(ur.prototype)).constructor=Cc).prototype.isRawShaderMaterial=!0,((Oc.prototype=Object.create(ui.prototype)).constructor=Oc).prototype.isMeshStandardMaterial=!0,Oc.prototype.copy=function(e){return ui.prototype.copy.call(this,e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},((Dc.prototype=Object.create(Oc.prototype)).constructor=Dc).prototype.isMeshPhysicalMaterial=!0,Dc.prototype.copy=function(e){return Oc.prototype.copy.call(this,e),this.defines={STANDARD:"",PHYSICAL:""},this.reflectivity=e.reflectivity,this.clearcoat=e.clearcoat,this.clearcoatRoughness=e.clearcoatRoughness,e.sheen?this.sheen=(this.sheen||new ai).copy(e.sheen):this.sheen=null,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.transparency=e.transparency,this},((Ic.prototype=Object.create(ui.prototype)).constructor=Ic).prototype.isMeshPhongMaterial=!0,Ic.prototype.copy=function(e){return ui.prototype.copy.call(this,e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},((Nc.prototype=Object.create(Ic.prototype)).constructor=Nc).prototype.isMeshToonMaterial=!0,Nc.prototype.copy=function(e){return Ic.prototype.copy.call(this,e),this.gradientMap=e.gradientMap,this},((zc.prototype=Object.create(ui.prototype)).constructor=zc).prototype.isMeshNormalMaterial=!0,zc.prototype.copy=function(e){return ui.prototype.copy.call(this,e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},((Bc.prototype=Object.create(ui.prototype)).constructor=Bc).prototype.isMeshLambertMaterial=!0,Bc.prototype.copy=function(e){return ui.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},((Uc.prototype=Object.create(ui.prototype)).constructor=Uc).prototype.isMeshMatcapMaterial=!0,Uc.prototype.copy=function(e){return ui.prototype.copy.call(this,e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},((Fc.prototype=Object.create(ns.prototype)).constructor=Fc).prototype.isLineDashedMaterial=!0,Fc.prototype.copy=function(e){return ns.prototype.copy.call(this,e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this};var Gc=Object.freeze({__proto__:null,ShadowMaterial:Pc,SpriteMaterial:Oo,RawShaderMaterial:Cc,ShaderMaterial:ur,PointsMaterial:ds,MeshPhysicalMaterial:Dc,MeshStandardMaterial:Oc,MeshPhongMaterial:Ic,MeshToonMaterial:Nc,MeshNormalMaterial:zc,MeshLambertMaterial:Bc,MeshDepthMaterial:co,MeshDistanceMaterial:lo,MeshBasicMaterial:pi,MeshMatcapMaterial:Uc,LineDashedMaterial:Fc,LineBasicMaterial:ns,Material:ui}),Hc={arraySlice:function(e,t,n){return Hc.isTypedArray(e)?new e.constructor(e.subarray(t,void 0!==n?n:e.length)):e.slice(t,n)},convertArray:function(e,t,n){return!e||!n&&e.constructor===t?e:"number"==typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)},isTypedArray:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},getKeyframeOrder:function(n){for(var e=n.length,t=new Array(e),i=0;i!==e;++i)t[i]=i;return t.sort(function(e,t){return n[e]-n[t]}),t},sortedArray:function(e,t,n){for(var i=e.length,r=new e.constructor(i),a=0,o=0;o!==i;++a)for(var s=n[a]*t,c=0;c!==t;++c)r[o++]=e[s+c];return r},flattenJSON:function(e,t,n,i){for(var r=1,a=e[0];void 0!==a&&void 0===a[i];)a=e[r++];if(void 0!==a){var o=a[i];if(void 0!==o)if(Array.isArray(o))for(;void 0!==(o=a[i])&&(t.push(a.time),n.push.apply(n,o)),void 0!==(a=e[r++]););else if(void 0!==o.toArray)for(;void 0!==(o=a[i])&&(t.push(a.time),o.toArray(n,n.length)),void 0!==(a=e[r++]););else for(;void 0!==(o=a[i])&&(t.push(a.time),n.push(o)),void 0!==(a=e[r++]););}},subclip:function(e,t,n,i,r){r=r||30;var a=e.clone();a.name=t;for(var o=[],s=0;s<a.tracks.length;++s){for(var c=a.tracks[s],l=c.getValueSize(),h=[],u=[],p=0;p<c.times.length;++p){var d=c.times[p]*r;if(!(d<n||i<=d)){h.push(c.times[p]);for(var f=0;f<l;++f)u.push(c.values[p*l+f])}}0!==h.length&&(c.times=Hc.convertArray(h,c.times.constructor),c.values=Hc.convertArray(u,c.values.constructor),o.push(c))}a.tracks=o;for(var m=1/0,s=0;s<a.tracks.length;++s)m>a.tracks[s].times[0]&&(m=a.tracks[s].times[0]);for(s=0;s<a.tracks.length;++s)a.tracks[s].shift(-1*m);return a.resetDuration(),a}};function Vc(e,t,n,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==i?i:new t.constructor(n),this.sampleValues=t,this.valueSize=n}function jc(e,t,n,i){Vc.call(this,e,t,n,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function kc(e,t,n,i){Vc.call(this,e,t,n,i)}function Wc(e,t,n,i){Vc.call(this,e,t,n,i)}function qc(e,t,n,i){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Hc.convertArray(t,this.TimeBufferType),this.values=Hc.convertArray(n,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}function Xc(e,t,n){qc.call(this,e,t,n)}function Yc(e,t,n,i){qc.call(this,e,t,n,i)}function Zc(e,t,n,i){qc.call(this,e,t,n,i)}function Jc(e,t,n,i){Vc.call(this,e,t,n,i)}function Qc(e,t,n,i){qc.call(this,e,t,n,i)}function Kc(e,t,n,i){qc.call(this,e,t,n,i)}function $c(e,t,n,i){qc.call(this,e,t,n,i)}function el(e,t,n){this.name=e,this.tracks=n,this.duration=void 0!==t?t:-1,this.uuid=Lt.generateUUID(),this.duration<0&&this.resetDuration()}Object.assign(Vc.prototype,{evaluate:function(e){var t,n=this.parameterPositions,i=this._cachedIndex,r=n[i],a=n[i-1];e:{t:{n:{i:if(!(e<r)){for(var o=i+2;;){if(void 0===r){if(e<a)break i;return i=n.length,this._cachedIndex=i,this.afterEnd_(i-1,e,a)}if(i===o)break;if(a=r,e<(r=n[++i]))break t}t=n.length;break n}if(a<=e)break e;var s=n[1];for(e<s&&(i=2,a=s),o=i-2;;){if(void 0===a)return this._cachedIndex=0,this.beforeStart_(0,e,r);if(i===o)break;if(r=a,(a=n[--i-1])<=e)break t}t=i,i=0}for(;i<t;){var c=i+t>>>1;e<n[c]?t=c:i=1+c}if(r=n[i],void 0===(a=n[i-1]))return this._cachedIndex=0,this.beforeStart_(0,e,r);if(void 0===r)return i=n.length,this._cachedIndex=i,this.afterEnd_(i-1,a,e)}this._cachedIndex=i,this.intervalChanged_(i,a,r)}return this.interpolate_(i,a,e,r)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(e){for(var t=this.resultBuffer,n=this.sampleValues,i=this.valueSize,r=e*i,a=0;a!==i;++a)t[a]=n[r+a];return t},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}}),Object.assign(Vc.prototype,{beforeStart_:Vc.prototype.copySampleValue_,afterEnd_:Vc.prototype.copySampleValue_}),jc.prototype=Object.assign(Object.create(Vc.prototype),{constructor:jc,DefaultSettings_:{endingStart:ot,endingEnd:ot},intervalChanged_:function(e,t,n){var i=this.parameterPositions,r=e-2,a=e+1,o=i[r],s=i[a];if(void 0===o)switch(this.getSettings_().endingStart){case st:r=e,o=2*t-n;break;case ct:o=t+i[r=i.length-2]-i[r+1];break;default:r=e,o=n}if(void 0===s)switch(this.getSettings_().endingEnd){case st:a=e,s=2*n-t;break;case ct:s=n+i[a=1]-i[0];break;default:a=e-1,s=t}var c=.5*(n-t),l=this.valueSize;this._weightPrev=c/(t-o),this._weightNext=c/(s-n),this._offsetPrev=r*l,this._offsetNext=a*l},interpolate_:function(e,t,n,i){for(var r=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=e*o,c=s-o,l=this._offsetPrev,h=this._offsetNext,u=this._weightPrev,p=this._weightNext,d=(n-t)/(i-t),f=d*d,m=f*d,g=-u*m+2*u*f-u*d,v=(1+u)*m+(-1.5-2*u)*f+(-.5+u)*d+1,y=(-1-p)*m+(1.5+p)*f+.5*d,x=p*m-p*f,b=0;b!==o;++b)r[b]=g*a[l+b]+v*a[c+b]+y*a[s+b]+x*a[h+b];return r}}),kc.prototype=Object.assign(Object.create(Vc.prototype),{constructor:kc,interpolate_:function(e,t,n,i){for(var r=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=e*o,c=s-o,l=(n-t)/(i-t),h=1-l,u=0;u!==o;++u)r[u]=a[c+u]*h+a[s+u]*l;return r}}),Wc.prototype=Object.assign(Object.create(Vc.prototype),{constructor:Wc,interpolate_:function(e){return this.copySampleValue_(e-1)}}),Object.assign(qc,{toJSON:function(e){var t,n,i=e.constructor;return void 0!==i.toJSON?t=i.toJSON(e):(t={name:e.name,times:Hc.convertArray(e.times,Array),values:Hc.convertArray(e.values,Array)},(n=e.getInterpolation())!==e.DefaultInterpolation&&(t.interpolation=n)),t.type=e.ValueTypeName,t}}),Object.assign(qc.prototype,{constructor:qc,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:at,InterpolantFactoryMethodDiscrete:function(e){return new Wc(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodLinear:function(e){return new kc(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:function(e){return new jc(this.times,this.values,this.getValueSize(),e)},setInterpolation:function(e){var t;switch(e){case i:t=this.InterpolantFactoryMethodDiscrete;break;case at:t=this.InterpolantFactoryMethodLinear;break;case 2302:t=this.InterpolantFactoryMethodSmooth}if(void 0!==t)return this.createInterpolant=t,this;var n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(n);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",n),this},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return i;case this.InterpolantFactoryMethodLinear:return at;case this.InterpolantFactoryMethodSmooth:return 2302}},getValueSize:function(){return this.values.length/this.times.length},shift:function(e){if(0!==e)for(var t=this.times,n=0,i=t.length;n!==i;++n)t[n]+=e;return this},scale:function(e){if(1!==e)for(var t=this.times,n=0,i=t.length;n!==i;++n)t[n]*=e;return this},trim:function(e,t){for(var n,i=this.times,r=i.length,a=0,o=r-1;a!==r&&i[a]<e;)++a;for(;-1!==o&&i[o]>t;)--o;return++o,0===a&&o===r||(o<=a&&(a=(o=Math.max(o,1))-1),n=this.getValueSize(),this.times=Hc.arraySlice(i,a,o),this.values=Hc.arraySlice(this.values,a*n,o*n)),this},validate:function(){var e=!0,t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);var n=this.times,i=this.values,r=n.length;0===r&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);for(var a=null,o=0;o!==r;o++){var s=n[o];if("number"==typeof s&&isNaN(s)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,o,s),e=!1;break}if(null!==a&&s<a){console.error("THREE.KeyframeTrack: Out of order keys.",this,o,s,a),e=!1;break}a=s}if(void 0!==i&&Hc.isTypedArray(i))for(var o=0,c=i.length;o!==c;++o){var l=i[o];if(isNaN(l)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,o,l),e=!1;break}}return e},optimize:function(){for(var e=this.times,t=this.values,n=this.getValueSize(),i=2302===this.getInterpolation(),r=1,a=e.length-1,o=1;o<a;++o){var s=!1,c=e[o];if(c!==e[o+1]&&(1!==o||c!==c[0]))if(i)s=!0;else for(var l=o*n,h=l-n,u=l+n,p=0;p!==n;++p){var d=t[l+p];if(d!==t[h+p]||d!==t[u+p]){s=!0;break}}if(s){if(o!==r){e[r]=e[o];for(var f=o*n,m=r*n,p=0;p!==n;++p)t[m+p]=t[f+p]}++r}}if(0<a){for(e[r]=e[a],f=a*n,m=r*n,p=0;p!==n;++p)t[m+p]=t[f+p];++r}return r!==e.length&&(this.times=Hc.arraySlice(e,0,r),this.values=Hc.arraySlice(t,0,r*n)),this},clone:function(){var e=Hc.arraySlice(this.times,0),t=Hc.arraySlice(this.values,0),n=new this.constructor(this.name,e,t);return n.createInterpolant=this.createInterpolant,n}}),Xc.prototype=Object.assign(Object.create(qc.prototype),{constructor:Xc,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:i,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Yc.prototype=Object.assign(Object.create(qc.prototype),{constructor:Yc,ValueTypeName:"color"}),Zc.prototype=Object.assign(Object.create(qc.prototype),{constructor:Zc,ValueTypeName:"number"}),Jc.prototype=Object.assign(Object.create(Vc.prototype),{constructor:Jc,interpolate_:function(e,t,n,i){for(var r=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=e*o,c=(n-t)/(i-t),l=s+o;s!==l;s+=4)Pt.slerpFlat(r,0,a,s-o,a,s,c);return r}}),Qc.prototype=Object.assign(Object.create(qc.prototype),{constructor:Qc,ValueTypeName:"quaternion",DefaultInterpolation:at,InterpolantFactoryMethodLinear:function(e){return new Jc(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:void 0}),Kc.prototype=Object.assign(Object.create(qc.prototype),{constructor:Kc,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:i,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),$c.prototype=Object.assign(Object.create(qc.prototype),{constructor:$c,ValueTypeName:"vector"}),Object.assign(el,{parse:function(e){for(var t=[],n=e.tracks,i=1/(e.fps||1),r=0,a=n.length;r!==a;++r)t.push(function(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var t,n,i=function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Zc;case"vector":case"vector2":case"vector3":case"vector4":return $c;case"color":return Yc;case"quaternion":return Qc;case"bool":case"boolean":return Xc;case"string":return Kc}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}(e.type);return void 0===e.times&&(t=[],n=[],Hc.flattenJSON(e.keys,t,n,"value"),e.times=t,e.values=n),void 0!==i.parse?i.parse(e):new i(e.name,e.times,e.values,e.interpolation)}(n[r]).scale(i));return new el(e.name,e.duration,t)},toJSON:function(e){for(var t=[],n=e.tracks,i={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid},r=0,a=n.length;r!==a;++r)t.push(qc.toJSON(n[r]));return i},CreateFromMorphTargetSequence:function(e,t,n,i){for(var r=t.length,a=[],o=0;o<r;o++){var s=[];(l=[]).push((o+r-1)%r,o,(o+1)%r),s.push(0,1,0);var c=Hc.getKeyframeOrder(l),l=Hc.sortedArray(l,1,c),s=Hc.sortedArray(s,1,c);i||0!==l[0]||(l.push(r),s.push(s[0])),a.push(new Zc(".morphTargetInfluences["+t[o].name+"]",l,s).scale(1/n))}return new el(e,-1,a)},findByName:function(e,t){var n=e;Array.isArray(e)||(n=e.geometry&&e.geometry.animations||e.animations);for(var i=0;i<n.length;i++)if(n[i].name===t)return n[i];return null},CreateClipsFromMorphTargetSequences:function(e,t,n){for(var i={},r=/^([\w-]*?)([\d]+)$/,a=0,o=e.length;a<o;a++){var s,c=e[a],l=c.name.match(r);l&&1<l.length&&((s=i[h=l[1]])||(i[h]=s=[]),s.push(c))}var h,u=[];for(h in i)u.push(el.CreateFromMorphTargetSequence(h,i[h],t,n));return u},parseAnimation:function(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var n=function(e,t,n,i,r){var a,o;0!==n.length&&(a=[],o=[],Hc.flattenJSON(n,a,o,i),0!==a.length&&r.push(new e(t,a,o)))},i=[],r=e.name||"default",a=e.length||-1,o=e.fps||30,s=e.hierarchy||[],c=0;c<s.length;c++){var l=s[c].keys;if(l&&0!==l.length)if(l[0].morphTargets){for(var h,u={},p=0;p<l.length;p++)if(l[p].morphTargets)for(var d=0;d<l[p].morphTargets.length;d++)u[l[p].morphTargets[d]]=-1;for(h in u){for(var f=[],m=[],d=0;d!==l[p].morphTargets.length;++d){var g=l[p];f.push(g.time),m.push(g.morphTarget===h?1:0)}i.push(new Zc(".morphTargetInfluence["+h+"]",f,m))}a=u.length*(o||1)}else{var v=".bones["+t[c].name+"]";n($c,v+".position",l,"pos",i),n(Qc,v+".quaternion",l,"rot",i),n($c,v+".scale",l,"scl",i)}}return 0===i.length?null:new el(r,a,i)}}),Object.assign(el.prototype,{resetDuration:function(){for(var e=0,t=0,n=this.tracks.length;t!==n;++t)var i=this.tracks[t],e=Math.max(e,i.times[i.times.length-1]);return this.duration=e,this},trim:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this},validate:function(){for(var e=!0,t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e},optimize:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this},clone:function(){for(var e=[],t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new el(this.name,this.duration,e)}});var nl={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};function il(e,t,n){var i=this,r=!1,a=0,o=0,s=void 0,c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(e){o++,!1===r&&void 0!==i.onStart&&i.onStart(e,a,o),r=!0},this.itemEnd=function(e){a++,void 0!==i.onProgress&&i.onProgress(e,a,o),a===o&&(r=!1,void 0!==i.onLoad&&i.onLoad())},this.itemError=function(e){void 0!==i.onError&&i.onError(e)},this.resolveURL=function(e){return s?s(e):e},this.setURLModifier=function(e){return s=e,this},this.addHandler=function(e,t){return c.push(e,t),this},this.removeHandler=function(e){var t=c.indexOf(e);return-1!==t&&c.splice(t,2),this},this.getHandler=function(e){for(var t=0,n=c.length;t<n;t+=2){var i=c[t],r=c[t+1];if(i.test(e))return r}return null}}var rl=new il;function al(e){this.manager=void 0!==e?e:rl,this.crossOrigin="anonymous",this.path="",this.resourcePath=""}Object.assign(al.prototype,{load:function(){},parse:function(){},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this},setResourcePath:function(e){return this.resourcePath=e,this}});var ol={};function sl(e){al.call(this,e)}function cl(e){al.call(this,e)}function ll(e){al.call(this,e)}function hl(e){al.call(this,e)}function ul(e){al.call(this,e)}function pl(e){al.call(this,e)}function dl(e){al.call(this,e)}function fl(){this.type="Curve",this.arcLengthDivisions=200}function ml(e,t,n,i,r,a,o,s){fl.call(this),this.type="EllipseCurve",this.aX=e||0,this.aY=t||0,this.xRadius=n||1,this.yRadius=i||1,this.aStartAngle=r||0,this.aEndAngle=a||2*Math.PI,this.aClockwise=o||!1,this.aRotation=s||0}function gl(e,t,n,i,r,a){ml.call(this,e,t,n,n,i,r,a),this.type="ArcCurve"}function vl(){var r=0,a=0,o=0,s=0;function l(e,t,n,i){o=-3*(r=e)+3*t-2*(a=n)-i,s=2*e-2*t+n+i}return{initCatmullRom:function(e,t,n,i,r){l(t,n,r*(n-e),r*(i-t))},initNonuniformCatmullRom:function(e,t,n,i,r,a,o){var s=(t-e)/r-(n-e)/(r+a)+(n-t)/a,c=(n-t)/a-(i-t)/(a+o)+(i-n)/o;l(t,n,s*=a,c*=a)},calc:function(e){var t=e*e;return r+a*e+o*t+s*(t*e)}}}sl.prototype=Object.assign(Object.create(al.prototype),{constructor:sl,load:function(o,e,t,n){void 0===o&&(o=""),void 0!==this.path&&(o=this.path+o),o=this.manager.resolveURL(o);var s=this,i=nl.get(o);if(void 0!==i)return s.manager.itemStart(o),setTimeout(function(){e&&e(i),s.manager.itemEnd(o)},0),i;if(void 0===ol[o]){var r=o.match(/^data:(.*?)(;base64)?,(.*)$/);if(r){var a=r[1],c=!!r[2],l=r[3],l=decodeURIComponent(l);c&&(l=atob(l));try{var h=(this.responseType||"").toLowerCase();switch(h){case"arraybuffer":case"blob":for(var u=new Uint8Array(l.length),p=0;p<l.length;p++)u[p]=l.charCodeAt(p);d="blob"===h?new Blob([u.buffer],{type:a}):u.buffer;break;case"document":var d=(new DOMParser).parseFromString(l,a);break;case"json":d=JSON.parse(l);break;default:d=l}setTimeout(function(){e&&e(d),s.manager.itemEnd(o)},0)}catch(e){setTimeout(function(){n&&n(e),s.manager.itemError(o),s.manager.itemEnd(o)},0)}}else{ol[o]=[],ol[o].push({onLoad:e,onProgress:t,onError:n});var f,m=new XMLHttpRequest;for(f in m.open("GET",o,!0),m.addEventListener("load",function(e){var t=this.response,n=ol[o];if(delete ol[o],200===this.status||0===this.status){0===this.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),nl.add(o,t);for(var i=0,r=n.length;i<r;i++)(a=n[i]).onLoad&&a.onLoad(t);s.manager.itemEnd(o)}else{for(var a,i=0,r=n.length;i<r;i++)(a=n[i]).onError&&a.onError(e);s.manager.itemError(o),s.manager.itemEnd(o)}},!1),m.addEventListener("progress",function(e){for(var t=ol[o],n=0,i=t.length;n<i;n++){var r=t[n];r.onProgress&&r.onProgress(e)}},!1),m.addEventListener("error",function(e){var t=ol[o];delete ol[o];for(var n=0,i=t.length;n<i;n++){var r=t[n];r.onError&&r.onError(e)}s.manager.itemError(o),s.manager.itemEnd(o)},!1),m.addEventListener("abort",function(e){var t=ol[o];delete ol[o];for(var n=0,i=t.length;n<i;n++){var r=t[n];r.onError&&r.onError(e)}s.manager.itemError(o),s.manager.itemEnd(o)},!1),void 0!==this.responseType&&(m.responseType=this.responseType),void 0!==this.withCredentials&&(m.withCredentials=this.withCredentials),m.overrideMimeType&&m.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain"),this.requestHeader)m.setRequestHeader(f,this.requestHeader[f]);m.send(null)}return s.manager.itemStart(o),m}ol[o].push({onLoad:e,onProgress:t,onError:n})},setResponseType:function(e){return this.responseType=e,this},setWithCredentials:function(e){return this.withCredentials=e,this},setMimeType:function(e){return this.mimeType=e,this},setRequestHeader:function(e){return this.requestHeader=e,this}}),cl.prototype=Object.assign(Object.create(al.prototype),{constructor:cl,load:function(e,t,n,i){var r=this,a=new sl(r.manager);a.setPath(r.path),a.load(e,function(e){t(r.parse(JSON.parse(e)))},n,i)},parse:function(e){for(var t=[],n=0;n<e.length;n++){var i=el.parse(e[n]);t.push(i)}return t}}),ll.prototype=Object.assign(Object.create(al.prototype),{constructor:ll,load:function(e,a,t,i){var o=this,s=[],c=new ws;c.image=s;var r=new sl(this.manager);if(r.setPath(this.path),r.setResponseType("arraybuffer"),Array.isArray(e))for(var l=0,n=0,h=e.length;n<h;++n)!function(n){r.load(e[n],function(e){var t=o.parse(e,!0);s[n]={width:t.width,height:t.height,format:t.format,mipmaps:t.mipmaps},6===(l+=1)&&(1===t.mipmapCount&&(c.minFilter=qe),c.format=t.format,c.needsUpdate=!0,a&&a(c))},t,i)}(n);else r.load(e,function(e){var t=o.parse(e,!0);if(t.isCubemap)for(var n=t.mipmaps.length/t.mipmapCount,i=0;i<n;i++){s[i]={mipmaps:[]};for(var r=0;r<t.mipmapCount;r++)s[i].mipmaps.push(t.mipmaps[i*t.mipmapCount+r]),s[i].format=t.format,s[i].width=t.width,s[i].height=t.height}else c.image.width=t.width,c.image.height=t.height,c.mipmaps=t.mipmaps;1===t.mipmapCount&&(c.minFilter=qe),c.format=t.format,c.needsUpdate=!0,a&&a(c)},t,i);return c}}),hl.prototype=Object.assign(Object.create(al.prototype),{constructor:hl,load:function(e,n,t,i){var r=this,a=new gr,o=new sl(this.manager);return o.setResponseType("arraybuffer"),o.setPath(this.path),o.load(e,function(e){var t=r.parse(e);t&&(void 0!==t.image?a.image=t.image:void 0!==t.data&&(a.image.width=t.width,a.image.height=t.height,a.image.data=t.data),a.wrapS=void 0!==t.wrapS?t.wrapS:H,a.wrapT=void 0!==t.wrapT?t.wrapT:H,a.magFilter=void 0!==t.magFilter?t.magFilter:qe,a.minFilter=void 0!==t.minFilter?t.minFilter:qe,a.anisotropy=void 0!==t.anisotropy?t.anisotropy:1,void 0!==t.format&&(a.format=t.format),void 0!==t.type&&(a.type=t.type),void 0!==t.mipmaps&&(a.mipmaps=t.mipmaps,a.minFilter=Ye),1===t.mipmapCount&&(a.minFilter=qe),a.needsUpdate=!0,n&&n(a,t))},t,i),a}}),ul.prototype=Object.assign(Object.create(al.prototype),{constructor:ul,load:function(t,e,n,i){void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var r=this,a=nl.get(t);if(void 0!==a)return r.manager.itemStart(t),setTimeout(function(){e&&e(a),r.manager.itemEnd(t)},0),a;var o=document.createElementNS("http://www.w3.org/1999/xhtml","img");function s(){o.removeEventListener("load",s,!1),o.removeEventListener("error",c,!1),nl.add(t,this),e&&e(this),r.manager.itemEnd(t)}function c(e){o.removeEventListener("load",s,!1),o.removeEventListener("error",c,!1),i&&i(e),r.manager.itemError(t),r.manager.itemEnd(t)}return o.addEventListener("load",s,!1),o.addEventListener("error",c,!1),"data:"!==t.substr(0,5)&&void 0!==this.crossOrigin&&(o.crossOrigin=this.crossOrigin),r.manager.itemStart(t),o.src=t,o}}),pl.prototype=Object.assign(Object.create(al.prototype),{constructor:pl,load:function(e,n,t,i){var r=new Ur,a=new ul(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);for(var o=0,s=0;s<e.length;++s)!function(t){a.load(e[t],function(e){r.images[t]=e,6==++o&&(r.needsUpdate=!0,n&&n(r))},void 0,i)}(s);return r}}),dl.prototype=Object.assign(Object.create(al.prototype),{constructor:dl,load:function(n,i,e,t){var r=new Ft,a=new ul(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(n,function(e){r.image=e;var t=0<n.search(/\.jpe?g($|\?)/i)||0===n.search(/^data\:image\/jpeg/);r.format=t?tt:nt,r.needsUpdate=!0,void 0!==i&&i(r)},e,t),r}}),Object.assign(fl.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(e,t){var n=this.getUtoTmapping(e);return this.getPoint(n,t)},getPoints:function(e){void 0===e&&(e=5);for(var t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return t},getSpacedPoints:function(e){void 0===e&&(e=5);for(var t=[],n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t},getLength:function(){var e=this.getLengths();return e[e.length-1]},getLengths:function(e){if(void 0===e&&(e=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var t,n,i=[],r=this.getPoint(0),a=0;for(i.push(0),n=1;n<=e;n++)a+=(t=this.getPoint(n/e)).distanceTo(r),i.push(a),r=t;return this.cacheArcLengths=i},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(e,t){for(var n,i=this.getLengths(),r=0,a=i.length,o=t||e*i[a-1],s=0,c=a-1;s<=c;)if((n=i[r=Math.floor(s+(c-s)/2)]-o)<0)s=r+1;else{if(!(0<n)){c=r;break}c=r-1}if(i[r=c]===o)return r/(a-1);var l=i[r];return(r+(o-l)/(i[r+1]-l))/(a-1)},getTangent:function(e){var t=e-1e-4,n=e+1e-4;t<0&&(t=0),1<n&&(n=1);var i=this.getPoint(t);return this.getPoint(n).clone().sub(i).normalize()},getTangentAt:function(e){var t=this.getUtoTmapping(e);return this.getTangent(t)},computeFrenetFrames:function(e,t){for(var n,i,r=new Dt,a=[],o=[],s=[],c=new Dt,l=new Jt,h=0;h<=e;h++)n=h/e,a[h]=this.getTangentAt(n),a[h].normalize();o[0]=new Dt,s[0]=new Dt;var u=Number.MAX_VALUE,p=Math.abs(a[0].x),d=Math.abs(a[0].y),f=Math.abs(a[0].z);for(p<=u&&(u=p,r.set(1,0,0)),d<=u&&(u=d,r.set(0,1,0)),f<=u&&r.set(0,0,1),c.crossVectors(a[0],r).normalize(),o[0].crossVectors(a[0],c),s[0].crossVectors(a[0],o[0]),h=1;h<=e;h++)o[h]=o[h-1].clone(),s[h]=s[h-1].clone(),c.crossVectors(a[h-1],a[h]),c.length()>Number.EPSILON&&(c.normalize(),i=Math.acos(Lt.clamp(a[h-1].dot(a[h]),-1,1)),o[h].applyMatrix4(l.makeRotationAxis(c,i))),s[h].crossVectors(a[h],o[h]);if(!0===t)for(i=Math.acos(Lt.clamp(o[0].dot(o[e]),-1,1)),i/=e,0<a[0].dot(c.crossVectors(o[0],o[e]))&&(i=-i),h=1;h<=e;h++)o[h].applyMatrix4(l.makeRotationAxis(a[h],i*h)),s[h].crossVectors(a[h],o[h]);return{tangents:a,normals:o,binormals:s}},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this},toJSON:function(){var e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e},fromJSON:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}),((ml.prototype=Object.create(fl.prototype)).constructor=ml).prototype.isEllipseCurve=!0,ml.prototype.getPoint=function(e,t){for(var n=t||new Rt,i=2*Math.PI,r=this.aEndAngle-this.aStartAngle,a=Math.abs(r)<Number.EPSILON;r<0;)r+=i;for(;i<r;)r-=i;r<Number.EPSILON&&(r=a?0:i),!0!==this.aClockwise||a||(r===i?r=-i:r-=i);var o,s,c,l,h=this.aStartAngle+e*r,u=this.aX+this.xRadius*Math.cos(h),p=this.aY+this.yRadius*Math.sin(h);return 0!==this.aRotation&&(o=Math.cos(this.aRotation),s=Math.sin(this.aRotation),u=(c=u-this.aX)*o-(l=p-this.aY)*s+this.aX,p=c*s+l*o+this.aY),n.set(u,p)},ml.prototype.copy=function(e){return fl.prototype.copy.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this},ml.prototype.toJSON=function(){var e=fl.prototype.toJSON.call(this);return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e},ml.prototype.fromJSON=function(e){return fl.prototype.fromJSON.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this},((gl.prototype=Object.create(ml.prototype)).constructor=gl).prototype.isArcCurve=!0;var yl=new Dt,xl=new vl,bl=new vl,wl=new vl;function _l(e,t,n,i){fl.call(this),this.type="CatmullRomCurve3",this.points=e||[],this.closed=t||!1,this.curveType=n||"centripetal",this.tension=i||.5}function Ml(e,t,n,i,r){var a=.5*(i-t),o=.5*(r-n),s=e*e;return e*s*(2*n-2*i+a+o)+(-3*n+3*i-2*a-o)*s+a*e+n}function Sl(e,t,n,i){return(o=1-e)*o*t+2*(1-e)*e*n+e*e*i;var o}function Tl(e,t,n,i,r){return(l=1-e)*l*l*t+3*(c=1-e)*c*e*n+3*(1-e)*e*e*i+e*e*e*r;var c,l}function El(e,t,n,i){fl.call(this),this.type="CubicBezierCurve",this.v0=e||new Rt,this.v1=t||new Rt,this.v2=n||new Rt,this.v3=i||new Rt}function Al(e,t,n,i){fl.call(this),this.type="CubicBezierCurve3",this.v0=e||new Dt,this.v1=t||new Dt,this.v2=n||new Dt,this.v3=i||new Dt}function Ll(e,t){fl.call(this),this.type="LineCurve",this.v1=e||new Rt,this.v2=t||new Rt}function Rl(e,t){fl.call(this),this.type="LineCurve3",this.v1=e||new Dt,this.v2=t||new Dt}function Pl(e,t,n){fl.call(this),this.type="QuadraticBezierCurve",this.v0=e||new Rt,this.v1=t||new Rt,this.v2=n||new Rt}function Cl(e,t,n){fl.call(this),this.type="QuadraticBezierCurve3",this.v0=e||new Dt,this.v1=t||new Dt,this.v2=n||new Dt}function Ol(e){fl.call(this),this.type="SplineCurve",this.points=e||[]}((_l.prototype=Object.create(fl.prototype)).constructor=_l).prototype.isCatmullRomCurve3=!0,_l.prototype.getPoint=function(e,t){var n,i,r,a,o,s,c,l,h=t||new Dt,u=this.points,p=u.length,d=(p-(this.closed?0:1))*e,f=Math.floor(d),m=d-f;return this.closed?f+=0<f?0:(Math.floor(Math.abs(f)/p)+1)*p:0===m&&f===p-1&&(f=p-2,m=1),n=this.closed||0<f?u[(f-1)%p]:(yl.subVectors(u[0],u[1]).add(u[0]),yl),i=u[f%p],r=u[(f+1)%p],a=this.closed||f+2<p?u[(f+2)%p]:(yl.subVectors(u[p-1],u[p-2]).add(u[p-1]),yl),"centripetal"===this.curveType||"chordal"===this.curveType?(o="chordal"===this.curveType?.5:.25,s=Math.pow(n.distanceToSquared(i),o),(c=Math.pow(i.distanceToSquared(r),o))<1e-4&&(c=1),s<1e-4&&(s=c),(l=Math.pow(r.distanceToSquared(a),o))<1e-4&&(l=c),xl.initNonuniformCatmullRom(n.x,i.x,r.x,a.x,s,c,l),bl.initNonuniformCatmullRom(n.y,i.y,r.y,a.y,s,c,l),wl.initNonuniformCatmullRom(n.z,i.z,r.z,a.z,s,c,l)):"catmullrom"===this.curveType&&(xl.initCatmullRom(n.x,i.x,r.x,a.x,this.tension),bl.initCatmullRom(n.y,i.y,r.y,a.y,this.tension),wl.initCatmullRom(n.z,i.z,r.z,a.z,this.tension)),h.set(xl.calc(m),bl.calc(m),wl.calc(m)),h},_l.prototype.copy=function(e){fl.prototype.copy.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var i=e.points[t];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this},_l.prototype.toJSON=function(){var e=fl.prototype.toJSON.call(this);e.points=[];for(var t=0,n=this.points.length;t<n;t++){var i=this.points[t];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e},_l.prototype.fromJSON=function(e){fl.prototype.fromJSON.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var i=e.points[t];this.points.push((new Dt).fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this},((El.prototype=Object.create(fl.prototype)).constructor=El).prototype.isCubicBezierCurve=!0,El.prototype.getPoint=function(e,t){var n=t||new Rt,i=this.v0,r=this.v1,a=this.v2,o=this.v3;return n.set(Tl(e,i.x,r.x,a.x,o.x),Tl(e,i.y,r.y,a.y,o.y)),n},El.prototype.copy=function(e){return fl.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this},El.prototype.toJSON=function(){var e=fl.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e},El.prototype.fromJSON=function(e){return fl.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this},((Al.prototype=Object.create(fl.prototype)).constructor=Al).prototype.isCubicBezierCurve3=!0,Al.prototype.getPoint=function(e,t){var n=t||new Dt,i=this.v0,r=this.v1,a=this.v2,o=this.v3;return n.set(Tl(e,i.x,r.x,a.x,o.x),Tl(e,i.y,r.y,a.y,o.y),Tl(e,i.z,r.z,a.z,o.z)),n},Al.prototype.copy=function(e){return fl.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this},Al.prototype.toJSON=function(){var e=fl.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e},Al.prototype.fromJSON=function(e){return fl.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this},((Ll.prototype=Object.create(fl.prototype)).constructor=Ll).prototype.isLineCurve=!0,Ll.prototype.getPoint=function(e,t){var n=t||new Rt;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n},Ll.prototype.getPointAt=function(e,t){return this.getPoint(e,t)},Ll.prototype.getTangent=function(){return this.v2.clone().sub(this.v1).normalize()},Ll.prototype.copy=function(e){return fl.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this},Ll.prototype.toJSON=function(){var e=fl.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},Ll.prototype.fromJSON=function(e){return fl.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},((Rl.prototype=Object.create(fl.prototype)).constructor=Rl).prototype.isLineCurve3=!0,Rl.prototype.getPoint=function(e,t){var n=t||new Dt;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n},Rl.prototype.getPointAt=function(e,t){return this.getPoint(e,t)},Rl.prototype.copy=function(e){return fl.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this},Rl.prototype.toJSON=function(){var e=fl.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},Rl.prototype.fromJSON=function(e){return fl.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},((Pl.prototype=Object.create(fl.prototype)).constructor=Pl).prototype.isQuadraticBezierCurve=!0,Pl.prototype.getPoint=function(e,t){var n=t||new Rt,i=this.v0,r=this.v1,a=this.v2;return n.set(Sl(e,i.x,r.x,a.x),Sl(e,i.y,r.y,a.y)),n},Pl.prototype.copy=function(e){return fl.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this},Pl.prototype.toJSON=function(){var e=fl.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},Pl.prototype.fromJSON=function(e){return fl.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},((Cl.prototype=Object.create(fl.prototype)).constructor=Cl).prototype.isQuadraticBezierCurve3=!0,Cl.prototype.getPoint=function(e,t){var n=t||new Dt,i=this.v0,r=this.v1,a=this.v2;return n.set(Sl(e,i.x,r.x,a.x),Sl(e,i.y,r.y,a.y),Sl(e,i.z,r.z,a.z)),n},Cl.prototype.copy=function(e){return fl.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this},Cl.prototype.toJSON=function(){var e=fl.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},Cl.prototype.fromJSON=function(e){return fl.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},((Ol.prototype=Object.create(fl.prototype)).constructor=Ol).prototype.isSplineCurve=!0,Ol.prototype.getPoint=function(e,t){var n=t||new Rt,i=this.points,r=(i.length-1)*e,a=Math.floor(r),o=r-a,s=i[0===a?a:a-1],c=i[a],l=i[a>i.length-2?i.length-1:a+1],h=i[a>i.length-3?i.length-1:a+2];return n.set(Ml(o,s.x,c.x,l.x,h.x),Ml(o,s.y,c.y,l.y,h.y)),n},Ol.prototype.copy=function(e){fl.prototype.copy.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var i=e.points[t];this.points.push(i.clone())}return this},Ol.prototype.toJSON=function(){var e=fl.prototype.toJSON.call(this);e.points=[];for(var t=0,n=this.points.length;t<n;t++){var i=this.points[t];e.points.push(i.toArray())}return e},Ol.prototype.fromJSON=function(e){fl.prototype.fromJSON.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var i=e.points[t];this.points.push((new Rt).fromArray(i))}return this};var Dl=Object.freeze({__proto__:null,ArcCurve:gl,CatmullRomCurve3:_l,CubicBezierCurve:El,CubicBezierCurve3:Al,EllipseCurve:ml,LineCurve:Ll,LineCurve3:Rl,QuadraticBezierCurve:Pl,QuadraticBezierCurve3:Cl,SplineCurve:Ol});function Il(){fl.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}function Nl(e){Il.call(this),this.type="Path",this.currentPoint=new Rt,e&&this.setFromPoints(e)}function zl(e){Nl.call(this,e),this.uuid=Lt.generateUUID(),this.type="Shape",this.holes=[]}function Bl(e,t){mn.call(this),this.type="Light",this.color=new ai(e),this.intensity=void 0!==t?t:1,this.receiveShadow=void 0}function Ul(e,t,n){Bl.call(this,e,n),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(mn.DefaultUp),this.updateMatrix(),this.groundColor=new ai(t)}function Fl(e){this.camera=e,this.bias=0,this.radius=1,this.mapSize=new Rt(512,512),this.map=null,this.mapPass=null,this.matrix=new Jt,this._frustum=new xr,this._frameExtents=new Rt(1,1),this._viewportCount=1,this._viewports=[new Gt(0,0,1,1)]}function Gl(){Fl.call(this,new dr(50,1,.5,500))}function Hl(e,t,n,i,r,a){Bl.call(this,e,t),this.type="SpotLight",this.position.copy(mn.DefaultUp),this.updateMatrix(),this.target=new mn,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(e){this.intensity=e/Math.PI}}),this.distance=void 0!==n?n:0,this.angle=void 0!==i?i:Math.PI/3,this.penumbra=void 0!==r?r:0,this.decay=void 0!==a?a:1,this.shadow=new Gl}function Vl(){Fl.call(this,new dr(90,1,.5,500)),this._frameExtents=new Rt(4,2),this._viewportCount=6,this._viewports=[new Gt(2,1,1,1),new Gt(0,1,1,1),new Gt(3,1,1,1),new Gt(1,1,1,1),new Gt(3,0,1,1),new Gt(1,0,1,1)],this._cubeDirections=[new Dt(1,0,0),new Dt(-1,0,0),new Dt(0,0,1),new Dt(0,0,-1),new Dt(0,1,0),new Dt(0,-1,0)],this._cubeUps=[new Dt(0,1,0),new Dt(0,1,0),new Dt(0,1,0),new Dt(0,1,0),new Dt(0,0,1),new Dt(0,0,-1)]}function jl(e,t,n,i){Bl.call(this,e,t),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(e){this.intensity=e/(4*Math.PI)}}),this.distance=void 0!==n?n:0,this.decay=void 0!==i?i:1,this.shadow=new Vl}function kl(e,t,n,i,r,a){pr.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=void 0!==e?e:-1,this.right=void 0!==t?t:1,this.top=void 0!==n?n:1,this.bottom=void 0!==i?i:-1,this.near=void 0!==r?r:.1,this.far=void 0!==a?a:2e3,this.updateProjectionMatrix()}function Wl(){Fl.call(this,new kl(-5,5,5,-5,.5,500))}function ql(e,t){Bl.call(this,e,t),this.type="DirectionalLight",this.position.copy(mn.DefaultUp),this.updateMatrix(),this.target=new mn,this.shadow=new Wl}function Xl(e,t){Bl.call(this,e,t),this.type="AmbientLight",this.castShadow=void 0}function Yl(e,t,n,i){Bl.call(this,e,t),this.type="RectAreaLight",this.width=void 0!==n?n:10,this.height=void 0!==i?i:10}function Zl(e){al.call(this,e),this.textures={}}Il.prototype=Object.assign(Object.create(fl.prototype),{constructor:Il,add:function(e){this.curves.push(e)},closePath:function(){var e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new Ll(t,e))},getPoint:function(e){for(var t=e*this.getLength(),n=this.getCurveLengths(),i=0;i<n.length;){if(n[i]>=t){var r=n[i]-t,a=this.curves[i],o=a.getLength(),s=0===o?0:1-r/o;return a.getPointAt(s)}i++}return null},getLength:function(){var e=this.getCurveLengths();return e[e.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var e=[],t=0,n=0,i=this.curves.length;n<i;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e},getSpacedPoints:function(e){void 0===e&&(e=40);for(var t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t},getPoints:function(e){e=e||12;for(var t,n=[],i=0,r=this.curves;i<r.length;i++)for(var a=r[i],o=a&&a.isEllipseCurve?2*e:a&&(a.isLineCurve||a.isLineCurve3)?1:a&&a.isSplineCurve?e*a.points.length:e,s=a.getPoints(o),c=0;c<s.length;c++){var l=s[c];t&&t.equals(l)||(n.push(l),t=l)}return this.autoClose&&1<n.length&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n},copy:function(e){fl.prototype.copy.call(this,e),this.curves=[];for(var t=0,n=e.curves.length;t<n;t++){var i=e.curves[t];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this},toJSON:function(){var e=fl.prototype.toJSON.call(this);e.autoClose=this.autoClose,e.curves=[];for(var t=0,n=this.curves.length;t<n;t++){var i=this.curves[t];e.curves.push(i.toJSON())}return e},fromJSON:function(e){fl.prototype.fromJSON.call(this,e),this.autoClose=e.autoClose,this.curves=[];for(var t=0,n=e.curves.length;t<n;t++){var i=e.curves[t];this.curves.push((new Dl[i.type]).fromJSON(i))}return this}}),Nl.prototype=Object.assign(Object.create(Il.prototype),{constructor:Nl,setFromPoints:function(e){this.moveTo(e[0].x,e[0].y);for(var t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this},moveTo:function(e,t){return this.currentPoint.set(e,t),this},lineTo:function(e,t){var n=new Ll(this.currentPoint.clone(),new Rt(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this},quadraticCurveTo:function(e,t,n,i){var r=new Pl(this.currentPoint.clone(),new Rt(e,t),new Rt(n,i));return this.curves.push(r),this.currentPoint.set(n,i),this},bezierCurveTo:function(e,t,n,i,r,a){var o=new El(this.currentPoint.clone(),new Rt(e,t),new Rt(n,i),new Rt(r,a));return this.curves.push(o),this.currentPoint.set(r,a),this},splineThru:function(e){var t=new Ol([this.currentPoint.clone()].concat(e));return this.curves.push(t),this.currentPoint.copy(e[e.length-1]),this},arc:function(e,t,n,i,r,a){var o=this.currentPoint.x,s=this.currentPoint.y;return this.absarc(e+o,t+s,n,i,r,a),this},absarc:function(e,t,n,i,r,a){return this.absellipse(e,t,n,n,i,r,a),this},ellipse:function(e,t,n,i,r,a,o,s){var c=this.currentPoint.x,l=this.currentPoint.y;return this.absellipse(e+c,t+l,n,i,r,a,o,s),this},absellipse:function(e,t,n,i,r,a,o,s){var c,l=new ml(e,t,n,i,r,a,o,s);0<this.curves.length&&((c=l.getPoint(0)).equals(this.currentPoint)||this.lineTo(c.x,c.y)),this.curves.push(l);var h=l.getPoint(1);return this.currentPoint.copy(h),this},copy:function(e){return Il.prototype.copy.call(this,e),this.currentPoint.copy(e.currentPoint),this},toJSON:function(){var e=Il.prototype.toJSON.call(this);return e.currentPoint=this.currentPoint.toArray(),e},fromJSON:function(e){return Il.prototype.fromJSON.call(this,e),this.currentPoint.fromArray(e.currentPoint),this}}),zl.prototype=Object.assign(Object.create(Nl.prototype),{constructor:zl,getPointsHoles:function(e){for(var t=[],n=0,i=this.holes.length;n<i;n++)t[n]=this.holes[n].getPoints(e);return t},extractPoints:function(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}},copy:function(e){Nl.prototype.copy.call(this,e),this.holes=[];for(var t=0,n=e.holes.length;t<n;t++){var i=e.holes[t];this.holes.push(i.clone())}return this},toJSON:function(){var e=Nl.prototype.toJSON.call(this);e.uuid=this.uuid,e.holes=[];for(var t=0,n=this.holes.length;t<n;t++){var i=this.holes[t];e.holes.push(i.toJSON())}return e},fromJSON:function(e){Nl.prototype.fromJSON.call(this,e),this.uuid=e.uuid,this.holes=[];for(var t=0,n=e.holes.length;t<n;t++){var i=e.holes[t];this.holes.push((new Nl).fromJSON(i))}return this}}),Bl.prototype=Object.assign(Object.create(mn.prototype),{constructor:Bl,isLight:!0,copy:function(e){return mn.prototype.copy.call(this,e),this.color.copy(e.color),this.intensity=e.intensity,this},toJSON:function(e){var t=mn.prototype.toJSON.call(this,e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}),Ul.prototype=Object.assign(Object.create(Bl.prototype),{constructor:Ul,isHemisphereLight:!0,copy:function(e){return Bl.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}),Object.assign(Fl.prototype,{_projScreenMatrix:new Jt,_lightPositionWorld:new Dt,_lookTarget:new Dt,getViewportCount:function(){return this._viewportCount},getFrustum:function(){return this._frustum},updateMatrices:function(e){var t=this.camera,n=this.matrix,i=this._projScreenMatrix,r=this._lookTarget,a=this._lightPositionWorld;a.setFromMatrixPosition(e.matrixWorld),t.position.copy(a),r.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(r),t.updateMatrixWorld(),i.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromMatrix(i),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(t.projectionMatrix),n.multiply(t.matrixWorldInverse)},getViewport:function(e){return this._viewports[e]},getFrameExtents:function(){return this._frameExtents},copy:function(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var e={};return 0!==this.bias&&(e.bias=this.bias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}),Gl.prototype=Object.assign(Object.create(Fl.prototype),{constructor:Gl,isSpotLightShadow:!0,updateMatrices:function(e){var t=this.camera,n=2*Lt.RAD2DEG*e.angle,i=this.mapSize.width/this.mapSize.height,r=e.distance||t.far;n===t.fov&&i===t.aspect&&r===t.far||(t.fov=n,t.aspect=i,t.far=r,t.updateProjectionMatrix()),Fl.prototype.updateMatrices.call(this,e)}}),Hl.prototype=Object.assign(Object.create(Bl.prototype),{constructor:Hl,isSpotLight:!0,copy:function(e){return Bl.prototype.copy.call(this,e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),Vl.prototype=Object.assign(Object.create(Fl.prototype),{constructor:Vl,isPointLightShadow:!0,updateMatrices:function(e,t){void 0===t&&(t=0);var n=this.camera,i=this.matrix,r=this._lightPositionWorld,a=this._lookTarget,o=this._projScreenMatrix;r.setFromMatrixPosition(e.matrixWorld),n.position.copy(r),a.copy(n.position),a.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(a),n.updateMatrixWorld(),i.makeTranslation(-r.x,-r.y,-r.z),o.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromMatrix(o)}}),jl.prototype=Object.assign(Object.create(Bl.prototype),{constructor:jl,isPointLight:!0,copy:function(e){return Bl.prototype.copy.call(this,e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}),kl.prototype=Object.assign(Object.create(pr.prototype),{constructor:kl,isOrthographicCamera:!0,copy:function(e,t){return pr.prototype.copy.call(this,e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this},setViewOffset:function(e,t,n,i,r,a){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=a,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e,t,n,i,r=(this.right-this.left)/(2*this.zoom),a=(this.top-this.bottom)/(2*this.zoom),o=(this.right+this.left)/2,s=(this.top+this.bottom)/2,c=o-r,l=o+r,h=s+a,u=s-a;null!==this.view&&this.view.enabled&&(e=this.zoom/(this.view.width/this.view.fullWidth),t=this.zoom/(this.view.height/this.view.fullHeight),n=(this.right-this.left)/this.view.width,i=(this.top-this.bottom)/this.view.height,l=(c+=n*(this.view.offsetX/e))+n*(this.view.width/e),u=(h-=i*(this.view.offsetY/t))-i*(this.view.height/t)),this.projectionMatrix.makeOrthographic(c,l,h,u,this.near,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(e){var t=mn.prototype.toJSON.call(this,e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}),Wl.prototype=Object.assign(Object.create(Fl.prototype),{constructor:Wl,isDirectionalLightShadow:!0,updateMatrices:function(e){Fl.prototype.updateMatrices.call(this,e)}}),ql.prototype=Object.assign(Object.create(Bl.prototype),{constructor:ql,isDirectionalLight:!0,copy:function(e){return Bl.prototype.copy.call(this,e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),Xl.prototype=Object.assign(Object.create(Bl.prototype),{constructor:Xl,isAmbientLight:!0}),Yl.prototype=Object.assign(Object.create(Bl.prototype),{constructor:Yl,isRectAreaLight:!0,copy:function(e){return Bl.prototype.copy.call(this,e),this.width=e.width,this.height=e.height,this},toJSON:function(e){var t=Bl.prototype.toJSON.call(this,e);return t.object.width=this.width,t.object.height=this.height,t}}),Zl.prototype=Object.assign(Object.create(al.prototype),{constructor:Zl,load:function(e,t,n,i){var r=this,a=new sl(r.manager);a.setPath(r.path),a.load(e,function(e){t(r.parse(JSON.parse(e)))},n,i)},parse:function(e){var t=this.textures;function n(e){return void 0===t[e]&&console.warn("THREE.MaterialLoader: Undefined texture",e),t[e]}var i,r=new Gc[e.type];if(void 0!==e.uuid&&(r.uuid=e.uuid),void 0!==e.name&&(r.name=e.name),void 0!==e.color&&r.color.setHex(e.color),void 0!==e.roughness&&(r.roughness=e.roughness),void 0!==e.metalness&&(r.metalness=e.metalness),void 0!==e.sheen&&(r.sheen=(new ai).setHex(e.sheen)),void 0!==e.emissive&&r.emissive.setHex(e.emissive),void 0!==e.specular&&r.specular.setHex(e.specular),void 0!==e.shininess&&(r.shininess=e.shininess),void 0!==e.clearcoat&&(r.clearcoat=e.clearcoat),void 0!==e.clearcoatRoughness&&(r.clearcoatRoughness=e.clearcoatRoughness),void 0!==e.vertexColors&&(r.vertexColors=e.vertexColors),void 0!==e.fog&&(r.fog=e.fog),void 0!==e.flatShading&&(r.flatShading=e.flatShading),void 0!==e.blending&&(r.blending=e.blending),void 0!==e.combine&&(r.combine=e.combine),void 0!==e.side&&(r.side=e.side),void 0!==e.opacity&&(r.opacity=e.opacity),void 0!==e.transparent&&(r.transparent=e.transparent),void 0!==e.alphaTest&&(r.alphaTest=e.alphaTest),void 0!==e.depthTest&&(r.depthTest=e.depthTest),void 0!==e.depthWrite&&(r.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(r.colorWrite=e.colorWrite),void 0!==e.stencilWrite&&(r.stencilWrite=e.stencilWrite),void 0!==e.stencilWriteMask&&(r.stencilWriteMask=e.stencilWriteMask),void 0!==e.stencilFunc&&(r.stencilFunc=e.stencilFunc),void 0!==e.stencilRef&&(r.stencilRef=e.stencilRef),void 0!==e.stencilFuncMask&&(r.stencilFuncMask=e.stencilFuncMask),void 0!==e.stencilFail&&(r.stencilFail=e.stencilFail),void 0!==e.stencilZFail&&(r.stencilZFail=e.stencilZFail),void 0!==e.stencilZPass&&(r.stencilZPass=e.stencilZPass),void 0!==e.wireframe&&(r.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(r.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.wireframeLinecap&&(r.wireframeLinecap=e.wireframeLinecap),void 0!==e.wireframeLinejoin&&(r.wireframeLinejoin=e.wireframeLinejoin),void 0!==e.rotation&&(r.rotation=e.rotation),1!==e.linewidth&&(r.linewidth=e.linewidth),void 0!==e.dashSize&&(r.dashSize=e.dashSize),void 0!==e.gapSize&&(r.gapSize=e.gapSize),void 0!==e.scale&&(r.scale=e.scale),void 0!==e.polygonOffset&&(r.polygonOffset=e.polygonOffset),void 0!==e.polygonOffsetFactor&&(r.polygonOffsetFactor=e.polygonOffsetFactor),void 0!==e.polygonOffsetUnits&&(r.polygonOffsetUnits=e.polygonOffsetUnits),void 0!==e.skinning&&(r.skinning=e.skinning),void 0!==e.morphTargets&&(r.morphTargets=e.morphTargets),void 0!==e.morphNormals&&(r.morphNormals=e.morphNormals),void 0!==e.dithering&&(r.dithering=e.dithering),void 0!==e.visible&&(r.visible=e.visible),void 0!==e.toneMapped&&(r.toneMapped=e.toneMapped),void 0!==e.userData&&(r.userData=e.userData),void 0!==e.uniforms)for(var a in e.uniforms){var o=e.uniforms[a];switch(r.uniforms[a]={},o.type){case"t":r.uniforms[a].value=n(o.value);break;case"c":r.uniforms[a].value=(new ai).setHex(o.value);break;case"v2":r.uniforms[a].value=(new Rt).fromArray(o.value);break;case"v3":r.uniforms[a].value=(new Dt).fromArray(o.value);break;case"v4":r.uniforms[a].value=(new Gt).fromArray(o.value);break;case"m3":r.uniforms[a].value=(new zt).fromArray(o.value);case"m4":r.uniforms[a].value=(new Jt).fromArray(o.value);break;default:r.uniforms[a].value=o.value}}if(void 0!==e.defines&&(r.defines=e.defines),void 0!==e.vertexShader&&(r.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(r.fragmentShader=e.fragmentShader),void 0!==e.extensions)for(var s in e.extensions)r.extensions[s]=e.extensions[s];return void 0!==e.shading&&(r.flatShading=1===e.shading),void 0!==e.size&&(r.size=e.size),void 0!==e.sizeAttenuation&&(r.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(r.map=n(e.map)),void 0!==e.matcap&&(r.matcap=n(e.matcap)),void 0!==e.alphaMap&&(r.alphaMap=n(e.alphaMap),r.transparent=!0),void 0!==e.bumpMap&&(r.bumpMap=n(e.bumpMap)),void 0!==e.bumpScale&&(r.bumpScale=e.bumpScale),void 0!==e.normalMap&&(r.normalMap=n(e.normalMap)),void 0!==e.normalMapType&&(r.normalMapType=e.normalMapType),void 0!==e.normalScale&&(i=e.normalScale,!1===Array.isArray(i)&&(i=[i,i]),r.normalScale=(new Rt).fromArray(i)),void 0!==e.displacementMap&&(r.displacementMap=n(e.displacementMap)),void 0!==e.displacementScale&&(r.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(r.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(r.roughnessMap=n(e.roughnessMap)),void 0!==e.metalnessMap&&(r.metalnessMap=n(e.metalnessMap)),void 0!==e.emissiveMap&&(r.emissiveMap=n(e.emissiveMap)),void 0!==e.emissiveIntensity&&(r.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(r.specularMap=n(e.specularMap)),void 0!==e.envMap&&(r.envMap=n(e.envMap)),void 0!==e.envMapIntensity&&(r.envMapIntensity=e.envMapIntensity),void 0!==e.reflectivity&&(r.reflectivity=e.reflectivity),void 0!==e.refractionRatio&&(r.refractionRatio=e.refractionRatio),void 0!==e.lightMap&&(r.lightMap=n(e.lightMap)),void 0!==e.lightMapIntensity&&(r.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(r.aoMap=n(e.aoMap)),void 0!==e.aoMapIntensity&&(r.aoMapIntensity=e.aoMapIntensity),void 0!==e.gradientMap&&(r.gradientMap=n(e.gradientMap)),void 0!==e.clearcoatNormalMap&&(r.clearcoatNormalMap=n(e.clearcoatNormalMap)),void 0!==e.clearcoatNormalScale&&(r.clearcoatNormalScale=(new Rt).fromArray(e.clearcoatNormalScale)),r},setTextures:function(e){return this.textures=e,this}});var Jl={decodeText:function(e){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(e);for(var t="",n=0,i=e.length;n<i;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch(e){return t}},extractUrlBase:function(e){var t=e.lastIndexOf("/");return-1===t?"./":e.substr(0,t+1)}};function Ql(){Oi.call(this),this.type="InstancedBufferGeometry",this.maxInstancedCount=void 0}function Kl(e,t,n,i){"number"==typeof n&&(i=n,n=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),di.call(this,e,t,n),this.meshPerAttribute=i||1}function $l(e){al.call(this,e)}Ql.prototype=Object.assign(Object.create(Oi.prototype),{constructor:Ql,isInstancedBufferGeometry:!0,copy:function(e){return Oi.prototype.copy.call(this,e),this.maxInstancedCount=e.maxInstancedCount,this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var e=Oi.prototype.toJSON.call(this);return e.maxInstancedCount=this.maxInstancedCount,e.isInstancedBufferGeometry=!0,e}}),Kl.prototype=Object.assign(Object.create(di.prototype),{constructor:Kl,isInstancedBufferAttribute:!0,copy:function(e){return di.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this},toJSON:function(){var e=di.prototype.toJSON.call(this);return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}),$l.prototype=Object.assign(Object.create(al.prototype),{constructor:$l,load:function(e,t,n,i){var r=this,a=new sl(r.manager);a.setPath(r.path),a.load(e,function(e){t(r.parse(JSON.parse(e)))},n,i)},parse:function(e){var t=new(e.isInstancedBufferGeometry?Ql:Oi),n=e.data.index;void 0!==n&&(a=new eh[n.type](n.array),t.setIndex(new di(a,1)));var i=e.data.attributes;for(c in i){var r=i[c],a=new eh[r.type](r.array),o=new(r.isInstancedBufferAttribute?Kl:di)(a,r.itemSize,r.normalized);void 0!==r.name&&(o.name=r.name),t.setAttribute(c,o)}var s=e.data.morphAttributes;if(s)for(var c in s){for(var l=s[c],h=[],u=0,p=l.length;u<p;u++)r=l[u],o=new di(a=new eh[r.type](r.array),r.itemSize,r.normalized),void 0!==r.name&&(o.name=r.name),h.push(o);t.morphAttributes[c]=h}var d=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==d)for(var u=0,f=d.length;u!==f;++u){var m=d[u];t.addGroup(m.start,m.count,m.materialIndex)}var g,v=e.data.boundingSphere;return void 0!==v&&(g=new Dt,void 0!==v.center&&g.fromArray(v.center),t.boundingSphere=new On(g,v.radius)),e.name&&(t.name=e.name),e.userData&&(t.userData=e.userData),t}});var eh={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:"undefined"!=typeof Uint8ClampedArray?Uint8ClampedArray:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function th(e){al.call(this,e)}th.prototype=Object.assign(Object.create(al.prototype),{constructor:th,load:function(i,r,e,a){var o=this,t=""===this.path?Jl.extractUrlBase(i):this.path;this.resourcePath=this.resourcePath||t;var n=new sl(o.manager);n.setPath(this.path),n.load(i,function(e){var t=null;try{t=JSON.parse(e)}catch(e){return void 0!==a&&a(e),void console.error("THREE:ObjectLoader: Can't parse "+i+".",e.message)}var n=t.metadata;void 0!==n&&void 0!==n.type&&"geometry"!==n.type.toLowerCase()?o.parse(t,r):console.error("THREE.ObjectLoader: Can't load "+i)},e,a)},parse:function(e,t){var n=this.parseShape(e.shapes),i=this.parseGeometries(e.geometries,n),r=this.parseImages(e.images,function(){void 0!==t&&t(s)}),a=this.parseTextures(e.textures,r),o=this.parseMaterials(e.materials,a),s=this.parseObject(e.object,i,o);return e.animations&&(s.animations=this.parseAnimations(e.animations)),void 0!==e.images&&0!==e.images.length||void 0!==t&&t(s),s},parseShape:function(e){var t={};if(void 0!==e)for(var n=0,i=e.length;n<i;n++){var r=(new zl).fromJSON(e[n]);t[r.uuid]=r}return t},parseGeometries:function(e,t){var n={};if(void 0!==e)for(var i=new $l,r=0,a=e.length;r<a;r++){var o,s=e[r];switch(s.type){case"PlaneGeometry":case"PlaneBufferGeometry":o=new Rc[s.type](s.width,s.height,s.widthSegments,s.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":o=new Rc[s.type](s.width,s.height,s.depth,s.widthSegments,s.heightSegments,s.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":o=new Rc[s.type](s.radius,s.segments,s.thetaStart,s.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":o=new Rc[s.type](s.radiusTop,s.radiusBottom,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":o=new Rc[s.type](s.radius,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":o=new Rc[s.type](s.radius,s.widthSegments,s.heightSegments,s.phiStart,s.phiLength,s.thetaStart,s.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":o=new Rc[s.type](s.radius,s.detail);break;case"RingGeometry":case"RingBufferGeometry":o=new Rc[s.type](s.innerRadius,s.outerRadius,s.thetaSegments,s.phiSegments,s.thetaStart,s.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":o=new Rc[s.type](s.radius,s.tube,s.radialSegments,s.tubularSegments,s.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":o=new Rc[s.type](s.radius,s.tube,s.tubularSegments,s.radialSegments,s.p,s.q);break;case"TubeGeometry":case"TubeBufferGeometry":o=new Rc[s.type]((new Dl[s.path.type]).fromJSON(s.path),s.tubularSegments,s.radius,s.radialSegments,s.closed);break;case"LatheGeometry":case"LatheBufferGeometry":o=new Rc[s.type](s.points,s.segments,s.phiStart,s.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":o=new Rc[s.type](s.vertices,s.indices,s.radius,s.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":for(var c=[],l=0,h=s.shapes.length;l<h;l++){var u=t[s.shapes[l]];c.push(u)}o=new Rc[s.type](c,s.curveSegments);break;case"ExtrudeGeometry":case"ExtrudeBufferGeometry":for(c=[],l=0,h=s.shapes.length;l<h;l++)u=t[s.shapes[l]],c.push(u);var p=s.options.extrudePath;void 0!==p&&(s.options.extrudePath=(new Dl[p.type]).fromJSON(p)),o=new Rc[s.type](c,s.options);break;case"BufferGeometry":case"InstancedBufferGeometry":o=i.parse(s);break;case"Geometry":"THREE"in window&&"LegacyJSONLoader"in THREE?o=(new THREE.LegacyJSONLoader).parse(s,this.resourcePath).geometry:console.error('THREE.ObjectLoader: You have to import LegacyJSONLoader in order load geometry data of type "Geometry".');break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+s.type+'"');continue}o.uuid=s.uuid,void 0!==s.name&&(o.name=s.name),!0===o.isBufferGeometry&&void 0!==s.userData&&(o.userData=s.userData),n[s.uuid]=o}return n},parseMaterials:function(e,t){var n={},i={};if(void 0!==e){var r=new Zl;r.setTextures(t);for(var a=0,o=e.length;a<o;a++){var s=e[a];if("MultiMaterial"===s.type){for(var c=[],l=0;l<s.materials.length;l++){var h=s.materials[l];void 0===n[h.uuid]&&(n[h.uuid]=r.parse(h)),c.push(n[h.uuid])}i[s.uuid]=c}else void 0===n[s.uuid]&&(n[s.uuid]=r.parse(s)),i[s.uuid]=n[s.uuid]}}return i},parseAnimations:function(e){for(var t=[],n=0;n<e.length;n++){var i=e[n],r=el.parse(i);void 0!==i.uuid&&(r.uuid=i.uuid),t.push(r)}return t},parseImages:function(e,t){var n=this,i={};function r(e){return n.manager.itemStart(e),a.load(e,function(){n.manager.itemEnd(e)},void 0,function(){n.manager.itemError(e),n.manager.itemEnd(e)})}if(void 0!==e&&0<e.length){var a=new ul(new il(t));a.setCrossOrigin(this.crossOrigin);for(var o=0,s=e.length;o<s;o++){var c=e[o],l=c.url;if(Array.isArray(l)){i[c.uuid]=[];for(var h=0,u=l.length;h<u;h++){var p=l[h],d=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(p)?p:n.resourcePath+p;i[c.uuid].push(r(d))}}else d=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c.url)?c.url:n.resourcePath+c.url,i[c.uuid]=r(d)}}return i},parseTextures:function(e,t){function n(e,t){return"number"==typeof e?e:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e),t[e])}var i={};if(void 0!==e)for(var r=0,a=e.length;r<a;r++){var o,s=e[r];void 0===s.image&&console.warn('THREE.ObjectLoader: No "image" specified for',s.uuid),void 0===t[s.image]&&console.warn("THREE.ObjectLoader: Undefined image",s.image),(o=new(Array.isArray(t[s.image])?Ur:Ft)(t[s.image])).needsUpdate=!0,o.uuid=s.uuid,void 0!==s.name&&(o.name=s.name),void 0!==s.mapping&&(o.mapping=n(s.mapping,ih)),void 0!==s.offset&&o.offset.fromArray(s.offset),void 0!==s.repeat&&o.repeat.fromArray(s.repeat),void 0!==s.center&&o.center.fromArray(s.center),void 0!==s.rotation&&(o.rotation=s.rotation),void 0!==s.wrap&&(o.wrapS=n(s.wrap[0],rh),o.wrapT=n(s.wrap[1],rh)),void 0!==s.format&&(o.format=s.format),void 0!==s.type&&(o.type=s.type),void 0!==s.encoding&&(o.encoding=s.encoding),void 0!==s.minFilter&&(o.minFilter=n(s.minFilter,ah)),void 0!==s.magFilter&&(o.magFilter=n(s.magFilter,ah)),void 0!==s.anisotropy&&(o.anisotropy=s.anisotropy),void 0!==s.flipY&&(o.flipY=s.flipY),void 0!==s.premultiplyAlpha&&(o.premultiplyAlpha=s.premultiplyAlpha),void 0!==s.unpackAlignment&&(o.unpackAlignment=s.unpackAlignment),i[s.uuid]=o}return i},parseObject:function(e,t,a){function n(e){return void 0===t[e]&&console.warn("THREE.ObjectLoader: Undefined geometry",e),t[e]}function i(e){if(void 0!==e){if(Array.isArray(e)){for(var t=[],n=0,i=e.length;n<i;n++){var r=e[n];void 0===a[r]&&console.warn("THREE.ObjectLoader: Undefined material",r),t.push(a[r])}return t}return void 0===a[e]&&console.warn("THREE.ObjectLoader: Undefined material",e),a[e]}}switch(e.type){case"Scene":s=new gn,void 0!==e.background&&Number.isInteger(e.background)&&(s.background=new ai(e.background)),void 0!==e.fog&&("Fog"===e.fog.type?s.fog=new Ro(e.fog.color,e.fog.near,e.fog.far):"FogExp2"===e.fog.type&&(s.fog=new Lo(e.fog.color,e.fog.density)));break;case"PerspectiveCamera":s=new dr(e.fov,e.aspect,e.near,e.far),void 0!==e.focus&&(s.focus=e.focus),void 0!==e.zoom&&(s.zoom=e.zoom),void 0!==e.filmGauge&&(s.filmGauge=e.filmGauge),void 0!==e.filmOffset&&(s.filmOffset=e.filmOffset),void 0!==e.view&&(s.view=Object.assign({},e.view));break;case"OrthographicCamera":s=new kl(e.left,e.right,e.top,e.bottom,e.near,e.far),void 0!==e.zoom&&(s.zoom=e.zoom),void 0!==e.view&&(s.view=Object.assign({},e.view));break;case"AmbientLight":s=new Xl(e.color,e.intensity);break;case"DirectionalLight":s=new ql(e.color,e.intensity);break;case"PointLight":s=new jl(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":s=new Yl(e.color,e.intensity,e.width,e.height);break;case"SpotLight":s=new Hl(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":s=new Ul(e.color,e.groundColor,e.intensity);break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":var r=n(e.geometry),o=i(e.material),s=new(r.bones&&0<r.bones.length?Jo:Ji)(r,o);break;case"InstancedMesh":var r=n(e.geometry),o=i(e.material),c=e.count,l=e.instanceMatrix;(s=new ts(r,o,c)).instanceMatrix=new di(new Float32Array(l.array),16);break;case"LOD":s=new Zo;break;case"Line":s=new cs(n(e.geometry),i(e.material),e.mode);break;case"LineLoop":s=new ps(n(e.geometry),i(e.material));break;case"LineSegments":s=new us(n(e.geometry),i(e.material));break;case"PointCloud":case"Points":s=new ys(n(e.geometry),i(e.material));break;case"Sprite":s=new Wo(i(e.material));break;case"Group":s=new xo;break;default:s=new mn}if(s.uuid=e.uuid,void 0!==e.name&&(s.name=e.name),void 0!==e.matrix?(s.matrix.fromArray(e.matrix),void 0!==e.matrixAutoUpdate&&(s.matrixAutoUpdate=e.matrixAutoUpdate),s.matrixAutoUpdate&&s.matrix.decompose(s.position,s.quaternion,s.scale)):(void 0!==e.position&&s.position.fromArray(e.position),void 0!==e.rotation&&s.rotation.fromArray(e.rotation),void 0!==e.quaternion&&s.quaternion.fromArray(e.quaternion),void 0!==e.scale&&s.scale.fromArray(e.scale)),void 0!==e.castShadow&&(s.castShadow=e.castShadow),void 0!==e.receiveShadow&&(s.receiveShadow=e.receiveShadow),e.shadow&&(void 0!==e.shadow.bias&&(s.shadow.bias=e.shadow.bias),void 0!==e.shadow.radius&&(s.shadow.radius=e.shadow.radius),void 0!==e.shadow.mapSize&&s.shadow.mapSize.fromArray(e.shadow.mapSize),void 0!==e.shadow.camera&&(s.shadow.camera=this.parseObject(e.shadow.camera))),void 0!==e.visible&&(s.visible=e.visible),void 0!==e.frustumCulled&&(s.frustumCulled=e.frustumCulled),void 0!==e.renderOrder&&(s.renderOrder=e.renderOrder),void 0!==e.userData&&(s.userData=e.userData),void 0!==e.layers&&(s.layers.mask=e.layers),void 0!==e.drawMode&&s.setDrawMode(e.drawMode),void 0!==e.children)for(var h=e.children,u=0;u<h.length;u++)s.add(this.parseObject(h[u],t,a));if("LOD"===e.type)for(var p=e.levels,d=0;d<p.length;d++){var f=p[d],m=s.getObjectByProperty("uuid",f.object);void 0!==m&&s.addLevel(m,f.distance)}return s}});var nh,ih={UVMapping:300,CubeReflectionMapping:ze,CubeRefractionMapping:Be,EquirectangularReflectionMapping:Ue,EquirectangularRefractionMapping:Fe,SphericalReflectionMapping:Ge,CubeUVReflectionMapping:He,CubeUVRefractionMapping:Ve},rh={RepeatWrapping:G,ClampToEdgeWrapping:H,MirroredRepeatWrapping:V},ah={NearestFilter:je,NearestMipmapNearestFilter:ke,NearestMipmapLinearFilter:We,LinearFilter:qe,LinearMipmapNearestFilter:Xe,LinearMipmapLinearFilter:Ye};function oh(e){"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),al.call(this,e),this.options=void 0}function sh(){this.type="ShapePath",this.color=new ai,this.subPaths=[],this.currentPath=null}function ch(e){this.type="Font",this.data=e}function lh(e){al.call(this,e)}oh.prototype=Object.assign(Object.create(al.prototype),{constructor:oh,setOptions:function(e){return this.options=e,this},load:function(t,n,e,i){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var r=this,a=nl.get(t);if(void 0!==a)return r.manager.itemStart(t),setTimeout(function(){n&&n(a),r.manager.itemEnd(t)},0),a;fetch(t).then(function(e){return e.blob()}).then(function(e){return void 0===r.options?createImageBitmap(e):createImageBitmap(e,r.options)}).then(function(e){nl.add(t,e),n&&n(e),r.manager.itemEnd(t)}).catch(function(e){i&&i(e),r.manager.itemError(t),r.manager.itemEnd(t)}),r.manager.itemStart(t)}}),Object.assign(sh.prototype,{moveTo:function(e,t){return this.currentPath=new Nl,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this},lineTo:function(e,t){return this.currentPath.lineTo(e,t),this},quadraticCurveTo:function(e,t,n,i){return this.currentPath.quadraticCurveTo(e,t,n,i),this},bezierCurveTo:function(e,t,n,i,r,a){return this.currentPath.bezierCurveTo(e,t,n,i,r,a),this},splineThru:function(e){return this.currentPath.splineThru(e),this},toShapes:function(e,t){function n(e){for(var t=[],n=0,i=e.length;n<i;n++){var r=e[n],a=new zl;a.curves=r.curves,t.push(a)}return t}var i=rc.isClockWise,r=this.subPaths;if(0===r.length)return[];if(!0===t)return n(r);var a,o,s,c=[];if(1===r.length)return o=r[0],(s=new zl).curves=o.curves,c.push(s),c;var l,h=!i(r[0].getPoints()),h=e?!h:h,u=[],p=[],d=[],f=0;p[f]=void 0,d[f]=[];for(var m,g=0,v=r.length;g<v;g++)a=i(l=(o=r[g]).getPoints()),(a=e?!a:a)?(!h&&p[f]&&f++,p[f]={s:new zl,p:l},p[f].s.curves=o.curves,h&&f++,d[f]=[]):d[f].push({h:o,p:l[0]});if(!p[0])return n(r);if(1<p.length){for(var y=!1,x=[],b=0,w=p.length;b<w;b++)u[b]=[];for(b=0,w=p.length;b<w;b++)for(var _=d[b],M=0;M<_.length;M++){for(var S=_[M],T=!0,E=0;E<p.length;E++)!function(e,t){for(var n=t.length,i=!1,r=n-1,a=0;a<n;r=a++){var o=t[r],s=t[a],c=s.x-o.x,l=s.y-o.y;if(Math.abs(l)>Number.EPSILON){if(l<0&&(o=t[a],c=-c,s=t[r],l=-l),e.y<o.y||e.y>s.y)continue;if(e.y===o.y){if(e.x===o.x)return 1}else{var h=l*(e.x-o.x)-c*(e.y-o.y);if(0==h)return 1;if(h<0)continue;i=!i}}else{if(e.y!==o.y)continue;if(s.x<=e.x&&e.x<=o.x||o.x<=e.x&&e.x<=s.x)return 1}}return i}(S.p,p[E].p)||(b!==E&&x.push({froms:b,tos:E,hole:M}),T?(T=!1,u[E].push(S)):y=!0);T&&u[b].push(S)}0<x.length&&(y||(d=u))}for(var g=0,A=p.length;g<A;g++){s=p[g].s,c.push(s);for(var L=0,R=(m=d[g]).length;L<R;L++)s.holes.push(m[L].h)}return c}}),Object.assign(ch.prototype,{isFont:!0,generateShapes:function(e,t){void 0===t&&(t=100);for(var n=[],i=function(e,t,n){for(var i=Array.from?Array.from(e):String(e).split(""),r=t/n.resolution,a=(n.boundingBox.yMax-n.boundingBox.yMin+n.underlineThickness)*r,o=[],s=0,c=0,l=0;l<i.length;l++){var h,u=i[l];"\n"===u?(s=0,c-=a):(h=function(e,t,n,i,r){var a=r.glyphs[e]||r.glyphs["?"];if(a){var o,s,c,l,h,u,p,d,f=new sh;if(a.o)for(var m=a._cachedOutline||(a._cachedOutline=a.o.split(" ")),g=0,v=m.length;g<v;)switch(m[g++]){case"m":o=m[g++]*t+n,s=m[g++]*t+i,f.moveTo(o,s);break;case"l":o=m[g++]*t+n,s=m[g++]*t+i,f.lineTo(o,s);break;case"q":c=m[g++]*t+n,l=m[g++]*t+i,h=m[g++]*t+n,u=m[g++]*t+i,f.quadraticCurveTo(h,u,c,l);break;case"b":c=m[g++]*t+n,l=m[g++]*t+i,h=m[g++]*t+n,u=m[g++]*t+i,p=m[g++]*t+n,d=m[g++]*t+i,f.bezierCurveTo(h,u,p,d,c,l)}return{offsetX:a.ha*t,path:f}}console.error('THREE.Font: character "'+e+'" does not exists in font family '+r.familyName+".")}(u,r,s,c,n),s+=h.offsetX,o.push(h.path))}return o}(e,t,this.data),r=0,a=i.length;r<a;r++)Array.prototype.push.apply(n,i[r].toShapes());return n}}),lh.prototype=Object.assign(Object.create(al.prototype),{constructor:lh,load:function(e,i,t,n){var r=this,a=new sl(this.manager);a.setPath(this.path),a.load(e,function(t){var n;try{n=JSON.parse(t)}catch(e){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),n=JSON.parse(t.substring(65,t.length-2))}var e=r.parse(n);i&&i(e)},t,n)},parse:function(e){return new ch(e)}});var hh={getContext:function(){return void 0===nh&&(nh=new(window.AudioContext||window.webkitAudioContext)),nh},setContext:function(e){nh=e}};function uh(e){al.call(this,e)}function ph(){this.coefficients=[];for(var e=0;e<9;e++)this.coefficients.push(new Dt)}function dh(e,t){Bl.call(this,void 0,t),this.sh=void 0!==e?e:new ph}function fh(e,t,n){dh.call(this,void 0,n);var i=(new ai).set(e),r=(new ai).set(t),a=new Dt(i.r,i.g,i.b),o=new Dt(r.r,r.g,r.b),s=Math.sqrt(Math.PI),c=s*Math.sqrt(.75);this.sh.coefficients[0].copy(a).add(o).multiplyScalar(s),this.sh.coefficients[1].copy(a).sub(o).multiplyScalar(c)}function mh(e,t){dh.call(this,void 0,t);var n=(new ai).set(e);this.sh.coefficients[0].set(n.r,n.g,n.b).multiplyScalar(2*Math.sqrt(Math.PI))}uh.prototype=Object.assign(Object.create(al.prototype),{constructor:uh,load:function(e,n,t,i){var r=new sl(this.manager);r.setResponseType("arraybuffer"),r.setPath(this.path),r.load(e,function(e){var t=e.slice(0);hh.getContext().decodeAudioData(t,function(e){n(e)})},t,i)}}),Object.assign(ph.prototype,{isSphericalHarmonics3:!0,set:function(e){for(var t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this},zero:function(){for(var e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this},getAt:function(e,t){var n=e.x,i=e.y,r=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.282095),t.addScale(a[1],.488603*i),t.addScale(a[2],.488603*r),t.addScale(a[3],.488603*n),t.addScale(a[4],n*i*1.092548),t.addScale(a[5],i*r*1.092548),t.addScale(a[6],.315392*(3*r*r-1)),t.addScale(a[7],n*r*1.092548),t.addScale(a[8],.546274*(n*n-i*i)),t},getIrradianceAt:function(e,t){var n=e.x,i=e.y,r=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.886227),t.addScale(a[1],1.023328*i),t.addScale(a[2],1.023328*r),t.addScale(a[3],1.023328*n),t.addScale(a[4],.858086*n*i),t.addScale(a[5],.858086*i*r),t.addScale(a[6],.743125*r*r-.247708),t.addScale(a[7],.858086*n*r),t.addScale(a[8],.429043*(n*n-i*i)),t},add:function(e){for(var t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this},scale:function(e){for(var t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this},lerp:function(e,t){for(var n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this},equals:function(e){for(var t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0},copy:function(e){return this.set(e.coefficients)},clone:function(){return(new this.constructor).copy(this)},fromArray:function(e,t){void 0===t&&(t=0);for(var n=this.coefficients,i=0;i<9;i++)n[i].fromArray(e,t+3*i);return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);for(var n=this.coefficients,i=0;i<9;i++)n[i].toArray(e,t+3*i);return e}}),Object.assign(ph,{getBasisAt:function(e,t){var n=e.x,i=e.y,r=e.z;t[0]=.282095,t[1]=.488603*i,t[2]=.488603*r,t[3]=.488603*n,t[4]=1.092548*n*i,t[5]=1.092548*i*r,t[6]=.315392*(3*r*r-1),t[7]=1.092548*n*r,t[8]=.546274*(n*n-i*i)}}),dh.prototype=Object.assign(Object.create(Bl.prototype),{constructor:dh,isLightProbe:!0,copy:function(e){return Bl.prototype.copy.call(this,e),this.sh.copy(e.sh),this.intensity=e.intensity,this},toJSON:function(e){return Bl.prototype.toJSON.call(this,e)}}),fh.prototype=Object.assign(Object.create(dh.prototype),{constructor:fh,isHemisphereLightProbe:!0,copy:function(e){return dh.prototype.copy.call(this,e),this},toJSON:function(e){return dh.prototype.toJSON.call(this,e)}}),mh.prototype=Object.assign(Object.create(dh.prototype),{constructor:mh,isAmbientLightProbe:!0,copy:function(e){return dh.prototype.copy.call(this,e),this},toJSON:function(e){return dh.prototype.toJSON.call(this,e)}});var gh=new Jt,vh=new Jt;function yh(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new dr,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new dr,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}function xh(e){this.autoStart=void 0===e||e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}Object.assign(yh.prototype,{update:function(e){var t,n,i,r,a,o,s=this._cache;s.focus===e.focus&&s.fov===e.fov&&s.aspect===e.aspect*this.aspect&&s.near===e.near&&s.far===e.far&&s.zoom===e.zoom&&s.eyeSep===this.eyeSep||(s.focus=e.focus,s.fov=e.fov,s.aspect=e.aspect*this.aspect,s.near=e.near,s.far=e.far,s.zoom=e.zoom,s.eyeSep=this.eyeSep,t=e.projectionMatrix.clone(),i=(n=s.eyeSep/2)*s.near/s.focus,r=s.near*Math.tan(Lt.DEG2RAD*s.fov*.5)/s.zoom,vh.elements[12]=-n,gh.elements[12]=n,a=-r*s.aspect+i,o=r*s.aspect+i,t.elements[0]=2*s.near/(o-a),t.elements[8]=(o+a)/(o-a),this.cameraL.projectionMatrix.copy(t),a=-r*s.aspect-i,o=r*s.aspect-i,t.elements[0]=2*s.near/(o-a),t.elements[8]=(o+a)/(o-a),this.cameraR.projectionMatrix.copy(t)),this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(vh),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(gh)}}),Object.assign(xh.prototype,{start:function(){this.startTime=("undefined"==typeof performance?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var e,t=0;return this.autoStart&&!this.running?(this.start(),0):(this.running&&(t=((e=("undefined"==typeof performance?Date:performance).now())-this.oldTime)/1e3,this.oldTime=e,this.elapsedTime+=t),t)}});var bh=new Dt,wh=new Pt,_h=new Dt,Mh=new Dt;function Sh(){mn.call(this),this.type="AudioListener",this.context=hh.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new xh}function Th(e){mn.call(this),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this._startedAt=0,this._pausedAt=0,this.filters=[]}Sh.prototype=Object.assign(Object.create(mn.prototype),{constructor:Sh,getInput:function(){return this.gain},removeFilter:function(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this},getFilter:function(){return this.filter},setFilter:function(e){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this},updateMatrixWorld:function(e){mn.prototype.updateMatrixWorld.call(this,e);var t,n=this.context.listener,i=this.up;this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(bh,wh,_h),Mh.set(0,0,-1).applyQuaternion(wh),n.positionX?(t=this.context.currentTime+this.timeDelta,n.positionX.linearRampToValueAtTime(bh.x,t),n.positionY.linearRampToValueAtTime(bh.y,t),n.positionZ.linearRampToValueAtTime(bh.z,t),n.forwardX.linearRampToValueAtTime(Mh.x,t),n.forwardY.linearRampToValueAtTime(Mh.y,t),n.forwardZ.linearRampToValueAtTime(Mh.z,t),n.upX.linearRampToValueAtTime(i.x,t),n.upY.linearRampToValueAtTime(i.y,t),n.upZ.linearRampToValueAtTime(i.z,t)):(n.setPosition(bh.x,bh.y,bh.z),n.setOrientation(Mh.x,Mh.y,Mh.z,i.x,i.y,i.z))}}),Th.prototype=Object.assign(Object.create(mn.prototype),{constructor:Th,getOutput:function(){return this.gain},setNodeSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this},setMediaElementSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this},setMediaStreamSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this},setBuffer:function(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(e){if(void 0===e&&(e=0),!0!==this.isPlaying){if(!1!==this.hasPlaybackControl){this._startedAt=this.context.currentTime+e;var t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._pausedAt+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}console.warn("THREE.Audio: this Audio has no playback control.")}else console.warn("THREE.Audio: Audio is already playing.")},pause:function(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._pausedAt=(this.context.currentTime-this._startedAt)*this.playbackRate,this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")},stop:function(){if(!1!==this.hasPlaybackControl)return this._pausedAt=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")},connect:function(){if(0<this.filters.length){this.source.connect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(0<this.filters.length){this.source.disconnect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(e){return e=e||[],!0===this.isPlaying?(this.disconnect(),this.filters=e,this.connect()):this.filters=e,this},setDetune:function(e){if(this.detune=e,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this},getDetune:function(){return this.detune},getFilter:function(){return this.getFilters()[0]},setFilter:function(e){return this.setFilters(e?[e]:[])},setPlaybackRate:function(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")},setLoopStart:function(e){return this.loopStart=e,this},setLoopEnd:function(e){return this.loopEnd=e,this},getVolume:function(){return this.gain.gain.value},setVolume:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}});var Eh=new Dt,Ah=new Pt,Lh=new Dt,Rh=new Dt;function Ph(e){Th.call(this,e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}function Ch(e,t){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=void 0!==t?t:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}function Oh(e,t,n){this.binding=e,this.valueSize=n;var i,r=Float64Array;switch(t){case"quaternion":i=this._slerp;break;case"string":case"bool":r=Array,i=this._select;break;default:i=this._lerp}this.buffer=new r(4*n),this._mixBufferRegion=i,this.cumulativeWeight=0,this.useCount=0,this.referenceCount=0}Ph.prototype=Object.assign(Object.create(Th.prototype),{constructor:Ph,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(e){return this.panner.refDistance=e,this},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(e){return this.panner.rolloffFactor=e,this},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(e){return this.panner.distanceModel=e,this},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(e){return this.panner.maxDistance=e,this},setDirectionalCone:function(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this},updateMatrixWorld:function(e){var t,n;mn.prototype.updateMatrixWorld.call(this,e),!0===this.hasPlaybackControl&&!1===this.isPlaying||(this.matrixWorld.decompose(Eh,Ah,Lh),Rh.set(0,0,1).applyQuaternion(Ah),(t=this.panner).positionX?(n=this.context.currentTime+this.listener.timeDelta,t.positionX.linearRampToValueAtTime(Eh.x,n),t.positionY.linearRampToValueAtTime(Eh.y,n),t.positionZ.linearRampToValueAtTime(Eh.z,n),t.orientationX.linearRampToValueAtTime(Rh.x,n),t.orientationY.linearRampToValueAtTime(Rh.y,n),t.orientationZ.linearRampToValueAtTime(Rh.z,n)):(t.setPosition(Eh.x,Eh.y,Eh.z),t.setOrientation(Rh.x,Rh.y,Rh.z)))}}),Object.assign(Ch.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var e=0,t=this.getFrequencyData(),n=0;n<t.length;n++)e+=t[n];return e/t.length}}),Object.assign(Oh.prototype,{accumulate:function(e,t){var n=this.buffer,i=this.valueSize,r=e*i+i,a=this.cumulativeWeight;if(0===a){for(var o=0;o!==i;++o)n[r+o]=n[o];a=t}else{var s=t/(a+=t);this._mixBufferRegion(n,r,0,s,i)}this.cumulativeWeight=a},apply:function(e){var t,n=this.valueSize,i=this.buffer,r=e*n+n,a=this.cumulativeWeight,o=this.binding;this.cumulativeWeight=0,a<1&&(t=3*n,this._mixBufferRegion(i,r,t,1-a,n));for(var s=n,c=n+n;s!==c;++s)if(i[s]!==i[s+n]){o.setValue(i,r);break}},saveOriginalState:function(){var e=this.binding,t=this.buffer,n=this.valueSize,i=3*n;e.getValue(t,i);for(var r=n,a=i;r!==a;++r)t[r]=t[i+r%n];this.cumulativeWeight=0},restoreOriginalState:function(){var e=3*this.valueSize;this.binding.setValue(this.buffer,e)},_select:function(e,t,n,i,r){if(.5<=i)for(var a=0;a!==r;++a)e[t+a]=e[n+a]},_slerp:function(e,t,n,i){Pt.slerpFlat(e,t,e,t,e,n,i)},_lerp:function(e,t,n,i,r){for(var a=1-i,o=0;o!==r;++o){var s=t+o;e[s]=e[s]*a+e[n+o]*i}}});var Dh="\\[\\]\\.:\\/",Ih=new RegExp("["+Dh+"]","g"),Nh="[^"+Dh+"]",zh="[^"+Dh.replace("\\.","")+"]",Bh=/((?:WC+[\/:])*)/.source.replace("WC",Nh),Uh=/(WCOD+)?/.source.replace("WCOD",zh),Fh=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Nh),Gh=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Nh),Hh=new RegExp("^"+Bh+Uh+Fh+Gh+"$"),Vh=["material","materials","bones"];function jh(e,t,n){var i=n||kh.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}function kh(e,t,n){this.path=t,this.parsedPath=n||kh.parseTrackName(t),this.node=kh.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e}function Wh(){this.uuid=Lt.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var e={};this._indicesByUUID=e;for(var t=0,n=arguments.length;t!==n;++t)e[arguments[t].uuid]=t;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var i=this;this.stats={objects:{get total(){return i._objects.length},get inUse(){return this.total-i.nCachedObjects_}},get bindingsPerObject(){return i._bindings.length}}}function qh(e,t,n){this._mixer=e,this._clip=t,this._localRoot=n||null;for(var i=t.tracks,r=i.length,a=new Array(r),o={endingStart:ot,endingEnd:ot},s=0;s!==r;++s){var c=i[s].createInterpolant(null);(a[s]=c).settings=o}this._interpolantSettings=o,this._interpolants=a,this._propertyBindings=new Array(r),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}function Xh(e){this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}function Yh(e){"string"==typeof e&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=arguments[1]),this.value=e}function Zh(e,t,n){Po.call(this,e,t),this.meshPerAttribute=n||1}function Jh(e,t,n,i){this.ray=new Gn(e,t),this.near=n||0,this.far=i||1/0,this.camera=null,this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function Qh(e,t){return e.distance-t.distance}function Kh(e,t,n,i){if(!1!==e.visible&&(e.raycast(t,n),!0===i))for(var r=e.children,a=0,o=r.length;a<o;a++)Kh(r[a],t,n,!0)}function $h(e,t,n){return this.radius=void 0!==e?e:1,this.phi=void 0!==t?t:0,this.theta=void 0!==n?n:0,this}function eu(e,t,n){return this.radius=void 0!==e?e:1,this.theta=void 0!==t?t:0,this.y=void 0!==n?n:0,this}Object.assign(jh.prototype,{getValue:function(e,t){this.bind();var n=this._targetGroup.nCachedObjects_,i=this._bindings[n];void 0!==i&&i.getValue(e,t)},setValue:function(e,t){for(var n=this._bindings,i=this._targetGroup.nCachedObjects_,r=n.length;i!==r;++i)n[i].setValue(e,t)},bind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()},unbind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}),Object.assign(kh,{Composite:jh,create:function(e,t,n){return e&&e.isAnimationObjectGroup?new kh.Composite(e,t,n):new kh(e,t,n)},sanitizeNodeName:function(e){return e.replace(/\s/g,"_").replace(Ih,"")},parseTrackName:function(e){var t=Hh.exec(e);if(!t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);var n,i={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=i.nodeName&&i.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r&&(n=i.nodeName.substring(r+1),-1!==Vh.indexOf(n)&&(i.nodeName=i.nodeName.substring(0,r),i.objectName=n)),null===i.propertyName||0===i.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i},findNode:function(e,a){if(!a||""===a||"root"===a||"."===a||-1===a||a===e.name||a===e.uuid)return e;if(e.skeleton){var t=e.skeleton.getBoneByName(a);if(void 0!==t)return t}if(e.children){var n=function e(t){for(var n=0;n<t.length;n++){var i=t[n];if(i.name===a||i.uuid===a)return i;var r=e(i.children);if(r)return r}return null}(e.children);if(n)return n}return null}}),Object.assign(kh.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(e,t){e[t]=this.node[this.propertyName]},function(e,t){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)e[t++]=n[i]},function(e,t){e[t]=this.resolvedProperty[this.propertyIndex]},function(e,t){this.resolvedProperty.toArray(e,t)}],SetterByBindingTypeAndVersioning:[[function(e,t){this.targetObject[this.propertyName]=e[t]},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)n[i]=e[t++]},function(e,t){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)n[i]=e[t++];this.targetObject.needsUpdate=!0},function(e,t){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)n[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty[this.propertyIndex]=e[t]},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty.fromArray(e,t)},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(e,t){this.bind(),this.getValue(e,t)},setValue:function(e,t){this.bind(),this.setValue(e,t)},bind:function(){var e=this.node,t=this.parsedPath,n=t.objectName,i=t.propertyName,r=t.propertyIndex;if(e||(e=kh.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,e){if(n){var a=t.objectIndex;switch(n){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(var o=0;o<e.length;o++)if(e[o].name===a){a=o;break}break;default:if(void 0===e[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[n]}if(void 0!==a){if(void 0===e[a])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[a]}}var s=e[i];if(void 0!==s){var c=this.Versioning.None;void 0!==(this.targetObject=e).needsUpdate?c=this.Versioning.NeedsUpdate:void 0!==e.matrixWorldNeedsUpdate&&(c=this.Versioning.MatrixWorldNeedsUpdate);var l=this.BindingType.Direct;if(void 0!==r){if("morphTargetInfluences"===i){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(e.geometry.isBufferGeometry){if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);for(o=0;o<this.node.geometry.morphAttributes.position.length;o++)if(e.geometry.morphAttributes.position[o].name===r){r=o;break}}else{if(!e.geometry.morphTargets)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphTargets.",this);for(o=0;o<this.node.geometry.morphTargets.length;o++)if(e.geometry.morphTargets[o].name===r){r=o;break}}}l=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=r}else void 0!==s.fromArray&&void 0!==s.toArray?(l=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(l=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=i;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][c]}else{var h=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+h+"."+i+" but it wasn't found.",e)}}else console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.")},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),Object.assign(kh.prototype,{_getValue_unbound:kh.prototype.getValue,_setValue_unbound:kh.prototype.setValue}),Object.assign(Wh.prototype,{isAnimationObjectGroup:!0,add:function(){for(var e=this._objects,t=e.length,n=this.nCachedObjects_,i=this._indicesByUUID,r=this._paths,a=this._parsedPaths,o=this._bindings,s=o.length,c=void 0,l=0,h=arguments.length;l!==h;++l){var u=arguments[l],p=u.uuid,d=i[p];if(void 0===d){d=t++,i[p]=d,e.push(u);for(var f=0,m=s;f!==m;++f)o[f].push(new kh(u,r[f],a[f]))}else if(d<n){c=e[d];var g=--n,v=e[g];for(e[i[v.uuid]=d]=v,e[i[p]=g]=u,f=0,m=s;f!==m;++f){var y=o[f],x=y[g],b=y[d];y[d]=x,void 0===b&&(b=new kh(u,r[f],a[f])),y[g]=b}}else e[d]!==c&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=n},remove:function(){for(var e=this._objects,t=this.nCachedObjects_,n=this._indicesByUUID,i=this._bindings,r=i.length,a=0,o=arguments.length;a!==o;++a){var s=arguments[a],c=s.uuid,l=n[c];if(void 0!==l&&t<=l){var h=t++,u=e[h];e[n[u.uuid]=l]=u,e[n[c]=h]=s;for(var p=0,d=r;p!==d;++p){var f=i[p],m=f[h],g=f[l];f[l]=m,f[h]=g}}}this.nCachedObjects_=t},uncache:function(){for(var e=this._objects,t=e.length,n=this.nCachedObjects_,i=this._indicesByUUID,r=this._bindings,a=r.length,o=0,s=arguments.length;o!==s;++o){var c=arguments[o].uuid,l=i[c];if(void 0!==l)if(delete i[c],l<n){var h,u=--n,p=e[u],d=e[h=--t];e[i[p.uuid]=l]=p,e[i[d.uuid]=u]=d,e.pop();for(var f=0,m=a;f!==m;++f){var g=(y=r[f])[u],v=y[h];y[l]=g,y[u]=v,y.pop()}}else{e[i[(d=e[h=--t]).uuid]=l]=d,e.pop();for(var y,f=0,m=a;f!==m;++f)(y=r[f])[l]=y[h],y.pop()}}this.nCachedObjects_=n},subscribe_:function(e,t){var n=this._bindingsIndicesByPath,i=n[e],r=this._bindings;if(void 0!==i)return r[i];var a=this._paths,o=this._parsedPaths,s=this._objects,c=s.length,l=this.nCachedObjects_,h=new Array(c),i=r.length;n[e]=i,a.push(e),o.push(t),r.push(h);for(var u=l,p=s.length;u!==p;++u){var d=s[u];h[u]=new kh(d,e,t)}return h},unsubscribe_:function(e){var t,n,i,r,a,o=this._bindingsIndicesByPath,s=o[e];void 0!==s&&(t=this._paths,n=this._parsedPaths,a=(i=this._bindings)[r=i.length-1],i[o[e[r]]=s]=a,i.pop(),n[s]=n[r],n.pop(),t[s]=t[r],t.pop())}}),Object.assign(qh.prototype,{play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(e){return this._startTime=e,this},setLoop:function(e,t){return this.loop=e,this.repetitions=t,this},setEffectiveWeight:function(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(e){return this._scheduleFading(e,0,1)},fadeOut:function(e){return this._scheduleFading(e,1,0)},crossFadeFrom:function(e,t,n){var i,r,a,o;return e.fadeOut(t),this.fadeIn(t),n&&(i=this._clip.duration,a=(r=e._clip.duration)/i,o=i/r,e.warp(1,a,t),this.warp(o,1,t)),this},crossFadeTo:function(e,t,n){return e.crossFadeFrom(this,t,n)},stopFading:function(){var e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},setEffectiveTimeScale:function(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(e){return this.timeScale=this._clip.duration/e,this.stopWarping()},syncWith:function(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()},halt:function(e){return this.warp(this._effectiveTimeScale,0,e)},warp:function(e,t,n){var i=this._mixer,r=i.time,a=this._timeScaleInterpolant,o=this.timeScale;null===a&&(a=i._lendControlInterpolant(),this._timeScaleInterpolant=a);var s=a.parameterPositions,c=a.sampleValues;return s[0]=r,s[1]=r+n,c[0]=e/o,c[1]=t/o,this},stopWarping:function(){var e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(e,t,n,i){if(this.enabled){var r=this._startTime;if(null!==r){var a=(e-r)*n;if(a<0||0===n)return;this._startTime=null,t=n*a}t*=this._updateTimeScale(e);var o=this._updateTime(t),s=this._updateWeight(e);if(0<s)for(var c=this._interpolants,l=this._propertyBindings,h=0,u=c.length;h!==u;++h)c[h].evaluate(o),l[h].accumulate(i,s)}else this._updateWeight(e)},_updateWeight:function(e){var t,n,i=0;return this.enabled&&(i=this.weight,null!==(t=this._weightInterpolant)&&(i*=n=t.evaluate(e)[0],e>t.parameterPositions[1]&&(this.stopFading(),0===n&&(this.enabled=!1)))),this._effectiveWeight=i},_updateTimeScale:function(e){var t,n=0;return this.paused||(n=this.timeScale,null!==(t=this._timeScaleInterpolant)&&(n*=t.evaluate(e)[0],e>t.parameterPositions[1]&&(this.stopWarping(),0===n?this.paused=!0:this.timeScale=n))),this._effectiveTimeScale=n},_updateTime:function(e){var t,n,i,r=this.time+e,a=this._clip.duration,o=this.loop,s=this._loopCount,c=2202===o;if(0===e)return-1!==s&&c&&1==(1&s)?a-r:r;if(2200===o){-1===s&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(a<=r)r=a;else{if(!(r<0)){this.time=r;break e}r=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else if(-1===s&&(0<=e?(s=0,this._setEndings(!0,0===this.repetitions,c)):this._setEndings(0===this.repetitions,!0,c)),a<=r||r<0?(r-=a*(t=Math.floor(r/a)),s+=Math.abs(t),(n=this.repetitions-s)<=0?(this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=0<e?a:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:0<e?1:-1})):(1==n?(i=e<0,this._setEndings(i,!i,c)):this._setEndings(!1,!1,c),this._loopCount=s,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:t}))):this.time=r,c&&1==(1&s))return a-r;return r},_setEndings:function(e,t,n){var i=this._interpolantSettings;n?(i.endingStart=st,i.endingEnd=st):(i.endingStart=e?this.zeroSlopeAtStart?st:ot:ct,i.endingEnd=t?this.zeroSlopeAtEnd?st:ot:ct)},_scheduleFading:function(e,t,n){var i=this._mixer,r=i.time,a=this._weightInterpolant;null===a&&(a=i._lendControlInterpolant(),this._weightInterpolant=a);var o=a.parameterPositions,s=a.sampleValues;return o[0]=r,s[0]=t,o[1]=r+e,s[1]=n,this}}),Xh.prototype=Object.assign(Object.create(Tt.prototype),{constructor:Xh,_bindAction:function(e,t){var n=e._localRoot||this._root,i=e._clip.tracks,r=i.length,a=e._propertyBindings,o=e._interpolants,s=n.uuid,c=this._bindingsByRootAndName,l=c[s];void 0===l&&(l={},c[s]=l);for(var h=0;h!==r;++h){var u=i[h],p=u.name;if(void 0!==(d=l[p]))a[h]=d;else{if(void 0!==(d=a[h])){null===d._cacheIndex&&(++d.referenceCount,this._addInactiveBinding(d,s,p));continue}var d,f=t&&t._propertyBindings[h].binding.parsedPath;++(d=new Oh(kh.create(n,p,f),u.ValueTypeName,u.getValueSize())).referenceCount,this._addInactiveBinding(d,s,p),a[h]=d}o[h].resultBuffer=d.buffer}},_activateAction:function(e){if(!this._isActiveAction(e)){var t,n,i;null===e._cacheIndex&&(t=(e._localRoot||this._root).uuid,n=e._clip.uuid,i=this._actionsByClip[n],this._bindAction(e,i&&i.knownActions[0]),this._addInactiveAction(e,n,t));for(var r=e._propertyBindings,a=0,o=r.length;a!==o;++a){var s=r[a];0==s.useCount++&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}},_deactivateAction:function(e){if(this._isActiveAction(e)){for(var t=e._propertyBindings,n=0,i=t.length;n!==i;++n){var r=t[n];0==--r.useCount&&(r.restoreOriginalState(),this._takeBackBinding(r))}this._takeBackAction(e)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}},_isActiveAction:function(e){var t=e._cacheIndex;return null!==t&&t<this._nActiveActions},_addInactiveAction:function(e,t,n){var i,r=this._actions,a=this._actionsByClip,o=a[t];void 0===o?(o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,a[t]=o):(i=o.knownActions,e._byClipCacheIndex=i.length,i.push(e)),e._cacheIndex=r.length,r.push(e),o.actionByRoot[n]=e},_removeInactiveAction:function(e){var t=this._actions,n=t[t.length-1],i=e._cacheIndex;t[n._cacheIndex=i]=n,t.pop(),e._cacheIndex=null;var r=e._clip.uuid,a=this._actionsByClip,o=a[r],s=o.knownActions,c=s[s.length-1],l=e._byClipCacheIndex;s[c._byClipCacheIndex=l]=c,s.pop(),e._byClipCacheIndex=null,delete o.actionByRoot[(e._localRoot||this._root).uuid],0===s.length&&delete a[r],this._removeInactiveBindingsForAction(e)},_removeInactiveBindingsForAction:function(e){for(var t=e._propertyBindings,n=0,i=t.length;n!==i;++n){var r=t[n];0==--r.referenceCount&&this._removeInactiveBinding(r)}},_lendAction:function(e){var t=this._actions,n=e._cacheIndex,i=this._nActiveActions++,r=t[i];t[e._cacheIndex=i]=e,t[r._cacheIndex=n]=r},_takeBackAction:function(e){var t=this._actions,n=e._cacheIndex,i=--this._nActiveActions,r=t[i];t[e._cacheIndex=i]=e,t[r._cacheIndex=n]=r},_addInactiveBinding:function(e,t,n){var i=this._bindingsByRootAndName,r=i[t],a=this._bindings;void 0===r&&(r={},i[t]=r),(r[n]=e)._cacheIndex=a.length,a.push(e)},_removeInactiveBinding:function(e){var t=this._bindings,n=e.binding,i=n.rootNode.uuid,r=n.path,a=this._bindingsByRootAndName,o=a[i],s=t[t.length-1],c=e._cacheIndex;t[s._cacheIndex=c]=s,t.pop(),delete o[r],0===Object.keys(o).length&&delete a[i]},_lendBinding:function(e){var t=this._bindings,n=e._cacheIndex,i=this._nActiveBindings++,r=t[i];t[e._cacheIndex=i]=e,t[r._cacheIndex=n]=r},_takeBackBinding:function(e){var t=this._bindings,n=e._cacheIndex,i=--this._nActiveBindings,r=t[i];t[e._cacheIndex=i]=e,t[r._cacheIndex=n]=r},_lendControlInterpolant:function(){var e=this._controlInterpolants,t=this._nActiveControlInterpolants++,n=e[t];return void 0===n&&(e[(n=new kc(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer)).__cacheIndex=t]=n),n},_takeBackControlInterpolant:function(e){var t=this._controlInterpolants,n=e.__cacheIndex,i=--this._nActiveControlInterpolants,r=t[i];t[e.__cacheIndex=i]=e,t[r.__cacheIndex=n]=r},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(e,t){var n=t||this._root,i=n.uuid,r="string"==typeof e?el.findByName(n,e):e,a=null!==r?r.uuid:e,o=this._actionsByClip[a],s=null;if(void 0!==o){var c=o.actionByRoot[i];if(void 0!==c)return c;s=o.knownActions[0],null===r&&(r=s._clip)}if(null===r)return null;var l=new qh(this,r,t);return this._bindAction(l,s),this._addInactiveAction(l,a,i),l},existingAction:function(e,t){var n=t||this._root,i=n.uuid,r="string"==typeof e?el.findByName(n,e):e,a=r?r.uuid:e,o=this._actionsByClip[a];return void 0!==o&&o.actionByRoot[i]||null},stopAllAction:function(){var e=this._actions,t=this._nActiveActions,n=this._bindings,i=this._nActiveBindings;this._nActiveActions=0;for(var r=this._nActiveBindings=0;r!==t;++r)e[r].reset();for(r=0;r!==i;++r)n[r].useCount=0;return this},update:function(e){e*=this.timeScale;for(var t=this._actions,n=this._nActiveActions,i=this.time+=e,r=Math.sign(e),a=this._accuIndex^=1,o=0;o!==n;++o)t[o]._update(i,e,r,a);for(var s=this._bindings,c=this._nActiveBindings,o=0;o!==c;++o)s[o].apply(a);return this},setTime:function(e){for(var t=this.time=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)},getRoot:function(){return this._root},uncacheClip:function(e){var t=this._actions,n=e.uuid,i=this._actionsByClip,r=i[n];if(void 0!==r){for(var a=r.knownActions,o=0,s=a.length;o!==s;++o){var c=a[o];this._deactivateAction(c);var l=c._cacheIndex,h=t[t.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,t[h._cacheIndex=l]=h,t.pop(),this._removeInactiveBindingsForAction(c)}delete i[n]}},uncacheRoot:function(e){var t,n=e.uuid,i=this._actionsByClip;for(t in i){var r=i[t].actionByRoot[n];void 0!==r&&(this._deactivateAction(r),this._removeInactiveAction(r))}var a=this._bindingsByRootAndName[n];if(void 0!==a)for(var o in a){var s=a[o];s.restoreOriginalState(),this._removeInactiveBinding(s)}},uncacheAction:function(e,t){var n=this.existingAction(e,t);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}),Yh.prototype.clone=function(){return new Yh(void 0===this.value.clone?this.value:this.value.clone())},Zh.prototype=Object.assign(Object.create(Po.prototype),{constructor:Zh,isInstancedInterleavedBuffer:!0,copy:function(e){return Po.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}}),Object.assign(Jh.prototype,{linePrecision:1,set:function(e,t){this.ray.set(e,t)},setFromCamera:function(e,t){t&&t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t&&t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(e,t,n){var i=n||[];return Kh(e,this,i,t),i.sort(Qh),i},intersectObjects:function(e,t,n){var i=n||[];if(!1===Array.isArray(e))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),i;for(var r=0,a=e.length;r<a;r++)Kh(e[r],this,i,t);return i.sort(Qh),i}}),Object.assign($h.prototype,{set:function(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this},makeSafe:function(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this},setFromVector3:function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)},setFromCartesianCoords:function(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(Lt.clamp(t/this.radius,-1,1))),this}}),Object.assign(eu.prototype,{set:function(e,t,n){return this.radius=e,this.theta=t,this.y=n,this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this},setFromVector3:function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)},setFromCartesianCoords:function(e,t,n){return this.radius=Math.sqrt(e*e+n*n),this.theta=Math.atan2(e,n),this.y=t,this}});var tu=new Rt;function nu(e,t){this.min=void 0!==e?e:new Rt(1/0,1/0),this.max=void 0!==t?t:new Rt(-1/0,-1/0)}Object.assign(nu.prototype,{set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(e,t){var n=tu.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(e){return void 0===e&&(console.warn("THREE.Box2: .getCenter() target is now required"),e=new Rt),this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){return void 0===e&&(console.warn("THREE.Box2: .getSize() target is now required"),e=new Rt),this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y},getParameter:function(e,t){return void 0===t&&(console.warn("THREE.Box2: .getParameter() target is now required"),t=new Rt),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)},clampPoint:function(e,t){return void 0===t&&(console.warn("THREE.Box2: .clampPoint() target is now required"),t=new Rt),t.copy(e).clamp(this.min,this.max)},distanceToPoint:function(e){return tu.copy(e).clamp(this.min,this.max).sub(e).length()},intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}});var iu=new Dt,ru=new Dt;function au(e,t){this.start=void 0!==e?e:new Dt,this.end=void 0!==t?t:new Dt}function ou(e){mn.call(this),this.material=e,this.render=function(){}}Object.assign(au.prototype,{set:function(e,t){return this.start.copy(e),this.end.copy(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.start.copy(e.start),this.end.copy(e.end),this},getCenter:function(e){return void 0===e&&(console.warn("THREE.Line3: .getCenter() target is now required"),e=new Dt),e.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(e){return void 0===e&&(console.warn("THREE.Line3: .delta() target is now required"),e=new Dt),e.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(e,t){return void 0===t&&(console.warn("THREE.Line3: .at() target is now required"),t=new Dt),this.delta(t).multiplyScalar(e).add(this.start)},closestPointToPointParameter:function(e,t){iu.subVectors(e,this.start),ru.subVectors(this.end,this.start);var n=ru.dot(ru),i=ru.dot(iu)/n;return t&&(i=Lt.clamp(i,0,1)),i},closestPointToPoint:function(e,t,n){var i=this.closestPointToPointParameter(e,t);return void 0===n&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),n=new Dt),this.delta(n).multiplyScalar(i).add(this.start)},applyMatrix4:function(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this},equals:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)}}),((ou.prototype=Object.create(mn.prototype)).constructor=ou).prototype.isImmediateRenderObject=!0;var su=new Dt,cu=new Dt,lu=new zt,hu=["a","b","c"];function uu(e,t,n,i){this.object=e,this.size=void 0!==t?t:1;var r=void 0!==n?n:16711680,a=void 0!==i?i:1,o=0,s=this.object.geometry;s&&s.isGeometry?o=3*s.faces.length:s&&s.isBufferGeometry&&(o=s.attributes.normal.count);var c=new Oi,l=new wi(2*o*3,3);c.setAttribute("position",l),us.call(this,c,new ns({color:r,linewidth:a})),this.matrixAutoUpdate=!1,this.update()}((uu.prototype=Object.create(us.prototype)).constructor=uu).prototype.update=function(){this.object.updateMatrixWorld(!0),lu.getNormalMatrix(this.object.matrixWorld);var e=this.object.matrixWorld,t=this.geometry.attributes.position,n=this.object.geometry;if(n&&n.isGeometry)for(var i=n.vertices,r=n.faces,a=0,o=0,s=r.length;o<s;o++)for(var c=r[o],l=0,h=c.vertexNormals.length;l<h;l++){var u=i[c[hu[l]]],p=c.vertexNormals[l];su.copy(u).applyMatrix4(e),cu.copy(p).applyMatrix3(lu).normalize().multiplyScalar(this.size).add(su),t.setXYZ(a,su.x,su.y,su.z),a+=1,t.setXYZ(a,cu.x,cu.y,cu.z),a+=1}else if(n&&n.isBufferGeometry)for(var d=n.attributes.position,f=n.attributes.normal,a=0,l=0,h=d.count;l<h;l++)su.set(d.getX(l),d.getY(l),d.getZ(l)).applyMatrix4(e),cu.set(f.getX(l),f.getY(l),f.getZ(l)),cu.applyMatrix3(lu).normalize().multiplyScalar(this.size).add(su),t.setXYZ(a,su.x,su.y,su.z),a+=1,t.setXYZ(a,cu.x,cu.y,cu.z),a+=1;t.needsUpdate=!0};var pu=new Dt;function du(e,t){mn.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t;for(var n=new Oi,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],r=0,a=1;r<32;r++,a++){var o=r/32*Math.PI*2,s=a/32*Math.PI*2;i.push(Math.cos(o),Math.sin(o),1,Math.cos(s),Math.sin(s),1)}n.setAttribute("position",new wi(i,3));var c=new ns({fog:!1});this.cone=new us(n,c),this.add(this.cone),this.update()}((du.prototype=Object.create(mn.prototype)).constructor=du).prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},du.prototype.update=function(){this.light.updateMatrixWorld();var e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),pu.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(pu),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)};var fu=new Dt,mu=new Jt,gu=new Jt;function vu(e){for(var t=function e(t){var n=[];t&&t.isBone&&n.push(t);for(var i=0;i<t.children.length;i++)n.push.apply(n,e(t.children[i]));return n}(e),n=new Oi,i=[],r=[],a=new ai(0,0,1),o=new ai(0,1,0),s=0;s<t.length;s++){var c=t[s];c.parent&&c.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),r.push(a.r,a.g,a.b),r.push(o.r,o.g,o.b))}n.setAttribute("position",new wi(i,3)),n.setAttribute("color",new wi(r,3));var l=new ns({vertexColors:2,depthTest:!1,depthWrite:!1,transparent:!0});us.call(this,n,l),this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}function yu(e,t,n){this.light=e,this.light.updateMatrixWorld(),this.color=n;var i=new fc(t,4,2),r=new pi({wireframe:!0,fog:!1});Ji.call(this,i,r),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}function xu(e,t){this.type="RectAreaLightHelper",this.light=e,this.color=t;var n=new Oi;n.setAttribute("position",new wi([1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],3)),n.computeBoundingSphere();var i=new ns({fog:!1});cs.call(this,n,i);var r=new Oi;r.setAttribute("position",new wi([1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],3)),r.computeBoundingSphere(),this.add(new Ji(r,new pi({side:_e,fog:!1}))),this.update()}((vu.prototype=Object.create(us.prototype)).constructor=vu).prototype.updateMatrixWorld=function(e){var t=this.bones,n=this.geometry,i=n.getAttribute("position");gu.getInverse(this.root.matrixWorld);for(var r=0,a=0;r<t.length;r++){var o=t[r];o.parent&&o.parent.isBone&&(mu.multiplyMatrices(gu,o.matrixWorld),fu.setFromMatrixPosition(mu),i.setXYZ(a,fu.x,fu.y,fu.z),mu.multiplyMatrices(gu,o.parent.matrixWorld),fu.setFromMatrixPosition(mu),i.setXYZ(a+1,fu.x,fu.y,fu.z),a+=2)}n.getAttribute("position").needsUpdate=!0,mn.prototype.updateMatrixWorld.call(this,e)},((yu.prototype=Object.create(Ji.prototype)).constructor=yu).prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},yu.prototype.update=function(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)},((xu.prototype=Object.create(cs.prototype)).constructor=xu).prototype.update=function(){var e,t;this.scale.set(.5*this.light.width,.5*this.light.height,1),void 0!==this.color?(this.material.color.set(this.color),this.children[0].material.color.set(this.color)):(this.material.color.copy(this.light.color).multiplyScalar(this.light.intensity),e=this.material.color,1<(t=Math.max(e.r,e.g,e.b))&&e.multiplyScalar(1/t),this.children[0].material.color.copy(this.material.color))},xu.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()};var bu=new Dt,wu=new ai,_u=new ai;function Mu(e,t,n){mn.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n;var i=new Os(t);i.rotateY(.5*Math.PI),this.material=new pi({wireframe:!0,fog:!1}),void 0===this.color&&(this.material.vertexColors=2);var r=i.getAttribute("position"),a=new Float32Array(3*r.count);i.setAttribute("color",new di(a,3)),this.add(new Ji(i,this.material)),this.update()}function Su(e,t){this.lightProbe=e,this.size=t;var i=new ur({defines:{GAMMA_OUTPUT:""},uniforms:{sh:{value:this.lightProbe.sh.coefficients},intensity:{value:this.lightProbe.intensity}},vertexShader:["varying vec3 vNormal;","void main() {","\tvNormal = normalize( normalMatrix * normal );","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["#define RECIPROCAL_PI 0.318309886","vec3 inverseTransformDirection( in vec3 normal, in mat4 matrix ) {","\t// matrix is assumed to be orthogonal","\treturn normalize( ( vec4( normal, 0.0 ) * matrix ).xyz );","}","vec3 linearToOutput( in vec3 a ) {","\t#ifdef GAMMA_OUTPUT","\t\treturn pow( a, vec3( 1.0 / float( GAMMA_FACTOR ) ) );","\t#else","\t\treturn a;","\t#endif","}","// source: https://graphics.stanford.edu/papers/envmap/envmap.pdf","vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {","\t// normal is assumed to have unit length","\tfloat x = normal.x, y = normal.y, z = normal.z;","\t// band 0","\tvec3 result = shCoefficients[ 0 ] * 0.886227;","\t// band 1","\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;","\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;","\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;","\t// band 2","\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;","\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;","\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );","\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;","\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );","\treturn result;","}","uniform vec3 sh[ 9 ]; // sh coefficients","uniform float intensity; // light probe intensity","varying vec3 vNormal;","void main() {","\tvec3 normal = normalize( vNormal );","\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );","\tvec3 irradiance = shGetIrradianceAt( worldNormal, sh );","\tvec3 outgoingLight = RECIPROCAL_PI * irradiance * intensity;","\toutgoingLight = linearToOutput( outgoingLight );","\tgl_FragColor = vec4( outgoingLight, 1.0 );","}"].join("\n")}),r=new fc(1,32,16);Ji.call(this,r,i),this.onBeforeRender()}function Tu(e,t,n,i){e=e||10,t=t||10,n=new ai(void 0!==n?n:4473924),i=new ai(void 0!==i?i:8947848);for(var r=t/2,a=e/t,o=e/2,s=[],c=[],l=0,h=0,u=-o;l<=t;l++,u+=a){s.push(-o,0,u,o,0,u),s.push(u,0,-o,u,0,o);var p=l===r?n:i;p.toArray(c,h),h+=3,p.toArray(c,h),h+=3,p.toArray(c,h),h+=3,p.toArray(c,h),h+=3}var d=new Oi;d.setAttribute("position",new wi(s,3)),d.setAttribute("color",new wi(c,3));var f=new ns({vertexColors:2});us.call(this,d,f)}function Eu(e,t,n,i,r,a){e=e||10,t=t||16,n=n||8,i=i||64,r=new ai(void 0!==r?r:4473924),a=new ai(void 0!==a?a:8947848);for(var o,s,c,l,h,u,p=[],d=[],f=0;f<=t;f++)c=f/t*(2*Math.PI),o=Math.sin(c)*e,s=Math.cos(c)*e,p.push(0,0,0),p.push(o,0,s),u=1&f?r:a,d.push(u.r,u.g,u.b),d.push(u.r,u.g,u.b);for(f=0;f<=n;f++)for(u=1&f?r:a,h=e-e/n*f,l=0;l<i;l++)c=l/i*(2*Math.PI),o=Math.sin(c)*h,s=Math.cos(c)*h,p.push(o,0,s),d.push(u.r,u.g,u.b),c=(l+1)/i*(2*Math.PI),o=Math.sin(c)*h,s=Math.cos(c)*h,p.push(o,0,s),d.push(u.r,u.g,u.b);var m=new Oi;m.setAttribute("position",new wi(p,3)),m.setAttribute("color",new wi(d,3));var g=new ns({vertexColors:2});us.call(this,m,g)}function Au(e,t,n,i){this.audio=e,this.range=t||1,this.divisionsInnerAngle=n||16,this.divisionsOuterAngle=i||2;var r=new Oi,a=this.divisionsInnerAngle+2*this.divisionsOuterAngle,o=new Float32Array(3*(3*a+3));r.setAttribute("position",new di(o,3));var s=new ns({color:65280}),c=new ns({color:16776960});cs.call(this,r,[c,s]),this.update()}((Mu.prototype=Object.create(mn.prototype)).constructor=Mu).prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},Mu.prototype.update=function(){var e=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{var t=e.geometry.getAttribute("color");wu.copy(this.light.color),_u.copy(this.light.groundColor);for(var n=0,i=t.count;n<i;n++){var r=n<i/2?wu:_u;t.setXYZ(n,r.r,r.g,r.b)}t.needsUpdate=!0}e.lookAt(bu.setFromMatrixPosition(this.light.matrixWorld).negate())},((Su.prototype=Object.create(Ji.prototype)).constructor=Su).prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},Su.prototype.onBeforeRender=function(){this.position.copy(this.lightProbe.position),this.scale.set(1,1,1).multiplyScalar(this.size),this.material.uniforms.intensity.value=this.lightProbe.intensity},Tu.prototype=Object.assign(Object.create(us.prototype),{constructor:Tu,copy:function(e){return us.prototype.copy.call(this,e),this.geometry.copy(e.geometry),this.material.copy(e.material),this},clone:function(){return(new this.constructor).copy(this)}}),(Eu.prototype=Object.create(us.prototype)).constructor=Eu,((Au.prototype=Object.create(cs.prototype)).constructor=Au).prototype.update=function(){var a,o,e=this.audio,s=this.range,t=this.divisionsInnerAngle,n=this.divisionsOuterAngle,i=Lt.degToRad(e.panner.coneInnerAngle),r=Lt.degToRad(e.panner.coneOuterAngle),c=i/2,l=r/2,h=0,u=0,p=this.geometry,d=p.attributes.position;function f(e,t,n,i){var r=(t-e)/n;for(d.setXYZ(h,0,0,0),u++,a=e;a<t;a+=r)o=h+u,d.setXYZ(o,Math.sin(a)*s,0,Math.cos(a)*s),d.setXYZ(o+1,Math.sin(Math.min(a+r,t))*s,0,Math.cos(Math.min(a+r,t))*s),d.setXYZ(o+2,0,0,0),u+=3;p.addGroup(h,u,i),h+=u,u=0}p.clearGroups(),f(-l,-c,n,0),f(-c,c,t,1),f(c,l,n,0),d.needsUpdate=!0,i===r&&(this.material[0].visible=!1)},Au.prototype.dispose=function(){this.geometry.dispose(),this.material[0].dispose(),this.material[1].dispose()};var Lu=new Dt,Ru=new Dt,Pu=new zt;function Cu(e,t,n,i){this.object=e,this.size=void 0!==t?t:1;var r=void 0!==n?n:16776960,a=void 0!==i?i:1,o=0,s=this.object.geometry;s&&s.isGeometry?o=s.faces.length:console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.");var c=new Oi,l=new wi(2*o*3,3);c.setAttribute("position",l),us.call(this,c,new ns({color:r,linewidth:a})),this.matrixAutoUpdate=!1,this.update()}((Cu.prototype=Object.create(us.prototype)).constructor=Cu).prototype.update=function(){this.object.updateMatrixWorld(!0),Pu.getNormalMatrix(this.object.matrixWorld);for(var e=this.object.matrixWorld,t=this.geometry.attributes.position,n=this.object.geometry,i=n.vertices,r=n.faces,a=0,o=0,s=r.length;o<s;o++){var c=r[o],l=c.normal;Lu.copy(i[c.a]).add(i[c.b]).add(i[c.c]).divideScalar(3).applyMatrix4(e),Ru.copy(l).applyMatrix3(Pu).normalize().multiplyScalar(this.size).add(Lu),t.setXYZ(a,Lu.x,Lu.y,Lu.z),a+=1,t.setXYZ(a,Ru.x,Ru.y,Ru.z),a+=1}t.needsUpdate=!0};var Ou=new Dt,Du=new Dt,Iu=new Dt;function Nu(e,t,n){mn.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,void 0===t&&(t=1);var i=new Oi;i.setAttribute("position",new wi([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));var r=new ns({fog:!1});this.lightPlane=new cs(i,r),this.add(this.lightPlane),(i=new Oi).setAttribute("position",new wi([0,0,0,0,0,1],3)),this.targetLine=new cs(i,r),this.add(this.targetLine),this.update()}((Nu.prototype=Object.create(mn.prototype)).constructor=Nu).prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()},Nu.prototype.update=function(){Ou.setFromMatrixPosition(this.light.matrixWorld),Du.setFromMatrixPosition(this.light.target.matrixWorld),Iu.subVectors(Du,Ou),this.lightPlane.lookAt(Du),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Du),this.targetLine.scale.z=Iu.length()};var zu=new Dt,Bu=new pr;function Uu(e){var t=new Oi,n=new ns({color:16777215,vertexColors:1}),i=[],r=[],a={},o=new ai(16755200),s=new ai(16711680),c=new ai(43775),l=new ai(16777215),h=new ai(3355443);function u(e,t,n){p(e,n),p(t,n)}function p(e,t){i.push(0,0,0),r.push(t.r,t.g,t.b),void 0===a[e]&&(a[e]=[]),a[e].push(i.length/3-1)}u("n1","n2",o),u("n2","n4",o),u("n4","n3",o),u("n3","n1",o),u("f1","f2",o),u("f2","f4",o),u("f4","f3",o),u("f3","f1",o),u("n1","f1",o),u("n2","f2",o),u("n3","f3",o),u("n4","f4",o),u("p","n1",s),u("p","n2",s),u("p","n3",s),u("p","n4",s),u("u1","u2",c),u("u2","u3",c),u("u3","u1",c),u("c","t",l),u("p","c",h),u("cn1","cn2",h),u("cn3","cn4",h),u("cf1","cf2",h),u("cf3","cf4",h),t.setAttribute("position",new wi(i,3)),t.setAttribute("color",new wi(r,3)),us.call(this,t,n),this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=a,this.update()}function Fu(e,t,n,i,r,a,o){zu.set(r,a,o).unproject(i);var s=t[e];if(void 0!==s)for(var c=n.getAttribute("position"),l=0,h=s.length;l<h;l++)c.setXYZ(s[l],zu.x,zu.y,zu.z)}((Uu.prototype=Object.create(us.prototype)).constructor=Uu).prototype.update=function(){var e=this.geometry,t=this.pointMap;Bu.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Fu("c",t,e,Bu,0,0,-1),Fu("t",t,e,Bu,0,0,1),Fu("n1",t,e,Bu,-1,-1,-1),Fu("n2",t,e,Bu,1,-1,-1),Fu("n3",t,e,Bu,-1,1,-1),Fu("n4",t,e,Bu,1,1,-1),Fu("f1",t,e,Bu,-1,-1,1),Fu("f2",t,e,Bu,1,-1,1),Fu("f3",t,e,Bu,-1,1,1),Fu("f4",t,e,Bu,1,1,1),Fu("u1",t,e,Bu,.7,1.1,-1),Fu("u2",t,e,Bu,-.7,1.1,-1),Fu("u3",t,e,Bu,0,2,-1),Fu("cf1",t,e,Bu,-1,0,1),Fu("cf2",t,e,Bu,1,0,1),Fu("cf3",t,e,Bu,0,-1,1),Fu("cf4",t,e,Bu,0,1,1),Fu("cn1",t,e,Bu,-1,0,-1),Fu("cn2",t,e,Bu,1,0,-1),Fu("cn3",t,e,Bu,0,-1,-1),Fu("cn4",t,e,Bu,0,1,-1),e.getAttribute("position").needsUpdate=!0};var Gu=new Rn;function Hu(e,t){this.object=e,void 0===t&&(t=16776960);var n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(24),r=new Oi;r.setIndex(new di(n,1)),r.setAttribute("position",new di(i,3)),us.call(this,r,new ns({color:t})),this.matrixAutoUpdate=!1,this.update()}function Vu(e,t){this.type="Box3Helper",this.box=e,t=t||16776960;var n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Oi;i.setIndex(new di(n,1)),i.setAttribute("position",new wi([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),us.call(this,i,new ns({color:t})),this.geometry.computeBoundingSphere()}function ju(e,t,n){this.type="PlaneHelper",this.plane=e,this.size=void 0===t?1:t;var i=void 0!==n?n:16776960,r=new Oi;r.setAttribute("position",new wi([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3)),r.computeBoundingSphere(),cs.call(this,r,new ns({color:i}));var a=new Oi;a.setAttribute("position",new wi([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3)),a.computeBoundingSphere(),this.add(new Ji(a,new pi({color:i,opacity:.2,transparent:!0,depthWrite:!1})))}((Hu.prototype=Object.create(us.prototype)).constructor=Hu).prototype.update=function(e){var t,n,i,r;void 0!==e&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&Gu.setFromObject(this.object),Gu.isEmpty()||(t=Gu.min,n=Gu.max,(r=(i=this.geometry.attributes.position).array)[0]=n.x,r[1]=n.y,r[2]=n.z,r[3]=t.x,r[4]=n.y,r[5]=n.z,r[6]=t.x,r[7]=t.y,r[8]=n.z,r[9]=n.x,r[10]=t.y,r[11]=n.z,r[12]=n.x,r[13]=n.y,r[14]=t.z,r[15]=t.x,r[16]=n.y,r[17]=t.z,r[18]=t.x,r[19]=t.y,r[20]=t.z,r[21]=n.x,r[22]=t.y,r[23]=t.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere())},Hu.prototype.setFromObject=function(e){return this.object=e,this.update(),this},Hu.prototype.copy=function(e){return us.prototype.copy.call(this,e),this.object=e.object,this},Hu.prototype.clone=function(){return(new this.constructor).copy(this)},((Vu.prototype=Object.create(us.prototype)).constructor=Vu).prototype.updateMatrixWorld=function(e){var t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),mn.prototype.updateMatrixWorld.call(this,e))},((ju.prototype=Object.create(cs.prototype)).constructor=ju).prototype.updateMatrixWorld=function(e){var t=-this.plane.constant;Math.abs(t)<1e-8&&(t=1e-8),this.scale.set(.5*this.size,.5*this.size,t),this.children[0].material.side=t<0?_e:O,this.lookAt(this.plane.normal),mn.prototype.updateMatrixWorld.call(this,e)};var ku,Wu,qu=new Dt;function Xu(e,t,n,i,r,a){mn.call(this),void 0===e&&(e=new Dt(0,0,1)),void 0===t&&(t=new Dt(0,0,0)),void 0===n&&(n=1),void 0===i&&(i=16776960),void 0===r&&(r=.2*n),void 0===a&&(a=.2*r),void 0===ku&&((ku=new Oi).setAttribute("position",new wi([0,0,0,0,1,0],3)),(Wu=new Sc(0,.5,1,5,1)).translate(0,-.5,0)),this.position.copy(t),this.line=new cs(ku,new ns({color:i})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Ji(Wu,new pi({color:i})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,r,a)}function Yu(e){var t=[0,0,0,e=e||1,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=new Oi;n.setAttribute("position",new wi(t,3)),n.setAttribute("color",new wi([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));var i=new ns({vertexColors:2});us.call(this,n,i)}function Zu(e){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),_l.call(this,e),this.type="catmullrom",this.closed=!0}function Ju(e){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),_l.call(this,e),this.type="catmullrom"}function Qu(e){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),_l.call(this,e),this.type="catmullrom"}((Xu.prototype=Object.create(mn.prototype)).constructor=Xu).prototype.setDirection=function(e){var t;.99999<e.y?this.quaternion.set(0,0,0,1):e.y<-.99999?this.quaternion.set(1,0,0,0):(qu.set(e.z,0,-e.x).normalize(),t=Math.acos(e.y),this.quaternion.setFromAxisAngle(qu,t))},Xu.prototype.setLength=function(e,t,n){void 0===t&&(t=.2*e),void 0===n&&(n=.2*t),this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()},Xu.prototype.setColor=function(e){this.line.material.color.set(e),this.cone.material.color.set(e)},Xu.prototype.copy=function(e){return mn.prototype.copy.call(this,e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this},Xu.prototype.clone=function(){return(new this.constructor).copy(this)},(Yu.prototype=Object.create(us.prototype)).constructor=Yu,fl.create=function(e,t){return console.log("THREE.Curve.create() has been deprecated"),e.prototype=Object.create(fl.prototype),(e.prototype.constructor=e).prototype.getPoint=t,e},Object.assign(Il.prototype,{createPointsGeometry:function(e){console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var t=this.getPoints(e);return this.createGeometry(t)},createSpacedPointsGeometry:function(e){console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var t=this.getSpacedPoints(e);return this.createGeometry(t)},createGeometry:function(e){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");for(var t=new ir,n=0,i=e.length;n<i;n++){var r=e[n];t.vertices.push(new Dt(r.x,r.y,r.z||0))}return t}}),Object.assign(Nl.prototype,{fromPoints:function(e){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(e)}}),Zu.prototype=Object.create(_l.prototype),Ju.prototype=Object.create(_l.prototype),Qu.prototype=Object.create(_l.prototype),Object.assign(Qu.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}}),Tu.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},vu.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Object.assign(al.prototype,{extractUrlBase:function(e){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),Jl.extractUrlBase(e)}}),al.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}},Object.assign(th.prototype,{setTexturePath:function(e){return console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(e)}}),Object.assign(nu.prototype,{center:function(e){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},size:function(e){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(e)}}),Object.assign(Rn.prototype,{center:function(e){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionSphere:function(e){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},size:function(e){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(e)}}),au.prototype.center=function(e){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(e)},Object.assign(Lt,{random16:function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},nearestPowerOfTwo:function(e){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),Lt.floorPowerOfTwo(e)},nextPowerOfTwo:function(e){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),Lt.ceilPowerOfTwo(e)}}),Object.assign(zt.prototype,{flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},multiplyVector3:function(e){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBuffer:function(e){return console.warn("THREE.Matrix3: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(e)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}}),Object.assign(Jt.prototype,{extractPosition:function(e){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(e)},flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},getPosition:function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),(new Dt).setFromMatrixColumn(this,3)},setRotationFromQuaternion:function(e){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(e)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(e){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector4:function(e){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(e){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),e.transformDirection(this)},crossVector:function(e){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBuffer:function(e){return console.warn("THREE.Matrix4: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(e)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(e,t,n,i,r,a){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(e,t,i,n,r,a)}}),kn.prototype.isIntersectionLine=function(e){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(e)},Pt.prototype.multiplyVector3=function(e){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),e.applyQuaternion(this)},Object.assign(Gn.prototype,{isIntersectionBox:function(e){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionPlane:function(e){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(e)},isIntersectionSphere:function(e){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)}}),Object.assign(ti.prototype,{area:function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},barycoordFromPoint:function(e,t){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(e,t)},midpoint:function(e){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(e)},normal:function(e){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(e)},plane:function(e){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(e)}}),Object.assign(ti,{barycoordFromPoint:function(e,t,n,i,r){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),ti.getBarycoord(e,t,n,i,r)},normal:function(e,t,n,i){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),ti.getNormal(e,t,n,i)}}),Object.assign(zl.prototype,{extractAllPoints:function(e){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(e)},extrude:function(e){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new sc(this,e)},makeGeometry:function(e){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new xc(this,e)}}),Object.assign(Rt.prototype,{fromAttribute:function(e,t,n){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},distanceToManhattan:function(e){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},lengthManhattan:function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(Dt.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(e){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(e)},getScaleFromMatrix:function(e){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(e)},getColumnFromMatrix:function(e,t){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(t,e)},applyProjection:function(e){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(e)},fromAttribute:function(e,t,n){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},distanceToManhattan:function(e){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},lengthManhattan:function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(Gt.prototype,{fromAttribute:function(e,t,n){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},lengthManhattan:function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(ir.prototype,{computeTangents:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")}}),Object.assign(mn.prototype,{getChildByName:function(e){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(e)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(e,t){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(t,e)},getWorldRotation:function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")}}),Object.defineProperties(mn.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(e){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=e}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Object.defineProperties(Zo.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),Object.defineProperty($o.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}}),Jo.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},Object.defineProperty(fl.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(e){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=e}}),dr.prototype.setLens=function(e,t){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==t&&(this.filmGauge=t),this.setFocalLength(e)},Object.defineProperties(Bl.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(e){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=e}},shadowCameraLeft:{set:function(e){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=e}},shadowCameraRight:{set:function(e){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=e}},shadowCameraTop:{set:function(e){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=e}},shadowCameraBottom:{set:function(e){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=e}},shadowCameraNear:{set:function(e){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=e}},shadowCameraFar:{set:function(e){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=e}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(e){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=e}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(e){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=e}},shadowMapHeight:{set:function(e){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=e}}}),Object.defineProperties(di.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===St},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(St)}}}),Object.assign(di.prototype,{setDynamic:function(e){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===e?St:Mt),this},copyIndicesArray:function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},setArray:function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}}),Object.assign(Oi.prototype,{addIndex:function(e){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(e)},addAttribute:function(e,t,n){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),t&&t.isBufferAttribute||t&&t.isInterleavedBufferAttribute?"index"===e?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(t),this):this.setAttribute(e,t):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(e,new di(t,n)))},addDrawCall:function(e,t,n){void 0!==n&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(e,t)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},removeAttribute:function(e){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(e)}}),Object.defineProperties(Oi.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.defineProperties(Po.prototype,{dynamic:{get:function(){return console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.usage===St},set:function(e){console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.setUsage(e)}}}),Object.assign(Po.prototype,{setDynamic:function(e){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===e?St:Mt),this},setArray:function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}}),Object.assign(cc.prototype,{getArrays:function(){console.error("THREE.ExtrudeBufferGeometry: .getArrays() has been removed.")},addShapeList:function(){console.error("THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.")},addShape:function(){console.error("THREE.ExtrudeBufferGeometry: .addShape() has been removed.")}}),Object.defineProperties(Yh.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),Object.defineProperties(ui.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new ai}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(e){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===e}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(e){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=e}}}),Object.defineProperties(Ic.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(ur.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(e){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=e}}}),Object.assign(Ao.prototype,{clearTarget:function(e,t,n,i){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(e),this.clear(t,n,i)},animate:function(e){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(e)},getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},resetGLState:function(){return this.state.reset()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(e){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(e)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},allocTextureUnit:function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},setTexture:function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},setTexture2D:function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},setTextureCube:function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},getActiveMipMapLevel:function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()}}),Object.defineProperties(Ao.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=e}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=e}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}}}),Object.defineProperties(po.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(mr.prototype,{activeCubeFace:{set:function(){console.warn("THREE.WebGLRenderTargetCube: .activeCubeFace has been removed. It is now the second parameter of WebGLRenderer.setRenderTarget().")}},activeMipMapLevel:{set:function(){console.warn("THREE.WebGLRenderTargetCube: .activeMipMapLevel has been removed. It is now the third parameter of WebGLRenderer.setRenderTarget().")}}}),Object.defineProperties(Ht.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=e}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=e}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=e}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=e}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(e){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=e}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(e){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=e}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(e){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=e}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(e){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=e}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(e){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=e}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(e){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=e}}}),Object.defineProperties(To.prototype,{standing:{set:function(){console.warn("THREE.WebVRManager: .standing has been removed.")}},userHeight:{set:function(){console.warn("THREE.WebVRManager: .userHeight has been removed.")}}}),Object.defineProperties(Th.prototype,{load:{value:function(e){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var t=this;return(new uh).load(e,function(e){t.setBuffer(e)}),this}},startTime:{set:function(){console.warn("THREE.Audio: .startTime is now .play( delay ).")}}}),Ch.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},fr.prototype.updateCubeMap=function(e,t){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(e,t)};var Ku={merge:function(e,t,n){var i;console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead."),t.isMesh&&(t.matrixAutoUpdate&&t.updateMatrix(),i=t.matrix,t=t.geometry),e.merge(t,i,n)},center:function(e){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),e.center()}};Bt.crossOrigin=void 0,Bt.loadTexture=function(e,t,n,i){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var r=new dl;r.setCrossOrigin(this.crossOrigin);var a=r.load(e,n,void 0,i);return t&&(a.mapping=t),a},Bt.loadTextureCube=function(e,t,n,i){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var r=new pl;r.setCrossOrigin(this.crossOrigin);var a=r.load(e,n,void 0,i);return t&&(a.mapping=t),a},Bt.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},Bt.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};var $u={createMultiMaterialObject:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")},detach:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")},attach:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")}};"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"110"}})),e.ACESFilmicToneMapping=Ne,e.AddEquation=re,e.AddOperation=Re,e.AdditiveBlending=ee,e.AlphaFormat=u,e.AlwaysDepth=we,e.AlwaysStencilFunc=_t,e.AmbientLight=Xl,e.AmbientLightProbe=mh,e.AnimationClip=el,e.AnimationLoader=cl,e.AnimationMixer=Xh,e.AnimationObjectGroup=Wh,e.AnimationUtils=Hc,e.ArcCurve=gl,e.ArrayCamera=bo,e.ArrowHelper=Xu,e.Audio=Th,e.AudioAnalyser=Ch,e.AudioContext=hh,e.AudioListener=Sh,e.AudioLoader=uh,e.AxesHelper=Yu,e.AxisHelper=function(e){return console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper."),new Yu(e)},e.BackSide=_e,e.BasicDepthPacking=vt,e.BasicShadowMap=0,e.BinaryTextureLoader=function(e){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new hl(e)},e.Bone=es,e.BooleanKeyframeTrack=Xc,e.BoundingBoxHelper=function(e,t){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new Hu(e,t)},e.Box2=nu,e.Box3=Rn,e.Box3Helper=Vu,e.BoxBufferGeometry=ar,e.BoxGeometry=rr,e.BoxHelper=Hu,e.BufferAttribute=di,e.BufferGeometry=Oi,e.BufferGeometryLoader=$l,e.ByteType=r,e.Cache=nl,e.Camera=pr,e.CameraHelper=Uu,e.CanvasRenderer=function(){console.error("THREE.CanvasRenderer has been removed")},e.CanvasTexture=_s,e.CatmullRomCurve3=_l,e.CineonToneMapping=Ie,e.CircleBufferGeometry=Lc,e.CircleGeometry=Ac,e.ClampToEdgeWrapping=H,e.Clock=xh,e.ClosedSplineCurve3=Zu,e.Color=ai,e.ColorKeyframeTrack=Yc,e.CompressedTexture=ws,e.CompressedTextureLoader=ll,e.ConeBufferGeometry=Ec,e.ConeGeometry=Tc,e.CubeCamera=fr,e.CubeGeometry=rr,e.CubeReflectionMapping=ze,e.CubeRefractionMapping=Be,e.CubeTexture=Ur,e.CubeTextureLoader=pl,e.CubeUVReflectionMapping=He,e.CubeUVRefractionMapping=Ve,e.CubicBezierCurve=El,e.CubicBezierCurve3=Al,e.CubicInterpolant=jc,e.CullFaceBack=Z,e.CullFaceFront=J,e.CullFaceFrontBack=3,e.CullFaceNone=Y,e.Curve=fl,e.CurvePath=Il,e.CustomBlending=ie,e.CylinderBufferGeometry=Sc,e.CylinderGeometry=Mc,e.Cylindrical=eu,e.DataTexture=gr,e.DataTexture2DArray=Fr,e.DataTexture3D=Gr,e.DataTextureLoader=hl,e.DecrementStencilOp=7683,e.DecrementWrapStencilOp=34056,e.DefaultLoadingManager=rl,e.DepthFormat=it,e.DepthStencilFormat=rt,e.DepthTexture=Ms,e.DirectionalLight=ql,e.DirectionalLightHelper=Nu,e.DirectionalLightShadow=Wl,e.DiscreteInterpolant=Wc,e.DodecahedronBufferGeometry=zs,e.DodecahedronGeometry=Ns,e.DoubleSide=Q,e.DstAlphaFactor=me,e.DstColorFactor=ve,e.DynamicBufferAttribute=function(e,t){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead."),new di(e,t).setDynamic(!0)},e.DynamicCopyUsage=35050,e.DynamicDrawUsage=St,e.DynamicReadUsage=35049,e.EdgesGeometry=_c,e.EdgesHelper=function(e,t){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new us(new _c(e.geometry),new ns({color:void 0!==t?t:16777215}))},e.EllipseCurve=ml,e.EqualDepth=Te,e.EqualStencilFunc=514,e.EquirectangularReflectionMapping=Ue,e.EquirectangularRefractionMapping=Fe,e.Euler=$t,e.EventDispatcher=Tt,e.ExtrudeBufferGeometry=cc,e.ExtrudeGeometry=sc,e.Face3=li,e.Face4=function(e,t,n,i,r,a,o){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new li(e,t,n,r,a,o)},e.FaceColors=1,e.FaceNormalsHelper=Cu,e.FileLoader=sl,e.FlatShading=1,e.Float32Attribute=function(e,t){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new wi(e,t)},e.Float32BufferAttribute=wi,e.Float64Attribute=function(e,t){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new _i(e,t)},e.Float64BufferAttribute=_i,e.FloatType=Ke,e.Fog=Ro,e.FogExp2=Lo,e.Font=ch,e.FontLoader=lh,e.FrontFaceDirectionCCW=1,e.FrontFaceDirectionCW=0,e.FrontSide=O,e.Frustum=xr,e.GammaEncoding=ut,e.Geometry=ir,e.GeometryUtils=Ku,e.GreaterDepth=Ae,e.GreaterEqualDepth=Ee,e.GreaterEqualStencilFunc=518,e.GreaterStencilFunc=516,e.GridHelper=Tu,e.Group=xo,e.HalfFloatType=$e,e.HemisphereLight=Ul,e.HemisphereLightHelper=Mu,e.HemisphereLightProbe=fh,e.IcosahedronBufferGeometry=Is,e.IcosahedronGeometry=Ds,e.ImageBitmapLoader=oh,e.ImageLoader=ul,e.ImageUtils=Bt,e.ImmediateRenderObject=ou,e.IncrementStencilOp=7682,e.IncrementWrapStencilOp=34055,e.InstancedBufferAttribute=Kl,e.InstancedBufferGeometry=Ql,e.InstancedInterleavedBuffer=Zh,e.InstancedMesh=ts,e.Int16Attribute=function(e,t){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new vi(e,t)},e.Int16BufferAttribute=vi,e.Int32Attribute=function(e,t){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new xi(e,t)},e.Int32BufferAttribute=xi,e.Int8Attribute=function(e,t){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new fi(e,t)},e.Int8BufferAttribute=fi,e.IntType=s,e.InterleavedBuffer=Po,e.InterleavedBufferAttribute=Co,e.Interpolant=Vc,e.InterpolateDiscrete=i,e.InterpolateLinear=at,e.InterpolateSmooth=2302,e.InvertStencilOp=5386,e.JSONLoader=function(){console.error("THREE.JSONLoader has been removed.")},e.KeepStencilOp=wt,e.KeyframeTrack=qc,e.LOD=Zo,e.LatheBufferGeometry=yc,e.LatheGeometry=vc,e.Layers=en,e.LensFlare=function(){console.error("THREE.LensFlare has been moved to /examples/js/objects/Lensflare.js")},e.LessDepth=Me,e.LessEqualDepth=Se,e.LessEqualStencilFunc=515,e.LessStencilFunc=513,e.Light=Bl,e.LightProbe=dh,e.LightProbeHelper=Su,e.LightShadow=Fl,e.Line=cs,e.Line3=au,e.LineBasicMaterial=ns,e.LineCurve=Ll,e.LineCurve3=Rl,e.LineDashedMaterial=Fc,e.LineLoop=ps,e.LinePieces=1,e.LineSegments=us,e.LineStrip=0,e.LinearEncoding=ht,e.LinearFilter=qe,e.LinearInterpolant=kc,e.LinearMipMapLinearFilter=1008,e.LinearMipMapNearestFilter=1007,e.LinearMipmapLinearFilter=Ye,e.LinearMipmapNearestFilter=Xe,e.LinearToneMapping=Ce,e.Loader=al,e.LoaderUtils=Jl,e.LoadingManager=il,e.LogLuvEncoding=dt,e.LoopOnce=2200,e.LoopPingPong=2202,e.LoopRepeat=2201,e.LuminanceAlphaFormat=d,e.LuminanceFormat=p,e.MOUSE={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},e.Material=ui,e.MaterialLoader=Zl,e.Math=Lt,e.Matrix3=zt,e.Matrix4=Jt,e.MaxEquation=ce,e.Mesh=Ji,e.MeshBasicMaterial=pi,e.MeshDepthMaterial=co,e.MeshDistanceMaterial=lo,e.MeshFaceMaterial=function(e){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),e},e.MeshLambertMaterial=Bc,e.MeshMatcapMaterial=Uc,e.MeshNormalMaterial=zc,e.MeshPhongMaterial=Ic,e.MeshPhysicalMaterial=Dc,e.MeshStandardMaterial=Oc,e.MeshToonMaterial=Nc,e.MinEquation=se,e.MirroredRepeatWrapping=V,e.MixOperation=X,e.MultiMaterial=function(e){return void 0===e&&(e=[]),console.warn("THREE.MultiMaterial has been removed. Use an Array instead."),e.isMultiMaterial=!0,(e.materials=e).clone=function(){return e.slice()},e},e.MultiplyBlending=ne,e.MultiplyOperation=q,e.NearestFilter=je,e.NearestMipMapLinearFilter=1005,e.NearestMipMapNearestFilter=1004,e.NearestMipmapLinearFilter=We,e.NearestMipmapNearestFilter=ke,e.NeverDepth=be,e.NeverStencilFunc=512,e.NoBlending=K,e.NoColors=o,e.NoToneMapping=Pe,e.NormalBlending=$,e.NotEqualDepth=Le,e.NotEqualStencilFunc=517,e.NumberKeyframeTrack=Zc,e.Object3D=mn,e.ObjectLoader=th,e.ObjectSpaceNormalMap=bt,e.OctahedronBufferGeometry=Os,e.OctahedronGeometry=Cs,e.OneFactor=he,e.OneMinusDstAlphaFactor=ge,e.OneMinusDstColorFactor=ye,e.OneMinusSrcAlphaFactor=fe,e.OneMinusSrcColorFactor=pe,e.OrthographicCamera=kl,e.PCFShadowMap=j,e.PCFSoftShadowMap=k,e.ParametricBufferGeometry=Es,e.ParametricGeometry=Ts,e.Particle=function(e){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new Wo(e)},e.ParticleBasicMaterial=function(e){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new ds(e)},e.ParticleSystem=function(e,t){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new ys(e,t)},e.ParticleSystemMaterial=function(e){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new ds(e)},e.Path=Nl,e.PerspectiveCamera=dr,e.Plane=kn,e.PlaneBufferGeometry=Er,e.PlaneGeometry=Tr,e.PlaneHelper=ju,e.PointCloud=function(e,t){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new ys(e,t)},e.PointCloudMaterial=function(e){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new ds(e)},e.PointLight=jl,e.PointLightHelper=yu,e.Points=ys,e.PointsMaterial=ds,e.PolarGridHelper=Eu,e.PolyhedronBufferGeometry=Ls,e.PolyhedronGeometry=As,e.PositionalAudio=Ph,e.PositionalAudioHelper=Au,e.PropertyBinding=kh,e.PropertyMixer=Oh,e.QuadraticBezierCurve=Pl,e.QuadraticBezierCurve3=Cl,e.Quaternion=Pt,e.QuaternionKeyframeTrack=Qc,e.QuaternionLinearInterpolant=Jc,e.REVISION="110",e.RGBADepthPacking=yt,e.RGBAFormat=nt,e.RGBA_ASTC_10x10_Format=B,e.RGBA_ASTC_10x5_Format=I,e.RGBA_ASTC_10x6_Format=N,e.RGBA_ASTC_10x8_Format=z,e.RGBA_ASTC_12x10_Format=U,e.RGBA_ASTC_12x12_Format=F,e.RGBA_ASTC_4x4_Format=T,e.RGBA_ASTC_5x4_Format=E,e.RGBA_ASTC_5x5_Format=A,e.RGBA_ASTC_6x5_Format=L,e.RGBA_ASTC_6x6_Format=R,e.RGBA_ASTC_8x5_Format=P,e.RGBA_ASTC_8x6_Format=C,e.RGBA_ASTC_8x8_Format=D,e.RGBA_PVRTC_2BPPV1_Format=M,e.RGBA_PVRTC_4BPPV1_Format=_,e.RGBA_S3TC_DXT1_Format=g,e.RGBA_S3TC_DXT3_Format=y,e.RGBA_S3TC_DXT5_Format=x,e.RGBDEncoding=gt,e.RGBEEncoding=pt,e.RGBEFormat=t,e.RGBFormat=tt,e.RGBM16Encoding=mt,e.RGBM7Encoding=ft,e.RGB_ETC1_Format=S,e.RGB_PVRTC_2BPPV1_Format=w,e.RGB_PVRTC_4BPPV1_Format=b,e.RGB_S3TC_DXT1_Format=m,e.RawShaderMaterial=Cc,e.Ray=Gn,e.Raycaster=Jh,e.RectAreaLight=Yl,e.RectAreaLightHelper=xu,e.RedFormat=f,e.ReinhardToneMapping=Oe,e.RepeatWrapping=G,e.ReplaceStencilOp=7681,e.ReverseSubtractEquation=oe,e.RingBufferGeometry=gc,e.RingGeometry=mc,e.Scene=gn,e.SceneUtils=$u,e.ShaderChunk=br,e.ShaderLib=_r,e.ShaderMaterial=ur,e.ShadowMaterial=Pc,e.Shape=zl,e.ShapeBufferGeometry=bc,e.ShapeGeometry=xc,e.ShapePath=sh,e.ShapeUtils=rc,e.ShortType=a,e.Skeleton=$o,e.SkeletonHelper=vu,e.SkinnedMesh=Jo,e.SmoothShading=2,e.Sphere=On,e.SphereBufferGeometry=fc,e.SphereGeometry=dc,e.Spherical=$h,e.SphericalHarmonics3=ph,e.SphericalReflectionMapping=Ge,e.Spline=Qu,e.SplineCurve=Ol,e.SplineCurve3=Ju,e.SpotLight=Hl,e.SpotLightHelper=du,e.SpotLightShadow=Gl,e.Sprite=Wo,e.SpriteMaterial=Oo,e.SrcAlphaFactor=de,e.SrcAlphaSaturateFactor=xe,e.SrcColorFactor=ue,e.StaticCopyUsage=35046,e.StaticDrawUsage=Mt,e.StaticReadUsage=35045,e.StereoCamera=yh,e.StreamCopyUsage=35042,e.StreamDrawUsage=35040,e.StreamReadUsage=35041,e.StringKeyframeTrack=Kc,e.SubtractEquation=ae,e.SubtractiveBlending=te,e.TOUCH={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},e.TangentSpaceNormalMap=xt,e.TetrahedronBufferGeometry=Ps,e.TetrahedronGeometry=Rs,e.TextBufferGeometry=pc,e.TextGeometry=uc,e.Texture=Ft,e.TextureLoader=dl,e.TorusBufferGeometry=Vs,e.TorusGeometry=Hs,e.TorusKnotBufferGeometry=Gs,e.TorusKnotGeometry=Fs,e.Triangle=ti,e.TriangleFanDrawMode=2,e.TriangleStripDrawMode=1,e.TrianglesDrawMode=lt,e.TubeBufferGeometry=Us,e.TubeGeometry=Bs,e.UVMapping=300,e.Uint16Attribute=function(e,t){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new yi(e,t)},e.Uint16BufferAttribute=yi,e.Uint32Attribute=function(e,t){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new bi(e,t)},e.Uint32BufferAttribute=bi,e.Uint8Attribute=function(e,t){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new mi(e,t)},e.Uint8BufferAttribute=mi,e.Uint8ClampedAttribute=function(e,t){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new gi(e,t)},e.Uint8ClampedBufferAttribute=gi,e.Uncharted2ToneMapping=De,e.Uniform=Yh,e.UniformsLib=wr,e.UniformsUtils=cr,e.UnsignedByteType=Ze,e.UnsignedInt248Type=et,e.UnsignedIntType=Qe,e.UnsignedShort4444Type=c,e.UnsignedShort5551Type=l,e.UnsignedShort565Type=h,e.UnsignedShortType=Je,e.VSMShadowMap=W,e.Vector2=Rt,e.Vector3=Dt,e.Vector4=Gt,e.VectorKeyframeTrack=$c,e.Vertex=function(e,t,n){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new Dt(e,t,n)},e.VertexColors=2,e.VertexNormalsHelper=uu,e.VideoTexture=bs,e.WebGLMultisampleRenderTarget=Vt,e.WebGLRenderTarget=Ht,e.WebGLRenderTargetCube=mr,e.WebGLRenderer=Ao,e.WebGLUtils=go,e.WireframeGeometry=Ss,e.WireframeHelper=function(e,t){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new us(new Ss(e.geometry),new ns({color:void 0!==t?t:16777215}))},e.WrapAroundEnding=ct,e.XHRLoader=function(e){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new sl(e)},e.ZeroCurvatureEnding=ot,e.ZeroFactor=le,e.ZeroSlopeEnding=st,e.ZeroStencilOp=0,e.sRGBEncoding=n,Object.defineProperty(e,"__esModule",{value:!0})}),THREE.MTLLoader=function(manager){THREE.Loader.call(this,manager)},THREE.MTLLoader.prototype=Object.assign(Object.create(THREE.Loader.prototype),{constructor:THREE.MTLLoader,load:function(url,onLoad,onProgress,onError){var scope=this,path=""===this.path?THREE.LoaderUtils.extractUrlBase(url):this.path,loader=new THREE.FileLoader(this.manager);loader.setPath(this.path),loader.load(url,function(text){onLoad(scope.parse(text,path))},onProgress,onError)},setMaterialOptions:function(value){return this.materialOptions=value,this},parse:function(text,path){for(var lines=text.split("\n"),info={},delimiter_pattern=/\s+/,materialsInfo={},i=0;i<lines.length;i++){var pos,key,ss,value,line=lines[i];0!==(line=line.trim()).length&&"#"!==line.charAt(0)&&(key=(key=0<=(pos=line.indexOf(" "))?line.substring(0,pos):line).toLowerCase(),value=(value=0<=pos?line.substring(pos+1):"").trim(),"newmtl"===key?(info={name:value},materialsInfo[value]=info):"ka"===key||"kd"===key||"ks"===key||"ke"===key?(ss=value.split(delimiter_pattern,3),info[key]=[parseFloat(ss[0]),parseFloat(ss[1]),parseFloat(ss[2])]):info[key]=value)}var materialCreator=new THREE.MTLLoader.MaterialCreator(this.resourcePath||path,this.materialOptions);return materialCreator.setCrossOrigin(this.crossOrigin),materialCreator.setManager(this.manager),materialCreator.setMaterials(materialsInfo),materialCreator}}),THREE.MTLLoader.MaterialCreator=function(baseUrl,options){this.baseUrl=baseUrl||"",this.options=options,this.materialsInfo={},this.materials={},this.materialsArray=[],this.nameLookup={},this.side=this.options&&this.options.side?this.options.side:THREE.FrontSide,this.wrap=this.options&&this.options.wrap?this.options.wrap:THREE.RepeatWrapping},THREE.MTLLoader.MaterialCreator.prototype={constructor:THREE.MTLLoader.MaterialCreator,crossOrigin:"anonymous",setCrossOrigin:function(value){return this.crossOrigin=value,this},setManager:function(value){this.manager=value},setMaterials:function(materialsInfo){this.materialsInfo=this.convert(materialsInfo),this.materials={},this.materialsArray=[],this.nameLookup={}},convert:function(materialsInfo){if(!this.options)return materialsInfo;var mn,converted={};for(mn in materialsInfo){var prop,mat=materialsInfo[mn],covmat={};for(prop in converted[mn]=covmat,mat){var save=!0,value=mat[prop],lprop=prop.toLowerCase();switch(lprop){case"kd":case"ka":case"ks":this.options&&this.options.normalizeRGB&&(value=[value[0]/255,value[1]/255,value[2]/255]),this.options&&this.options.ignoreZeroRGBs&&0===value[0]&&0===value[1]&&0===value[2]&&(save=!1)}save&&(covmat[lprop]=value)}}return converted},preload:function(){for(var mn in this.materialsInfo)this.create(mn)},getIndex:function(materialName){return this.nameLookup[materialName]},getAsArray:function(){var mn,index=0;for(mn in this.materialsInfo)this.materialsArray[index]=this.create(mn),this.nameLookup[mn]=index,index++;return this.materialsArray},create:function(materialName){return void 0===this.materials[materialName]&&this.createMaterial_(materialName),this.materials[materialName]},createMaterial_:function(materialName){var prop,scope=this,mat=this.materialsInfo[materialName],params={name:materialName,side:this.side};function setMapForType(mapType,value){var texParams,map,baseUrl,url;params[mapType]||(texParams=scope.getTextureParams(value,params),(map=scope.loadTexture((baseUrl=scope.baseUrl,"string"!=typeof(url=texParams.url)||""===url?"":/^https?:\/\//i.test(url)?url:baseUrl+url))).repeat.copy(texParams.scale),map.offset.copy(texParams.offset),map.wrapS=scope.wrap,map.wrapT=scope.wrap,params[mapType]=map)}for(prop in mat){var n,value=mat[prop];if(""!==value)switch(prop.toLowerCase()){case"kd":params.color=(new THREE.Color).fromArray(value);break;case"ks":params.specular=(new THREE.Color).fromArray(value);break;case"ke":params.emissive=(new THREE.Color).fromArray(value);break;case"map_kd":setMapForType("map",value);break;case"map_ks":setMapForType("specularMap",value);break;case"map_ke":setMapForType("emissiveMap",value);break;case"norm":setMapForType("normalMap",value);break;case"map_bump":case"bump":setMapForType("bumpMap",value);break;case"map_d":setMapForType("alphaMap",value),params.transparent=!0;break;case"ns":params.shininess=parseFloat(value);break;case"d":(n=parseFloat(value))<1&&(params.opacity=n,params.transparent=!0);break;case"tr":n=parseFloat(value),this.options&&this.options.invertTrProperty&&(n=1-n),0<n&&(params.opacity=1-n,params.transparent=!0)}}return this.materials[materialName]=new THREE.MeshPhongMaterial(params),this.materials[materialName]},getTextureParams:function(value,matParams){var texParams={scale:new THREE.Vector2(1,1),offset:new THREE.Vector2(0,0)},items=value.split(/\s+/),pos=items.indexOf("-bm");return 0<=pos&&(matParams.bumpScale=parseFloat(items[pos+1]),items.splice(pos,2)),0<=(pos=items.indexOf("-s"))&&(texParams.scale.set(parseFloat(items[pos+1]),parseFloat(items[pos+2])),items.splice(pos,4)),0<=(pos=items.indexOf("-o"))&&(texParams.offset.set(parseFloat(items[pos+1]),parseFloat(items[pos+2])),items.splice(pos,4)),texParams.url=items.join(" ").trim(),texParams},loadTexture:function(url,mapping,onLoad,onProgress,onError){var texture,manager=void 0!==this.manager?this.manager:THREE.DefaultLoadingManager,loader=manager.getHandler(url);return null===loader&&(loader=new THREE.TextureLoader(manager)),loader.setCrossOrigin&&loader.setCrossOrigin(this.crossOrigin),texture=loader.load(url,onLoad,onProgress,onError),void 0!==mapping&&(texture.mapping=mapping),texture}},THREE.OBJLoader=function(){var object_pattern=/^[og]\s*(.+)?/,material_library_pattern=/^mtllib /,material_use_pattern=/^usemtl /;function ParserState(){var state={objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materialLibraries:[],startObject:function(name,fromDeclaration){if(this.object&&!1===this.object.fromDeclaration)return this.object.name=name,void(this.object.fromDeclaration=!1!==fromDeclaration);var declared,previousMaterial=this.object&&"function"==typeof this.object.currentMaterial?this.object.currentMaterial():void 0;this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0),this.object={name:name||"",fromDeclaration:!1!==fromDeclaration,geometry:{vertices:[],normals:[],colors:[],uvs:[]},materials:[],smooth:!0,startMaterial:function(name,libraries){var previous=this._finalize(!1);previous&&(previous.inherited||previous.groupCount<=0)&&this.materials.splice(previous.index,1);var material={index:this.materials.length,name:name||"",mtllib:Array.isArray(libraries)&&0<libraries.length?libraries[libraries.length-1]:"",smooth:void 0!==previous?previous.smooth:this.smooth,groupStart:void 0!==previous?previous.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(index){var cloned={index:"number"==typeof index?index:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return cloned.clone=this.clone.bind(cloned),cloned}};return this.materials.push(material),material},currentMaterial:function(){if(0<this.materials.length)return this.materials[this.materials.length-1]},_finalize:function(end){var lastMultiMaterial=this.currentMaterial();if(lastMultiMaterial&&-1===lastMultiMaterial.groupEnd&&(lastMultiMaterial.groupEnd=this.geometry.vertices.length/3,lastMultiMaterial.groupCount=lastMultiMaterial.groupEnd-lastMultiMaterial.groupStart,lastMultiMaterial.inherited=!1),end&&1<this.materials.length)for(var mi=this.materials.length-1;0<=mi;mi--)this.materials[mi].groupCount<=0&&this.materials.splice(mi,1);return end&&0===this.materials.length&&this.materials.push({name:"",smooth:this.smooth}),lastMultiMaterial}},previousMaterial&&previousMaterial.name&&"function"==typeof previousMaterial.clone&&((declared=previousMaterial.clone(0)).inherited=!0,this.object.materials.push(declared)),this.objects.push(this.object)},finalize:function(){this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0)},parseVertexIndex:function(value,len){var index=parseInt(value,10);return 3*(0<=index?index-1:index+len/3)},parseNormalIndex:function(value,len){var index=parseInt(value,10);return 3*(0<=index?index-1:index+len/3)},parseUVIndex:function(value,len){var index=parseInt(value,10);return 2*(0<=index?index-1:index+len/2)},addVertex:function(a,b,c){var src=this.vertices,dst=this.object.geometry.vertices;dst.push(src[a+0],src[a+1],src[a+2]),dst.push(src[b+0],src[b+1],src[b+2]),dst.push(src[c+0],src[c+1],src[c+2])},addVertexPoint:function(a){var src=this.vertices;this.object.geometry.vertices.push(src[a+0],src[a+1],src[a+2])},addVertexLine:function(a){var src=this.vertices;this.object.geometry.vertices.push(src[a+0],src[a+1],src[a+2])},addNormal:function(a,b,c){var src=this.normals,dst=this.object.geometry.normals;dst.push(src[a+0],src[a+1],src[a+2]),dst.push(src[b+0],src[b+1],src[b+2]),dst.push(src[c+0],src[c+1],src[c+2])},addColor:function(a,b,c){var src=this.colors,dst=this.object.geometry.colors;dst.push(src[a+0],src[a+1],src[a+2]),dst.push(src[b+0],src[b+1],src[b+2]),dst.push(src[c+0],src[c+1],src[c+2])},addUV:function(a,b,c){var src=this.uvs,dst=this.object.geometry.uvs;dst.push(src[a+0],src[a+1]),dst.push(src[b+0],src[b+1]),dst.push(src[c+0],src[c+1])},addUVLine:function(a){var src=this.uvs;this.object.geometry.uvs.push(src[a+0],src[a+1])},addFace:function(a,b,c,ua,ub,uc,na,nb,nc){var uvLen,nLen,vLen=this.vertices.length,ia=this.parseVertexIndex(a,vLen),ib=this.parseVertexIndex(b,vLen),ic=this.parseVertexIndex(c,vLen);this.addVertex(ia,ib,ic),0<this.colors.length&&this.addColor(ia,ib,ic),void 0!==ua&&""!==ua&&(uvLen=this.uvs.length,ia=this.parseUVIndex(ua,uvLen),ib=this.parseUVIndex(ub,uvLen),ic=this.parseUVIndex(uc,uvLen),this.addUV(ia,ib,ic)),void 0!==na&&""!==na&&(nLen=this.normals.length,ia=this.parseNormalIndex(na,nLen),ib=na===nb?ia:this.parseNormalIndex(nb,nLen),ic=na===nc?ia:this.parseNormalIndex(nc,nLen),this.addNormal(ia,ib,ic))},addPointGeometry:function(vertices){this.object.geometry.type="Points";for(var vLen=this.vertices.length,vi=0,l=vertices.length;vi<l;vi++)this.addVertexPoint(this.parseVertexIndex(vertices[vi],vLen))},addLineGeometry:function(vertices,uvs){this.object.geometry.type="Line";for(var vLen=this.vertices.length,uvLen=this.uvs.length,vi=0,l=vertices.length;vi<l;vi++)this.addVertexLine(this.parseVertexIndex(vertices[vi],vLen));for(var uvi=0,l=uvs.length;uvi<l;uvi++)this.addUVLine(this.parseUVIndex(uvs[uvi],uvLen))}};return state.startObject("",!1),state}function OBJLoader(manager){THREE.Loader.call(this,manager),this.materials=null}return OBJLoader.prototype=Object.assign(Object.create(THREE.Loader.prototype),{constructor:OBJLoader,load:function(url,onLoad,onProgress,onError){var scope=this,loader=new THREE.FileLoader(scope.manager);loader.setPath(this.path),loader.load(url,function(text){onLoad(scope.parse(text))},onProgress,onError)},setMaterials:function(materials){return this.materials=materials,this},parse:function(text){console.time("OBJLoader");var state=new ParserState;-1!==text.indexOf("\r\n")&&(text=text.replace(/\r\n/g,"\n")),-1!==text.indexOf("\\\n")&&(text=text.replace(/\\\n/g,""));for(var lineFirstChar,value,lines=text.split("\n"),line="",result=[],trimLeft="function"==typeof"".trimLeft,i=0,l=lines.length;i<l;i++)if(line=lines[i],0!==(line=trimLeft?line.trimLeft():line.trim()).length&&"#"!==(lineFirstChar=line.charAt(0)))if("v"===lineFirstChar){var data=line.split(/\s+/);switch(data[0]){case"v":state.vertices.push(parseFloat(data[1]),parseFloat(data[2]),parseFloat(data[3])),7<=data.length&&state.colors.push(parseFloat(data[4]),parseFloat(data[5]),parseFloat(data[6]));break;case"vn":state.normals.push(parseFloat(data[1]),parseFloat(data[2]),parseFloat(data[3]));break;case"vt":state.uvs.push(parseFloat(data[1]),parseFloat(data[2]))}}else if("f"===lineFirstChar){for(var vertexData=line.substr(1).trim().split(/\s+/),faceVertices=[],j=0,jl=vertexData.length;j<jl;j++){var vertexParts,vertex=vertexData[j];0<vertex.length&&(vertexParts=vertex.split("/"),faceVertices.push(vertexParts))}for(var v1=faceVertices[0],j=1,jl=faceVertices.length-1;j<jl;j++){var v2=faceVertices[j],v3=faceVertices[j+1];state.addFace(v1[0],v2[0],v3[0],v1[1],v2[1],v3[1],v1[2],v2[2],v3[2])}}else if("l"===lineFirstChar){var lineParts=line.substring(1).trim().split(" "),lineVertices=[],lineUVs=[];if(-1===line.indexOf("/"))lineVertices=lineParts;else for(var li=0,llen=lineParts.length;li<llen;li++){var parts=lineParts[li].split("/");""!==parts[0]&&lineVertices.push(parts[0]),""!==parts[1]&&lineUVs.push(parts[1])}state.addLineGeometry(lineVertices,lineUVs)}else if("p"===lineFirstChar){var pointData=line.substr(1).trim().split(" ");state.addPointGeometry(pointData)}else if(null!==(result=object_pattern.exec(line))){var name=(" "+result[0].substr(1).trim()).substr(1);state.startObject(name)}else if(material_use_pattern.test(line))state.object.startMaterial(line.substring(7).trim(),state.materialLibraries);else if(material_library_pattern.test(line))state.materialLibraries.push(line.substring(7).trim());else{if("s"!==lineFirstChar){if("\0"===line)continue;throw new Error('THREE.OBJLoader: Unexpected line: "'+line+'"')}1<(result=line.split(" ")).length?(value=result[1].trim().toLowerCase(),state.object.smooth="0"!==value&&"off"!==value):state.object.smooth=!0,(material=state.object.currentMaterial())&&(material.smooth=state.object.smooth)}state.finalize();var container=new THREE.Group;container.materialLibraries=[].concat(state.materialLibraries);for(i=0,l=state.objects.length;i<l;i++){var object=state.objects[i],geometry=object.geometry,materials=object.materials,isLine="Line"===geometry.type,isPoints="Points"===geometry.type,hasVertexColors=!1;if(0!==geometry.vertices.length){var buffergeometry=new THREE.BufferGeometry;buffergeometry.setAttribute("position",new THREE.Float32BufferAttribute(geometry.vertices,3)),0<geometry.normals.length?buffergeometry.setAttribute("normal",new THREE.Float32BufferAttribute(geometry.normals,3)):buffergeometry.computeVertexNormals(),0<geometry.colors.length&&(hasVertexColors=!0,buffergeometry.setAttribute("color",new THREE.Float32BufferAttribute(geometry.colors,3))),0<geometry.uvs.length&&buffergeometry.setAttribute("uv",new THREE.Float32BufferAttribute(geometry.uvs,2));for(var mesh,createdMaterials=[],mi=0,miLen=materials.length;mi<miLen;mi++){var materialPoints,materialLine,sourceMaterial=materials[mi],material=void 0;null!==this.materials&&(material=this.materials.create(sourceMaterial.name),!isLine||!material||material instanceof THREE.LineBasicMaterial?!isPoints||!material||material instanceof THREE.PointsMaterial||(materialPoints=new THREE.PointsMaterial({size:10,sizeAttenuation:!1}),THREE.Material.prototype.copy.call(materialPoints,material),materialPoints.color.copy(material.color),materialPoints.map=material.map,material=materialPoints):(materialLine=new THREE.LineBasicMaterial,THREE.Material.prototype.copy.call(materialLine,material),materialLine.color.copy(material.color),material=materialLine)),material||((material=isLine?new THREE.LineBasicMaterial:isPoints?new THREE.PointsMaterial({size:1,sizeAttenuation:!1}):new THREE.MeshPhongMaterial).name=sourceMaterial.name),material.flatShading=!sourceMaterial.smooth,material.vertexColors=hasVertexColors?THREE.VertexColors:THREE.NoColors,createdMaterials.push(material)}if(1<createdMaterials.length){for(mi=0,miLen=materials.length;mi<miLen;mi++){sourceMaterial=materials[mi];buffergeometry.addGroup(sourceMaterial.groupStart,sourceMaterial.groupCount,mi)}mesh=isLine?new THREE.LineSegments(buffergeometry,createdMaterials):isPoints?new THREE.Points(buffergeometry,createdMaterials):new THREE.Mesh(buffergeometry,createdMaterials)}else mesh=isLine?new THREE.LineSegments(buffergeometry,createdMaterials[0]):isPoints?new THREE.Points(buffergeometry,createdMaterials[0]):new THREE.Mesh(buffergeometry,createdMaterials[0]);mesh.name=object.name,container.add(mesh)}}return console.timeEnd("OBJLoader"),container}}),OBJLoader}(),THREE.FirstPersonControls=function(object,domElement){void 0===domElement&&(console.warn('THREE.FirstPersonControls: The second parameter "domElement" is now mandatory.'),domElement=document),this.object=object,this.domElement=domElement,this.meshs=void 0,this.enabled=!0,this.movementSpeed=1,this.lookSpeed=.005,this.lookVertical=!0,this.autoForward=!1,this.activeLook=!0,this.heightSpeed=!1,this.heightCoef=1,this.heightMin=0,this.heightMax=1,this.constrainVertical=!1,this.verticalMin=0,this.verticalMax=Math.PI,this.mouseDragOn=!1,this.autoSpeedFactor=0,this.mouseX=0,this.mouseY=0,this.moveForward=!1,this.moveBackward=!1,this.moveLeft=!1,this.moveRight=!1,this.moveUp=!1,this.moveDown=!1,this.movePrev=new THREE.Vector2,this.raycaster=new THREE.Raycaster(new THREE.Vector3,new THREE.Vector3(0,-1,0),0,.2),this.viewHalfX=0;this.viewHalfY=0;var lookDirection=new THREE.Vector3,spherical=new THREE.Spherical,target=new THREE.Vector3,euler=new THREE.Euler(0,0,0,"ZYX"),m4=new THREE.Matrix4,positionWC=new THREE.Vector3;function contextmenu(event){event.preventDefault()}this.domElement!==document&&this.domElement.setAttribute("tabindex",-1),this.handleResize=function(){this.domElement===document?(this.viewHalfX=window.innerWidth/2,this.viewHalfY=window.innerHeight/2):(this.viewHalfX=this.domElement.offsetWidth/2,this.viewHalfY=this.domElement.offsetHeight/2)},this.onMouseDown=function(event){this.domElement!==document&&this.domElement.focus(),event.preventDefault(),event.stopPropagation(),this.activeLook&&0===event.button&&this.movePrev.set(event.pageX,event.pageY),this.mouseDragOn=!0},this.onMouseUp=function(event){if(event.preventDefault(),event.stopPropagation(),this.activeLook)switch(event.button){case 0:this.moveForward=!1,this.headingDiat=0,this.pitchDiat=0;break;case 2:this.moveBackward=!1}this.mouseDragOn=!1},this.onMouseMove=function(event){var x,y,diatX,diatY;this.domElement===document?(this.mouseX=event.pageX-this.viewHalfX,this.mouseY=event.pageY-this.viewHalfY):(this.mouseX=event.pageX-this.domElement.offsetLeft-this.viewHalfX,this.mouseY=event.pageY-this.domElement.offsetTop-this.viewHalfY),!1!==this.enabled&&this.mouseDragOn&&(x=event.pageX,y=event.pageY,x===this.movePrev.x&&y===this.movePrev.y||(diatX=(x-this.movePrev.x)/this.viewHalfX/2*.8,diatY=(y-this.movePrev.y)/this.viewHalfY/2*.8,euler.setFromQuaternion(this.object.quaternion),euler.z+=diatX,euler.x+=diatY,euler.x=Math.max(0,Math.min(115*Math.PI/180,euler.x)),this.object.quaternion.setFromEuler(euler),this.movePrev.x=x,this.movePrev.y=y))},this.onKeyDown=function(event){switch(event.keyCode){case 38:case 87:this.moveForward=!0;break;case 37:case 65:this.moveLeft=!0;break;case 40:case 83:this.moveBackward=!0;break;case 39:case 68:this.moveRight=!0;break;case 82:this.moveUp=!0;break;case 70:this.moveDown=!0;break;case 32:this.moveUp=!0}},this.onKeyUp=function(event){switch(event.keyCode){case 38:case 87:this.moveForward=!1;break;case 37:case 65:this.moveLeft=!1;break;case 40:case 83:this.moveBackward=!1;break;case 39:case 68:this.moveRight=!1;break;case 82:case 32:this.moveUp=!1;break;case 70:this.moveDown=!1}},this.lookAt=function(x,y,z){return x.isVector3?target.copy(x):target.set(x,y,z),this.object.lookAt(target),setOrientation(this),this},this.intersectObjects=function(origin,direction,far){this.raycaster.ray.origin.copy(origin),this.raycaster.ray.direction.copy(direction),this.raycaster.far=far;var intersections=this.raycaster.intersectObjects(this.meshs);return 0<intersections.length?intersections[0].distance:0},this.intersectObjectsXYZ=function(v3,index,signed,quaternion){var distance=0,far=.2,sign=v3.y?v3.y:v3.x?v3.x:0;return this.object.getWorldPosition(positionWC),v3.applyQuaternion(quaternion),0===index?(distance=this.intersectObjects(positionWC,v3,far))&&(m4.makeTranslation(0,0,(far-distance+.001)*sign*signed),this.object.matrix.multiply(m4),this.object.matrix.decompose(this.object.position,this.object.quaternion,this.object.scale)):1===index?(distance=this.intersectObjects(positionWC,v3,far))&&(m4.makeTranslation((far-distance+.001)*sign*signed,0,0),this.object.matrix.multiply(m4),this.object.matrix.decompose(this.object.position,this.object.quaternion,this.object.scale)):(far=.3,(distance=this.intersectObjects(positionWC,v3,far))&&(m4.makeTranslation(0,.05*signed,0),this.object.matrix.multiply(m4),this.object.matrix.decompose(this.object.position,this.object.quaternion,this.object.scale))),!distance},this.update=function(){new THREE.Vector3;var f=new THREE.Vector3,b=new THREE.Vector3,l=new THREE.Vector3,r=new THREE.Vector3,u=new THREE.Vector3,d=new THREE.Vector3,X=new THREE.Vector3(1,0,0),Y=new THREE.Vector3(0,1,0),Z=new THREE.Vector3(0,0,1),position=new THREE.Vector3,scale=new THREE.Vector3,quaternion=new THREE.Quaternion,LRSigned=1,FBSigned=1;return function(delta){var actualMoveSpeed,heading;!1!==this.enabled&&(actualMoveSpeed=delta*this.movementSpeed,heading=this.object.heading,FBSigned=45<heading&&heading<135?(f.copy(X),b.copy(X),b.negate(),l.copy(Y),r.copy(Y),r.negate(),LRSigned=1):135<=heading&&heading<=225?(f.copy(Y),f.negate(),b.copy(Y),l.copy(X),r.copy(X),r.negate(),-(LRSigned=1)):225<heading&&heading<315?(f.copy(X),f.negate(),b.copy(X),l.copy(Y),l.negate(),r.copy(Y),LRSigned=-1):(f.copy(Y),b.copy(Y),b.negate(),l.copy(X),l.negate(),r.copy(X),LRSigned=-1,1),u.copy(Z),d.copy(Z),d.negate(),this.object.parent&&this.object.parent.matrixWorld.decompose(position,quaternion,scale),this.moveForward&&(this.intersectObjectsXYZ(f,0,FBSigned,quaternion)&&(this.intersectObjectsXYZ(l,1,LRSigned,quaternion)&&(this.intersectObjectsXYZ(r,1,LRSigned,quaternion)&&this.intersectObjectsXYZ(d,2,1,quaternion))))&&this.object.translateZ(-(actualMoveSpeed+this.autoSpeedFactor)),this.moveBackward&&(this.intersectObjectsXYZ(b,0,FBSigned,quaternion)&&(this.intersectObjectsXYZ(l,1,LRSigned,quaternion)&&(this.intersectObjectsXYZ(r,1,LRSigned,quaternion)&&this.intersectObjectsXYZ(d,2,1,quaternion))))&&this.object.translateZ(actualMoveSpeed),this.moveLeft&&(this.intersectObjectsXYZ(l,1,LRSigned,quaternion)&&(this.intersectObjectsXYZ(f,0,FBSigned,quaternion)&&this.intersectObjectsXYZ(b,0,FBSigned,quaternion)))&&this.object.translateX(-actualMoveSpeed),this.moveRight&&(this.intersectObjectsXYZ(r,1,LRSigned,quaternion)&&(this.intersectObjectsXYZ(f,0,FBSigned,quaternion)&&this.intersectObjectsXYZ(b,0,FBSigned,quaternion)))&&this.object.translateX(actualMoveSpeed),this.moveUp&&this.intersectObjectsXYZ(u,2,-1,quaternion)&&this.object.translateY(actualMoveSpeed),this.moveDown&&this.intersectObjectsXYZ(d,2,1,quaternion)&&this.object.translateY(-actualMoveSpeed))}}(),this.dispose=function(){this.domElement.removeEventListener("contextmenu",contextmenu,!1),this.domElement.removeEventListener("pointerdown",_onMouseDown,!1),this.domElement.removeEventListener("pointermove",_onMouseMove,!1),this.domElement.removeEventListener("pointerup",_onMouseUp,!1),window.removeEventListener("keydown",_onKeyDown,!1),window.removeEventListener("keyup",_onKeyUp,!1)};var _onMouseMove=bind(this,this.onMouseMove),_onMouseDown=bind(this,this.onMouseDown),_onMouseUp=bind(this,this.onMouseUp),_onKeyDown=bind(this,this.onKeyDown),_onKeyUp=bind(this,this.onKeyUp);function bind(scope,fn){return function(){fn.apply(scope,arguments)}}function setOrientation(controls){var quaternion=controls.object.quaternion;lookDirection.set(0,0,-1).applyQuaternion(quaternion),spherical.setFromVector3(lookDirection),THREE.Math.radToDeg(spherical.phi),THREE.Math.radToDeg(spherical.theta)}this.domElement.addEventListener("contextmenu",contextmenu,!1),this.domElement.addEventListener("pointermove",_onMouseMove,!1),this.domElement.addEventListener("pointerdown",_onMouseDown,!1),this.domElement.addEventListener("pointerup",_onMouseUp,!1),window.addEventListener("keydown",_onKeyDown,!1),window.addEventListener("keyup",_onKeyUp,!1),this.handleResize(),setOrientation(this)};