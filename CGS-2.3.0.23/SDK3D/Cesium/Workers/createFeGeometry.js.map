{"version":3,"file":"createFeGeometry.js","sources":["../../../../Source/Core/FeGeometryCreator.js","../../../../Source/WorkersES6/createFeGeometry.js"],"sourcesContent":["/*\r\n\t添加空中雷达几何体创建  刘雨  20170708\r\n*/\r\nimport BoundingSphere from \"./BoundingSphere.js\";\r\nimport Cartesian3 from \"./Cartesian3.js\";\r\nimport ComponentDatatype from \"./ComponentDatatype.js\";\r\nimport defaultValue from \"./defaultValue.js\";\r\nimport defined from \"./defined.js\";\r\nimport Ellipsoid from \"./Ellipsoid.js\";\r\nimport Geometry from \"./Geometry.js\";\r\nimport GeometryAttribute from \"./GeometryAttribute.js\";\r\nimport GeometryAttributes from \"./GeometryAttributes.js\";\r\nimport PrimitiveType from \"./PrimitiveType.js\";\r\nimport VertexFormat from \"./VertexFormat.js\";\r\n\r\nfunction FeGeometryCreator(options) {\r\n  options = defaultValue(options, defaultValue.EMPTY_OBJECT);\r\n\r\n  var feGeometry = options.feGeometry;\r\n  if (!defined(feGeometry)) {\r\n    return;\r\n  }\r\n\r\n  this._feGeometry = feGeometry;\r\n  this._ellipsoid = Ellipsoid.clone(defaultValue(options.ellipsoid, Ellipsoid.WGS84));\r\n  this._vertexFormat = VertexFormat.clone(defaultValue(options.vertexFormat, VertexFormat.DEFAULT));\r\n  this._workerName = 'createFeGeometry';\r\n  this._primitiveType = defaultValue(options.primitiveType, PrimitiveType.TRIANGLES);\r\n}\r\n\r\nFeGeometryCreator.createGeometry = function (feGeometryCreator) {\r\n\r\n  var vertexFormat = feGeometryCreator._vertexFormat;\r\n  var ellipsoid = feGeometryCreator._ellipsoid;\r\n\r\n  var geo = new Geometry({\r\n    attributes: new GeometryAttributes(),\r\n    primitiveType: feGeometryCreator._primitiveType\r\n  });\r\n\r\n  geo.attributes.position = new GeometryAttribute({\r\n    componentDatatype: ComponentDatatype.DOUBLE,\r\n    componentsPerAttribute: 3,\r\n    values: feGeometryCreator._feGeometry._vertexArray\r\n  });\r\n\r\n  if (vertexFormat.st) {\r\n    geo.attributes.st = new GeometryAttribute({\r\n      componentDatatype: ComponentDatatype.FLOAT,\r\n      componentsPerAttribute: 2,\r\n      values: feGeometryCreator._feGeometry._textureArray\r\n    });\r\n  }\r\n\r\n  geo.indices = feGeometryCreator._feGeometry._indexArray;\r\n\r\n  var boundingSphere = BoundingSphere.fromVertices(geo.attributes.position.values, Cartesian3.ZERO, 3);\r\n\r\n  return new Geometry({\r\n    attributes: geo.attributes,\r\n    indices: geo.indices,\r\n    primitiveType: geo.primitiveType,\r\n    boundingSphere: boundingSphere\r\n  });\r\n};\r\n\r\nexport default FeGeometryCreator;\r\n","/*global define*/\r\nimport FeGeometryCreator from \"../Core/FeGeometryCreator.js\";\r\n\r\nfunction createFeGeometry(feGeometry, offset) {\r\n  return FeGeometryCreator.createGeometry(feGeometry);\r\n};\r\nexport default createFeGeometry;"],"names":["defaultValue","defined","Ellipsoid","VertexFormat","PrimitiveType","Geometry","GeometryAttributes","GeometryAttribute","ComponentDatatype","BoundingSphere","Cartesian3"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;EAAA;EACA;EACA;AAYA;EACA,SAAS,iBAAiB,CAAC,OAAO,EAAE;EACpC,EAAE,OAAO,GAAGA,iBAAY,CAAC,OAAO,EAAEA,iBAAY,CAAC,YAAY,CAAC,CAAC;AAC7D;EACA,EAAE,IAAI,UAAU,GAAG,OAAO,CAAC,UAAU,CAAC;EACtC,EAAE,IAAI,CAACC,YAAO,CAAC,UAAU,CAAC,EAAE;EAC5B,IAAI,OAAO;EACX,GAAG;AACH;EACA,EAAE,IAAI,CAAC,WAAW,GAAG,UAAU,CAAC;EAChC,EAAE,IAAI,CAAC,UAAU,GAAGC,oBAAS,CAAC,KAAK,CAACF,iBAAY,CAAC,OAAO,CAAC,SAAS,EAAEE,oBAAS,CAAC,KAAK,CAAC,CAAC,CAAC;EACtF,EAAE,IAAI,CAAC,aAAa,GAAGC,yBAAY,CAAC,KAAK,CAACH,iBAAY,CAAC,OAAO,CAAC,YAAY,EAAEG,yBAAY,CAAC,OAAO,CAAC,CAAC,CAAC;EACpG,EAAE,IAAI,CAAC,WAAW,GAAG,kBAAkB,CAAC;EACxC,EAAE,IAAI,CAAC,cAAc,GAAGH,iBAAY,CAAC,OAAO,CAAC,aAAa,EAAEI,+BAAa,CAAC,SAAS,CAAC,CAAC;EACrF,CAAC;AACD;EACA,iBAAiB,CAAC,cAAc,GAAG,UAAU,iBAAiB,EAAE;AAChE;EACA,EAAE,IAAI,YAAY,GAAG,iBAAiB,CAAC,aAAa,CAAC;EACrD,EAAE,IAAI,SAAS,GAAG,iBAAiB,CAAC,UAAU,CAAC;AAC/C;EACA,EAAE,IAAI,GAAG,GAAG,IAAIC,0BAAQ,CAAC;EACzB,IAAI,UAAU,EAAE,IAAIC,qCAAkB,EAAE;EACxC,IAAI,aAAa,EAAE,iBAAiB,CAAC,cAAc;EACnD,GAAG,CAAC,CAAC;AACL;EACA,EAAE,GAAG,CAAC,UAAU,CAAC,QAAQ,GAAG,IAAIC,mCAAiB,CAAC;EAClD,IAAI,iBAAiB,EAAEC,mCAAiB,CAAC,MAAM;EAC/C,IAAI,sBAAsB,EAAE,CAAC;EAC7B,IAAI,MAAM,EAAE,iBAAiB,CAAC,WAAW,CAAC,YAAY;EACtD,GAAG,CAAC,CAAC;AACL;EACA,EAAE,IAAI,YAAY,CAAC,EAAE,EAAE;EACvB,IAAI,GAAG,CAAC,UAAU,CAAC,EAAE,GAAG,IAAID,mCAAiB,CAAC;EAC9C,MAAM,iBAAiB,EAAEC,mCAAiB,CAAC,KAAK;EAChD,MAAM,sBAAsB,EAAE,CAAC;EAC/B,MAAM,MAAM,EAAE,iBAAiB,CAAC,WAAW,CAAC,aAAa;EACzD,KAAK,CAAC,CAAC;EACP,GAAG;AACH;EACA,EAAE,GAAG,CAAC,OAAO,GAAG,iBAAiB,CAAC,WAAW,CAAC,WAAW,CAAC;AAC1D;EACA,EAAE,IAAI,cAAc,GAAGC,yBAAc,CAAC,YAAY,CAAC,GAAG,CAAC,UAAU,CAAC,QAAQ,CAAC,MAAM,EAAEC,qBAAU,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC;AACvG;EACA,EAAE,OAAO,IAAIL,0BAAQ,CAAC;EACtB,IAAI,UAAU,EAAE,GAAG,CAAC,UAAU;EAC9B,IAAI,OAAO,EAAE,GAAG,CAAC,OAAO;EACxB,IAAI,aAAa,EAAE,GAAG,CAAC,aAAa;EACpC,IAAI,cAAc,EAAE,cAAc;EAClC,GAAG,CAAC,CAAC;EACL,CAAC;;EChED;AAEA;EACA,SAAS,gBAAgB,CAAC,UAAU,EAAE,MAAM,EAAE;EAC9C,EAAE,OAAO,iBAAiB,CAAC,cAAc,CAAC,UAAU,CAAC,CAAC;EACtD;;;;;;;;"}